var EO=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var cme=EO((Vs,Us)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function My(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const qn={},Yl=[],xn=()=>{},xO=()=>!1,em=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ny=t=>t.startsWith("onUpdate:"),kr=Object.assign,Fy=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},TO=Object.prototype.hasOwnProperty,hn=(t,e)=>TO.call(t,e),Ve=Array.isArray,Xl=t=>Bd(t)==="[object Map]",tm=t=>Bd(t)==="[object Set]",va=t=>Bd(t)==="[object Date]",pt=t=>typeof t=="function",ut=t=>typeof t=="string",wi=t=>typeof t=="symbol",Bt=t=>t!==null&&typeof t=="object",ul=t=>(Bt(t)||pt(t))&&pt(t.then)&&pt(t.catch),xk=Object.prototype.toString,Bd=t=>xk.call(t),CO=t=>Bd(t).slice(8,-1),Zc=t=>Bd(t)==="[object Object]",By=t=>ut(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Lc=My(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),nm=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},kO=/-(\w)/g,fs=nm(t=>t.replace(kO,(e,n)=>n?n.toUpperCase():"")),_O=/\B([A-Z])/g,$o=nm(t=>t.replace(_O,"-$1").toLowerCase()),Vd=nm(t=>t.charAt(0).toUpperCase()+t.slice(1)),Pc=nm(t=>t?`on${Vd(t)}`:""),ma=(t,e)=>!Object.is(t,e),fh=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Tk=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Hv=t=>{const e=parseFloat(t);return isNaN(e)?t:e},AO=t=>{const e=ut(t)?Number(t):NaN;return isNaN(e)?t:e};let KS;const rm=()=>KS||(KS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function mt(t){if(Ve(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=ut(r)?PO(r):mt(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(ut(t)||Bt(t))return t}const IO=/;(?![^(]*\))/g,RO=/:([^]+)/,LO=/\/\*[^]*?\*\//g;function PO(t){const e={};return t.replace(LO,"").split(IO).forEach(n=>{if(n){const r=n.split(RO);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function F(t){let e="";if(ut(t))e=t;else if(Ve(t))for(let n=0;n<t.length;n++){const r=F(t[n]);r&&(e+=r+" ")}else if(Bt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Ms(t){if(!t)return null;let{class:e,style:n}=t;return e&&!ut(e)&&(t.class=F(e)),n&&(t.style=mt(n)),t}const DO="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",OO=My(DO);function Ck(t){return!!t||t===""}function $O(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=hu(t[r],e[r]);return n}function hu(t,e){if(t===e)return!0;let n=va(t),r=va(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=wi(t),r=wi(e),n||r)return t===e;if(n=Ve(t),r=Ve(e),n||r)return n&&r?$O(t,e):!1;if(n=Bt(t),r=Bt(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),u=e.hasOwnProperty(o);if(a&&!u||!a&&u||!hu(t[o],e[o]))return!1}}return String(t)===String(e)}function kk(t,e){return t.findIndex(n=>hu(n,e))}const _k=t=>!!(t&&t.__v_isRef===!0),ze=t=>ut(t)?t:t==null?"":Ve(t)||Bt(t)&&(t.toString===xk||!pt(t.toString))?_k(t)?ze(t.value):JSON.stringify(t,Ak,2):String(t),Ak=(t,e)=>_k(e)?Ak(t,e.value):Xl(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[_g(r,i)+" =>"]=s,n),{})}:tm(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>_g(n))}:wi(e)?_g(e):Bt(e)&&!Ve(e)&&!Zc(e)?String(e):e,_g=(t,e="")=>{var n;return wi(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let qr;class Ik{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=qr,!e&&qr&&(this.index=(qr.scopes||(qr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=qr;try{return qr=this,e()}finally{qr=n}}}on(){++this._on===1&&(this.prevScope=qr,qr=this)}off(){this._on>0&&--this._on===0&&(qr=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function MO(t){return new Ik(t)}function Rk(){return qr}function Lk(t,e=!1){qr&&qr.cleanups.push(t)}let Zn;const Ag=new WeakSet;class Pk{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,qr&&qr.active&&qr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ag.has(this)&&(Ag.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ok(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,zS(this),$k(this);const e=Zn,n=bi;Zn=this,bi=!0;try{return this.fn()}finally{Mk(this),Zn=e,bi=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Hy(e);this.deps=this.depsTail=void 0,zS(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ag.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){jv(this)&&this.run()}get dirty(){return jv(this)}}let Dk=0,Dc,Oc;function Ok(t,e=!1){if(t.flags|=8,e){t.next=Oc,Oc=t;return}t.next=Dc,Dc=t}function Vy(){Dk++}function Uy(){if(--Dk>0)return;if(Oc){let e=Oc;for(Oc=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Dc;){let e=Dc;for(Dc=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function $k(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Mk(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Hy(r),NO(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function jv(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Nk(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Nk(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Jc)||(t.globalVersion=Jc,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!jv(t))))return;t.flags|=2;const e=t.dep,n=Zn,r=bi;Zn=t,bi=!0;try{$k(t);const s=t.fn(t._value);(e.version===0||ma(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Zn=n,bi=r,Mk(t),t.flags&=-3}}function Hy(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Hy(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function NO(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let bi=!0;const Fk=[];function Io(){Fk.push(bi),bi=!1}function Ro(){const t=Fk.pop();bi=t===void 0?!0:t}function zS(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Zn;Zn=void 0;try{e()}finally{Zn=n}}}let Jc=0,FO=class{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class sm{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Zn||!bi||Zn===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Zn)n=this.activeLink=new FO(Zn,this),Zn.deps?(n.prevDep=Zn.depsTail,Zn.depsTail.nextDep=n,Zn.depsTail=n):Zn.deps=Zn.depsTail=n,Bk(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Zn.depsTail,n.nextDep=void 0,Zn.depsTail.nextDep=n,Zn.depsTail=n,Zn.deps===n&&(Zn.deps=r)}return n}trigger(e){this.version++,Jc++,this.notify(e)}notify(e){Vy();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Uy()}}}function Bk(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Bk(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const ep=new WeakMap,tl=Symbol(""),Kv=Symbol(""),ed=Symbol("");function Xr(t,e,n){if(bi&&Zn){let r=ep.get(t);r||ep.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new sm),s.map=r,s.key=n),s.track()}}function So(t,e,n,r,s,i){const o=ep.get(t);if(!o){Jc++;return}const a=u=>{u&&u.trigger()};if(Vy(),e==="clear")o.forEach(a);else{const u=Ve(t),l=u&&By(n);if(u&&n==="length"){const c=Number(r);o.forEach((d,f)=>{(f==="length"||f===ed||!wi(f)&&f>=c)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),l&&a(o.get(ed)),e){case"add":u?l&&a(o.get("length")):(a(o.get(tl)),Xl(t)&&a(o.get(Kv)));break;case"delete":u||(a(o.get(tl)),Xl(t)&&a(o.get(Kv)));break;case"set":Xl(t)&&a(o.get(tl));break}}Uy()}function BO(t,e){const n=ep.get(t);return n&&n.get(e)}function Al(t){const e=Rn(t);return e===t?e:(Xr(e,"iterate",ed),ti(t)?e:e.map(Mr))}function im(t){return Xr(t=Rn(t),"iterate",ed),t}const VO={__proto__:null,[Symbol.iterator](){return Ig(this,Symbol.iterator,Mr)},concat(...t){return Al(this).concat(...t.map(e=>Ve(e)?Al(e):e))},entries(){return Ig(this,"entries",t=>(t[1]=Mr(t[1]),t))},every(t,e){return uo(this,"every",t,e,void 0,arguments)},filter(t,e){return uo(this,"filter",t,e,n=>n.map(Mr),arguments)},find(t,e){return uo(this,"find",t,e,Mr,arguments)},findIndex(t,e){return uo(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return uo(this,"findLast",t,e,Mr,arguments)},findLastIndex(t,e){return uo(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return uo(this,"forEach",t,e,void 0,arguments)},includes(...t){return Rg(this,"includes",t)},indexOf(...t){return Rg(this,"indexOf",t)},join(t){return Al(this).join(t)},lastIndexOf(...t){return Rg(this,"lastIndexOf",t)},map(t,e){return uo(this,"map",t,e,void 0,arguments)},pop(){return dc(this,"pop")},push(...t){return dc(this,"push",t)},reduce(t,...e){return WS(this,"reduce",t,e)},reduceRight(t,...e){return WS(this,"reduceRight",t,e)},shift(){return dc(this,"shift")},some(t,e){return uo(this,"some",t,e,void 0,arguments)},splice(...t){return dc(this,"splice",t)},toReversed(){return Al(this).toReversed()},toSorted(t){return Al(this).toSorted(t)},toSpliced(...t){return Al(this).toSpliced(...t)},unshift(...t){return dc(this,"unshift",t)},values(){return Ig(this,"values",Mr)}};function Ig(t,e,n){const r=im(t),s=r[e]();return r!==t&&!ti(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const UO=Array.prototype;function uo(t,e,n,r,s,i){const o=im(t),a=o!==t&&!ti(t),u=o[e];if(u!==UO[e]){const d=u.apply(t,i);return a?Mr(d):d}let l=n;o!==t&&(a?l=function(d,f){return n.call(this,Mr(d),f,t)}:n.length>2&&(l=function(d,f){return n.call(this,d,f,t)}));const c=u.call(o,l,r);return a&&s?s(c):c}function WS(t,e,n,r){const s=im(t);let i=n;return s!==t&&(ti(t)?n.length>3&&(i=function(o,a,u){return n.call(this,o,a,u,t)}):i=function(o,a,u){return n.call(this,o,Mr(a),u,t)}),s[e](i,...r)}function Rg(t,e,n){const r=Rn(t);Xr(r,"iterate",ed);const s=r[e](...n);return(s===-1||s===!1)&&Wy(n[0])?(n[0]=Rn(n[0]),r[e](...n)):s}function dc(t,e,n=[]){Io(),Vy();const r=Rn(t)[e].apply(t,n);return Uy(),Ro(),r}const HO=My("__proto__,__v_isRef,__isVue"),Vk=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(wi));function jO(t){wi(t)||(t=String(t));const e=Rn(this);return Xr(e,"has",t),e.hasOwnProperty(t)}class Uk{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?JO:zk:i?Kk:jk).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Ve(e);if(!s){let u;if(o&&(u=VO[n]))return u;if(n==="hasOwnProperty")return jO}const a=Reflect.get(e,n,Dn(e)?e:r);return(wi(n)?Vk.has(n):HO(n))||(s||Xr(e,"get",n),i)?a:Dn(a)?o&&By(n)?a:a.value:Bt(a)?s?Bu(a):fn(a):a}}class Hk extends Uk{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const u=ya(i);if(!ti(r)&&!ya(r)&&(i=Rn(i),r=Rn(r)),!Ve(e)&&Dn(i)&&!Dn(r))return u?!1:(i.value=r,!0)}const o=Ve(e)&&By(n)?Number(n)<e.length:hn(e,n),a=Reflect.set(e,n,r,Dn(e)?e:s);return e===Rn(s)&&(o?ma(r,i)&&So(e,"set",n,r):So(e,"add",n,r)),a}deleteProperty(e,n){const r=hn(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&So(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!wi(n)||!Vk.has(n))&&Xr(e,"has",n),r}ownKeys(e){return Xr(e,"iterate",Ve(e)?"length":tl),Reflect.ownKeys(e)}}class KO extends Uk{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const zO=new Hk,WO=new KO,GO=new Hk(!0),zv=t=>t,Af=t=>Reflect.getPrototypeOf(t);function qO(t,e,n){return function(...r){const s=this.__v_raw,i=Rn(s),o=Xl(i),a=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,l=s[t](...r),c=n?zv:e?tp:Mr;return!e&&Xr(i,"iterate",u?Kv:tl),{next(){const{value:d,done:f}=l.next();return f?{value:d,done:f}:{value:a?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function If(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function YO(t,e){const n={get(s){const i=this.__v_raw,o=Rn(i),a=Rn(s);t||(ma(s,a)&&Xr(o,"get",s),Xr(o,"get",a));const{has:u}=Af(o),l=e?zv:t?tp:Mr;if(u.call(o,s))return l(i.get(s));if(u.call(o,a))return l(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Xr(Rn(s),"iterate",tl),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=Rn(i),a=Rn(s);return t||(ma(s,a)&&Xr(o,"has",s),Xr(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,u=Rn(a),l=e?zv:t?tp:Mr;return!t&&Xr(u,"iterate",tl),a.forEach((c,d)=>s.call(i,l(c),l(d),o))}};return kr(n,t?{add:If("add"),set:If("set"),delete:If("delete"),clear:If("clear")}:{add(s){!e&&!ti(s)&&!ya(s)&&(s=Rn(s));const i=Rn(this);return Af(i).has.call(i,s)||(i.add(s),So(i,"add",s,s)),this},set(s,i){!e&&!ti(i)&&!ya(i)&&(i=Rn(i));const o=Rn(this),{has:a,get:u}=Af(o);let l=a.call(o,s);l||(s=Rn(s),l=a.call(o,s));const c=u.call(o,s);return o.set(s,i),l?ma(i,c)&&So(o,"set",s,i):So(o,"add",s,i),this},delete(s){const i=Rn(this),{has:o,get:a}=Af(i);let u=o.call(i,s);u||(s=Rn(s),u=o.call(i,s)),a&&a.call(i,s);const l=i.delete(s);return u&&So(i,"delete",s,void 0),l},clear(){const s=Rn(this),i=s.size!==0,o=s.clear();return i&&So(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=qO(s,t,e)}),n}function jy(t,e){const n=YO(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(hn(n,s)&&s in r?n:r,s,i)}const XO={get:jy(!1,!1)},QO={get:jy(!1,!0)},ZO={get:jy(!0,!1)},jk=new WeakMap,Kk=new WeakMap,zk=new WeakMap,JO=new WeakMap;function e$(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function t$(t){return t.__v_skip||!Object.isExtensible(t)?0:e$(CO(t))}function fn(t){return ya(t)?t:zy(t,!1,zO,XO,jk)}function Ky(t){return zy(t,!1,GO,QO,Kk)}function Bu(t){return zy(t,!0,WO,ZO,zk)}function zy(t,e,n,r,s){if(!Bt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=t$(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function Ql(t){return ya(t)?Ql(t.__v_raw):!!(t&&t.__v_isReactive)}function ya(t){return!!(t&&t.__v_isReadonly)}function ti(t){return!!(t&&t.__v_isShallow)}function Wy(t){return t?!!t.__v_raw:!1}function Rn(t){const e=t&&t.__v_raw;return e?Rn(e):t}function ko(t){return!hn(t,"__v_skip")&&Object.isExtensible(t)&&Tk(t,"__v_skip",!0),t}const Mr=t=>Bt(t)?fn(t):t,tp=t=>Bt(t)?Bu(t):t;function Dn(t){return t?t.__v_isRef===!0:!1}function H(t){return Wk(t,!1)}function On(t){return Wk(t,!0)}function Wk(t,e){return Dn(t)?t:new n$(t,e)}class n${constructor(e,n){this.dep=new sm,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Rn(e),this._value=n?e:Mr(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||ti(e)||ya(e);e=r?e:Rn(e),ma(e,n)&&(this._rawValue=e,this._value=r?e:Mr(e),this.dep.trigger())}}function m(t){return Dn(t)?t.value:t}const r$={get:(t,e,n)=>e==="__v_raw"?t:m(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Dn(s)&&!Dn(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Gk(t){return Ql(t)?t:new Proxy(t,r$)}class s${constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new sm,{get:r,set:s}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function i$(t){return new s$(t)}function _r(t){const e=Ve(t)?new Array(t.length):{};for(const n in t)e[n]=qk(t,n);return e}class o${constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return BO(Rn(this._object),this._key)}}class a${constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function En(t,e,n){return Dn(t)?t:pt(t)?new a$(t):Bt(t)&&arguments.length>1?qk(t,e,n):H(t)}function qk(t,e,n){const r=t[e];return Dn(r)?r:new o$(t,e,n)}class l${constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new sm(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Jc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Zn!==this)return Ok(this,!0),!0}get value(){const e=this.dep.track();return Nk(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function u$(t,e,n=!1){let r,s;return pt(t)?r=t:(r=t.get,s=t.set),new l$(r,s,n)}const Rf={},np=new WeakMap;let ja;function c$(t,e=!1,n=ja){if(n){let r=np.get(n);r||np.set(n,r=[]),r.push(t)}}function d$(t,e,n=qn){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:u}=n,l=S=>s?S:ti(S)||s===!1||s===0?wo(S,1):wo(S);let c,d,f,h,p=!1,g=!1;if(Dn(t)?(d=()=>t.value,p=ti(t)):Ql(t)?(d=()=>l(t),p=!0):Ve(t)?(g=!0,p=t.some(S=>Ql(S)||ti(S)),d=()=>t.map(S=>{if(Dn(S))return S.value;if(Ql(S))return l(S);if(pt(S))return u?u(S,2):S()})):pt(t)?e?d=u?()=>u(t,2):t:d=()=>{if(f){Io();try{f()}finally{Ro()}}const S=ja;ja=c;try{return u?u(t,3,[h]):t(h)}finally{ja=S}}:d=xn,e&&s){const S=d,E=s===!0?1/0:s;d=()=>wo(S(),E)}const v=Rk(),y=()=>{c.stop(),v&&v.active&&Fy(v.effects,c)};if(i&&e){const S=e;e=(...E)=>{S(...E),y()}}let w=g?new Array(t.length).fill(Rf):Rf;const b=S=>{if(!(!(c.flags&1)||!c.dirty&&!S))if(e){const E=c.run();if(s||p||(g?E.some((x,k)=>ma(x,w[k])):ma(E,w))){f&&f();const x=ja;ja=c;try{const k=[E,w===Rf?void 0:g&&w[0]===Rf?[]:w,h];w=E,u?u(e,3,k):e(...k)}finally{ja=x}}}else c.run()};return a&&a(b),c=new Pk(d),c.scheduler=o?()=>o(b,!1):b,h=S=>c$(S,!1,c),f=c.onStop=()=>{const S=np.get(c);if(S){if(u)u(S,4);else for(const E of S)E();np.delete(c)}},e?r?b(!0):w=c.run():o?o(b.bind(null,!0),!0):c.run(),y.pause=c.pause.bind(c),y.resume=c.resume.bind(c),y.stop=y,y}function wo(t,e=1/0,n){if(e<=0||!Bt(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Dn(t))wo(t.value,e,n);else if(Ve(t))for(let r=0;r<t.length;r++)wo(t[r],e,n);else if(tm(t)||Xl(t))t.forEach(r=>{wo(r,e,n)});else if(Zc(t)){for(const r in t)wo(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&wo(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ud(t,e,n,r){try{return r?t(...r):t()}catch(s){om(s,e,n)}}function Ei(t,e,n,r){if(pt(t)){const s=Ud(t,e,n,r);return s&&ul(s)&&s.catch(i=>{om(i,e,n)}),s}if(Ve(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Ei(t[i],e,n,r));return s}}function om(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||qn;if(e){let a=e.parent;const u=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const c=a.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,u,l)===!1)return}a=a.parent}if(i){Io(),Ud(i,null,10,[t,u,l]),Ro();return}}f$(t,n,s,r,o)}function f$(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const as=[];let Bi=-1;const Zl=[];let oa=null,Bl=0;const Yk=Promise.resolve();let rp=null;function ft(t){const e=rp||Yk;return t?e.then(this?t.bind(this):t):e}function h$(t){let e=Bi+1,n=as.length;for(;e<n;){const r=e+n>>>1,s=as[r],i=td(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Gy(t){if(!(t.flags&1)){const e=td(t),n=as[as.length-1];!n||!(t.flags&2)&&e>=td(n)?as.push(t):as.splice(h$(e),0,t),t.flags|=1,Xk()}}function Xk(){rp||(rp=Yk.then(Zk))}function p$(t){Ve(t)?Zl.push(...t):oa&&t.id===-1?oa.splice(Bl+1,0,t):t.flags&1||(Zl.push(t),t.flags|=1),Xk()}function GS(t,e,n=Bi+1){for(;n<as.length;n++){const r=as[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;as.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Qk(t){if(Zl.length){const e=[...new Set(Zl)].sort((n,r)=>td(n)-td(r));if(Zl.length=0,oa){oa.push(...e);return}for(oa=e,Bl=0;Bl<oa.length;Bl++){const n=oa[Bl];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}oa=null,Bl=0}}const td=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Zk(t){try{for(Bi=0;Bi<as.length;Bi++){const e=as[Bi];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ud(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Bi<as.length;Bi++){const e=as[Bi];e&&(e.flags&=-2)}Bi=-1,as.length=0,Qk(),rp=null,(as.length||Zl.length)&&Zk()}}let Dr=null,Jk=null;function sp(t){const e=Dr;return Dr=t,Jk=t&&t.type.__scopeId||null,e}function le(t,e=Dr,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&aw(-1);const i=sp(e);let o;try{o=t(...s)}finally{sp(i),r._d&&aw(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Ot(t,e){if(Dr===null)return t;const n=hm(Dr),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,u=qn]=e[s];i&&(pt(i)&&(i={mounted:i,updated:i}),i.deep&&wo(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:u}))}return t}function Na(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let u=a.dir[r];u&&(Io(),Ei(u,n,8,[t.el,a,t,e]),Ro())}}const e_=Symbol("_vte"),t_=t=>t.__isTeleport,$c=t=>t&&(t.disabled||t.disabled===""),qS=t=>t&&(t.defer||t.defer===""),YS=t=>typeof SVGElement<"u"&&t instanceof SVGElement,XS=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Wv=(t,e)=>{const n=t&&t.to;return ut(n)?e?e(n):null:n},n_={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,a,u,l){const{mc:c,pc:d,pbc:f,o:{insert:h,querySelector:p,createText:g,createComment:v}}=l,y=$c(e.props);let{shapeFlag:w,children:b,dynamicChildren:S}=e;if(t==null){const E=e.el=g(""),x=e.anchor=g("");h(E,n,r),h(x,n,r);const k=(C,_)=>{w&16&&(s&&s.isCE&&(s.ce._teleportTarget=C),c(b,C,_,s,i,o,a,u))},A=()=>{const C=e.target=Wv(e.props,p),_=r_(C,e,g,h);C&&(o!=="svg"&&YS(C)?o="svg":o!=="mathml"&&XS(C)&&(o="mathml"),y||(k(C,_),hh(e,!1)))};y&&(k(n,x),hh(e,!0)),qS(e.props)?(e.el.__isMounted=!1,os(()=>{A(),delete e.el.__isMounted},i)):A()}else{if(qS(e.props)&&t.el.__isMounted===!1){os(()=>{n_.process(t,e,n,r,s,i,o,a,u,l)},i);return}e.el=t.el,e.targetStart=t.targetStart;const E=e.anchor=t.anchor,x=e.target=t.target,k=e.targetAnchor=t.targetAnchor,A=$c(t.props),C=A?n:x,_=A?E:k;if(o==="svg"||YS(x)?o="svg":(o==="mathml"||XS(x))&&(o="mathml"),S?(f(t.dynamicChildren,S,C,s,i,o,a),Jy(t,e,!0)):u||d(t,e,C,_,s,i,o,a,!1),y)A?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Lf(e,n,E,l,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const O=e.target=Wv(e.props,p);O&&Lf(e,O,null,l,0)}else A&&Lf(e,x,k,l,1);hh(e,y)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:u,targetStart:l,targetAnchor:c,target:d,props:f}=t;if(d&&(s(l),s(c)),i&&s(u),o&16){const h=i||!$c(f);for(let p=0;p<a.length;p++){const g=a[p];r(g,e,n,h,!!g.dynamicChildren)}}},move:Lf,hydrate:m$};function Lf(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:u,children:l,props:c}=t,d=i===2;if(d&&r(o,e,n),(!d||$c(c))&&u&16)for(let f=0;f<l.length;f++)s(l[f],e,n,2);d&&r(a,e,n)}function m$(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:u,insert:l,createText:c}},d){const f=e.target=Wv(e.props,u);if(f){const h=$c(e.props),p=f._lpa||f.firstChild;if(e.shapeFlag&16)if(h)e.anchor=d(o(t),e,a(t),n,r,s,i),e.targetStart=p,e.targetAnchor=p&&o(p);else{e.anchor=o(t);let g=p;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")e.targetStart=g;else if(g.data==="teleport anchor"){e.targetAnchor=g,f._lpa=e.targetAnchor&&o(e.targetAnchor);break}}g=o(g)}e.targetAnchor||r_(f,e,c,l),d(p&&o(p),e,f,n,r,s,i)}hh(e,h)}return e.anchor&&o(e.anchor)}const g$=n_;function hh(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function r_(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[e_]=i,t&&(r(s,t),r(i,t)),i}const aa=Symbol("_leaveCb"),Pf=Symbol("_enterCb");function s_(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ft(()=>{t.isMounted=!0}),In(()=>{t.isUnmounting=!0}),t}const Gs=[Function,Array],i_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Gs,onEnter:Gs,onAfterEnter:Gs,onEnterCancelled:Gs,onBeforeLeave:Gs,onLeave:Gs,onAfterLeave:Gs,onLeaveCancelled:Gs,onBeforeAppear:Gs,onAppear:Gs,onAfterAppear:Gs,onAppearCancelled:Gs},o_=t=>{const e=t.subTree;return e.component?o_(e.component):e},v$={name:"BaseTransition",props:i_,setup(t,{slots:e}){const n=Kt(),r=s_();return()=>{const s=e.default&&qy(e.default(),!0);if(!s||!s.length)return;const i=a_(s),o=Rn(t),{mode:a}=o;if(r.isLeaving)return Lg(i);const u=QS(i);if(!u)return Lg(i);let l=nd(u,o,r,n,d=>l=d);u.type!==br&&cl(u,l);let c=n.subTree&&QS(n.subTree);if(c&&c.type!==br&&!za(u,c)&&o_(n).type!==br){let d=nd(c,o,r,n);if(cl(c,d),a==="out-in"&&u.type!==br)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,c=void 0},Lg(i);a==="in-out"&&u.type!==br?d.delayLeave=(f,h,p)=>{const g=l_(r,c);g[String(c.key)]=c,f[aa]=()=>{h(),f[aa]=void 0,delete l.delayedLeave,c=void 0},l.delayedLeave=()=>{p(),delete l.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return i}}};function a_(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==br){e=n;break}}return e}const y$=v$;function l_(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function nd(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:u,onEnter:l,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:p,onLeaveCancelled:g,onBeforeAppear:v,onAppear:y,onAfterAppear:w,onAppearCancelled:b}=e,S=String(t.key),E=l_(n,t),x=(C,_)=>{C&&Ei(C,r,9,_)},k=(C,_)=>{const O=_[1];x(C,_),Ve(C)?C.every(P=>P.length<=1)&&O():C.length<=1&&O()},A={mode:o,persisted:a,beforeEnter(C){let _=u;if(!n.isMounted)if(i)_=v||u;else return;C[aa]&&C[aa](!0);const O=E[S];O&&za(t,O)&&O.el[aa]&&O.el[aa](),x(_,[C])},enter(C){let _=l,O=c,P=d;if(!n.isMounted)if(i)_=y||l,O=w||c,P=b||d;else return;let U=!1;const j=C[Pf]=N=>{U||(U=!0,N?x(P,[C]):x(O,[C]),A.delayedLeave&&A.delayedLeave(),C[Pf]=void 0)};_?k(_,[C,j]):j()},leave(C,_){const O=String(t.key);if(C[Pf]&&C[Pf](!0),n.isUnmounting)return _();x(f,[C]);let P=!1;const U=C[aa]=j=>{P||(P=!0,_(),j?x(g,[C]):x(p,[C]),C[aa]=void 0,E[O]===t&&delete E[O])};E[O]=t,h?k(h,[C,U]):U()},clone(C){const _=nd(C,e,n,r,s);return s&&s(_),_}};return A}function Lg(t){if(am(t))return t=Lo(t),t.children=null,t}function QS(t){if(!am(t))return t_(t.type)&&t.children?a_(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&pt(n.default))return n.default()}}function cl(t,e){t.shapeFlag&6&&t.component?(t.transition=e,cl(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function qy(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===dt?(o.patchFlag&128&&s++,r=r.concat(qy(o.children,e,a))):(e||o.type!==br)&&r.push(a!=null?Lo(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function se(t,e){return pt(t)?kr({name:t.name},e,{setup:t}):t}function u_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function ip(t,e,n,r,s=!1){if(Ve(t)){t.forEach((p,g)=>ip(p,e&&(Ve(e)?e[g]:e),n,r,s));return}if(Jl(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ip(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?hm(r.component):r.el,o=s?null:i,{i:a,r:u}=t,l=e&&e.r,c=a.refs===qn?a.refs={}:a.refs,d=a.setupState,f=Rn(d),h=d===qn?()=>!1:p=>hn(f,p);if(l!=null&&l!==u&&(ut(l)?(c[l]=null,h(l)&&(d[l]=null)):Dn(l)&&(l.value=null)),pt(u))Ud(u,a,12,[o,c]);else{const p=ut(u),g=Dn(u);if(p||g){const v=()=>{if(t.f){const y=p?h(u)?d[u]:c[u]:u.value;s?Ve(y)&&Fy(y,i):Ve(y)?y.includes(i)||y.push(i):p?(c[u]=[i],h(u)&&(d[u]=c[u])):(u.value=[i],t.k&&(c[t.k]=u.value))}else p?(c[u]=o,h(u)&&(d[u]=o)):g&&(u.value=o,t.k&&(c[t.k]=o))};o?(v.id=-1,os(v,n)):v()}}}rm().requestIdleCallback;rm().cancelIdleCallback;const Jl=t=>!!t.type.__asyncLoader,am=t=>t.type.__isKeepAlive;function lm(t,e){d_(t,"a",e)}function c_(t,e){d_(t,"da",e)}function d_(t,e,n=Nr){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(um(e,r,n),n){let s=n.parent;for(;s&&s.parent;)am(s.parent.vnode)&&b$(r,e,n,s),s=s.parent}}function b$(t,e,n,r){const s=um(e,t,r,!0);Ia(()=>{Fy(r[e],s)},n)}function um(t,e,n=Nr,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Io();const a=Hd(n),u=Ei(e,n,t,o);return a(),Ro(),u});return r?s.unshift(i):s.push(i),i}}const Mo=t=>(e,n=Nr)=>{(!sd||t==="sp")&&um(t,(...r)=>e(...r),n)},cm=Mo("bm"),Ft=Mo("m"),f_=Mo("bu"),ki=Mo("u"),In=Mo("bum"),Ia=Mo("um"),S$=Mo("sp"),w$=Mo("rtg"),E$=Mo("rtc");function x$(t,e=Nr){um("ec",t,e)}const Yy="components",T$="directives";function Mt(t,e){return Xy(Yy,t,!0,e)||t}const h_=Symbol.for("v-ndc");function jt(t){return ut(t)?Xy(Yy,t,!1)||t:t||h_}function dm(t){return Xy(T$,t)}function Xy(t,e,n=!0,r=!1){const s=Dr||Nr;if(s){const i=s.type;if(t===Yy){const a=lM(i,!1);if(a&&(a===e||a===fs(e)||a===Vd(fs(e))))return i}const o=ZS(s[t]||i[t],e)||ZS(s.appContext[t],e);return!o&&r?i:o}}function ZS(t,e){return t&&(t[e]||t[fs(e)]||t[Vd(fs(e))])}function Zt(t,e,n,r){let s;const i=n,o=Ve(t);if(o||ut(t)){const a=o&&Ql(t);let u=!1,l=!1;a&&(u=!ti(t),l=ya(t),t=im(t)),s=new Array(t.length);for(let c=0,d=t.length;c<d;c++)s[c]=e(u?l?tp(Mr(t[c])):Mr(t[c]):t[c],c,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(Bt(t))if(t[Symbol.iterator])s=Array.from(t,(a,u)=>e(a,u,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let u=0,l=a.length;u<l;u++){const c=a[u];s[u]=e(t[c],c,u,i)}}else s=[];return s}function ks(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(Ve(r))for(let s=0;s<r.length;s++)t[r[s].name]=r[s].fn;else r&&(t[r.name]=r.key?(...s)=>{const i=r.fn(...s);return i&&(i.key=r.key),i}:r.fn)}return t}function pe(t,e,n={},r,s){if(Dr.ce||Dr.parent&&Jl(Dr.parent)&&Dr.parent.ce)return e!=="default"&&(n.name=e),$(),ye(dt,null,[ie("slot",n,r&&r())],64);let i=t[e];i&&i._c&&(i._d=!1),$();const o=i&&p_(i(n)),a=n.key||o&&o.key,u=ye(dt,{key:(a&&!wi(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),i&&i._c&&(i._d=!0),u}function p_(t){return t.some(e=>$n(e)?!(e.type===br||e.type===dt&&!p_(e.children)):!0)?t:null}function C$(t,e){const n={};for(const r in t)n[Pc(r)]=t[r];return n}const Gv=t=>t?D_(t)?hm(t):Gv(t.parent):null,Mc=kr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Gv(t.parent),$root:t=>Gv(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>v_(t),$forceUpdate:t=>t.f||(t.f=()=>{Gy(t.update)}),$nextTick:t=>t.n||(t.n=ft.bind(t.proxy)),$watch:t=>W$.bind(t)}),Pg=(t,e)=>t!==qn&&!t.__isScriptSetup&&hn(t,e),k$={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:u}=t;let l;if(e[0]!=="$"){const h=o[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Pg(r,e))return o[e]=1,r[e];if(s!==qn&&hn(s,e))return o[e]=2,s[e];if((l=t.propsOptions[0])&&hn(l,e))return o[e]=3,i[e];if(n!==qn&&hn(n,e))return o[e]=4,n[e];qv&&(o[e]=0)}}const c=Mc[e];let d,f;if(c)return e==="$attrs"&&Xr(t.attrs,"get",""),c(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==qn&&hn(n,e))return o[e]=4,n[e];if(f=u.config.globalProperties,hn(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Pg(s,e)?(s[e]=n,!0):r!==qn&&hn(r,e)?(r[e]=n,!0):hn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==qn&&hn(t,o)||Pg(e,o)||(a=i[0])&&hn(a,o)||hn(r,o)||hn(Mc,o)||hn(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:hn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function gr(){return m_().slots}function No(){return m_().attrs}function m_(){const t=Kt();return t.setupContext||(t.setupContext=$_(t))}function JS(t){return Ve(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let qv=!0;function _$(t){const e=v_(t),n=t.proxy,r=t.ctx;qv=!1,e.beforeCreate&&ew(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:u,inject:l,created:c,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:g,deactivated:v,beforeDestroy:y,beforeUnmount:w,destroyed:b,unmounted:S,render:E,renderTracked:x,renderTriggered:k,errorCaptured:A,serverPrefetch:C,expose:_,inheritAttrs:O,components:P,directives:U,filters:j}=e;if(l&&A$(l,r,null),o)for(const V in o){const D=o[V];pt(D)&&(r[V]=D.bind(n))}if(s){const V=s.call(n,n);Bt(V)&&(t.data=fn(V))}if(qv=!0,i)for(const V in i){const D=i[V],M=pt(D)?D.bind(n,n):pt(D.get)?D.get.bind(n,n):xn,K=!pt(D)&&pt(D.set)?D.set.bind(n):xn,q=L({get:M,set:K});Object.defineProperty(r,V,{enumerable:!0,configurable:!0,get:()=>q.value,set:ee=>q.value=ee})}if(a)for(const V in a)g_(a[V],r,n,V);if(u){const V=pt(u)?u.call(n):u;Reflect.ownKeys(V).forEach(D=>{Jt(D,V[D])})}c&&ew(c,t,"c");function R(V,D){Ve(D)?D.forEach(M=>V(M.bind(n))):D&&V(D.bind(n))}if(R(cm,d),R(Ft,f),R(f_,h),R(ki,p),R(lm,g),R(c_,v),R(x$,A),R(E$,x),R(w$,k),R(In,w),R(Ia,S),R(S$,C),Ve(_))if(_.length){const V=t.exposed||(t.exposed={});_.forEach(D=>{Object.defineProperty(V,D,{get:()=>n[D],set:M=>n[D]=M})})}else t.exposed||(t.exposed={});E&&t.render===xn&&(t.render=E),O!=null&&(t.inheritAttrs=O),P&&(t.components=P),U&&(t.directives=U),C&&u_(t)}function A$(t,e,n=xn){Ve(t)&&(t=Yv(t));for(const r in t){const s=t[r];let i;Bt(s)?"default"in s?i=nt(s.from||r,s.default,!0):i=nt(s.from||r):i=nt(s),Dn(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function ew(t,e,n){Ei(Ve(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function g_(t,e,n,r){let s=r.includes(".")?A_(n,r):()=>n[r];if(ut(t)){const i=e[t];pt(i)&&Ie(s,i)}else if(pt(t))Ie(s,t.bind(n));else if(Bt(t))if(Ve(t))t.forEach(i=>g_(i,e,n,r));else{const i=pt(t.handler)?t.handler.bind(n):e[t.handler];pt(i)&&Ie(s,i,t)}}function v_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let u;return a?u=a:!s.length&&!n&&!r?u=e:(u={},s.length&&s.forEach(l=>op(u,l,o,!0)),op(u,e,o)),Bt(e)&&i.set(e,u),u}function op(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&op(t,i,n,!0),s&&s.forEach(o=>op(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=I$[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const I$={data:tw,props:nw,emits:nw,methods:Ec,computed:Ec,beforeCreate:ss,created:ss,beforeMount:ss,mounted:ss,beforeUpdate:ss,updated:ss,beforeDestroy:ss,beforeUnmount:ss,destroyed:ss,unmounted:ss,activated:ss,deactivated:ss,errorCaptured:ss,serverPrefetch:ss,components:Ec,directives:Ec,watch:L$,provide:tw,inject:R$};function tw(t,e){return e?t?function(){return kr(pt(t)?t.call(this,this):t,pt(e)?e.call(this,this):e)}:e:t}function R$(t,e){return Ec(Yv(t),Yv(e))}function Yv(t){if(Ve(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ss(t,e){return t?[...new Set([].concat(t,e))]:e}function Ec(t,e){return t?kr(Object.create(null),t,e):e}function nw(t,e){return t?Ve(t)&&Ve(e)?[...new Set([...t,...e])]:kr(Object.create(null),JS(t),JS(e??{})):e}function L$(t,e){if(!t)return e;if(!e)return t;const n=kr(Object.create(null),t);for(const r in e)n[r]=ss(t[r],e[r]);return n}function y_(){return{app:null,config:{isNativeTag:xO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let P$=0;function D$(t,e){return function(r,s=null){pt(r)||(r=kr({},r)),s!=null&&!Bt(s)&&(s=null);const i=y_(),o=new WeakSet,a=[];let u=!1;const l=i.app={_uid:P$++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:cM,get config(){return i.config},set config(c){},use(c,...d){return o.has(c)||(c&&pt(c.install)?(o.add(c),c.install(l,...d)):pt(c)&&(o.add(c),c(l,...d))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,d){return d?(i.components[c]=d,l):i.components[c]},directive(c,d){return d?(i.directives[c]=d,l):i.directives[c]},mount(c,d,f){if(!u){const h=l._ceVNode||ie(r,s);return h.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),t(h,c,f),u=!0,l._container=c,c.__vue_app__=l,hm(h.component)}},onUnmount(c){a.push(c)},unmount(){u&&(Ei(a,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(c,d){return i.provides[c]=d,l},runWithContext(c){const d=eu;eu=l;try{return c()}finally{eu=d}}};return l}}let eu=null;function Jt(t,e){if(Nr){let n=Nr.provides;const r=Nr.parent&&Nr.parent.provides;r===n&&(n=Nr.provides=Object.create(r)),n[t]=e}}function nt(t,e,n=!1){const r=Nr||Dr;if(r||eu){let s=eu?eu._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&pt(e)?e.call(r&&r.proxy):e}}const b_={},S_=()=>Object.create(b_),w_=t=>Object.getPrototypeOf(t)===b_;function O$(t,e,n,r=!1){const s={},i=S_();t.propsDefaults=Object.create(null),E_(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Ky(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function $$(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Rn(s),[u]=t.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(fm(t.emitsOptions,f))continue;const h=e[f];if(u)if(hn(i,f))h!==i[f]&&(i[f]=h,l=!0);else{const p=fs(f);s[p]=Xv(u,a,p,h,t,!1)}else h!==i[f]&&(i[f]=h,l=!0)}}}else{E_(t,e,s,i)&&(l=!0);let c;for(const d in a)(!e||!hn(e,d)&&((c=$o(d))===d||!hn(e,c)))&&(u?n&&(n[d]!==void 0||n[c]!==void 0)&&(s[d]=Xv(u,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!hn(e,d))&&(delete i[d],l=!0)}l&&So(t.attrs,"set","")}function E_(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let u in e){if(Lc(u))continue;const l=e[u];let c;s&&hn(s,c=fs(u))?!i||!i.includes(c)?n[c]=l:(a||(a={}))[c]=l:fm(t.emitsOptions,u)||(!(u in r)||l!==r[u])&&(r[u]=l,o=!0)}if(i){const u=Rn(n),l=a||qn;for(let c=0;c<i.length;c++){const d=i[c];n[d]=Xv(s,u,d,l[d],t,!hn(l,d))}}return o}function Xv(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=hn(o,"default");if(a&&r===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&pt(u)){const{propsDefaults:l}=s;if(n in l)r=l[n];else{const c=Hd(s);r=l[n]=u.call(null,e),c()}}else r=u;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===$o(n))&&(r=!0))}return r}const M$=new WeakMap;function x_(t,e,n=!1){const r=n?M$:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let u=!1;if(!pt(t)){const c=d=>{u=!0;const[f,h]=x_(d,e,!0);kr(o,f),h&&a.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!u)return Bt(t)&&r.set(t,Yl),Yl;if(Ve(i))for(let c=0;c<i.length;c++){const d=fs(i[c]);rw(d)&&(o[d]=qn)}else if(i)for(const c in i){const d=fs(c);if(rw(d)){const f=i[c],h=o[d]=Ve(f)||pt(f)?{type:f}:kr({},f),p=h.type;let g=!1,v=!0;if(Ve(p))for(let y=0;y<p.length;++y){const w=p[y],b=pt(w)&&w.name;if(b==="Boolean"){g=!0;break}else b==="String"&&(v=!1)}else g=pt(p)&&p.name==="Boolean";h[0]=g,h[1]=v,(g||hn(h,"default"))&&a.push(d)}}const l=[o,a];return Bt(t)&&r.set(t,l),l}function rw(t){return t[0]!=="$"&&!Lc(t)}const Qy=t=>t[0]==="_"||t==="$stable",Zy=t=>Ve(t)?t.map(Hi):[Hi(t)],N$=(t,e,n)=>{if(e._n)return e;const r=le((...s)=>Zy(e(...s)),n);return r._c=!1,r},T_=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Qy(s))continue;const i=t[s];if(pt(i))e[s]=N$(s,i,r);else if(i!=null){const o=Zy(i);e[s]=()=>o}}},C_=(t,e)=>{const n=Zy(e);t.slots.default=()=>n},k_=(t,e,n)=>{for(const r in e)(n||!Qy(r))&&(t[r]=e[r])},F$=(t,e,n)=>{const r=t.slots=S_();if(t.vnode.shapeFlag&32){const s=e._;s?(k_(r,e,n),n&&Tk(r,"_",s,!0)):T_(e,r)}else e&&C_(t,e)},B$=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=qn;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:k_(s,e,n):(i=!e.$stable,T_(e,s)),o=e}else e&&(C_(t,e),o={default:1});if(i)for(const a in s)!Qy(a)&&o[a]==null&&delete s[a]},os=J$;function V$(t){return U$(t)}function U$(t,e){const n=rm();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:u,setText:l,setElementText:c,parentNode:d,nextSibling:f,setScopeId:h=xn,insertStaticContent:p}=t,g=(z,re,ve,ke=null,Ee=null,be=null,Se=void 0,_e=null,Ne=!!re.dynamicChildren)=>{if(z===re)return;z&&!za(z,re)&&(ke=Z(z),ee(z,Ee,be,!0),z=null),re.patchFlag===-2&&(Ne=!1,re.dynamicChildren=null);const{type:Me,ref:st,shapeFlag:qe}=re;switch(Me){case Vu:v(z,re,ve,ke);break;case br:y(z,re,ve,ke);break;case Og:z==null&&w(re,ve,ke,Se);break;case dt:P(z,re,ve,ke,Ee,be,Se,_e,Ne);break;default:qe&1?E(z,re,ve,ke,Ee,be,Se,_e,Ne):qe&6?U(z,re,ve,ke,Ee,be,Se,_e,Ne):(qe&64||qe&128)&&Me.process(z,re,ve,ke,Ee,be,Se,_e,Ne,Te)}st!=null&&Ee&&ip(st,z&&z.ref,be,re||z,!re)},v=(z,re,ve,ke)=>{if(z==null)r(re.el=a(re.children),ve,ke);else{const Ee=re.el=z.el;re.children!==z.children&&l(Ee,re.children)}},y=(z,re,ve,ke)=>{z==null?r(re.el=u(re.children||""),ve,ke):re.el=z.el},w=(z,re,ve,ke)=>{[z.el,z.anchor]=p(z.children,re,ve,ke,z.el,z.anchor)},b=({el:z,anchor:re},ve,ke)=>{let Ee;for(;z&&z!==re;)Ee=f(z),r(z,ve,ke),z=Ee;r(re,ve,ke)},S=({el:z,anchor:re})=>{let ve;for(;z&&z!==re;)ve=f(z),s(z),z=ve;s(re)},E=(z,re,ve,ke,Ee,be,Se,_e,Ne)=>{re.type==="svg"?Se="svg":re.type==="math"&&(Se="mathml"),z==null?x(re,ve,ke,Ee,be,Se,_e,Ne):C(z,re,Ee,be,Se,_e,Ne)},x=(z,re,ve,ke,Ee,be,Se,_e)=>{let Ne,Me;const{props:st,shapeFlag:qe,transition:Ae,dirs:et}=z;if(Ne=z.el=o(z.type,be,st&&st.is,st),qe&8?c(Ne,z.children):qe&16&&A(z.children,Ne,null,ke,Ee,Dg(z,be),Se,_e),et&&Na(z,null,ke,"created"),k(Ne,z,z.scopeId,Se,ke),st){for(const Lt in st)Lt!=="value"&&!Lc(Lt)&&i(Ne,Lt,null,st[Lt],be,ke);"value"in st&&i(Ne,"value",null,st.value,be),(Me=st.onVnodeBeforeMount)&&$i(Me,ke,z)}et&&Na(z,null,ke,"beforeMount");const St=H$(Ee,Ae);St&&Ae.beforeEnter(Ne),r(Ne,re,ve),((Me=st&&st.onVnodeMounted)||St||et)&&os(()=>{Me&&$i(Me,ke,z),St&&Ae.enter(Ne),et&&Na(z,null,ke,"mounted")},Ee)},k=(z,re,ve,ke,Ee)=>{if(ve&&h(z,ve),ke)for(let be=0;be<ke.length;be++)h(z,ke[be]);if(Ee){let be=Ee.subTree;if(re===be||R_(be.type)&&(be.ssContent===re||be.ssFallback===re)){const Se=Ee.vnode;k(z,Se,Se.scopeId,Se.slotScopeIds,Ee.parent)}}},A=(z,re,ve,ke,Ee,be,Se,_e,Ne=0)=>{for(let Me=Ne;Me<z.length;Me++){const st=z[Me]=_e?la(z[Me]):Hi(z[Me]);g(null,st,re,ve,ke,Ee,be,Se,_e)}},C=(z,re,ve,ke,Ee,be,Se)=>{const _e=re.el=z.el;let{patchFlag:Ne,dynamicChildren:Me,dirs:st}=re;Ne|=z.patchFlag&16;const qe=z.props||qn,Ae=re.props||qn;let et;if(ve&&Fa(ve,!1),(et=Ae.onVnodeBeforeUpdate)&&$i(et,ve,re,z),st&&Na(re,z,ve,"beforeUpdate"),ve&&Fa(ve,!0),(qe.innerHTML&&Ae.innerHTML==null||qe.textContent&&Ae.textContent==null)&&c(_e,""),Me?_(z.dynamicChildren,Me,_e,ve,ke,Dg(re,Ee),be):Se||D(z,re,_e,null,ve,ke,Dg(re,Ee),be,!1),Ne>0){if(Ne&16)O(_e,qe,Ae,ve,Ee);else if(Ne&2&&qe.class!==Ae.class&&i(_e,"class",null,Ae.class,Ee),Ne&4&&i(_e,"style",qe.style,Ae.style,Ee),Ne&8){const St=re.dynamicProps;for(let Lt=0;Lt<St.length;Lt++){const Pt=St[Lt],en=qe[Pt],zt=Ae[Pt];(zt!==en||Pt==="value")&&i(_e,Pt,en,zt,Ee,ve)}}Ne&1&&z.children!==re.children&&c(_e,re.children)}else!Se&&Me==null&&O(_e,qe,Ae,ve,Ee);((et=Ae.onVnodeUpdated)||st)&&os(()=>{et&&$i(et,ve,re,z),st&&Na(re,z,ve,"updated")},ke)},_=(z,re,ve,ke,Ee,be,Se)=>{for(let _e=0;_e<re.length;_e++){const Ne=z[_e],Me=re[_e],st=Ne.el&&(Ne.type===dt||!za(Ne,Me)||Ne.shapeFlag&198)?d(Ne.el):ve;g(Ne,Me,st,null,ke,Ee,be,Se,!0)}},O=(z,re,ve,ke,Ee)=>{if(re!==ve){if(re!==qn)for(const be in re)!Lc(be)&&!(be in ve)&&i(z,be,re[be],null,Ee,ke);for(const be in ve){if(Lc(be))continue;const Se=ve[be],_e=re[be];Se!==_e&&be!=="value"&&i(z,be,_e,Se,Ee,ke)}"value"in ve&&i(z,"value",re.value,ve.value,Ee)}},P=(z,re,ve,ke,Ee,be,Se,_e,Ne)=>{const Me=re.el=z?z.el:a(""),st=re.anchor=z?z.anchor:a("");let{patchFlag:qe,dynamicChildren:Ae,slotScopeIds:et}=re;et&&(_e=_e?_e.concat(et):et),z==null?(r(Me,ve,ke),r(st,ve,ke),A(re.children||[],ve,st,Ee,be,Se,_e,Ne)):qe>0&&qe&64&&Ae&&z.dynamicChildren?(_(z.dynamicChildren,Ae,ve,Ee,be,Se,_e),(re.key!=null||Ee&&re===Ee.subTree)&&Jy(z,re,!0)):D(z,re,ve,st,Ee,be,Se,_e,Ne)},U=(z,re,ve,ke,Ee,be,Se,_e,Ne)=>{re.slotScopeIds=_e,z==null?re.shapeFlag&512?Ee.ctx.activate(re,ve,ke,Se,Ne):j(re,ve,ke,Ee,be,Se,Ne):N(z,re,Ne)},j=(z,re,ve,ke,Ee,be,Se)=>{const _e=z.component=sM(z,ke,Ee);if(am(z)&&(_e.ctx.renderer=Te),iM(_e,!1,Se),_e.asyncDep){if(Ee&&Ee.registerDep(_e,R,Se),!z.el){const Ne=_e.subTree=ie(br);y(null,Ne,re,ve)}}else R(_e,z,re,ve,Ee,be,Se)},N=(z,re,ve)=>{const ke=re.component=z.component;if(Q$(z,re,ve))if(ke.asyncDep&&!ke.asyncResolved){V(ke,re,ve);return}else ke.next=re,ke.update();else re.el=z.el,ke.vnode=re},R=(z,re,ve,ke,Ee,be,Se)=>{const _e=()=>{if(z.isMounted){let{next:qe,bu:Ae,u:et,parent:St,vnode:Lt}=z;{const ht=__(z);if(ht){qe&&(qe.el=Lt.el,V(z,qe,Se)),ht.asyncDep.then(()=>{z.isUnmounted||_e()});return}}let Pt=qe,en;Fa(z,!1),qe?(qe.el=Lt.el,V(z,qe,Se)):qe=Lt,Ae&&fh(Ae),(en=qe.props&&qe.props.onVnodeBeforeUpdate)&&$i(en,St,qe,Lt),Fa(z,!0);const zt=iw(z),bn=z.subTree;z.subTree=zt,g(bn,zt,d(bn.el),Z(bn),z,Ee,be),qe.el=zt.el,Pt===null&&Z$(z,zt.el),et&&os(et,Ee),(en=qe.props&&qe.props.onVnodeUpdated)&&os(()=>$i(en,St,qe,Lt),Ee)}else{let qe;const{el:Ae,props:et}=re,{bm:St,m:Lt,parent:Pt,root:en,type:zt}=z,bn=Jl(re);Fa(z,!1),St&&fh(St),!bn&&(qe=et&&et.onVnodeBeforeMount)&&$i(qe,Pt,re),Fa(z,!0);{en.ce&&en.ce._injectChildStyle(zt);const ht=z.subTree=iw(z);g(null,ht,ve,ke,z,Ee,be),re.el=ht.el}if(Lt&&os(Lt,Ee),!bn&&(qe=et&&et.onVnodeMounted)){const ht=re;os(()=>$i(qe,Pt,ht),Ee)}(re.shapeFlag&256||Pt&&Jl(Pt.vnode)&&Pt.vnode.shapeFlag&256)&&z.a&&os(z.a,Ee),z.isMounted=!0,re=ve=ke=null}};z.scope.on();const Ne=z.effect=new Pk(_e);z.scope.off();const Me=z.update=Ne.run.bind(Ne),st=z.job=Ne.runIfDirty.bind(Ne);st.i=z,st.id=z.uid,Ne.scheduler=()=>Gy(st),Fa(z,!0),Me()},V=(z,re,ve)=>{re.component=z;const ke=z.vnode.props;z.vnode=re,z.next=null,$$(z,re.props,ke,ve),B$(z,re.children,ve),Io(),GS(z),Ro()},D=(z,re,ve,ke,Ee,be,Se,_e,Ne=!1)=>{const Me=z&&z.children,st=z?z.shapeFlag:0,qe=re.children,{patchFlag:Ae,shapeFlag:et}=re;if(Ae>0){if(Ae&128){K(Me,qe,ve,ke,Ee,be,Se,_e,Ne);return}else if(Ae&256){M(Me,qe,ve,ke,Ee,be,Se,_e,Ne);return}}et&8?(st&16&&he(Me,Ee,be),qe!==Me&&c(ve,qe)):st&16?et&16?K(Me,qe,ve,ke,Ee,be,Se,_e,Ne):he(Me,Ee,be,!0):(st&8&&c(ve,""),et&16&&A(qe,ve,ke,Ee,be,Se,_e,Ne))},M=(z,re,ve,ke,Ee,be,Se,_e,Ne)=>{z=z||Yl,re=re||Yl;const Me=z.length,st=re.length,qe=Math.min(Me,st);let Ae;for(Ae=0;Ae<qe;Ae++){const et=re[Ae]=Ne?la(re[Ae]):Hi(re[Ae]);g(z[Ae],et,ve,null,Ee,be,Se,_e,Ne)}Me>st?he(z,Ee,be,!0,!1,qe):A(re,ve,ke,Ee,be,Se,_e,Ne,qe)},K=(z,re,ve,ke,Ee,be,Se,_e,Ne)=>{let Me=0;const st=re.length;let qe=z.length-1,Ae=st-1;for(;Me<=qe&&Me<=Ae;){const et=z[Me],St=re[Me]=Ne?la(re[Me]):Hi(re[Me]);if(za(et,St))g(et,St,ve,null,Ee,be,Se,_e,Ne);else break;Me++}for(;Me<=qe&&Me<=Ae;){const et=z[qe],St=re[Ae]=Ne?la(re[Ae]):Hi(re[Ae]);if(za(et,St))g(et,St,ve,null,Ee,be,Se,_e,Ne);else break;qe--,Ae--}if(Me>qe){if(Me<=Ae){const et=Ae+1,St=et<st?re[et].el:ke;for(;Me<=Ae;)g(null,re[Me]=Ne?la(re[Me]):Hi(re[Me]),ve,St,Ee,be,Se,_e,Ne),Me++}}else if(Me>Ae)for(;Me<=qe;)ee(z[Me],Ee,be,!0),Me++;else{const et=Me,St=Me,Lt=new Map;for(Me=St;Me<=Ae;Me++){const Le=re[Me]=Ne?la(re[Me]):Hi(re[Me]);Le.key!=null&&Lt.set(Le.key,Me)}let Pt,en=0;const zt=Ae-St+1;let bn=!1,ht=0;const Nt=new Array(zt);for(Me=0;Me<zt;Me++)Nt[Me]=0;for(Me=et;Me<=qe;Me++){const Le=z[Me];if(en>=zt){ee(Le,Ee,be,!0);continue}let ne;if(Le.key!=null)ne=Lt.get(Le.key);else for(Pt=St;Pt<=Ae;Pt++)if(Nt[Pt-St]===0&&za(Le,re[Pt])){ne=Pt;break}ne===void 0?ee(Le,Ee,be,!0):(Nt[ne-St]=Me+1,ne>=ht?ht=ne:bn=!0,g(Le,re[ne],ve,null,Ee,be,Se,_e,Ne),en++)}const fe=bn?j$(Nt):Yl;for(Pt=fe.length-1,Me=zt-1;Me>=0;Me--){const Le=St+Me,ne=re[Le],Ye=Le+1<st?re[Le+1].el:ke;Nt[Me]===0?g(null,ne,ve,Ye,Ee,be,Se,_e,Ne):bn&&(Pt<0||Me!==fe[Pt]?q(ne,ve,Ye,2):Pt--)}}},q=(z,re,ve,ke,Ee=null)=>{const{el:be,type:Se,transition:_e,children:Ne,shapeFlag:Me}=z;if(Me&6){q(z.component.subTree,re,ve,ke);return}if(Me&128){z.suspense.move(re,ve,ke);return}if(Me&64){Se.move(z,re,ve,Te);return}if(Se===dt){r(be,re,ve);for(let qe=0;qe<Ne.length;qe++)q(Ne[qe],re,ve,ke);r(z.anchor,re,ve);return}if(Se===Og){b(z,re,ve);return}if(ke!==2&&Me&1&&_e)if(ke===0)_e.beforeEnter(be),r(be,re,ve),os(()=>_e.enter(be),Ee);else{const{leave:qe,delayLeave:Ae,afterLeave:et}=_e,St=()=>{z.ctx.isUnmounted?s(be):r(be,re,ve)},Lt=()=>{qe(be,()=>{St(),et&&et()})};Ae?Ae(be,St,Lt):Lt()}else r(be,re,ve)},ee=(z,re,ve,ke=!1,Ee=!1)=>{const{type:be,props:Se,ref:_e,children:Ne,dynamicChildren:Me,shapeFlag:st,patchFlag:qe,dirs:Ae,cacheIndex:et}=z;if(qe===-2&&(Ee=!1),_e!=null&&(Io(),ip(_e,null,ve,z,!0),Ro()),et!=null&&(re.renderCache[et]=void 0),st&256){re.ctx.deactivate(z);return}const St=st&1&&Ae,Lt=!Jl(z);let Pt;if(Lt&&(Pt=Se&&Se.onVnodeBeforeUnmount)&&$i(Pt,re,z),st&6)ue(z.component,ve,ke);else{if(st&128){z.suspense.unmount(ve,ke);return}St&&Na(z,null,re,"beforeUnmount"),st&64?z.type.remove(z,re,ve,Te,ke):Me&&!Me.hasOnce&&(be!==dt||qe>0&&qe&64)?he(Me,re,ve,!1,!0):(be===dt&&qe&384||!Ee&&st&16)&&he(Ne,re,ve),ke&&X(z)}(Lt&&(Pt=Se&&Se.onVnodeUnmounted)||St)&&os(()=>{Pt&&$i(Pt,re,z),St&&Na(z,null,re,"unmounted")},ve)},X=z=>{const{type:re,el:ve,anchor:ke,transition:Ee}=z;if(re===dt){te(ve,ke);return}if(re===Og){S(z);return}const be=()=>{s(ve),Ee&&!Ee.persisted&&Ee.afterLeave&&Ee.afterLeave()};if(z.shapeFlag&1&&Ee&&!Ee.persisted){const{leave:Se,delayLeave:_e}=Ee,Ne=()=>Se(ve,be);_e?_e(z.el,be,Ne):Ne()}else be()},te=(z,re)=>{let ve;for(;z!==re;)ve=f(z),s(z),z=ve;s(re)},ue=(z,re,ve)=>{const{bum:ke,scope:Ee,job:be,subTree:Se,um:_e,m:Ne,a:Me,parent:st,slots:{__:qe}}=z;sw(Ne),sw(Me),ke&&fh(ke),st&&Ve(qe)&&qe.forEach(Ae=>{st.renderCache[Ae]=void 0}),Ee.stop(),be&&(be.flags|=8,ee(Se,z,re,ve)),_e&&os(_e,re),os(()=>{z.isUnmounted=!0},re),re&&re.pendingBranch&&!re.isUnmounted&&z.asyncDep&&!z.asyncResolved&&z.suspenseId===re.pendingId&&(re.deps--,re.deps===0&&re.resolve())},he=(z,re,ve,ke=!1,Ee=!1,be=0)=>{for(let Se=be;Se<z.length;Se++)ee(z[Se],re,ve,ke,Ee)},Z=z=>{if(z.shapeFlag&6)return Z(z.component.subTree);if(z.shapeFlag&128)return z.suspense.next();const re=f(z.anchor||z.el),ve=re&&re[e_];return ve?f(ve):re};let ce=!1;const ae=(z,re,ve)=>{z==null?re._vnode&&ee(re._vnode,null,null,!0):g(re._vnode||null,z,re,null,null,null,ve),re._vnode=z,ce||(ce=!0,GS(),Qk(),ce=!1)},Te={p:g,um:ee,m:q,r:X,mt:j,mc:A,pc:D,pbc:_,n:Z,o:t};return{render:ae,hydrate:void 0,createApp:D$(ae)}}function Dg({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Fa({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function H$(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Jy(t,e,n=!1){const r=t.children,s=e.children;if(Ve(r)&&Ve(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=la(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Jy(o,a)),a.type===Vu&&(a.el=o.el),a.type===br&&!a.el&&(a.el=o.el)}}function j$(t){const e=t.slice(),n=[0];let r,s,i,o,a;const u=t.length;for(r=0;r<u;r++){const l=t[r];if(l!==0){if(s=n[n.length-1],t[s]<l){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<l?i=a+1:o=a;l<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function __(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:__(e)}function sw(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const K$=Symbol.for("v-scx"),z$=()=>nt(K$);function Fr(t,e){return eb(t,null,e)}function Ie(t,e,n){return eb(t,e,n)}function eb(t,e,n=qn){const{immediate:r,deep:s,flush:i,once:o}=n,a=kr({},n),u=e&&r||!e&&i!=="post";let l;if(sd){if(i==="sync"){const h=z$();l=h.__watcherHandles||(h.__watcherHandles=[])}else if(!u){const h=()=>{};return h.stop=xn,h.resume=xn,h.pause=xn,h}}const c=Nr;a.call=(h,p,g)=>Ei(h,c,p,g);let d=!1;i==="post"?a.scheduler=h=>{os(h,c&&c.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(h,p)=>{p?h():Gy(h)}),a.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const f=d$(t,e,a);return sd&&(l?l.push(f):u&&f()),f}function W$(t,e,n){const r=this.proxy,s=ut(t)?t.includes(".")?A_(r,t):()=>r[t]:t.bind(r,r);let i;pt(e)?i=e:(i=e.handler,n=e);const o=Hd(this),a=eb(s,i.bind(r),n);return o(),a}function A_(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const G$=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${fs(e)}Modifiers`]||t[`${$o(e)}Modifiers`];function q$(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||qn;let s=n;const i=e.startsWith("update:"),o=i&&G$(r,e.slice(7));o&&(o.trim&&(s=n.map(c=>ut(c)?c.trim():c)),o.number&&(s=n.map(Hv)));let a,u=r[a=Pc(e)]||r[a=Pc(fs(e))];!u&&i&&(u=r[a=Pc($o(e))]),u&&Ei(u,t,6,s);const l=r[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ei(l,t,6,s)}}function I_(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!pt(t)){const u=l=>{const c=I_(l,e,!0);c&&(a=!0,kr(o,c))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!a?(Bt(t)&&r.set(t,null),null):(Ve(i)?i.forEach(u=>o[u]=null):kr(o,i),Bt(t)&&r.set(t,o),o)}function fm(t,e){return!t||!em(e)?!1:(e=e.slice(2).replace(/Once$/,""),hn(t,e[0].toLowerCase()+e.slice(1))||hn(t,$o(e))||hn(t,e))}function iw(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:u,render:l,renderCache:c,props:d,data:f,setupState:h,ctx:p,inheritAttrs:g}=t,v=sp(t);let y,w;try{if(n.shapeFlag&4){const S=s||r,E=S;y=Hi(l.call(E,S,c,d,h,f,p)),w=a}else{const S=e;y=Hi(S.length>1?S(d,{attrs:a,slots:o,emit:u}):S(d,null)),w=e.props?a:Y$(a)}}catch(S){Nc.length=0,om(S,t,1),y=ie(br)}let b=y;if(w&&g!==!1){const S=Object.keys(w),{shapeFlag:E}=b;S.length&&E&7&&(i&&S.some(Ny)&&(w=X$(w,i)),b=Lo(b,w,!1,!0))}return n.dirs&&(b=Lo(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&cl(b,n.transition),y=b,sp(v),y}const Y$=t=>{let e;for(const n in t)(n==="class"||n==="style"||em(n))&&((e||(e={}))[n]=t[n]);return e},X$=(t,e)=>{const n={};for(const r in t)(!Ny(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Q$(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:u}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?ow(r,o,l):!!o;if(u&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(o[f]!==r[f]&&!fm(l,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?ow(r,o,l):!0:!!o;return!1}function ow(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!fm(n,i))return!0}return!1}function Z$({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const R_=t=>t.__isSuspense;function J$(t,e){e&&e.pendingBranch?Ve(t)?e.effects.push(...t):e.effects.push(t):p$(t)}const dt=Symbol.for("v-fgt"),Vu=Symbol.for("v-txt"),br=Symbol.for("v-cmt"),Og=Symbol.for("v-stc"),Nc=[];let Ns=null;function $(t=!1){Nc.push(Ns=t?null:[])}function eM(){Nc.pop(),Ns=Nc[Nc.length-1]||null}let rd=1;function aw(t,e=!1){rd+=t,t<0&&Ns&&e&&(Ns.hasOnce=!0)}function L_(t){return t.dynamicChildren=rd>0?Ns||Yl:null,eM(),rd>0&&Ns&&Ns.push(t),t}function Y(t,e,n,r,s,i){return L_(J(t,e,n,r,s,i,!0))}function ye(t,e,n,r,s){return L_(ie(t,e,n,r,s,!0))}function $n(t){return t?t.__v_isVNode===!0:!1}function za(t,e){return t.type===e.type&&t.key===e.key}const P_=({key:t})=>t??null,ph=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ut(t)||Dn(t)||pt(t)?{i:Dr,r:t,k:e,f:!!n}:t:null);function J(t,e=null,n=null,r=0,s=null,i=t===dt?0:1,o=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&P_(e),ref:e&&ph(e),scopeId:Jk,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Dr};return a?(tb(u,n),i&128&&t.normalize(u)):n&&(u.shapeFlag|=ut(n)?8:16),rd>0&&!o&&Ns&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&Ns.push(u),u}const ie=tM;function tM(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===h_)&&(t=br),$n(t)){const a=Lo(t,e,!0);return n&&tb(a,n),rd>0&&!i&&Ns&&(a.shapeFlag&6?Ns[Ns.indexOf(t)]=a:Ns.push(a)),a.patchFlag=-2,a}if(uM(t)&&(t=t.__vccOpts),e){e=Qi(e);let{class:a,style:u}=e;a&&!ut(a)&&(e.class=F(a)),Bt(u)&&(Wy(u)&&!Ve(u)&&(u=kr({},u)),e.style=mt(u))}const o=ut(t)?1:R_(t)?128:t_(t)?64:Bt(t)?4:pt(t)?2:0;return J(t,e,n,r,s,o,i,!0)}function Qi(t){return t?Wy(t)||w_(t)?kr({},t):t:null}function Lo(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:u}=t,l=e?Yt(s||{},e):s,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&P_(l),ref:e&&e.ref?n&&i?Ve(i)?i.concat(ph(e)):[i,ph(e)]:ph(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==dt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Lo(t.ssContent),ssFallback:t.ssFallback&&Lo(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&r&&cl(c,u.clone(c)),c}function Qt(t=" ",e=0){return ie(Vu,null,t,e)}function ge(t="",e=!1){return e?($(),ye(br,null,t)):ie(br,null,t)}function Hi(t){return t==null||typeof t=="boolean"?ie(br):Ve(t)?ie(dt,null,t.slice()):$n(t)?la(t):ie(Vu,null,String(t))}function la(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Lo(t)}function tb(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ve(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),tb(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!w_(e)?e._ctx=Dr:s===3&&Dr&&(Dr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else pt(e)?(e={default:e,_ctx:Dr},n=32):(e=String(e),r&64?(n=16,e=[Qt(e)]):n=8);t.children=e,t.shapeFlag|=n}function Yt(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=F([e.class,r.class]));else if(s==="style")e.style=mt([e.style,r.style]);else if(em(s)){const i=e[s],o=r[s];o&&i!==o&&!(Ve(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function $i(t,e,n,r=null){Ei(t,e,7,[n,r])}const nM=y_();let rM=0;function sM(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||nM,i={uid:rM++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ik(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:x_(r,s),emitsOptions:I_(r,s),emit:null,emitted:null,propsDefaults:qn,inheritAttrs:r.inheritAttrs,ctx:qn,data:qn,props:qn,attrs:qn,slots:qn,refs:qn,setupState:qn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=q$.bind(null,i),t.ce&&t.ce(i),i}let Nr=null;const Kt=()=>Nr||Dr;let ap,Qv;{const t=rm(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};ap=e("__VUE_INSTANCE_SETTERS__",n=>Nr=n),Qv=e("__VUE_SSR_SETTERS__",n=>sd=n)}const Hd=t=>{const e=Nr;return ap(t),t.scope.on(),()=>{t.scope.off(),ap(e)}},lw=()=>{Nr&&Nr.scope.off(),ap(null)};function D_(t){return t.vnode.shapeFlag&4}let sd=!1;function iM(t,e=!1,n=!1){e&&Qv(e);const{props:r,children:s}=t.vnode,i=D_(t);O$(t,r,i,e),F$(t,s,n||e);const o=i?oM(t,e):void 0;return e&&Qv(!1),o}function oM(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,k$);const{setup:r}=n;if(r){Io();const s=t.setupContext=r.length>1?$_(t):null,i=Hd(t),o=Ud(r,t,0,[t.props,s]),a=ul(o);if(Ro(),i(),(a||t.sp)&&!Jl(t)&&u_(t),a){if(o.then(lw,lw),e)return o.then(u=>{uw(t,u)}).catch(u=>{om(u,t,0)});t.asyncDep=o}else uw(t,o)}else O_(t)}function uw(t,e,n){pt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Bt(e)&&(t.setupState=Gk(e)),O_(t)}function O_(t,e,n){const r=t.type;t.render||(t.render=r.render||xn);{const s=Hd(t);Io();try{_$(t)}finally{Ro(),s()}}}const aM={get(t,e){return Xr(t,"get",""),t[e]}};function $_(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,aM),slots:t.slots,emit:t.emit,expose:e}}function hm(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Gk(ko(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Mc)return Mc[n](t)},has(e,n){return n in e||n in Mc}})):t.proxy}function lM(t,e=!0){return pt(t)?t.displayName||t.name:t.name||e&&t.__name}function uM(t){return pt(t)&&"__vccOpts"in t}const L=(t,e)=>u$(t,e,sd);function bt(t,e,n){const r=arguments.length;return r===2?Bt(e)&&!Ve(e)?$n(e)?ie(t,null,[e]):ie(t,e):ie(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&$n(n)&&(n=[n]),ie(t,e,n))}const cM="3.5.16",dM=xn;/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zv;const cw=typeof window<"u"&&window.trustedTypes;if(cw)try{Zv=cw.createPolicy("vue",{createHTML:t=>t})}catch{}const M_=Zv?t=>Zv.createHTML(t):t=>t,fM="http://www.w3.org/2000/svg",hM="http://www.w3.org/1998/Math/MathML",mo=typeof document<"u"?document:null,dw=mo&&mo.createElement("template"),pM={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?mo.createElementNS(fM,t):e==="mathml"?mo.createElementNS(hM,t):n?mo.createElement(t,{is:n}):mo.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>mo.createTextNode(t),createComment:t=>mo.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>mo.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{dw.innerHTML=M_(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=dw.content;if(r==="svg"||r==="mathml"){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Zo="transition",fc="animation",pu=Symbol("_vtc"),N_={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},F_=kr({},i_,N_),mM=t=>(t.displayName="Transition",t.props=F_,t),Ar=mM((t,{slots:e})=>bt(y$,B_(t),e)),Ba=(t,e=[])=>{Ve(t)?t.forEach(n=>n(...e)):t&&t(...e)},fw=t=>t?Ve(t)?t.some(e=>e.length>1):t.length>1:!1;function B_(t){const e={};for(const P in t)P in N_||(e[P]=t[P]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:u=i,appearActiveClass:l=o,appearToClass:c=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=t,p=gM(s),g=p&&p[0],v=p&&p[1],{onBeforeEnter:y,onEnter:w,onEnterCancelled:b,onLeave:S,onLeaveCancelled:E,onBeforeAppear:x=y,onAppear:k=w,onAppearCancelled:A=b}=e,C=(P,U,j,N)=>{P._enterCancelled=N,ra(P,U?c:a),ra(P,U?l:o),j&&j()},_=(P,U)=>{P._isLeaving=!1,ra(P,d),ra(P,h),ra(P,f),U&&U()},O=P=>(U,j)=>{const N=P?k:w,R=()=>C(U,P,j);Ba(N,[U,R]),hw(()=>{ra(U,P?u:i),Fi(U,P?c:a),fw(N)||pw(U,r,g,R)})};return kr(e,{onBeforeEnter(P){Ba(y,[P]),Fi(P,i),Fi(P,o)},onBeforeAppear(P){Ba(x,[P]),Fi(P,u),Fi(P,l)},onEnter:O(!1),onAppear:O(!0),onLeave(P,U){P._isLeaving=!0;const j=()=>_(P,U);Fi(P,d),P._enterCancelled?(Fi(P,f),Jv()):(Jv(),Fi(P,f)),hw(()=>{P._isLeaving&&(ra(P,d),Fi(P,h),fw(S)||pw(P,r,v,j))}),Ba(S,[P,j])},onEnterCancelled(P){C(P,!1,void 0,!0),Ba(b,[P])},onAppearCancelled(P){C(P,!0,void 0,!0),Ba(A,[P])},onLeaveCancelled(P){_(P),Ba(E,[P])}})}function gM(t){if(t==null)return null;if(Bt(t))return[$g(t.enter),$g(t.leave)];{const e=$g(t);return[e,e]}}function $g(t){return AO(t)}function Fi(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[pu]||(t[pu]=new Set)).add(e)}function ra(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[pu];n&&(n.delete(e),n.size||(t[pu]=void 0))}function hw(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let vM=0;function pw(t,e,n,r){const s=t._endId=++vM,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:u}=V_(t,e);if(!o)return r();const l=o+"end";let c=0;const d=()=>{t.removeEventListener(l,f),i()},f=h=>{h.target===t&&++c>=u&&d()};setTimeout(()=>{c<u&&d()},a+1),t.addEventListener(l,f)}function V_(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),s=r(`${Zo}Delay`),i=r(`${Zo}Duration`),o=mw(s,i),a=r(`${fc}Delay`),u=r(`${fc}Duration`),l=mw(a,u);let c=null,d=0,f=0;e===Zo?o>0&&(c=Zo,d=o,f=i.length):e===fc?l>0&&(c=fc,d=l,f=u.length):(d=Math.max(o,l),c=d>0?o>l?Zo:fc:null,f=c?c===Zo?i.length:u.length:0);const h=c===Zo&&/\b(transform|all)(,|$)/.test(r(`${Zo}Property`).toString());return{type:c,timeout:d,propCount:f,hasTransform:h}}function mw(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>gw(n)+gw(t[r])))}function gw(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Jv(){return document.body.offsetHeight}function yM(t,e,n){const r=t[pu];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const lp=Symbol("_vod"),U_=Symbol("_vsh"),cn={beforeMount(t,{value:e},{transition:n}){t[lp]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):hc(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),hc(t,!0),r.enter(t)):r.leave(t,()=>{hc(t,!1)}):hc(t,e))},beforeUnmount(t,{value:e}){hc(t,e)}};function hc(t,e){t.style.display=e?t[lp]:"none",t[U_]=!e}const bM=Symbol(""),SM=/(^|;)\s*display\s*:/;function wM(t,e,n){const r=t.style,s=ut(n);let i=!1;if(n&&!s){if(e)if(ut(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&mh(r,a,"")}else for(const o in e)n[o]==null&&mh(r,o,"");for(const o in n)o==="display"&&(i=!0),mh(r,o,n[o])}else if(s){if(e!==n){const o=r[bM];o&&(n+=";"+o),r.cssText=n,i=SM.test(n)}}else e&&t.removeAttribute("style");lp in t&&(t[lp]=i?r.display:"",t[U_]&&(r.display="none"))}const vw=/\s*!important$/;function mh(t,e,n){if(Ve(n))n.forEach(r=>mh(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=EM(t,e);vw.test(n)?t.setProperty($o(r),n.replace(vw,""),"important"):t[r]=n}}const yw=["Webkit","Moz","ms"],Mg={};function EM(t,e){const n=Mg[e];if(n)return n;let r=fs(e);if(r!=="filter"&&r in t)return Mg[e]=r;r=Vd(r);for(let s=0;s<yw.length;s++){const i=yw[s]+r;if(i in t)return Mg[e]=i}return e}const bw="http://www.w3.org/1999/xlink";function Sw(t,e,n,r,s,i=OO(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(bw,e.slice(6,e.length)):t.setAttributeNS(bw,e,n):n==null||i&&!Ck(n)?t.removeAttribute(e):t.setAttribute(e,i?"":wi(n)?String(n):n)}function ww(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?M_(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,u=n==null?t.type==="checkbox"?"on":"":String(n);(a!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=Ck(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function fa(t,e,n,r){t.addEventListener(e,n,r)}function xM(t,e,n,r){t.removeEventListener(e,n,r)}const Ew=Symbol("_vei");function TM(t,e,n,r,s=null){const i=t[Ew]||(t[Ew]={}),o=i[e];if(r&&o)o.value=r;else{const[a,u]=CM(e);if(r){const l=i[e]=AM(r,s);fa(t,a,l,u)}else o&&(xM(t,a,o,u),i[e]=void 0)}}const xw=/(?:Once|Passive|Capture)$/;function CM(t){let e;if(xw.test(t)){e={};let r;for(;r=t.match(xw);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):$o(t.slice(2)),e]}let Ng=0;const kM=Promise.resolve(),_M=()=>Ng||(kM.then(()=>Ng=0),Ng=Date.now());function AM(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ei(IM(r,n.value),e,5,[r])};return n.value=t,n.attached=_M(),n}function IM(t,e){if(Ve(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Tw=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,RM=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?yM(t,r,o):e==="style"?wM(t,n,r):em(e)?Ny(e)||TM(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):LM(t,e,r,o))?(ww(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Sw(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ut(r))?ww(t,fs(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Sw(t,e,r,o))};function LM(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Tw(e)&&pt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Tw(e)&&ut(n)?!1:e in t}const H_=new WeakMap,j_=new WeakMap,up=Symbol("_moveCb"),Cw=Symbol("_enterCb"),PM=t=>(delete t.props.mode,t),DM=PM({name:"TransitionGroup",props:kr({},F_,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Kt(),r=s_();let s,i;return ki(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!NM(s[0].el,n.vnode.el,o)){s=[];return}s.forEach(OM),s.forEach($M);const a=s.filter(MM);Jv(),a.forEach(u=>{const l=u.el,c=l.style;Fi(l,o),c.transform=c.webkitTransform=c.transitionDuration="";const d=l[up]=f=>{f&&f.target!==l||(!f||/transform$/.test(f.propertyName))&&(l.removeEventListener("transitionend",d),l[up]=null,ra(l,o))};l.addEventListener("transitionend",d)}),s=[]}),()=>{const o=Rn(t),a=B_(o);let u=o.tag||dt;if(s=[],i)for(let l=0;l<i.length;l++){const c=i[l];c.el&&c.el instanceof Element&&(s.push(c),cl(c,nd(c,a,r,n)),H_.set(c,c.el.getBoundingClientRect()))}i=e.default?qy(e.default()):[];for(let l=0;l<i.length;l++){const c=i[l];c.key!=null&&cl(c,nd(c,a,r,n))}return ie(u,null,i)}}}),K_=DM;function OM(t){const e=t.el;e[up]&&e[up](),e[Cw]&&e[Cw]()}function $M(t){j_.set(t,t.el.getBoundingClientRect())}function MM(t){const e=H_.get(t),n=j_.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function NM(t,e,n){const r=t.cloneNode(),s=t[pu];s&&s.forEach(a=>{a.split(/\s+/).forEach(u=>u&&r.classList.remove(u))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=V_(r);return i.removeChild(r),o}const mu=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ve(e)?n=>fh(e,n):e};function FM(t){t.target.composing=!0}function kw(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const _o=Symbol("_assign"),pm={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[_o]=mu(s);const i=r||s.props&&s.props.type==="number";fa(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Hv(a)),t[_o](a)}),n&&fa(t,"change",()=>{t.value=t.value.trim()}),e||(fa(t,"compositionstart",FM),fa(t,"compositionend",kw),fa(t,"change",kw))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[_o]=mu(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Hv(t.value):t.value,u=e??"";a!==u&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===u)||(t.value=u))}},cp={deep:!0,created(t,e,n){t[_o]=mu(n),fa(t,"change",()=>{const r=t._modelValue,s=W_(t),i=t.checked,o=t[_o];if(Ve(r)){const a=kk(r,s),u=a!==-1;if(i&&!u)o(r.concat(s));else if(!i&&u){const l=[...r];l.splice(a,1),o(l)}}else if(tm(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(G_(t,i))})},mounted:_w,beforeUpdate(t,e,n){t[_o]=mu(n),_w(t,e,n)}};function _w(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(Ve(e))s=kk(e,r.props.value)>-1;else if(tm(e))s=e.has(r.props.value);else{if(e===n)return;s=hu(e,G_(t,!0))}t.checked!==s&&(t.checked=s)}const z_={created(t,{value:e},n){t.checked=hu(e,n.props.value),t[_o]=mu(n),fa(t,"change",()=>{t[_o](W_(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[_o]=mu(r),e!==n&&(t.checked=hu(e,r.props.value))}};function W_(t){return"_value"in t?t._value:t.value}function G_(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const BM=["ctrl","shift","alt","meta"],VM={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>BM.some(n=>t[`${n}Key`]&&!e.includes(n))},wt=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=VM[e[o]];if(a&&a(s,e))return}return t(s,...i)})},UM={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Sn=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const i=$o(s.key);if(e.some(o=>o===i||UM[o]===i))return t(s)})},HM=kr({patchProp:RM},pM);let Aw;function q_(){return Aw||(Aw=V$(HM))}const ba=(...t)=>{q_().render(...t)},Y_=(...t)=>{const e=q_().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=KM(r);if(!s)return;const i=e._component;!pt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,jM(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function jM(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function KM(t){return ut(t)?document.querySelector(t):t}const mm=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},zM={};function WM(t,e){const n=Mt("router-view");return $(),ye(n)}const GM=mm(zM,[["render",WM]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Vl=typeof document<"u";function X_(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function qM(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&X_(t.default)}const Un=Object.assign;function Fg(t,e){const n={};for(const r in e){const s=e[r];n[r]=xi(s)?s.map(t):t(s)}return n}const Fc=()=>{},xi=Array.isArray,Q_=/#/g,YM=/&/g,XM=/\//g,QM=/=/g,ZM=/\?/g,Z_=/\+/g,JM=/%5B/g,eN=/%5D/g,J_=/%5E/g,tN=/%60/g,e2=/%7B/g,nN=/%7C/g,t2=/%7D/g,rN=/%20/g;function nb(t){return encodeURI(""+t).replace(nN,"|").replace(JM,"[").replace(eN,"]")}function sN(t){return nb(t).replace(e2,"{").replace(t2,"}").replace(J_,"^")}function e0(t){return nb(t).replace(Z_,"%2B").replace(rN,"+").replace(Q_,"%23").replace(YM,"%26").replace(tN,"`").replace(e2,"{").replace(t2,"}").replace(J_,"^")}function iN(t){return e0(t).replace(QM,"%3D")}function oN(t){return nb(t).replace(Q_,"%23").replace(ZM,"%3F")}function aN(t){return t==null?"":oN(t).replace(XM,"%2F")}function id(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const lN=/\/$/,uN=t=>t.replace(lN,"");function Bg(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let u=e.indexOf("?");return a<u&&a>=0&&(u=-1),u>-1&&(r=e.slice(0,u),i=e.slice(u+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=hN(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:id(o)}}function cN(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Iw(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function dN(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&gu(e.matched[r],n.matched[s])&&n2(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function gu(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function n2(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!fN(t[n],e[n]))return!1;return!0}function fN(t,e){return xi(t)?Rw(t,e):xi(e)?Rw(e,t):t===e}function Rw(t,e){return xi(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function hN(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Jo={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var od;(function(t){t.pop="pop",t.push="push"})(od||(od={}));var Bc;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Bc||(Bc={}));function pN(t){if(!t)if(Vl){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),uN(t)}const mN=/^[^#]+#/;function gN(t,e){return t.replace(mN,"#")+e}function vN(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const gm=()=>({left:window.scrollX,top:window.scrollY});function yN(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=vN(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Lw(t,e){return(history.state?history.state.position-e:-1)+t}const t0=new Map;function bN(t,e){t0.set(t,e)}function SN(t){const e=t0.get(t);return t0.delete(t),e}let wN=()=>location.protocol+"//"+location.host;function r2(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,u=s.slice(a);return u[0]!=="/"&&(u="/"+u),Iw(u,"")}return Iw(n,t)+r+s}function EN(t,e,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const h=r2(t,location),p=n.value,g=e.value;let v=0;if(f){if(n.value=h,e.value=f,o&&o===p){o=null;return}v=g?f.position-g.position:0}else r(h);s.forEach(y=>{y(n.value,p,{delta:v,type:od.pop,direction:v?v>0?Bc.forward:Bc.back:Bc.unknown})})};function u(){o=n.value}function l(f){s.push(f);const h=()=>{const p=s.indexOf(f);p>-1&&s.splice(p,1)};return i.push(h),h}function c(){const{history:f}=window;f.state&&f.replaceState(Un({},f.state,{scroll:gm()}),"")}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:u,listen:l,destroy:d}}function Pw(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?gm():null}}function xN(t){const{history:e,location:n}=window,r={value:r2(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(u,l,c){const d=t.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+u:wN()+t+u;try{e[c?"replaceState":"pushState"](l,"",f),s.value=l}catch(h){console.error(h),n[c?"replace":"assign"](f)}}function o(u,l){const c=Un({},e.state,Pw(s.value.back,u,s.value.forward,!0),l,{position:s.value.position});i(u,c,!0),r.value=u}function a(u,l){const c=Un({},s.value,e.state,{forward:u,scroll:gm()});i(c.current,c,!0);const d=Un({},Pw(r.value,u,null),{position:c.position+1},l);i(u,d,!1),r.value=u}return{location:r,state:s,push:a,replace:o}}function TN(t){t=pN(t);const e=xN(t),n=EN(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Un({location:"",base:t,go:r,createHref:gN.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function CN(t){return typeof t=="string"||t&&typeof t=="object"}function s2(t){return typeof t=="string"||typeof t=="symbol"}const i2=Symbol("");var Dw;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Dw||(Dw={}));function vu(t,e){return Un(new Error,{type:t,[i2]:!0},e)}function co(t,e){return t instanceof Error&&i2 in t&&(e==null||!!(t.type&e))}const Ow="[^/]+?",kN={sensitive:!1,strict:!1,start:!0,end:!0},_N=/[.+*?^${}()[\]/\\]/g;function AN(t,e){const n=Un({},kN,e),r=[];let s=n.start?"^":"";const i=[];for(const l of t){const c=l.length?[]:[90];n.strict&&!l.length&&(s+="/");for(let d=0;d<l.length;d++){const f=l[d];let h=40+(n.sensitive?.25:0);if(f.type===0)d||(s+="/"),s+=f.value.replace(_N,"\\$&"),h+=40;else if(f.type===1){const{value:p,repeatable:g,optional:v,regexp:y}=f;i.push({name:p,repeatable:g,optional:v});const w=y||Ow;if(w!==Ow){h+=10;try{new RegExp(`(${w})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${p}" (${w}): `+S.message)}}let b=g?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;d||(b=v&&l.length<2?`(?:/${b})`:"/"+b),v&&(b+="?"),s+=b,h+=20,v&&(h+=-8),g&&(h+=-20),w===".*"&&(h+=-50)}c.push(h)}r.push(c)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(l){const c=l.match(o),d={};if(!c)return null;for(let f=1;f<c.length;f++){const h=c[f]||"",p=i[f-1];d[p.name]=h&&p.repeatable?h.split("/"):h}return d}function u(l){let c="",d=!1;for(const f of t){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const h of f)if(h.type===0)c+=h.value;else if(h.type===1){const{value:p,repeatable:g,optional:v}=h,y=p in l?l[p]:"";if(xi(y)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const w=xi(y)?y.join("/"):y;if(!w)if(v)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);c+=w}}return c||"/"}return{re:o,score:r,keys:i,parse:a,stringify:u}}function IN(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function o2(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=IN(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if($w(r))return 1;if($w(s))return-1}return s.length-r.length}function $w(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const RN={type:0,value:""},LN=/[a-zA-Z0-9_]/;function PN(t){if(!t)return[[]];if(t==="/")return[[RN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${l}": ${h}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,u,l="",c="";function d(){l&&(n===0?i.push({type:0,value:l}):n===1||n===2||n===3?(i.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:c,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),l="")}function f(){l+=u}for(;a<t.length;){if(u=t[a++],u==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:u==="/"?(l&&d(),o()):u===":"?(d(),n=1):f();break;case 4:f(),n=r;break;case 1:u==="("?n=2:LN.test(u)?f():(d(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--);break;case 2:u===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+u:n=3:c+=u;break;case 3:d(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--,c="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),d(),o(),s}function DN(t,e,n){const r=AN(PN(t.path),n),s=Un(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function ON(t,e){const n=[],r=new Map;e=Bw({strict:!1,end:!0,sensitive:!1},e);function s(d){return r.get(d)}function i(d,f,h){const p=!h,g=Nw(d);g.aliasOf=h&&h.record;const v=Bw(e,d),y=[g];if("alias"in d){const S=typeof d.alias=="string"?[d.alias]:d.alias;for(const E of S)y.push(Nw(Un({},g,{components:h?h.record.components:g.components,path:E,aliasOf:h?h.record:g})))}let w,b;for(const S of y){const{path:E}=S;if(f&&E[0]!=="/"){const x=f.record.path,k=x[x.length-1]==="/"?"":"/";S.path=f.record.path+(E&&k+E)}if(w=DN(S,f,v),h?h.alias.push(w):(b=b||w,b!==w&&b.alias.push(w),p&&d.name&&!Fw(w)&&o(d.name)),a2(w)&&u(w),g.children){const x=g.children;for(let k=0;k<x.length;k++)i(x[k],w,h&&h.children[k])}h=h||w}return b?()=>{o(b)}:Fc}function o(d){if(s2(d)){const f=r.get(d);f&&(r.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function u(d){const f=NN(d,n);n.splice(f,0,d),d.record.name&&!Fw(d)&&r.set(d.record.name,d)}function l(d,f){let h,p={},g,v;if("name"in d&&d.name){if(h=r.get(d.name),!h)throw vu(1,{location:d});v=h.record.name,p=Un(Mw(f.params,h.keys.filter(b=>!b.optional).concat(h.parent?h.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),d.params&&Mw(d.params,h.keys.map(b=>b.name))),g=h.stringify(p)}else if(d.path!=null)g=d.path,h=n.find(b=>b.re.test(g)),h&&(p=h.parse(g),v=h.record.name);else{if(h=f.name?r.get(f.name):n.find(b=>b.re.test(f.path)),!h)throw vu(1,{location:d,currentLocation:f});v=h.record.name,p=Un({},f.params,d.params),g=h.stringify(p)}const y=[];let w=h;for(;w;)y.unshift(w.record),w=w.parent;return{name:v,path:g,params:p,matched:y,meta:MN(y)}}t.forEach(d=>i(d));function c(){n.length=0,r.clear()}return{addRoute:i,resolve:l,removeRoute:o,clearRoutes:c,getRoutes:a,getRecordMatcher:s}}function Mw(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Nw(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:$N(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function $N(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Fw(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function MN(t){return t.reduce((e,n)=>Un(e,n.meta),{})}function Bw(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function NN(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;o2(t,e[i])<0?r=i:n=i+1}const s=FN(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function FN(t){let e=t;for(;e=e.parent;)if(a2(e)&&o2(t,e)===0)return e}function a2({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function BN(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Z_," "),o=i.indexOf("="),a=id(o<0?i:i.slice(0,o)),u=o<0?null:id(i.slice(o+1));if(a in e){let l=e[a];xi(l)||(l=e[a]=[l]),l.push(u)}else e[a]=u}return e}function Vw(t){let e="";for(let n in t){const r=t[n];if(n=iN(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(xi(r)?r.map(i=>i&&e0(i)):[r&&e0(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function VN(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=xi(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const UN=Symbol(""),Uw=Symbol(""),vm=Symbol(""),rb=Symbol(""),n0=Symbol("");function pc(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ua(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,u)=>{const l=f=>{f===!1?u(vu(4,{from:n,to:e})):f instanceof Error?u(f):CN(f)?u(vu(2,{from:e,to:f})):(o&&r.enterCallbacks[s]===o&&typeof f=="function"&&o.push(f),a())},c=i(()=>t.call(r&&r.instances[s],e,n,l));let d=Promise.resolve(c);t.length<3&&(d=d.then(l)),d.catch(f=>u(f))})}function Vg(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let u=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(X_(u)){const c=(u.__vccOpts||u)[e];c&&i.push(ua(c,n,r,o,a,s))}else{let l=u();i.push(()=>l.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=qM(c)?c.default:c;o.mods[a]=c,o.components[a]=d;const h=(d.__vccOpts||d)[e];return h&&ua(h,n,r,o,a,s)()}))}}return i}function Hw(t){const e=nt(vm),n=nt(rb),r=L(()=>{const u=m(t.to);return e.resolve(u)}),s=L(()=>{const{matched:u}=r.value,{length:l}=u,c=u[l-1],d=n.matched;if(!c||!d.length)return-1;const f=d.findIndex(gu.bind(null,c));if(f>-1)return f;const h=jw(u[l-2]);return l>1&&jw(c)===h&&d[d.length-1].path!==h?d.findIndex(gu.bind(null,u[l-2])):f}),i=L(()=>s.value>-1&&WN(n.params,r.value.params)),o=L(()=>s.value>-1&&s.value===n.matched.length-1&&n2(n.params,r.value.params));function a(u={}){if(zN(u)){const l=e[m(t.replace)?"replace":"push"](m(t.to)).catch(Fc);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>l),l}return Promise.resolve()}return{route:r,href:L(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function HN(t){return t.length===1?t[0]:t}const jN=se({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Hw,setup(t,{slots:e}){const n=fn(Hw(t)),{options:r}=nt(vm),s=L(()=>({[Kw(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Kw(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&HN(e.default(n));return t.custom?i:bt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),KN=jN;function zN(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function WN(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!xi(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function jw(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Kw=(t,e,n)=>t??e??n,GN=se({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=nt(n0),s=L(()=>t.route||r.value),i=nt(Uw,0),o=L(()=>{let l=m(i);const{matched:c}=s.value;let d;for(;(d=c[l])&&!d.components;)l++;return l}),a=L(()=>s.value.matched[o.value]);Jt(Uw,L(()=>o.value+1)),Jt(UN,a),Jt(n0,s);const u=H();return Ie(()=>[u.value,a.value,t.name],([l,c,d],[f,h,p])=>{c&&(c.instances[d]=l,h&&h!==c&&l&&l===f&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),l&&c&&(!h||!gu(c,h)||!f)&&(c.enterCallbacks[d]||[]).forEach(g=>g(l))},{flush:"post"}),()=>{const l=s.value,c=t.name,d=a.value,f=d&&d.components[c];if(!f)return zw(n.default,{Component:f,route:l});const h=d.props[c],p=h?h===!0?l.params:typeof h=="function"?h(l):h:null,v=bt(f,Un({},p,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(d.instances[c]=null)},ref:u}));return zw(n.default,{Component:v,route:l})||v}}});function zw(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const qN=GN;function YN(t){const e=ON(t.routes,t),n=t.parseQuery||BN,r=t.stringifyQuery||Vw,s=t.history,i=pc(),o=pc(),a=pc(),u=On(Jo);let l=Jo;Vl&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Fg.bind(null,Z=>""+Z),d=Fg.bind(null,aN),f=Fg.bind(null,id);function h(Z,ce){let ae,Te;return s2(Z)?(ae=e.getRecordMatcher(Z),Te=ce):Te=Z,e.addRoute(Te,ae)}function p(Z){const ce=e.getRecordMatcher(Z);ce&&e.removeRoute(ce)}function g(){return e.getRoutes().map(Z=>Z.record)}function v(Z){return!!e.getRecordMatcher(Z)}function y(Z,ce){if(ce=Un({},ce||u.value),typeof Z=="string"){const ve=Bg(n,Z,ce.path),ke=e.resolve({path:ve.path},ce),Ee=s.createHref(ve.fullPath);return Un(ve,ke,{params:f(ke.params),hash:id(ve.hash),redirectedFrom:void 0,href:Ee})}let ae;if(Z.path!=null)ae=Un({},Z,{path:Bg(n,Z.path,ce.path).path});else{const ve=Un({},Z.params);for(const ke in ve)ve[ke]==null&&delete ve[ke];ae=Un({},Z,{params:d(ve)}),ce.params=d(ce.params)}const Te=e.resolve(ae,ce),Ce=Z.hash||"";Te.params=c(f(Te.params));const z=cN(r,Un({},Z,{hash:sN(Ce),path:Te.path})),re=s.createHref(z);return Un({fullPath:z,hash:Ce,query:r===Vw?VN(Z.query):Z.query||{}},Te,{redirectedFrom:void 0,href:re})}function w(Z){return typeof Z=="string"?Bg(n,Z,u.value.path):Un({},Z)}function b(Z,ce){if(l!==Z)return vu(8,{from:ce,to:Z})}function S(Z){return k(Z)}function E(Z){return S(Un(w(Z),{replace:!0}))}function x(Z){const ce=Z.matched[Z.matched.length-1];if(ce&&ce.redirect){const{redirect:ae}=ce;let Te=typeof ae=="function"?ae(Z):ae;return typeof Te=="string"&&(Te=Te.includes("?")||Te.includes("#")?Te=w(Te):{path:Te},Te.params={}),Un({query:Z.query,hash:Z.hash,params:Te.path!=null?{}:Z.params},Te)}}function k(Z,ce){const ae=l=y(Z),Te=u.value,Ce=Z.state,z=Z.force,re=Z.replace===!0,ve=x(ae);if(ve)return k(Un(w(ve),{state:typeof ve=="object"?Un({},Ce,ve.state):Ce,force:z,replace:re}),ce||ae);const ke=ae;ke.redirectedFrom=ce;let Ee;return!z&&dN(r,Te,ae)&&(Ee=vu(16,{to:ke,from:Te}),q(Te,Te,!0,!1)),(Ee?Promise.resolve(Ee):_(ke,Te)).catch(be=>co(be)?co(be,2)?be:K(be):D(be,ke,Te)).then(be=>{if(be){if(co(be,2))return k(Un({replace:re},w(be.to),{state:typeof be.to=="object"?Un({},Ce,be.to.state):Ce,force:z}),ce||ke)}else be=P(ke,Te,!0,re,Ce);return O(ke,Te,be),be})}function A(Z,ce){const ae=b(Z,ce);return ae?Promise.reject(ae):Promise.resolve()}function C(Z){const ce=te.values().next().value;return ce&&typeof ce.runWithContext=="function"?ce.runWithContext(Z):Z()}function _(Z,ce){let ae;const[Te,Ce,z]=XN(Z,ce);ae=Vg(Te.reverse(),"beforeRouteLeave",Z,ce);for(const ve of Te)ve.leaveGuards.forEach(ke=>{ae.push(ua(ke,Z,ce))});const re=A.bind(null,Z,ce);return ae.push(re),he(ae).then(()=>{ae=[];for(const ve of i.list())ae.push(ua(ve,Z,ce));return ae.push(re),he(ae)}).then(()=>{ae=Vg(Ce,"beforeRouteUpdate",Z,ce);for(const ve of Ce)ve.updateGuards.forEach(ke=>{ae.push(ua(ke,Z,ce))});return ae.push(re),he(ae)}).then(()=>{ae=[];for(const ve of z)if(ve.beforeEnter)if(xi(ve.beforeEnter))for(const ke of ve.beforeEnter)ae.push(ua(ke,Z,ce));else ae.push(ua(ve.beforeEnter,Z,ce));return ae.push(re),he(ae)}).then(()=>(Z.matched.forEach(ve=>ve.enterCallbacks={}),ae=Vg(z,"beforeRouteEnter",Z,ce,C),ae.push(re),he(ae))).then(()=>{ae=[];for(const ve of o.list())ae.push(ua(ve,Z,ce));return ae.push(re),he(ae)}).catch(ve=>co(ve,8)?ve:Promise.reject(ve))}function O(Z,ce,ae){a.list().forEach(Te=>C(()=>Te(Z,ce,ae)))}function P(Z,ce,ae,Te,Ce){const z=b(Z,ce);if(z)return z;const re=ce===Jo,ve=Vl?history.state:{};ae&&(Te||re?s.replace(Z.fullPath,Un({scroll:re&&ve&&ve.scroll},Ce)):s.push(Z.fullPath,Ce)),u.value=Z,q(Z,ce,ae,re),K()}let U;function j(){U||(U=s.listen((Z,ce,ae)=>{if(!ue.listening)return;const Te=y(Z),Ce=x(Te);if(Ce){k(Un(Ce,{replace:!0,force:!0}),Te).catch(Fc);return}l=Te;const z=u.value;Vl&&bN(Lw(z.fullPath,ae.delta),gm()),_(Te,z).catch(re=>co(re,12)?re:co(re,2)?(k(Un(w(re.to),{force:!0}),Te).then(ve=>{co(ve,20)&&!ae.delta&&ae.type===od.pop&&s.go(-1,!1)}).catch(Fc),Promise.reject()):(ae.delta&&s.go(-ae.delta,!1),D(re,Te,z))).then(re=>{re=re||P(Te,z,!1),re&&(ae.delta&&!co(re,8)?s.go(-ae.delta,!1):ae.type===od.pop&&co(re,20)&&s.go(-1,!1)),O(Te,z,re)}).catch(Fc)}))}let N=pc(),R=pc(),V;function D(Z,ce,ae){K(Z);const Te=R.list();return Te.length?Te.forEach(Ce=>Ce(Z,ce,ae)):console.error(Z),Promise.reject(Z)}function M(){return V&&u.value!==Jo?Promise.resolve():new Promise((Z,ce)=>{N.add([Z,ce])})}function K(Z){return V||(V=!Z,j(),N.list().forEach(([ce,ae])=>Z?ae(Z):ce()),N.reset()),Z}function q(Z,ce,ae,Te){const{scrollBehavior:Ce}=t;if(!Vl||!Ce)return Promise.resolve();const z=!ae&&SN(Lw(Z.fullPath,0))||(Te||!ae)&&history.state&&history.state.scroll||null;return ft().then(()=>Ce(Z,ce,z)).then(re=>re&&yN(re)).catch(re=>D(re,Z,ce))}const ee=Z=>s.go(Z);let X;const te=new Set,ue={currentRoute:u,listening:!0,addRoute:h,removeRoute:p,clearRoutes:e.clearRoutes,hasRoute:v,getRoutes:g,resolve:y,options:t,push:S,replace:E,go:ee,back:()=>ee(-1),forward:()=>ee(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:R.add,isReady:M,install(Z){const ce=this;Z.component("RouterLink",KN),Z.component("RouterView",qN),Z.config.globalProperties.$router=ce,Object.defineProperty(Z.config.globalProperties,"$route",{enumerable:!0,get:()=>m(u)}),Vl&&!X&&u.value===Jo&&(X=!0,S(s.location).catch(Ce=>{}));const ae={};for(const Ce in Jo)Object.defineProperty(ae,Ce,{get:()=>u.value[Ce],enumerable:!0});Z.provide(vm,ce),Z.provide(rb,Ky(ae)),Z.provide(n0,u);const Te=Z.unmount;te.add(Z),Z.unmount=function(){te.delete(Z),te.size<1&&(l=Jo,U&&U(),U=null,u.value=Jo,X=!1,V=!1),Te()}}};function he(Z){return Z.reduce((ce,ae)=>ce.then(()=>C(ae)),Promise.resolve())}return ue}function XN(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(l=>gu(l,a))?r.push(a):n.push(a));const u=t.matched[o];u&&(e.matched.find(l=>gu(l,u))||s.push(u))}return[n,r,s]}function QN(){return nt(vm)}function ZN(t){return nt(rb)}function l2(t,e){return function(){return t.apply(e,arguments)}}const{toString:JN}=Object.prototype,{getPrototypeOf:sb}=Object,{iterator:ym,toStringTag:u2}=Symbol,bm=(t=>e=>{const n=JN.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),_i=t=>(t=t.toLowerCase(),e=>bm(e)===t),Sm=t=>e=>typeof e===t,{isArray:Uu}=Array,ad=Sm("undefined");function eF(t){return t!==null&&!ad(t)&&t.constructor!==null&&!ad(t.constructor)&&Es(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const c2=_i("ArrayBuffer");function tF(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&c2(t.buffer),e}const nF=Sm("string"),Es=Sm("function"),d2=Sm("number"),wm=t=>t!==null&&typeof t=="object",rF=t=>t===!0||t===!1,gh=t=>{if(bm(t)!=="object")return!1;const e=sb(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(u2 in t)&&!(ym in t)},sF=_i("Date"),iF=_i("File"),oF=_i("Blob"),aF=_i("FileList"),lF=t=>wm(t)&&Es(t.pipe),uF=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Es(t.append)&&((e=bm(t))==="formdata"||e==="object"&&Es(t.toString)&&t.toString()==="[object FormData]"))},cF=_i("URLSearchParams"),[dF,fF,hF,pF]=["ReadableStream","Request","Response","Headers"].map(_i),mF=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function jd(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Uu(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function f2(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Ya=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,h2=t=>!ad(t)&&t!==Ya;function r0(){const{caseless:t}=h2(this)&&this||{},e={},n=(r,s)=>{const i=t&&f2(e,s)||s;gh(e[i])&&gh(r)?e[i]=r0(e[i],r):gh(r)?e[i]=r0({},r):Uu(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&jd(arguments[r],n);return e}const gF=(t,e,n,{allOwnKeys:r}={})=>(jd(e,(s,i)=>{n&&Es(s)?t[i]=l2(s,n):t[i]=s},{allOwnKeys:r}),t),vF=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),yF=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},bF=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&sb(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},SF=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},wF=t=>{if(!t)return null;if(Uu(t))return t;let e=t.length;if(!d2(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},EF=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&sb(Uint8Array)),xF=(t,e)=>{const r=(t&&t[ym]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},TF=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},CF=_i("HTMLFormElement"),kF=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Ww=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),_F=_i("RegExp"),p2=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};jd(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},AF=t=>{p2(t,(e,n)=>{if(Es(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Es(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},IF=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Uu(t)?r(t):r(String(t).split(e)),n},RF=()=>{},LF=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function PF(t){return!!(t&&Es(t.append)&&t[u2]==="FormData"&&t[ym])}const DF=t=>{const e=new Array(10),n=(r,s)=>{if(wm(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Uu(r)?[]:{};return jd(r,(o,a)=>{const u=n(o,s+1);!ad(u)&&(i[a]=u)}),e[s]=void 0,i}}return r};return n(t,0)},OF=_i("AsyncFunction"),$F=t=>t&&(wm(t)||Es(t))&&Es(t.then)&&Es(t.catch),m2=((t,e)=>t?setImmediate:e?((n,r)=>(Ya.addEventListener("message",({source:s,data:i})=>{s===Ya&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Ya.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Es(Ya.postMessage)),MF=typeof queueMicrotask<"u"?queueMicrotask.bind(Ya):typeof process<"u"&&process.nextTick||m2,NF=t=>t!=null&&Es(t[ym]),rt={isArray:Uu,isArrayBuffer:c2,isBuffer:eF,isFormData:uF,isArrayBufferView:tF,isString:nF,isNumber:d2,isBoolean:rF,isObject:wm,isPlainObject:gh,isReadableStream:dF,isRequest:fF,isResponse:hF,isHeaders:pF,isUndefined:ad,isDate:sF,isFile:iF,isBlob:oF,isRegExp:_F,isFunction:Es,isStream:lF,isURLSearchParams:cF,isTypedArray:EF,isFileList:aF,forEach:jd,merge:r0,extend:gF,trim:mF,stripBOM:vF,inherits:yF,toFlatObject:bF,kindOf:bm,kindOfTest:_i,endsWith:SF,toArray:wF,forEachEntry:xF,matchAll:TF,isHTMLForm:CF,hasOwnProperty:Ww,hasOwnProp:Ww,reduceDescriptors:p2,freezeMethods:AF,toObjectSet:IF,toCamelCase:kF,noop:RF,toFiniteNumber:LF,findKey:f2,global:Ya,isContextDefined:h2,isSpecCompliantForm:PF,toJSONObject:DF,isAsyncFn:OF,isThenable:$F,setImmediate:m2,asap:MF,isIterable:NF};function yn(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}rt.inherits(yn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:rt.toJSONObject(this.config),code:this.code,status:this.status}}});const g2=yn.prototype,v2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{v2[t]={value:t}});Object.defineProperties(yn,v2);Object.defineProperty(g2,"isAxiosError",{value:!0});yn.from=(t,e,n,r,s,i)=>{const o=Object.create(g2);return rt.toFlatObject(t,o,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),yn.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const FF=null;function s0(t){return rt.isPlainObject(t)||rt.isArray(t)}function y2(t){return rt.endsWith(t,"[]")?t.slice(0,-2):t}function Gw(t,e,n){return t?t.concat(e).map(function(s,i){return s=y2(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function BF(t){return rt.isArray(t)&&!t.some(s0)}const VF=rt.toFlatObject(rt,{},null,function(e){return/^is[A-Z]/.test(e)});function Em(t,e,n){if(!rt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=rt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,v){return!rt.isUndefined(v[g])});const r=n.metaTokens,s=n.visitor||c,i=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&rt.isSpecCompliantForm(e);if(!rt.isFunction(s))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(rt.isDate(p))return p.toISOString();if(!u&&rt.isBlob(p))throw new yn("Blob is not supported. Use a Buffer instead.");return rt.isArrayBuffer(p)||rt.isTypedArray(p)?u&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,g,v){let y=p;if(p&&!v&&typeof p=="object"){if(rt.endsWith(g,"{}"))g=r?g:g.slice(0,-2),p=JSON.stringify(p);else if(rt.isArray(p)&&BF(p)||(rt.isFileList(p)||rt.endsWith(g,"[]"))&&(y=rt.toArray(p)))return g=y2(g),y.forEach(function(b,S){!(rt.isUndefined(b)||b===null)&&e.append(o===!0?Gw([g],S,i):o===null?g:g+"[]",l(b))}),!1}return s0(p)?!0:(e.append(Gw(v,g,i),l(p)),!1)}const d=[],f=Object.assign(VF,{defaultVisitor:c,convertValue:l,isVisitable:s0});function h(p,g){if(!rt.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(p),rt.forEach(p,function(y,w){(!(rt.isUndefined(y)||y===null)&&s.call(e,y,rt.isString(w)?w.trim():w,g,f))===!0&&h(y,g?g.concat(w):[w])}),d.pop()}}if(!rt.isObject(t))throw new TypeError("data must be an object");return h(t),e}function qw(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function ib(t,e){this._pairs=[],t&&Em(t,this,e)}const b2=ib.prototype;b2.append=function(e,n){this._pairs.push([e,n])};b2.toString=function(e){const n=e?function(r){return e.call(this,r,qw)}:qw;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function UF(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function S2(t,e,n){if(!e)return t;const r=n&&n.encode||UF;rt.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=rt.isURLSearchParams(e)?e.toString():new ib(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Yw{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){rt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const w2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},HF=typeof URLSearchParams<"u"?URLSearchParams:ib,jF=typeof FormData<"u"?FormData:null,KF=typeof Blob<"u"?Blob:null,zF={isBrowser:!0,classes:{URLSearchParams:HF,FormData:jF,Blob:KF},protocols:["http","https","file","blob","url","data"]},ob=typeof window<"u"&&typeof document<"u",i0=typeof navigator=="object"&&navigator||void 0,WF=ob&&(!i0||["ReactNative","NativeScript","NS"].indexOf(i0.product)<0),GF=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",qF=ob&&window.location.href||"http://localhost",YF=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ob,hasStandardBrowserEnv:WF,hasStandardBrowserWebWorkerEnv:GF,navigator:i0,origin:qF},Symbol.toStringTag,{value:"Module"})),Qr={...YF,...zF};function XF(t,e){return Em(t,new Qr.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return Qr.isNode&&rt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function QF(t){return rt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ZF(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function E2(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),u=i>=n.length;return o=!o&&rt.isArray(s)?s.length:o,u?(rt.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!rt.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&rt.isArray(s[o])&&(s[o]=ZF(s[o])),!a)}if(rt.isFormData(t)&&rt.isFunction(t.entries)){const n={};return rt.forEachEntry(t,(r,s)=>{e(QF(r),s,n,0)}),n}return null}function JF(t,e,n){if(rt.isString(t))try{return(e||JSON.parse)(t),rt.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Kd={transitional:w2,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=rt.isObject(e);if(i&&rt.isHTMLForm(e)&&(e=new FormData(e)),rt.isFormData(e))return s?JSON.stringify(E2(e)):e;if(rt.isArrayBuffer(e)||rt.isBuffer(e)||rt.isStream(e)||rt.isFile(e)||rt.isBlob(e)||rt.isReadableStream(e))return e;if(rt.isArrayBufferView(e))return e.buffer;if(rt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return XF(e,this.formSerializer).toString();if((a=rt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Em(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),JF(e)):e}],transformResponse:[function(e){const n=this.transitional||Kd.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(rt.isResponse(e)||rt.isReadableStream(e))return e;if(e&&rt.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?yn.from(a,yn.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qr.classes.FormData,Blob:Qr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};rt.forEach(["delete","get","head","post","put","patch"],t=>{Kd.headers[t]={}});const e3=rt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),t3=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&e3[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Xw=Symbol("internals");function mc(t){return t&&String(t).trim().toLowerCase()}function vh(t){return t===!1||t==null?t:rt.isArray(t)?t.map(vh):String(t)}function n3(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const r3=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ug(t,e,n,r,s){if(rt.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!rt.isString(e)){if(rt.isString(r))return e.indexOf(r)!==-1;if(rt.isRegExp(r))return r.test(e)}}function s3(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function i3(t,e){const n=rt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let xs=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,u,l){const c=mc(u);if(!c)throw new Error("header name must be a non-empty string");const d=rt.findKey(s,c);(!d||s[d]===void 0||l===!0||l===void 0&&s[d]!==!1)&&(s[d||u]=vh(a))}const o=(a,u)=>rt.forEach(a,(l,c)=>i(l,c,u));if(rt.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(rt.isString(e)&&(e=e.trim())&&!r3(e))o(t3(e),n);else if(rt.isObject(e)&&rt.isIterable(e)){let a={},u,l;for(const c of e){if(!rt.isArray(c))throw TypeError("Object iterator must return a key-value pair");a[l=c[0]]=(u=a[l])?rt.isArray(u)?[...u,c[1]]:[u,c[1]]:c[1]}o(a,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=mc(e),e){const r=rt.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return n3(s);if(rt.isFunction(n))return n.call(this,s,r);if(rt.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=mc(e),e){const r=rt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Ug(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=mc(o),o){const a=rt.findKey(r,o);a&&(!n||Ug(r,r[a],a,n))&&(delete r[a],s=!0)}}return rt.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Ug(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return rt.forEach(this,(s,i)=>{const o=rt.findKey(r,i);if(o){n[o]=vh(s),delete n[i];return}const a=e?s3(i):String(i).trim();a!==i&&delete n[i],n[a]=vh(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return rt.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&rt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[Xw]=this[Xw]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=mc(o);r[a]||(i3(s,o),r[a]=!0)}return rt.isArray(e)?e.forEach(i):i(e),this}};xs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);rt.reduceDescriptors(xs.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});rt.freezeMethods(xs);function Hg(t,e){const n=this||Kd,r=e||n,s=xs.from(r.headers);let i=r.data;return rt.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function x2(t){return!!(t&&t.__CANCEL__)}function Hu(t,e,n){yn.call(this,t??"canceled",yn.ERR_CANCELED,e,n),this.name="CanceledError"}rt.inherits(Hu,yn,{__CANCEL__:!0});function T2(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new yn("Request failed with status code "+n.status,[yn.ERR_BAD_REQUEST,yn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function o3(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function a3(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(u){const l=Date.now(),c=r[i];o||(o=l),n[s]=u,r[s]=l;let d=i,f=0;for(;d!==s;)f+=n[d++],d=d%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),l-o<e)return;const h=c&&l-c;return h?Math.round(f*1e3/h):void 0}}function l3(t,e){let n=0,r=1e3/e,s,i;const o=(l,c=Date.now())=>{n=c,s=null,i&&(clearTimeout(i),i=null),t.apply(null,l)};return[(...l)=>{const c=Date.now(),d=c-n;d>=r?o(l,c):(s=l,i||(i=setTimeout(()=>{i=null,o(s)},r-d)))},()=>s&&o(s)]}const dp=(t,e,n=3)=>{let r=0;const s=a3(50,250);return l3(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,u=o-r,l=s(u),c=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:u,rate:l||void 0,estimated:l&&a&&c?(a-o)/l:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(d)},n)},Qw=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Zw=t=>(...e)=>rt.asap(()=>t(...e)),u3=Qr.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Qr.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Qr.origin),Qr.navigator&&/(msie|trident)/i.test(Qr.navigator.userAgent)):()=>!0,c3=Qr.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const o=[t+"="+encodeURIComponent(e)];rt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),rt.isString(r)&&o.push("path="+r),rt.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function d3(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function f3(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function C2(t,e,n){let r=!d3(e);return t&&(r||n==!1)?f3(t,e):e}const Jw=t=>t instanceof xs?{...t}:t;function dl(t,e){e=e||{};const n={};function r(l,c,d,f){return rt.isPlainObject(l)&&rt.isPlainObject(c)?rt.merge.call({caseless:f},l,c):rt.isPlainObject(c)?rt.merge({},c):rt.isArray(c)?c.slice():c}function s(l,c,d,f){if(rt.isUndefined(c)){if(!rt.isUndefined(l))return r(void 0,l,d,f)}else return r(l,c,d,f)}function i(l,c){if(!rt.isUndefined(c))return r(void 0,c)}function o(l,c){if(rt.isUndefined(c)){if(!rt.isUndefined(l))return r(void 0,l)}else return r(void 0,c)}function a(l,c,d){if(d in e)return r(l,c);if(d in t)return r(void 0,l)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,c,d)=>s(Jw(l),Jw(c),d,!0)};return rt.forEach(Object.keys(Object.assign({},t,e)),function(c){const d=u[c]||s,f=d(t[c],e[c],c);rt.isUndefined(f)&&d!==a||(n[c]=f)}),n}const k2=t=>{const e=dl({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=xs.from(o),e.url=S2(C2(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let u;if(rt.isFormData(n)){if(Qr.hasStandardBrowserEnv||Qr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[l,...c]=u?u.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...c].join("; "))}}if(Qr.hasStandardBrowserEnv&&(r&&rt.isFunction(r)&&(r=r(e)),r||r!==!1&&u3(e.url))){const l=s&&i&&c3.read(i);l&&o.set(s,l)}return e},h3=typeof XMLHttpRequest<"u",p3=h3&&function(t){return new Promise(function(n,r){const s=k2(t);let i=s.data;const o=xs.from(s.headers).normalize();let{responseType:a,onUploadProgress:u,onDownloadProgress:l}=s,c,d,f,h,p;function g(){h&&h(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(c),s.signal&&s.signal.removeEventListener("abort",c)}let v=new XMLHttpRequest;v.open(s.method.toUpperCase(),s.url,!0),v.timeout=s.timeout;function y(){if(!v)return;const b=xs.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),E={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:b,config:t,request:v};T2(function(k){n(k),g()},function(k){r(k),g()},E),v=null}"onloadend"in v?v.onloadend=y:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(y)},v.onabort=function(){v&&(r(new yn("Request aborted",yn.ECONNABORTED,t,v)),v=null)},v.onerror=function(){r(new yn("Network Error",yn.ERR_NETWORK,t,v)),v=null},v.ontimeout=function(){let S=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const E=s.transitional||w2;s.timeoutErrorMessage&&(S=s.timeoutErrorMessage),r(new yn(S,E.clarifyTimeoutError?yn.ETIMEDOUT:yn.ECONNABORTED,t,v)),v=null},i===void 0&&o.setContentType(null),"setRequestHeader"in v&&rt.forEach(o.toJSON(),function(S,E){v.setRequestHeader(E,S)}),rt.isUndefined(s.withCredentials)||(v.withCredentials=!!s.withCredentials),a&&a!=="json"&&(v.responseType=s.responseType),l&&([f,p]=dp(l,!0),v.addEventListener("progress",f)),u&&v.upload&&([d,h]=dp(u),v.upload.addEventListener("progress",d),v.upload.addEventListener("loadend",h)),(s.cancelToken||s.signal)&&(c=b=>{v&&(r(!b||b.type?new Hu(null,t,v):b),v.abort(),v=null)},s.cancelToken&&s.cancelToken.subscribe(c),s.signal&&(s.signal.aborted?c():s.signal.addEventListener("abort",c)));const w=o3(s.url);if(w&&Qr.protocols.indexOf(w)===-1){r(new yn("Unsupported protocol "+w+":",yn.ERR_BAD_REQUEST,t));return}v.send(i||null)})},m3=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(l){if(!s){s=!0,a();const c=l instanceof Error?l:this.reason;r.abort(c instanceof yn?c:new Hu(c instanceof Error?c.message:c))}};let o=e&&setTimeout(()=>{o=null,i(new yn(`timeout ${e} of ms exceeded`,yn.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(l=>{l.unsubscribe?l.unsubscribe(i):l.removeEventListener("abort",i)}),t=null)};t.forEach(l=>l.addEventListener("abort",i));const{signal:u}=r;return u.unsubscribe=()=>rt.asap(a),u}},g3=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},v3=async function*(t,e){for await(const n of y3(t))yield*g3(n,e)},y3=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},eE=(t,e,n,r)=>{const s=v3(t,e);let i=0,o,a=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:l,value:c}=await s.next();if(l){a(),u.close();return}let d=c.byteLength;if(n){let f=i+=d;n(f)}u.enqueue(new Uint8Array(c))}catch(l){throw a(l),l}},cancel(u){return a(u),s.return()}},{highWaterMark:2})},xm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",_2=xm&&typeof ReadableStream=="function",b3=xm&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),A2=(t,...e)=>{try{return!!t(...e)}catch{return!1}},S3=_2&&A2(()=>{let t=!1;const e=new Request(Qr.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),tE=64*1024,o0=_2&&A2(()=>rt.isReadableStream(new Response("").body)),fp={stream:o0&&(t=>t.body)};xm&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!fp[e]&&(fp[e]=rt.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new yn(`Response type '${e}' is not supported`,yn.ERR_NOT_SUPPORT,r)})})})(new Response);const w3=async t=>{if(t==null)return 0;if(rt.isBlob(t))return t.size;if(rt.isSpecCompliantForm(t))return(await new Request(Qr.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(rt.isArrayBufferView(t)||rt.isArrayBuffer(t))return t.byteLength;if(rt.isURLSearchParams(t)&&(t=t+""),rt.isString(t))return(await b3(t)).byteLength},E3=async(t,e)=>{const n=rt.toFiniteNumber(t.getContentLength());return n??w3(e)},x3=xm&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:u,responseType:l,headers:c,withCredentials:d="same-origin",fetchOptions:f}=k2(t);l=l?(l+"").toLowerCase():"text";let h=m3([s,i&&i.toAbortSignal()],o),p;const g=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let v;try{if(u&&S3&&n!=="get"&&n!=="head"&&(v=await E3(c,r))!==0){let E=new Request(e,{method:"POST",body:r,duplex:"half"}),x;if(rt.isFormData(r)&&(x=E.headers.get("content-type"))&&c.setContentType(x),E.body){const[k,A]=Qw(v,dp(Zw(u)));r=eE(E.body,tE,k,A)}}rt.isString(d)||(d=d?"include":"omit");const y="credentials"in Request.prototype;p=new Request(e,{...f,signal:h,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:y?d:void 0});let w=await fetch(p);const b=o0&&(l==="stream"||l==="response");if(o0&&(a||b&&g)){const E={};["status","statusText","headers"].forEach(C=>{E[C]=w[C]});const x=rt.toFiniteNumber(w.headers.get("content-length")),[k,A]=a&&Qw(x,dp(Zw(a),!0))||[];w=new Response(eE(w.body,tE,k,()=>{A&&A(),g&&g()}),E)}l=l||"text";let S=await fp[rt.findKey(fp,l)||"text"](w,t);return!b&&g&&g(),await new Promise((E,x)=>{T2(E,x,{data:S,headers:xs.from(w.headers),status:w.status,statusText:w.statusText,config:t,request:p})})}catch(y){throw g&&g(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new yn("Network Error",yn.ERR_NETWORK,t,p),{cause:y.cause||y}):yn.from(y,y&&y.code,t,p)}}),a0={http:FF,xhr:p3,fetch:x3};rt.forEach(a0,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const nE=t=>`- ${t}`,T3=t=>rt.isFunction(t)||t===null||t===!1,I2={getAdapter:t=>{t=rt.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!T3(n)&&(r=a0[(o=String(n)).toLowerCase()],r===void 0))throw new yn(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(nE).join(`
`):" "+nE(i[0]):"as no adapter specified";throw new yn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:a0};function jg(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Hu(null,t)}function rE(t){return jg(t),t.headers=xs.from(t.headers),t.data=Hg.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),I2.getAdapter(t.adapter||Kd.adapter)(t).then(function(r){return jg(t),r.data=Hg.call(t,t.transformResponse,r),r.headers=xs.from(r.headers),r},function(r){return x2(r)||(jg(t),r&&r.response&&(r.response.data=Hg.call(t,t.transformResponse,r.response),r.response.headers=xs.from(r.response.headers))),Promise.reject(r)})}const R2="1.9.0",Tm={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Tm[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const sE={};Tm.transitional=function(e,n,r){function s(i,o){return"[Axios v"+R2+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new yn(s(o," has been removed"+(n?" in "+n:"")),yn.ERR_DEPRECATED);return n&&!sE[o]&&(sE[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};Tm.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function C3(t,e,n){if(typeof t!="object")throw new yn("options must be an object",yn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],u=a===void 0||o(a,i,t);if(u!==!0)throw new yn("option "+i+" must be "+u,yn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new yn("Unknown option "+i,yn.ERR_BAD_OPTION)}}const yh={assertOptions:C3,validators:Tm},Mi=yh.validators;let nl=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Yw,response:new Yw}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=dl(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&yh.assertOptions(r,{silentJSONParsing:Mi.transitional(Mi.boolean),forcedJSONParsing:Mi.transitional(Mi.boolean),clarifyTimeoutError:Mi.transitional(Mi.boolean)},!1),s!=null&&(rt.isFunction(s)?n.paramsSerializer={serialize:s}:yh.assertOptions(s,{encode:Mi.function,serialize:Mi.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),yh.assertOptions(n,{baseUrl:Mi.spelling("baseURL"),withXsrfToken:Mi.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&rt.merge(i.common,i[n.method]);i&&rt.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),n.headers=xs.concat(o,i);const a=[];let u=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(u=u&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const l=[];this.interceptors.response.forEach(function(g){l.push(g.fulfilled,g.rejected)});let c,d=0,f;if(!u){const p=[rE.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,l),f=p.length,c=Promise.resolve(n);d<f;)c=c.then(p[d++],p[d++]);return c}f=a.length;let h=n;for(d=0;d<f;){const p=a[d++],g=a[d++];try{h=p(h)}catch(v){g.call(this,v);break}}try{c=rE.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,f=l.length;d<f;)c=c.then(l[d++],l[d++]);return c}getUri(e){e=dl(this.defaults,e);const n=C2(e.baseURL,e.url,e.allowAbsoluteUrls);return S2(n,e.params,e.paramsSerializer)}};rt.forEach(["delete","get","head","options"],function(e){nl.prototype[e]=function(n,r){return this.request(dl(r||{},{method:e,url:n,data:(r||{}).data}))}});rt.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(dl(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}nl.prototype[e]=n(),nl.prototype[e+"Form"]=n(!0)});let k3=class L2{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Hu(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new L2(function(s){e=s}),cancel:e}}};function _3(t){return function(n){return t.apply(null,n)}}function A3(t){return rt.isObject(t)&&t.isAxiosError===!0}const l0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(l0).forEach(([t,e])=>{l0[e]=t});function P2(t){const e=new nl(t),n=l2(nl.prototype.request,e);return rt.extend(n,nl.prototype,e,{allOwnKeys:!0}),rt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return P2(dl(t,s))},n}const mr=P2(Kd);mr.Axios=nl;mr.CanceledError=Hu;mr.CancelToken=k3;mr.isCancel=x2;mr.VERSION=R2;mr.toFormData=Em;mr.AxiosError=yn;mr.Cancel=mr.CanceledError;mr.all=function(e){return Promise.all(e)};mr.spread=_3;mr.isAxiosError=A3;mr.mergeConfig=dl;mr.AxiosHeaders=xs;mr.formToJSON=t=>E2(rt.isHTMLForm(t)?new FormData(t):t);mr.getAdapter=I2.getAdapter;mr.HttpStatusCode=l0;mr.default=mr;const{Axios:mme,AxiosError:gme,CanceledError:vme,isCancel:yme,CancelToken:bme,VERSION:Sme,all:wme,Cancel:Eme,isAxiosError:xme,spread:Tme,toFormData:Cme,AxiosHeaders:kme,HttpStatusCode:_me,formToJSON:Ame,getAdapter:Ime,mergeConfig:Rme}=mr,Ra=mr.create({baseURL:"",timeout:15e3});Ra.interceptors.request.use(t=>t);Ra.interceptors.response.use(t=>t.data,t=>Promise.reject(t));const ab="https://anime-danmu.onrender.com";async function I3(t){return await Ra({url:`${ab}/api/anime/upsert`,method:"post",headers:{"Content-Type":"application/json"},data:t})}async function D2(t){return await Ra({url:`${ab}/api/anime/search`,method:"post",headers:{"Content-Type":"application/json"},data:t})}async function R3(t){return await Ra({url:`${ab}/api/anime/page`,method:"post",headers:{"Content-Type":"application/json"},data:t})}const L3={class:"container"},P3={class:"input-row"},D3={__name:"Detail",setup(t){const e=fn({episode:"8",title:"",video_url:"https://artplayer.org/assets/sample/video.mp4"}),n=H(""),r=H([]),s=H(8),i=H([]),o=H({}),a=H({}),u=async()=>{if(e.title)try{const h={name:e.title},p=await D2(h);if(p.code===0){const g=p.data;e.anime_id=g.vod_id,a.value=g.vod_play_url||{},r.value=Object.keys(a.value),r.value.length>0?(n.value=r.value[0],o.value={},r.value.forEach(v=>{o.value[v]=Object.keys(a.value[v]||{})}),console.log("siteEpisodeMap:",o.value),c(n.value)):(i.value=[],s.value="",e.video_url="")}}catch(h){console.error(":",h)}},l=h=>{c(h)},c=h=>{i.value=o.value[h]||[],i.value.length>0?s.value=i.value[0]:s.value=""};Ie([n,s],([h,p])=>{h&&p&&o.value[h]?(console.log("playUrls:",a),e.video_url=a.value[h][p]||""):e.video_url=""});function d(h,p,g,v){const y=new URLSearchParams;return h&&y.append("anime_id",h),p&&y.append("episode",p),g&&y.append("title",g),v&&y.append("url",v),y.toString()}function f(){const h=e.anime_id,p=s.value,g=e.title,v=e.video_url,y=d(h,p,g,v),w=document.getElementById("video_player");w&&(w.src=`./play?${y}`)}return Ft(()=>{console.log("onMounted"),f()}),(h,p)=>{const g=Mt("el-input"),v=Mt("el-button"),y=Mt("el-option"),w=Mt("el-select");return $(),Y("div",L3,[p[10]||(p[10]=J("h1",{style:{display:"flex","justify-content":"center","align-items":"center"}},"",-1)),J("div",P3,[p[6]||(p[6]=J("span",{style:{"margin-right":"4px"}},"",-1)),ie(g,{modelValue:e.title,"onUpdate:modelValue":p[0]||(p[0]=b=>e.title=b),placeholder:"",style:{width:"160px","margin-right":"8px"}},null,8,["modelValue"]),ie(v,{type:"primary",onClick:u},{default:le(()=>p[4]||(p[4]=[Qt("")])),_:1,__:[4]}),p[7]||(p[7]=J("span",{style:{margin:"0 4px 0 16px"}},"",-1)),ie(w,{modelValue:n.value,"onUpdate:modelValue":p[1]||(p[1]=b=>n.value=b),placeholder:"",style:{width:"160px","margin-right":"8px"},onChange:l,disabled:!r.value.length},{default:le(()=>[($(!0),Y(dt,null,Zt(r.value,b=>($(),ye(y,{key:b,label:b,value:b},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"]),p[8]||(p[8]=J("span",{style:{"margin-right":"4px"}},"",-1)),ie(w,{modelValue:s.value,"onUpdate:modelValue":p[2]||(p[2]=b=>s.value=b),placeholder:"",style:{width:"100px","margin-right":"8px"},disabled:!i.value.length},{default:le(()=>[($(!0),Y(dt,null,Zt(i.value,b=>($(),ye(y,{key:b,label:b,value:b},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"]),p[9]||(p[9]=J("span",{style:{"margin-right":"4px"}},"URL",-1)),ie(g,{modelValue:e.video_url,"onUpdate:modelValue":p[3]||(p[3]=b=>e.video_url=b),placeholder:"URL",style:{flex:"1","margin-right":"8px"}},null,8,["modelValue"]),ie(v,{type:"primary",onClick:f,disabled:!e.video_url},{default:le(()=>p[5]||(p[5]=[Qt("")])),_:1,__:[5]},8,["disabled"])]),p[11]||(p[11]=J("div",{class:"video-container",style:{width:"64vw",height:"36vw",margin:"0 auto"}},[J("iframe",{id:"video_player",src:"./play",allowfullscreen:"",style:{width:"100%",height:"100%",border:"none"}})],-1))])}}},O3=mm(D3,[["__scopeId","data-v-d38771ba"]]);var Co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ui(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function hp(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xc={exports:{}};xc.exports;var iE;function $3(){return iE||(iE=1,function(t,e){/*!
 * artplayer.js v5.2.3
 * Github: https://github.com/zhw2590582/ArtPlayer
 * (c) 2017-2025 Harvey Zack
 * Released under the MIT License.
 */(function(n,r,s,i,o,a,u,l){var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof Co<"u"?Co:{},d=typeof c[i]=="function"&&c[i],f=d.i||{},h=d.cache||{},p=typeof hp=="function"&&hp.bind(t);function g(w,b){if(!h[w]){if(!n[w]){if(o[w])return o[w];var S=typeof c[i]=="function"&&c[i];if(!b&&S)return S(w,!0);if(d)return d(w,!0);if(p&&typeof w=="string")return p(w);var E=Error("Cannot find module '"+w+"'");throw E.code="MODULE_NOT_FOUND",E}k.resolve=function(A){var C=n[w][1][A];return C??A},k.cache={};var x=h[w]=new g.Module(w);n[w][0].call(x.exports,k,x,x.exports,c)}return h[w].exports;function k(A){var C=k.resolve(A);return C===!1?{}:g(C)}}g.isParcelRequire=!0,g.Module=function(w){this.id=w,this.bundle=g,this.require=p,this.exports={}},g.modules=n,g.cache=h,g.parent=d,g.distDir=void 0,g.publicUrl=void 0,g.devServer=void 0,g.i=f,g.register=function(w,b){n[w]=[function(S,E){E.exports=b},{}]},Object.defineProperty(g,"root",{get:function(){return c[i]}}),c[i]=g;for(var v=0;v<r.length;v++)g(r[v]);{var y=g(s);t.exports=y}})({"5lTcX":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s);var a=n("bundle-text:./style/index.less"),u=o.interopDefault(a),l=n("option-validator"),c=o.interopDefault(l),d=n("./utils/emitter"),f=o.interopDefault(d),h=n("./utils"),p=n("./scheme"),g=o.interopDefault(p),v=n("./config"),y=o.interopDefault(v),w=n("./template"),b=o.interopDefault(w),S=n("./i18n"),E=o.interopDefault(S),x=n("./player"),k=o.interopDefault(x),A=n("./control"),C=o.interopDefault(A),_=n("./contextmenu"),O=o.interopDefault(_),P=n("./info"),U=o.interopDefault(P),j=n("./subtitle"),N=o.interopDefault(j),R=n("./events"),V=o.interopDefault(R),D=n("./hotkey"),M=o.interopDefault(D),K=n("./layer"),q=o.interopDefault(K),ee=n("./loading"),X=o.interopDefault(ee),te=n("./notice"),ue=o.interopDefault(te),he=n("./mask"),Z=o.interopDefault(he),ce=n("./icons"),ae=o.interopDefault(ce),Te=n("./setting"),Ce=o.interopDefault(Te),z=n("./storage"),re=o.interopDefault(z),ve=n("./plugins"),ke=o.interopDefault(ve);let Ee=0,be=[];class Se extends f.default{constructor(Ne,Me){super(),this.id=++Ee;let st=h.mergeDeep(Se.option,Ne);if(st.container=Ne.container,this.option=(0,c.default)(st,g.default),this.isLock=!1,this.isReady=!1,this.isFocus=!1,this.isInput=!1,this.isRotate=!1,this.isDestroy=!1,this.template=new b.default(this),this.events=new V.default(this),this.storage=new re.default(this),this.icons=new ae.default(this),this.i18n=new E.default(this),this.notice=new ue.default(this),this.player=new k.default(this),this.layers=new q.default(this),this.controls=new C.default(this),this.contextmenu=new O.default(this),this.subtitle=new N.default(this),this.info=new U.default(this),this.loading=new X.default(this),this.hotkey=new M.default(this),this.mask=new Z.default(this),this.setting=new Ce.default(this),this.plugins=new ke.default(this),typeof Me=="function"&&this.on("ready",()=>Me.call(this,this)),Se.DEBUG){let qe=Ae=>console.log(`[ART.${this.id}] -> ${Ae}`);qe("Version@"+Se.version),qe("Env@"+Se.env),qe("Build@"+Se.build);for(let Ae=0;Ae<y.default.events.length;Ae++)this.on("video:"+y.default.events[Ae],et=>qe("Event@"+et.type))}be.push(this)}static get instances(){return be}static get version(){return"5.2.3"}static get env(){return"production"}static get build(){return"2025-04-20 10:10:54"}static get config(){return y.default}static get utils(){return h}static get scheme(){return g.default}static get Emitter(){return f.default}static get validator(){return c.default}static get kindOf(){return c.default.kindOf}static get html(){return b.default.html}static get option(){return{id:"",container:"#artplayer",url:"",poster:"",type:"",theme:"#f00",volume:.7,isLive:!1,muted:!1,autoplay:!1,autoSize:!1,autoMini:!1,loop:!1,flip:!1,playbackRate:!1,aspectRatio:!1,screenshot:!1,setting:!1,hotkey:!0,pip:!1,mutex:!0,backdrop:!0,fullscreen:!1,fullscreenWeb:!1,subtitleOffset:!1,miniProgressBar:!1,useSSR:!1,playsInline:!0,lock:!1,gesture:!0,fastForward:!1,autoPlayback:!1,autoOrientation:!1,airplay:!1,proxy:void 0,layers:[],contextmenu:[],controls:[],settings:[],quality:[],highlight:[],plugins:[],thumbnails:{url:"",number:60,column:10,width:0,height:0,scale:1},subtitle:{url:"",type:"",style:{},name:"",escape:!0,encoding:"utf-8",onVttLoad:Ne=>Ne},moreVideoAttr:{controls:!1,preload:h.isSafari?"auto":"metadata"},i18n:{},icons:{},cssVar:{},customType:{},lang:navigator==null?void 0:navigator.language.toLowerCase()}}get proxy(){return this.events.proxy}get query(){return this.template.query}get video(){return this.template.$video}destroy(Ne=!0){this.events.destroy(),this.template.destroy(Ne),be.splice(be.indexOf(this),1),this.isDestroy=!0,this.emit("destroy")}}s.default=Se,Se.STYLE=u.default,Se.DEBUG=!1,Se.CONTEXTMENU=!0,Se.NOTICE_TIME=2e3,Se.SETTING_WIDTH=250,Se.SETTING_ITEM_WIDTH=200,Se.SETTING_ITEM_HEIGHT=35,Se.RESIZE_TIME=200,Se.SCROLL_TIME=200,Se.SCROLL_GAP=50,Se.AUTO_PLAYBACK_MAX=10,Se.AUTO_PLAYBACK_MIN=5,Se.AUTO_PLAYBACK_TIMEOUT=3e3,Se.RECONNECT_TIME_MAX=5,Se.RECONNECT_SLEEP_TIME=1e3,Se.CONTROL_HIDE_TIME=3e3,Se.DBCLICK_TIME=300,Se.DBCLICK_FULLSCREEN=!0,Se.MOBILE_DBCLICK_PLAY=!0,Se.MOBILE_CLICK_PLAY=!1,Se.AUTO_ORIENTATION_TIME=200,Se.INFO_LOOP_TIME=1e3,Se.FAST_FORWARD_VALUE=3,Se.FAST_FORWARD_TIME=1e3,Se.TOUCH_MOVE_RATIO=.5,Se.VOLUME_STEP=.1,Se.SEEK_STEP=5,Se.PLAYBACK_RATE=[.5,.75,1,1.25,1.5,2],Se.ASPECT_RATIO=["default","4:3","16:9"],Se.FLIP=["normal","horizontal","vertical"],Se.FULLSCREEN_WEB_IN_BODY=!1,Se.LOG_VERSION=!0,Se.USE_RAF=!1,h.isBrowser&&(window.Artplayer=Se,h.setStyleText("artplayer-style",u.default),setTimeout(()=>{Se.LOG_VERSION&&console.log(`%c ArtPlayer %c ${Se.version} %c https://artplayer.org`,"color: #fff; background: #5f5f5f","color: #fff; background: #4bc729","")},100))},{"bundle-text:./style/index.less":"0016T","option-validator":"bAWi2","./utils/emitter":"66mFZ","./utils":"71aH7","./scheme":"AKEiO","./config":"lyjeQ","./template":"X13Zf","./i18n":"3jKkj","./player":"a90nx","./control":"8Z0Uf","./contextmenu":"2KYsr","./info":"02ajl","./subtitle":"eSWto","./events":"jo4S1","./hotkey":"6NoFy","./layer":"6G6hZ","./loading":"3dsEe","./notice":"dWGTw","./mask":"5POkG","./icons":"6OeNg","./setting":"3eYNH","./storage":"2aaJe","./plugins":"8MTUM","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"0016T":[function(n,r,s,i){r.exports='.art-video-player{--art-theme:red;--art-font-color:#fff;--art-background-color:#000;--art-text-shadow-color:#00000080;--art-transition-duration:.2s;--art-padding:10px;--art-border-radius:3px;--art-progress-height:6px;--art-progress-color:#ffffff40;--art-hover-color:#ffffff40;--art-loaded-color:#ffffff40;--art-state-size:80px;--art-state-opacity:.8;--art-bottom-height:100px;--art-bottom-offset:20px;--art-bottom-gap:5px;--art-highlight-width:8px;--art-highlight-color:#ffffff80;--art-control-height:46px;--art-control-opacity:.75;--art-control-icon-size:36px;--art-control-icon-scale:1.1;--art-volume-height:120px;--art-volume-handle-size:14px;--art-lock-size:36px;--art-indicator-scale:0;--art-indicator-size:16px;--art-fullscreen-web-index:9999;--art-settings-icon-size:24px;--art-settings-max-height:300px;--art-selector-max-height:300px;--art-contextmenus-min-width:250px;--art-subtitle-font-size:20px;--art-subtitle-gap:5px;--art-subtitle-bottom:15px;--art-subtitle-border:#000;--art-widget-background:#000000d9;--art-tip-background:#000000b3;--art-scrollbar-size:4px;--art-scrollbar-background:#ffffff40;--art-scrollbar-background-hover:#ffffff80;--art-mini-progress-height:2px}.art-bg-cover{background-position:50%;background-repeat:no-repeat;background-size:cover}.art-bottom-gradient{background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x}.art-backdrop-filter{backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.art-video-player{zoom:1;text-align:left;user-select:none;box-sizing:border-box;width:100%;height:100%;color:var(--art-font-color);background-color:var(--art-background-color);text-shadow:0 0 2px var(--art-text-shadow-color);-webkit-tap-highlight-color:#0000;-ms-touch-action:manipulation;touch-action:manipulation;-ms-high-contrast-adjust:none;direction:ltr;outline:0;margin:0 auto;padding:0;font-family:PingFang SC,Helvetica Neue,Microsoft YaHei,Roboto,Arial,sans-serif;font-size:14px;line-height:1.3;position:relative}.art-video-player *,.art-video-player :before,.art-video-player :after{box-sizing:border-box}.art-video-player ::-webkit-scrollbar{width:var(--art-scrollbar-size);height:var(--art-scrollbar-size)}.art-video-player ::-webkit-scrollbar-thumb{background-color:var(--art-scrollbar-background)}.art-video-player ::-webkit-scrollbar-thumb:hover{background-color:var(--art-scrollbar-background-hover)}.art-video-player img{vertical-align:top;max-width:100%}.art-video-player svg{fill:var(--art-font-color)}.art-video-player a{color:var(--art-font-color);text-decoration:none}.art-icon{justify-content:center;align-items:center;line-height:1;display:flex}.art-video-player.art-backdrop .art-contextmenus,.art-video-player.art-backdrop .art-info,.art-video-player.art-backdrop .art-settings,.art-video-player.art-backdrop .art-layer-auto-playback,.art-video-player.art-backdrop .art-selector-list,.art-video-player.art-backdrop .art-volume-inner{backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-video{z-index:10;cursor:pointer;width:100%;height:100%;position:absolute;inset:0}.art-poster{z-index:11;pointer-events:none;background-position:50%;background-repeat:no-repeat;background-size:cover;width:100%;height:100%;position:absolute;inset:0}.art-video-player .art-subtitle{z-index:20;text-align:center;pointer-events:none;justify-content:center;align-items:center;gap:var(--art-subtitle-gap);width:100%;bottom:var(--art-subtitle-bottom);font-size:var(--art-subtitle-font-size);transition:bottom var(--art-transition-duration)ease;text-shadow:var(--art-subtitle-border)1px 0 1px,var(--art-subtitle-border)0 1px 1px,var(--art-subtitle-border)-1px 0 1px,var(--art-subtitle-border)0 -1px 1px,var(--art-subtitle-border)1px 1px 1px,var(--art-subtitle-border)-1px -1px 1px,var(--art-subtitle-border)1px -1px 1px,var(--art-subtitle-border)-1px 1px 1px;flex-direction:column;padding:0 5%;display:none;position:absolute}.art-video-player.art-subtitle-show .art-subtitle{display:flex}.art-video-player.art-control-show .art-subtitle{bottom:calc(var(--art-control-height) + var(--art-subtitle-bottom))}.art-danmuku{z-index:30;pointer-events:none;width:100%;height:100%;position:absolute;inset:0;overflow:hidden}.art-video-player .art-layers{z-index:40;pointer-events:none;width:100%;height:100%;display:none;position:absolute;inset:0}.art-video-player .art-layers .art-layer{pointer-events:auto}.art-video-player.art-layer-show .art-layers{display:flex}.art-video-player .art-mask{z-index:50;pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;inset:0}.art-video-player .art-mask .art-state{opacity:0;width:var(--art-state-size);height:var(--art-state-size);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;display:flex;transform:scale(2)}.art-video-player.art-mask-show .art-state{cursor:pointer;pointer-events:auto;opacity:var(--art-state-opacity);transform:scale(1)}.art-video-player.art-loading-show .art-state{display:none}.art-video-player .art-loading{z-index:70;pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:none;position:absolute;inset:0}.art-video-player.art-loading-show .art-loading{display:flex}.art-video-player .art-bottom{z-index:60;opacity:0;pointer-events:none;width:100%;height:100%;padding:0 var(--art-padding);transition:all var(--art-transition-duration)ease;background-size:100% var(--art-bottom-height);background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x;flex-direction:column;justify-content:flex-end;display:flex;position:absolute;inset:0;overflow:hidden}.art-video-player .art-bottom .art-controls,.art-video-player .art-bottom .art-progress{transform:translateY(var(--art-bottom-offset));transition:transform var(--art-transition-duration)ease}.art-video-player.art-control-show .art-bottom,.art-video-player.art-hover .art-bottom{opacity:1}.art-video-player.art-control-show .art-bottom .art-controls,.art-video-player.art-hover .art-bottom .art-controls,.art-video-player.art-control-show .art-bottom .art-progress,.art-video-player.art-hover .art-bottom .art-progress{transform:translateY(0)}.art-bottom .art-progress{z-index:0;pointer-events:auto;padding-bottom:var(--art-bottom-gap);position:relative}.art-bottom .art-progress .art-control-progress{cursor:pointer;height:var(--art-progress-height);justify-content:center;align-items:center;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner{width:100%;height:50%;transition:height var(--art-transition-duration)ease;background-color:var(--art-progress-color);align-items:center;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-hover{z-index:0;background-color:var(--art-hover-color);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-loaded{z-index:10;background-color:var(--art-loaded-color);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-played{z-index:20;background-color:var(--art-theme);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight{z-index:30;pointer-events:none;width:100%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight span{z-index:0;pointer-events:auto;width:100%;height:100%;transform:translateX(calc(var(--art-highlight-width)/-2));background-color:var(--art-highlight-color);position:absolute;inset:0 auto 0 0;width:var(--art-highlight-width)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{z-index:40;width:var(--art-indicator-size);height:var(--art-indicator-size);transform:scale(var(--art-indicator-scale));margin-left:calc(var(--art-indicator-size)/-2);transition:transform var(--art-transition-duration)ease;border-radius:50%;justify-content:center;align-items:center;display:flex;position:absolute;left:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator .art-icon{pointer-events:none;width:100%;height:100%}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:hover{transform:scale(1.2)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:active{transform:scale(1)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-tip{z-index:50;border-radius:var(--art-border-radius);white-space:nowrap;background-color:var(--art-tip-background);padding:3px 5px;font-size:12px;line-height:1;display:none;position:absolute;top:-25px;left:0}.art-bottom .art-progress .art-control-progress:hover .art-control-progress-inner{height:100%}.art-bottom .art-progress .art-control-thumbnails{bottom:calc(var(--art-bottom-gap) + 10px);border-radius:var(--art-border-radius);pointer-events:none;background-color:var(--art-widget-background);display:none;position:absolute;left:0;box-shadow:0 1px 3px #0003,0 1px 2px -1px #0003}.art-bottom:hover .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{transform:scale(1)}.art-controls{z-index:10;pointer-events:auto;height:var(--art-control-height);justify-content:space-between;align-items:center;display:flex;position:relative}.art-controls .art-controls-left,.art-controls .art-controls-right{height:100%;display:flex}.art-controls .art-controls-center{flex:1;justify-content:center;align-items:center;height:100%;padding:0 10px;display:none}.art-controls .art-controls-right{justify-content:flex-end}.art-controls .art-control{cursor:pointer;white-space:nowrap;opacity:var(--art-control-opacity);min-height:var(--art-control-height);min-width:var(--art-control-height);transition:opacity var(--art-transition-duration)ease;flex-shrink:0;justify-content:center;align-items:center;display:flex}.art-controls .art-control .art-icon{height:var(--art-control-icon-size);width:var(--art-control-icon-size);transform:scale(var(--art-control-icon-scale));transition:transform var(--art-transition-duration)ease}.art-controls .art-control .art-icon:active{transform:scale(calc(var(--art-control-icon-scale)*.8))}.art-controls .art-control:hover{opacity:1}.art-control-volume{position:relative}.art-control-volume .art-volume-panel{text-align:center;cursor:default;opacity:0;pointer-events:none;left:0;right:0;bottom:var(--art-control-height);width:var(--art-control-height);height:var(--art-volume-height);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;padding:0 5px;font-size:12px;display:flex;position:absolute;transform:translateY(10px)}.art-control-volume .art-volume-panel .art-volume-inner{border-radius:var(--art-border-radius);background-color:var(--art-widget-background);flex-direction:column;align-items:center;gap:10px;width:100%;height:100%;padding:10px 0 12px;display:flex}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider{cursor:pointer;flex:1;justify-content:center;width:100%;display:flex;position:relative}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle{border-radius:var(--art-border-radius);background-color:#ffffff40;justify-content:center;width:2px;display:flex;position:relative;overflow:hidden}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle .art-volume-loaded{z-index:0;background-color:var(--art-theme);width:100%;height:100%;position:absolute;inset:0}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-indicator{width:var(--art-volume-handle-size);height:var(--art-volume-handle-size);margin-top:calc(var(--art-volume-handle-size)/-2);background-color:var(--art-theme);transition:transform var(--art-transition-duration)ease;border-radius:100%;flex-shrink:0;position:absolute;transform:scale(1)}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider:active .art-volume-indicator{transform:scale(.9)}.art-control-volume:hover .art-volume-panel{opacity:1;pointer-events:auto;transform:translateY(0)}.art-video-player .art-notice{z-index:80;width:100%;height:auto;padding:var(--art-padding);pointer-events:none;display:none;position:absolute;inset:0 0 auto}.art-video-player .art-notice .art-notice-inner{border-radius:var(--art-border-radius);background-color:var(--art-tip-background);padding:5px;line-height:1;display:inline-flex}.art-video-player.art-notice-show .art-notice{display:flex}.art-video-player .art-contextmenus{z-index:120;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);min-width:var(--art-contextmenus-min-width);flex-direction:column;padding:5px 0;font-size:12px;display:none;position:absolute}.art-video-player .art-contextmenus .art-contextmenu{cursor:pointer;border-bottom:1px solid #ffffff1a;padding:10px 15px;display:flex}.art-video-player .art-contextmenus .art-contextmenu span{padding:0 8px}.art-video-player .art-contextmenus .art-contextmenu span:hover,.art-video-player .art-contextmenus .art-contextmenu span.art-current{color:var(--art-theme)}.art-video-player .art-contextmenus .art-contextmenu:hover{background-color:#ffffff1a}.art-video-player .art-contextmenus .art-contextmenu:last-child{border-bottom:none}.art-video-player.art-contextmenu-show .art-contextmenus{display:flex}.art-video-player .art-settings{z-index:90;border-radius:var(--art-border-radius);max-height:var(--art-settings-max-height);left:auto;right:var(--art-padding);bottom:var(--art-control-height);transition:all var(--art-transition-duration)ease;background-color:var(--art-widget-background);flex-direction:column;display:none;position:absolute;overflow:hidden auto}.art-video-player .art-settings .art-setting-panel{flex-direction:column;display:none}.art-video-player .art-settings .art-setting-panel.art-current{display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item{cursor:pointer;transition:background-color var(--art-transition-duration)ease;justify-content:space-between;align-items:center;padding:0 5px;display:flex;overflow:hidden}.art-video-player .art-settings .art-setting-panel .art-setting-item:hover{background-color:#ffffff1a}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current{color:var(--art-theme)}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-icon-check{visibility:hidden;height:15px}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current .art-icon-check{visibility:visible}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left{flex-shrink:0;justify-content:center;align-items:center;gap:5px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left .art-setting-item-left-icon{height:var(--art-settings-icon-size);width:var(--art-settings-icon-size);justify-content:center;align-items:center;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right{justify-content:center;align-items:center;gap:5px;font-size:12px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-tooltip{white-space:nowrap;color:#ffffff80}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-icon{justify-content:center;align-items:center;min-width:32px;height:24px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-range{appearance:none;background-color:#fff3;outline:none;width:80px;height:3px}.art-video-player .art-settings .art-setting-panel .art-setting-item-back{border-bottom:1px solid #ffffff1a}.art-video-player.art-setting-show .art-settings{display:flex}.art-video-player .art-info{left:var(--art-padding);top:var(--art-padding);z-index:100;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);padding:10px;font-size:12px;display:none;position:absolute}.art-video-player .art-info .art-info-panel{flex-direction:column;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item{align-items:center;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item .art-info-title{text-align:right;width:100px}.art-video-player .art-info .art-info-panel .art-info-item .art-info-content{text-overflow:ellipsis;white-space:nowrap;user-select:all;width:250px;overflow:hidden}.art-video-player .art-info .art-info-close{cursor:pointer;position:absolute;top:5px;right:5px}.art-video-player.art-info-show .art-info{display:flex}.art-hide-cursor *{cursor:none!important}.art-video-player[data-aspect-ratio]{overflow:hidden}.art-video-player[data-aspect-ratio] .art-video{object-fit:fill;box-sizing:content-box}.art-fullscreen{--art-progress-height:8px;--art-indicator-size:20px;--art-control-height:60px;--art-control-icon-scale:1.3}.art-fullscreen-web{--art-progress-height:8px;--art-indicator-size:20px;--art-control-height:60px;--art-control-icon-scale:1.3;z-index:var(--art-fullscreen-web-index);width:100%;height:100%;position:fixed;inset:0}.art-mini-popup{z-index:9999;border-radius:var(--art-border-radius);cursor:move;user-select:none;background:#000;width:320px;height:180px;transition:opacity .2s;position:fixed;overflow:hidden;box-shadow:0 0 5px #00000080}.art-mini-popup svg{fill:#fff}.art-mini-popup .art-video{pointer-events:none}.art-mini-popup .art-mini-close{z-index:20;cursor:pointer;opacity:0;transition:opacity .2s;position:absolute;top:10px;right:10px}.art-mini-popup .art-mini-state{z-index:30;pointer-events:none;opacity:0;background-color:#00000040;justify-content:center;align-items:center;width:100%;height:100%;transition:opacity .2s;display:flex;position:absolute;inset:0}.art-mini-popup .art-mini-state .art-icon{opacity:.75;cursor:pointer;pointer-events:auto;transition:transform .2s;transform:scale(3)}.art-mini-popup .art-mini-state .art-icon:active{transform:scale(2.5)}.art-mini-popup.art-mini-droging{opacity:.9}.art-mini-popup:hover .art-mini-close,.art-mini-popup:hover .art-mini-state{opacity:1}.art-video-player[data-flip=horizontal] .art-video{transform:scaleX(-1)}.art-video-player[data-flip=vertical] .art-video{transform:scaleY(-1)}.art-video-player .art-layer-lock{height:var(--art-lock-size);width:var(--art-lock-size);top:50%;left:var(--art-padding);background-color:var(--art-tip-background);border-radius:50%;justify-content:center;align-items:center;display:none;position:absolute;transform:translateY(-50%)}.art-video-player .art-layer-auto-playback{border-radius:var(--art-border-radius);left:var(--art-padding);bottom:calc(var(--art-control-height) + var(--art-bottom-gap) + 10px);background-color:var(--art-widget-background);align-items:center;gap:10px;padding:10px;line-height:1;display:none;position:absolute}.art-video-player .art-layer-auto-playback .art-auto-playback-close{cursor:pointer;justify-content:center;align-items:center;display:flex}.art-video-player .art-layer-auto-playback .art-auto-playback-close svg{width:15px;height:15px;fill:var(--art-theme)}.art-video-player .art-layer-auto-playback .art-auto-playback-jump{color:var(--art-theme);cursor:pointer}.art-video-player.art-lock .art-subtitle{bottom:var(--art-subtitle-bottom)!important}.art-video-player.art-mini-progress-bar .art-bottom,.art-video-player.art-lock .art-bottom{opacity:1;background-image:none;padding:0}.art-video-player.art-mini-progress-bar .art-bottom .art-controls,.art-video-player.art-lock .art-bottom .art-controls,.art-video-player.art-mini-progress-bar .art-bottom .art-progress,.art-video-player.art-lock .art-bottom .art-progress{transform:translateY(calc(var(--art-control-height) + var(--art-bottom-gap) + var(--art-progress-height)/4))}.art-video-player.art-mini-progress-bar .art-bottom .art-progress-indicator,.art-video-player.art-lock .art-bottom .art-progress-indicator{display:none!important}.art-video-player.art-control-show .art-layer-lock{display:flex}.art-control-selector{justify-content:center;display:flex;position:relative}.art-control-selector .art-selector-list{text-align:center;border-radius:var(--art-border-radius);opacity:0;pointer-events:none;bottom:var(--art-control-height);max-height:var(--art-selector-max-height);background-color:var(--art-widget-background);transition:all var(--art-transition-duration)ease;flex-direction:column;align-items:center;display:flex;position:absolute;overflow:hidden auto;transform:translateY(10px)}.art-control-selector .art-selector-list .art-selector-item{flex-shrink:0;justify-content:center;align-items:center;width:100%;padding:10px 15px;line-height:1;display:flex}.art-control-selector .art-selector-list .art-selector-item:hover{background-color:#ffffff1a}.art-control-selector .art-selector-list .art-selector-item:hover,.art-control-selector .art-selector-list .art-selector-item.art-current{color:var(--art-theme)}.art-control-selector:hover .art-selector-list{opacity:1;pointer-events:auto;transform:translateY(0)}[class*=hint--]{font-style:normal;display:inline-block;position:relative}[class*=hint--]:before,[class*=hint--]:after{visibility:hidden;opacity:0;z-index:1000000;pointer-events:none;transition:all .3s;position:absolute;transform:translate(0,0)}[class*=hint--]:hover:before,[class*=hint--]:hover:after{visibility:visible;opacity:1;transition-delay:.1s}[class*=hint--]:before{content:"";z-index:1000001;background:0 0;border:6px solid #0000;position:absolute}[class*=hint--]:after{color:#fff;white-space:nowrap;background:#000;padding:8px 10px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:12px}[class*=hint--][aria-label]:after{content:attr(aria-label)}[class*=hint--][data-hint]:after{content:attr(data-hint)}[aria-label=""]:before,[aria-label=""]:after,[data-hint=""]:before,[data-hint=""]:after{display:none!important}.hint--top-left:before,.hint--top-right:before,.hint--top:before{border-top-color:#000}.hint--bottom-left:before,.hint--bottom-right:before,.hint--bottom:before{border-bottom-color:#000}.hint--left:before{border-left-color:#000}.hint--right:before{border-right-color:#000}.hint--top:before{margin-bottom:-11px}.hint--top:before,.hint--top:after{bottom:100%;left:50%}.hint--top:before{left:calc(50% - 6px)}.hint--top:after{transform:translate(-50%)}.hint--top:hover:before{transform:translateY(-8px)}.hint--top:hover:after{transform:translate(-50%)translateY(-8px)}.hint--bottom:before{margin-top:-11px}.hint--bottom:before,.hint--bottom:after{top:100%;left:50%}.hint--bottom:before{left:calc(50% - 6px)}.hint--bottom:after{transform:translate(-50%)}.hint--bottom:hover:before{transform:translateY(8px)}.hint--bottom:hover:after{transform:translate(-50%)translateY(8px)}.hint--right:before{margin-bottom:-6px;margin-left:-11px}.hint--right:after{margin-bottom:-14px}.hint--right:before,.hint--right:after{bottom:50%;left:100%}.hint--right:hover:before,.hint--right:hover:after{transform:translate(8px)}.hint--left:before{margin-bottom:-6px;margin-right:-11px}.hint--left:after{margin-bottom:-14px}.hint--left:before,.hint--left:after{bottom:50%;right:100%}.hint--left:hover:before,.hint--left:hover:after{transform:translate(-8px)}.hint--top-left:before{margin-bottom:-11px}.hint--top-left:before,.hint--top-left:after{bottom:100%;left:50%}.hint--top-left:before{left:calc(50% - 6px)}.hint--top-left:after{margin-left:12px;transform:translate(-100%)}.hint--top-left:hover:before{transform:translateY(-8px)}.hint--top-left:hover:after{transform:translate(-100%)translateY(-8px)}.hint--top-right:before{margin-bottom:-11px}.hint--top-right:before,.hint--top-right:after{bottom:100%;left:50%}.hint--top-right:before{left:calc(50% - 6px)}.hint--top-right:after{margin-left:-12px;transform:translate(0)}.hint--top-right:hover:before,.hint--top-right:hover:after{transform:translateY(-8px)}.hint--bottom-left:before{margin-top:-11px}.hint--bottom-left:before,.hint--bottom-left:after{top:100%;left:50%}.hint--bottom-left:before{left:calc(50% - 6px)}.hint--bottom-left:after{margin-left:12px;transform:translate(-100%)}.hint--bottom-left:hover:before{transform:translateY(8px)}.hint--bottom-left:hover:after{transform:translate(-100%)translateY(8px)}.hint--bottom-right:before{margin-top:-11px}.hint--bottom-right:before,.hint--bottom-right:after{top:100%;left:50%}.hint--bottom-right:before{left:calc(50% - 6px)}.hint--bottom-right:after{margin-left:-12px;transform:translate(0)}.hint--bottom-right:hover:before,.hint--bottom-right:hover:after{transform:translateY(8px)}.hint--small:after,.hint--medium:after,.hint--large:after{white-space:normal;word-wrap:break-word;line-height:1.4em}.hint--small:after{width:80px}.hint--medium:after{width:150px}.hint--large:after{width:300px}[class*=hint--]:after{text-shadow:0 -1px #000;box-shadow:4px 4px 8px #0000004d}.hint--error:after{text-shadow:0 -1px #592726;background-color:#b34e4d}.hint--error.hint--top-left:before,.hint--error.hint--top-right:before,.hint--error.hint--top:before{border-top-color:#b34e4d}.hint--error.hint--bottom-left:before,.hint--error.hint--bottom-right:before,.hint--error.hint--bottom:before{border-bottom-color:#b34e4d}.hint--error.hint--left:before{border-left-color:#b34e4d}.hint--error.hint--right:before{border-right-color:#b34e4d}.hint--warning:after{text-shadow:0 -1px #6c5328;background-color:#c09854}.hint--warning.hint--top-left:before,.hint--warning.hint--top-right:before,.hint--warning.hint--top:before{border-top-color:#c09854}.hint--warning.hint--bottom-left:before,.hint--warning.hint--bottom-right:before,.hint--warning.hint--bottom:before{border-bottom-color:#c09854}.hint--warning.hint--left:before{border-left-color:#c09854}.hint--warning.hint--right:before{border-right-color:#c09854}.hint--info:after{text-shadow:0 -1px #1a3c4d;background-color:#3986ac}.hint--info.hint--top-left:before,.hint--info.hint--top-right:before,.hint--info.hint--top:before{border-top-color:#3986ac}.hint--info.hint--bottom-left:before,.hint--info.hint--bottom-right:before,.hint--info.hint--bottom:before{border-bottom-color:#3986ac}.hint--info.hint--left:before{border-left-color:#3986ac}.hint--info.hint--right:before{border-right-color:#3986ac}.hint--success:after{text-shadow:0 -1px #1a321a;background-color:#458746}.hint--success.hint--top-left:before,.hint--success.hint--top-right:before,.hint--success.hint--top:before{border-top-color:#458746}.hint--success.hint--bottom-left:before,.hint--success.hint--bottom-right:before,.hint--success.hint--bottom:before{border-bottom-color:#458746}.hint--success.hint--left:before{border-left-color:#458746}.hint--success.hint--right:before{border-right-color:#458746}.hint--always:after,.hint--always:before{opacity:1;visibility:visible}.hint--always.hint--top:before{transform:translateY(-8px)}.hint--always.hint--top:after{transform:translate(-50%)translateY(-8px)}.hint--always.hint--top-left:before{transform:translateY(-8px)}.hint--always.hint--top-left:after{transform:translate(-100%)translateY(-8px)}.hint--always.hint--top-right:before,.hint--always.hint--top-right:after{transform:translateY(-8px)}.hint--always.hint--bottom:before{transform:translateY(8px)}.hint--always.hint--bottom:after{transform:translate(-50%)translateY(8px)}.hint--always.hint--bottom-left:before{transform:translateY(8px)}.hint--always.hint--bottom-left:after{transform:translate(-100%)translateY(8px)}.hint--always.hint--bottom-right:before,.hint--always.hint--bottom-right:after{transform:translateY(8px)}.hint--always.hint--left:before,.hint--always.hint--left:after{transform:translate(-8px)}.hint--always.hint--right:before,.hint--always.hint--right:after{transform:translate(8px)}.hint--rounded:after{border-radius:4px}.hint--no-animate:before,.hint--no-animate:after{transition-duration:0s}.hint--bounce:before,.hint--bounce:after{-webkit-transition:opacity .3s,visibility .3s,-webkit-transform .3s cubic-bezier(.71,1.7,.77,1.24);-moz-transition:opacity .3s,visibility .3s,-moz-transform .3s cubic-bezier(.71,1.7,.77,1.24);transition:opacity .3s,visibility .3s,transform .3s cubic-bezier(.71,1.7,.77,1.24)}.hint--no-shadow:before,.hint--no-shadow:after{text-shadow:initial;box-shadow:initial}.hint--no-arrow:before{display:none}.art-video-player.art-mobile{--art-bottom-gap:10px;--art-control-height:38px;--art-control-icon-scale:1;--art-state-size:60px;--art-settings-max-height:180px;--art-selector-max-height:180px;--art-indicator-scale:1;--art-control-opacity:1}.art-video-player.art-mobile .art-controls-left{margin-left:calc(var(--art-padding)/-1)}.art-video-player.art-mobile .art-controls-right{margin-right:calc(var(--art-padding)/-1)}'},{}],bAWi2:[function(n,r,s,i){r.exports=function(){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}var a=Object.prototype.toString,u=function(h){if(h===void 0)return"undefined";if(h===null)return"null";var p=o(h);if(p==="boolean")return"boolean";if(p==="string")return"string";if(p==="number")return"number";if(p==="symbol")return"symbol";if(p==="function")return l(h)==="GeneratorFunction"?"generatorfunction":"function";if(Array.isArray?Array.isArray(h):h instanceof Array)return"array";if(h.constructor&&typeof h.constructor.isBuffer=="function"&&h.constructor.isBuffer(h))return"buffer";if(function(g){try{if(typeof g.length=="number"&&typeof g.callee=="function")return!0}catch(v){if(v.message.indexOf("callee")!==-1)return!0}return!1}(h))return"arguments";if(h instanceof Date||typeof h.toDateString=="function"&&typeof h.getDate=="function"&&typeof h.setDate=="function")return"date";if(h instanceof Error||typeof h.message=="string"&&h.constructor&&typeof h.constructor.stackTraceLimit=="number")return"error";if(h instanceof RegExp||typeof h.flags=="string"&&typeof h.ignoreCase=="boolean"&&typeof h.multiline=="boolean"&&typeof h.global=="boolean")return"regexp";switch(l(h)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(typeof h.throw=="function"&&typeof h.return=="function"&&typeof h.next=="function")return"generator";switch(p=a.call(h)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return p.slice(8,-1).toLowerCase().replace(/\s/g,"")};function l(h){return h.constructor?h.constructor.name:null}function c(h,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:["option"];return d(h,p,g),f(h,p,g),function(v,y,w){var b=u(y),S=u(v);if(b==="object"){if(S!=="object")throw Error("[Type Error]: '".concat(w.join("."),"' require 'object' type, but got '").concat(S,"'"));Object.keys(y).forEach(function(E){var x=v[E],k=y[E],A=w.slice();A.push(E),d(x,k,A),f(x,k,A),c(x,k,A)})}if(b==="array"){if(S!=="array")throw Error("[Type Error]: '".concat(w.join("."),"' require 'array' type, but got '").concat(S,"'"));v.forEach(function(E,x){var k=v[x],A=y[x]||y[0],C=w.slice();C.push(x),d(k,A,C),f(k,A,C),c(k,A,C)})}}(h,p,g),h}function d(h,p,g){if(u(p)==="string"){var v=u(h);if(p[0]==="?"&&(p=p.slice(1)+"|undefined"),!(-1<p.indexOf("|")?p.split("|").map(function(y){return y.toLowerCase().trim()}).filter(Boolean).some(function(y){return v===y}):p.toLowerCase().trim()===v))throw Error("[Type Error]: '".concat(g.join("."),"' require '").concat(p,"' type, but got '").concat(v,"'"))}}function f(h,p,g){if(u(p)==="function"){var v=p(h,u(h),g);if(v!==!0){var y=u(v);throw y==="string"?Error(v):y==="error"?v:Error("[Validator Error]: The scheme for '".concat(g.join("."),"' validator require return true, but got '").concat(v,"'"))}}}return c.kindOf=u,c}()},{}],"66mFZ":[function(n,r,s,i){n("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(s),s.default=class{on(o,a,u){let l=this.e||(this.e={});return(l[o]||(l[o]=[])).push({fn:a,ctx:u}),this}once(o,a,u){let l=this;function c(...d){l.off(o,c),a.apply(u,d)}return c._=a,this.on(o,c,u)}emit(o,...a){let u=((this.e||(this.e={}))[o]||[]).slice();for(let l=0;l<u.length;l+=1)u[l].fn.apply(u[l].ctx,a);return this}off(o,a){let u=this.e||(this.e={}),l=u[o],c=[];if(l&&a)for(let d=0,f=l.length;d<f;d+=1)l[d].fn!==a&&l[d].fn._!==a&&c.push(l[d]);return c.length?u[o]=c:delete u[o],this}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9pCYc":[function(n,r,s,i){s.interopDefault=function(o){return o&&o.__esModule?o:{default:o}},s.defineInteropFlag=function(o){Object.defineProperty(o,"__esModule",{value:!0})},s.exportAll=function(o,a){return Object.keys(o).forEach(function(u){u==="default"||u==="__esModule"||Object.prototype.hasOwnProperty.call(a,u)||Object.defineProperty(a,u,{enumerable:!0,get:function(){return o[u]}})}),a},s.export=function(o,a,u){Object.defineProperty(o,a,{enumerable:!0,get:u})}},{}],"71aH7":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s);var a=n("./dom");o.exportAll(a,s);var u=n("./error");o.exportAll(u,s);var l=n("./subtitle");o.exportAll(l,s);var c=n("./file");o.exportAll(c,s);var d=n("./property");o.exportAll(d,s);var f=n("./time");o.exportAll(f,s);var h=n("./format");o.exportAll(h,s);var p=n("./compatibility");o.exportAll(p,s)},{"./dom":"bSNiV","./error":"hwmZz","./subtitle":"inzwq","./file":"6b7Ip","./property":"5NSdr","./time":"epmNy","./format":"gapRl","./compatibility":"6ZTr6","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],bSNiV:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"query",()=>u),o.export(s,"queryAll",()=>l),o.export(s,"addClass",()=>c),o.export(s,"removeClass",()=>d),o.export(s,"hasClass",()=>f),o.export(s,"append",()=>h),o.export(s,"remove",()=>p),o.export(s,"setStyle",()=>g),o.export(s,"setStyles",()=>v),o.export(s,"getStyle",()=>y),o.export(s,"sublings",()=>w),o.export(s,"inverseClass",()=>b),o.export(s,"tooltip",()=>S),o.export(s,"isInViewport",()=>E),o.export(s,"includeFromEvent",()=>x),o.export(s,"replaceElement",()=>k),o.export(s,"createElement",()=>A),o.export(s,"getIcon",()=>C),o.export(s,"setStyleText",()=>_),o.export(s,"supportsFlex",()=>O),o.export(s,"getRect",()=>P),o.export(s,"loadImg",()=>U);var a=n("./compatibility");function u(j,N=document){return N.querySelector(j)}function l(j,N=document){return Array.from(N.querySelectorAll(j))}function c(j,N){return j.classList.add(N)}function d(j,N){return j.classList.remove(N)}function f(j,N){return j.classList.contains(N)}function h(j,N){return N instanceof Element?j.appendChild(N):j.insertAdjacentHTML("beforeend",String(N)),j.lastElementChild||j.lastChild}function p(j){return j.parentNode.removeChild(j)}function g(j,N,R){return j.style[N]=R,j}function v(j,N){for(let R in N)g(j,R,N[R]);return j}function y(j,N,R=!0){let V=window.getComputedStyle(j,null).getPropertyValue(N);return R?parseFloat(V):V}function w(j){return Array.from(j.parentElement.children).filter(N=>N!==j)}function b(j,N){w(j).forEach(R=>d(R,N)),c(j,N)}function S(j,N,R="top"){a.isMobile||(j.setAttribute("aria-label",N),c(j,"hint--rounded"),c(j,`hint--${R}`))}function E(j,N=0){let R=j.getBoundingClientRect(),V=window.innerHeight||document.documentElement.clientHeight,D=window.innerWidth||document.documentElement.clientWidth,M=R.top-N<=V&&R.top+R.height+N>=0,K=R.left-N<=D+N&&R.left+R.width+N>=0;return M&&K}function x(j,N){return j.composedPath&&j.composedPath().indexOf(N)>-1}function k(j,N){return N.parentNode.replaceChild(j,N),j}function A(j){return document.createElement(j)}function C(j="",N=""){let R=A("i");return c(R,"art-icon"),c(R,`art-icon-${j}`),h(R,N),R}function _(j,N){let R=document.getElementById(j);R||((R=document.createElement("style")).id=j,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{document.head.appendChild(R)}):(document.head||document.documentElement).appendChild(R)),R.textContent=N}function O(){let j=document.createElement("div");return j.style.display="flex",j.style.display==="flex"}function P(j){return j.getBoundingClientRect()}function U(j,N){return new Promise((R,V)=>{let D=new Image;D.onload=function(){if(N&&N!==1){let M=document.createElement("canvas"),K=M.getContext("2d");M.width=D.width*N,M.height=D.height*N,K.drawImage(D,0,0,M.width,M.height),M.toBlob(q=>{let ee=URL.createObjectURL(q),X=new Image;X.onload=function(){R(X)},X.onerror=function(){URL.revokeObjectURL(ee),V(Error(`Image load failed: ${j}`))},X.src=ee})}else R(D)},D.onerror=function(){V(Error(`Image load failed: ${j}`))},D.src=j})}},{"./compatibility":"6ZTr6","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6ZTr6":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"userAgent",()=>a),o.export(s,"isSafari",()=>u),o.export(s,"isWechat",()=>l),o.export(s,"isIE",()=>c),o.export(s,"isAndroid",()=>d),o.export(s,"isIOS",()=>f),o.export(s,"isIOS13",()=>h),o.export(s,"isMobile",()=>p),o.export(s,"isBrowser",()=>g);let a=typeof navigator<"u"?navigator.userAgent:"",u=/^((?!chrome|android).)*safari/i.test(a),l=/MicroMessenger/i.test(a),c=/MSIE|Trident/i.test(a),d=/android/i.test(a),f=/iPad|iPhone|iPod/i.test(a)&&!window.MSStream,h=f||a.includes("Macintosh")&&navigator.maxTouchPoints>=1,p=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a)||h,g=typeof window<"u"},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hwmZz:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"ArtPlayerError",()=>a),o.export(s,"errorHandle",()=>u);class a extends Error{constructor(c,d){super(c),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,d||this.constructor),this.name="ArtPlayerError"}}function u(l,c){if(!l)throw new a(c);return l}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],inzwq:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(c){return`WEBVTT \r
\r
`.concat(c.replace(/(\d\d:\d\d:\d\d)[,.](\d+)/g,(d,f,h)=>{let p=h.slice(0,3);return h.length===1&&(p=h+"00"),h.length===2&&(p=h+"0"),`${f},${p}`}).replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/{[\s\S]*?}/g,"").concat(`\r
\r
`))}function u(c){return URL.createObjectURL(new Blob([c],{type:"text/vtt"}))}function l(c){let d=RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");function f(h=""){return h.split(/[:.]/).map((p,g,v)=>{if(g===v.length-1){if(p.length===1)return`.${p}00`;if(p.length===2)return`.${p}0`}else if(p.length===1)return(g===0?"0":":0")+p;return g===0?p:g===v.length-1?`.${p}`:`:${p}`}).join("")}return`WEBVTT

`+c.split(/\r?\n/).map(h=>{let p=h.match(d);return p?{start:f(p[1].trim()),end:f(p[2].trim()),text:p[5].replace(/{[\s\S]*?}/g,"").replace(/(\\N)/g,`
`).trim().split(/\r?\n/).map(g=>g.trim()).join(`
`)}:null}).filter(h=>h).map((h,p)=>h?p+1+`
${h.start} --> ${h.end}
${h.text}`:"").filter(h=>h.trim()).join(`

`)}o.defineInteropFlag(s),o.export(s,"srtToVtt",()=>a),o.export(s,"vttToBlob",()=>u),o.export(s,"assToVtt",()=>l)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6b7Ip":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(u,l){let c=document.createElement("a");c.style.display="none",c.href=u,c.download=l,document.body.appendChild(c),c.click(),document.body.removeChild(c)}o.defineInteropFlag(s),o.export(s,"getExt",()=>function u(l){return l.includes("?")?u(l.split("?")[0]):l.includes("#")?u(l.split("#")[0]):l.trim().toLowerCase().split(".").pop()}),o.export(s,"download",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5NSdr":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"def",()=>a),o.export(s,"has",()=>l),o.export(s,"get",()=>c),o.export(s,"mergeDeep",()=>function d(...f){let h=p=>p&&typeof p=="object"&&!Array.isArray(p);return f.reduce((p,g)=>(Object.keys(g).forEach(v=>{let y=p[v],w=g[v];Array.isArray(y)&&Array.isArray(w)?p[v]=y.concat(...w):h(y)&&h(w)?p[v]=d(y,w):p[v]=w}),p),{})});let a=Object.defineProperty,{hasOwnProperty:u}=Object.prototype;function l(d,f){return u.call(d,f)}function c(d,f){return Object.getOwnPropertyDescriptor(d,f)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],epmNy:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(c=0){return new Promise(d=>setTimeout(d,c))}function u(c,d){let f;return function(...h){clearTimeout(f),f=setTimeout(()=>(f=null,c.apply(this,h)),d)}}function l(c,d){let f=!1;return function(...h){f||(c.apply(this,h),f=!0,setTimeout(function(){f=!1},d))}}o.defineInteropFlag(s),o.export(s,"sleep",()=>a),o.export(s,"debounce",()=>u),o.export(s,"throttle",()=>l)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gapRl:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(f,h,p){return Math.max(Math.min(f,Math.max(h,p)),Math.min(h,p))}function u(f){return f.charAt(0).toUpperCase()+f.slice(1)}function l(f){if(!f)return"00:00";let h=Math.floor(f/3600),p=Math.floor((f-3600*h)/60),g=Math.floor(f-3600*h-60*p);return(h>0?[h,p,g]:[p,g]).map(v=>v<10?`0${v}`:String(v)).join(":")}function c(f){return f.replace(/[&<>'"]/g,h=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"})[h]||h)}function d(f){let h={"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&quot;":'"'},p=RegExp(`(${Object.keys(h).join("|")})`,"g");return f.replace(p,g=>h[g]||g)}o.defineInteropFlag(s),o.export(s,"clamp",()=>a),o.export(s,"capitalize",()=>u),o.export(s,"secondToTime",()=>l),o.export(s,"escape",()=>c),o.export(s,"unescape",()=>d)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],AKEiO:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"ComponentOption",()=>g);var a=n("../utils");let u="array",l="boolean",c="string",d="number",f="object",h="function";function p(v,y,w){return(0,a.errorHandle)(y===c||y===d||v instanceof Element,`${w.join(".")} require '${c}' or 'Element' type`)}let g={html:p,disable:`?${l}`,name:`?${c}`,index:`?${d}`,style:`?${f}`,click:`?${h}`,mounted:`?${h}`,tooltip:`?${c}|${d}`,width:`?${d}`,selector:`?${u}`,onSelect:`?${h}`,switch:`?${l}`,onSwitch:`?${h}`,range:`?${u}`,onRange:`?${h}`,onChange:`?${h}`};s.default={id:c,container:p,url:c,poster:c,type:c,theme:c,lang:c,volume:d,isLive:l,muted:l,autoplay:l,autoSize:l,autoMini:l,loop:l,flip:l,playbackRate:l,aspectRatio:l,screenshot:l,setting:l,hotkey:l,pip:l,mutex:l,backdrop:l,fullscreen:l,fullscreenWeb:l,subtitleOffset:l,miniProgressBar:l,useSSR:l,playsInline:l,lock:l,gesture:l,fastForward:l,autoPlayback:l,autoOrientation:l,airplay:l,proxy:`?${h}`,plugins:[h],layers:[g],contextmenu:[g],settings:[g],controls:[{...g,position:(v,y,w)=>{let b=["top","left","right"];return(0,a.errorHandle)(b.includes(v),`${w.join(".")} only accept ${b.toString()} as parameters`)}}],quality:[{default:`?${l}`,html:c,url:c}],highlight:[{time:d,text:c}],thumbnails:{url:c,number:d,column:d,width:d,height:d,scale:d},subtitle:{url:c,name:c,type:c,style:f,escape:l,encoding:c,onVttLoad:h},moreVideoAttr:f,i18n:f,icons:f,cssVar:f,customType:f}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],lyjeQ:[function(n,r,s,i){n("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(s),s.default={propertys:["audioTracks","autoplay","buffered","controller","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","loop","mediaGroup","muted","networkState","paused","playbackRate","played","preload","readyState","seekable","seeking","src","startDate","textTracks","videoTracks","volume"],methods:["addTextTrack","canPlayType","load","play","pause"],events:["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],prototypes:["width","height","videoWidth","videoHeight","poster","webkitDecodedFrameCount","webkitDroppedFrameCount","playsInline","webkitSupportsFullscreen","webkitDisplayingFullscreen","onenterpictureinpicture","onleavepictureinpicture","disablePictureInPicture","cancelVideoFrameCallback","requestVideoFrameCallback","getVideoPlaybackQuality","requestPictureInPicture","webkitEnterFullScreen","webkitEnterFullscreen","webkitExitFullScreen","webkitExitFullscreen"]}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],X13Zf:[function(n,r,s,i){n("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(s);var o=n("./utils");class a{constructor(l){this.art=l;let{option:c,constructor:d}=l;c.container instanceof Element?this.$container=c.container:(this.$container=(0,o.query)(c.container),(0,o.errorHandle)(this.$container,`No container element found by ${c.container}`)),(0,o.errorHandle)((0,o.supportsFlex)(),"The current browser does not support flex layout");let f=this.$container.tagName.toLowerCase();(0,o.errorHandle)(f==="div",`Unsupported container element type, only support 'div' but got '${f}'`),(0,o.errorHandle)(d.instances.every(h=>h.template.$container!==this.$container),"Cannot mount multiple instances on the same dom element"),this.query=this.query.bind(this),this.$container.dataset.artId=l.id,this.init()}static get html(){return'<div class="art-video-player art-subtitle-show art-layer-show art-control-show art-mask-show"><video class="art-video"><track default kind="metadata" src=""></track></video><div class="art-poster"></div><div class="art-subtitle"></div><div class="art-danmuku"></div><div class="art-layers"></div><div class="art-mask"><div class="art-state"></div></div><div class="art-bottom"><div class="art-progress"></div><div class="art-controls"><div class="art-controls-left"></div><div class="art-controls-center"></div><div class="art-controls-right"></div></div></div><div class="art-loading"></div><div class="art-notice"><div class="art-notice-inner"></div></div><div class="art-settings"></div><div class="art-info"><div class="art-info-panel"><div class="art-info-item"><div class="art-info-title">Player version:</div><div class="art-info-content">5.2.3</div></div><div class="art-info-item"><div class="art-info-title">Video url:</div><div class="art-info-content" data-video="src"></div></div><div class="art-info-item"><div class="art-info-title">Video volume:</div><div class="art-info-content" data-video="volume"></div></div><div class="art-info-item"><div class="art-info-title">Video time:</div><div class="art-info-content" data-video="currentTime"></div></div><div class="art-info-item"><div class="art-info-title">Video duration:</div><div class="art-info-content" data-video="duration"></div></div><div class="art-info-item"><div class="art-info-title">Video resolution:</div><div class="art-info-content"><span data-video="videoWidth"></span>x<span data-video="videoHeight"></span></div></div></div><div class="art-info-close">[x]</div></div><div class="art-contextmenus"></div></div>'}query(l){return(0,o.query)(l,this.$container)}init(){let{option:l}=this.art;if(l.useSSR||(this.$container.innerHTML=a.html),this.$player=this.query(".art-video-player"),this.$video=this.query(".art-video"),this.$track=this.query("track"),this.$poster=this.query(".art-poster"),this.$subtitle=this.query(".art-subtitle"),this.$danmuku=this.query(".art-danmuku"),this.$bottom=this.query(".art-bottom"),this.$progress=this.query(".art-progress"),this.$controls=this.query(".art-controls"),this.$controlsLeft=this.query(".art-controls-left"),this.$controlsCenter=this.query(".art-controls-center"),this.$controlsRight=this.query(".art-controls-right"),this.$layer=this.query(".art-layers"),this.$loading=this.query(".art-loading"),this.$notice=this.query(".art-notice"),this.$noticeInner=this.query(".art-notice-inner"),this.$mask=this.query(".art-mask"),this.$state=this.query(".art-state"),this.$setting=this.query(".art-settings"),this.$info=this.query(".art-info"),this.$infoPanel=this.query(".art-info-panel"),this.$infoClose=this.query(".art-info-close"),this.$contextmenu=this.query(".art-contextmenus"),l.proxy){let c=l.proxy.call(this.art,this.art);(0,o.errorHandle)(c instanceof HTMLVideoElement||c instanceof HTMLCanvasElement,"Function 'option.proxy' needs to return 'HTMLVideoElement' or 'HTMLCanvasElement'"),(0,o.replaceElement)(c,this.$video),c.className="art-video",this.$video=c}l.backdrop&&(0,o.addClass)(this.$player,"art-backdrop"),o.isMobile&&(0,o.addClass)(this.$player,"art-mobile")}destroy(l){this.$video.src="",l?this.$container.innerHTML="":(0,o.addClass)(this.$player,"art-destroy")}}s.default=a},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3jKkj":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s);var a=n("../utils"),u=n("./zh-cn"),l=o.interopDefault(u);s.default=class{constructor(c){this.art=c,this.languages={"zh-cn":l.default},this.language={},this.update(c.option.i18n)}init(){let c=this.art.option.lang.toLowerCase();this.language=this.languages[c]||{}}get(c){return this.language[c]||c}update(c){this.languages=(0,a.mergeDeep)(this.languages,c),this.init()}}},{"../utils":"71aH7","./zh-cn":"5Y91w","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5Y91w":[function(n,r,s,i){n("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(s);let o={"Video Info":"",Close:"","Video Load Failed":"",Volume:"",Play:"",Pause:"",Rate:"",Mute:"","Video Flip":"",Horizontal:"",Vertical:"",Reconnect:"","Show Setting":"","Hide Setting":"",Screenshot:"","Play Speed":"","Aspect Ratio":"",Default:"",Normal:"",Open:"","Switch Video":"","Switch Subtitle":"",Fullscreen:"","Exit Fullscreen":"","Web Fullscreen":"","Exit Web Fullscreen":"","Mini Player":"","PIP Mode":"","Exit PIP Mode":"","PIP Not Supported":"","Fullscreen Not Supported":"","Subtitle Offset":"","Last Seen":"","Jump Play":"",AirPlay:"","AirPlay Not Available":""};s.default=o,typeof window<"u"&&(window["artplayer-i18n-zh-cn"]=o)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],a90nx:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s);var a=n("./urlMix"),u=o.interopDefault(a),l=n("./attrMix"),c=o.interopDefault(l),d=n("./playMix"),f=o.interopDefault(d),h=n("./pauseMix"),p=o.interopDefault(h),g=n("./toggleMix"),v=o.interopDefault(g),y=n("./seekMix"),w=o.interopDefault(y),b=n("./volumeMix"),S=o.interopDefault(b),E=n("./currentTimeMix"),x=o.interopDefault(E),k=n("./durationMix"),A=o.interopDefault(k),C=n("./switchMix"),_=o.interopDefault(C),O=n("./playbackRateMix"),P=o.interopDefault(O),U=n("./aspectRatioMix"),j=o.interopDefault(U),N=n("./screenshotMix"),R=o.interopDefault(N),V=n("./fullscreenMix"),D=o.interopDefault(V),M=n("./fullscreenWebMix"),K=o.interopDefault(M),q=n("./pipMix"),ee=o.interopDefault(q),X=n("./loadedMix"),te=o.interopDefault(X),ue=n("./playedMix"),he=o.interopDefault(ue),Z=n("./playingMix"),ce=o.interopDefault(Z),ae=n("./autoSizeMix"),Te=o.interopDefault(ae),Ce=n("./rectMix"),z=o.interopDefault(Ce),re=n("./flipMix"),ve=o.interopDefault(re),ke=n("./miniMix"),Ee=o.interopDefault(ke),be=n("./posterMix"),Se=o.interopDefault(be),_e=n("./autoHeightMix"),Ne=o.interopDefault(_e),Me=n("./cssVarMix"),st=o.interopDefault(Me),qe=n("./themeMix"),Ae=o.interopDefault(qe),et=n("./typeMix"),St=o.interopDefault(et),Lt=n("./stateMix"),Pt=o.interopDefault(Lt),en=n("./subtitleOffsetMix"),zt=o.interopDefault(en),bn=n("./airplayMix"),ht=o.interopDefault(bn),Nt=n("./qualityMix"),fe=o.interopDefault(Nt),Le=n("./thumbnailsMix"),ne=o.interopDefault(Le),Ye=n("./optionInit"),Et=o.interopDefault(Ye),tn=n("./eventInit"),ct=o.interopDefault(tn);s.default=class{constructor(Wt){(0,u.default)(Wt),(0,c.default)(Wt),(0,f.default)(Wt),(0,p.default)(Wt),(0,v.default)(Wt),(0,w.default)(Wt),(0,S.default)(Wt),(0,x.default)(Wt),(0,A.default)(Wt),(0,_.default)(Wt),(0,P.default)(Wt),(0,j.default)(Wt),(0,R.default)(Wt),(0,D.default)(Wt),(0,K.default)(Wt),(0,ee.default)(Wt),(0,te.default)(Wt),(0,he.default)(Wt),(0,ce.default)(Wt),(0,Te.default)(Wt),(0,z.default)(Wt),(0,ve.default)(Wt),(0,Ee.default)(Wt),(0,Se.default)(Wt),(0,Ne.default)(Wt),(0,st.default)(Wt),(0,Ae.default)(Wt),(0,St.default)(Wt),(0,Pt.default)(Wt),(0,zt.default)(Wt),(0,ht.default)(Wt),(0,fe.default)(Wt),(0,ne.default)(Wt),(0,ct.default)(Wt),(0,Et.default)(Wt)}}},{"./urlMix":"kQoac","./attrMix":"deCma","./playMix":"fOJuP","./pauseMix":"fzHAy","./toggleMix":"cBHxQ","./seekMix":"koAPr","./volumeMix":"6eyuR","./currentTimeMix":"faaWv","./durationMix":"5y91K","./switchMix":"iceD8","./playbackRateMix":"keKwh","./aspectRatioMix":"jihET","./screenshotMix":"36kPY","./fullscreenMix":"2GYOJ","./fullscreenWebMix":"5aYAP","./pipMix":"7EnIB","./loadedMix":"3N9mP","./playedMix":"et96R","./playingMix":"9DzzM","./autoSizeMix":"i1LDY","./rectMix":"IqARI","./flipMix":"7E7Vs","./miniMix":"gpugx","./posterMix":"1SuFS","./autoHeightMix":"8x4te","./cssVarMix":"1CaTA","./themeMix":"2FqhO","./typeMix":"1fQQs","./stateMix":"iBOQW","./subtitleOffsetMix":"6vlBV","./airplayMix":"eftqT","./qualityMix":"5SdyX","./thumbnailsMix":"4HcqV","./optionInit":"fCWZK","./eventInit":"f8Lv3","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kQoac:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{option:c,template:{$video:d}}=l;(0,a.def)(l,"url",{get:()=>d.src,async set(f){if(f){let h=l.url,p=c.type||(0,a.getExt)(f),g=c.customType[p];p&&g?(await(0,a.sleep)(),l.loading.show=!0,g.call(l,d,f,l)):(URL.revokeObjectURL(h),d.src=f),h!==l.url&&(l.option.url=f,l.isReady&&h&&l.once("video:canplay",()=>{l.emit("restart",f)}))}else await(0,a.sleep)(),l.loading.show=!0}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],deCma:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{template:{$video:c}}=l;(0,a.def)(l,"attr",{value(d,f){if(f===void 0)return c[d];c[d]=f}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fOJuP:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{i18n:c,notice:d,option:f,constructor:{instances:h},template:{$video:p}}=l;(0,a.def)(l,"play",{value:async function(){let g=await p.play();if(d.show=c.get("Play"),l.emit("play"),f.mutex)for(let v=0;v<h.length;v++){let y=h[v];y!==l&&y.pause()}return g}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fzHAy:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{template:{$video:c},i18n:d,notice:f}=l;(0,a.def)(l,"pause",{value(){let h=c.pause();return f.show=d.get("Pause"),l.emit("pause"),h}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],cBHxQ:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){(0,a.def)(l,"toggle",{value:()=>l.playing?l.pause():l.play()})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],koAPr:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{notice:c}=l;(0,a.def)(l,"seek",{set(d){l.currentTime=d,l.duration&&(c.show=`${(0,a.secondToTime)(l.currentTime)} / ${(0,a.secondToTime)(l.duration)}`),l.emit("seek",l.currentTime)}}),(0,a.def)(l,"forward",{set(d){l.seek=l.currentTime+d}}),(0,a.def)(l,"backward",{set(d){l.seek=l.currentTime-d}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6eyuR":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{template:{$video:c},i18n:d,notice:f,storage:h}=l;(0,a.def)(l,"volume",{get:()=>c.volume||0,set:p=>{c.volume=(0,a.clamp)(p,0,1),f.show=`${d.get("Volume")}: ${parseInt(100*c.volume,10)}`,c.volume!==0&&h.set("volume",c.volume)}}),(0,a.def)(l,"muted",{get:()=>c.muted,set:p=>{c.muted=p,l.emit("muted",p)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],faaWv:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{$video:c}=l.template;(0,a.def)(l,"currentTime",{get:()=>c.currentTime||0,set:d=>{Number.isNaN(d=parseFloat(d))||(c.currentTime=(0,a.clamp)(d,0,l.duration))}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5y91K":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){(0,a.def)(l,"duration",{get:()=>{let{duration:c}=l.template.$video;return c===1/0?0:c||0}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],iceD8:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){function c(d,f){return new Promise((h,p)=>{if(d===l.url)return;let{playing:g,aspectRatio:v,playbackRate:y}=l;l.pause(),l.url=d,l.notice.show="",l.once("video:error",p),l.once("video:loadedmetadata",()=>{l.currentTime=f}),l.once("video:canplay",async()=>{l.playbackRate=y,l.aspectRatio=v,g&&await l.play(),l.notice.show="",h()})})}(0,a.def)(l,"switchQuality",{value:d=>c(d,l.currentTime)}),(0,a.def)(l,"switchUrl",{value:d=>c(d,0)}),(0,a.def)(l,"switch",{set:l.switchUrl})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],keKwh:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{template:{$video:c},i18n:d,notice:f}=l;(0,a.def)(l,"playbackRate",{get:()=>c.playbackRate,set(h){h?h!==c.playbackRate&&(c.playbackRate=h,f.show=`${d.get("Rate")}: ${h===1?d.get("Normal"):`${h}x`}`):l.playbackRate=1}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jihET:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{i18n:c,notice:d,template:{$video:f,$player:h}}=l;(0,a.def)(l,"aspectRatio",{get:()=>h.dataset.aspectRatio||"default",set(p){if(p||(p="default"),p==="default")(0,a.setStyle)(f,"width",null),(0,a.setStyle)(f,"height",null),(0,a.setStyle)(f,"margin",null),delete h.dataset.aspectRatio;else{let g=p.split(":").map(Number),{clientWidth:v,clientHeight:y}=h,w=g[0]/g[1];v/y>w?((0,a.setStyle)(f,"width",`${w*y}px`),(0,a.setStyle)(f,"height","100%"),(0,a.setStyle)(f,"margin","0 auto")):((0,a.setStyle)(f,"width","100%"),(0,a.setStyle)(f,"height",`${v/w}px`),(0,a.setStyle)(f,"margin","auto 0")),h.dataset.aspectRatio=p}d.show=`${c.get("Aspect Ratio")}: ${p==="default"?c.get("Default"):p}`,l.emit("aspectRatio",p)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"36kPY":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{notice:c,template:{$video:d}}=l,f=(0,a.createElement)("canvas");(0,a.def)(l,"getDataURL",{value:()=>new Promise((h,p)=>{try{f.width=d.videoWidth,f.height=d.videoHeight,f.getContext("2d").drawImage(d,0,0),h(f.toDataURL("image/png"))}catch(g){c.show=g,p(g)}})}),(0,a.def)(l,"getBlobUrl",{value:()=>new Promise((h,p)=>{try{f.width=d.videoWidth,f.height=d.videoHeight,f.getContext("2d").drawImage(d,0,0),f.toBlob(g=>{h(URL.createObjectURL(g))})}catch(g){c.show=g,p(g)}})}),(0,a.def)(l,"screenshot",{value:async h=>{let p=await l.getDataURL(),g=h||`artplayer_${(0,a.secondToTime)(d.currentTime)}`;return(0,a.download)(p,`${g}.png`),l.emit("screenshot",p),p}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2GYOJ":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>c);var a=n("../libs/screenfull"),u=o.interopDefault(a),l=n("../utils");function c(d){let{i18n:f,notice:h,template:{$video:p,$player:g}}=d,v=w=>{u.default.on("change",()=>{w.emit("fullscreen",u.default.isFullscreen),u.default.isFullscreen?(w.state="fullscreen",(0,l.addClass)(g,"art-fullscreen")):(0,l.removeClass)(g,"art-fullscreen"),w.emit("resize")}),u.default.on("error",b=>{w.emit("fullscreenError",b)}),(0,l.def)(w,"fullscreen",{get:()=>u.default.isFullscreen,async set(b){b?await u.default.request(g):await u.default.exit()}})},y=w=>{w.proxy(document,"webkitfullscreenchange",()=>{w.emit("fullscreen",w.fullscreen),w.emit("resize")}),(0,l.def)(w,"fullscreen",{get:()=>document.fullscreenElement===p,set(b){b?(w.state="fullscreen",p.webkitEnterFullscreen()):p.webkitExitFullscreen()}})};d.once("video:loadedmetadata",()=>{u.default.isEnabled?v(d):p.webkitSupportsFullscreen?y(d):(0,l.def)(d,"fullscreen",{get:()=>!1,set(){h.show=f.get("Fullscreen Not Supported")}}),(0,l.def)(d,"fullscreen",(0,l.get)(d,"fullscreen"))})}},{"../libs/screenfull":"8v40z","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8v40z":[function(n,r,s,i){n("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(s);let o=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],a=(()=>{if(typeof document>"u")return!1;let c=o[0],d={};for(let f of o)if(f[1]in document){for(let[h,p]of f.entries())d[c[h]]=p;return d}return!1})(),u={change:a.fullscreenchange,error:a.fullscreenerror},l={request:(c=document.documentElement,d)=>new Promise((f,h)=>{let p=()=>{l.off("change",p),f()};l.on("change",p);let g=c[a.requestFullscreen](d);g instanceof Promise&&g.then(p).catch(h)}),exit:()=>new Promise((c,d)=>{if(!l.isFullscreen)return void c();let f=()=>{l.off("change",f),c()};l.on("change",f);let h=document[a.exitFullscreen]();h instanceof Promise&&h.then(f).catch(d)}),toggle:(c,d)=>l.isFullscreen?l.exit():l.request(c,d),onchange(c){l.on("change",c)},onerror(c){l.on("error",c)},on(c,d){let f=u[c];f&&document.addEventListener(f,d,!1)},off(c,d){let f=u[c];f&&document.removeEventListener(f,d,!1)},raw:a};Object.defineProperties(l,{isFullscreen:{get:()=>!!document[a.fullscreenElement]},element:{enumerable:!0,get:()=>document[a.fullscreenElement]},isEnabled:{enumerable:!0,get:()=>!!document[a.fullscreenEnabled]}}),a||(l={isEnabled:!1}),s.default=l},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5aYAP":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{constructor:c,template:{$container:d,$player:f}}=l,h="";(0,a.def)(l,"fullscreenWeb",{get:()=>(0,a.hasClass)(f,"art-fullscreen-web"),set(p){p?(h=f.style.cssText,c.FULLSCREEN_WEB_IN_BODY&&(0,a.append)(document.body,f),l.state="fullscreenWeb",(0,a.setStyle)(f,"width","100%"),(0,a.setStyle)(f,"height","100%"),(0,a.addClass)(f,"art-fullscreen-web"),l.emit("fullscreenWeb",!0)):(c.FULLSCREEN_WEB_IN_BODY&&(0,a.append)(d,f),h&&(f.style.cssText=h,h=""),(0,a.removeClass)(f,"art-fullscreen-web"),l.emit("fullscreenWeb",!1)),l.emit("resize")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7EnIB":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{i18n:c,notice:d,template:{$video:f}}=l;if(document.pictureInPictureEnabled){let{template:{$video:h},proxy:p,notice:g}=l;h.disablePictureInPicture=!1,(0,a.def)(l,"pip",{get:()=>document.pictureInPictureElement,set(v){v?(l.state="pip",h.requestPictureInPicture().catch(y=>{throw g.show=y,y})):document.exitPictureInPicture().catch(y=>{throw g.show=y,y})}}),p(h,"enterpictureinpicture",()=>{l.emit("pip",!0)}),p(h,"leavepictureinpicture",()=>{l.emit("pip",!1)})}else if(f.webkitSupportsPresentationMode){let{$video:h}=l.template;h.webkitSetPresentationMode("inline"),(0,a.def)(l,"pip",{get:()=>h.webkitPresentationMode==="picture-in-picture",set(p){p?(l.state="pip",h.webkitSetPresentationMode("picture-in-picture"),l.emit("pip",!0)):(h.webkitSetPresentationMode("inline"),l.emit("pip",!1))}})}else(0,a.def)(l,"pip",{get:()=>!1,set(){d.show=c.get("PIP Not Supported")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3N9mP":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{$video:c}=l.template;(0,a.def)(l,"loaded",{get:()=>l.loadedTime/c.duration}),(0,a.def)(l,"loadedTime",{get:()=>c.buffered.length?c.buffered.end(c.buffered.length-1):0})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],et96R:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){(0,a.def)(l,"played",{get:()=>l.currentTime/l.duration})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9DzzM":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{$video:c}=l.template;(0,a.def)(l,"playing",{get:()=>typeof c.playing=="boolean"?c.playing:c.currentTime>0&&!c.paused&&!c.ended&&c.readyState>2})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],i1LDY:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{$container:c,$player:d,$video:f}=l.template;(0,a.def)(l,"autoSize",{value(){let{videoWidth:h,videoHeight:p}=f,{width:g,height:v}=(0,a.getRect)(c),y=h/p;g/v>y?((0,a.setStyle)(d,"width",`${v*y/g*100}%`),(0,a.setStyle)(d,"height","100%")):((0,a.setStyle)(d,"width","100%"),(0,a.setStyle)(d,"height",`${g/y/v*100}%`)),l.emit("autoSize",{width:l.width,height:l.height})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],IqARI:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){(0,a.def)(l,"rect",{get:()=>(0,a.getRect)(l.template.$player)});let c=["bottom","height","left","right","top","width"];for(let d=0;d<c.length;d++){let f=c[d];(0,a.def)(l,f,{get:()=>l.rect[f]})}(0,a.def)(l,"x",{get:()=>l.left+window.pageXOffset}),(0,a.def)(l,"y",{get:()=>l.top+window.pageYOffset})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7E7Vs":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{template:{$player:c},i18n:d,notice:f}=l;(0,a.def)(l,"flip",{get:()=>c.dataset.flip||"normal",set(h){h||(h="normal"),h==="normal"?delete c.dataset.flip:c.dataset.flip=h,f.show=`${d.get("Video Flip")}: ${d.get((0,a.capitalize)(h))}`,l.emit("flip",h)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gpugx:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{icons:c,proxy:d,storage:f,template:{$player:h,$video:p}}=l,g=!1,v=0,y=0;function w(){let{$mini:E}=l.template;E&&((0,a.removeClass)(h,"art-mini"),(0,a.setStyle)(E,"display","none"),h.prepend(p),l.emit("mini",!1))}function b(E,x){l.playing?((0,a.setStyle)(E,"display","none"),(0,a.setStyle)(x,"display","flex")):((0,a.setStyle)(E,"display","flex"),(0,a.setStyle)(x,"display","none"))}function S(){let{$mini:E}=l.template,x=(0,a.getRect)(E),k=window.innerHeight-x.height-50,A=window.innerWidth-x.width-50;f.set("top",k),f.set("left",A),(0,a.setStyle)(E,"top",`${k}px`),(0,a.setStyle)(E,"left",`${A}px`)}(0,a.def)(l,"mini",{get:()=>(0,a.hasClass)(h,"art-mini"),set(E){if(E){l.state="mini",(0,a.addClass)(h,"art-mini");let x=function(){let{$mini:C}=l.template;if(C)return(0,a.append)(C,p),(0,a.setStyle)(C,"display","flex");{let _=(0,a.createElement)("div");(0,a.addClass)(_,"art-mini-popup"),(0,a.append)(document.body,_),l.template.$mini=_,(0,a.append)(_,p);let O=(0,a.append)(_,'<div class="art-mini-close"></div>');(0,a.append)(O,c.close),d(O,"click",w);let P=(0,a.append)(_,'<div class="art-mini-state"></div>'),U=(0,a.append)(P,c.play),j=(0,a.append)(P,c.pause);return d(U,"click",()=>l.play()),d(j,"click",()=>l.pause()),b(U,j),l.on("video:playing",()=>b(U,j)),l.on("video:pause",()=>b(U,j)),l.on("video:timeupdate",()=>b(U,j)),d(_,"mousedown",N=>{g=N.button===0,v=N.pageX,y=N.pageY}),l.on("document:mousemove",N=>{if(g){(0,a.addClass)(_,"art-mini-droging");let R=N.pageX-v,V=N.pageY-y;(0,a.setStyle)(_,"transform",`translate(${R}px, ${V}px)`)}}),l.on("document:mouseup",()=>{if(g){g=!1,(0,a.removeClass)(_,"art-mini-droging");let N=(0,a.getRect)(_);f.set("left",N.left),f.set("top",N.top),(0,a.setStyle)(_,"left",`${N.left}px`),(0,a.setStyle)(_,"top",`${N.top}px`),(0,a.setStyle)(_,"transform",null)}}),_}}(),k=f.get("top"),A=f.get("left");k&&A?((0,a.setStyle)(x,"top",`${k}px`),(0,a.setStyle)(x,"left",`${A}px`),(0,a.isInViewport)(x)||S()):S(),l.emit("mini",!0)}else w()}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1SuFS":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{template:{$poster:c}}=l;(0,a.def)(l,"poster",{get:()=>{try{return c.style.backgroundImage.match(/"(.*)"/)[1]}catch{return""}},set(d){(0,a.setStyle)(c,"backgroundImage",`url(${d})`)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8x4te":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{template:{$container:c,$video:d}}=l;(0,a.def)(l,"autoHeight",{value(){let{clientWidth:f}=c,{videoHeight:h,videoWidth:p}=d,g=f/p*h;(0,a.setStyle)(c,"height",g+"px"),l.emit("autoHeight",g)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1CaTA":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{$player:c}=l.template;(0,a.def)(l,"cssVar",{value:(d,f)=>f?c.style.setProperty(d,f):getComputedStyle(c).getPropertyValue(d)})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2FqhO":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){(0,a.def)(l,"theme",{get:()=>l.cssVar("--art-theme"),set(c){l.cssVar("--art-theme",c)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1fQQs":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){(0,a.def)(l,"type",{get:()=>l.option.type,set(c){l.option.type=c}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],iBOQW:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let c=["mini","pip","fullscreen","fullscreenWeb"];(0,a.def)(l,"state",{get:()=>c.find(d=>l[d])||"standard",set(d){for(let f=0;f<c.length;f++){let h=c[f];h!==d&&l[h]&&(l[h]=!1)}}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6vlBV":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{notice:c,i18n:d,template:f}=l;(0,a.def)(l,"subtitleOffset",{get:()=>{var h;return((h=f.$track)==null?void 0:h.offset)||0},set(h){let{cues:p}=l.subtitle;if(!f.$track||p.length===0)return;let g=(0,a.clamp)(h,-10,10);f.$track.offset=g;for(let v=0;v<p.length;v++){let y=p[v];y.originalStartTime=y.originalStartTime??y.startTime,y.originalEndTime=y.originalEndTime??y.endTime,y.startTime=(0,a.clamp)(y.originalStartTime+g,0,l.duration),y.endTime=(0,a.clamp)(y.originalEndTime+g,0,l.duration)}l.subtitle.update(),c.show=`${d.get("Subtitle Offset")}: ${h}s`,l.emit("subtitleOffset",h)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eftqT:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{i18n:c,notice:d,proxy:f,template:{$video:h}}=l,p=!0;window.WebKitPlaybackTargetAvailabilityEvent&&h.webkitShowPlaybackTargetPicker?f(h,"webkitplaybacktargetavailabilitychanged",g=>{switch(g.availability){case"available":p=!0;break;case"not-available":p=!1}}):p=!1,(0,a.def)(l,"airplay",{value(){p?(h.webkitShowPlaybackTargetPicker(),l.emit("airplay")):d.show=c.get("AirPlay Not Available")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5SdyX":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){(0,a.def)(l,"quality",{set(c){let{controls:d,notice:f,i18n:h}=l,p=c.find(g=>g.default)||c[0];d.update({name:"quality",position:"right",index:10,style:{marginRight:"10px"},html:(p==null?void 0:p.html)||"",selector:c,onSelect:async g=>(await l.switchQuality(g.url),f.show=`${h.get("Switch Video")}: ${g.html}`,g.html)})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4HcqV":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{events:c,option:d,template:{$progress:f,$video:h}}=l,p=null,g=null,v=!1,y=!1,w=!1;c.hover(f,()=>{w=!0},()=>{w=!1}),l.on("setBar",async(b,S,E)=>{var _;let x=(_=l.controls)==null?void 0:_.thumbnails,{url:k,scale:A}=d.thumbnails;if(!x||!k)return;let C=b==="played"&&E&&a.isMobile;if(b==="hover"||C){if(v||(v=!0,g=await(0,a.loadImg)(k,A),y=!0),!y||!w)return;let O=f.clientWidth*S;(0,a.setStyle)(x,"display","flex"),O>0&&O<f.clientWidth?function(P){var X;let U=(X=l.controls)==null?void 0:X.thumbnails;if(!U)return;let{number:j,column:N,width:R,height:V,scale:D}=d.thumbnails,M=R*D||g.naturalWidth/N,K=V*D||M/(h.videoWidth/h.videoHeight),q=Math.floor(P/(f.clientWidth/j)),ee=Math.ceil(q/N)-1;(0,a.setStyle)(U,"backgroundImage",`url(${g.src})`),(0,a.setStyle)(U,"height",`${K}px`),(0,a.setStyle)(U,"width",`${M}px`),(0,a.setStyle)(U,"backgroundPosition",`-${(q%N||N-1)*M}px -${ee*K}px`),P<=M/2?(0,a.setStyle)(U,"left",0):P>f.clientWidth-M/2?(0,a.setStyle)(U,"left",`${f.clientWidth-M}px`):(0,a.setStyle)(U,"left",`${P-M/2}px`)}(O):a.isMobile||(0,a.setStyle)(x,"display","none"),C&&(clearTimeout(p),p=setTimeout(()=>{(0,a.setStyle)(x,"display","none")},500))}}),(0,a.def)(l,"thumbnails",{get:()=>l.option.thumbnails,set(b){b.url&&!l.option.isLive&&(l.option.thumbnails=b,clearTimeout(p),p=null,g=null,v=!1,y=!1)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fCWZK:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{option:c,storage:d,template:{$video:f,$poster:h}}=l;for(let g in c.moreVideoAttr)l.attr(g,c.moreVideoAttr[g]);c.muted&&(l.muted=c.muted),c.volume&&(f.volume=(0,a.clamp)(c.volume,0,1));let p=d.get("volume");for(let g in typeof p=="number"&&(f.volume=(0,a.clamp)(p,0,1)),c.poster&&(0,a.setStyle)(h,"backgroundImage",`url(${c.poster})`),c.autoplay&&(f.autoplay=c.autoplay),c.playsInline&&(f.playsInline=!0,f["webkit-playsinline"]=!0),c.theme&&(c.cssVar["--art-theme"]=c.theme),c.cssVar)l.cssVar(g,c.cssVar[g]);l.url=c.url}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],f8Lv3:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>c);var a=n("../config"),u=o.interopDefault(a),l=n("../utils");function c(d){let{i18n:f,notice:h,option:p,constructor:g,proxy:v,template:{$player:y,$video:w,$poster:b}}=d,S=0;for(let E=0;E<u.default.events.length;E++)v(w,u.default.events[E],x=>{d.emit(`video:${x.type}`,x)});d.on("video:canplay",()=>{S=0,d.loading.show=!1}),d.once("video:canplay",()=>{d.loading.show=!1,d.controls.show=!0,d.mask.show=!0,d.isReady=!0,d.emit("ready")}),d.on("video:ended",()=>{p.loop?(d.seek=0,d.play(),d.controls.show=!1,d.mask.show=!1):(d.controls.show=!0,d.mask.show=!0)}),d.on("video:error",async E=>{S<g.RECONNECT_TIME_MAX?(await(0,l.sleep)(g.RECONNECT_SLEEP_TIME),S+=1,d.url=p.url,h.show=`${f.get("Reconnect")}: ${S}`,d.emit("error",E,S)):(d.mask.show=!0,d.loading.show=!1,d.controls.show=!0,(0,l.addClass)(y,"art-error"),await(0,l.sleep)(g.RECONNECT_SLEEP_TIME),h.show=f.get("Video Load Failed"))}),d.on("video:loadedmetadata",()=>{d.emit("resize"),l.isMobile&&(d.loading.show=!1,d.controls.show=!0,d.mask.show=!0)}),d.on("video:loadstart",()=>{d.loading.show=!0,d.mask.show=!1,d.controls.show=!0}),d.on("video:pause",()=>{d.controls.show=!0,d.mask.show=!0}),d.on("video:play",()=>{d.mask.show=!1,(0,l.setStyle)(b,"display","none")}),d.on("video:playing",()=>{d.mask.show=!1}),d.on("video:progress",()=>{d.playing&&(d.loading.show=!1)}),d.on("video:seeked",()=>{d.loading.show=!1,d.mask.show=!0}),d.on("video:seeking",()=>{d.loading.show=!0,d.mask.show=!1}),d.on("video:timeupdate",()=>{d.mask.show=!1}),d.on("video:waiting",()=>{d.loading.show=!0,d.mask.show=!1})}},{"../config":"lyjeQ","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8Z0Uf":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s);var a=n("../utils/component"),u=o.interopDefault(a),l=n("./fullscreen"),c=o.interopDefault(l),d=n("./fullscreenWeb"),f=o.interopDefault(d),h=n("./pip"),p=o.interopDefault(h),g=n("./playAndPause"),v=o.interopDefault(g),y=n("./progress"),w=o.interopDefault(y),b=n("./time"),S=o.interopDefault(b),E=n("./volume"),x=o.interopDefault(E),k=n("./setting"),A=o.interopDefault(k),C=n("./screenshot"),_=o.interopDefault(C),O=n("./airplay"),P=o.interopDefault(O),U=n("../utils");class j extends u.default{constructor(R){super(R),this.isHover=!1,this.name="control",this.timer=Date.now();let{constructor:V}=R,{$player:D,$bottom:M}=this.art.template;R.on("mousemove",()=>{U.isMobile||(this.show=!0)}),R.on("click",()=>{U.isMobile?this.toggle():this.show=!0}),R.on("document:mousemove",K=>{this.isHover=(0,U.includeFromEvent)(K,M)}),R.on("video:timeupdate",()=>{!R.setting.show&&!this.isHover&&!R.isInput&&R.playing&&this.show&&Date.now()-this.timer>=V.CONTROL_HIDE_TIME&&(this.show=!1)}),R.on("control",K=>{K?((0,U.removeClass)(D,"art-hide-cursor"),(0,U.addClass)(D,"art-hover"),this.timer=Date.now()):((0,U.addClass)(D,"art-hide-cursor"),(0,U.removeClass)(D,"art-hover"))}),this.init()}init(){let{option:R}=this.art;R.isLive||this.add((0,w.default)({name:"progress",position:"top",index:10})),this.add({name:"thumbnails",position:"top",index:20}),this.add((0,v.default)({name:"playAndPause",position:"left",index:10})),this.add((0,x.default)({name:"volume",position:"left",index:20})),R.isLive||this.add((0,S.default)({name:"time",position:"left",index:30})),R.quality.length&&(0,U.sleep)().then(()=>{this.art.quality=R.quality}),R.screenshot&&!U.isMobile&&this.add((0,_.default)({name:"screenshot",position:"right",index:20})),R.setting&&this.add((0,A.default)({name:"setting",position:"right",index:30})),R.pip&&this.add((0,p.default)({name:"pip",position:"right",index:40})),R.airplay&&window.WebKitPlaybackTargetAvailabilityEvent&&this.add((0,P.default)({name:"airplay",position:"right",index:50})),R.fullscreenWeb&&this.add((0,f.default)({name:"fullscreenWeb",position:"right",index:60})),R.fullscreen&&this.add((0,c.default)({name:"fullscreen",position:"right",index:70}));for(let V=0;V<R.controls.length;V++)this.add(R.controls[V])}add(R){let V=typeof R=="function"?R(this.art):R,{$progress:D,$controlsLeft:M,$controlsRight:K}=this.art.template;switch(V.position){case"top":this.$parent=D;break;case"left":this.$parent=M;break;case"right":this.$parent=K;break;default:(0,U.errorHandle)(!1,"Control option.position must one of 'top', 'left', 'right'")}super.add(V)}check(R){R.$control_value.innerHTML=R.html;for(let V=0;V<R.$control_option.length;V++){let D=R.$control_option[V];D.default=D===R,D.default&&(0,U.inverseClass)(D.$control_item,"art-current")}}selector(R,V,D){let{proxy:M}=this.art.events;(0,U.addClass)(V,"art-control-selector");let K=(0,U.createElement)("div");(0,U.addClass)(K,"art-selector-value"),(0,U.append)(K,R.html),V.innerText="",(0,U.append)(V,K);let q=(0,U.createElement)("div");(0,U.addClass)(q,"art-selector-list"),(0,U.append)(V,q);for(let X=0;X<R.selector.length;X++){let te=R.selector[X],ue=(0,U.createElement)("div");(0,U.addClass)(ue,"art-selector-item"),te.default&&(0,U.addClass)(ue,"art-current"),ue.dataset.index=X,ue.dataset.value=te.value,ue.innerHTML=te.html,(0,U.append)(q,ue),(0,U.def)(te,"$control_option",{get:()=>R.selector}),(0,U.def)(te,"$control_item",{get:()=>ue}),(0,U.def)(te,"$control_value",{get:()=>K})}let ee=M(q,"click",async X=>{let te=X.composedPath()||[],ue=R.selector.find(he=>he.$control_item===te.find(Z=>he.$control_item===Z));this.check(ue),R.onSelect&&(K.innerHTML=await R.onSelect.call(this.art,ue,ue.$control_item,X))});D.push(ee)}}s.default=j},{"../utils/component":"18nVI","./fullscreen":"c61Lj","./fullscreenWeb":"03jeB","./pip":"u8l8e","./playAndPause":"ebXtb","./progress":"bgoVP","./time":"ikc2j","./volume":"b8NFx","./setting":"03o9l","./screenshot":"4KCF5","./airplay":"4IS2d","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"18nVI":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s);var a=n("./dom"),u=n("./error"),l=n("option-validator"),c=o.interopDefault(l),d=n("../scheme");s.default=class{constructor(f){this.id=0,this.art=f,this.cache=new Map,this.add=this.add.bind(this),this.remove=this.remove.bind(this),this.update=this.update.bind(this)}get show(){return(0,a.hasClass)(this.art.template.$player,`art-${this.name}-show`)}set show(f){let{$player:h}=this.art.template,p=`art-${this.name}-show`;f?(0,a.addClass)(h,p):(0,a.removeClass)(h,p),this.art.emit(this.name,f)}toggle(){this.show=!this.show}add(f){let h=typeof f=="function"?f(this.art):f;if(h.html=h.html||"",(0,c.default)(h,d.ComponentOption),!this.$parent||!this.name||h.disable)return;let p=h.name||`${this.name}${this.id}`,g=this.cache.get(p);(0,u.errorHandle)(!g,`Can't add an existing [${p}] to the [${this.name}]`),this.id+=1;let v=(0,a.createElement)("div");(0,a.addClass)(v,`art-${this.name}`),(0,a.addClass)(v,`art-${this.name}-${p}`);let y=Array.from(this.$parent.children);v.dataset.index=h.index||this.id;let w=y.find(S=>Number(S.dataset.index)>=Number(v.dataset.index));w?w.insertAdjacentElement("beforebegin",v):(0,a.append)(this.$parent,v),h.html&&(0,a.append)(v,h.html),h.style&&(0,a.setStyles)(v,h.style),h.tooltip&&(0,a.tooltip)(v,h.tooltip);let b=[];if(h.click){let S=this.art.events.proxy(v,"click",E=>{E.preventDefault(),h.click.call(this.art,this,E)});b.push(S)}return h.selector&&["left","right"].includes(h.position)&&this.selector(h,v,b),this[p]=v,this.cache.set(p,{$ref:v,events:b,option:h}),h.mounted&&h.mounted.call(this.art,v),v}remove(f){let h=this.cache.get(f);(0,u.errorHandle)(h,`Can't find [${f}] from the [${this.name}]`),h.option.beforeUnmount&&h.option.beforeUnmount.call(this.art,h.$ref);for(let p=0;p<h.events.length;p++)this.art.events.remove(h.events[p]);this.cache.delete(f),delete this[f],(0,a.remove)(h.$ref)}update(f){let h=this.cache.get(f.name);return h&&(f=Object.assign(h.option,f),this.remove(f.name)),this.add(f)}}},{"./dom":"bSNiV","./error":"hwmZz","option-validator":"bAWi2","../scheme":"AKEiO","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],c61Lj:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){return c=>({...l,tooltip:c.i18n.get("Fullscreen"),mounted:d=>{let{proxy:f,icons:h,i18n:p}=c,g=(0,a.append)(d,h.fullscreenOn),v=(0,a.append)(d,h.fullscreenOff);(0,a.setStyle)(v,"display","none"),f(d,"click",()=>{c.fullscreen=!c.fullscreen}),c.on("fullscreen",y=>{y?((0,a.tooltip)(d,p.get("Exit Fullscreen")),(0,a.setStyle)(g,"display","none"),(0,a.setStyle)(v,"display","inline-flex")):((0,a.tooltip)(d,p.get("Fullscreen")),(0,a.setStyle)(g,"display","inline-flex"),(0,a.setStyle)(v,"display","none"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"03jeB":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){return c=>({...l,tooltip:c.i18n.get("Web Fullscreen"),mounted:d=>{let{proxy:f,icons:h,i18n:p}=c,g=(0,a.append)(d,h.fullscreenWebOn),v=(0,a.append)(d,h.fullscreenWebOff);(0,a.setStyle)(v,"display","none"),f(d,"click",()=>{c.fullscreenWeb=!c.fullscreenWeb}),c.on("fullscreenWeb",y=>{y?((0,a.tooltip)(d,p.get("Exit Web Fullscreen")),(0,a.setStyle)(g,"display","none"),(0,a.setStyle)(v,"display","inline-flex")):((0,a.tooltip)(d,p.get("Web Fullscreen")),(0,a.setStyle)(g,"display","inline-flex"),(0,a.setStyle)(v,"display","none"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],u8l8e:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){return c=>({...l,tooltip:c.i18n.get("PIP Mode"),mounted:d=>{let{proxy:f,icons:h,i18n:p}=c;(0,a.append)(d,h.pip),f(d,"click",()=>{c.pip=!c.pip}),c.on("pip",g=>{(0,a.tooltip)(d,p.get(g?"Exit PIP Mode":"PIP Mode"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ebXtb:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){return c=>({...l,mounted:d=>{let{proxy:f,icons:h,i18n:p}=c,g=(0,a.append)(d,h.play),v=(0,a.append)(d,h.pause);function y(){(0,a.setStyle)(g,"display","flex"),(0,a.setStyle)(v,"display","none")}function w(){(0,a.setStyle)(g,"display","none"),(0,a.setStyle)(v,"display","flex")}(0,a.tooltip)(g,p.get("Play")),(0,a.tooltip)(v,p.get("Pause")),f(g,"click",()=>{c.play()}),f(v,"click",()=>{c.pause()}),c.playing?w():y(),c.on("video:playing",()=>{w()}),c.on("video:pause",()=>{y()})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],bgoVP:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"getPosFromEvent",()=>u),o.export(s,"setCurrentTime",()=>l),o.export(s,"default",()=>c);var a=n("../utils");function u(d,f){let{$progress:h}=d.template,{left:p}=(0,a.getRect)(h),g=a.isMobile?f.touches[0].clientX:f.clientX,v=(0,a.clamp)(g-p,0,h.clientWidth),y=v/h.clientWidth*d.duration,w=(0,a.secondToTime)(y),b=(0,a.clamp)(v/h.clientWidth,0,1);return{second:y,time:w,width:v,percentage:b}}function l(d,f){if(d.isRotate){let h=f.touches[0].clientY/d.height,p=h*d.duration;d.emit("setBar","played",h,f),d.seek=p}else{let{second:h,percentage:p}=u(d,f);d.emit("setBar","played",p,f),d.seek=h}}function c(d){return f=>{let{icons:h,option:p,proxy:g}=f;return{...d,html:'<div class="art-control-progress-inner"><div class="art-progress-hover"></div><div class="art-progress-loaded"></div><div class="art-progress-played"></div><div class="art-progress-highlight"></div><div class="art-progress-indicator"></div><div class="art-progress-tip"></div></div>',mounted:v=>{let y=null,w=!1,b=(0,a.query)(".art-progress-hover",v),S=(0,a.query)(".art-progress-loaded",v),E=(0,a.query)(".art-progress-played",v),x=(0,a.query)(".art-progress-highlight",v),k=(0,a.query)(".art-progress-indicator",v),A=(0,a.query)(".art-progress-tip",v);function C(_,O){let{width:P,time:U}=O||u(f,_);A.innerText=U;let j=A.clientWidth;P<=j/2?(0,a.setStyle)(A,"left",0):P>v.clientWidth-j/2?(0,a.setStyle)(A,"left",`${v.clientWidth-j}px`):(0,a.setStyle)(A,"left",`${P-j/2}px`)}h.indicator?(0,a.append)(k,h.indicator):(0,a.setStyle)(k,"backgroundColor","var(--art-theme)"),f.on("setBar",function(_,O,P){let U=_==="played"&&P&&a.isMobile;_==="loaded"&&(0,a.setStyle)(S,"width",`${100*O}%`),_==="hover"&&(0,a.setStyle)(b,"width",`${100*O}%`),_==="played"&&((0,a.setStyle)(E,"width",`${100*O}%`),(0,a.setStyle)(k,"left",`${100*O}%`)),U&&((0,a.setStyle)(A,"display","flex"),C(P,{width:v.clientWidth*O,time:(0,a.secondToTime)(O*f.duration)}),clearTimeout(y),y=setTimeout(()=>{(0,a.setStyle)(A,"display","none")},500))}),f.on("video:loadedmetadata",function(){x.innerText="";for(let _=0;_<p.highlight.length;_++){let O=p.highlight[_],P=(0,a.clamp)(O.time,0,f.duration)/f.duration*100,U=`<span data-text="${O.text}" data-time="${O.time}" style="left: ${P}%"></span>`;(0,a.append)(x,U)}}),f.on("video:progress",()=>{f.emit("setBar","loaded",f.loaded)}),f.constructor.USE_RAF?f.on("raf",()=>{f.emit("setBar","played",f.played)}):f.on("video:timeupdate",()=>{f.emit("setBar","played",f.played)}),f.on("video:ended",()=>{f.emit("setBar","played",1)}),f.emit("setBar","loaded",f.loaded||0),a.isMobile||(g(v,"click",_=>{_.target!==k&&l(f,_)}),g(v,"mousemove",_=>{let{percentage:O}=u(f,_);if(f.emit("setBar","hover",O,_),(0,a.setStyle)(A,"display","flex"),(0,a.includeFromEvent)(_,x)){let{width:P}=u(f,_),{text:U}=_.target.dataset;A.innerText=U;let j=A.clientWidth;P<=j/2?(0,a.setStyle)(A,"left",0):P>v.clientWidth-j/2?(0,a.setStyle)(A,"left",`${v.clientWidth-j}px`):(0,a.setStyle)(A,"left",`${P-j/2}px`)}else C(_)}),g(v,"mouseleave",_=>{(0,a.setStyle)(A,"display","none"),f.emit("setBar","hover",0,_)}),g(v,"mousedown",_=>{w=_.button===0}),f.on("document:mousemove",_=>{if(w){let{second:O,percentage:P}=u(f,_);f.emit("setBar","played",P,_),f.seek=O}}),f.on("document:mouseup",()=>{w&&(w=!1)}))}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ikc2j:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){return c=>({...l,style:a.isMobile?{fontSize:"12px",padding:"0 5px"}:{cursor:"auto",padding:"0 10px"},mounted:d=>{function f(){let p=`${(0,a.secondToTime)(c.currentTime)} / ${(0,a.secondToTime)(c.duration)}`;p!==d.innerText&&(d.innerText=p)}f();let h=["video:loadedmetadata","video:timeupdate","video:progress"];for(let p=0;p<h.length;p++)c.on(h[p],f)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],b8NFx:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){return c=>({...l,mounted:d=>{let{proxy:f,icons:h}=c,p=(0,a.append)(d,h.volume),g=(0,a.append)(d,h.volumeClose),v=(0,a.append)(d,'<div class="art-volume-panel"></div>'),y=(0,a.append)(v,'<div class="art-volume-inner"></div>'),w=(0,a.append)(y,'<div class="art-volume-val"></div>'),b=(0,a.append)(y,'<div class="art-volume-slider"></div>'),S=(0,a.append)(b,'<div class="art-volume-handle"></div>'),E=(0,a.append)(S,'<div class="art-volume-loaded"></div>'),x=(0,a.append)(b,'<div class="art-volume-indicator"></div>');function k(C){let{top:_,height:O}=(0,a.getRect)(b);return 1-(C.clientY-_)/O}function A(){if(c.muted||c.volume===0)(0,a.setStyle)(p,"display","none"),(0,a.setStyle)(g,"display","flex"),(0,a.setStyle)(x,"top","100%"),(0,a.setStyle)(E,"top","100%"),w.innerText=0;else{let C=100*c.volume;(0,a.setStyle)(p,"display","flex"),(0,a.setStyle)(g,"display","none"),(0,a.setStyle)(x,"top",`${100-C}%`),(0,a.setStyle)(E,"top",`${100-C}%`),w.innerText=Math.floor(C)}}if(A(),c.on("video:volumechange",A),f(p,"click",()=>{c.muted=!0}),f(g,"click",()=>{c.muted=!1}),a.isMobile)(0,a.setStyle)(v,"display","none");else{let C=!1;f(b,"mousedown",_=>{C=_.button===0,c.volume=k(_)}),c.on("document:mousemove",_=>{C&&(c.muted=!1,c.volume=k(_))}),c.on("document:mouseup",()=>{C&&(C=!1)})}}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"03o9l":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){return c=>({...l,tooltip:c.i18n.get("Show Setting"),mounted:d=>{let{proxy:f,icons:h,i18n:p}=c;(0,a.append)(d,h.setting),f(d,"click",()=>{c.setting.toggle(),c.setting.resize()}),c.on("setting",g=>{(0,a.tooltip)(d,p.get(g?"Hide Setting":"Show Setting"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4KCF5":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){return c=>({...l,tooltip:c.i18n.get("Screenshot"),mounted:d=>{let{proxy:f,icons:h}=c;(0,a.append)(d,h.screenshot),f(d,"click",()=>{c.screenshot()})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4IS2d":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){return c=>({...l,tooltip:c.i18n.get("AirPlay"),mounted:d=>{let{proxy:f,icons:h}=c;(0,a.append)(d,h.airplay),f(d,"click",()=>c.airplay())}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2KYsr":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s);var a=n("../utils"),u=n("../utils/component"),l=o.interopDefault(u),c=n("./playbackRate"),d=o.interopDefault(c),f=n("./aspectRatio"),h=o.interopDefault(f),p=n("./flip"),g=o.interopDefault(p),v=n("./info"),y=o.interopDefault(v),w=n("./version"),b=o.interopDefault(w),S=n("./close"),E=o.interopDefault(S);class x extends l.default{constructor(A){super(A),this.name="contextmenu",this.$parent=A.template.$contextmenu,a.isMobile||this.init()}init(){let{option:A,proxy:C,template:{$player:_,$contextmenu:O}}=this.art;A.playbackRate&&this.add((0,d.default)({name:"playbackRate",index:10})),A.aspectRatio&&this.add((0,h.default)({name:"aspectRatio",index:20})),A.flip&&this.add((0,g.default)({name:"flip",index:30})),this.add((0,y.default)({name:"info",index:40})),this.add((0,b.default)({name:"version",index:50})),this.add((0,E.default)({name:"close",index:60}));for(let P=0;P<A.contextmenu.length;P++)this.add(A.contextmenu[P]);C(_,"contextmenu",P=>{if(!this.art.constructor.CONTEXTMENU)return;P.preventDefault(),this.show=!0;let U=P.clientX,j=P.clientY,{height:N,width:R,left:V,top:D}=(0,a.getRect)(_),{height:M,width:K}=(0,a.getRect)(O),q=U-V,ee=j-D;U+K>V+R&&(q=R-K),j+M>D+N&&(ee=N-M),(0,a.setStyles)(O,{top:`${ee}px`,left:`${q}px`})}),C(_,"click",P=>{(0,a.includeFromEvent)(P,O)||(this.show=!1)}),this.art.on("blur",()=>{this.show=!1})}}s.default=x},{"../utils":"71aH7","../utils/component":"18nVI","./playbackRate":"69eLi","./aspectRatio":"lUefg","./flip":"kysiM","./info":"gqIgJ","./version":"kRU7C","./close":"jQ8Pm","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"69eLi":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){return c=>{let{i18n:d,constructor:{PLAYBACK_RATE:f}}=c,h=f.map(p=>`<span data-value="${p}">${p===1?d.get("Normal"):p.toFixed(1)}</span>`).join("");return{...l,html:`${d.get("Play Speed")}: ${h}`,click:(p,g)=>{let{value:v}=g.target.dataset;v&&(c.playbackRate=Number(v),p.show=!1)},mounted:p=>{let g=(0,a.query)('[data-value="1"]',p);g&&(0,a.inverseClass)(g,"art-current"),c.on("video:ratechange",()=>{let v=(0,a.queryAll)("span",p).find(y=>Number(y.dataset.value)===c.playbackRate);v&&(0,a.inverseClass)(v,"art-current")})}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],lUefg:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){return c=>{let{i18n:d,constructor:{ASPECT_RATIO:f}}=c,h=f.map(p=>`<span data-value="${p}">${p==="default"?d.get("Default"):p}</span>`).join("");return{...l,html:`${d.get("Aspect Ratio")}: ${h}`,click:(p,g)=>{let{value:v}=g.target.dataset;v&&(c.aspectRatio=v,p.show=!1)},mounted:p=>{let g=(0,a.query)('[data-value="default"]',p);g&&(0,a.inverseClass)(g,"art-current"),c.on("aspectRatio",v=>{let y=(0,a.queryAll)("span",p).find(w=>w.dataset.value===v);y&&(0,a.inverseClass)(y,"art-current")})}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kysiM:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){return c=>{let{i18n:d,constructor:{FLIP:f}}=c,h=f.map(p=>`<span data-value="${p}">${d.get((0,a.capitalize)(p))}</span>`).join("");return{...l,html:`${d.get("Video Flip")}: ${h}`,click:(p,g)=>{let{value:v}=g.target.dataset;v&&(c.flip=v.toLowerCase(),p.show=!1)},mounted:p=>{let g=(0,a.query)('[data-value="normal"]',p);g&&(0,a.inverseClass)(g,"art-current"),c.on("flip",v=>{let y=(0,a.queryAll)("span",p).find(w=>w.dataset.value===v);y&&(0,a.inverseClass)(y,"art-current")})}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gqIgJ:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(u){return l=>({...u,html:l.i18n.get("Video Info"),click:c=>{l.info.show=!0,c.show=!1}})}o.defineInteropFlag(s),o.export(s,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kRU7C:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(u){return{...u,html:'<a href="https://artplayer.org" target="_blank">ArtPlayer 5.2.3</a>'}}o.defineInteropFlag(s),o.export(s,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jQ8Pm:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(u){return l=>({...u,html:l.i18n.get("Close"),click:c=>{c.show=!1}})}o.defineInteropFlag(s),o.export(s,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"02ajl":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s);var a=n("./utils"),u=n("./utils/component"),l=o.interopDefault(u);class c extends l.default{constructor(f){super(f),this.name="info",a.isMobile||this.init()}init(){let{proxy:f,constructor:h,template:{$infoPanel:p,$infoClose:g,$video:v}}=this.art;f(g,"click",()=>{this.show=!1});let y=null,w=(0,a.queryAll)("[data-video]",p)||[];this.art.on("destroy",()=>clearTimeout(y)),function b(){for(let S=0;S<w.length;S++){let E=w[S],x=v[E.dataset.video],k=typeof x=="number"?x.toFixed(2):x;E.innerText!==k&&(E.innerText=k)}y=setTimeout(b,h.INFO_LOOP_TIME)}()}}s.default=c},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eSWto:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s);var a=n("./utils"),u=n("./utils/component"),l=o.interopDefault(u),c=n("option-validator"),d=o.interopDefault(c),f=n("./scheme"),h=o.interopDefault(f);class p extends l.default{constructor(v){super(v),this.name="subtitle",this.option=null,this.destroyEvent=()=>null,this.init(v.option.subtitle);let y=!1;v.on("video:timeupdate",()=>{if(!this.url)return;let w=this.art.template.$video.webkitDisplayingFullscreen;typeof w=="boolean"&&w!==y&&(y=w,this.createTrack(w?"subtitles":"metadata",this.url))})}get url(){return this.art.template.$track.src}set url(v){this.switch(v)}get textTrack(){var v,y;return(y=(v=this.art.template.$video)==null?void 0:v.textTracks)==null?void 0:y[0]}get activeCues(){return this.textTrack?Array.from(this.textTrack.activeCues):[]}get cues(){return this.textTrack?Array.from(this.textTrack.cues):[]}style(v,y){let{$subtitle:w}=this.art.template;return typeof v=="object"?(0,a.setStyles)(w,v):(0,a.setStyle)(w,v,y)}update(){let{option:{subtitle:v},template:{$subtitle:y}}=this.art;y.innerHTML="",this.activeCues.length&&(this.art.emit("subtitleBeforeUpdate",this.activeCues),y.innerHTML=this.activeCues.map((w,b)=>w.text.split(/\r?\n/).filter(S=>S.trim()).map(S=>`<div class="art-subtitle-line" data-group="${b}">${v.escape?(0,a.escape)(S):S}</div>`).join("")).join(""),this.art.emit("subtitleAfterUpdate",this.activeCues))}async switch(v,y={}){let{i18n:w,notice:b,option:S}=this.art,E={...S.subtitle,...y,url:v},x=await this.init(E);return y.name&&(b.show=`${w.get("Switch Subtitle")}: ${y.name}`),x}createTrack(v,y){let{template:w,proxy:b,option:S}=this.art,{$video:E,$track:x}=w,k=(0,a.createElement)("track");k.default=!0,k.kind=v,k.src=y,k.label=S.subtitle.name||"Artplayer",k.track.mode="hidden",k.onload=()=>{this.art.emit("subtitleLoad",this.cues,this.option)},this.art.events.remove(this.destroyEvent),x.onload=null,(0,a.remove)(x),(0,a.append)(E,k),w.$track=k,this.destroyEvent=b(this.textTrack,"cuechange",()=>this.update())}async init(v){let{notice:y,template:{$subtitle:w}}=this.art;return this.textTrack?((0,d.default)(v,h.default.subtitle),v.url?(this.option=v,this.style(v.style),fetch(v.url).then(b=>b.arrayBuffer()).then(b=>{let S=new TextDecoder(v.encoding).decode(b);switch(v.type||(0,a.getExt)(v.url)){case"srt":{let E=(0,a.srtToVtt)(S),x=v.onVttLoad(E);return(0,a.vttToBlob)(x)}case"ass":{let E=(0,a.assToVtt)(S),x=v.onVttLoad(E);return(0,a.vttToBlob)(x)}case"vtt":{let E=v.onVttLoad(S);return(0,a.vttToBlob)(E)}default:return v.url}}).then(b=>(w.innerHTML="",this.url===b||(URL.revokeObjectURL(this.url),this.createTrack("metadata",b)),b)).catch(b=>{throw w.innerHTML="",y.show=b,b})):void 0):null}}s.default=p},{"./utils":"71aH7","./utils/component":"18nVI","option-validator":"bAWi2","./scheme":"AKEiO","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jo4S1:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s);var a=n("./clickInit"),u=o.interopDefault(a),l=n("./hoverInit"),c=o.interopDefault(l),d=n("./moveInit"),f=o.interopDefault(d),h=n("./resizeInit"),p=o.interopDefault(h),g=n("./gestureInit"),v=o.interopDefault(g),y=n("./viewInit"),w=o.interopDefault(y),b=n("./documentInit"),S=o.interopDefault(b),E=n("./updateInit"),x=o.interopDefault(E),k=n("./restoreInit"),A=o.interopDefault(k);s.default=class{constructor(C){this.destroyEvents=[],this.proxy=this.proxy.bind(this),this.hover=this.hover.bind(this),(0,u.default)(C,this),(0,c.default)(C,this),(0,f.default)(C,this),(0,p.default)(C,this),(0,v.default)(C,this),(0,w.default)(C,this),(0,S.default)(C,this),(0,x.default)(C,this),(0,A.default)(C,this)}proxy(C,_,O,P={}){if(Array.isArray(_))return _.map(j=>this.proxy(C,j,O,P));C.addEventListener(_,O,P);let U=()=>C.removeEventListener(_,O,P);return this.destroyEvents.push(U),U}hover(C,_,O){_&&this.proxy(C,"mouseenter",_),O&&this.proxy(C,"mouseleave",O)}remove(C){let _=this.destroyEvents.indexOf(C);_>-1&&(C(),this.destroyEvents.splice(_,1))}destroy(){for(let C=0;C<this.destroyEvents.length;C++)this.destroyEvents[C]()}}},{"./clickInit":"6UrCm","./hoverInit":"4jWHi","./moveInit":"eqaUm","./resizeInit":"eDXPO","./gestureInit":"95GtS","./viewInit":"InUBx","./documentInit":"hoLfM","./updateInit":"cl8m3","./restoreInit":"bK8As","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6UrCm":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l,c){let{constructor:d,template:{$player:f,$video:h}}=l;c.proxy(document,["click","contextmenu"],g=>{(0,a.includeFromEvent)(g,f)?(l.isInput=g.target.tagName==="INPUT",l.isFocus=!0,l.emit("focus",g)):(l.isInput=!1,l.isFocus=!1,l.emit("blur",g))});let p=[];c.proxy(h,"click",g=>{let v=Date.now();p.push(v);let{MOBILE_CLICK_PLAY:y,DBCLICK_TIME:w,MOBILE_DBCLICK_PLAY:b,DBCLICK_FULLSCREEN:S}=d,E=p.filter(x=>v-x<=w);switch(E.length){case 1:l.emit("click",g),a.isMobile?!l.isLock&&y&&l.toggle():l.toggle(),p=E;break;case 2:l.emit("dblclick",g),a.isMobile?!l.isLock&&b&&l.toggle():S&&(l.fullscreen=!l.fullscreen),p=[];break;default:p=[]}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4jWHi":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l,c){let{$player:d}=l.template;c.hover(d,f=>{(0,a.addClass)(d,"art-hover"),l.emit("hover",!0,f)},f=>{(0,a.removeClass)(d,"art-hover"),l.emit("hover",!1,f)})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eqaUm:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(u,l){let{$player:c}=u.template;l.proxy(c,"mousemove",d=>{u.emit("mousemove",d)})}o.defineInteropFlag(s),o.export(s,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eDXPO:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l,c){let{option:d,constructor:f}=l;l.on("resize",()=>{let{aspectRatio:p,notice:g}=l;l.state==="standard"&&d.autoSize&&l.autoSize(),l.aspectRatio=p,g.show=""});let h=(0,a.debounce)(()=>l.emit("resize"),f.RESIZE_TIME);c.proxy(window,["orientationchange","resize"],()=>h()),screen&&screen.orientation&&screen.orientation.onchange&&c.proxy(screen.orientation,"change",()=>h())}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"95GtS":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>l);var a=n("../utils"),u=n("../control/progress");function l(c,d){if(a.isMobile&&!c.option.isLive){let{$video:f,$progress:h}=c.template,p=null,g=!1,v=0,y=0,w=0,b=E=>{if(E.touches.length===1&&!c.isLock){p===h&&(0,u.setCurrentTime)(c,E),g=!0;let{pageX:x,pageY:k}=E.touches[0];v=x,y=k,w=c.currentTime}},S=E=>{if(E.touches.length===1&&g&&c.duration){let{pageX:x,pageY:k}=E.touches[0],A=function(O,P,U,j){var N=P-j,R=U-O,V=0;if(2>Math.abs(R)&&2>Math.abs(N))return V;var D=180*Math.atan2(N,R)/Math.PI;return D>=-45&&D<45?V=4:D>=45&&D<135?V=1:D>=-135&&D<-45?V=2:(D>=135&&D<=180||D>=-180&&D<-135)&&(V=3),V}(v,y,x,k),C=[3,4].includes(A),_=[1,2].includes(A);if(C&&!c.isRotate||_&&c.isRotate){let O=(0,a.clamp)((x-v)/c.width,-1,1),P=(0,a.clamp)((k-y)/c.height,-1,1),U=c.isRotate?P:O,j=p===f?c.constructor.TOUCH_MOVE_RATIO:1,N=(0,a.clamp)(w+c.duration*U*j,0,c.duration);c.seek=N,c.emit("setBar","played",(0,a.clamp)(N/c.duration,0,1),E),c.notice.show=`${(0,a.secondToTime)(N)} / ${(0,a.secondToTime)(c.duration)}`}}};c.option.gesture&&(d.proxy(f,"touchstart",E=>{p=f,b(E)}),d.proxy(f,"touchmove",S)),d.proxy(h,"touchstart",E=>{p=h,b(E)}),d.proxy(h,"touchmove",S),d.proxy(document,"touchend",()=>{g&&(v=0,y=0,w=0,g=!1,p=null)})}}},{"../utils":"71aH7","../control/progress":"bgoVP","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],InUBx:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l,c){let{option:d,constructor:f,template:{$container:h}}=l,p=(0,a.throttle)(()=>{l.emit("view",(0,a.isInViewport)(h,f.SCROLL_GAP))},f.SCROLL_TIME);c.proxy(window,"scroll",()=>p()),l.on("view",g=>{d.autoMini&&(l.mini=!g)})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hoLfM:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(u,l){l.proxy(document,"mousemove",c=>{u.emit("document:mousemove",c)}),l.proxy(document,"mouseup",c=>{u.emit("document:mouseup",c)})}o.defineInteropFlag(s),o.export(s,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],cl8m3:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(u){if(u.constructor.USE_RAF){let l=null;(function c(){u.playing&&u.emit("raf"),u.isDestroy||(l=requestAnimationFrame(c))})(),u.on("destroy",()=>{cancelAnimationFrame(l)})}}o.defineInteropFlag(s),o.export(s,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],bK8As:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(u,l){}o.defineInteropFlag(s),o.export(s,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6NoFy":[function(n,r,s,i){n("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(s);var o=n("./utils");s.default=class{constructor(a){this.art=a,this.keys={},a.option.hotkey&&!o.isMobile&&this.init()}init(){let{proxy:a,constructor:u}=this.art;this.add("Escape",()=>{this.art.fullscreenWeb&&(this.art.fullscreenWeb=!1)}),this.add("Space",()=>{this.art.toggle()}),this.add("ArrowLeft",()=>{this.art.backward=u.SEEK_STEP}),this.add("ArrowUp",()=>{this.art.volume+=u.VOLUME_STEP}),this.add("ArrowRight",()=>{this.art.forward=u.SEEK_STEP}),this.add("ArrowDown",()=>{this.art.volume-=u.VOLUME_STEP}),a(document,"keydown",l=>{if(this.art.isFocus){let c=document.activeElement.tagName.toUpperCase(),d=document.activeElement.getAttribute("contenteditable");if(c!=="INPUT"&&c!=="TEXTAREA"&&d!==""&&d!=="true"&&!l.altKey&&!l.ctrlKey&&!l.metaKey&&!l.shiftKey){let f=this.keys[l.code];if(f){l.preventDefault();for(let h=0;h<f.length;h++)f[h].call(this.art,l);this.art.emit("hotkey",l)}}}this.art.emit("keydown",l)})}add(a,u){return this.keys[a]?this.keys[a].push(u):this.keys[a]=[u],this}remove(a,u){if(this.keys[a]){let l=this.keys[a].indexOf(u);l!==-1&&this.keys[a].splice(l,1)}return this}}},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6G6hZ":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s);var a=n("./utils/component"),u=o.interopDefault(a);class l extends u.default{constructor(d){super(d);let{option:f,template:{$layer:h}}=d;this.name="layer",this.$parent=h;for(let p=0;p<f.layers.length;p++)this.add(f.layers[p])}}s.default=l},{"./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3dsEe":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s);var a=n("./utils"),u=n("./utils/component"),l=o.interopDefault(u);class c extends l.default{constructor(f){super(f),this.name="loading",(0,a.append)(f.template.$loading,f.icons.loading)}}s.default=c},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],dWGTw:[function(n,r,s,i){n("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(s);var o=n("./utils");s.default=class{constructor(a){this.art=a,this.timer=null}set show(a){let{constructor:u,template:{$player:l,$noticeInner:c}}=this.art;a?(c.innerText=a instanceof Error?a.message.trim():a,(0,o.addClass)(l,"art-notice-show"),clearTimeout(this.timer),this.timer=setTimeout(()=>{c.innerText="",(0,o.removeClass)(l,"art-notice-show")},u.NOTICE_TIME)):(0,o.removeClass)(l,"art-notice-show")}}},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5POkG":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s);var a=n("./utils"),u=n("./utils/component"),l=o.interopDefault(u);class c extends l.default{constructor(f){super(f),this.name="mask";let{template:h,icons:p,events:g}=f,v=(0,a.append)(h.$state,p.state),y=(0,a.append)(h.$state,p.error);(0,a.setStyle)(y,"display","none"),f.on("destroy",()=>{(0,a.setStyle)(v,"display","none"),(0,a.setStyle)(y,"display",null)}),g.proxy(h.$state,"click",()=>f.play())}}s.default=c},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6OeNg":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s);var a=n("../utils"),u=n("bundle-text:./loading.svg"),l=o.interopDefault(u),c=n("bundle-text:./state.svg"),d=o.interopDefault(c),f=n("bundle-text:./check.svg"),h=o.interopDefault(f),p=n("bundle-text:./play.svg"),g=o.interopDefault(p),v=n("bundle-text:./pause.svg"),y=o.interopDefault(v),w=n("bundle-text:./volume.svg"),b=o.interopDefault(w),S=n("bundle-text:./volume-close.svg"),E=o.interopDefault(S),x=n("bundle-text:./screenshot.svg"),k=o.interopDefault(x),A=n("bundle-text:./setting.svg"),C=o.interopDefault(A),_=n("bundle-text:./arrow-left.svg"),O=o.interopDefault(_),P=n("bundle-text:./arrow-right.svg"),U=o.interopDefault(P),j=n("bundle-text:./playback-rate.svg"),N=o.interopDefault(j),R=n("bundle-text:./aspect-ratio.svg"),V=o.interopDefault(R),D=n("bundle-text:./config.svg"),M=o.interopDefault(D),K=n("bundle-text:./pip.svg"),q=o.interopDefault(K),ee=n("bundle-text:./lock.svg"),X=o.interopDefault(ee),te=n("bundle-text:./unlock.svg"),ue=o.interopDefault(te),he=n("bundle-text:./fullscreen-off.svg"),Z=o.interopDefault(he),ce=n("bundle-text:./fullscreen-on.svg"),ae=o.interopDefault(ce),Te=n("bundle-text:./fullscreen-web-off.svg"),Ce=o.interopDefault(Te),z=n("bundle-text:./fullscreen-web-on.svg"),re=o.interopDefault(z),ve=n("bundle-text:./switch-on.svg"),ke=o.interopDefault(ve),Ee=n("bundle-text:./switch-off.svg"),be=o.interopDefault(Ee),Se=n("bundle-text:./flip.svg"),_e=o.interopDefault(Se),Ne=n("bundle-text:./error.svg"),Me=o.interopDefault(Ne),st=n("bundle-text:./close.svg"),qe=o.interopDefault(st),Ae=n("bundle-text:./airplay.svg"),et=o.interopDefault(Ae);s.default=class{constructor(St){let Lt={loading:l.default,state:d.default,play:g.default,pause:y.default,check:h.default,volume:b.default,volumeClose:E.default,screenshot:k.default,setting:C.default,pip:q.default,arrowLeft:O.default,arrowRight:U.default,playbackRate:N.default,aspectRatio:V.default,config:M.default,lock:X.default,flip:_e.default,unlock:ue.default,fullscreenOff:Z.default,fullscreenOn:ae.default,fullscreenWebOff:Ce.default,fullscreenWebOn:re.default,switchOn:ke.default,switchOff:be.default,error:Me.default,close:qe.default,airplay:et.default,...St.option.icons};for(let Pt in Lt)(0,a.def)(this,Pt,{get:()=>(0,a.getIcon)(Pt,Lt[Pt])})}}},{"../utils":"71aH7","bundle-text:./loading.svg":"7tDub","bundle-text:./state.svg":"1ElZc","bundle-text:./check.svg":"lmgoP","bundle-text:./play.svg":"lVWoQ","bundle-text:./pause.svg":"5Mnax","bundle-text:./volume.svg":"w3eIa","bundle-text:./volume-close.svg":"rHjo1","bundle-text:./screenshot.svg":"2KcqM","bundle-text:./setting.svg":"8rQMV","bundle-text:./arrow-left.svg":"kqGBE","bundle-text:./arrow-right.svg":"aFjpC","bundle-text:./playback-rate.svg":"lx7ZM","bundle-text:./aspect-ratio.svg":"2sEjf","bundle-text:./config.svg":"fQTgE","bundle-text:./pip.svg":"2CaxO","bundle-text:./lock.svg":"aCGnW","bundle-text:./unlock.svg":"bTrAV","bundle-text:./fullscreen-off.svg":"bA3p0","bundle-text:./fullscreen-on.svg":"fTuY8","bundle-text:./fullscreen-web-off.svg":"tvKf4","bundle-text:./fullscreen-web-on.svg":"1F1oB","bundle-text:./switch-on.svg":"7qNHs","bundle-text:./switch-off.svg":"28aV8","bundle-text:./flip.svg":"1uXI6","bundle-text:./error.svg":"9f4dh","bundle-text:./close.svg":"4nTtS","bundle-text:./airplay.svg":"cDPXC","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7tDub":[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" class="uil-default" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100"><path fill="none" d="M0 0h100v100H0z" class="bk"/><rect width="6" height="20" x="47" y="40" fill="#fff" rx="5" ry="5" transform="translate(0 -30)"><animate attributeName="opacity" begin="-1s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" fill="#fff" rx="5" ry="5" transform="rotate(30 105.98 65)"><animate attributeName="opacity" begin="-0.9166666666666666s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" fill="#fff" rx="5" ry="5" transform="rotate(60 75.98 65)"><animate attributeName="opacity" begin="-0.8333333333333334s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" fill="#fff" rx="5" ry="5" transform="rotate(90 65 65)"><animate attributeName="opacity" begin="-0.75s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" fill="#fff" rx="5" ry="5" transform="rotate(120 58.66 65)"><animate attributeName="opacity" begin="-0.6666666666666666s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" fill="#fff" rx="5" ry="5" transform="rotate(150 54.02 65)"><animate attributeName="opacity" begin="-0.5833333333333334s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" fill="#fff" rx="5" ry="5" transform="rotate(180 50 65)"><animate attributeName="opacity" begin="-0.5s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" fill="#fff" rx="5" ry="5" transform="rotate(-150 45.98 65)"><animate attributeName="opacity" begin="-0.4166666666666667s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" fill="#fff" rx="5" ry="5" transform="rotate(-120 41.34 65)"><animate attributeName="opacity" begin="-0.3333333333333333s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" fill="#fff" rx="5" ry="5" transform="rotate(-90 35 65)"><animate attributeName="opacity" begin="-0.25s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" fill="#fff" rx="5" ry="5" transform="rotate(-60 24.02 65)"><animate attributeName="opacity" begin="-0.16666666666666666s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" fill="#fff" rx="5" ry="5" transform="rotate(-30 -5.98 65)"><animate attributeName="opacity" begin="-0.08333333333333333s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect></svg>'},{}],"1ElZc":[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24"><path fill="#fff" d="M9.5 9.325v5.35q0 .575.525.875t1.025-.05l4.15-2.65q.475-.3.475-.85t-.475-.85L11.05 8.5q-.5-.35-1.025-.05t-.525.875M12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12t.788-3.9 2.137-3.175q1.35-1.35 3.175-2.137T12 2t3.9.788 3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22"/></svg>'},{}],lmgoP:[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%" viewBox="0 0 24 24"><path fill="#fff" d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg>'},{}],lVWoQ:[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><path d="M17.982 9.275 8.06 3.27A2.013 2.013 0 0 0 5 4.994v12.011a2.017 2.017 0 0 0 3.06 1.725l9.922-6.005a2.017 2.017 0 0 0 0-3.45"/></svg>'},{}],"5Mnax":[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><path d="M7 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2m8 0a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2"/></svg>'},{}],w3eIa:[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><path d="M10.188 4.65 6 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39V5.04a.498.498 0 0 0-.812-.39m4.258-.872a1 1 0 0 0-.862 1.804 6.002 6.002 0 0 1-.007 10.838 1 1 0 0 0 .86 1.806A8 8 0 0 0 19 11a8 8 0 0 0-4.554-7.222"/><path d="M15 11a4 4 0 0 0-2-3.465v6.93A4 4 0 0 0 15 11"/></svg>'},{}],rHjo1:[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><path d="M15 11a4 4 0 0 0-2-3.465v2.636l1.865 1.865A4 4 0 0 0 15 11"/><path d="M13.583 5.583A6 6 0 0 1 17 11a6 6 0 0 1-.585 2.587l1.477 1.477a8 8 0 0 0-3.446-11.286 1 1 0 0 0-.863 1.805m5.195 13.195-2.121-2.121-1.414-1.414-1.415-1.415L13 13l-2-2-3.889-3.889-3.889-3.889a.999.999 0 1 0-1.414 1.414L5.172 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39v-3.131l2.587 2.587-.01.005a1 1 0 0 0 .86 1.806q.322-.154.627-.333l2.3 2.3a1.001 1.001 0 0 0 1.414-1.416M11 5.04a.5.5 0 0 0-.813-.39L8.682 5.854 11 8.172z"/></svg>'},{}],"2KcqM":[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 50 50"><path d="M19.402 6a5 5 0 0 0-4.902 4.012L14.098 12H9a5 5 0 0 0-5 5v21a5 5 0 0 0 5 5h32a5 5 0 0 0 5-5V17a5 5 0 0 0-5-5h-5.098l-.402-1.988A5 5 0 0 0 30.598 6ZM25 17c5.52 0 10 4.48 10 10s-4.48 10-10 10-10-4.48-10-10 4.48-10 10-10m0 2c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8"/></svg>'},{}],"8rQMV":[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><circle cx="11" cy="11" r="2"/><path d="M19.164 8.861 17.6 8.6a7 7 0 0 0-1.186-2.099l.574-1.533a1 1 0 0 0-.436-1.217l-1.997-1.153a1 1 0 0 0-1.272.23l-1.008 1.225a7 7 0 0 0-2.55.001L8.716 2.829a1 1 0 0 0-1.272-.23L5.447 3.751a1 1 0 0 0-.436 1.217l.574 1.533A7 7 0 0 0 4.4 8.6l-1.564.261A1 1 0 0 0 2 9.847v2.306c0 .489.353.906.836.986l1.613.269a7 7 0 0 0 1.228 2.075l-.558 1.487a1 1 0 0 0 .436 1.217l1.997 1.153c.423.244.961.147 1.272-.23l1.04-1.263a7.1 7.1 0 0 0 2.272 0l1.04 1.263a1 1 0 0 0 1.272.23l1.997-1.153a1 1 0 0 0 .436-1.217l-.557-1.487c.521-.61.94-1.31 1.228-2.075l1.613-.269a1 1 0 0 0 .835-.986V9.847a1 1 0 0 0-.836-.986M11 15a4 4 0 1 1 0-8 4 4 0 0 1 0 8"/></svg>'},{}],kqGBE:[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#fff" d="m19.41 20.09-4.58-4.59 4.58-4.59L18 9.5l-6 6 6 6z"/></svg>'},{}],aFjpC:[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#fff" d="m12.59 20.34 4.58-4.59-4.58-4.59L14 9.75l6 6-6 6z"/></svg>'},{}],lx7ZM:[function(n,r,s,i){r.exports='<svg width="24" height="24" viewBox="0 0 24 24"><path fill="#fff" d="M10 8v8l6-4zM6.3 5l-.6-.8C7.2 3 9 2.2 11 2l.1 1c-1.8.2-3.4.9-4.8 2M5 6.3l-.8-.6C3 7.2 2.2 9 2 11l1 .1c.2-1.8.9-3.4 2-4.8m0 11.4c-1.1-1.4-1.8-3.1-2-4.8L2 13c.2 2 1 3.8 2.2 5.4zm6.1 3.3c-1.8-.2-3.4-.9-4.8-2l-.6.8C7.2 21 9 21.8 11 22zM22 12c0-5.2-3.9-9.4-9-10l-.1 1c4.6.5 8.1 4.3 8.1 9s-3.5 8.5-8.1 9l.1 1c5.2-.5 9-4.8 9-10" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],"2sEjf":[function(n,r,s,i){r.exports=`<svg xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%;transform:translate(0,0)" viewBox="0 0 88 88"><defs><clipPath id="a"><path d="M0 0h88v88H0z"/></clipPath></defs><g clip-path="url('#a')" style="display:block"><path fill="#FFF" d="m12.438-12.702-2.82 2.82c-.79.79-.79 2.05 0 2.83l7.07 7.07-7.07 7.07c-.79.79-.79 2.05 0 2.83l2.82 2.83c.79.78 2.05.78 2.83 0l11.32-11.31c.78-.78.78-2.05 0-2.83l-11.32-11.31c-.78-.79-2.04-.79-2.83 0m-24.88 0c-.74-.74-1.92-.78-2.7-.12l-.13.12-11.31 11.31a2 2 0 0 0-.12 2.7l.12.13 11.31 11.31a2 2 0 0 0 2.7.12l.13-.12 2.83-2.83c.74-.74.78-1.91.11-2.7l-.11-.13-7.07-7.07 7.07-7.07c.74-.74.78-1.91.11-2.7l-.11-.13zM28-28c4.42 0 8 3.58 8 8v40c0 4.42-3.58 8-8 8h-56c-4.42 0-8-3.58-8-8v-40c0-4.42 3.58-8 8-8z" style="--darkreader-inline-fill:#a8a6a4" transform="translate(44 44)"/></g></svg>`},{}],fQTgE:[function(n,r,s,i){r.exports='<svg width="24" height="24" viewBox="0 0 24 24"><path fill="#fff" d="M15 17h6v1h-6zm-4 0H3v1h8v2h1v-5h-1zm3-9h1V3h-1v2H3v1h11zm4-3v1h3V5zM6 14h1V9H6v2H3v1h3zm4-2h11v-1H10z" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],"2CaxO":[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 36 36"><path d="M25 17h-8v6h8zm4 8V10.98C29 9.88 28.1 9 27 9H9c-1.1 0-2 .88-2 1.98V25c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2m-2 .02H9V10.97h18z"/></svg>'},{}],aCGnW:[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="icon" viewBox="0 0 1024 1024"><path fill="#fff" d="M298.667 426.667v-85.334a213.333 213.333 0 1 1 426.666 0v85.334H768A85.333 85.333 0 0 1 853.333 512v256A85.333 85.333 0 0 1 768 853.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667zM512 213.333a128 128 0 0 0-128 128v85.334h256v-85.334a128 128 0 0 0-128-128"/></svg>'},{}],bTrAV:[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="icon" viewBox="0 0 1024 1024"><path fill="#fff" d="m666.752 194.517-49.365 74.112A128 128 0 0 0 384 341.333l.043 85.334h384A85.333 85.333 0 0 1 853.376 512v256a85.333 85.333 0 0 1-85.333 85.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667h42.667v-85.334a213.333 213.333 0 0 1 368.085-146.816"/></svg>'},{}],bA3p0:[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="icon" viewBox="0 0 1024 1024"><path fill="#fff" d="M768 298.667h170.667V384h-256V128H768zM341.333 384h-256v-85.333H256V128h85.333zM768 725.333V896h-85.333V640h256v85.333zM341.333 640v256H256V725.333H85.333V640z"/></svg>'},{}],fTuY8:[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="icon" viewBox="0 0 1024 1024"><path fill="#fff" d="M625.778 256H768v142.222h113.778v-256h-256zM256 398.222V256h142.222V142.222h-256v256zm512 227.556V768H625.778v113.778h256v-256zM398.222 768H256V625.778H142.222v256h256z"/></svg>'},{}],tvKf4:[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" class="icon" viewBox="0 0 1152 1024"><path fill="#fff" d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0M1024 128v768H128V128zM896 512a64 64 0 0 1 7.488 127.552L896 640H768v128a64 64 0 0 1-56.512 63.552L704 832a64 64 0 0 1-63.552-56.512L640 768V582.592c0-34.496 25.024-66.112 61.632-70.208l8-.384zm-640 0a64 64 0 0 1-7.488-127.552L256 384h128V256a64 64 0 0 1 56.512-63.552L448 192a64 64 0 0 1 63.552 56.512L512 256v185.408c0 34.432-25.024 66.112-61.632 70.144l-8 .448z"/></svg>'},{}],"1F1oB":[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" class="icon" viewBox="0 0 1152 1024"><path fill="#fff" d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0M1024 128v768H128V128zm-576 64a64 64 0 0 1 7.488 127.552L448 320H320v128a64 64 0 0 1-56.512 63.552L256 512a64 64 0 0 1-63.552-56.512L192 448V262.592c0-34.432 25.024-66.112 61.632-70.144l8-.448zm256 640a64 64 0 0 1-7.488-127.552L704 704h128V576a64 64 0 0 1 56.512-63.552L896 512a64 64 0 0 1 63.552 56.512L960 576v185.408c0 34.496-25.024 66.112-61.632 70.208l-8 .384z"/></svg>'},{}],"7qNHs":[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" class="icon" viewBox="0 0 1664 1024"><path fill="#648FFC" d="M1152 0H512a512 512 0 0 0 0 1024h640a512 512 0 0 0 0-1024m0 960a448 448 0 1 1 448-448 448 448 0 0 1-448 448"/></svg>'},{}],"28aV8":[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" class="icon" viewBox="0 0 1740 1024"><path fill="#fff" d="M511.898 1024h670.515c282.419-.41 511.18-229.478 511.18-511.898 0-282.419-228.761-511.488-511.18-511.897H511.898C229.478.615.717 229.683.717 512.102c0 282.42 228.761 511.488 511.18 511.898m-.564-975.36A464.589 464.589 0 1 1 48.026 513.024 463.87 463.87 0 0 1 511.334 48.435z"/></svg>'},{}],"1uXI6":[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="icon" viewBox="0 0 1024 1024"><path fill="#fff" d="M554.667 810.667V896h-85.334v-85.333zm-384-632.662a42.67 42.67 0 0 1 34.986 18.219l203.904 291.328a42.67 42.67 0 0 1 0 48.896L205.611 827.776A42.667 42.667 0 0 1 128 803.328V220.672a42.667 42.667 0 0 1 42.667-42.667m682.666 0a42.667 42.667 0 0 1 42.368 37.718l.299 4.949v582.656a42.667 42.667 0 0 1-74.24 28.63l-3.413-4.182-203.904-291.328a42.67 42.67 0 0 1-3.03-43.861l3.03-5.035 203.946-291.328a42.67 42.67 0 0 1 34.944-18.219M554.667 640v85.333h-85.334V640zm-358.4-320.896V716.8L335.957 512 196.31 319.104zm358.4 150.23v85.333h-85.334v-85.334zm0-170.667V384h-85.334v-85.333zm0-170.667v85.333h-85.334V128z"/></svg>'},{}],"9f4dh":[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024"><path d="M593.818 168.55 949.82 763.76c26.153 43.746 10.732 99.738-34.447 125.052-14.397 8.069-30.72 12.308-47.37 12.308H155.976c-52.224 0-94.536-40.96-94.536-91.505 0-16.097 4.383-31.928 12.718-45.875l356.004-595.19c26.173-43.724 84.009-58.654 129.208-33.341a93.1 93.1 0 0 1 34.448 33.341M512 819.2a61.44 61.44 0 1 0 0-122.88 61.44 61.44 0 0 0 0 122.88m0-512a72.315 72.315 0 0 0-71.762 81.306l25.723 205.721a46.408 46.408 0 0 0 92.078 0l25.723-205.742A72.315 72.315 0 0 0 512 307.2"/></svg>'},{}],"4nTtS":[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="icon" viewBox="0 0 1024 1024"><path d="m571.733 512 268.8-268.8c17.067-17.067 17.067-42.667 0-59.733-17.066-17.067-42.666-17.067-59.733 0L512 452.267l-268.8-268.8c-17.067-17.067-42.667-17.067-59.733 0-17.067 17.066-17.067 42.666 0 59.733l268.8 268.8-268.8 268.8c-17.067 17.067-17.067 42.667 0 59.733 8.533 8.534 19.2 12.8 29.866 12.8s21.334-4.266 29.867-12.8l268.8-268.8 268.8 268.8c8.533 8.534 19.2 12.8 29.867 12.8s21.333-4.266 29.866-12.8c17.067-17.066 17.067-42.666 0-59.733z"/></svg>'},{}],cDPXC:[function(n,r,s,i){r.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="#fff"><path d="M16 1H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h3v-2H3V3h12v8h-2v2h3a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1"/><path d="M4 17h10l-5-6z"/></g></svg>'},{}],"3eYNH":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s);var a=n("./flip"),u=o.interopDefault(a),l=n("./aspectRatio"),c=o.interopDefault(l),d=n("./playbackRate"),f=o.interopDefault(d),h=n("./subtitleOffset"),p=o.interopDefault(h),g=n("../utils/component"),v=o.interopDefault(g),y=n("../utils");class w extends v.default{constructor(S){super(S);let{option:E,controls:x,template:{$setting:k}}=S;this.name="setting",this.$parent=k,this.id=0,this.active=null,this.cache=new Map,this.option=[...this.builtin,...E.settings],E.setting&&(this.format(),this.render(),S.on("blur",()=>{this.show&&(this.show=!1,this.render())}),S.on("focus",A=>{let C=(0,y.includeFromEvent)(A,x.setting),_=(0,y.includeFromEvent)(A,this.$parent);!this.show||C||_||(this.show=!1,this.render())}),S.on("resize",()=>this.resize()))}get builtin(){let S=[],{option:E}=this.art;return E.playbackRate&&S.push((0,f.default)(this.art)),E.aspectRatio&&S.push((0,c.default)(this.art)),E.flip&&S.push((0,u.default)(this.art)),E.subtitleOffset&&S.push((0,p.default)(this.art)),S}traverse(S,E=this.option){var x;for(let k=0;k<E.length;k++){let A=E[k];S(A),(x=A.selector)!=null&&x.length&&this.traverse.call(this,S,A.selector)}}check(S){S.$parent.tooltip=S.html,this.traverse(E=>{E.default=E===S,E.default&&E.$item&&(0,y.inverseClass)(E.$item,"art-current")},S.$option),this.render(S.$parents)}format(S=this.option,E,x,k=[]){for(let A=0;A<S.length;A++){let C=S[A];if(C!=null&&C.name?((0,y.errorHandle)(!k.includes(C.name),`The [${C.name}] is already exist in [setting]`),k.push(C.name)):C.name=`setting-${this.id++}`,!C.$formatted){(0,y.def)(C,"$parent",{get:()=>E}),(0,y.def)(C,"$parents",{get:()=>x}),(0,y.def)(C,"$option",{get:()=>S});let _=[];(0,y.def)(C,"$events",{get:()=>_}),(0,y.def)(C,"$formatted",{get:()=>!0})}this.format(C.selector||[],C,S,k)}this.option=S}find(S=""){let E=null;return this.traverse(x=>{x.name===S&&(E=x)}),E}resize(){var C,_;let{controls:S,constructor:{SETTING_WIDTH:E,SETTING_ITEM_HEIGHT:x},template:{$player:k,$setting:A}}=this.art;if(S.setting&&this.show){let O=((_=(C=this.active[0])==null?void 0:C.$parent)==null?void 0:_.width)||E,{left:P,width:U}=(0,y.getRect)(S.setting),{left:j,width:N}=(0,y.getRect)(k),R=P-j+U/2-O/2,V=this.active===this.option?this.active.length*x:(this.active.length+1)*x;if((0,y.setStyle)(A,"height",`${V}px`),(0,y.setStyle)(A,"width",`${O}px`),this.art.isRotate||y.isMobile)return;R+O>N?((0,y.setStyle)(A,"left",null),(0,y.setStyle)(A,"right",null)):((0,y.setStyle)(A,"left",`${R}px`),(0,y.setStyle)(A,"right","auto"))}}inactivate(S){for(let E=0;E<S.$events.length;E++)this.art.events.remove(S.$events[E]);S.$events.length=0}remove(S){let E=this.find(S);(0,y.errorHandle)(E,`Can't find [${S}] in the [setting]`);let x=E.$option.indexOf(E);E.$option.splice(x,1),this.inactivate(E),E.$item&&(0,y.remove)(E.$item),this.render()}update(S){let E=this.find(S.name);return E?(this.inactivate(E),Object.assign(E,S),this.format(),this.creatItem(E,!0),this.render(),E):this.add(S)}add(S,E=this.option){return E.push(S),this.format(),this.creatItem(S),this.render(),S}creatHeader(S){if(!this.cache.has(S.$option))return;let E=this.cache.get(S.$option),{proxy:x,icons:{arrowLeft:k},constructor:{SETTING_ITEM_HEIGHT:A}}=this.art,C=(0,y.createElement)("div");(0,y.setStyle)(C,"height",`${A}px`),(0,y.addClass)(C,"art-setting-item"),(0,y.addClass)(C,"art-setting-item-back");let _=(0,y.append)(C,'<div class="art-setting-item-left"></div>'),O=(0,y.createElement)("div");(0,y.addClass)(O,"art-setting-item-left-icon"),(0,y.append)(O,k),(0,y.append)(_,O),(0,y.append)(_,S.$parent.html);let P=x(C,"click",()=>this.render(S.$parents));S.$parent.$events.push(P),(0,y.append)(E,C)}creatItem(S,E=!1){var D,M;if(!this.cache.has(S.$option))return;let x=this.cache.get(S.$option),k=S.$item,A="selector";(0,y.has)(S,"switch")&&(A="switch"),(0,y.has)(S,"range")&&(A="range"),(0,y.has)(S,"onClick")&&(A="button");let{icons:C,proxy:_,constructor:O}=this.art,P=(0,y.createElement)("div");(0,y.addClass)(P,"art-setting-item"),(0,y.setStyle)(P,"height",`${O.SETTING_ITEM_HEIGHT}px`),P.dataset.name=S.name||"",P.dataset.value=S.value||"";let U=(0,y.append)(P,'<div class="art-setting-item-left"></div>'),j=(0,y.append)(P,'<div class="art-setting-item-right"></div>'),N=(0,y.createElement)("div");switch((0,y.addClass)(N,"art-setting-item-left-icon"),A){case"button":case"switch":case"range":(0,y.append)(N,S.icon||C.config);break;case"selector":(D=S.selector)!=null&&D.length?(0,y.append)(N,S.icon||C.config):(0,y.append)(N,C.check)}(0,y.append)(U,N),(0,y.def)(S,"$icon",{configurable:!0,get:()=>N}),(0,y.def)(S,"icon",{configurable:!0,get:()=>N.innerHTML,set(K){N.innerHTML="",(0,y.append)(N,K)}});let R=(0,y.createElement)("div");(0,y.addClass)(R,"art-setting-item-left-text"),(0,y.append)(R,S.html||""),(0,y.append)(U,R),(0,y.def)(S,"$html",{configurable:!0,get:()=>R}),(0,y.def)(S,"html",{configurable:!0,get:()=>R.innerHTML,set(K){R.innerHTML="",(0,y.append)(R,K)}});let V=(0,y.createElement)("div");switch((0,y.addClass)(V,"art-setting-item-right-tooltip"),(0,y.append)(V,S.tooltip||""),(0,y.append)(j,V),(0,y.def)(S,"$tooltip",{configurable:!0,get:()=>V}),(0,y.def)(S,"tooltip",{configurable:!0,get:()=>V.innerHTML,set(K){V.innerHTML="",(0,y.append)(V,K)}}),A){case"switch":{let K=(0,y.createElement)("div");(0,y.addClass)(K,"art-setting-item-right-icon");let q=(0,y.append)(K,C.switchOn),ee=(0,y.append)(K,C.switchOff);(0,y.setStyle)(S.switch?ee:q,"display","none"),(0,y.append)(j,K),(0,y.def)(S,"$switch",{configurable:!0,get:()=>K});let X=S.switch;(0,y.def)(S,"switch",{configurable:!0,get:()=>X,set(te){X=te,te?((0,y.setStyle)(ee,"display","none"),(0,y.setStyle)(q,"display",null)):((0,y.setStyle)(ee,"display",null),(0,y.setStyle)(q,"display","none"))}});break}case"range":{let K=(0,y.createElement)("div");(0,y.addClass)(K,"art-setting-item-right-icon");let q=(0,y.append)(K,'<input type="range">');q.value=S.range[0],q.min=S.range[1],q.max=S.range[2],q.step=S.range[3],(0,y.addClass)(q,"art-setting-range"),(0,y.append)(j,K),(0,y.def)(S,"$range",{configurable:!0,get:()=>q});let ee=[...S.range];(0,y.def)(S,"range",{configurable:!0,get:()=>ee,set(X){ee=[...X],q.value=X[0],q.min=X[1],q.max=X[2],q.step=X[3]}})}break;case"selector":if((M=S.selector)!=null&&M.length){let K=(0,y.createElement)("div");(0,y.addClass)(K,"art-setting-item-right-icon"),(0,y.append)(K,C.arrowRight),(0,y.append)(j,K)}}switch(A){case"switch":if(S.onSwitch){let K=_(P,"click",async q=>{S.switch=await S.onSwitch.call(this.art,S,P,q)});S.$events.push(K)}break;case"range":if(S.$range){if(S.onRange){let K=_(S.$range,"change",async q=>{S.range[0]=S.$range.valueAsNumber,S.tooltip=await S.onRange.call(this.art,S,P,q)});S.$events.push(K)}if(S.onChange){let K=_(S.$range,"input",async q=>{S.range[0]=S.$range.valueAsNumber,S.tooltip=await S.onChange.call(this.art,S,P,q)});S.$events.push(K)}}break;case"selector":{let K=_(P,"click",async q=>{var ee;(ee=S.selector)!=null&&ee.length?this.render(S.selector):(this.check(S),S.$parent.onSelect&&(S.$parent.tooltip=await S.$parent.onSelect.call(this.art,S,P,q)))});S.$events.push(K),S.default&&(0,y.addClass)(P,"art-current")}break;case"button":if(S.onClick){let K=_(P,"click",async q=>{S.tooltip=await S.onClick.call(this.art,S,P,q)});S.$events.push(K)}}(0,y.def)(S,"$item",{configurable:!0,get:()=>P}),E?(0,y.replaceElement)(P,k):(0,y.append)(x,P),S.mounted&&setTimeout(()=>S.mounted.call(this.art,S.$item,S),0)}render(S=this.option){var E;if(this.active=S,this.cache.has(S)){let x=this.cache.get(S);(0,y.inverseClass)(x,"art-current")}else{let x=(0,y.createElement)("div");this.cache.set(S,x),(0,y.addClass)(x,"art-setting-panel"),(0,y.append)(this.$parent,x),(0,y.inverseClass)(x,"art-current"),(E=S[0])!=null&&E.$parent&&this.creatHeader(S[0]);for(let k=0;k<S.length;k++)this.creatItem(S[k])}this.resize()}}s.default=w},{"./flip":"kONUB","./aspectRatio":"84NBV","./playbackRate":"aetWt","./subtitleOffset":"fIBkO","../utils/component":"18nVI","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kONUB:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{i18n:c,icons:d,constructor:{SETTING_ITEM_WIDTH:f,FLIP:h}}=l;function p(v){return c.get((0,a.capitalize)(v))}function g(){let v=l.setting.find(`flip-${l.flip}`);l.setting.check(v)}return{width:f,name:"flip",html:c.get("Video Flip"),tooltip:p(l.flip),icon:d.flip,selector:h.map(v=>({value:v,name:`flip-${v}`,default:v===l.flip,html:p(v)})),onSelect:v=>(l.flip=v.value,v.html),mounted:()=>{g(),l.on("flip",()=>g())}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"84NBV":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(u){let{i18n:l,icons:c,constructor:{SETTING_ITEM_WIDTH:d,ASPECT_RATIO:f}}=u;function h(g){return g==="default"?l.get("Default"):g}function p(){let g=u.setting.find(`aspect-ratio-${u.aspectRatio}`);u.setting.check(g)}return{width:d,name:"aspect-ratio",html:l.get("Aspect Ratio"),icon:c.aspectRatio,tooltip:h(u.aspectRatio),selector:f.map(g=>({value:g,name:`aspect-ratio-${g}`,default:g===u.aspectRatio,html:h(g)})),onSelect:g=>(u.aspectRatio=g.value,g.html),mounted:()=>{p(),u.on("aspectRatio",()=>p())}}}o.defineInteropFlag(s),o.export(s,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],aetWt:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(u){let{i18n:l,icons:c,constructor:{SETTING_ITEM_WIDTH:d,PLAYBACK_RATE:f}}=u;function h(g){return g===1?l.get("Normal"):g.toFixed(1)}function p(){let g=u.setting.find(`playback-rate-${u.playbackRate}`);u.setting.check(g)}return{width:d,name:"playback-rate",html:l.get("Play Speed"),tooltip:h(u.playbackRate),icon:c.playbackRate,selector:f.map(g=>({value:g,name:`playback-rate-${g}`,default:g===u.playbackRate,html:h(g)})),onSelect:g=>(u.playbackRate=g.value,g.html),mounted:()=>{p(),u.on("video:ratechange",()=>p())}}}o.defineInteropFlag(s),o.export(s,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fIBkO:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(u){let{i18n:l,icons:c,constructor:d}=u;return{width:d.SETTING_ITEM_WIDTH,name:"subtitle-offset",html:l.get("Subtitle Offset"),icon:c.subtitle,tooltip:"0s",range:[0,-10,10,.1],onChange:f=>(u.subtitleOffset=f.range[0],f.range[0]+"s"),mounted:(f,h)=>{u.on("subtitleOffset",p=>{h.$range.value=p,h.tooltip=p+"s"})}}}o.defineInteropFlag(s),o.export(s,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2aaJe":[function(n,r,s,i){n("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(s),s.default=class{constructor(){this.name="artplayer_settings",this.settings={}}get(o){try{let a=JSON.parse(window.localStorage.getItem(this.name))||{};return o?a[o]:a}catch{return o?this.settings[o]:this.settings}}set(o,a){try{let u=Object.assign({},this.get(),{[o]:a});window.localStorage.setItem(this.name,JSON.stringify(u))}catch{this.settings[o]=a}}del(o){try{let a=this.get();delete a[o],window.localStorage.setItem(this.name,JSON.stringify(a))}catch{delete this.settings[o]}}clear(){try{window.localStorage.removeItem(this.name)}catch{this.settings={}}}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8MTUM":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s);var a=n("../utils"),u=n("./miniProgressBar"),l=o.interopDefault(u),c=n("./autoOrientation"),d=o.interopDefault(c),f=n("./autoPlayback"),h=o.interopDefault(f),p=n("./fastForward"),g=o.interopDefault(p),v=n("./lock"),y=o.interopDefault(v);s.default=class{constructor(w){this.art=w,this.id=0;let{option:b}=w;b.miniProgressBar&&!b.isLive&&this.add(l.default),b.lock&&a.isMobile&&this.add(y.default),b.autoPlayback&&!b.isLive&&this.add(h.default),b.autoOrientation&&a.isMobile&&this.add(d.default),b.fastForward&&a.isMobile&&!b.isLive&&this.add(g.default);for(let S=0;S<b.plugins.length;S++)this.add(b.plugins[S])}add(w){this.id+=1;let b=w.call(this.art,this.art);return b instanceof Promise?b.then(S=>this.next(w,S)):this.next(w,b)}next(w,b){let S=b&&b.name||w.name||`plugin${this.id}`;return(0,a.errorHandle)(!(0,a.has)(this,S),`Cannot add a plugin that already has the same name: ${S}`),(0,a.def)(this,S,{value:b}),this}}},{"../utils":"71aH7","./miniProgressBar":"87pSL","./autoOrientation":"ePEg5","./autoPlayback":"cVO99","./fastForward":"hFDwt","./lock":"1hsTH","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"87pSL":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){return l.on("control",c=>{c?(0,a.removeClass)(l.template.$player,"art-mini-progress-bar"):(0,a.addClass)(l.template.$player,"art-mini-progress-bar")}),{name:"mini-progress-bar"}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ePEg5:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{constructor:c,template:{$player:d,$video:f}}=l;return l.on("fullscreenWeb",h=>{if(h){let{videoWidth:p,videoHeight:g}=f,{clientWidth:v,clientHeight:y}=document.documentElement;(p>g&&v<y||p<g&&v>y)&&setTimeout(()=>{(0,a.setStyle)(d,"width",`${y}px`),(0,a.setStyle)(d,"height",`${v}px`),(0,a.setStyle)(d,"transform-origin","0 0"),(0,a.setStyle)(d,"transform",`rotate(90deg) translate(0, -${v}px)`),(0,a.addClass)(d,"art-auto-orientation"),l.isRotate=!0,l.emit("resize")},c.AUTO_ORIENTATION_TIME)}else(0,a.hasClass)(d,"art-auto-orientation")&&((0,a.removeClass)(d,"art-auto-orientation"),l.isRotate=!1,l.emit("resize"))}),l.on("fullscreen",async h=>{var g;if(!((g=screen==null?void 0:screen.orientation)!=null&&g.lock))return;let p=screen.orientation.type;if(h){let{videoWidth:v,videoHeight:y}=f,{clientWidth:w,clientHeight:b}=document.documentElement;if(v>y&&w<b||v<y&&w>b){let S=p.startsWith("portrait")?"landscape":"portrait";await screen.orientation.lock(S),(0,a.addClass)(d,"art-auto-orientation-fullscreen")}}else(0,a.hasClass)(d,"art-auto-orientation-fullscreen")&&(await screen.orientation.lock(p),(0,a.removeClass)(d,"art-auto-orientation-fullscreen"))}),{name:"autoOrientation",get state(){return(0,a.hasClass)(d,"art-auto-orientation")}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],cVO99:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{i18n:c,icons:d,storage:f,constructor:h,proxy:p,template:{$poster:g}}=l,v=l.layers.add({name:"auto-playback",html:'<div class="art-auto-playback-close"></div><div class="art-auto-playback-last"></div><div class="art-auto-playback-jump"></div>'}),y=(0,a.query)(".art-auto-playback-last",v),w=(0,a.query)(".art-auto-playback-jump",v),b=(0,a.query)(".art-auto-playback-close",v);(0,a.append)(b,d.close);let S=null;function E(){let x=(f.get("times")||{})[l.option.id||l.option.url];clearTimeout(S),(0,a.setStyle)(v,"display","none"),x&&x>=h.AUTO_PLAYBACK_MIN&&((0,a.setStyle)(v,"display","flex"),y.innerText=`${c.get("Last Seen")} ${(0,a.secondToTime)(x)}`,w.innerText=c.get("Jump Play"),p(b,"click",()=>{(0,a.setStyle)(v,"display","none")}),p(w,"click",()=>{l.seek=x,l.play(),(0,a.setStyle)(g,"display","none"),(0,a.setStyle)(v,"display","none")}),l.once("video:timeupdate",()=>{S=setTimeout(()=>{(0,a.setStyle)(v,"display","none")},h.AUTO_PLAYBACK_TIMEOUT)}))}return l.on("video:timeupdate",()=>{if(l.playing){let x=f.get("times")||{},k=Object.keys(x);k.length>h.AUTO_PLAYBACK_MAX&&delete x[k[0]],x[l.option.id||l.option.url]=l.currentTime,f.set("times",x)}}),l.on("ready",E),l.on("restart",E),{name:"auto-playback",get times(){return f.get("times")||{}},clear:()=>f.del("times"),delete(x){let k=f.get("times")||{};return delete k[x],f.set("times",k),k}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hFDwt:[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{constructor:c,proxy:d,template:{$player:f,$video:h}}=l,p=null,g=!1,v=1,y=()=>{clearTimeout(p),g&&(g=!1,l.playbackRate=v,(0,a.removeClass)(f,"art-fast-forward"))};return d(h,"touchstart",w=>{w.touches.length===1&&l.playing&&!l.isLock&&(p=setTimeout(()=>{g=!0,v=l.playbackRate,l.playbackRate=c.FAST_FORWARD_VALUE,(0,a.addClass)(f,"art-fast-forward")},c.FAST_FORWARD_TIME))}),d(document,"touchmove",y),d(document,"touchend",y),{name:"fastForward",get state(){return(0,a.hasClass)(f,"art-fast-forward")}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1hsTH":[function(n,r,s,i){var o=n("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(s),o.export(s,"default",()=>u);var a=n("../utils");function u(l){let{layers:c,icons:d,template:{$player:f}}=l;function h(){return(0,a.hasClass)(f,"art-lock")}function p(){(0,a.addClass)(f,"art-lock"),l.isLock=!0,l.emit("lock",!0)}function g(){(0,a.removeClass)(f,"art-lock"),l.isLock=!1,l.emit("lock",!1)}return c.add({name:"lock",mounted(v){let y=(0,a.append)(v,d.lock),w=(0,a.append)(v,d.unlock);(0,a.setStyle)(y,"display","none"),l.on("lock",b=>{b?((0,a.setStyle)(y,"display","inline-flex"),(0,a.setStyle)(w,"display","none")):((0,a.setStyle)(y,"display","none"),(0,a.setStyle)(w,"display","inline-flex"))})},click(){h()?g():p()}}),{name:"lock",get state(){return h()},set state(v){v?p():g()}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}]},["5lTcX"],"5lTcX","parcelRequire4dc0",{})}(xc,xc.exports)),xc.exports}var M3=$3();const N3=ui(M3),Ut=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},F3=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=B3},B3=Number.MAX_SAFE_INTEGER||9007199254740991;let nn=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),Ge=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",t.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",t.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.ASSET_LIST_LOAD_ERROR="assetListLoadError",t.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",t.ASSET_LIST_PARSING_ERROR="assetListParsingError",t.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.ATTACH_MEDIA_ERROR="attachMediaError",t.UNKNOWN="unknown",t}({}),G=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.MEDIA_ENDED="hlsMediaEnded",t.STALL_RESOLVED="hlsStallResolved",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFERED_TO_END="hlsBufferedToEnd",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t.ASSET_LIST_LOADING="hlsAssetListLoading",t.ASSET_LIST_LOADED="hlsAssetListLoaded",t.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",t.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",t.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",t.INTERSTITIAL_STARTED="hlsInterstitialStarted",t.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",t.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",t.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",t.INTERSTITIAL_ENDED="hlsInterstitialEnded",t.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",t.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",t.EVENT_CUE_ENTER="hlsEventCueEnter",t}({});var An={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},qt={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class Il{constructor(e,n=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=n,this.totalWeight_=r}sample(e,n){const r=Math.pow(this.alpha_,e);this.estimate_=n*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class V3{constructor(e,n,r,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Il(e),this.fast_=new Il(n),this.defaultTTFB_=s,this.ttfb_=new Il(e)}update(e,n){const{slow_:r,fast_:s,ttfb_:i}=this;r.halfLife!==e&&(this.slow_=new Il(e,r.getEstimate(),r.getTotalWeight())),s.halfLife!==n&&(this.fast_=new Il(n,s.getEstimate(),s.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new Il(e,i.getEstimate(),i.getTotalWeight()))}sample(e,n){e=Math.max(e,this.minDelayMs_);const r=8*n,s=e/1e3,i=r/s;this.fast_.sample(s,i),this.slow_.sample(s,i)}sampleTTFB(e){const n=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(n,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function U3(t,e,n){return(e=j3(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kn(){return Kn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kn.apply(null,arguments)}function oE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Hn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oE(Object(n),!0).forEach(function(r){U3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H3(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function j3(t){var e=H3(t,"string");return typeof e=="symbol"?e:e+""}class Fo{constructor(e,n){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const r=`[${e}]:`;this.trace=ca,this.debug=n.debug.bind(null,r),this.log=n.log.bind(null,r),this.warn=n.warn.bind(null,r),this.info=n.info.bind(null,r),this.error=n.error.bind(null,r)}}const ca=function(){},K3={trace:ca,debug:ca,log:ca,warn:ca,info:ca,error:ca};function u0(){return Kn({},K3)}function z3(t,e){const n=self.console[t];return n?n.bind(self.console,`${e?"["+e+"] ":""}[${t}] >`):ca}function aE(t,e,n){return e[t]?e[t].bind(e):z3(t,n)}const c0=u0();function W3(t,e,n){const r=u0();if(typeof console=="object"&&t===!0||typeof t=="object"){const s=["debug","log","info","warn","error"];s.forEach(i=>{r[i]=aE(i,t,n)});try{r.log(`Debug logs enabled for "${e}" in hls.js version 1.6.4`)}catch{return u0()}s.forEach(i=>{c0[i]=aE(i,t)})}else Kn(c0,r);return r}const Nn=c0;function Sa(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function G3(t){return typeof self<"u"&&t===self.ManagedMediaSource}function O2(t,e){const n=Object.keys(t),r=Object.keys(e),s=n.length,i=r.length;return!s||!i||s===i&&!n.some(o=>r.indexOf(o)===-1)}function Hs(t,e=!1){if(typeof TextDecoder<"u"){const l=new TextDecoder("utf-8").decode(t);if(e){const c=l.indexOf("\0");return c!==-1?l.substring(0,c):l}return l.replace(/\0/g,"")}const n=t.length;let r,s,i,o="",a=0;for(;a<n;){if(r=t[a++],r===0&&e)return o;if(r===0||r===3)continue;switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(r);break;case 12:case 13:s=t[a++],o+=String.fromCharCode((r&31)<<6|s&63);break;case 14:s=t[a++],i=t[a++],o+=String.fromCharCode((r&15)<<12|(s&63)<<6|(i&63)<<0);break}}return o}const Ui={hexDump:function(t){let e="";for(let n=0;n<t.length;n++){let r=t[n].toString(16);r.length<2&&(r="0"+r),e+=r}return e}};function q3(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kg={exports:{}},lE;function Y3(){return lE||(lE=1,function(t,e){(function(n){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,s=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(u,l,c){if(c=c||{},u=u.trim(),l=l.trim(),!l){if(!c.alwaysNormalize)return u;var d=a.parseURL(u);if(!d)throw new Error("Error trying to parse base URL.");return d.path=a.normalizePath(d.path),a.buildURLFromParts(d)}var f=a.parseURL(l);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return c.alwaysNormalize?(f.path=a.normalizePath(f.path),a.buildURLFromParts(f)):l;var h=a.parseURL(u);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&h.path[0]!=="/"){var p=s.exec(h.path);h.netLoc=p[1],h.path=p[2]}h.netLoc&&!h.path&&(h.path="/");var g={scheme:h.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(g.netLoc=h.netLoc,f.path[0]!=="/"))if(!f.path)g.path=h.path,f.params||(g.params=h.params,f.query||(g.query=h.query));else{var v=h.path,y=v.substring(0,v.lastIndexOf("/")+1)+f.path;g.path=a.normalizePath(y)}return g.path===null&&(g.path=c.alwaysNormalize?a.normalizePath(f.path):f.path),a.buildURLFromParts(g)},parseURL:function(u){var l=r.exec(u);return l?{scheme:l[1]||"",netLoc:l[2]||"",path:l[3]||"",params:l[4]||"",query:l[5]||"",fragment:l[6]||""}:null},normalizePath:function(u){for(u=u.split("").reverse().join("").replace(i,"");u.length!==(u=u.replace(o,"")).length;);return u.split("").reverse().join("")},buildURLFromParts:function(u){return u.scheme+u.netLoc+u.path+u.params+u.query+u.fragment}};t.exports=a})()}(Kg)),Kg.exports}var lb=Y3();class ub{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Yn={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class $2{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,Q3(this,"stats")}setByteRange(e,n){const r=e.split("@",2);let s;r.length===1?s=(n==null?void 0:n.byteRangeEndOffset)||0:s=parseInt(r[1]),this._byteRange=[s,parseInt(r[0])+s]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[Yn.AUDIO]:null,[Yn.VIDEO]:null,[Yn.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new ub),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=lb.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Yn.AUDIO]=null,e[Yn.VIDEO]=null,e[Yn.AUDIOVIDEO]=null}}function Pr(t){return t.sn!=="initSegment"}class zg extends $2{constructor(e,n){super(n),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange){const e=this.byteRange[0],n=this.byteRange[1];if(Ut(e)&&Ut(n))return n-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const n=this.levelkeys.identity;if(n)this._decryptdata=n.getDecryptData(this.sn);else{const r=Object.keys(this.levelkeys);if(r.length===1)return this._decryptdata=this.levelkeys[r[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=Ut(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const n=Object.keys(this.levelkeys),r=n.length;if(r>1||r===1&&this.levelkeys[n[0]].encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!Ut(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return Pr(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const n=this.levelkeys[e];n&&!this._decryptdata&&(this._decryptdata=n.getDecryptData(this.sn))}}abortRequests(){var e,n;(e=this.loader)==null||e.abort(),(n=this.keyLoader)==null||n.abort()}setElementaryStreamInfo(e,n,r,s,i,o=!1){const{elementaryStreams:a}=this,u=a[e];if(!u){a[e]={startPTS:n,endPTS:r,startDTS:s,endDTS:i,partial:o};return}u.startPTS=Math.min(u.startPTS,n),u.endPTS=Math.max(u.endPTS,r),u.startDTS=Math.min(u.startDTS,s),u.endDTS=Math.max(u.endDTS,i)}}class X3 extends $2{constructor(e,n,r,s,i){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=n,this.index=s;const o=e.enumeratedString("BYTERANGE");o&&this.setByteRange(o,i),i&&(this.fragOffset=i.fragOffset+i.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function M2(t,e){const n=Object.getPrototypeOf(t);if(n){const r=Object.getOwnPropertyDescriptor(n,e);return r||M2(n,e)}}function Q3(t,e){const n=M2(t,e);n&&(n.enumerable=!0,Object.defineProperty(t,e,n))}const pp=Math.pow(2,32)-1,Z3=[].push,N2={video:1,audio:2,id3:3,text:4};function Er(t){return String.fromCharCode.apply(null,t)}function F2(t,e){const n=t[e]<<8|t[e+1];return n<0?65536+n:n}function un(t,e){const n=B2(t,e);return n<0?4294967296+n:n}function uE(t,e){let n=un(t,e);return n*=Math.pow(2,32),n+=un(t,e+4),n}function B2(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function Wg(t,e,n){t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n&255}function J3(t){const e=t.byteLength;for(let n=0;n<e;){const r=un(t,n);if(r>8&&t[n+4]===109&&t[n+5]===111&&t[n+6]===111&&t[n+7]===102)return!0;n=r>1?n+r:e}return!1}function vn(t,e){const n=[];if(!e.length)return n;const r=t.byteLength;for(let s=0;s<r;){const i=un(t,s),o=Er(t.subarray(s+4,s+8)),a=i>1?s+i:r;if(o===e[0])if(e.length===1)n.push(t.subarray(s+8,a));else{const u=vn(t.subarray(s+8,a),e.slice(1));u.length&&Z3.apply(n,u)}s=a}return n}function e4(t){const e=[],n=t[0];let r=8;const s=un(t,r);r+=4;let i=0,o=0;n===0?(i=un(t,r),o=un(t,r+4),r+=8):(i=uE(t,r),o=uE(t,r+8),r+=16),r+=2;let a=t.length+o;const u=F2(t,r);r+=2;for(let l=0;l<u;l++){let c=r;const d=un(t,c);c+=4;const f=d&2147483647;if((d&2147483648)>>>31===1)return Nn.warn("SIDX has hierarchical references (not supported)"),null;const p=un(t,c);c+=4,e.push({referenceSize:f,subsegmentDuration:p,info:{duration:p/s,start:a,end:a+f-1}}),a+=f,c+=4,r=c}return{earliestPresentationTime:i,timescale:s,version:n,referencesCount:u,references:e}}function V2(t){const e=[],n=vn(t,["moov","trak"]);for(let s=0;s<n.length;s++){const i=n[s],o=vn(i,["tkhd"])[0];if(o){let a=o[0];const u=un(o,a===0?12:20),l=vn(i,["mdia","mdhd"])[0];if(l){a=l[0];const c=un(l,a===0?12:20),d=vn(i,["mdia","hdlr"])[0];if(d){const f=Er(d.subarray(8,12)),h={soun:Yn.AUDIO,vide:Yn.VIDEO}[f],p=vn(i,["mdia","minf","stbl","stsd"])[0],g=t4(p);h?(e[u]={timescale:c,type:h,stsd:g},e[h]=Hn({timescale:c,id:u},g)):e[u]={timescale:c,type:f,stsd:g}}}}}return vn(t,["moov","mvex","trex"]).forEach(s=>{const i=un(s,4),o=e[i];o&&(o.default={duration:un(s,12),flags:un(s,20)})}),e}function t4(t){const e=t.subarray(8),n=e.subarray(86),r=Er(e.subarray(4,8));let s=r,i;const o=r==="enca"||r==="encv";if(o){const l=vn(e,[r])[0].subarray(r==="enca"?28:78);vn(l,["sinf"]).forEach(d=>{const f=vn(d,["schm"])[0];if(f){const h=Er(f.subarray(4,8));if(h==="cbcs"||h==="cenc"){const p=vn(d,["frma"])[0];p&&(s=Er(p))}}})}const a=s;switch(s){case"avc1":case"avc2":case"avc3":case"avc4":{const u=vn(n,["avcC"])[0];u&&u.length>3&&(s+="."+Of(u[1])+Of(u[2])+Of(u[3]),i=Df(a==="avc1"?"dva1":"dvav",n));break}case"mp4a":{const u=vn(e,[r])[0],l=vn(u.subarray(28),["esds"])[0];if(l&&l.length>7){let c=4;if(l[c++]!==3)break;c=Gg(l,c),c+=2;const d=l[c++];if(d&128&&(c+=2),d&64&&(c+=l[c++]),l[c++]!==4)break;c=Gg(l,c);const f=l[c++];if(f===64)s+="."+Of(f);else break;if(c+=12,l[c++]!==5)break;c=Gg(l,c);const h=l[c++];let p=(h&248)>>3;p===31&&(p+=1+((h&7)<<3)+((l[c]&224)>>5)),s+="."+p}break}case"hvc1":case"hev1":{const u=vn(n,["hvcC"])[0];if(u&&u.length>12){const l=u[1],c=["","A","B","C"][l>>6],d=l&31,f=un(u,2),h=(l&32)>>5?"H":"L",p=u[12],g=u.subarray(6,12);s+="."+c+d,s+="."+n4(f).toString(16).toUpperCase(),s+="."+h+p;let v="";for(let y=g.length;y--;){const w=g[y];(w||v)&&(v="."+w.toString(16).toUpperCase()+v)}s+=v}i=Df(a=="hev1"?"dvhe":"dvh1",n);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{s=Df(s,n)||s;break}case"vp09":{const u=vn(n,["vpcC"])[0];if(u&&u.length>6){const l=u[4],c=u[5],d=u[6]>>4&15;s+="."+Vi(l)+"."+Vi(c)+"."+Vi(d)}break}case"av01":{const u=vn(n,["av1C"])[0];if(u&&u.length>2){const l=u[1]>>>5,c=u[1]&31,d=u[2]>>>7?"H":"M",f=(u[2]&64)>>6,h=(u[2]&32)>>5,p=l===2&&f?h?12:10:f?10:8,g=(u[2]&16)>>4,v=(u[2]&8)>>3,y=(u[2]&4)>>2,w=u[2]&3;s+="."+l+"."+Vi(c)+d+"."+Vi(p)+"."+g+"."+v+y+w+"."+Vi(1)+"."+Vi(1)+"."+Vi(1)+"."+0,i=Df("dav1",n)}break}}return{codec:s,encrypted:o,supplemental:i}}function Df(t,e){const n=vn(e,["dvvC"]),r=n.length?n[0]:vn(e,["dvcC"])[0];if(r){const s=r[2]>>1&127,i=r[2]<<5&32|r[3]>>3&31;return t+"."+Vi(s)+"."+Vi(i)}}function n4(t){let e=0;for(let n=0;n<32;n++)e|=(t>>n&1)<<31-n;return e>>>0}function Gg(t,e){const n=e+5;for(;t[e++]&128&&e<n;);return e}function Of(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function Vi(t){return(t<10?"0":"")+t}function r4(t,e){if(!t||!e)return t;const n=e.keyId;return n&&e.isCommonEncryption&&vn(t,["moov","trak"]).forEach(s=>{const o=vn(s,["mdia","minf","stbl","stsd"])[0].subarray(8);let a=vn(o,["enca"]);const u=a.length>0;u||(a=vn(o,["encv"])),a.forEach(l=>{const c=u?l.subarray(28):l.subarray(78);vn(c,["sinf"]).forEach(f=>{const h=U2(f);if(h){const p=h.subarray(8,24);p.some(g=>g!==0)||(Nn.log(`[eme] Patching keyId in 'enc${u?"a":"v"}>sinf>>tenc' box: ${Ui.hexDump(p)} -> ${Ui.hexDump(n)}`),h.set(n,8))}})})}),t}function U2(t){const e=vn(t,["schm"])[0];if(e){const n=Er(e.subarray(4,8));if(n==="cbcs"||n==="cenc")return vn(t,["schi","tenc"])[0]}return null}function s4(t,e,n){const r={},s=vn(t,["moof","traf"]);for(let i=0;i<s.length;i++){const o=s[i],a=vn(o,["tfhd"])[0],u=un(a,4),l=e[u];if(!l)continue;const c=r[u]||(r[u]={start:NaN,duration:0,sampleCount:0,timescale:l.timescale,type:l.type}),d=vn(o,["tfdt"])[0];if(d){const b=d[0];let S=un(d,4);b===1&&(S===pp?n.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(S*=pp+1,S+=un(d,8))),Ut(S)&&(!Ut(c.start)||S<c.start)&&(c.start=S)}const f=l.default,h=un(a,0)|(f==null?void 0:f.flags);let p=(f==null?void 0:f.duration)||0;h&8&&(h&2?p=un(a,12):p=un(a,8));const g=vn(o,["trun"]);let v=c.start||0,y=0,w=p;for(let b=0;b<g.length;b++){const S=g[b],E=un(S,4),x=c.sampleCount;c.sampleCount+=E;const k=S[3]&1,A=S[3]&4,C=S[2]&1,_=S[2]&2,O=S[2]&4,P=S[2]&8;let U=8,j=E;for(k&&(U+=4),A&&E&&(!(S[U+1]&1)&&c.keyFrameIndex===void 0&&(c.keyFrameIndex=x),U+=4,C?(w=un(S,U),U+=4):w=p,_&&(U+=4),P&&(U+=4),v+=w,y+=w,j--);j--;)C?(w=un(S,U),U+=4):w=p,_&&(U+=4),O&&(S[U+1]&1||c.keyFrameIndex===void 0&&(c.keyFrameIndex=c.sampleCount-(j+1),c.keyFrameStart=v),U+=4),P&&(U+=4),v+=w,y+=w;!y&&p&&(y+=p*E)}c.duration+=y}if(!Object.keys(r).some(i=>r[i].duration)){let i=1/0,o=0;const a=vn(t,["sidx"]);for(let u=0;u<a.length;u++){const l=e4(a[u]);if(l!=null&&l.references){i=Math.min(i,l.earliestPresentationTime/l.timescale);const c=l.references.reduce((d,f)=>d+f.info.duration||0,0);o=Math.max(o,c+l.earliestPresentationTime/l.timescale)}}o&&Ut(o)&&Object.keys(r).forEach(u=>{r[u].duration||(r[u].duration=o*r[u].timescale-r[u].start)})}return r}function i4(t,e,n){vn(e,["moof","traf"]).forEach(r=>{vn(r,["tfhd"]).forEach(s=>{const i=un(s,4),o=t[i];if(!o)return;const a=o.timescale||9e4;vn(r,["tfdt"]).forEach(u=>{const l=u[0],c=n*a;if(c){let d=un(u,4);if(l===0)d-=c,d=Math.max(d,0),Wg(u,4,d);else{d*=Math.pow(2,32),d+=un(u,8),d-=c,d=Math.max(d,0);const f=Math.floor(d/(pp+1)),h=Math.floor(d%(pp+1));Wg(u,4,f),Wg(u,8,h)}}})})})}function o4(t){const e={valid:null,remainder:null},n=vn(t,["moof"]);if(n.length<2)return e.remainder=t,e;const r=n[n.length-1];return e.valid=t.slice(0,r.byteOffset-8),e.remainder=t.slice(r.byteOffset-8),e}function ri(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function cE(t,e){const n=[],r=e.samples,s=e.timescale,i=e.id;let o=!1;return vn(r,["moof"]).map(u=>{const l=u.byteOffset-8;vn(u,["traf"]).map(d=>{const f=vn(d,["tfdt"]).map(h=>{const p=h[0];let g=un(h,4);return p===1&&(g*=Math.pow(2,32),g+=un(h,8)),g/s})[0];return f!==void 0&&(t=f),vn(d,["tfhd"]).map(h=>{const p=un(h,4),g=un(h,0)&16777215,v=(g&1)!==0,y=(g&2)!==0,w=(g&8)!==0;let b=0;const S=(g&16)!==0;let E=0;const x=(g&32)!==0;let k=8;p===i&&(v&&(k+=8),y&&(k+=4),w&&(b=un(h,k),k+=4),S&&(E=un(h,k),k+=4),x&&(k+=4),e.type==="video"&&(o=Cm(e.codec)),vn(d,["trun"]).map(A=>{const C=A[0],_=un(A,0)&16777215,O=(_&1)!==0;let P=0;const U=(_&4)!==0,j=(_&256)!==0;let N=0;const R=(_&512)!==0;let V=0;const D=(_&1024)!==0,M=(_&2048)!==0;let K=0;const q=un(A,4);let ee=8;O&&(P=un(A,ee),ee+=4),U&&(ee+=4);let X=P+l;for(let te=0;te<q;te++){if(j?(N=un(A,ee),ee+=4):N=b,R?(V=un(A,ee),ee+=4):V=E,D&&(ee+=4),M&&(C===0?K=un(A,ee):K=B2(A,ee),ee+=4),e.type===Yn.VIDEO){let ue=0;for(;ue<V;){const he=un(r,X);if(X+=4,a4(o,r[X])){const Z=r.subarray(X,X+he);cb(Z,o?2:1,t+K/s,n)}X+=he,ue+=he+4}}t+=N/s}}))})})}),n}function Cm(t){if(!t)return!1;const e=t.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function a4(t,e){if(t){const n=e>>1&63;return n===39||n===40}else return(e&31)===6}function cb(t,e,n,r){const s=H2(t);let i=0;i+=e;let o=0,a=0,u=0;for(;i<s.length;){o=0;do{if(i>=s.length)break;u=s[i++],o+=u}while(u===255);a=0;do{if(i>=s.length)break;u=s[i++],a+=u}while(u===255);const l=s.length-i;let c=i;if(a<l)i+=a;else if(a>l){Nn.error(`Malformed SEI payload. ${a} is too small, only ${l} bytes left to parse.`);break}if(o===4){if(s[c++]===181){const f=F2(s,c);if(c+=2,f===49){const h=un(s,c);if(c+=4,h===1195456820){const p=s[c++];if(p===3){const g=s[c++],v=31&g,y=64&g,w=y?2+v*3:0,b=new Uint8Array(w);if(y){b[0]=g;for(let S=1;S<w;S++)b[S]=s[c++]}r.push({type:p,payloadType:o,pts:n,bytes:b})}}}}}else if(o===5&&a>16){const d=[];for(let p=0;p<16;p++){const g=s[c++].toString(16);d.push(g.length==1?"0"+g:g),(p===3||p===5||p===7||p===9)&&d.push("-")}const f=a-16,h=new Uint8Array(f);for(let p=0;p<f;p++)h[p]=s[c++];r.push({payloadType:o,pts:n,uuid:d.join(""),userData:Hs(h),userDataBytes:h})}}}function H2(t){const e=t.byteLength,n=[];let r=1;for(;r<e-2;)t[r]===0&&t[r+1]===0&&t[r+2]===3?(n.push(r+2),r+=2):r++;if(n.length===0)return t;const s=e-n.length,i=new Uint8Array(s);let o=0;for(r=0;r<s;o++,r++)o===n[0]&&(o++,n.shift()),i[r]=t[o];return i}function l4(t){const e=t[0];let n="",r="",s=0,i=0,o=0,a=0,u=0,l=0;if(e===0){for(;Er(t.subarray(l,l+1))!=="\0";)n+=Er(t.subarray(l,l+1)),l+=1;for(n+=Er(t.subarray(l,l+1)),l+=1;Er(t.subarray(l,l+1))!=="\0";)r+=Er(t.subarray(l,l+1)),l+=1;r+=Er(t.subarray(l,l+1)),l+=1,s=un(t,12),i=un(t,16),a=un(t,20),u=un(t,24),l=28}else if(e===1){l+=4,s=un(t,l),l+=4;const d=un(t,l);l+=4;const f=un(t,l);for(l+=4,o=2**32*d+f,F3(o)||(o=Number.MAX_SAFE_INTEGER,Nn.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),a=un(t,l),l+=4,u=un(t,l),l+=4;Er(t.subarray(l,l+1))!=="\0";)n+=Er(t.subarray(l,l+1)),l+=1;for(n+=Er(t.subarray(l,l+1)),l+=1;Er(t.subarray(l,l+1))!=="\0";)r+=Er(t.subarray(l,l+1)),l+=1;r+=Er(t.subarray(l,l+1)),l+=1}const c=t.subarray(l,t.byteLength);return{schemeIdUri:n,value:r,timeScale:s,presentationTime:o,presentationTimeDelta:i,eventDuration:a,id:u,payload:c}}function u4(t,...e){const n=e.length;let r=8,s=n;for(;s--;)r+=e[s].byteLength;const i=new Uint8Array(r);for(i[0]=r>>24&255,i[1]=r>>16&255,i[2]=r>>8&255,i[3]=r&255,i.set(t,4),s=0,r=8;s<n;s++)i.set(e[s],r),r+=e[s].byteLength;return i}function c4(t,e,n){if(t.byteLength!==16)throw new RangeError("Invalid system id");let r,s;r=0,s=new Uint8Array;let i;r>0?(i=new Uint8Array(4),e.length>0&&new DataView(i.buffer).setUint32(0,e.length,!1)):i=new Uint8Array;const o=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(o.buffer).setUint32(0,n.byteLength,!1),u4([112,115,115,104],new Uint8Array([r,0,0,0]),t,i,s,o,n||new Uint8Array)}function d4(t){const e=[];if(t instanceof ArrayBuffer){const n=t.byteLength;let r=0;for(;r+32<n;){const s=new DataView(t,r),i=f4(s);e.push(i),r+=i.size}}return e}function f4(t){const e=t.getUint32(0),n=t.byteOffset,r=t.byteLength;if(r<e)return{offset:n,size:r};if(t.getUint32(4)!==1886614376)return{offset:n,size:e};const i=t.getUint32(8)>>>24;if(i!==0&&i!==1)return{offset:n,size:e};const o=t.buffer,a=Ui.hexDump(new Uint8Array(o,n+12,16)),u=t.getUint32(28);let l=null,c=null;if(i===0){if(e-32<u||u<22)return{offset:n,size:e};c=new Uint8Array(o,n+32,u)}else if(i===1){if(!u||r<n+32+u*16+16)return{offset:n,size:e};l=[];for(let d=0;d<u;d++)l.push(new Uint8Array(o,n+32+d*16,16))}return{version:i,systemId:a,kids:l,data:c,offset:n,size:e}}const j2=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),yu={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function K2(t,e){const n=yu[e];return!!n&&!!n[t.slice(0,4)]}function d0(t,e,n=!0){return!t.split(",").some(r=>!z2(r,e,n))}function z2(t,e,n=!0){var r;const s=Sa(n);return(r=s==null?void 0:s.isTypeSupported(ld(t,e)))!=null?r:!1}function ld(t,e){return`${e}/mp4;codecs=${t}`}function dE(t){if(t){const e=t.substring(0,4);return yu.video[e]}return 2}function mp(t){const e=j2();return t.split(",").reduce((n,r)=>{const i=e&&Cm(r)?9:yu.video[r];return i?(i*2+n)/(n?3:2):(yu.audio[r]+n)/(n?2:1)},0)}const qg={};function h4(t,e=!0){if(qg[t])return qg[t];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[t];for(let s=0;s<n.length;s++){var r;if(z2(n[s],"audio",e))return qg[t]=n[s],n[s];if(n[s]==="mp3"&&(r=Sa(e))!=null&&r.isTypeSupported("audio/mpeg"))return""}return t}const p4=/flac|opus|mp4a\.40\.34/i;function gp(t,e=!0){return t.replace(p4,n=>h4(n.toLowerCase(),e))}function m4(t,e){const n=[];if(t){const r=t.split(",");for(let s=0;s<r.length;s++)K2(r[s],"video")||n.push(r[s])}return e&&n.push(e),n.join(",")}function bh(t,e){if(t&&(t.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(t)!==-1))return t;if(e){const n=e.split(",");if(n.length>1){if(t){for(let r=n.length;r--;)if(n[r].substring(0,4)===t.substring(0,4))return n[r]}return n[0]}}return e||t}function g4(t){const e=t.split(",");for(let n=0;n<e.length;n++){const r=e[n].split(".");r.length>2&&r[0]==="avc1"&&(e[n]=`avc1.${parseInt(r[1]).toString(16)}${("000"+parseInt(r[2]).toString(16)).slice(-4)}`)}return e.join(",")}function v4(t){if(t.startsWith("av01.")){const e=t.split("."),n=["0","111","01","01","01","0"];for(let r=e.length;r>4&&r<10;r++)e[r]=n[r-4];return e.join(".")}return t}function fE(t){const e=Sa(t)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function W2(t){return t.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const G2={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function q2(t,e){return{supported:!1,configurations:e,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:t}}const hE={};function y4(t,e,n,r,s,i){const o=t.audioCodec?t.audioGroups:null,a=i==null?void 0:i.audioCodec,u=i==null?void 0:i.channels,l=u?parseInt(u):a?1/0:2;let c=null;if(o!=null&&o.length)try{o.length===1&&o[0]?c=e.groups[o[0]].channels:c=o.reduce((d,f)=>{if(f){const h=e.groups[f];if(!h)throw new Error(`Audio track group ${f} not found`);Object.keys(h.channels).forEach(p=>{d[p]=(d[p]||0)+h.channels[p]})}return d},{2:0})}catch{return!0}return t.videoCodec!==void 0&&(t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(r,30)||t.videoRange!=="SDR"&&t.videoRange!==n||t.bitrate>Math.max(s,8e6))||!!c&&Ut(l)&&Object.keys(c).some(d=>parseInt(d)>l)}function Y2(t,e,n){const r=t.videoCodec,s=t.audioCodec;if(!r&&!s||!n)return Promise.resolve(G2);const i=[];if(r){const o={width:t.width,height:t.height,bitrate:Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)),framerate:t.frameRate||30},a=t.videoRange;a!=="SDR"&&(o.transferFunction=a.toLowerCase());const u=r.split(","),l=navigator.userAgent;if(u.some(c=>Cm(c))&&j2())return Promise.resolve(q2(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent sting: (${l})`),i));i.push.apply(i,u.map(c=>({type:"media-source",video:Hn(Hn({},o),{},{contentType:ld(v4(c),"video")})})))}return s&&t.audioGroups&&t.audioGroups.forEach(o=>{var a;o&&((a=e.groups[o])==null||a.tracks.forEach(u=>{if(u.groupId===o){const l=u.channels||"",c=parseFloat(l);Ut(c)&&c>2&&i.push.apply(i,s.split(",").map(d=>({type:"media-source",audio:{contentType:ld(d,"audio"),channels:""+c}})))}}))}),Promise.all(i.map(o=>{const a=b4(o);return hE[a]||(hE[a]=n.decodingInfo(o))})).then(o=>({supported:!o.some(a=>!a.supported),configurations:i,decodingInfoResults:o})).catch(o=>({supported:!1,configurations:i,decodingInfoResults:[],error:o}))}function b4(t){const{audio:e,video:n}=t,r=n||e;if(r){const s=W2(r.contentType);if(n)return`r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${s}_${Math.ceil(n.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${s}`}return""}const f0=["NONE","TYPE-0","TYPE-1",null];function S4(t){return f0.indexOf(t)>-1}const vp=["SDR","PQ","HLG"];function w4(t){return!!t&&vp.indexOf(t)>-1}var Sh={No:"",Yes:"YES",v2:"v2"};function pE(t){const{canSkipUntil:e,canSkipDateRanges:n,age:r}=t,s=r<e/2;return e&&s?n?Sh.v2:Sh.Yes:Sh.No}class mE{constructor(e,n,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=n,this.skip=r}addDirectives(e){const n=new self.URL(e);return this.msn!==void 0&&n.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&n.searchParams.set("_HLS_part",this.part.toString()),this.skip&&n.searchParams.set("_HLS_skip",this.skip),n.href}}class ud{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(r=>!!r).map(r=>r.substring(0,4)).join(","),"supplemental"in e){var n;this.supplemental=e.supplemental;const r=(n=e.supplemental)==null?void 0:n.videoCodec;r&&r!==e.videoCodec&&(this.codecSet+=`,${r.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return gE(this._audioGroups,e)}hasSubtitleGroup(e){return gE(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,n){if(n){if(e==="audio"){let r=this._audioGroups;r||(r=this._audioGroups=[]),r.indexOf(n)===-1&&r.push(n)}else if(e==="text"){let r=this._subtitleGroups;r||(r=this._subtitleGroups=[]),r.indexOf(n)===-1&&r.push(n)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function gE(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function E4(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function x4(t,e){let n=!1,r=[];if(t&&(n=t!=="SDR",r=[t]),e){r=e.allowedVideoRanges||vp.slice(0);const s=r.join("")!=="SDR"&&!e.videoCodec;n=e.preferHDR!==void 0?e.preferHDR:s&&E4(),n||(r=["SDR"])}return{preferHDR:n,allowedVideoRanges:r}}const T4=t=>{const e=new WeakSet;return(n,r)=>{if(t&&(r=t(n,r)),typeof r=="object"&&r!==null){if(e.has(r))return;e.add(r)}return r}},rr=(t,e)=>JSON.stringify(t,T4(e));function C4(t,e,n,r,s){const i=Object.keys(t),o=r==null?void 0:r.channels,a=r==null?void 0:r.audioCodec,u=s==null?void 0:s.videoCodec,l=o&&parseInt(o)===2;let c=!1,d=!1,f=1/0,h=1/0,p=1/0,g=1/0,v=0,y=[];const{preferHDR:w,allowedVideoRanges:b}=x4(e,s);for(let A=i.length;A--;){const C=t[i[A]];c||(c=C.channels[2]>0),f=Math.min(f,C.minHeight),h=Math.min(h,C.minFramerate),p=Math.min(p,C.minBitrate),b.filter(O=>C.videoRanges[O]>0).length>0&&(d=!0)}f=Ut(f)?f:0,h=Ut(h)?h:0;const S=Math.max(1080,f),E=Math.max(30,h);p=Ut(p)?p:n,n=Math.max(p,n),d||(e=void 0);const x=i.length>1;return{codecSet:i.reduce((A,C)=>{const _=t[C];if(C===A)return A;if(y=d?b.filter(O=>_.videoRanges[O]>0):[],x){if(_.minBitrate>n)return Ni(C,`min bitrate of ${_.minBitrate} > current estimate of ${n}`),A;if(!_.hasDefaultAudio)return Ni(C,"no renditions with default or auto-select sound found"),A;if(a&&C.indexOf(a.substring(0,4))%5!==0)return Ni(C,`audio codec preference "${a}" not found`),A;if(o&&!l){if(!_.channels[o])return Ni(C,`no renditions with ${o} channel sound found (channels options: ${Object.keys(_.channels)})`),A}else if((!a||l)&&c&&_.channels[2]===0)return Ni(C,"no renditions with stereo sound found"),A;if(_.minHeight>S)return Ni(C,`min resolution of ${_.minHeight} > maximum of ${S}`),A;if(_.minFramerate>E)return Ni(C,`min framerate of ${_.minFramerate} > maximum of ${E}`),A;if(!y.some(O=>_.videoRanges[O]>0))return Ni(C,`no variants with VIDEO-RANGE of ${rr(y)} found`),A;if(u&&C.indexOf(u.substring(0,4))%5!==0)return Ni(C,`video codec preference "${u}" not found`),A;if(_.maxScore<v)return Ni(C,`max score of ${_.maxScore} < selected max of ${v}`),A}return A&&(mp(C)>=mp(A)||_.fragmentError>t[A].fragmentError)?A:(g=_.minIndex,v=_.maxScore,C)},void 0),videoRanges:y,preferHDR:w,minFramerate:h,minBitrate:p,minIndex:g}}function Ni(t,e){Nn.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function X2(t){return t.reduce((e,n)=>{let r=e.groups[n.groupId];r||(r=e.groups[n.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(n);const s=n.channels||"2";return r.channels[s]=(r.channels[s]||0)+1,r.hasDefault=r.hasDefault||n.default,r.hasAutoSelect=r.hasAutoSelect||n.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function k4(t,e,n,r){return t.slice(n,r+1).reduce((s,i,o)=>{if(!i.codecSet)return s;const a=i.audioGroups;let u=s[i.codecSet];u||(s[i.codecSet]=u={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:o,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!a,fragmentError:0}),u.minBitrate=Math.min(u.minBitrate,i.bitrate);const l=Math.min(i.height,i.width);return u.minHeight=Math.min(u.minHeight,l),u.minFramerate=Math.min(u.minFramerate,i.frameRate),u.minIndex=Math.min(u.minIndex,o),u.maxScore=Math.max(u.maxScore,i.score),u.fragmentError+=i.fragmentError,u.videoRanges[i.videoRange]=(u.videoRanges[i.videoRange]||0)+1,a&&a.forEach(c=>{if(!c)return;const d=e.groups[c];d&&(u.hasDefaultAudio=u.hasDefaultAudio||e.hasDefaultAudio?d.hasDefault:d.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(d.channels).forEach(f=>{u.channels[f]=(u.channels[f]||0)+d.channels[f]}))}),s},{})}function vE(t){if(!t)return t;const{lang:e,assocLang:n,characteristics:r,channels:s,audioCodec:i}=t;return{lang:e,assocLang:n,characteristics:r,channels:s,audioCodec:i}}function zi(t,e,n){if("attrs"in t){const r=e.indexOf(t);if(r!==-1)return r}for(let r=0;r<e.length;r++){const s=e[r];if(rl(t,s,n))return r}return-1}function rl(t,e,n){const{groupId:r,name:s,lang:i,assocLang:o,default:a}=t,u=t.forced;return(r===void 0||e.groupId===r)&&(s===void 0||e.name===s)&&(i===void 0||_4(i,e.lang))&&(i===void 0||e.assocLang===o)&&(a===void 0||e.default===a)&&(u===void 0||e.forced===u)&&(!("characteristics"in t)||A4(t.characteristics||"",e.characteristics))&&(n===void 0||n(t,e))}function _4(t,e="--"){return t.length===e.length?t===e:t.startsWith(e)||e.startsWith(t)}function A4(t,e=""){const n=t.split(","),r=e.split(",");return n.length===r.length&&!n.some(s=>r.indexOf(s)===-1)}function Ka(t,e){const{audioCodec:n,channels:r}=t;return(n===void 0||(e.audioCodec||"").substring(0,4)===n.substring(0,4))&&(r===void 0||r===(e.channels||"2"))}function I4(t,e,n,r,s){const i=e[r],a=e.reduce((f,h,p)=>{const g=h.uri;return(f[g]||(f[g]=[])).push(p),f},{})[i.uri];a.length>1&&(r=Math.max.apply(Math,a));const u=i.videoRange,l=i.frameRate,c=i.codecSet.substring(0,4),d=yE(e,r,f=>{if(f.videoRange!==u||f.frameRate!==l||f.codecSet.substring(0,4)!==c)return!1;const h=f.audioGroups,p=n.filter(g=>!h||h.indexOf(g.groupId)!==-1);return zi(t,p,s)>-1});return d>-1?d:yE(e,r,f=>{const h=f.audioGroups,p=n.filter(g=>!h||h.indexOf(g.groupId)!==-1);return zi(t,p,s)>-1})}function yE(t,e,n){for(let r=e;r>-1;r--)if(n(t[r]))return r;for(let r=e+1;r<t.length;r++)if(n(t[r]))return r;return-1}function yp(t,e){var n;return!!t&&t!==((n=e.loadLevelObj)==null?void 0:n.uri)}class R4 extends Fo{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.bwEstimator=void 0,this._abandonRulesCheck=n=>{var r;const{fragCurrent:s,partCurrent:i,hls:o}=this,{autoLevelEnabled:a,media:u}=o;if(!s||!u)return;const l=performance.now(),c=i?i.stats:s.stats,d=i?i.duration:s.duration,f=l-c.loading.start,h=o.minAutoLevel,p=s.level,g=this._nextAutoLevel;if(c.aborted||c.loaded&&c.loaded===c.total||p<=h){this.clearTimer(),this._nextAutoLevel=-1;return}if(!a)return;const v=g>-1&&g!==p,y=!!n||v;if(!y&&(u.paused||!u.playbackRate||!u.readyState))return;const w=o.mainForwardBufferInfo;if(!y&&w===null)return;const b=this.bwEstimator.getEstimateTTFB(),S=Math.abs(u.playbackRate);if(f<=Math.max(b,1e3*(d/(S*2))))return;const E=w?w.len/S:0,x=c.loading.first?c.loading.first-c.loading.start:-1,k=c.loaded&&x>-1,A=this.getBwEstimate(),C=o.levels,_=C[p],O=Math.max(c.loaded,Math.round(d*(s.bitrate||_.averageBitrate)/8));let P=k?f-x:f;P<1&&k&&(P=Math.min(f,c.loaded*8/A));const U=k?c.loaded*1e3/P:0,j=b/1e3,N=U?(O-c.loaded)/U:O*8/A+j;if(N<=E)return;const R=U?U*8:A,V=((r=(n==null?void 0:n.details)||this.hls.latestLevelDetails)==null?void 0:r.live)===!0,D=this.hls.config.abrBandWidthUpFactor;let M=Number.POSITIVE_INFINITY,K;for(K=p-1;K>h;K--){const te=C[K].maxBitrate,ue=!C[K].details||V;if(M=this.getTimeToLoadFrag(j,R,d*te,ue),M<Math.min(E,d+j))break}if(M>=N||M>d*10)return;k?this.bwEstimator.sample(f-Math.min(b,x),c.loaded):this.bwEstimator.sampleTTFB(f);const q=C[K].maxBitrate;this.getBwEstimate()*D>q&&this.resetEstimator(q);const ee=this.findBestLevel(q,h,K,0,E,1,1);ee>-1&&(K=ee),this.warn(`Fragment ${s.sn}${i?" part "+i.index:""} of level ${p} is loading too slowly;
      Fragment duration: ${s.duration.toFixed(3)}
      Time to underbuffer: ${E.toFixed(3)} s
      Estimated load time for current fragment: ${N.toFixed(3)} s
      Estimated load time for down switch fragment: ${M.toFixed(3)} s
      TTFB estimate: ${x|0} ms
      Current BW estimate: ${Ut(A)?A|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${K} @ ${q|0} bps`),o.nextLoadLevel=o.nextAutoLevel=K,this.clearTimer();const X=()=>{if(this.clearTimer(),this.fragCurrent===s&&this.hls.loadLevel===K&&K>0){const te=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${K>0?"and switching down":""}
      Fragment duration: ${s.duration.toFixed(3)} s
      Time to underbuffer: ${te.toFixed(3)} s`),s.abortRequests(),this.fragCurrent=this.partCurrent=null,K>h){let ue=this.findBestLevel(this.hls.levels[h].bitrate,h,K,0,te,1,1);ue===-1&&(ue=h),this.hls.nextLoadLevel=this.hls.nextAutoLevel=ue,this.resetEstimator(this.hls.levels[ue].bitrate)}}};v||N>M*2?X():this.timer=self.setInterval(X,M*1e3),o.trigger(G.FRAG_LOAD_EMERGENCY_ABORTED,{frag:s,part:i,stats:c})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new V3(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(G.MANIFEST_LOADING,this.onManifestLoading,this),e.on(G.FRAG_LOADING,this.onFragLoading,this),e.on(G.FRAG_LOADED,this.onFragLoaded,this),e.on(G.FRAG_BUFFERED,this.onFragBuffered,this),e.on(G.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(G.LEVEL_LOADED,this.onLevelLoaded,this),e.on(G.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(G.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(G.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(G.MANIFEST_LOADING,this.onManifestLoading,this),e.off(G.FRAG_LOADING,this.onFragLoading,this),e.off(G.FRAG_LOADED,this.onFragLoaded,this),e.off(G.FRAG_BUFFERED,this.onFragBuffered,this),e.off(G.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(G.LEVEL_LOADED,this.onLevelLoaded,this),e.off(G.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(G.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(G.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,n){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,n){const r=n.frag;if(!this.ignoreFragment(r)){if(!r.bitrateTest){var s;this.fragCurrent=r,this.partCurrent=(s=n.part)!=null?s:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,n){this.clearTimer()}onError(e,n){if(!n.fatal)switch(n.details){case Ge.BUFFER_ADD_CODEC_ERROR:case Ge.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Ge.FRAG_LOAD_TIMEOUT:{const r=n.frag,{fragCurrent:s,partCurrent:i}=this;if(r&&s&&r.sn===s.sn&&r.level===s.level){const o=performance.now(),a=i?i.stats:r.stats,u=o-a.loading.start,l=a.loading.first?a.loading.first-a.loading.start:-1;if(a.loaded&&l>-1){const d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(u-Math.min(d,l),a.loaded)}else this.bwEstimator.sampleTTFB(u)}break}}}getTimeToLoadFrag(e,n,r,s){const i=e+r/n,o=s?e+this.lastLevelLoadSec:0;return i+o}onLevelLoaded(e,n){const r=this.hls.config,{loading:s}=n.stats,i=s.end-s.first;Ut(i)&&(this.lastLevelLoadSec=i/1e3),n.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(n.levelInfo)}onFragLoaded(e,{frag:n,part:r}){const s=r?r.stats:n.stats;if(n.type===qt.MAIN&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const i=r?r.duration:n.duration,o=this.hls.levels[n.level],a=(o.loaded?o.loaded.bytes:0)+s.loaded,u=(o.loaded?o.loaded.duration:0)+i;o.loaded={bytes:a,duration:u},o.realBitrate=Math.round(8*a/u)}if(n.bitrateTest){const i={stats:s,frag:n,part:r,id:n.type};this.onFragBuffered(G.FRAG_BUFFERED,i),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}}onFragBuffered(e,n){const{frag:r,part:s}=n,i=s!=null&&s.stats.loaded?s.stats:r.stats;if(i.aborted||this.ignoreFragment(r))return;const o=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,i.loaded),i.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==qt.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:n}=this.hls,r=this.getBwEstimate(),s=this.hls.config.maxStarvationDelay,i=this.findBestLevel(r,n,e,0,s,1,1);if(i>-1)return i;const o=this.hls.firstLevel,a=Math.min(Math.max(o,n),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${o} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,r=this.bwEstimator.canEstimate(),s=this.lastLoadedFragLevel>-1;if(e!==-1&&(!r||!s||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const i=r&&s?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const o=this.hls.levels;if(o.length>Math.max(e,i)&&o[e].loadError<=o[i].loadError)return e}return this._nextAutoLevel=i,this.nextAutoLevelKey=this.getAutoLevelKey(),i}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:n,hls:r}=this;if(r.levels.length<=1)return r.loadLevel;const{maxAutoLevel:s,config:i,minAutoLevel:o}=r,a=n?n.duration:e?e.duration:0,u=this.getBwEstimate(),l=this.getStarvationDelay();let c=i.abrBandWidthFactor,d=i.abrBandWidthUpFactor;if(l){const v=this.findBestLevel(u,o,s,l,0,c,d);if(v>=0)return this.rebufferNotice=-1,v}let f=a?Math.min(a,i.maxStarvationDelay):i.maxStarvationDelay;if(!l){const v=this.bitrateTestDelay;v&&(f=(a?Math.min(a,i.maxLoadingDelay):i.maxLoadingDelay)-v,this.info(`bitrate test took ${Math.round(1e3*v)}ms, set first fragment max fetchDuration to ${Math.round(1e3*f)} ms`),c=d=1)}const h=this.findBestLevel(u,o,s,l,f,c,d);if(this.rebufferNotice!==h&&(this.rebufferNotice=h,this.info(`${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`)),h>-1)return h;const p=r.levels[o],g=r.loadLevelObj;return g&&(p==null?void 0:p.bitrate)<g.bitrate?o:r.loadLevel}getStarvationDelay(){const e=this.hls,n=e.media;if(!n)return 1/0;const r=n&&n.playbackRate!==0?Math.abs(n.playbackRate):1,s=e.mainForwardBufferInfo;return(s?s.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,n,r,s,i,o,a){var u;const l=s+i,c=this.lastLoadedFragLevel,d=c===-1?this.hls.firstLevel:c,{fragCurrent:f,partCurrent:h}=this,{levels:p,allAudioTracks:g,loadLevel:v,config:y}=this.hls;if(p.length===1)return 0;const w=p[d],b=!!((u=this.hls.latestLevelDetails)!=null&&u.live),S=v===-1||c===-1;let E,x="SDR",k=(w==null?void 0:w.frameRate)||0;const{audioPreference:A,videoPreference:C}=y,_=this.audioTracksByGroup||(this.audioTracksByGroup=X2(g));let O=-1;if(S){if(this.firstSelection!==-1)return this.firstSelection;const R=this.codecTiers||(this.codecTiers=k4(p,_,n,r)),V=C4(R,x,e,A,C),{codecSet:D,videoRanges:M,minFramerate:K,minBitrate:q,minIndex:ee,preferHDR:X}=V;O=ee,E=D,x=X?M[M.length-1]:M[0],k=K,e=Math.max(e,q),this.log(`picked start tier ${rr(V)}`)}else E=w==null?void 0:w.codecSet,x=w==null?void 0:w.videoRange;const P=h?h.duration:f?f.duration:0,U=this.bwEstimator.getEstimateTTFB()/1e3,j=[];for(let R=r;R>=n;R--){var N;const V=p[R],D=R>d;if(!V)continue;if(y.useMediaCapabilities&&!V.supportedResult&&!V.supportedPromise){const ue=navigator.mediaCapabilities;typeof(ue==null?void 0:ue.decodingInfo)=="function"&&(y4(V,_,x,k,e,A)||Cm(V.videoCodec))?(V.supportedPromise=Y2(V,_,ue),V.supportedPromise.then(he=>{if(!this.hls)return;V.supportedResult=he;const Z=this.hls.levels,ce=Z.indexOf(V);he.error?this.warn(`MediaCapabilities decodingInfo error: "${he.error}" for level ${ce} ${rr(he)}`):he.supported||(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${ce} ${rr(he)}`),ce>-1&&Z.length>1&&(this.log(`Removing unsupported level ${ce}`),this.hls.removeLevel(ce),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))})):V.supportedResult=G2}if((E&&V.codecSet!==E||x&&V.videoRange!==x||D&&k>V.frameRate||!D&&k>0&&k<V.frameRate||V.supportedResult&&!((N=V.supportedResult.decodingInfoResults)!=null&&N[0].smooth))&&(!S||R!==O)){j.push(R);continue}const M=V.details,K=(h?M==null?void 0:M.partTarget:M==null?void 0:M.averagetargetduration)||P;let q;D?q=a*e:q=o*e;const ee=P&&s>=P*2&&i===0?V.averageBitrate:V.maxBitrate,X=this.getTimeToLoadFrag(U,q,ee*K,M===void 0);if(q>=ee&&(R===c||V.loadError===0&&V.fragmentError===0)&&(X<=U||!Ut(X)||b&&!this.bitrateTestDelay||X<l)){const ue=this.forcedAutoLevel;return R!==v&&(ue===-1||ue!==v)&&(j.length&&this.trace(`Skipped level(s) ${j.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${p[j[0]].codecs}" ${p[j[0]].videoRange}; not compatible with "${E}" ${x}`),this.info(`switch candidate:${d}->${R} adjustedbw(${Math.round(q)})-bitrate=${Math.round(q-ee)} ttfb:${U.toFixed(1)} avgDuration:${K.toFixed(1)} maxFetchDuration:${l.toFixed(1)} fetchDuration:${X.toFixed(1)} firstSelection:${S} codecSet:${V.codecSet} videoRange:${V.videoRange} hls.loadLevel:${v}`)),S&&(this.firstSelection=R),R}}return-1}set nextAutoLevel(e){const n=this.deriveNextAutoLevel(e);this._nextAutoLevel!==n&&(this.nextAutoLevelKey="",this._nextAutoLevel=n)}deriveNextAutoLevel(e){const{maxAutoLevel:n,minAutoLevel:r}=this.hls;return Math.min(Math.max(e,r),n)}}const Q2={search:function(t,e){let n=0,r=t.length-1,s=null,i=null;for(;n<=r;){s=(n+r)/2|0,i=t[s];const o=e(i);if(o>0)n=s+1;else if(o<0)r=s-1;else return i}return null}};function L4(t,e,n){if(e===null||!Array.isArray(t)||!t.length||!Ut(e))return null;const r=t[0].programDateTime;if(e<(r||0))return null;const s=t[t.length-1].endProgramDateTime;if(e>=(s||0))return null;for(let i=0;i<t.length;++i){const o=t[i];if(D4(e,n,o))return o}return null}function fl(t,e,n=0,r=0,s=.005){let i=null;if(t){i=e[1+t.sn-e[0].sn]||null;const a=t.endDTS-n;a>0&&a<15e-7&&(n+=15e-7),i&&t.level!==i.level&&i.end<=t.end&&(i=e[2+t.sn-e[0].sn]||null)}else n===0&&e[0].start===0&&(i=e[0]);if(i&&((!t||t.level===i.level)&&bE(n,r,i)===0||P4(i,t,Math.min(s,r))))return i;const o=Q2.search(e,bE.bind(null,n,r));return o&&(o!==t||!i)?o:i}function P4(t,e,n){if(e&&e.start===0&&e.level<t.level&&(e.endPTS||0)>0){const r=e.tagList.reduce((s,i)=>(i[0]==="INF"&&(s+=parseFloat(i[1])),s),n);return t.start<=r}return!1}function bE(t=0,e=0,n){if(n.start<=t&&n.start+n.duration>t)return 0;const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=t?1:n.start-r>t&&n.start?-1:0}function D4(t,e,n){const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0))*1e3;return(n.endProgramDateTime||0)-r>t}function Z2(t,e,n){if(t&&t.startCC<=e&&t.endCC>=e){let r=t.fragments;const{fragmentHint:s}=t;s&&(r=r.concat(s));let i;return Q2.search(r,o=>o.cc<e?1:o.cc>e?-1:(i=o,o.end<=n?1:o.start>n?-1:0)),i||null}return null}function bp(t){switch(t.details){case Ge.FRAG_LOAD_TIMEOUT:case Ge.KEY_LOAD_TIMEOUT:case Ge.LEVEL_LOAD_TIMEOUT:case Ge.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function SE(t,e){const n=bp(e);return t.default[`${n?"timeout":"error"}Retry`]}function db(t,e){const n=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(n*t.retryDelayMs,t.maxRetryDelayMs)}function wE(t){return Hn(Hn({},t),{errorRetry:null,timeoutRetry:null})}function Sp(t,e,n,r){if(!t)return!1;const s=r==null?void 0:r.code,i=e<t.maxNumRetry&&(O4(s)||!!n);return t.shouldRetry?t.shouldRetry(t,e,n,r,i):i}function O4(t){return t===0&&navigator.onLine===!1||!!t&&(t<400||t>499)}var Yr={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},mi={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2};class $4 extends Fo{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(G.ERROR,this.onError,this),e.on(G.MANIFEST_LOADING,this.onManifestLoading,this),e.on(G.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(G.ERROR,this.onError,this),e.off(G.ERROR,this.onErrorOut,this),e.off(G.MANIFEST_LOADING,this.onManifestLoading,this),e.off(G.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===qt.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,n){var r;if(n.fatal)return;const s=this.hls,i=n.context;switch(n.details){case Ge.FRAG_LOAD_ERROR:case Ge.FRAG_LOAD_TIMEOUT:case Ge.KEY_LOAD_ERROR:case Ge.KEY_LOAD_TIMEOUT:n.errorAction=this.getFragRetryOrSwitchAction(n);return;case Ge.FRAG_PARSING_ERROR:if((r=n.frag)!=null&&r.gap){n.errorAction=cd();return}case Ge.FRAG_GAP:case Ge.FRAG_DECRYPT_ERROR:{n.errorAction=this.getFragRetryOrSwitchAction(n),n.errorAction.action=Yr.SendAlternateToPenaltyBox;return}case Ge.LEVEL_EMPTY_ERROR:case Ge.LEVEL_PARSING_ERROR:{var o,a;const l=n.parent===qt.MAIN?n.level:s.loadLevel;n.details===Ge.LEVEL_EMPTY_ERROR&&((o=n.context)!=null&&(a=o.levelDetails)!=null&&a.live)?n.errorAction=this.getPlaylistRetryOrSwitchAction(n,l):(n.levelRetry=!1,n.errorAction=this.getLevelSwitchAction(n,l))}return;case Ge.LEVEL_LOAD_ERROR:case Ge.LEVEL_LOAD_TIMEOUT:typeof(i==null?void 0:i.level)=="number"&&(n.errorAction=this.getPlaylistRetryOrSwitchAction(n,i.level));return;case Ge.AUDIO_TRACK_LOAD_ERROR:case Ge.AUDIO_TRACK_LOAD_TIMEOUT:case Ge.SUBTITLE_LOAD_ERROR:case Ge.SUBTITLE_TRACK_LOAD_TIMEOUT:if(i){const l=s.loadLevelObj;if(l&&(i.type===An.AUDIO_TRACK&&l.hasAudioGroup(i.groupId)||i.type===An.SUBTITLE_TRACK&&l.hasSubtitleGroup(i.groupId))){n.errorAction=this.getPlaylistRetryOrSwitchAction(n,s.loadLevel),n.errorAction.action=Yr.SendAlternateToPenaltyBox,n.errorAction.flags=mi.MoveAllAlternatesMatchingHost;return}}return;case Ge.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const l=s.loadLevelObj,c=l==null?void 0:l.attrs["HDCP-LEVEL"];c?n.errorAction={action:Yr.SendAlternateToPenaltyBox,flags:mi.MoveAllAlternatesMatchingHDCP,hdcpLevel:c}:this.keySystemError(n)}return;case Ge.BUFFER_ADD_CODEC_ERROR:case Ge.REMUX_ALLOC_ERROR:case Ge.BUFFER_APPEND_ERROR:if(!n.errorAction){var u;n.errorAction=this.getLevelSwitchAction(n,(u=n.level)!=null?u:s.loadLevel)}return;case Ge.INTERNAL_EXCEPTION:case Ge.BUFFER_APPENDING_ERROR:case Ge.BUFFER_FULL_ERROR:case Ge.LEVEL_SWITCH_ERROR:case Ge.BUFFER_STALLED_ERROR:case Ge.BUFFER_SEEK_OVER_HOLE:case Ge.BUFFER_NUDGE_ON_STALL:n.errorAction=cd();return}n.type===nn.KEY_SYSTEM_ERROR&&this.keySystemError(n)}keySystemError(e){const n=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,n)}getPlaylistRetryOrSwitchAction(e,n){const r=this.hls,s=SE(r.config.playlistLoadPolicy,e),i=this.playlistError++;if(Sp(s,i,bp(e),e.response))return{action:Yr.RetryRequest,flags:mi.None,retryConfig:s,retryCount:i};const a=this.getLevelSwitchAction(e,n);return s&&(a.retryConfig=s,a.retryCount=i),a}getFragRetryOrSwitchAction(e){const n=this.hls,r=this.getVariantLevelIndex(e.frag),s=n.levels[r],{fragLoadPolicy:i,keyLoadPolicy:o}=n.config,a=SE(e.details.startsWith("key")?o:i,e),u=n.levels.reduce((c,d)=>c+d.fragmentError,0);if(s&&(e.details!==Ge.FRAG_GAP&&s.fragmentError++,Sp(a,u,bp(e),e.response)))return{action:Yr.RetryRequest,flags:mi.None,retryConfig:a,retryCount:u};const l=this.getLevelSwitchAction(e,r);return a&&(l.retryConfig=a,l.retryCount=u),l}getLevelSwitchAction(e,n){const r=this.hls;n==null&&(n=r.loadLevel);const s=this.hls.levels[n];if(s){var i,o;const l=e.details;s.loadError++,l===Ge.BUFFER_APPEND_ERROR&&s.fragmentError++;let c=-1;const{levels:d,loadLevel:f,minAutoLevel:h,maxAutoLevel:p}=r;!r.autoLevelEnabled&&!r.config.preserveManualLevelOnError&&(r.loadLevel=-1);const g=(i=e.frag)==null?void 0:i.type,y=(g===qt.AUDIO&&l===Ge.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(l===Ge.BUFFER_ADD_CODEC_ERROR||l===Ge.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:x})=>s.audioCodec!==x),b=e.sourceBufferName==="video"&&(l===Ge.BUFFER_ADD_CODEC_ERROR||l===Ge.BUFFER_APPEND_ERROR)&&d.some(({codecSet:x,audioCodec:k})=>s.codecSet!==x&&s.audioCodec===k),{type:S,groupId:E}=(o=e.context)!=null?o:{};for(let x=d.length;x--;){const k=(x+f)%d.length;if(k!==f&&k>=h&&k<=p&&d[k].loadError===0){var a,u;const A=d[k];if(l===Ge.FRAG_GAP&&g===qt.MAIN&&e.frag){const C=d[k].details;if(C){const _=fl(e.frag,C.fragments,e.frag.start);if(_!=null&&_.gap)continue}}else{if(S===An.AUDIO_TRACK&&A.hasAudioGroup(E)||S===An.SUBTITLE_TRACK&&A.hasSubtitleGroup(E))continue;if(g===qt.AUDIO&&(a=s.audioGroups)!=null&&a.some(C=>A.hasAudioGroup(C))||g===qt.SUBTITLE&&(u=s.subtitleGroups)!=null&&u.some(C=>A.hasSubtitleGroup(C))||y&&s.audioCodec===A.audioCodec||!y&&s.audioCodec!==A.audioCodec||b&&s.codecSet===A.codecSet)continue}c=k;break}}if(c>-1&&r.loadLevel!==c)return e.levelRetry=!0,this.playlistError=0,{action:Yr.SendAlternateToPenaltyBox,flags:mi.None,nextAutoLevel:c}}return{action:Yr.SendAlternateToPenaltyBox,flags:mi.MoveAllAlternatesMatchingHost}}onErrorOut(e,n){var r;switch((r=n.errorAction)==null?void 0:r.action){case Yr.DoNothing:break;case Yr.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(n),!n.errorAction.resolved&&n.details!==Ge.FRAG_GAP?n.fatal=!0:/MediaSource readyState: ended/.test(n.error.message)&&(this.warn(`MediaSource ended after "${n.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(n.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const n=this.hls,r=e.errorAction;if(!r)return;const{flags:s,hdcpLevel:i,nextAutoLevel:o}=r;switch(s){case mi.None:this.switchLevel(e,o);break;case mi.MoveAllAlternatesMatchingHDCP:i&&(n.maxHdcpLevel=f0[f0.indexOf(i)-1],r.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${n.maxHdcpLevel}" or lower`);break}r.resolved||this.switchLevel(e,o)}switchLevel(e,n){if(n!==void 0&&e.errorAction&&(this.warn(`switching to level ${n} after ${e.details}`),this.hls.nextAutoLevel=n,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===Ge.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const r=W2(e.mimeType),s=this.hls.levels;for(let i=s.length;i--;)s[i][`${e.sourceBufferName}Codec`]===r&&this.hls.removeLevel(i)}}}function cd(t){const e={action:Yr.DoNothing,flags:mi.None};return t&&(e.resolved=!0),e}var xr={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class M4{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(G.MANIFEST_LOADING,this.onManifestLoading,this),e.on(G.BUFFER_APPENDED,this.onBufferAppended,this),e.on(G.FRAG_BUFFERED,this.onFragBuffered,this),e.on(G.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(G.MANIFEST_LOADING,this.onManifestLoading,this),e.off(G.BUFFER_APPENDED,this.onBufferAppended,this),e.off(G.FRAG_BUFFERED,this.onFragBuffered,this),e.off(G.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,n){const r=this.activePartLists[n];if(r)for(let s=r.length;s--;){const i=r[s];if(!i)break;const o=i.end;if(i.start<=e&&o!==null&&e<=o)return i}return this.getBufferedFrag(e,n)}getBufferedFrag(e,n){return this.getFragAtPos(e,n,!0)}getFragAtPos(e,n,r){const{fragments:s}=this,i=Object.keys(s);for(let o=i.length;o--;){const a=s[i[o]];if((a==null?void 0:a.body.type)===n&&(!r||a.buffered)){const u=a.body;if(u.start<=e&&e<=u.end)return u}}return null}detectEvictedFragments(e,n,r,s,i){this.timeRanges&&(this.timeRanges[e]=n);const o=(s==null?void 0:s.fragment.sn)||-1;Object.keys(this.fragments).forEach(a=>{const u=this.fragments[a];if(!u||o>=u.body.sn)return;if(!u.buffered&&(!u.loaded||i)){u.body.type===r&&this.removeFragment(u.body);return}const l=u.range[e];if(l){if(l.time.length===0){this.removeFragment(u.body);return}l.time.some(c=>{const d=!this.isTimeBuffered(c.startPTS,c.endPTS,n);return d&&this.removeFragment(u.body),d})}})}detectPartialFragments(e){const n=this.timeRanges;if(!n||e.frag.sn==="initSegment")return;const r=e.frag,s=Rl(r),i=this.fragments[s];if(!i||i.buffered&&r.gap)return;const o=!r.relurl;Object.keys(n).forEach(a=>{const u=r.elementaryStreams[a];if(!u)return;const l=n[a],c=o||u.partial===!0;i.range[a]=this.getBufferedTimes(r,e.part,c,l)}),i.loaded=null,Object.keys(i.range).length?(i.buffered=!0,(i.body.endList=r.endList||i.body.endList)&&(this.endListFragments[i.body.type]=i),$f(i)||this.removeParts(r.sn-1,r.type)):this.removeFragment(i.body)}removeParts(e,n){const r=this.activePartLists[n];r&&(this.activePartLists[n]=EE(r,s=>s.fragment.sn>=e))}fragBuffered(e,n){const r=Rl(e);let s=this.fragments[r];!s&&n&&(s=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,s.buffered=!0)}getBufferedTimes(e,n,r,s){const i={time:[],partial:r},o=e.start,a=e.end,u=e.minEndPTS||a,l=e.maxStartPTS||o;for(let c=0;c<s.length;c++){const d=s.start(c)-this.bufferPadding,f=s.end(c)+this.bufferPadding;if(l>=d&&u<=f){i.time.push({startPTS:Math.max(o,s.start(c)),endPTS:Math.min(a,s.end(c))});break}else if(o<f&&a>d){const h=Math.max(o,s.start(c)),p=Math.min(a,s.end(c));p>h&&(i.partial=!0,i.time.push({startPTS:h,endPTS:p}))}else if(a<=d)break}return i}getPartialFragment(e){let n=null,r,s,i,o=0;const{bufferPadding:a,fragments:u}=this;return Object.keys(u).forEach(l=>{const c=u[l];c&&$f(c)&&(s=c.body.start-a,i=c.body.end+a,e>=s&&e<=i&&(r=Math.min(e-s,i-e),o<=r&&(n=c.body,o=r)))}),n}isEndListAppended(e){const n=this.endListFragments[e];return n!==void 0&&(n.buffered||$f(n))}getState(e){const n=Rl(e),r=this.fragments[n];return r?r.buffered?$f(r)?xr.PARTIAL:xr.OK:xr.APPENDING:xr.NOT_LOADED}isTimeBuffered(e,n,r){let s,i;for(let o=0;o<r.length;o++){if(s=r.start(o)-this.bufferPadding,i=r.end(o)+this.bufferPadding,e>=s&&n<=i)return!0;if(n<=s)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,n){if(n.frag.sn==="initSegment"||n.frag.bitrateTest)return;const r=n.frag,s=n.part?null:n,i=Rl(r);this.fragments[i]={body:r,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,n){const{frag:r,part:s,timeRanges:i,type:o}=n;if(r.sn==="initSegment")return;const a=r.type;if(s){let l=this.activePartLists[a];l||(this.activePartLists[a]=l=[]),l.push(s)}this.timeRanges=i;const u=i[o];this.detectEvictedFragments(o,u,a,s)}onFragBuffered(e,n){this.detectPartialFragments(n)}hasFragment(e){const n=Rl(e);return!!this.fragments[n]}hasFragments(e){const{fragments:n}=this,r=Object.keys(n);if(!e)return r.length>0;for(let s=r.length;s--;){const i=n[r[s]];if((i==null?void 0:i.body.type)===e)return!0}return!1}hasParts(e){var n;return!!((n=this.activePartLists[e])!=null&&n.length)}removeFragmentsInRange(e,n,r,s,i){s&&!this.hasGaps||Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a)return;const u=a.body;u.type!==r||s&&!u.gap||u.start<n&&u.end>e&&(a.buffered||i)&&this.removeFragment(u)})}removeFragment(e){const n=Rl(e);e.clearElementaryStreamInfo();const r=this.activePartLists[e.type];if(r){const s=e.sn;this.activePartLists[e.type]=EE(r,i=>i.fragment.sn!==s)}delete this.fragments[n],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e,n;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const r=(e=this.hls)==null||(n=e.latestLevelDetails)==null?void 0:n.partList;r&&r.forEach(s=>s.clearElementaryStreamInfo())}}function $f(t){var e,n,r;return t.buffered&&(t.body.gap||((e=t.range.video)==null?void 0:e.partial)||((n=t.range.audio)==null?void 0:n.partial)||((r=t.range.audiovideo)==null?void 0:r.partial))}function Rl(t){return`${t.type}_${t.level}_${t.sn}`}function EE(t,e){return t.filter(n=>{const r=e(n);return r||n.clearElementaryStreamInfo(),r})}var wa={cbc:0,ctr:1};class N4{constructor(e,n,r){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=n,this.aesMode=r}decrypt(e,n){switch(this.aesMode){case wa.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},n,e);case wa.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},n,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function F4(t){const e=t.byteLength,n=e&&new DataView(t.buffer).getUint8(e-1);return n?t.slice(0,e-n):t}class B4{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const n=new DataView(e),r=new Uint32Array(4);for(let s=0;s<4;s++)r[s]=n.getUint32(s*4);return r}initTable(){const e=this.sBox,n=this.invSBox,r=this.subMix,s=r[0],i=r[1],o=r[2],a=r[3],u=this.invSubMix,l=u[0],c=u[1],d=u[2],f=u[3],h=new Uint32Array(256);let p=0,g=0,v=0;for(v=0;v<256;v++)v<128?h[v]=v<<1:h[v]=v<<1^283;for(v=0;v<256;v++){let y=g^g<<1^g<<2^g<<3^g<<4;y=y>>>8^y&255^99,e[p]=y,n[y]=p;const w=h[p],b=h[w],S=h[b];let E=h[y]*257^y*16843008;s[p]=E<<24|E>>>8,i[p]=E<<16|E>>>16,o[p]=E<<8|E>>>24,a[p]=E,E=S*16843009^b*65537^w*257^p*16843008,l[y]=E<<24|E>>>8,c[y]=E<<16|E>>>16,d[y]=E<<8|E>>>24,f[y]=E,p?(p=w^h[h[h[S^w]]],g^=h[h[g]]):p=g=1}}expandKey(e){const n=this.uint8ArrayToUint32Array_(e);let r=!0,s=0;for(;s<n.length&&r;)r=n[s]===this.key[s],s++;if(r)return;this.key=n;const i=this.keySize=n.length;if(i!==4&&i!==6&&i!==8)throw new Error("Invalid aes key size="+i);const o=this.ksRows=(i+6+1)*4;let a,u;const l=this.keySchedule=new Uint32Array(o),c=this.invKeySchedule=new Uint32Array(o),d=this.sBox,f=this.rcon,h=this.invSubMix,p=h[0],g=h[1],v=h[2],y=h[3];let w,b;for(a=0;a<o;a++){if(a<i){w=l[a]=n[a];continue}b=w,a%i===0?(b=b<<8|b>>>24,b=d[b>>>24]<<24|d[b>>>16&255]<<16|d[b>>>8&255]<<8|d[b&255],b^=f[a/i|0]<<24):i>6&&a%i===4&&(b=d[b>>>24]<<24|d[b>>>16&255]<<16|d[b>>>8&255]<<8|d[b&255]),l[a]=w=(l[a-i]^b)>>>0}for(u=0;u<o;u++)a=o-u,u&3?b=l[a]:b=l[a-4],u<4||a<=4?c[u]=b:c[u]=p[d[b>>>24]]^g[d[b>>>16&255]]^v[d[b>>>8&255]]^y[d[b&255]],c[u]=c[u]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,n,r){const s=this.keySize+6,i=this.invKeySchedule,o=this.invSBox,a=this.invSubMix,u=a[0],l=a[1],c=a[2],d=a[3],f=this.uint8ArrayToUint32Array_(r);let h=f[0],p=f[1],g=f[2],v=f[3];const y=new Int32Array(e),w=new Int32Array(y.length);let b,S,E,x,k,A,C,_,O,P,U,j,N,R;const V=this.networkToHostOrderSwap;for(;n<y.length;){for(O=V(y[n]),P=V(y[n+1]),U=V(y[n+2]),j=V(y[n+3]),k=O^i[0],A=j^i[1],C=U^i[2],_=P^i[3],N=4,R=1;R<s;R++)b=u[k>>>24]^l[A>>16&255]^c[C>>8&255]^d[_&255]^i[N],S=u[A>>>24]^l[C>>16&255]^c[_>>8&255]^d[k&255]^i[N+1],E=u[C>>>24]^l[_>>16&255]^c[k>>8&255]^d[A&255]^i[N+2],x=u[_>>>24]^l[k>>16&255]^c[A>>8&255]^d[C&255]^i[N+3],k=b,A=S,C=E,_=x,N=N+4;b=o[k>>>24]<<24^o[A>>16&255]<<16^o[C>>8&255]<<8^o[_&255]^i[N],S=o[A>>>24]<<24^o[C>>16&255]<<16^o[_>>8&255]<<8^o[k&255]^i[N+1],E=o[C>>>24]<<24^o[_>>16&255]<<16^o[k>>8&255]<<8^o[A&255]^i[N+2],x=o[_>>>24]<<24^o[k>>16&255]<<16^o[A>>8&255]<<8^o[C&255]^i[N+3],w[n]=V(b^h),w[n+1]=V(x^p),w[n+2]=V(E^g),w[n+3]=V(S^v),h=O,p=P,g=U,v=j,n=n+4}return w.buffer}}class V4{constructor(e,n,r){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=n,this.aesMode=r}expandKey(){const e=U4(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function U4(t){switch(t){case wa.cbc:return"AES-CBC";case wa.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${t}`)}}const H4=16;class fb{constructor(e,{removePKCS7Padding:n=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=n,n)try{const r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:n}=this;if(!e||n)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?F4(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,n,r,s){return this.useSoftware?new Promise((i,o)=>{const a=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(a,n,r,s);const u=this.flush();u?i(u.buffer):o(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),n,r,s)}softwareDecrypt(e,n,r,s){const{currentIV:i,currentResult:o,remainderData:a}=this;if(s!==wa.cbc||n.byteLength!==16)return Nn.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),a&&(e=ri(a,e),this.remainderData=null);const u=this.getValidChunk(e);if(!u.length)return null;i&&(r=i);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new B4),l.expandKey(n);const c=o;return this.currentResult=l.decrypt(u.buffer,0,r),this.currentIV=u.slice(-16).buffer,c||null}webCryptoDecrypt(e,n,r,s){if(this.key!==n||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,n,r,s));this.key=n,this.fastAesKey=new V4(this.subtle,n,s)}return this.fastAesKey.expandKey().then(i=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new N4(this.subtle,new Uint8Array(r),s).decrypt(e.buffer,i)):Promise.reject(new Error("web crypto not initialized"))).catch(i=>(Nn.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,n,r,s)))}onWebCryptoError(e,n,r,s){const i=this.enableSoftwareAES;if(i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,n,r,s);const o=this.flush();if(o)return o.buffer}throw new Error("WebCrypto"+(i?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let n=e;const r=e.length-e.length%H4;return r!==e.length&&(n=e.slice(0,r),this.remainderData=e.slice(r)),n}logOnce(e){this.logEnabled&&(Nn.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const xE=Math.pow(2,17);class j4{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,n){const r=e.url;if(!r)return Promise.reject(new go({type:nn.NETWORK_ERROR,details:Ge.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${r?"part list":"url"}`),networkDetails:null}));this.abort();const s=this.config,i=s.fLoader,o=s.loader;return new Promise((a,u)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(p=>p[0]==="GAP")){u(CE(e));return}else e.gap=!1;const l=this.loader=i?new i(s):new o(s),c=TE(e);e.loader=l;const d=wE(s.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:xE};e.stats=l.stats;const h={onSuccess:(p,g,v,y)=>{this.resetLoader(e,l);let w=p.data;v.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(w.slice(0,16)),w=w.slice(16)),a({frag:e,part:null,payload:w,networkDetails:y})},onError:(p,g,v,y)=>{this.resetLoader(e,l),u(new go({type:nn.NETWORK_ERROR,details:Ge.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Hn({url:r,data:void 0},p),error:new Error(`HTTP Error ${p.code} ${p.text}`),networkDetails:v,stats:y}))},onAbort:(p,g,v)=>{this.resetLoader(e,l),u(new go({type:nn.NETWORK_ERROR,details:Ge.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:v,stats:p}))},onTimeout:(p,g,v)=>{this.resetLoader(e,l),u(new go({type:nn.NETWORK_ERROR,details:Ge.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:v,stats:p}))}};n&&(h.onProgress=(p,g,v,y)=>n({frag:e,part:null,payload:v,networkDetails:y})),l.load(c,f,h)})}loadPart(e,n,r){this.abort();const s=this.config,i=s.fLoader,o=s.loader;return new Promise((a,u)=>{if(this.loader&&this.loader.destroy(),e.gap||n.gap){u(CE(e,n));return}const l=this.loader=i?new i(s):new o(s),c=TE(e,n);e.loader=l;const d=wE(s.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:xE};n.stats=l.stats,l.load(c,f,{onSuccess:(h,p,g,v)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,n);const y={frag:e,part:n,payload:h.data,networkDetails:v};r(y),a(y)},onError:(h,p,g,v)=>{this.resetLoader(e,l),u(new go({type:nn.NETWORK_ERROR,details:Ge.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:n,response:Hn({url:c.url,data:void 0},h),error:new Error(`HTTP Error ${h.code} ${h.text}`),networkDetails:g,stats:v}))},onAbort:(h,p,g)=>{e.stats.aborted=n.stats.aborted,this.resetLoader(e,l),u(new go({type:nn.NETWORK_ERROR,details:Ge.INTERNAL_ABORTED,fatal:!1,frag:e,part:n,error:new Error("Aborted"),networkDetails:g,stats:h}))},onTimeout:(h,p,g)=>{this.resetLoader(e,l),u(new go({type:nn.NETWORK_ERROR,details:Ge.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:n,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:g,stats:h}))}})})}updateStatsFromPart(e,n){const r=e.stats,s=n.stats,i=s.total;if(r.loaded+=s.loaded,i){const u=Math.round(e.duration/n.duration),l=Math.min(Math.round(r.loaded/i),u),d=(u-l)*Math.round(r.loaded/l);r.total=r.loaded+d}else r.total=Math.max(r.loaded,r.total);const o=r.loading,a=s.loading;o.start?o.first+=a.first-a.start:(o.start=a.start,o.first=a.first),o.end=a.end}resetLoader(e,n){e.loader=null,this.loader===n&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),n.destroy()}}function TE(t,e=null){const n=e||t,r={frag:t,part:e,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},s=n.byteRangeStartOffset,i=n.byteRangeEndOffset;if(Ut(s)&&Ut(i)){var o;let a=s,u=i;if(t.sn==="initSegment"&&K4((o=t.decryptdata)==null?void 0:o.method)){const l=i-s;l%16&&(u=i+(16-l%16)),s!==0&&(r.resetIV=!0,a=s-16)}r.rangeStart=a,r.rangeEnd=u}return r}function CE(t,e){const n=new Error(`GAP ${t.gap?"tag":"attribute"} found`),r={type:nn.MEDIA_ERROR,details:Ge.FRAG_GAP,fatal:!1,frag:t,error:n,networkDetails:null};return e&&(r.part=e),(e||t).stats.aborted=!0,new go(r)}function K4(t){return t==="AES-128"||t==="AES-256"}class go extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class J2 extends Fo{constructor(e,n){super(e,n),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class hb{constructor(e,n,r,s=0,i=-1,o=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Mf(),this.buffering={audio:Mf(),video:Mf(),audiovideo:Mf()},this.level=e,this.sn=n,this.id=r,this.size=s,this.part=i,this.partial=o}}function Mf(){return{start:0,executeStart:0,executeEnd:0,end:0}}const kE={length:0,start:()=>0,end:()=>0};class pn{static isBuffered(e,n){if(e){const r=pn.getBuffered(e);for(let s=r.length;s--;)if(n>=r.start(s)&&n<=r.end(s))return!0}return!1}static bufferedRanges(e){if(e){const n=pn.getBuffered(e);return pn.timeRangesToArray(n)}return[]}static timeRangesToArray(e){const n=[];for(let r=0;r<e.length;r++)n.push({start:e.start(r),end:e.end(r)});return n}static bufferInfo(e,n,r){if(e){const s=pn.bufferedRanges(e);if(s.length)return pn.bufferedInfo(s,n,r)}return{len:0,start:n,end:n,bufferedIndex:-1}}static bufferedInfo(e,n,r){n=Math.max(0,n),e.length>1&&e.sort((c,d)=>c.start-d.start||d.end-c.end);let s=-1,i=[];if(r)for(let c=0;c<e.length;c++){n>=e[c].start&&n<=e[c].end&&(s=c);const d=i.length;if(d){const f=i[d-1].end;e[c].start-f<r?e[c].end>f&&(i[d-1].end=e[c].end):i.push(e[c])}else i.push(e[c])}else i=e;let o=0,a,u=n,l=n;for(let c=0;c<i.length;c++){const d=i[c].start,f=i[c].end;if(s===-1&&n>=d&&n<=f&&(s=c),n+r>=d&&n<f)u=d,l=f,o=l-n;else if(n+r<d){a=d;break}}return{len:o,start:u||0,end:l||0,nextStart:a,buffered:e,bufferedIndex:s}}static getBuffered(e){try{return e.buffered||kE}catch(n){return Nn.log("failed to get media.buffered",n),kE}}}const eA=/\{\$([a-zA-Z0-9-_]+)\}/g;function _E(t){return eA.test(t)}function h0(t,e){if(t.variableList!==null||t.hasVariableRefs){const n=t.variableList;return e.replace(eA,r=>{const s=r.substring(2,r.length-1),i=n==null?void 0:n[s];return i===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),r):i})}return e}function AE(t,e,n){let r=t.variableList;r||(t.variableList=r={});let s,i;if("QUERYPARAM"in e){s=e.QUERYPARAM;try{const o=new self.URL(n).searchParams;if(o.has(s))i=o.get(s);else throw new Error(`"${s}" does not match any query parameter in URI: "${n}"`)}catch(o){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${o.message}`))}}else s=e.NAME,i=e.VALUE;s in r?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${s}"`)):r[s]=i||""}function z4(t,e,n){const r=e.IMPORT;if(n&&r in n){let s=t.variableList;s||(t.variableList=s={}),s[r]=n[r]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}const W4=/^(\d+)x(\d+)$/,IE=/(.+?)=(".*?"|.*?)(?:,|$)/g;class ar{constructor(e,n){typeof e=="string"&&(e=ar.parseAttrList(e,n)),Kn(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const n=parseInt(this[e],10);return n>Number.MAX_SAFE_INTEGER?1/0:n}hexadecimalInteger(e){if(this[e]){let n=(this[e]||"0x").slice(2);n=(n.length&1?"0":"")+n;const r=new Uint8Array(n.length/2);for(let s=0;s<n.length/2;s++)r[s]=parseInt(n.slice(s*2,s*2+2),16);return r}return null}hexadecimalIntegerAsNumber(e){const n=parseInt(this[e],16);return n>Number.MAX_SAFE_INTEGER?1/0:n}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,n){const r=this[e];return r?parseFloat(r):n}enumeratedString(e){return this[e]}enumeratedStringList(e,n){const r=this[e];return(r?r.split(/[ ,]+/):[]).reduce((s,i)=>(s[i.toLowerCase()]=!0,s),n)}bool(e){return this[e]==="YES"}decimalResolution(e){const n=W4.exec(this[e]);if(n!==null)return{width:parseInt(n[1],10),height:parseInt(n[2],10)}}static parseAttrList(e,n){let r;const s={},i='"';for(IE.lastIndex=0;(r=IE.exec(e))!==null;){const o=r[1].trim();let a=r[2];const u=a.indexOf(i)===0&&a.lastIndexOf(i)===a.length-1;let l=!1;if(u)a=a.slice(1,-1);else switch(o){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":l=!0}if(n&&(u||l))a=h0(n,a);else if(!l&&!u)switch(o){case"CLOSED-CAPTIONS":if(a==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Nn.warn(`${e}: attribute ${o} is missing quotes`)}s[o]=a}return s}}const G4="com.apple.hls.interstitial";function q4(t){return t!=="ID"&&t!=="CLASS"&&t!=="CUE"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function Y4(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"||t==="SCTE35-CMD"}class tA{constructor(e,n,r=0){var s;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(n==null?void 0:n.tagAnchor)||null,this.tagOrder=(s=n==null?void 0:n.tagOrder)!=null?s:r,n){const i=n.attr;for(const o in i)if(Object.prototype.hasOwnProperty.call(e,o)&&e[o]!==i[o]){Nn.warn(`DATERANGE tag attribute: "${o}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=o;break}e=Kn(new ar({}),i,e)}if(this.attr=e,n?(this._startDate=n._startDate,this._cue=n._cue,this._endDate=n._endDate,this._dateAtEnd=n._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const i=(n==null?void 0:n.endDate)||new Date(this.attr["END-DATE"]);Ut(i.getTime())&&(this._endDate=i)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(Nn.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const n=this.duration;return n!==null?this._dateAtEnd=new Date(this._startDate.getTime()+n*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Ut(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===G4}get isValid(){return!!this.id&&!this._badValueForSameId&&Ut(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const X4=10;class Q4{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const n=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!n||!this.live,this.advanced=this.endSN>e.endSN||n>0||n===0&&r>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}get hasProgramDateTime(){return this.fragments.length?Ut(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||X4}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const n=this.lastPartIndex;if(n!==-1){for(let r=e.length;r--;)if(e[r].index>n)return e[r].index;return n}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function tu(t){return t==="AES-128"||t==="AES-256"||t==="AES-256-CTR"}function pb(t){switch(t){case"AES-128":case"AES-256":return wa.cbc;case"AES-256-CTR":return wa.ctr;default:throw new Error(`invalid full segment method ${t}`)}}function mb(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function p0(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}function Z4(t){const e=p0(t).subarray(0,16),n=new Uint8Array(16);return n.set(e,16-e.length),n}function J4(t){const e=function(r,s,i){const o=r[s];r[s]=r[i],r[i]=o};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function e8(t){const e=t.split(":");let n=null;if(e[0]==="data"&&e.length===2){const r=e[1].split(";"),s=r[r.length-1].split(",");if(s.length===2){const i=s[0]==="base64",o=s[1];i?(r.splice(-1,1),n=mb(o)):n=Z4(o)}}return n}const wp=typeof self<"u"?self:void 0;var jn={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Ss={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function wh(t){switch(t){case Ss.FAIRPLAY:return jn.FAIRPLAY;case Ss.PLAYREADY:return jn.PLAYREADY;case Ss.WIDEVINE:return jn.WIDEVINE;case Ss.CLEARKEY:return jn.CLEARKEY}}var Nf={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function Yg(t){if(t===Nf.WIDEVINE)return jn.WIDEVINE;if(t===Nf.PLAYREADY)return jn.PLAYREADY;if(t===Nf.CENC||t===Nf.CLEARKEY)return jn.CLEARKEY}function Ff(t){switch(t){case jn.FAIRPLAY:return Ss.FAIRPLAY;case jn.PLAYREADY:return Ss.PLAYREADY;case jn.WIDEVINE:return Ss.WIDEVINE;case jn.CLEARKEY:return Ss.CLEARKEY}}function Tc(t){const{drmSystems:e,widevineLicenseUrl:n}=t,r=e?[jn.FAIRPLAY,jn.WIDEVINE,jn.PLAYREADY,jn.CLEARKEY].filter(s=>!!e[s]):[];return!r[jn.WIDEVINE]&&n&&r.push(jn.WIDEVINE),r}const nA=function(t){return wp!=null&&(t=wp.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function t8(t,e,n,r){let s;switch(t){case jn.FAIRPLAY:s=["cenc","sinf"];break;case jn.WIDEVINE:case jn.PLAYREADY:s=["cenc"];break;case jn.CLEARKEY:s=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return n8(s,e,n,r)}function n8(t,e,n,r){return[{initDataTypes:t,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:e.map(i=>({contentType:`audio/mp4; codecs=${i}`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:n.map(i=>({contentType:`video/mp4; codecs=${i}`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}function r8(t){var e;return t.sessionType==="persistent-license"||!!((e=t.sessionTypes)!=null&&e.some(n=>n==="persistent-license"))}function rA(t){const e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),n=String.fromCharCode.apply(null,Array.from(e)),r=n.substring(n.indexOf("<"),n.length),o=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(o){const a=o.childNodes[0]?o.childNodes[0].nodeValue:o.getAttribute("VALUE");if(a){const u=mb(a).subarray(0,16);return J4(u),u}}return null}let Bf={};class dd{static clearKeyUriToKeyIdMap(){Bf={}}constructor(e,n,r,s=[1],i=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=n,this.keyFormat=r,this.keyFormatVersions=s,this.iv=i,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!tu(e)}isSupported(){if(this.method){if(tu(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Ss.FAIRPLAY:case Ss.WIDEVINE:case Ss.PLAYREADY:case Ss.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(tu(this.method)&&this.uri&&!this.iv){typeof e!="number"&&(Nn.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const r=s8(e);return new dd(this.method,this.uri,"identity",this.keyFormatVersions,r)}const n=e8(this.uri);if(n)switch(this.keyFormat){case Ss.WIDEVINE:this.pssh=n,n.length>=22&&(this.keyId=n.subarray(n.length-22,n.length-6));break;case Ss.PLAYREADY:{const r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=c4(r,null,n),this.keyId=rA(n);break}default:{let r=n.subarray(0,16);if(r.length!==16){const s=new Uint8Array(16);s.set(r,16-r.length),r=s}this.keyId=r;break}}if(!this.keyId||this.keyId.byteLength!==16){let r=Bf[this.uri];if(!r){const s=Object.keys(Bf).length%Number.MAX_SAFE_INTEGER;r=new Uint8Array(16),new DataView(r.buffer,12,4).setUint32(0,s),Bf[this.uri]=r}this.keyId=r}return this}}function s8(t){const e=new Uint8Array(16);for(let n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e}const RE=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,LE=/#EXT-X-MEDIA:(.*)/g,i8=/^#EXT(?:INF|-X-TARGETDURATION):/m,Xg=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),o8=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Wi{static findGroup(e,n){for(let r=0;r<e.length;r++){const s=e[r];if(s.id===n)return s}}static resolve(e,n){return lb.buildAbsoluteURL(n,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return i8.test(e)}static parseMasterPlaylist(e,n){const r=_E(e),s={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:r},i=[];RE.lastIndex=0;let o;for(;(o=RE.exec(e))!=null;)if(o[1]){var a;const l=new ar(o[1],s),c=h0(s,o[2]),d={attrs:l,bitrate:l.decimalInteger("BANDWIDTH")||l.decimalInteger("AVERAGE-BANDWIDTH"),name:l.NAME,url:Wi.resolve(c,n)},f=l.decimalResolution("RESOLUTION");f&&(d.width=f.width,d.height=f.height),OE(l.CODECS,d);const h=l["SUPPLEMENTAL-CODECS"];h&&(d.supplemental={},OE(h,d.supplemental)),(a=d.unknownCodecs)!=null&&a.length||i.push(d),s.levels.push(d)}else if(o[3]){const l=o[3],c=o[4];switch(l){case"SESSION-DATA":{const d=new ar(c,s),f=d["DATA-ID"];f&&(s.sessionData===null&&(s.sessionData={}),s.sessionData[f]=d);break}case"SESSION-KEY":{const d=PE(c,n,s);d.encrypted&&d.isSupported()?(s.sessionKeys===null&&(s.sessionKeys=[]),s.sessionKeys.push(d)):Nn.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${c}"`);break}case"DEFINE":{{const d=new ar(c,s);AE(s,d,n)}break}case"CONTENT-STEERING":{const d=new ar(c,s);s.contentSteering={uri:Wi.resolve(d["SERVER-URI"],n),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{s.startTimeOffset=DE(c);break}}}const u=i.length>0&&i.length<s.levels.length;return s.levels=u?i:s.levels,s.levels.length===0&&(s.playlistParsingError=new Error("no levels found in manifest")),s}static parseMasterPlaylistMedia(e,n,r){let s;const i={},o=r.levels,a={AUDIO:o.map(l=>({id:l.attrs.AUDIO,audioCodec:l.audioCodec})),SUBTITLES:o.map(l=>({id:l.attrs.SUBTITLES,textCodec:l.textCodec})),"CLOSED-CAPTIONS":[]};let u=0;for(LE.lastIndex=0;(s=LE.exec(e))!==null;){const l=new ar(s[1],r),c=l.TYPE;if(c){const d=a[c],f=i[c]||[];i[c]=f;const h=l.LANGUAGE,p=l["ASSOC-LANGUAGE"],g=l.CHANNELS,v=l.CHARACTERISTICS,y=l["INSTREAM-ID"],w={attrs:l,bitrate:0,id:u++,groupId:l["GROUP-ID"]||"",name:l.NAME||h||"",type:c,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:h,url:l.URI?Wi.resolve(l.URI,n):""};if(p&&(w.assocLang=p),g&&(w.channels=g),v&&(w.characteristics=v),y&&(w.instreamId=y),d!=null&&d.length){const b=Wi.findGroup(d,w.groupId)||d[0];$E(w,b,"audioCodec"),$E(w,b,"textCodec")}f.push(w)}}return i}static parseLevelPlaylist(e,n,r,s,i,o){var a;const u={url:n},l=new Q4(n),c=l.fragments,d=[];let f=null,h=0,p=0,g=0,v=0,y=0,w=null,b=new zg(s,u),S,E,x,k=-1,A=!1,C=null,_;if(Xg.lastIndex=0,l.m3u8=e,l.hasVariableRefs=_E(e),((a=Xg.exec(e))==null?void 0:a[0])!=="#EXTM3U")return l.playlistParsingError=new Error("Missing format identifier #EXTM3U"),l;for(;(S=Xg.exec(e))!==null;){A&&(A=!1,b=new zg(s,u),b.playlistOffset=g,b.start=g,b.sn=h,b.cc=v,y&&(b.bitrate=y),b.level=r,f&&(b.initSegment=f,f.rawProgramDateTime&&(b.rawProgramDateTime=f.rawProgramDateTime,f.rawProgramDateTime=null),C&&(b.setByteRange(C),C=null)));const j=S[1];if(j){b.duration=parseFloat(j);const N=(" "+S[2]).slice(1);b.title=N||null,b.tagList.push(N?["INF",j,N]:["INF",j])}else if(S[3]){if(Ut(b.duration)){b.playlistOffset=g,b.start=g,x&&NE(b,x,l),b.sn=h,b.level=r,b.cc=v,c.push(b);const N=(" "+S[3]).slice(1);b.relurl=h0(l,N),m0(b,w,d),w=b,g+=b.duration,h++,p=0,A=!0}}else{if(S=S[0].match(o8),!S){Nn.warn("No matches on slow regex match for level playlist!");continue}for(E=1;E<S.length&&S[E]===void 0;E++);const N=(" "+S[E]).slice(1),R=(" "+S[E+1]).slice(1),V=S[E+2]?(" "+S[E+2]).slice(1):null;switch(N){case"BYTERANGE":w?b.setByteRange(R,w):b.setByteRange(R);break;case"PROGRAM-DATE-TIME":b.rawProgramDateTime=R,b.tagList.push(["PROGRAM-DATE-TIME",R]),k===-1&&(k=c.length);break;case"PLAYLIST-TYPE":l.type&&fo(l,N,S),l.type=R.toUpperCase();break;case"MEDIA-SEQUENCE":l.startSN!==0?fo(l,N,S):c.length>0&&FE(l,N,S),h=l.startSN=parseInt(R);break;case"SKIP":{l.skippedSegments&&fo(l,N,S);const D=new ar(R,l),M=D.decimalInteger("SKIPPED-SEGMENTS");if(Ut(M)){l.skippedSegments+=M;for(let q=M;q--;)c.push(null);h+=M}const K=D.enumeratedString("RECENTLY-REMOVED-DATERANGES");K&&(l.recentlyRemovedDateranges=(l.recentlyRemovedDateranges||[]).concat(K.split("	")));break}case"TARGETDURATION":l.targetduration!==0&&fo(l,N,S),l.targetduration=Math.max(parseInt(R),1);break;case"VERSION":l.version!==null&&fo(l,N,S),l.version=parseInt(R);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":l.live||fo(l,N,S),l.live=!1;break;case"#":(R||V)&&b.tagList.push(V?[R,V]:[R]);break;case"DISCONTINUITY":v++,b.tagList.push(["DIS"]);break;case"GAP":b.gap=!0,b.tagList.push([N]);break;case"BITRATE":b.tagList.push([N,R]),y=parseInt(R)*1e3,Ut(y)?b.bitrate=y:y=0;break;case"DATERANGE":{const D=new ar(R,l),M=new tA(D,l.dateRanges[D.ID],l.dateRangeTagCount);l.dateRangeTagCount++,M.isValid||l.skippedSegments?l.dateRanges[M.id]=M:Nn.warn(`Ignoring invalid DATERANGE tag: "${R}"`),b.tagList.push(["EXT-X-DATERANGE",R]);break}case"DEFINE":{{const D=new ar(R,l);"IMPORT"in D?z4(l,D,o):AE(l,D,n)}break}case"DISCONTINUITY-SEQUENCE":l.startCC!==0?fo(l,N,S):c.length>0&&FE(l,N,S),l.startCC=v=parseInt(R);break;case"KEY":{const D=PE(R,n,l);if(D.isSupported()){if(D.method==="NONE"){x=void 0;break}x||(x={}),x[D.keyFormat]&&(x=Kn({},x)),x[D.keyFormat]=D}else Nn.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${R}"`);break}case"START":l.startTimeOffset=DE(R);break;case"MAP":{const D=new ar(R,l);if(b.duration){const M=new zg(s,u);ME(M,D,r,x),f=M,b.initSegment=f,f.rawProgramDateTime&&!b.rawProgramDateTime&&(b.rawProgramDateTime=f.rawProgramDateTime)}else{const M=b.byteRangeEndOffset;if(M){const K=b.byteRangeStartOffset;C=`${M-K}@${K}`}else C=null;ME(b,D,r,x),f=b,A=!0}f.cc=v;break}case"SERVER-CONTROL":{_&&fo(l,N,S),_=new ar(R),l.canBlockReload=_.bool("CAN-BLOCK-RELOAD"),l.canSkipUntil=_.optionalFloat("CAN-SKIP-UNTIL",0),l.canSkipDateRanges=l.canSkipUntil>0&&_.bool("CAN-SKIP-DATERANGES"),l.partHoldBack=_.optionalFloat("PART-HOLD-BACK",0),l.holdBack=_.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{l.partTarget&&fo(l,N,S);const D=new ar(R);l.partTarget=D.decimalFloatingPoint("PART-TARGET");break}case"PART":{let D=l.partList;D||(D=l.partList=[]);const M=p>0?D[D.length-1]:void 0,K=p++,q=new ar(R,l),ee=new X3(q,b,u,K,M);D.push(ee),b.duration+=ee.duration;break}case"PRELOAD-HINT":{const D=new ar(R,l);l.preloadHint=D;break}case"RENDITION-REPORT":{const D=new ar(R,l);l.renditionReports=l.renditionReports||[],l.renditionReports.push(D);break}default:Nn.warn(`line parsed but not handled: ${S}`);break}}}w&&!w.relurl?(c.pop(),g-=w.duration,l.partList&&(l.fragmentHint=w)):l.partList&&(m0(b,w,d),b.cc=v,l.fragmentHint=b,x&&NE(b,x,l)),l.targetduration||(l.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const O=c.length,P=c[0],U=c[O-1];if(g+=l.skippedSegments*l.targetduration,g>0&&O&&U){l.averagetargetduration=g/O;const j=U.sn;l.endSN=j!=="initSegment"?j:0,l.live||(U.endList=!0),P&&l.startCC===void 0&&(l.startCC=P.cc),k>0&&(l8(c,k),P&&d.unshift(P))}else l.endSN=0,l.startCC=0;return l.fragmentHint&&(g+=l.fragmentHint.duration),l.totalduration=g,d.length&&l.dateRangeTagCount&&P&&sA(d,l),l.endCC=v,l}}function sA(t,e){const n=t.length,r=t[n-1],s=e.live?1/0:e.totalduration,i=Object.keys(e.dateRanges);for(let o=i.length;o--;){const a=e.dateRanges[i[o]],u=a.startDate.getTime();a.tagAnchor=r.ref;for(let l=n;l--;){const c=a8(e,u,t,l,s);if(c!==-1){a.tagAnchor=e.fragments[c].ref;break}}}}function a8(t,e,n,r,s){const i=n[r];if(i){const a=i.programDateTime;if(e>=a||r===0){var o;const u=(((o=n[r+1])==null?void 0:o.start)||s)-i.start;if(e<=a+u*1e3){const l=n[r].sn-t.startSN,c=t.fragments;if(c.length>n.length){const f=(n[r+1]||c[c.length-1]).sn-t.startSN;for(let h=f;h>l;h--){const p=c[h].programDateTime;if(e>=p&&e<p+c[h].duration*1e3)return h}}return l}}}return-1}function PE(t,e,n){var r,s;const i=new ar(t,n),o=(r=i.METHOD)!=null?r:"",a=i.URI,u=i.hexadecimalInteger("IV"),l=i.KEYFORMATVERSIONS,c=(s=i.KEYFORMAT)!=null?s:"identity";a&&i.IV&&!u&&Nn.error(`Invalid IV: ${i.IV}`);const d=a?Wi.resolve(a,e):"",f=(l||"1").split("/").map(Number).filter(Number.isFinite);return new dd(o,d,c,f,u)}function DE(t){const n=new ar(t).decimalFloatingPoint("TIME-OFFSET");return Ut(n)?n:null}function OE(t,e){let n=(t||"").split(/[ ,]+/).filter(r=>r);["video","audio","text"].forEach(r=>{const s=n.filter(i=>K2(i,r));s.length&&(e[`${r}Codec`]=s.map(i=>i.split("/")[0]).join(","),n=n.filter(i=>s.indexOf(i)===-1))}),e.unknownCodecs=n}function $E(t,e,n){const r=e[n];r&&(t[n]=r)}function l8(t,e){let n=t[e];for(let r=e;r--;){const s=t[r];if(!s)return;s.programDateTime=n.programDateTime-s.duration*1e3,n=s}}function m0(t,e,n){t.rawProgramDateTime?n.push(t):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime)}function ME(t,e,n,r){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=n,t.sn="initSegment",r&&(t.levelkeys=r),t.initSegment=null}function NE(t,e,n){t.levelkeys=e;const{encryptedFragments:r}=n;(!r.length||r[r.length-1].levelkeys!==e)&&Object.keys(e).some(s=>e[s].isCommonEncryption)&&r.push(t)}function fo(t,e,n){t.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${n[0]})`)}function FE(t,e,n){t.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${n[0]})`)}function Qg(t,e){const n=e.startPTS;if(Ut(n)){let r=0,s;e.sn>t.sn?(r=n-t.start,s=t):(r=t.start-n,s=e),s.duration!==r&&s.setDuration(r)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.setStart(t.start+(t.minEndPTS-t.start)):e.setStart(t.start+t.duration):e.setStart(Math.max(t.start-e.duration,0))}function iA(t,e,n,r,s,i){r-n<=0&&(Nn.warn("Fragment should have a positive duration",e),r=n+e.duration,i=s+e.duration);let a=n,u=r;const l=e.startPTS,c=e.endPTS;if(Ut(l)){const v=Math.abs(l-n);Ut(e.deltaPTS)?e.deltaPTS=Math.max(v,e.deltaPTS):e.deltaPTS=v,a=Math.max(n,l),n=Math.min(n,l),s=Math.min(s,e.startDTS),u=Math.min(r,c),r=Math.max(r,c),i=Math.max(i,e.endDTS)}const d=n-e.start;e.start!==0&&e.setStart(n),e.setDuration(r-e.start),e.startPTS=n,e.maxStartPTS=a,e.startDTS=s,e.endPTS=r,e.minEndPTS=u,e.endDTS=i;const f=e.sn;if(!t||f<t.startSN||f>t.endSN)return 0;let h;const p=f-t.startSN,g=t.fragments;for(g[p]=e,h=p;h>0;h--)Qg(g[h],g[h-1]);for(h=p;h<g.length-1;h++)Qg(g[h],g[h+1]);return t.fragmentHint&&Qg(g[g.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,d}function u8(t,e){if(t===e)return;let n=null;const r=t.fragments;for(let u=r.length-1;u>=0;u--){const l=r[u].initSegment;if(l){n=l;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let s;f8(t,e,(u,l,c,d)=>{if(!e.startCC&&l.cc!==u.cc){var f,h;const p=u.cc-l.cc;for(let g=c;g<d.length;g++)d[g].cc+=p;e.startCC=(f=(h=lA(t,e.startSN-1))==null?void 0:h.cc)!=null?f:d[0].cc,e.endCC=d[d.length-1].cc}Ut(u.startPTS)&&Ut(u.endPTS)&&(l.setStart(l.startPTS=u.startPTS),l.startDTS=u.startDTS,l.maxStartPTS=u.maxStartPTS,l.endPTS=u.endPTS,l.endDTS=u.endDTS,l.minEndPTS=u.minEndPTS,l.setDuration(u.endPTS-u.startPTS),l.duration&&(s=l),e.PTSKnown=e.alignedSliding=!0),u.hasStreams&&(l.elementaryStreams=u.elementaryStreams),l.loader=u.loader,u.hasStats&&(l.stats=u.stats),u.initSegment&&(l.initSegment=u.initSegment,n=u.initSegment)});const i=e.fragments,o=e.fragmentHint?i.concat(e.fragmentHint):i;if(n&&o.forEach(u=>{var l;u&&(!u.initSegment||u.initSegment.relurl===((l=n)==null?void 0:l.relurl))&&(u.initSegment=n)}),e.skippedSegments)if(e.deltaUpdateFailed=i.some(u=>!u),e.deltaUpdateFailed){Nn.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let u=e.skippedSegments;u--;)i.shift();e.startSN=i[0].sn}else{e.endCC=i[i.length-1].cc,e.canSkipDateRanges&&(e.dateRanges=c8(t.dateRanges,e));const u=t.fragments.filter(l=>l.rawProgramDateTime);if(t.hasProgramDateTime&&!e.hasProgramDateTime)for(let l=1;l<o.length;l++)o[l].programDateTime===null&&m0(o[l],o[l-1],u);sA(u,e)}d8(t.partList,e.partList,(u,l)=>{l.elementaryStreams=u.elementaryStreams,l.stats=u.stats}),s?iA(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS):oA(t,e),i.length&&(e.totalduration=e.edge-i[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const a=e.advancedDateTime;if(e.advanced&&a){const u=e.edge;e.driftStart||(e.driftStartTime=a,e.driftStart=u),e.driftEndTime=a,e.driftEnd=u}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=t.requestScheduled)}function c8(t,e){const{dateRanges:n,recentlyRemovedDateranges:r}=e,s=Kn({},t);r&&r.forEach(a=>{delete s[a]});const o=Object.keys(s).length;return o&&Object.keys(n).forEach(a=>{const u=s[a],l=new tA(n[a].attr,u);l.isValid?(s[a]=l,u||(l.tagOrder+=o)):Nn.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${rr(n[a].attr)}"`)}),s}function d8(t,e,n){if(t&&e){let r=0;for(let s=0,i=t.length;s<=i;s++){const o=t[s],a=e[s+r];o&&a&&o.index===a.index&&o.fragment.sn===a.fragment.sn?n(o,a):r--}}}function f8(t,e,n){const r=e.skippedSegments,s=Math.max(t.startSN,e.startSN)-e.startSN,i=(t.fragmentHint?1:0)+(r?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,o=e.startSN-t.startSN,a=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let l=s;l<=i;l++){const c=u[o+l];let d=a[l];if(r&&!d&&c&&(d=e.fragments[l]=c),c&&d){if(n(c,d,l,a),c.url&&c.url!==d.url){e.playlistParsingError=BE(`media sequence mismatch ${d.sn}:`,t,e,c,d);return}else if(c.cc!==d.cc){e.playlistParsingError=BE(`discontinuity sequence mismatch (${c.cc}!=${d.cc})`,t,e,c,d);return}}}}function BE(t,e,n,r,s){return new Error(`${t} ${s.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${n.startSN}
${n.m3u8}`)}function oA(t,e,n=!0){const r=e.startSN+e.skippedSegments-t.startSN,s=t.fragments,i=r>=0;let o=0;if(i&&r<s.length)o=s[r].start;else if(i&&e.startSN===t.endSN+1)o=t.fragmentEnd;else if(i&&n)o=t.fragmentStart+r*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)o=t.fragmentStart;else return;g0(e,o)}function g0(t,e){if(e){const n=t.fragments;for(let r=t.skippedSegments;r<n.length;r++)n[r].addStart(e);t.fragmentHint&&t.fragmentHint.addStart(e)}}function aA(t,e=1/0){let n=1e3*t.targetduration;if(t.updated){const r=t.fragments;if(r.length&&n*4>e){const i=r[r.length-1].duration*1e3;i<n&&(n=i)}}else n/=2;return Math.round(n)}function lA(t,e,n){if(!t)return null;let r=t.fragments[e-t.startSN];return r||(r=t.fragmentHint,r&&r.sn===e)?r:e<t.startSN&&n&&n.sn===e?n:null}function VE(t,e,n){return t?uA(t.partList,e,n):null}function uA(t,e,n){if(t)for(let r=t.length;r--;){const s=t[r];if(s.index===n&&s.fragment.sn===e)return s}return null}function cA(t){t.forEach((e,n)=>{var r;(r=e.details)==null||r.fragments.forEach(s=>{s.level=n,s.initSegment&&(s.initSegment.level=n)})})}function Vc(t,e){for(let r=0,s=t.length;r<s;r++){var n;if(((n=t[r])==null?void 0:n.cc)===e)return t[r]}return null}function h8(t,e){return!!(t&&e.startCC<t.endCC&&e.endCC>t.startCC)}function UE(t,e){if(t){const n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}function dA(t,e){const n=e.fragments;for(let r=0,s=n.length;r<s;r++)UE(n[r],t);e.fragmentHint&&UE(e.fragmentHint,t),e.alignedSliding=!0}function p8(t,e){t&&(fA(e,t),!e.alignedSliding&&t&&Ep(e,t),!e.alignedSliding&&t&&!e.skippedSegments&&oA(t,e,!1))}function fA(t,e){if(!h8(e,t))return;const n=Math.min(e.endCC,t.endCC),r=Vc(e.fragments,n),s=Vc(t.fragments,n);if(!r||!s)return;Nn.log(`Aligning playlist at start of dicontinuity sequence ${n}`);const i=r.start-s.start;dA(i,t)}function Ep(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const n=t.fragments,r=e.fragments;if(!n.length||!r.length)return;let s,i;const o=Math.min(e.endCC,t.endCC);e.startCC<o&&t.startCC<o&&(s=Vc(r,o),i=Vc(n,o)),(!s||!i)&&(s=r[Math.floor(r.length/2)],i=Vc(n,s.cc)||n[Math.floor(n.length/2)]);const a=s.programDateTime,u=i.programDateTime;if(!a||!u)return;const l=(u-a)/1e3-(i.start-s.start);dA(l,t)}const m8={toString:function(t){let e="";const n=t.length;for(let r=0;r<n;r++)e+=`[${t.start(r).toFixed(3)}-${t.end(r).toFixed(3)}]`;return e}},at={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class gb extends J2{constructor(e,n,r,s,i){super(s,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=at.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:o,fragCurrent:a,media:u,mediaBuffer:l,state:c}=this,d=u?u.currentTime:0,f=pn.bufferInfo(l||u,d,o.maxBufferHole);if(this.log(`media seeking to ${Ut(d)?d.toFixed(3):d}, state: ${c}`),this.state===at.ENDED)this.resetLoadingState();else if(a){const h=o.maxFragLookUpTolerance,p=a.start-h,g=a.start+a.duration+h;if(!f.len||g<f.start||p>f.end){const v=d>g;(d<p||v)&&(v&&a.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(u){this.fragmentTracker.removeFragmentsInRange(d,1/0,this.playlistType,!0);const h=this.lastCurrentTime;if(d>h&&(this.lastCurrentTime=d),!this.loadingParts){const p=Math.max(f.end,d),g=this.shouldLoadParts(this.getLevelDetails(),p);g&&(this.log(`LL-Part loading ON after seeking to ${d.toFixed(2)} with buffer @${p.toFixed(2)}`),this.loadingParts=g)}}!this.hls.hasEnoughToStart&&!f.len&&(this.log(`setting startPosition to ${d} because of seek before start`),this.nextLoadPosition=this.startPosition=d),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=i,this.hls=e,this.fragmentLoader=new j4(e.config),this.keyLoader=r,this.fragmentTracker=n,this.config=e.config,this.decrypter=new fb(e.config)}registerListeners(){const{hls:e}=this;e.on(G.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(G.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(G.MANIFEST_LOADING,this.onManifestLoading,this),e.on(G.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(G.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(G.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(G.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(G.MANIFEST_LOADING,this.onManifestLoading,this),e.off(G.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(G.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===at.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=at.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:n}=this;return n===-1&&e?e:n}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,n){if(n.live||!this.media)return!1;const r=e.end||0,s=this.config.timelineOffset||0;if(r<=s)return!1;const i=e.buffered;this.config.maxBufferHole&&i&&i.length>1&&(e=pn.bufferedInfo(i,e.start,0));const o=e.nextStart;if(o&&o>s&&o<n.edge||this.media.currentTime<e.start)return!1;const u=n.partList;if(u!=null&&u.length){const c=u[u.length-1];return pn.isBuffered(this.media,c.start+c.duration/2)}const l=n.fragments[n.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(l)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}get timelineOffset(){const e=this.config.timelineOffset;if(e){var n;return((n=this.getLevelDetails())==null?void 0:n.appliedTimelineOffset)||e}return 0}onMediaAttached(e,n){const r=this.media=this.mediaBuffer=n.media;r.removeEventListener("seeking",this.onMediaSeeking),r.removeEventListener("ended",this.onMediaEnded),r.addEventListener("seeking",this.onMediaSeeking),r.addEventListener("ended",this.onMediaEnded);const s=this.config;this.levels&&s.autoStartLoad&&this.state===at.STOPPED&&this.startLoad(s.startPosition)}onMediaDetaching(e,n){const r=!!n.transferMedia,s=this.media;if(s!==null){if(s.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),s.removeEventListener("seeking",this.onMediaSeeking),s.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!r&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,r){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,n){}onManifestLoaded(e,n){this.startTimeOffset=n.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=at.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,n,r){this.startFragRequested=!0,this._loadFragForPlayback(e,n,r)}_loadFragForPlayback(e,n,r){const s=i=>{const o=i.frag;if(this.fragContextChanged(o)){this.warn(`${o.type} sn: ${o.sn}${i.part?" part: "+i.part.index:""} of ${this.fragInfo(o,!1,i.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(o);return}o.stats.chunkCount++,this._handleFragmentLoadProgress(i)};this._doFragLoad(e,n,r,s).then(i=>{if(!i)return;const o=this.state,a=i.frag;if(this.fragContextChanged(a)){(o===at.FRAG_LOADING||!this.fragCurrent&&o===at.PARSING)&&(this.fragmentTracker.removeFragment(a),this.state=at.IDLE);return}"payload"in i&&(this.log(`Loaded ${a.type} sn: ${a.sn} of ${this.playlistLabel()} ${a.level}`),this.hls.trigger(G.FRAG_LOADED,i)),this._handleFragmentLoadComplete(i)}).catch(i=>{this.state===at.STOPPED||this.state===at.ERROR||(this.warn(`Frag error: ${(i==null?void 0:i.message)||i}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var n;const{fragmentTracker:r}=this;if(r.getState(e)===xr.APPENDING){const i=e.type,o=this.getFwdBufferInfo(this.mediaBuffer,i),a=Math.max(e.duration,o?o.len:this.config.maxBufferLength),u=this.backtrackFragment;((u?e.sn-u.sn:0)===1||this.reduceMaxBufferLength(a,e.duration))&&r.removeFragment(e)}else((n=this.mediaBuffer)==null?void 0:n.buffered.length)===0?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===xr.PARTIAL&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const n=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:n,part:null,stats:n.stats,id:n.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const n=e.details;return(n==null?void 0:n.live)&&n.type!=="EVENT"&&(this.levelLastLoaded!==e||n.expired)}flushMainBuffer(e,n,r=null){if(!(e-n))return;const s={startOffset:e,endOffset:n,type:r};this.hls.trigger(G.BUFFER_FLUSHING,s)}_loadInitSegment(e,n){this._doFragLoad(e,n).then(r=>{const s=r==null?void 0:r.frag;if(!s||this.fragContextChanged(s)||!this.levels)throw new Error("init load aborted");return r}).then(r=>{const{hls:s}=this,{frag:i,payload:o}=r,a=i.decryptdata;if(o&&o.byteLength>0&&a!=null&&a.key&&a.iv&&tu(a.method)){const u=self.performance.now();return this.decrypter.decrypt(new Uint8Array(o),a.key.buffer,a.iv.buffer,pb(a.method)).catch(l=>{throw s.trigger(G.ERROR,{type:nn.MEDIA_ERROR,details:Ge.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:i}),l}).then(l=>{const c=self.performance.now();return s.trigger(G.FRAG_DECRYPTED,{frag:i,payload:l,stats:{tstart:u,tdecrypt:c}}),r.payload=l,this.completeInitSegmentLoad(r)})}return this.completeInitSegmentLoad(r)}).catch(r=>{this.state===at.STOPPED||this.state===at.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:n}=this;if(!n)throw new Error("init load aborted, missing levels");const r=e.frag.stats;this.state!==at.STOPPED&&(this.state=at.IDLE),e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:n}=this;return!e||!n||e.sn!==n.sn||e.level!==n.level}fragBufferedComplete(e,n){const r=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.fragInfo(e,!1,n)} > buffer:${r?m8.toString(pn.getBuffered(r)):"(detached)"})`),Pr(e)){var s;if(e.type!==qt.SUBTITLE){const o=e.elementaryStreams;if(!Object.keys(o).some(a=>!!o[a])){this.state=at.IDLE;return}}const i=(s=this.levels)==null?void 0:s[e.level];i!=null&&i.fragmentError&&(this.log(`Resetting level fragment error count of ${i.fragmentError} on frag buffered`),i.fragmentError=0)}this.state=at.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:n}=this;if(!n)return;const{frag:r,part:s,partsLoaded:i}=e,o=!i||i.length===0||i.some(u=>!u),a=new hb(r.level,r.sn,r.stats.chunkCount+1,0,s?s.index:-1,!o);n.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,n,r=null,s){var i;this.fragCurrent=e;const o=n==null?void 0:n.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let a=null;e.encrypted&&!((i=e.decryptdata)!=null&&i.key)?(this.log(`Loading key for ${e.sn} of [${o.startSN}-${o.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=at.KEY_LOADING,this.fragCurrent=e,a=this.keyLoader.load(e).then(d=>{if(!this.fragContextChanged(d.frag))return this.hls.trigger(G.KEY_LOADED,d),this.state===at.KEY_LOADING&&(this.state=at.IDLE),d}),this.hls.trigger(G.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):e.encrypted||(a=this.keyLoader.loadClear(e,o.encryptedFragments),a&&this.log("[eme] blocking frag load until media-keys acquired"));const u=this.fragPrevious;if(Pr(e)&&(!u||e.sn!==u.sn)){const d=this.shouldLoadParts(n.details,e.end);d!==this.loadingParts&&(this.log(`LL-Part loading ${d?"ON":"OFF"} loading sn ${u==null?void 0:u.sn}->${e.sn}`),this.loadingParts=d)}if(r=Math.max(e.start,r||0),this.loadingParts&&Pr(e)){const d=o.partList;if(d&&s){r>e.end&&o.fragmentHint&&(e=o.fragmentHint);const f=this.getNextPart(d,e,r);if(f>-1){const h=d[f];e=this.fragCurrent=h.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${h.index} (${f}/${d.length-1}) of ${this.fragInfo(e,!1,h)}) cc: ${e.cc} [${o.startSN}-${o.endSN}], target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=h.start+h.duration,this.state=at.FRAG_LOADING;let p;return a?p=a.then(g=>!g||this.fragContextChanged(g.frag)?null:this.doFragPartsLoad(e,h,n,s)).catch(g=>this.handleFragLoadError(g)):p=this.doFragPartsLoad(e,h,n,s).catch(g=>this.handleFragLoadError(g)),this.hls.trigger(G.FRAG_LOADING,{frag:e,part:h,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):p}else if(!e.url||this.loadedEndOfParts(d,r))return Promise.resolve(null)}}if(Pr(e)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${r.toFixed(2)}`),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${o?"["+o.startSN+"-"+o.endSN+"]":""}, target: ${parseFloat(r.toFixed(3))}`),Ut(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=at.FRAG_LOADING;const l=this.config.progressive;let c;return l&&a?c=a.then(d=>!d||this.fragContextChanged(d==null?void 0:d.frag)?null:this.fragmentLoader.load(e,s)).catch(d=>this.handleFragLoadError(d)):c=Promise.all([this.fragmentLoader.load(e,l?s:void 0),a]).then(([d])=>(!l&&d&&s&&s(d),d)).catch(d=>this.handleFragLoadError(d)),this.hls.trigger(G.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):c}doFragPartsLoad(e,n,r,s){return new Promise((i,o)=>{var a;const u=[],l=(a=r.details)==null?void 0:a.partList,c=d=>{this.fragmentLoader.loadPart(e,d,s).then(f=>{u[d.index]=f;const h=f.part;this.hls.trigger(G.FRAG_LOADED,f);const p=VE(r.details,e.sn,d.index+1)||uA(l,e.sn,d.index+1);if(p)c(p);else return i({frag:e,part:h,partsLoaded:u})}).catch(o)};c(n)})}handleFragLoadError(e){if("data"in e){const n=e.data;e.data&&n.details===Ge.INTERNAL_ABORTED?this.handleFragLoadAborted(n.frag,n.part):this.hls.trigger(G.ERROR,n)}else this.hls.trigger(G.ERROR,{type:nn.OTHER_ERROR,details:Ge.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const n=this.getCurrentContext(e);if(!n||this.state!==at.PARSING){!this.fragCurrent&&this.state!==at.STOPPED&&this.state!==at.ERROR&&(this.state=at.IDLE);return}const{frag:r,part:s,level:i}=n,o=self.performance.now();r.stats.parsing.end=o,s&&(s.stats.parsing.end=o);const a=this.getLevelDetails(),l=a&&r.sn>a.endSN||this.shouldLoadParts(a,r.end);l!==this.loadingParts&&(this.log(`LL-Part loading ${l?"ON":"OFF"} after parsing segment ending @${r.end.toFixed(2)}`),this.loadingParts=l),this.updateLevelTiming(r,s,i,e.partial)}shouldLoadParts(e,n){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e!=null&&e.partList){var r;const i=e.partList[0],o=i.end+(((r=e.fragmentHint)==null?void 0:r.duration)||0);if(n>=o){var s;if((this.hls.hasEnoughToStart?((s=this.media)==null?void 0:s.currentTime)||this.lastCurrentTime:this.getLoadPosition())>i.start-i.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:n,fragCurrent:r}=this,{level:s,sn:i,part:o}=e;if(!(n!=null&&n[s]))return this.warn(`Levels object was unset while buffering fragment ${i} of ${this.playlistLabel()} ${s}. The current chunk will not be buffered.`),null;const a=n[s],u=a.details,l=o>-1?VE(u,i,o):null,c=l?l.fragment:lA(u,i,r);return c?(r&&r!==c&&(c.stats=r.stats),{frag:c,part:l,level:a}):null}bufferFragmentData(e,n,r,s,i){var o;if(!e||this.state!==at.PARSING)return;const{data1:a,data2:u}=e;let l=a;if(a&&u&&(l=ri(a,u)),!((o=l)!=null&&o.length))return;const c={type:e.type,frag:n,part:r,chunkMeta:s,parent:n.type,data:l};if(this.hls.trigger(G.BUFFER_APPENDING,c),e.dropped&&e.independent&&!r){if(i)return;this.flushBufferGap(n)}}flushBufferGap(e){const n=this.media;if(!n)return;if(!pn.isBuffered(n,n.currentTime)){this.flushMainBuffer(0,e.start);return}const r=n.currentTime,s=pn.bufferInfo(n,r,0),i=e.duration,o=Math.min(this.config.maxFragLookUpTolerance*2,i*.25),a=Math.max(Math.min(e.start-o,s.end-o),r+o);e.start-a>o&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,n){var r;const s=this.getLoadPosition();if(!Ut(s))return null;const o=this.lastCurrentTime>s||(r=this.media)!=null&&r.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,s,n,o)}getFwdBufferInfoAtPos(e,n,r,s){const i=pn.bufferInfo(e,n,s);if(i.len===0&&i.nextStart!==void 0){const o=this.fragmentTracker.getBufferedFrag(n,r);if(o&&(i.nextStart<=o.end||o.gap)){const a=Math.max(Math.min(i.nextStart,o.end)-n,s);return pn.bufferInfo(e,n,a)}}return i}getMaxBufferLength(e){const{config:n}=this;let r;return e?r=Math.max(8*n.maxBufferSize/e,n.maxBufferLength):r=n.maxBufferLength,Math.min(r,n.maxMaxBufferLength)}reduceMaxBufferLength(e,n){const r=this.config,s=Math.max(Math.min(e-n,r.maxBufferLength),n),i=Math.max(e-n*3,r.maxMaxBufferLength/2,s);return i>=s?(r.maxMaxBufferLength=i,this.warn(`Reduce max buffer length to ${i}s`),!0):!1}getAppendedFrag(e,n=qt.MAIN){var r;const s=(r=this.fragmentTracker)==null?void 0:r.getAppendedFrag(e,n);return s&&"fragment"in s?s.fragment:s}getNextFragment(e,n){const r=n.fragments,s=r.length;if(!s)return null;const{config:i}=this,o=r[0].start,a=i.lowLatencyMode&&!!n.partList;let u=null;if(n.live){const d=i.initialLiveManifestSize;if(s<d)return this.warn(`Not enough fragments to start playback (have: ${s}, need: ${d})`),null;if(!n.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<o){var l;a&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),u=this.getInitialLiveFragment(n);const f=this.hls.startPosition,h=this.hls.liveSyncPosition,p=u?(f!==-1&&f>=o?f:h)||u.start:e;this.log(`Setting startPosition to ${p} to match start frag at live edge. mainStart: ${f} liveSyncPosition: ${h} frag.start: ${(l=u)==null?void 0:l.start}`),this.startPosition=this.nextLoadPosition=p}}else e<=o&&(u=r[0]);if(!u){const d=this.loadingParts?n.partEnd:n.fragmentEnd;u=this.getFragmentAtPosition(e,d,n)}let c=this.filterReplacedPrimary(u,n);if(!c&&u){const d=u.sn-n.startSN;c=this.filterReplacedPrimary(r[d+1]||null,n)}return this.mapToInitFragWhenRequired(c)}isLoopLoading(e,n){const r=this.fragmentTracker.getState(e);return(r===xr.OK||r===xr.PARTIAL&&!!e.gap)&&this.nextLoadPosition>n}getNextFragmentLoopLoading(e,n,r,s,i){let o=null;if(e.gap&&(o=this.getNextFragment(this.nextLoadPosition,n),o&&!o.gap&&r.nextStart)){const a=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,s,0);if(a!==null&&r.len+a.len>=i){const u=o.sn;return this.loopSn!==u&&(this.log(`buffer full after gaps in "${s}" playlist starting at sn: ${u}`),this.loopSn=u),null}}return this.loopSn=void 0,o}get primaryPrefetch(){if(HE(this.hls.config)){var e,n;if((e=this.hls.interstitialsManager)==null||(n=e.playingItem)==null?void 0:n.event)return!0}return!1}filterReplacedPrimary(e,n){if(!e)return e;if(HE(this.hls.config)&&e.type!==qt.SUBTITLE){const r=this.hls.interstitialsManager,s=r==null?void 0:r.bufferingItem;if(s){const o=s.event;if(o){if(o.appendInPlace||Math.abs(e.start-s.start)>1||s.start===0)return null}else if(e.end<=s.start&&(n==null?void 0:n.live)===!1||e.start>s.end&&s.nextEvent&&(s.nextEvent.appendInPlace||e.start-s.end>1))return null}const i=r==null?void 0:r.playerQueue;if(i)for(let o=i.length;o--;){const a=i[o].interstitial;if(a.appendInPlace&&e.start>=a.startTime&&e.end<=a.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,n,r){let s=-1,i=!1,o=!0;for(let a=0,u=e.length;a<u;a++){const l=e[a];if(o=o&&!l.independent,s>-1&&r<l.start)break;const c=l.loaded;c?s=-1:(i||l.independent||o)&&l.fragment===n&&(s=a),i=c}return s}loadedEndOfParts(e,n){const r=e[e.length-1];return r&&n>r.start&&r.loaded}getInitialLiveFragment(e){const n=e.fragments,r=this.fragPrevious;let s=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),s=L4(n,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const i=r.sn+1;if(i>=e.startSN&&i<=e.endSN){const o=n[i-e.startSN];r.cc===o.cc&&(s=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${s.sn}`))}s||(s=Z2(e,r.cc,r.end),s&&this.log(`Live playlist, switching playlist, load frag with same CC: ${s.sn}`))}}else{const i=this.hls.liveSyncPosition;i!==null&&(s=this.getFragmentAtPosition(i,this.bitrateTest?e.fragmentEnd:e.edge,e))}return s}getFragmentAtPosition(e,n,r){const{config:s}=this;let{fragPrevious:i}=this,{fragments:o,endSN:a}=r;const{fragmentHint:u}=r,{maxFragLookUpTolerance:l}=s,c=r.partList,d=!!(this.loadingParts&&c!=null&&c.length&&u);d&&u&&!this.bitrateTest&&c[c.length-1].fragment.sn===u.sn&&(o=o.concat(u),a=u.sn);let f;if(e<n){var h;const g=e<this.lastCurrentTime||e>n-l||(h=this.media)!=null&&h.paused||!this.startFragRequested?0:l;f=fl(i,o,e,g)}else f=o[o.length-1];if(f){const p=f.sn-r.startSN,g=this.fragmentTracker.getState(f);if((g===xr.OK||g===xr.PARTIAL&&f.gap)&&(i=f),i&&f.sn===i.sn&&(!d||c[0].fragment.sn>f.sn||!r.live&&!d)&&i&&f.level===i.level){const y=o[p+1];f.sn<a&&this.fragmentTracker.getState(y)!==xr.OK?f=y:f=null}}return f}alignPlaylists(e,n,r){const s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;const i=e.fragmentStart,o=!n,a=e.alignedSliding&&Ut(i);if(o||!a&&!i){p8(r,e);const u=e.fragmentStart;return this.log(`Live playlist sliding: ${u.toFixed(2)} start-sn: ${n?n.startSN:"na"}->${e.startSN} fragments: ${s}`),u}return i}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,n){let r=this.startPosition;r<n&&(r=-1);const s=this.timelineOffset;if(r===-1){const i=this.startTimeOffset!==null,o=i?this.startTimeOffset:e.startTimeOffset;o!==null&&Ut(o)?(r=n+o,o<0&&(r+=e.edge),r=Math.min(Math.max(n,r),n+e.totalduration),this.log(`Setting startPosition to ${r} for start time offset ${o} found in ${i?"multivariant":"media"} playlist`),this.startPosition=r):e.live?(r=this.hls.liveSyncPosition||n,this.log(`Setting startPosition to -1 to start at live edge ${r}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=r=0),this.lastCurrentTime=r+s}this.nextLoadPosition=r+s}getLoadPosition(){var e;const{media:n}=this;let r=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&n?r=n.currentTime:this.nextLoadPosition>=0&&(r=this.nextLoadPosition),r}handleFragLoadAborted(e,n){this.transmuxer&&e.type===this.playlistType&&Pr(e)&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${n?" part "+n.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==at.FRAG_LOADING_WAITING_RETRY)&&(this.state=at.IDLE)}onFragmentOrKeyLoadError(e,n){if(n.chunkMeta&&!n.frag){const p=this.getCurrentContext(n.chunkMeta);p&&(n.frag=p.frag)}const r=n.frag;if(!r||r.type!==e||!this.levels)return;if(this.fragContextChanged(r)){var s;this.warn(`Frag load error must match current frag to retry ${r.url} > ${(s=this.fragCurrent)==null?void 0:s.url}`);return}const i=n.details===Ge.FRAG_GAP;i&&this.fragmentTracker.fragBuffered(r,!0);const o=n.errorAction,{action:a,flags:u,retryCount:l=0,retryConfig:c}=o||{},d=!!o&&!!c,f=d&&a===Yr.RetryRequest,h=d&&!o.resolved&&u===mi.MoveAllAlternatesMatchingHost;if(!f&&h&&Pr(r)&&!r.endList)this.resetFragmentErrors(e),this.treatAsGap(r),o.resolved=!0;else if((f||h)&&l<c.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const p=db(c,l);this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${n.details}, retrying loading ${l+1}/${c.maxNumRetry} in ${p}ms`),o.resolved=!0,this.retryDate=self.performance.now()+p,this.state=at.FRAG_LOADING_WAITING_RETRY}else if(c&&o)if(this.resetFragmentErrors(e),l<c.maxNumRetry)!i&&a!==Yr.RemoveAlternatePermanently&&(o.resolved=!0);else{this.warn(`${n.details} reached or exceeded max retry (${l})`);return}else a===Yr.SendAlternateToPenaltyBox?this.state=at.WAITING_LEVEL:this.state=at.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===at.PARSING||this.state===at.PARSED){const n=e.frag,r=e.parent,s=this.getFwdBufferInfo(this.mediaBuffer,r),i=s&&s.len>.5;i&&this.reduceMaxBufferLength(s.len,(n==null?void 0:n.duration)||10);const o=!i;return o&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${r} buffer`),n&&(this.fragmentTracker.removeFragment(n),this.nextLoadPosition=n.start),this.resetLoadingState(),o}return!1}resetFragmentErrors(e){e===qt.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==at.STOPPED&&(this.state=at.IDLE)}afterBufferFlushed(e,n,r){if(!e)return;const s=pn.getBuffered(e);this.fragmentTracker.detectEvictedFragments(n,s,r),this.state===at.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==at.STOPPED&&(this.state=at.IDLE)}resetStartWhenNotLoaded(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const n=e?e.details:null;n!=null&&n.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(n,n.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of ${this.playlistLabel()} ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,n,r,s){const i=r.details;if(!i){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((u,l)=>{const c=e.elementaryStreams[l];if(c){const d=c.endPTS-c.startPTS;if(d<=0)return this.warn(`Could not parse fragment ${e.sn} ${l} duration reliably (${d})`),u||!1;const f=s?0:iA(i,e,c.startPTS,c.endPTS,c.startDTS,c.endDTS);return this.hls.trigger(G.LEVEL_PTS_UPDATED,{details:i,level:r,drift:f,type:l,frag:e,start:c.startPTS,end:c.endPTS}),!0}return u},!1)){var a;if(r.fragmentError===0&&this.treatAsGap(e,r),((a=this.transmuxer)==null?void 0:a.error)===null){const u=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(u.message),this.hls.trigger(G.ERROR,{type:nn.MEDIA_ERROR,details:Ge.FRAG_PARSING_ERROR,fatal:!1,error:u,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=at.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.fragInfo(e,!1,n)})`),this.hls.trigger(G.FRAG_PARSED,{frag:e,part:n})}playlistLabel(){return this.playlistType===qt.MAIN?"level":"track"}fragInfo(e,n=!0,r){var s,i;return`${this.playlistLabel()} ${e.level} (${r?"part":"frag"}:[${((s=n&&!r?e.startPTS:(r||e).start)!=null?s:NaN).toFixed(3)}-${((i=n&&!r?e.endPTS:(r||e).end)!=null?i:NaN).toFixed(3)}]${r&&e.type==="main"?"INDEPENDENT="+(r.independent?"YES":"NO"):""}`}treatAsGap(e,n){n&&n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const n=this._state;n!==e&&(this._state=e,this.log(`${n}->${e}`))}get state(){return this._state}}function HE(t){return!!t.interstitialsController&&t.enableInterstitialPlayback!==!1}class hA{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:n}=this;let r;if(e.length)e.length===1?r=e[0]:r=g8(e,n);else return new Uint8Array(0);return this.reset(),r}reset(){this.chunks.length=0,this.dataLength=0}}function g8(t,e){const n=new Uint8Array(e);let r=0;for(let s=0;s<t.length;s++){const i=t[s];n.set(i,r),r+=i.length}return n}var Zg={exports:{}},jE;function v8(){return jE||(jE=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function i(u,l,c,d,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var h=new s(c,d||u,f),p=n?n+l:l;return u._events[p]?u._events[p].fn?u._events[p]=[u._events[p],h]:u._events[p].push(h):(u._events[p]=h,u._eventsCount++),u}function o(u,l){--u._eventsCount===0?u._events=new r:delete u._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],c,d;if(this._eventsCount===0)return l;for(d in c=this._events)e.call(c,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},a.prototype.listeners=function(l){var c=n?n+l:l,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},a.prototype.listenerCount=function(l){var c=n?n+l:l,d=this._events[c];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,c,d,f,h,p){var g=n?n+l:l;if(!this._events[g])return!1;var v=this._events[g],y=arguments.length,w,b;if(v.fn){switch(v.once&&this.removeListener(l,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,d),!0;case 4:return v.fn.call(v.context,c,d,f),!0;case 5:return v.fn.call(v.context,c,d,f,h),!0;case 6:return v.fn.call(v.context,c,d,f,h,p),!0}for(b=1,w=new Array(y-1);b<y;b++)w[b-1]=arguments[b];v.fn.apply(v.context,w)}else{var S=v.length,E;for(b=0;b<S;b++)switch(v[b].once&&this.removeListener(l,v[b].fn,void 0,!0),y){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,c);break;case 3:v[b].fn.call(v[b].context,c,d);break;case 4:v[b].fn.call(v[b].context,c,d,f);break;default:if(!w)for(E=1,w=new Array(y-1);E<y;E++)w[E-1]=arguments[E];v[b].fn.apply(v[b].context,w)}}return!0},a.prototype.on=function(l,c,d){return i(this,l,c,d,!1)},a.prototype.once=function(l,c,d){return i(this,l,c,d,!0)},a.prototype.removeListener=function(l,c,d,f){var h=n?n+l:l;if(!this._events[h])return this;if(!c)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===c&&(!f||p.once)&&(!d||p.context===d)&&o(this,h);else{for(var g=0,v=[],y=p.length;g<y;g++)(p[g].fn!==c||f&&!p[g].once||d&&p[g].context!==d)&&v.push(p[g]);v.length?this._events[h]=v.length===1?v[0]:v:o(this,h)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=n?n+l:l,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}(Zg)),Zg.exports}var y8=v8(),vb=q3(y8);const fd="1.6.4",bu={};function b8(){return typeof __HLS_WORKER_BUNDLE__=="function"}function S8(){const t=bu[fd];if(t)return t.clientCount++,t;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),n=self.URL.createObjectURL(e),s={worker:new self.Worker(n),objectURL:n,clientCount:1};return bu[fd]=s,s}function w8(t){const e=bu[t];if(e)return e.clientCount++,e;const n=new self.URL(t,self.location.href).href,s={worker:new self.Worker(n),scriptURL:n,clientCount:1};return bu[t]=s,s}function E8(t){const e=bu[t||fd];if(e&&e.clientCount--===1){const{worker:r,objectURL:s}=e;delete bu[t||fd],s&&self.URL.revokeObjectURL(s),r.terminate()}}function pA(t,e){return e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function yb(t,e){return e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function km(t,e){let n=0;return n=(t[e]&127)<<21,n|=(t[e+1]&127)<<14,n|=(t[e+2]&127)<<7,n|=t[e+3]&127,n}function hd(t,e){const n=e;let r=0;for(;yb(t,e);){r+=10;const s=km(t,e+6);r+=s,pA(t,e+10)&&(r+=10),e+=r}if(r>0)return t.subarray(n,n+r)}function x8(t,e,n,r){const s=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=e[n+2],o=i>>2&15;if(o>12){const h=new Error(`invalid ADTS sampling index:${o}`);t.emit(G.ERROR,G.ERROR,{type:nn.MEDIA_ERROR,details:Ge.FRAG_PARSING_ERROR,fatal:!0,error:h,reason:h.message});return}const a=(i>>6&3)+1,u=e[n+3]>>6&3|(i&1)<<2,l="mp4a.40."+a,c=s[o];let d=o;(a===5||a===29)&&(d-=3);const f=[a<<3|(d&14)>>1,(d&1)<<7|u<<3];return Nn.log(`manifest codec:${r}, parsed codec:${l}, channels:${u}, rate:${c} (ADTS object type:${a} sampling index:${o})`),{config:f,samplerate:c,channelCount:u,codec:l,parsedCodec:l,manifestCodec:r}}function mA(t,e){return t[e]===255&&(t[e+1]&246)===240}function gA(t,e){return t[e+1]&1?7:9}function bb(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function T8(t,e){return e+5<t.length}function xp(t,e){return e+1<t.length&&mA(t,e)}function C8(t,e){return T8(t,e)&&mA(t,e)&&bb(t,e)<=t.length-e}function k8(t,e){if(xp(t,e)){const n=gA(t,e);if(e+n>=t.length)return!1;const r=bb(t,e);if(r<=n)return!1;const s=e+r;return s===t.length||xp(t,s)}return!1}function vA(t,e,n,r,s){if(!t.samplerate){const i=x8(e,n,r,s);if(!i)return;Kn(t,i)}}function yA(t){return 1024*9e4/t}function _8(t,e){const n=gA(t,e);if(e+n<=t.length){const r=bb(t,e)-n;if(r>0)return{headerLength:n,frameLength:r}}}function bA(t,e,n,r,s){const i=yA(t.samplerate),o=r+s*i,a=_8(e,n);let u;if(a){const{frameLength:d,headerLength:f}=a,h=f+d,p=Math.max(0,n+h-e.length);p?(u=new Uint8Array(h-f),u.set(e.subarray(n+f,e.length),0)):u=e.subarray(n+f,n+h);const g={unit:u,pts:o};return p||t.samples.push(g),{sample:g,length:h,missing:p}}const l=e.length-n;return u=new Uint8Array(l),u.set(e.subarray(n,e.length),0),{sample:{unit:u,pts:o},length:l,missing:-1}}function A8(t,e){return yb(t,e)&&km(t,e+6)+10<=t.length-e}function I8(t){return t instanceof ArrayBuffer?t:t.byteOffset==0&&t.byteLength==t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer}function Jg(t,e=0,n=1/0){return R8(t,e,n,Uint8Array)}function R8(t,e,n,r){const s=L8(t);let i=1;"BYTES_PER_ELEMENT"in r&&(i=r.BYTES_PER_ELEMENT);const o=P8(t)?t.byteOffset:0,a=(o+t.byteLength)/i,u=(o+e)/i,l=Math.floor(Math.max(0,Math.min(u,a))),c=Math.floor(Math.min(l+Math.max(n,0),a));return new r(s,l,c-l)}function L8(t){return t instanceof ArrayBuffer?t:t.buffer}function P8(t){return t&&t.buffer instanceof ArrayBuffer&&t.byteLength!==void 0&&t.byteOffset!==void 0}function D8(t){const e={key:t.type,description:"",data:"",mimeType:null,pictureType:null},n=3;if(t.size<2)return;if(t.data[0]!==n){console.log("Ignore frame with unrecognized character encoding");return}const r=t.data.subarray(1).indexOf(0);if(r===-1)return;const s=Hs(Jg(t.data,1,r)),i=t.data[2+r],o=t.data.subarray(3+r).indexOf(0);if(o===-1)return;const a=Hs(Jg(t.data,3+r,o));let u;return s==="-->"?u=Hs(Jg(t.data,4+r+o)):u=I8(t.data.subarray(4+r+o)),e.mimeType=s,e.pictureType=i,e.description=a,e.data=u,e}function O8(t){if(t.size<2)return;const e=Hs(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}}function $8(t){if(t.size<2)return;if(t.type==="TXXX"){let n=1;const r=Hs(t.data.subarray(n),!0);n+=r.length+1;const s=Hs(t.data.subarray(n));return{key:t.type,info:r,data:s}}const e=Hs(t.data.subarray(1));return{key:t.type,info:"",data:e}}function M8(t){if(t.type==="WXXX"){if(t.size<2)return;let n=1;const r=Hs(t.data.subarray(n),!0);n+=r.length+1;const s=Hs(t.data.subarray(n));return{key:t.type,info:r,data:s}}const e=Hs(t.data);return{key:t.type,info:"",data:e}}function N8(t){return t.type==="PRIV"?O8(t):t.type[0]==="W"?M8(t):t.type==="APIC"?D8(t):$8(t)}function F8(t){const e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=km(t,4),r=10;return{type:e,size:n,data:t.subarray(r,r+n)}}const Vf=10,B8=10;function SA(t){let e=0;const n=[];for(;yb(t,e);){const r=km(t,e+6);t[e+5]>>6&1&&(e+=Vf),e+=Vf;const s=e+r;for(;e+B8<s;){const i=F8(t.subarray(e)),o=N8(i);o&&n.push(o),e+=i.size+Vf}pA(t,e)&&(e+=Vf)}return n}function wA(t){return t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp"}function V8(t){if(t.data.byteLength===8){const e=new Uint8Array(t.data),n=e[3]&1;let r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,n&&(r+=4772185884e-2),Math.round(r)}}function Sb(t){const e=SA(t);for(let n=0;n<e.length;n++){const r=e[n];if(wA(r))return V8(r)}}let Os=function(t){return t.audioId3="org.id3",t.dateRange="com.apple.quicktime.HLS",t.emsg="https://aomedia.org/emsg/ID3",t.misbklv="urn:misb:KLV:bin:1910.1",t}({});function ji(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class wb{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,n,r,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,n){return!1}appendFrame(e,n,r){}demux(e,n){this.cachedData&&(e=ri(this.cachedData,e),this.cachedData=null);let r=hd(e,0),s=r?r.length:0,i;const o=this._audioTrack,a=this._id3Track,u=r?Sb(r):void 0,l=e.length;for((this.basePTS===null||this.frameIndex===0&&Ut(u))&&(this.basePTS=U8(u,n,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),r&&r.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:Os.audioId3,duration:Number.POSITIVE_INFINITY});s<l;){if(this.canParse(e,s)){const c=this.appendFrame(o,e,s);c?(this.frameIndex++,this.lastPTS=c.sample.pts,s+=c.length,i=s):s=l}else A8(e,s)?(r=hd(e,s),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:Os.audioId3,duration:Number.POSITIVE_INFINITY}),s+=r.length,i=s):s++;if(s===l&&i!==l){const c=e.slice(i);this.cachedData?this.cachedData=ri(this.cachedData,c):this.cachedData=c}}return{audioTrack:o,videoTrack:ji(),id3Track:a,textTrack:ji()}}demuxSampleAes(e,n,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const n=this.cachedData;return n&&(this.cachedData=null,this.demux(n,0)),{audioTrack:this._audioTrack,videoTrack:ji(),id3Track:this._id3Track,textTrack:ji()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const U8=(t,e,n)=>{if(Ut(t))return t*90;const r=n?n.baseTime*9e4/n.timescale:0;return e*9e4+r};let Uf=null;const H8=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],j8=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],K8=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],z8=[0,1,1,4];function EA(t,e,n,r,s){if(n+24>e.length)return;const i=xA(e,n);if(i&&n+i.frameLength<=e.length){const o=i.samplesPerFrame*9e4/i.sampleRate,a=r+s*o,u={unit:e.subarray(n,n+i.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=i.channelCount,t.samplerate=i.sampleRate,t.samples.push(u),{sample:u,length:i.frameLength,missing:0}}}function xA(t,e){const n=t[e+1]>>3&3,r=t[e+1]>>1&3,s=t[e+2]>>4&15,i=t[e+2]>>2&3;if(n!==1&&s!==0&&s!==15&&i!==3){const o=t[e+2]>>1&1,a=t[e+3]>>6,u=n===3?3-r:r===3?3:4,l=H8[u*14+s-1]*1e3,d=j8[(n===3?0:n===2?1:2)*3+i],f=a===3?1:2,h=K8[n][r],p=z8[r],g=h*8*p,v=Math.floor(h*l/d+o)*p;if(Uf===null){const b=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Uf=b?parseInt(b[1]):0}return!!Uf&&Uf<=87&&r===2&&l>=224e3&&a===0&&(t[e+3]=t[e+3]|128),{sampleRate:d,channelCount:f,frameLength:v,samplesPerFrame:g}}}function Eb(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function TA(t,e){return e+1<t.length&&Eb(t,e)}function W8(t,e){return Eb(t,e)&&4<=t.length-e}function CA(t,e){if(e+1<t.length&&Eb(t,e)){const r=xA(t,e);let s=4;r!=null&&r.frameLength&&(s=r.frameLength);const i=e+s;return i===t.length||TA(t,i)}return!1}class G8 extends wb{constructor(e,n){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=n}resetInitSegment(e,n,r,s){super.resetInitSegment(e,n,r,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e,n){if(!e)return!1;const r=hd(e,0);let s=(r==null?void 0:r.length)||0;if(CA(e,s))return!1;for(let i=e.length;s<i;s++)if(k8(e,s))return n.log("ADTS sync word found !"),!0;return!1}canParse(e,n){return C8(e,n)}appendFrame(e,n,r){vA(e,this.observer,n,r,e.manifestCodec);const s=bA(e,n,r,this.basePTS,this.frameIndex);if(s&&s.missing===0)return s}}const kA=(t,e)=>{let n=0,r=5;e+=r;const s=new Uint32Array(1),i=new Uint32Array(1),o=new Uint8Array(1);for(;r>0;){o[0]=t[e];const a=Math.min(r,8),u=8-a;i[0]=4278190080>>>24+u<<u,s[0]=(o[0]&i[0])>>u,n=n?n<<a|s[0]:s[0],e+=1,r-=a}return n};class q8 extends wb{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,n,r,s){super.resetInitSegment(e,n,r,s),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:n,duration:s,inputTimeScale:9e4,dropped:0}}canParse(e,n){return n+64<e.length}appendFrame(e,n,r){const s=_A(e,n,r,this.basePTS,this.frameIndex);if(s!==-1)return{sample:e.samples[e.samples.length-1],length:s,missing:0}}static probe(e){if(!e)return!1;const n=hd(e,0);if(!n)return!1;const r=n.length;return e[r]===11&&e[r+1]===119&&Sb(n)!==void 0&&kA(e,r)<16}}function _A(t,e,n,r,s){if(n+8>e.length||e[n]!==11||e[n+1]!==119)return-1;const i=e[n+4]>>6;if(i>=3)return-1;const a=[48e3,44100,32e3][i],u=e[n+4]&63,c=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][u*3+i]*2;if(n+c>e.length)return-1;const d=e[n+6]>>5;let f=0;d===2?f+=2:(d&1&&d!==1&&(f+=2),d&4&&(f+=2));const h=(e[n+6]<<8|e[n+7])>>12-f&1,g=[2,1,2,3,3,4,4,5][d]+h,v=e[n+5]>>3,y=e[n+5]&7,w=new Uint8Array([i<<6|v<<1|y>>2,(y&3)<<6|d<<3|h<<2|u>>4,u<<4&224]),b=1536/a*9e4,S=r+s*b,E=e.subarray(n,n+c);return t.config=w,t.channelCount=g,t.samplerate=a,t.samples.push({unit:E,pts:S}),c}class Y8 extends wb{resetInitSegment(e,n,r,s){super.resetInitSegment(e,n,r,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=hd(e,0);let r=(n==null?void 0:n.length)||0;if(n&&e[r]===11&&e[r+1]===119&&Sb(n)!==void 0&&kA(e,r)<=16)return!1;for(let s=e.length;r<s;r++)if(CA(e,r))return Nn.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,n){return W8(e,n)}appendFrame(e,n,r){if(this.basePTS!==null)return EA(e,n,r,this.basePTS,this.frameIndex)}}const X8=/\/emsg[-/]ID3/i;class Q8{constructor(e,n){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=n}resetTimeStamp(){}resetInitSegment(e,n,r,s){const i=this.videoTrack=ji("video",1),o=this.audioTrack=ji("audio",1),a=this.txtTrack=ji("text",1);if(this.id3Track=ji("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const u=V2(e);if(u.video){const{id:l,timescale:c,codec:d,supplemental:f}=u.video;i.id=l,i.timescale=a.timescale=c,i.codec=d,i.supplemental=f}if(u.audio){const{id:l,timescale:c,codec:d}=u.audio;o.id=l,o.timescale=c,o.codec=d}a.id=N2.text,i.sampleDuration=0,i.duration=o.duration=s}resetContiguity(){this.remainderData=null}static probe(e){return J3(e)}demux(e,n){this.timeOffset=n;let r=e;const s=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=ri(this.remainderData,e));const a=o4(r);this.remainderData=a.remainder,s.samples=a.valid||new Uint8Array}else s.samples=r;const o=this.extractID3Track(s,n);return i.samples=cE(n,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,n=this.videoTrack,r=this.txtTrack;n.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(n,this.timeOffset);return r.samples=cE(e,n),{videoTrack:n,audioTrack:ji(),id3Track:s,textTrack:ji()}}extractID3Track(e,n){const r=this.id3Track;if(e.samples.length){const s=vn(e.samples,["emsg"]);s&&s.forEach(i=>{const o=l4(i);if(X8.test(o.schemeIdUri)){const a=KE(o,n);let u=o.eventDuration===4294967295?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;u<=.001&&(u=Number.POSITIVE_INFINITY);const l=o.payload;r.samples.push({data:l,len:l.byteLength,dts:a,pts:a,type:Os.emsg,duration:u})}else if(this.config.enableEmsgKLVMetadata&&o.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const a=KE(o,n);r.samples.push({data:o.payload,len:o.payload.byteLength,dts:a,pts:a,type:Os.misbklv,duration:Number.POSITIVE_INFINITY})}})}return r}demuxSampleAes(e,n,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function KE(t,e){return Ut(t.presentationTime)?t.presentationTime/t.timeScale:e+t.presentationTimeDelta/t.timeScale}class Z8{constructor(e,n,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new fb(n,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,wa.cbc)}decryptAacSample(e,n,r){const s=e[n].unit;if(s.length<=16)return;const i=s.subarray(16,s.length-s.length%16),o=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(o).then(a=>{const u=new Uint8Array(a);s.set(u,16),this.decrypter.isSync()||this.decryptAacSamples(e,n+1,r)})}decryptAacSamples(e,n,r){for(;;n++){if(n>=e.length){r();return}if(!(e[n].unit.length<32)&&(this.decryptAacSample(e,n,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const n=Math.floor((e.length-48)/160)*16+16,r=new Int8Array(n);let s=0;for(let i=32;i<e.length-16;i+=160,s+=16)r.set(e.subarray(i,i+16),s);return r}getAvcDecryptedUnit(e,n){const r=new Uint8Array(n);let s=0;for(let i=32;i<e.length-16;i+=160,s+=16)e.set(r.subarray(s,s+16),i);return e}decryptAvcSample(e,n,r,s,i){const o=H2(i.data),a=this.getAvcEncryptedData(o);this.decryptBuffer(a.buffer).then(u=>{i.data=this.getAvcDecryptedUnit(o,u),this.decrypter.isSync()||this.decryptAvcSamples(e,n,r+1,s)})}decryptAvcSamples(e,n,r,s){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;n++,r=0){if(n>=e.length){s();return}const i=e[n].units;for(;!(r>=i.length);r++){const o=i[r];if(!(o.data.length<=48||o.type!==1&&o.type!==5)&&(this.decryptAvcSample(e,n,r,s,o),!this.decrypter.isSync()))return}}}}class AA{constructor(){this.VideoSample=null}createVideoSample(e,n,r){return{key:e,frame:!1,pts:n,dts:r,units:[],length:0}}getLastNalUnit(e){var n;let r=this.VideoSample,s;if((!r||r.units.length===0)&&(r=e[e.length-1]),(n=r)!=null&&n.units){const i=r.units;s=i[i.length-1]}return s}pushAccessUnit(e,n){if(e.units.length&&e.frame){if(e.pts===void 0){const r=n.samples,s=r.length;if(s){const i=r[s-1];e.pts=i.pts,e.dts=i.dts}else{n.dropped++;return}}n.samples.push(e)}}parseNALu(e,n,r){const s=n.byteLength;let i=e.naluState||0;const o=i,a=[];let u=0,l,c,d,f=-1,h=0;for(i===-1&&(f=0,h=this.getNALuType(n,0),i=0,u=1);u<s;){if(l=n[u++],!i){i=l?0:1;continue}if(i===1){i=l?0:2;continue}if(!l)i=3;else if(l===1){if(c=u-i-1,f>=0){const p={data:n.subarray(f,c),type:h};a.push(p)}else{const p=this.getLastNalUnit(e.samples);p&&(o&&u<=4-o&&p.state&&(p.data=p.data.subarray(0,p.data.byteLength-o)),c>0&&(p.data=ri(p.data,n.subarray(0,c)),p.state=0))}u<s?(d=this.getNALuType(n,u),f=u,h=d,i=0):i=-1}else i=0}if(f>=0&&i>=0){const p={data:n.subarray(f,s),type:h,state:i};a.push(p)}if(a.length===0){const p=this.getLastNalUnit(e.samples);p&&(p.data=ri(p.data,n))}return e.naluState=i,a}}class Uc{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,n=this.bytesAvailable,r=e.byteLength-n,s=new Uint8Array(4),i=Math.min(4,n);if(i===0)throw new Error("no bytes available");s.set(e.subarray(r,r+i)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=i*8,this.bytesAvailable-=i}skipBits(e){let n;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,n=e>>3,e-=n<<3,this.bytesAvailable-=n,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let n=Math.min(this.bitsAvailable,e);const r=this.word>>>32-n;if(e>32&&Nn.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=n,this.bitsAvailable>0)this.word<<=n;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return n=e-n,n>0&&this.bitsAvailable?r<<n|this.readBits(n):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class zE extends AA{parsePES(e,n,r,s){const i=this.parseNALu(e,r.data,s);let o=this.VideoSample,a,u=!1;r.data=null,o&&i.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),i.forEach(l=>{var c,d;switch(l.type){case 1:{let g=!1;a=!0;const v=l.data;if(u&&v.length>4){const y=this.readSliceType(v);(y===2||y===4||y===7||y===9)&&(g=!0)}if(g){var f;(f=o)!=null&&f.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),o.frame=!0,o.key=g;break}case 5:a=!0,(c=o)!=null&&c.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),o.key=!0,o.frame=!0;break;case 6:{a=!0,cb(l.data,1,r.pts,n.samples);break}case 7:{var h,p;a=!0,u=!0;const g=l.data,v=this.readSPS(g);if(!e.sps||e.width!==v.width||e.height!==v.height||((h=e.pixelRatio)==null?void 0:h[0])!==v.pixelRatio[0]||((p=e.pixelRatio)==null?void 0:p[1])!==v.pixelRatio[1]){e.width=v.width,e.height=v.height,e.pixelRatio=v.pixelRatio,e.sps=[g];const y=g.subarray(1,4);let w="avc1.";for(let b=0;b<3;b++){let S=y[b].toString(16);S.length<2&&(S="0"+S),w+=S}e.codec=w}break}case 8:a=!0,e.pps=[l.data];break;case 9:a=!0,e.audFound=!0,(d=o)!=null&&d.frame&&(this.pushAccessUnit(o,e),o=null),o||(o=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;case 12:a=!0;break;default:a=!1;break}o&&a&&o.units.push(l)}),s&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}getNALuType(e,n){return e[n]&31}readSliceType(e){const n=new Uc(e);return n.readUByte(),n.readUEG(),n.readUEG()}skipScalingList(e,n){let r=8,s=8,i;for(let o=0;o<e;o++)s!==0&&(i=n.readEG(),s=(r+i+256)%256),r=s===0?r:s}readSPS(e){const n=new Uc(e);let r=0,s=0,i=0,o=0,a,u,l;const c=n.readUByte.bind(n),d=n.readBits.bind(n),f=n.readUEG.bind(n),h=n.readBoolean.bind(n),p=n.skipBits.bind(n),g=n.skipEG.bind(n),v=n.skipUEG.bind(n),y=this.skipScalingList.bind(this);c();const w=c();if(d(5),p(3),c(),v(),w===100||w===110||w===122||w===244||w===44||w===83||w===86||w===118||w===128){const A=f();if(A===3&&p(1),v(),v(),p(1),h())for(u=A!==3?8:12,l=0;l<u;l++)h()&&(l<6?y(16,n):y(64,n))}v();const b=f();if(b===0)f();else if(b===1)for(p(1),g(),g(),a=f(),l=0;l<a;l++)g();v(),p(1);const S=f(),E=f(),x=d(1);x===0&&p(1),p(1),h()&&(r=f(),s=f(),i=f(),o=f());let k=[1,1];if(h()&&h())switch(c()){case 1:k=[1,1];break;case 2:k=[12,11];break;case 3:k=[10,11];break;case 4:k=[16,11];break;case 5:k=[40,33];break;case 6:k=[24,11];break;case 7:k=[20,11];break;case 8:k=[32,11];break;case 9:k=[80,33];break;case 10:k=[18,11];break;case 11:k=[15,11];break;case 12:k=[64,33];break;case 13:k=[160,99];break;case 14:k=[4,3];break;case 15:k=[3,2];break;case 16:k=[2,1];break;case 255:{k=[c()<<8|c(),c()<<8|c()];break}}return{width:Math.ceil((S+1)*16-r*2-s*2),height:(2-x)*(E+1)*16-(x?2:4)*(i+o),pixelRatio:k}}}class WE extends AA{constructor(...e){super(...e),this.initVPS=null}parsePES(e,n,r,s){const i=this.parseNALu(e,r.data,s);let o=this.VideoSample,a,u=!1;r.data=null,o&&i.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),i.forEach(l=>{var c,d;switch(l.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:o||(o=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),o.frame=!0,a=!0;break;case 16:case 17:case 18:case 21:if(a=!0,u){var f;(f=o)!=null&&f.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),o.key=!0,o.frame=!0;break;case 19:case 20:a=!0,(c=o)!=null&&c.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),o.key=!0,o.frame=!0;break;case 39:a=!0,cb(l.data,2,r.pts,n.samples);break;case 32:a=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=Kn(e.params,this.readVPS(l.data)),this.initVPS=l.data),e.vps=[l.data];break;case 33:if(a=!0,u=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],l.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const h=this.readSPS(l.data);e.width=h.width,e.height=h.height,e.pixelRatio=h.pixelRatio,e.codec=h.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const p in h.params)e.params[p]=h.params[p]}this.pushParameterSet(e.sps,l.data,e.vps),o||(o=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),o.key=!0;break;case 34:if(a=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const h=this.readPPS(l.data);for(const p in h)e.params[p]=h[p]}this.pushParameterSet(e.pps,l.data,e.vps)}break;case 35:a=!0,e.audFound=!0,(d=o)!=null&&d.frame&&(this.pushAccessUnit(o,e),o=null),o||(o=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;default:a=!1;break}o&&a&&o.units.push(l)}),s&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}pushParameterSet(e,n,r){(r&&r[0]===this.initVPS||!r&&!e.length)&&e.push(n)}getNALuType(e,n){return(e[n]&126)>>>1}ebsp2rbsp(e){const n=new Uint8Array(e.byteLength);let r=0;for(let s=0;s<e.byteLength;s++)s>=2&&e[s]===3&&e[s-1]===0&&e[s-2]===0||(n[r]=e[s],r++);return new Uint8Array(n.buffer,0,r)}pushAccessUnit(e,n){super.pushAccessUnit(e,n),this.initVPS&&(this.initVPS=null)}readVPS(e){const n=new Uc(e);n.readUByte(),n.readUByte(),n.readBits(4),n.skipBits(2),n.readBits(6);const r=n.readBits(3),s=n.readBoolean();return{numTemporalLayers:r+1,temporalIdNested:s}}readSPS(e){const n=new Uc(this.ebsp2rbsp(e));n.readUByte(),n.readUByte(),n.readBits(4);const r=n.readBits(3);n.readBoolean();const s=n.readBits(2),i=n.readBoolean(),o=n.readBits(5),a=n.readUByte(),u=n.readUByte(),l=n.readUByte(),c=n.readUByte(),d=n.readUByte(),f=n.readUByte(),h=n.readUByte(),p=n.readUByte(),g=n.readUByte(),v=n.readUByte(),y=n.readUByte(),w=[],b=[];for(let Ee=0;Ee<r;Ee++)w.push(n.readBoolean()),b.push(n.readBoolean());if(r>0)for(let Ee=r;Ee<8;Ee++)n.readBits(2);for(let Ee=0;Ee<r;Ee++)w[Ee]&&(n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte()),b[Ee]&&n.readUByte();n.readUEG();const S=n.readUEG();S==3&&n.skipBits(1);const E=n.readUEG(),x=n.readUEG(),k=n.readBoolean();let A=0,C=0,_=0,O=0;k&&(A+=n.readUEG(),C+=n.readUEG(),_+=n.readUEG(),O+=n.readUEG());const P=n.readUEG(),U=n.readUEG(),j=n.readUEG(),N=n.readBoolean();for(let Ee=N?0:r;Ee<=r;Ee++)n.skipUEG(),n.skipUEG(),n.skipUEG();if(n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.readBoolean()&&n.readBoolean())for(let be=0;be<4;be++)for(let Se=0;Se<(be===3?2:6);Se++)if(!n.readBoolean())n.readUEG();else{const Ne=Math.min(64,1<<4+(be<<1));be>1&&n.readEG();for(let Me=0;Me<Ne;Me++)n.readEG()}n.readBoolean(),n.readBoolean(),n.readBoolean()&&(n.readUByte(),n.skipUEG(),n.skipUEG(),n.readBoolean());const D=n.readUEG();let M=0;for(let Ee=0;Ee<D;Ee++){let be=!1;if(Ee!==0&&(be=n.readBoolean()),be){Ee===D&&n.readUEG(),n.readBoolean(),n.readUEG();let Se=0;for(let _e=0;_e<=M;_e++){const Ne=n.readBoolean();let Me=!1;Ne||(Me=n.readBoolean()),(Ne||Me)&&Se++}M=Se}else{const Se=n.readUEG(),_e=n.readUEG();M=Se+_e;for(let Ne=0;Ne<Se;Ne++)n.readUEG(),n.readBoolean();for(let Ne=0;Ne<_e;Ne++)n.readUEG(),n.readBoolean()}}if(n.readBoolean()){const Ee=n.readUEG();for(let be=0;be<Ee;be++){for(let Se=0;Se<j+4;Se++)n.readBits(1);n.readBits(1)}}let q=0,ee=1,X=1,te=!0,ue=1,he=0;n.readBoolean(),n.readBoolean();let Z=!1;if(n.readBoolean()){if(n.readBoolean()){const st=n.readUByte(),qe=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Ae=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];st>0&&st<16?(ee=qe[st-1],X=Ae[st-1]):st===255&&(ee=n.readBits(16),X=n.readBits(16))}if(n.readBoolean()&&n.readBoolean(),n.readBoolean()&&(n.readBits(3),n.readBoolean(),n.readBoolean()&&(n.readUByte(),n.readUByte(),n.readUByte())),n.readBoolean()&&(n.readUEG(),n.readUEG()),n.readBoolean(),n.readBoolean(),n.readBoolean(),Z=n.readBoolean(),Z&&(A+=n.readUEG(),C+=n.readUEG(),_+=n.readUEG(),O+=n.readUEG()),n.readBoolean()&&(ue=n.readBits(32),he=n.readBits(32),n.readBoolean()&&n.readUEG(),n.readBoolean())){const Ae=n.readBoolean(),et=n.readBoolean();let St=!1;(Ae||et)&&(St=n.readBoolean(),St&&(n.readUByte(),n.readBits(5),n.readBoolean(),n.readBits(5)),n.readBits(4),n.readBits(4),St&&n.readBits(4),n.readBits(5),n.readBits(5),n.readBits(5));for(let Lt=0;Lt<=r;Lt++){te=n.readBoolean();const Pt=te||n.readBoolean();let en=!1;Pt?n.readEG():en=n.readBoolean();const zt=en?1:n.readUEG()+1;if(Ae)for(let bn=0;bn<zt;bn++)n.readUEG(),n.readUEG(),St&&(n.readUEG(),n.readUEG()),n.skipBits(1);if(et)for(let bn=0;bn<zt;bn++)n.readUEG(),n.readUEG(),St&&(n.readUEG(),n.readUEG()),n.skipBits(1)}}n.readBoolean()&&(n.readBoolean(),n.readBoolean(),n.readBoolean(),q=n.readUEG())}let ae=E,Te=x;if(k||Z){let Ee=1,be=1;S===1?Ee=be=2:S==2&&(Ee=2),ae=E-Ee*C-Ee*A,Te=x-be*O-be*_}const Ce=s?["A","B","C"][s]:"",z=a<<24|u<<16|l<<8|c;let re=0;for(let Ee=0;Ee<32;Ee++)re=(re|(z>>Ee&1)<<31-Ee)>>>0;let ve=re.toString(16);return o===1&&ve==="2"&&(ve="6"),{codecString:`hvc1.${Ce}${o}.${ve}.${i?"H":"L"}${y}.B0`,params:{general_tier_flag:i,general_profile_idc:o,general_profile_space:s,general_profile_compatibility_flags:[a,u,l,c],general_constraint_indicator_flags:[d,f,h,p,g,v],general_level_idc:y,bit_depth:P+8,bit_depth_luma_minus8:P,bit_depth_chroma_minus8:U,min_spatial_segmentation_idc:q,chroma_format_idc:S,frame_rate:{fixed:te,fps:he/ue}},width:ae,height:Te,pixelRatio:[ee,X]}}readPPS(e){const n=new Uc(this.ebsp2rbsp(e));n.readUByte(),n.readUByte(),n.skipUEG(),n.skipUEG(),n.skipBits(2),n.skipBits(3),n.skipBits(2),n.skipUEG(),n.skipUEG(),n.skipEG(),n.skipBits(2),n.readBoolean()&&n.skipUEG(),n.skipEG(),n.skipEG(),n.skipBits(4);const s=n.readBoolean(),i=n.readBoolean();let o=1;return i&&s?o=0:i?o=3:s&&(o=2),{parallelismType:o}}matchSPS(e,n){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,n).substr(3)}}const Lr=188;class da{constructor(e,n,r,s){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.logger=s,this.videoParser=null}static probe(e,n){const r=da.syncOffset(e);return r>0&&n.warn(`MPEG2-TS detected but first sync word found @ offset ${r}`),r!==-1}static syncOffset(e){const n=e.length;let r=Math.min(Lr*5,n-Lr)+1,s=0;for(;s<r;){let i=!1,o=-1,a=0;for(let u=s;u<n;u+=Lr)if(e[u]===71&&(n-u===Lr||e[u+Lr]===71)){if(a++,o===-1&&(o=u,o!==0&&(r=Math.min(o+Lr*99,e.length-Lr)+1)),i||(i=v0(e,u)===0),i&&a>1&&(o===0&&a>2||u+Lr>r))return o}else{if(a)return-1;break}s++}return-1}static createTrack(e,n){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:N2[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?n:void 0}}resetInitSegment(e,n,r,s){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=da.createTrack("video"),this._videoTrack.duration=s,this._audioTrack=da.createTrack("audio",s),this._id3Track=da.createTrack("id3"),this._txtTrack=da.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:n,_id3Track:r}=this;e&&(e.pesData=null),n&&(n.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,n,r=!1,s=!1){r||(this.sampleAes=null);let i;const o=this._videoTrack,a=this._audioTrack,u=this._id3Track,l=this._txtTrack;let c=o.pid,d=o.pesData,f=a.pid,h=u.pid,p=a.pesData,g=u.pesData,v=null,y=this.pmtParsed,w=this._pmtId,b=e.length;if(this.remainderData&&(e=ri(this.remainderData,e),b=e.length,this.remainderData=null),b<Lr&&!s)return this.remainderData=e,{audioTrack:a,videoTrack:o,id3Track:u,textTrack:l};const S=Math.max(0,da.syncOffset(e));b-=(b-S)%Lr,b<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,b,e.buffer.byteLength-b));let E=0;for(let k=S;k<b;k+=Lr)if(e[k]===71){const A=!!(e[k+1]&64),C=v0(e,k),_=(e[k+3]&48)>>4;let O;if(_>1){if(O=k+5+e[k+4],O===k+Lr)continue}else O=k+4;switch(C){case c:if(A){if(d&&(i=Ll(d,this.logger))){if(this.videoParser===null)switch(o.segmentCodec){case"avc":this.videoParser=new zE;break;case"hevc":this.videoParser=new WE;break}this.videoParser!==null&&this.videoParser.parsePES(o,l,i,!1)}d={data:[],size:0}}d&&(d.data.push(e.subarray(O,k+Lr)),d.size+=k+Lr-O);break;case f:if(A){if(p&&(i=Ll(p,this.logger)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,i);break;case"mp3":this.parseMPEGPES(a,i);break;case"ac3":this.parseAC3PES(a,i);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(O,k+Lr)),p.size+=k+Lr-O);break;case h:A&&(g&&(i=Ll(g,this.logger))&&this.parseID3PES(u,i),g={data:[],size:0}),g&&(g.data.push(e.subarray(O,k+Lr)),g.size+=k+Lr-O);break;case 0:A&&(O+=e[O]+1),w=this._pmtId=J8(e,O);break;case w:{A&&(O+=e[O]+1);const P=eB(e,O,this.typeSupported,r,this.observer,this.logger);c=P.videoPid,c>0&&(o.pid=c,o.segmentCodec=P.segmentVideoCodec),f=P.audioPid,f>0&&(a.pid=f,a.segmentCodec=P.segmentAudioCodec),h=P.id3Pid,h>0&&(u.pid=h),v!==null&&!y&&(this.logger.warn(`MPEG-TS PMT found at ${k} after unknown PID '${v}'. Backtracking to sync byte @${S} to parse all TS packets.`),v=null,k=S-188),y=this.pmtParsed=!0;break}case 17:case 8191:break;default:v=C;break}}else E++;E>0&&y0(this.observer,new Error(`Found ${E} TS packet/s that do not start with 0x47`),void 0,this.logger),o.pesData=d,a.pesData=p,u.pesData=g;const x={audioTrack:a,videoTrack:o,id3Track:u,textTrack:l};return s&&this.extractRemainingSamples(x),x}flush(){const{remainderData:e}=this;this.remainderData=null;let n;return e?n=this.demux(e,-1,!1,!0):n={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(n),this.sampleAes?this.decrypt(n,this.sampleAes):n}extractRemainingSamples(e){const{audioTrack:n,videoTrack:r,id3Track:s,textTrack:i}=e,o=r.pesData,a=n.pesData,u=s.pesData;let l;if(o&&(l=Ll(o,this.logger))){if(this.videoParser===null)switch(r.segmentCodec){case"avc":this.videoParser=new zE;break;case"hevc":this.videoParser=new WE;break}this.videoParser!==null&&(this.videoParser.parsePES(r,i,l,!0),r.pesData=null)}else r.pesData=o;if(a&&(l=Ll(a,this.logger))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,l);break;case"mp3":this.parseMPEGPES(n,l);break;case"ac3":this.parseAC3PES(n,l);break}n.pesData=null}else a!=null&&a.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=a;u&&(l=Ll(u,this.logger))?(this.parseID3PES(s,l),s.pesData=null):s.pesData=u}demuxSampleAes(e,n,r){const s=this.demux(e,r,!0,!this.config.progressive),i=this.sampleAes=new Z8(this.observer,this.config,n);return this.decrypt(s,i)}decrypt(e,n){return new Promise(r=>{const{audioTrack:s,videoTrack:i}=e;s.samples&&s.segmentCodec==="aac"?n.decryptAacSamples(s.samples,0,()=>{i.samples?n.decryptAvcSamples(i.samples,0,0,()=>{r(e)}):r(e)}):i.samples&&n.decryptAvcSamples(i.samples,0,0,()=>{r(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,n){let r=0;const s=this.aacOverFlow;let i=n.data;if(s){this.aacOverFlow=null;const d=s.missing,f=s.sample.unit.byteLength;if(d===-1)i=ri(s.sample.unit,i);else{const h=f-d;s.sample.unit.set(i.subarray(0,d),h),e.samples.push(s.sample),r=s.missing}}let o,a;for(o=r,a=i.length;o<a-1&&!xp(i,o);o++);if(o!==r){let d;const f=o<a-1;if(f?d=`AAC PES did not start with ADTS header,offset:${o}`:d="No ADTS header found in AAC PES",y0(this.observer,new Error(d),f,this.logger),!f)return}vA(e,this.observer,i,o,this.audioCodec);let u;if(n.pts!==void 0)u=n.pts;else if(s){const d=yA(e.samplerate);u=s.sample.pts+d}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let l=0,c;for(;o<a;)if(c=bA(e,i,o,u,l),o+=c.length,c.missing){this.aacOverFlow=c;break}else for(l++;o<a-1&&!xp(i,o);o++);}parseMPEGPES(e,n){const r=n.data,s=r.length;let i=0,o=0;const a=n.pts;if(a===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;o<s;)if(TA(r,o)){const u=EA(e,r,o,a,i);if(u)o+=u.length,i++;else break}else o++}parseAC3PES(e,n){{const r=n.data,s=n.pts;if(s===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const i=r.length;let o=0,a=0,u;for(;a<i&&(u=_A(e,r,a,s,o++))>0;)a+=u}}parseID3PES(e,n){if(n.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const r=Kn({},n,{type:this._videoTrack?Os.emsg:Os.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function v0(t,e){return((t[e+1]&31)<<8)+t[e+2]}function J8(t,e){return(t[e+10]&31)<<8|t[e+11]}function eB(t,e,n,r,s,i){const o={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},a=(t[e+1]&15)<<8|t[e+2],u=e+3+a-4,l=(t[e+10]&15)<<8|t[e+11];for(e+=12+l;e<u;){const c=v0(t,e),d=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!r){ev("ADTS AAC",i);break}case 15:o.audioPid===-1&&(o.audioPid=c);break;case 21:o.id3Pid===-1&&(o.id3Pid=c);break;case 219:if(!r){ev("H.264",i);break}case 27:o.videoPid===-1&&(o.videoPid=c);break;case 3:case 4:!n.mpeg&&!n.mp3?i.log("MPEG audio found, not supported in this browser"):o.audioPid===-1&&(o.audioPid=c,o.segmentAudioCodec="mp3");break;case 193:if(!r){ev("AC-3",i);break}case 129:n.ac3?o.audioPid===-1&&(o.audioPid=c,o.segmentAudioCodec="ac3"):i.log("AC-3 audio found, not supported in this browser");break;case 6:if(o.audioPid===-1&&d>0){let f=e+5,h=d;for(;h>2;){switch(t[f]){case 106:n.ac3!==!0?i.log("AC-3 audio found, not supported in this browser for now"):(o.audioPid=c,o.segmentAudioCodec="ac3");break}const g=t[f+1]+2;f+=g,h-=g}}break;case 194:case 135:return y0(s,new Error("Unsupported EC-3 in M2TS found"),void 0,i),o;case 36:o.videoPid===-1&&(o.videoPid=c,o.segmentVideoCodec="hevc",i.log("HEVC in M2TS found"));break}e+=d+5}return o}function y0(t,e,n,r){r.warn(`parsing error: ${e.message}`),t.emit(G.ERROR,G.ERROR,{type:nn.MEDIA_ERROR,details:Ge.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:e,reason:e.message})}function ev(t,e){e.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function Ll(t,e){let n=0,r,s,i,o,a;const u=t.data;if(!t||t.size===0)return null;for(;u[0].length<19&&u.length>1;)u[0]=ri(u[0],u[1]),u.splice(1,1);if(r=u[0],(r[0]<<16)+(r[1]<<8)+r[2]===1){if(s=(r[4]<<8)+r[5],s&&s>t.size-6)return null;const c=r[7];c&192&&(o=(r[9]&14)*536870912+(r[10]&255)*4194304+(r[11]&254)*16384+(r[12]&255)*128+(r[13]&254)/2,c&64?(a=(r[14]&14)*536870912+(r[15]&255)*4194304+(r[16]&254)*16384+(r[17]&255)*128+(r[18]&254)/2,o-a>60*9e4&&(e.warn(`${Math.round((o-a)/9e4)}s delta between PTS and DTS, align them`),o=a)):a=o),i=r[8];let d=i+9;if(t.size<=d)return null;t.size-=d;const f=new Uint8Array(t.size);for(let h=0,p=u.length;h<p;h++){r=u[h];let g=r.byteLength;if(d)if(d>g){d-=g;continue}else r=r.subarray(d),g-=d,d=0;f.set(r,n),n+=g}return s&&(s-=i+3),{data:f,pts:o,dts:a,len:s}}return null}class tB{static getSilentFrame(e,n){switch(e){case"mp4a.40.2":if(n===1)return new Uint8Array([0,200,0,128,35,128]);if(n===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(n===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(n===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(n===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(n===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(n===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const ea=Math.pow(2,32)-1;class je{static init(){je.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in je.types)je.types.hasOwnProperty(e)&&(je.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);je.HDLR_TYPES={video:n,audio:r};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);je.STTS=je.STSC=je.STCO=i,je.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),je.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),je.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),je.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);je.FTYP=je.box(je.types.ftyp,o,u,o,a),je.DINF=je.box(je.types.dinf,je.box(je.types.dref,s))}static box(e,...n){let r=8,s=n.length;const i=s;for(;s--;)r+=n[s].byteLength;const o=new Uint8Array(r);for(o[0]=r>>24&255,o[1]=r>>16&255,o[2]=r>>8&255,o[3]=r&255,o.set(e,4),s=0,r=8;s<i;s++)o.set(n[s],r),r+=n[s].byteLength;return o}static hdlr(e){return je.box(je.types.hdlr,je.HDLR_TYPES[e])}static mdat(e){return je.box(je.types.mdat,e)}static mdhd(e,n){n*=e;const r=Math.floor(n/(ea+1)),s=Math.floor(n%(ea+1));return je.box(je.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,s>>24,s>>16&255,s>>8&255,s&255,85,196,0,0]))}static mdia(e){return je.box(je.types.mdia,je.mdhd(e.timescale||0,e.duration||0),je.hdlr(e.type),je.minf(e))}static mfhd(e){return je.box(je.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?je.box(je.types.minf,je.box(je.types.smhd,je.SMHD),je.DINF,je.stbl(e)):je.box(je.types.minf,je.box(je.types.vmhd,je.VMHD),je.DINF,je.stbl(e))}static moof(e,n,r){return je.box(je.types.moof,je.mfhd(e),je.traf(r,n))}static moov(e){let n=e.length;const r=[];for(;n--;)r[n]=je.trak(e[n]);return je.box.apply(null,[je.types.moov,je.mvhd(e[0].timescale||0,e[0].duration||0)].concat(r).concat(je.mvex(e)))}static mvex(e){let n=e.length;const r=[];for(;n--;)r[n]=je.trex(e[n]);return je.box.apply(null,[je.types.mvex,...r])}static mvhd(e,n){n*=e;const r=Math.floor(n/(ea+1)),s=Math.floor(n%(ea+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,s>>24,s>>16&255,s>>8&255,s&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return je.box(je.types.mvhd,i)}static sdtp(e){const n=e.samples||[],r=new Uint8Array(4+n.length);let s,i;for(s=0;s<n.length;s++)i=n[s].flags,r[s+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return je.box(je.types.sdtp,r)}static stbl(e){return je.box(je.types.stbl,je.stsd(e),je.box(je.types.stts,je.STTS),je.box(je.types.stsc,je.STSC),je.box(je.types.stsz,je.STSZ),je.box(je.types.stco,je.STCO))}static avc1(e){let n=[],r=[],s,i,o;for(s=0;s<e.sps.length;s++)i=e.sps[s],o=i.byteLength,n.push(o>>>8&255),n.push(o&255),n=n.concat(Array.prototype.slice.call(i));for(s=0;s<e.pps.length;s++)i=e.pps[s],o=i.byteLength,r.push(o>>>8&255),r.push(o&255),r=r.concat(Array.prototype.slice.call(i));const a=je.box(je.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(r))),u=e.width,l=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return je.box(je.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,l>>8&255,l&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,je.box(je.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),je.box(je.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,c&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const n=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...n,6,1,2])}static audioStsd(e){const n=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,n>>8&255,n&255,0,0])}static mp4a(e){return je.box(je.types.mp4a,je.audioStsd(e),je.box(je.types.esds,je.esds(e)))}static mp3(e){return je.box(je.types[".mp3"],je.audioStsd(e))}static ac3(e){return je.box(je.types["ac-3"],je.audioStsd(e),je.box(je.types.dac3,e.config))}static stsd(e){const{segmentCodec:n}=e;if(e.type==="audio"){if(n==="aac")return je.box(je.types.stsd,je.STSD,je.mp4a(e));if(n==="ac3"&&e.config)return je.box(je.types.stsd,je.STSD,je.ac3(e));if(n==="mp3"&&e.codec==="mp3")return je.box(je.types.stsd,je.STSD,je.mp3(e))}else if(e.pps&&e.sps){if(n==="avc")return je.box(je.types.stsd,je.STSD,je.avc1(e));if(n==="hevc"&&e.vps)return je.box(je.types.stsd,je.STSD,je.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${n}/${e.codec})`)}static tkhd(e){const n=e.id,r=(e.duration||0)*(e.timescale||0),s=e.width||0,i=e.height||0,o=Math.floor(r/(ea+1)),a=Math.floor(r%(ea+1));return je.box(je.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,a>>24,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,s&255,0,0,i>>8&255,i&255,0,0]))}static traf(e,n){const r=je.sdtp(e),s=e.id,i=Math.floor(n/(ea+1)),o=Math.floor(n%(ea+1));return je.box(je.types.traf,je.box(je.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])),je.box(je.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,i&255,o>>24,o>>16&255,o>>8&255,o&255])),je.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,je.box(je.types.trak,je.tkhd(e),je.mdia(e))}static trex(e){const n=e.id;return je.box(je.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,n){const r=e.samples||[],s=r.length,i=12+16*s,o=new Uint8Array(i);let a,u,l,c,d,f;for(n+=8+i,o.set([e.type==="video"?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,s&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255],0),a=0;a<s;a++)u=r[a],l=u.duration,c=u.size,d=u.flags,f=u.cts,o.set([l>>>24&255,l>>>16&255,l>>>8&255,l&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*a);return je.box(je.types.trun,o)}static initSegment(e){je.types||je.init();const n=je.moov(e);return ri(je.FTYP,n)}static hvc1(e){const n=e.params,r=[e.vps,e.sps,e.pps],s=4,i=new Uint8Array([1,n.general_profile_space<<6|(n.general_tier_flag?32:0)|n.general_profile_idc,n.general_profile_compatibility_flags[0],n.general_profile_compatibility_flags[1],n.general_profile_compatibility_flags[2],n.general_profile_compatibility_flags[3],n.general_constraint_indicator_flags[0],n.general_constraint_indicator_flags[1],n.general_constraint_indicator_flags[2],n.general_constraint_indicator_flags[3],n.general_constraint_indicator_flags[4],n.general_constraint_indicator_flags[5],n.general_level_idc,240|n.min_spatial_segmentation_idc>>8,255&n.min_spatial_segmentation_idc,252|n.parallelismType,252|n.chroma_format_idc,248|n.bit_depth_luma_minus8,248|n.bit_depth_chroma_minus8,0,parseInt(n.frame_rate.fps),s-1|n.temporal_id_nested<<2|n.num_temporal_layers<<3|(n.frame_rate.fixed?64:0),r.length]);let o=i.length;for(let p=0;p<r.length;p+=1){o+=3;for(let g=0;g<r[p].length;g+=1)o+=2+r[p][g].length}const a=new Uint8Array(o);a.set(i,0),o=i.length;const u=r.length-1;for(let p=0;p<r.length;p+=1){a.set(new Uint8Array([32+p|(p===u?128:0),0,r[p].length]),o),o+=3;for(let g=0;g<r[p].length;g+=1)a.set(new Uint8Array([r[p][g].length>>8,r[p][g].length&255]),o),o+=2,a.set(r[p][g],o),o+=r[p][g].length}const l=je.box(je.types.hvcC,a),c=e.width,d=e.height,f=e.pixelRatio[0],h=e.pixelRatio[1];return je.box(je.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,c&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l,je.box(je.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),je.box(je.types.pasp,new Uint8Array([f>>24,f>>16&255,f>>8&255,f&255,h>>24,h>>16&255,h>>8&255,h&255])))}}je.types=void 0;je.HDLR_TYPES=void 0;je.STTS=void 0;je.STSC=void 0;je.STCO=void 0;je.STSZ=void 0;je.VMHD=void 0;je.SMHD=void 0;je.STSD=void 0;je.FTYP=void 0;je.DINF=void 0;const IA=9e4;function xb(t,e,n=1,r=!1){const s=t*e*n;return r?Math.round(s):s}function nB(t,e,n=1,r=!1){return xb(t,e,1/n,r)}function gc(t,e=!1){return xb(t,1e3,1/IA,e)}function rB(t,e=1){return xb(t,IA,1/e)}const sB=10*1e3,iB=1024,oB=1152,aB=1536;let Pl=null,tv=null;function GE(t,e,n,r){return{duration:e,size:n,cts:r,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:t?2:1,isNonSync:t?0:1}}}class Eh{constructor(e,n,r,s){if(this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.logger=s,this.ISGenerated=!1,Pl===null){const o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Pl=o?parseInt(o[1]):0}if(tv===null){const i=navigator.userAgent.match(/Safari\/(\d+)/i);tv=i?parseInt(i[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let n=!1;const r=e[0].pts,s=e.reduce((i,o)=>{let a=o.pts,u=a-i;return u<-4294967296&&(n=!0,a=Ys(a,r),u=a-i),u>0?i:a},r);return n&&this.logger.debug("PTS rollover detected"),s}remux(e,n,r,s,i,o,a,u){let l,c,d,f,h,p,g=i,v=i;const y=e.pid>-1,w=n.pid>-1,b=n.samples.length,S=e.samples.length>0,E=a&&b>0||b>1;if((!y||S)&&(!w||E)||this.ISGenerated||a){if(this.ISGenerated){var k,A,C,_;const j=this.videoTrackConfig;(j&&(n.width!==j.width||n.height!==j.height||((k=n.pixelRatio)==null?void 0:k[0])!==((A=j.pixelRatio)==null?void 0:A[0])||((C=n.pixelRatio)==null?void 0:C[1])!==((_=j.pixelRatio)==null?void 0:_[1]))||!j&&E||this.nextAudioPts===null&&S)&&this.resetInitSegment()}this.ISGenerated||(d=this.generateIS(e,n,i,o));const O=this.isVideoContiguous;let P=-1,U;if(E&&(P=lB(n.samples),!O&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,P>0){this.logger.warn(`[mp4-remuxer]: Dropped ${P} out of ${b} video samples due to a missing keyframe`);const j=this.getVideoStartPts(n.samples);n.samples=n.samples.slice(P),n.dropped+=P,v+=(n.samples[0].pts-j)/n.inputTimeScale,U=v}else P===-1&&(this.logger.warn(`[mp4-remuxer]: No keyframe found out of ${b} video samples`),p=!1);if(this.ISGenerated){if(S&&E){const j=this.getVideoStartPts(n.samples),R=(Ys(e.samples[0].pts,j)-j)/n.inputTimeScale;g+=Math.max(0,R),v+=Math.max(0,-R)}if(S){if(e.samplerate||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(e,n,i,o)),c=this.remuxAudio(e,g,this.isAudioContiguous,o,w||E||u===qt.AUDIO?v:void 0),E){const j=c?c.endPTS-c.startPTS:0;n.inputTimeScale||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(e,n,i,o)),l=this.remuxVideo(n,v,O,j)}}else E&&(l=this.remuxVideo(n,v,O,0));l&&(l.firstKeyFrame=P,l.independent=P!==-1,l.firstKeyFramePTS=U)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(h=RA(r,i,this._initPTS,this._initDTS)),s.samples.length&&(f=LA(s,i,this._initPTS))),{audio:c,video:l,initSegment:d,independent:p,text:f,id3:h}}generateIS(e,n,r,s){const i=e.samples,o=n.samples,a=this.typeSupported,u={},l=this._initPTS;let c=!l||s,d="audio/mp4",f,h,p,g;if(c&&(f=h=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(d="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}u.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&a.mpeg?new Uint8Array(0):je.initSegment([e]),metadata:{channelCount:e.channelCount}},c&&(g=e.id,p=e.inputTimeScale,!l||p!==l.timescale?f=h=i[0].pts-Math.round(p*r):c=!1)}if(n.sps&&n.pps&&o.length){if(n.timescale=n.inputTimeScale,u.video={id:"main",container:"video/mp4",codec:n.codec,initSegment:je.initSegment([n]),metadata:{width:n.width,height:n.height}},c)if(g=n.id,p=n.inputTimeScale,!l||p!==l.timescale){const v=this.getVideoStartPts(o),y=Math.round(p*r);h=Math.min(h,Ys(o[0].dts,v)-y),f=Math.min(f,v-y)}else c=!1;this.videoTrackConfig={width:n.width,height:n.height,pixelRatio:n.pixelRatio}}if(Object.keys(u).length)return this.ISGenerated=!0,c?(this._initPTS={baseTime:f,timescale:p},this._initDTS={baseTime:h,timescale:p}):f=p=void 0,{tracks:u,initPTS:f,timescale:p,trackId:g}}remuxVideo(e,n,r,s){const i=e.inputTimeScale,o=e.samples,a=[],u=o.length,l=this._initPTS;let c=this.nextAvcDts,d=8,f=this.videoSampleDuration,h,p,g=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,y=!1;if(!r||c===null){const M=n*i,K=o[0].pts-Ys(o[0].dts,o[0].pts);Pl&&c!==null&&Math.abs(M-K-c)<15e3?r=!0:c=M-K}const w=l.baseTime*i/l.timescale;for(let M=0;M<u;M++){const K=o[M];K.pts=Ys(K.pts-w,c),K.dts=Ys(K.dts-w,c),K.dts<o[M>0?M-1:M].dts&&(y=!0)}y&&o.sort(function(M,K){const q=M.dts-K.dts,ee=M.pts-K.pts;return q||ee}),h=o[0].dts,p=o[o.length-1].dts;const b=p-h,S=b?Math.round(b/(u-1)):f||e.inputTimeScale/30;if(r){const M=h-c,K=M>S,q=M<-1;if((K||q)&&(K?this.logger.warn(`${(e.segmentCodec||"").toUpperCase()}: ${gc(M,!0)} ms (${M}dts) hole between fragments detected at ${n.toFixed(3)}`):this.logger.warn(`${(e.segmentCodec||"").toUpperCase()}: ${gc(-M,!0)} ms (${M}dts) overlapping between fragments detected at ${n.toFixed(3)}`),!q||c>=o[0].pts||Pl)){h=c;const ee=o[0].pts-M;if(K)o[0].dts=h,o[0].pts=ee;else{let X=!0;for(let te=0;te<o.length&&!(o[te].dts>ee&&X);te++){const ue=o[te].pts;if(o[te].dts-=M,o[te].pts-=M,te<o.length-1){const he=o[te+1].pts,Z=o[te].pts,ce=he<=Z,ae=he<=ue;X=ce==ae}}}this.logger.log(`Video: Initial PTS/DTS adjusted: ${gc(ee,!0)}/${gc(h,!0)}, delta: ${gc(M,!0)} ms`)}}h=Math.max(0,h);let E=0,x=0,k=h;for(let M=0;M<u;M++){const K=o[M],q=K.units,ee=q.length;let X=0;for(let te=0;te<ee;te++)X+=q[te].data.length;x+=X,E+=ee,K.length=X,K.dts<k?(K.dts=k,k+=S/4|0||1):k=K.dts,g=Math.min(K.pts,g),v=Math.max(K.pts,v)}p=o[u-1].dts;const A=x+4*E+8;let C;try{C=new Uint8Array(A)}catch(M){this.observer.emit(G.ERROR,G.ERROR,{type:nn.MUX_ERROR,details:Ge.REMUX_ALLOC_ERROR,fatal:!1,error:M,bytes:A,reason:`fail allocating video mdat ${A}`});return}const _=new DataView(C.buffer);_.setUint32(0,A),C.set(je.types.mdat,4);let O=!1,P=Number.POSITIVE_INFINITY,U=Number.POSITIVE_INFINITY,j=Number.NEGATIVE_INFINITY,N=Number.NEGATIVE_INFINITY;for(let M=0;M<u;M++){const K=o[M],q=K.units;let ee=0;for(let ue=0,he=q.length;ue<he;ue++){const Z=q[ue],ce=Z.data,ae=Z.data.byteLength;_.setUint32(d,ae),d+=4,C.set(ce,d),d+=ae,ee+=4+ae}let X;if(M<u-1)f=o[M+1].dts-K.dts,X=o[M+1].pts-K.pts;else{const ue=this.config,he=M>0?K.dts-o[M-1].dts:S;if(X=M>0?K.pts-o[M-1].pts:S,ue.stretchShortVideoTrack&&this.nextAudioPts!==null){const Z=Math.floor(ue.maxBufferHole*i),ce=(s?g+s*i:this.nextAudioPts)-K.pts;ce>Z?(f=ce-he,f<0?f=he:O=!0,this.logger.log(`[mp4-remuxer]: It is approximately ${ce/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=he}else f=he}const te=Math.round(K.pts-K.dts);P=Math.min(P,f),j=Math.max(j,f),U=Math.min(U,X),N=Math.max(N,X),a.push(GE(K.key,f,ee,te))}if(a.length){if(Pl){if(Pl<70){const M=a[0].flags;M.dependsOn=2,M.isNonSync=0}}else if(tv&&N-U<j-P&&S/j<.025&&a[0].cts===0){this.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let M=h;for(let K=0,q=a.length;K<q;K++){const ee=M+a[K].duration,X=M+a[K].cts;if(K<q-1){const te=ee+a[K+1].cts;a[K].duration=te-X}else a[K].duration=K?a[K-1].duration:S;a[K].cts=0,M=ee}}}f=O||!f?S:f,this.nextAvcDts=c=p+f,this.videoSampleDuration=f,this.isVideoContiguous=!0;const D={data1:je.moof(e.sequenceNumber++,h,Kn(e,{samples:a})),data2:C,startPTS:g/i,endPTS:(v+f)/i,startDTS:h/i,endDTS:c/i,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,D}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return oB;case"ac3":return aB;default:return iB}}remuxAudio(e,n,r,s,i){const o=e.inputTimeScale,a=e.samplerate?e.samplerate:o,u=o/a,l=this.getSamplesPerFrame(e),c=l*u,d=this._initPTS,f=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,h=[],p=i!==void 0;let g=e.samples,v=f?0:8,y=this.nextAudioPts||-1;const w=n*o,b=d.baseTime*o/d.timescale;if(this.isAudioContiguous=r=r||g.length&&y>0&&(s&&Math.abs(w-y)<9e3||Math.abs(Ys(g[0].pts-b,w)-y)<20*c),g.forEach(function(R){R.pts=Ys(R.pts-b,w)}),!r||y<0){if(g=g.filter(R=>R.pts>=0),!g.length)return;i===0?y=0:s&&!p?y=Math.max(0,w):y=g[0].pts}if(e.segmentCodec==="aac"){const R=this.config.maxAudioFramesDrift;for(let V=0,D=y;V<g.length;V++){const M=g[V],K=M.pts,q=K-D,ee=Math.abs(1e3*q/o);if(q<=-R*c&&p)V===0&&(this.logger.warn(`Audio frame @ ${(K/o).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*q/o)} ms.`),this.nextAudioPts=y=D=K);else if(q>=R*c&&ee<sB&&p){let X=Math.round(q/c);D=K-X*c,D<0&&(X--,D+=c),V===0&&(this.nextAudioPts=y=D),this.logger.warn(`[mp4-remuxer]: Injecting ${X} audio frame @ ${(D/o).toFixed(3)}s due to ${Math.round(1e3*q/o)} ms gap.`);for(let te=0;te<X;te++){const ue=Math.max(D,0);let he=tB.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);he||(this.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),he=M.unit.subarray()),g.splice(V,0,{unit:he,pts:ue}),D+=c,V++}}M.pts=D,D+=c}}let S=null,E=null,x,k=0,A=g.length;for(;A--;)k+=g[A].unit.byteLength;for(let R=0,V=g.length;R<V;R++){const D=g[R],M=D.unit;let K=D.pts;if(E!==null){const ee=h[R-1];ee.duration=Math.round((K-E)/u)}else if(r&&e.segmentCodec==="aac"&&(K=y),S=K,k>0){k+=v;try{x=new Uint8Array(k)}catch(ee){this.observer.emit(G.ERROR,G.ERROR,{type:nn.MUX_ERROR,details:Ge.REMUX_ALLOC_ERROR,fatal:!1,error:ee,bytes:k,reason:`fail allocating audio mdat ${k}`});return}f||(new DataView(x.buffer).setUint32(0,k),x.set(je.types.mdat,4))}else return;x.set(M,v);const q=M.byteLength;v+=q,h.push(GE(!0,l,q,0)),E=K}const C=h.length;if(!C)return;const _=h[h.length-1];this.nextAudioPts=y=E+u*_.duration;const O=f?new Uint8Array(0):je.moof(e.sequenceNumber++,S/u,Kn({},e,{samples:h}));e.samples=[];const P=S/o,U=y/o,N={data1:O,data2:x,startPTS:P,endPTS:U,startDTS:P,endDTS:U,type:"audio",hasAudio:!0,hasVideo:!1,nb:C};return this.isAudioContiguous=!0,N}}function Ys(t,e){let n;if(e===null)return t;for(e<t?n=-8589934592:n=8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}function lB(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function RA(t,e,n,r){const s=t.samples.length;if(!s)return;const i=t.inputTimeScale;for(let a=0;a<s;a++){const u=t.samples[a];u.pts=Ys(u.pts-n.baseTime*i/n.timescale,e*i)/i,u.dts=Ys(u.dts-r.baseTime*i/r.timescale,e*i)/i}const o=t.samples;return t.samples=[],{samples:o}}function LA(t,e,n){const r=t.samples.length;if(!r)return;const s=t.inputTimeScale;for(let o=0;o<r;o++){const a=t.samples[o];a.pts=Ys(a.pts-n.baseTime*s/n.timescale,e*s)/s}t.samples.sort((o,a)=>o.pts-a.pts);const i=t.samples;return t.samples=[],{samples:i}}class uB{constructor(e,n,r,s){this.logger=void 0,this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1,this.logger=s}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,n,r,s){this.audioCodec=n,this.videoCodec=r,this.generateInitSegment(r4(e,s)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:n,videoCodec:r}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const s=this.initData=V2(e);s.audio&&(n=qE(s.audio,Yn.AUDIO,this.logger)),s.video&&(r=qE(s.video,Yn.VIDEO,this.logger));const i={};s.audio&&s.video?i.audiovideo={container:"video/mp4",codec:n+","+r,supplemental:s.video.supplemental,initSegment:e,id:"main"}:s.audio?i.audio={container:"audio/mp4",codec:n,initSegment:e,id:"audio"}:s.video?i.video={container:"video/mp4",codec:r,supplemental:s.video.supplemental,initSegment:e,id:"main"}:this.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=i}remux(e,n,r,s,i,o){var a,u;let{initPTS:l,lastEndTime:c}=this;const d={audio:void 0,video:void 0,text:s,id3:r,initSegment:void 0};Ut(c)||(c=this.lastEndTime=i||0);const f=n.samples;if(!(f!=null&&f.length))return d;const h={initPTS:void 0,timescale:void 0,trackId:void 0};let p=this.initData;if((a=p)!=null&&a.length||(this.generateInitSegment(f),p=this.initData),!((u=p)!=null&&u.length))return this.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const g=s4(f,p,this.logger),v=p.audio?g[p.audio.id]:null,y=p.video?g[p.video.id]:null,w=Hf(y,1/0),b=Hf(v,1/0),S=Hf(y,0,!0),E=Hf(v,0,!0);let x,k=i,A=0;if(v&&(!y||!l&&b<w||l&&l.trackId===p.audio.id)?(h.trackId=p.audio.id,x=v,A=E-b):y&&(h.trackId=p.video.id,x=y,A=S-w),x){const R=x.timescale;k=x.start/R,h.timescale=R,l||(h.initPTS=x.start-i*R,this.initPTS=l={baseTime:h.initPTS,timescale:R,trackId:h.trackId})}(o||!l)&&(cB(l,k,i,A)||h.timescale!==l.timescale)&&(h.initPTS=k-i,l&&l.timescale===1&&this.logger.warn(`Adjusting initPTS @${i} from ${l.baseTime/l.timescale} to ${h.initPTS}`),this.initPTS=l={baseTime:h.initPTS,timescale:1});const C=e?k-l.baseTime/l.timescale:c;i4(p,f,l.baseTime/l.timescale);const _=C+A;A>0?this.lastEndTime=_:(this.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const O=!!p.audio,P=!!p.video;let U="";O&&(U+="audio"),P&&(U+="video");const j={data1:f,startPTS:C,startDTS:C,endPTS:_,endDTS:_,type:U,hasAudio:O,hasVideo:P,nb:1,dropped:0};d.audio=O&&!P?j:void 0,d.video=P?j:void 0;const N=y==null?void 0:y.sampleCount;if(N){const R=y.keyFrameIndex,V=R!==-1;j.nb=N,j.dropped=R===0||this.isVideoContiguous?0:V?R:N,j.independent=V,j.firstKeyFrame=R,V&&y.keyFrameStart&&(j.firstKeyFramePTS=y.keyFrameStart-l.baseTime/l.timescale),this.isVideoContiguous||(d.independent=V),this.isVideoContiguous||(this.isVideoContiguous=V),j.dropped&&this.logger.warn(`fmp4 does not start with IDR: firstIDR ${R}/${N} dropped: ${j.dropped} pts: ${j.firstKeyFramePTS||"NA"}`)}return d.initSegment=h,d.id3=RA(r,i,l,l),s.samples.length&&(d.text=LA(s,i,l)),d}}function Hf(t,e,n=!1){return(t==null?void 0:t.start)!==void 0?(t.start+(n?t.duration:0))/t.timescale:e}function cB(t,e,n,r){if(t===null)return!0;const s=Math.max(r,1),i=e-t.baseTime/t.timescale;return Math.abs(i-n)>s}function qE(t,e,n){const r=t==null?void 0:t.codec;return r&&r.length>4?r:e===Yn.AUDIO?r==="ec-3"||r==="ac-3"||r==="alac"?r:r==="fLaC"||r==="Opus"?gp(r,!1):(n.warn(`Unhandled audio codec "${r}" in mp4 MAP`),r||"mp4a"):(n.warn(`Unhandled video codec "${r}" in mp4 MAP`),r||"avc1")}let vo;try{vo=self.performance.now.bind(self.performance)}catch{vo=Date.now}const xh=[{demux:Q8,remux:uB},{demux:da,remux:Eh},{demux:G8,remux:Eh},{demux:Y8,remux:Eh}];xh.splice(2,0,{demux:q8,remux:Eh});class YE{constructor(e,n,r,s,i,o){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=n,this.config=r,this.id=i,this.logger=o}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,n,r,s){const i=r.transmuxing;i.executeStart=vo();let o=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:u}=this;s&&(this.currentTransmuxState=s);const{contiguous:l,discontinuity:c,trackSwitch:d,accurateTimeOffset:f,timeOffset:h,initSegmentChange:p}=s||a,{audioCodec:g,videoCodec:v,defaultInitPts:y,duration:w,initSegmentData:b}=u,S=dB(o,n);if(S&&tu(S.method)){const A=this.getDecrypter(),C=pb(S.method);if(A.isSync()){let _=A.softwareDecrypt(o,S.key.buffer,S.iv.buffer,C);if(r.part>-1){const P=A.flush();_=P&&P.buffer}if(!_)return i.executeEnd=vo(),nv(r);o=new Uint8Array(_)}else return this.asyncResult=!0,this.decryptionPromise=A.webCryptoDecrypt(o,S.key.buffer,S.iv.buffer,C).then(_=>{const O=this.push(_,null,r);return this.decryptionPromise=null,O}),this.decryptionPromise}const E=this.needsProbing(c,d);if(E){const A=this.configureTransmuxer(o);if(A)return this.logger.warn(`[transmuxer] ${A.message}`),this.observer.emit(G.ERROR,G.ERROR,{type:nn.MEDIA_ERROR,details:Ge.FRAG_PARSING_ERROR,fatal:!1,error:A,reason:A.message}),i.executeEnd=vo(),nv(r)}(c||d||p||E)&&this.resetInitSegment(b,g,v,w,n),(c||p||E)&&this.resetInitialTimestamp(y),l||this.resetContiguity();const x=this.transmux(o,S,h,f,r);this.asyncResult=pd(x);const k=this.currentTransmuxState;return k.contiguous=!0,k.discontinuity=!1,k.trackSwitch=!1,i.executeEnd=vo(),x}flush(e){const n=e.transmuxing;n.executeStart=vo();const{decrypter:r,currentTransmuxState:s,decryptionPromise:i}=this;if(i)return this.asyncResult=!0,i.then(()=>this.flush(e));const o=[],{timeOffset:a}=s;if(r){const d=r.flush();d&&o.push(this.push(d.buffer,null,e))}const{demuxer:u,remuxer:l}=this;if(!u||!l){n.executeEnd=vo();const d=[nv(e)];return this.asyncResult?Promise.resolve(d):d}const c=u.flush(a);return pd(c)?(this.asyncResult=!0,c.then(d=>(this.flushRemux(o,d,e),o))):(this.flushRemux(o,c,e),this.asyncResult?Promise.resolve(o):o)}flushRemux(e,n,r){const{audioTrack:s,videoTrack:i,id3Track:o,textTrack:a}=n,{accurateTimeOffset:u,timeOffset:l}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${r.sn}${r.part>-1?" part: "+r.part:""} of ${this.id===qt.MAIN?"level":"track"} ${r.level}`);const c=this.remuxer.remux(s,i,o,a,l,u,!0,this.id);e.push({remuxResult:c,chunkMeta:r}),r.transmuxing.executeEnd=vo()}resetInitialTimestamp(e){const{demuxer:n,remuxer:r}=this;!n||!r||(n.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:n}=this;!e||!n||(e.resetContiguity(),n.resetNextTimestamp())}resetInitSegment(e,n,r,s,i){const{demuxer:o,remuxer:a}=this;!o||!a||(o.resetInitSegment(e,n,r,s),a.resetInitSegment(e,n,r,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,n,r,s,i){let o;return n&&n.method==="SAMPLE-AES"?o=this.transmuxSampleAes(e,n,r,s,i):o=this.transmuxUnencrypted(e,r,s,i),o}transmuxUnencrypted(e,n,r,s){const{audioTrack:i,videoTrack:o,id3Track:a,textTrack:u}=this.demuxer.demux(e,n,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,o,a,u,n,r,!1,this.id),chunkMeta:s}}transmuxSampleAes(e,n,r,s,i){return this.demuxer.demuxSampleAes(e,n,r).then(o=>({remuxResult:this.remuxer.remux(o.audioTrack,o.videoTrack,o.id3Track,o.textTrack,r,s,!1,this.id),chunkMeta:i}))}configureTransmuxer(e){const{config:n,observer:r,typeSupported:s}=this;let i;for(let d=0,f=xh.length;d<f;d++){var o;if((o=xh[d].demux)!=null&&o.probe(e,this.logger)){i=xh[d];break}}if(!i)return new Error("Failed to find demuxer by probing fragment data");const a=this.demuxer,u=this.remuxer,l=i.remux,c=i.demux;(!u||!(u instanceof l))&&(this.remuxer=new l(r,n,s,this.logger)),(!a||!(a instanceof c))&&(this.demuxer=new c(r,n,s,this.logger),this.probe=c.probe)}needsProbing(e,n){return!this.demuxer||!this.remuxer||e||n}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new fb(this.config)),e}}function dB(t,e){let n=null;return t.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(n=e),n}const nv=t=>({remuxResult:{},chunkMeta:t});function pd(t){return"then"in t&&t.then instanceof Function}class fB{constructor(e,n,r,s,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=n,this.initSegmentData=r,this.duration=s,this.defaultInitPts=i||null}}class hB{constructor(e,n,r,s,i,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=n,this.accurateTimeOffset=r,this.trackSwitch=s,this.timeOffset=i,this.initSegmentChange=o}}let XE=0;class PA{constructor(e,n,r,s){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=XE++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=u=>{const l=u.data,c=this.hls;if(!(!c||!(l!=null&&l.event)||l.instanceNo!==this.instanceNo))switch(l.event){case"init":{var d;const f=(d=this.workerContext)==null?void 0:d.objectURL;f&&self.URL.revokeObjectURL(f);break}case"transmuxComplete":{this.handleTransmuxComplete(l.data);break}case"flush":{this.onFlush(l.data);break}case"workerLog":{c.logger[l.data.logType]&&c.logger[l.data.logType](l.data.message);break}default:{l.data=l.data||{},l.data.frag=this.frag,l.data.part=this.part,l.data.id=this.id,c.trigger(l.event,l.data);break}}},this.onWorkerError=u=>{if(!this.hls)return;const l=new Error(`${u.message}  (${u.filename}:${u.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(G.ERROR,{type:nn.OTHER_ERROR,details:Ge.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:l})};const i=e.config;this.hls=e,this.id=n,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=r,this.onFlush=s;const o=(u,l)=>{l=l||{},l.frag=this.frag||void 0,u===G.ERROR&&(l=l,l.parent=this.id,l.part=this.part,this.error=l.error),this.hls.trigger(u,l)};this.observer=new vb,this.observer.on(G.FRAG_DECRYPTED,o),this.observer.on(G.ERROR,o);const a=fE(i.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const u=this.hls.logger;if(i.workerPath||b8()){try{i.workerPath?(u.log(`loading Web Worker ${i.workerPath} for "${n}"`),this.workerContext=w8(i.workerPath)):(u.log(`injecting Web Worker for "${n}"`),this.workerContext=S8());const{worker:c}=this.workerContext;c.addEventListener("message",this.onWorkerMessage),c.addEventListener("error",this.onWorkerError),c.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:a,id:n,config:rr(i)})}catch(c){u.warn(`Error setting up "${n}" Web Worker, fallback to inline`,c),this.terminateWorker(),this.error=null,this.transmuxer=new YE(this.observer,a,i,"",n,e.logger)}return}}this.transmuxer=new YE(this.observer,a,i,"",n,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=XE++;const n=this.hls.config,r=fE(n.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:r,id:this.id,config:rr(n)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),E8(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const n=this.transmuxer;n&&(n.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,n,r,s,i,o,a,u,l,c){var d,f;l.transmuxing.start=self.performance.now();const{instanceNo:h,transmuxer:p}=this,g=o?o.start:i.start,v=i.decryptdata,y=this.frag,w=!(y&&i.cc===y.cc),b=!(y&&l.level===y.level),S=y?l.sn-y.sn:-1,E=this.part?l.part-this.part.index:-1,x=S===0&&l.id>1&&l.id===(y==null?void 0:y.stats.chunkCount),k=!b&&(S===1||S===0&&(E===1||x&&E<=0)),A=self.performance.now();(b||S||i.stats.parsing.start===0)&&(i.stats.parsing.start=A),o&&(E||!k)&&(o.stats.parsing.start=A);const C=!(y&&((d=i.initSegment)==null?void 0:d.url)===((f=y.initSegment)==null?void 0:f.url)),_=new hB(w,k,u,b,g,C);if(!k||w||C){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${i.type} sn: ${l.sn}${l.part>-1?" part: "+l.part:""} ${this.id===qt.MAIN?"level":"track"}: ${l.level} id: ${l.id}
        discontinuity: ${w}
        trackSwitch: ${b}
        contiguous: ${k}
        accurateTimeOffset: ${u}
        timeOffset: ${g}
        initSegmentChange: ${C}`);const O=new fB(r,s,n,a,c);this.configureTransmuxer(O)}if(this.frag=i,this.part=o,this.workerContext)this.workerContext.worker.postMessage({instanceNo:h,cmd:"demux",data:e,decryptdata:v,chunkMeta:l,state:_},e instanceof ArrayBuffer?[e]:[]);else if(p){const O=p.push(e,v,l,_);pd(O)?O.then(P=>{this.handleTransmuxComplete(P)}).catch(P=>{this.transmuxerError(P,l,"transmuxer-interface push error")}):this.handleTransmuxComplete(O)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:n,transmuxer:r}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:n,cmd:"flush",chunkMeta:e});else if(r){const s=r.flush(e);pd(s)?s.then(i=>{this.handleFlushResult(i,e)}).catch(i=>{this.transmuxerError(i,e,"transmuxer-interface flush error")}):this.handleFlushResult(s,e)}}transmuxerError(e,n,r){this.hls&&(this.error=e,this.hls.trigger(G.ERROR,{type:nn.MEDIA_ERROR,details:Ge.FRAG_PARSING_ERROR,chunkMeta:n,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,n){e.forEach(r=>{this.handleTransmuxComplete(r)}),this.onFlush(n)}configureTransmuxer(e){const{instanceNo:n,transmuxer:r}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:n,cmd:"configure",config:e}):r&&r.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const QE=100;class pB extends gb{constructor(e,n,r){super(e,n,r,"audio-stream-controller",qt.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(G.LEVEL_LOADED,this.onLevelLoaded,this),e.on(G.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(G.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(G.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(G.BUFFER_RESET,this.onBufferReset,this),e.on(G.BUFFER_CREATED,this.onBufferCreated,this),e.on(G.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(G.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(G.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(G.FRAG_LOADING,this.onFragLoading,this),e.on(G.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(G.LEVEL_LOADED,this.onLevelLoaded,this),e.off(G.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(G.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(G.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(G.BUFFER_RESET,this.onBufferReset,this),e.off(G.BUFFER_CREATED,this.onBufferCreated,this),e.off(G.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(G.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(G.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(G.FRAG_LOADING,this.onFragLoading,this),e.off(G.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:n,id:r,initPTS:s,timescale:i}){if(r===qt.MAIN){const o=n.cc,a=this.fragCurrent;if(this.initPTS[o]={baseTime:s,timescale:i},this.log(`InitPTS for cc: ${o} found from main: ${s}/${i}`),this.mainAnchor=n,this.state===at.WAITING_INIT_PTS){const u=this.waitingData;(!u&&!this.loadingParts||u&&u.frag.cc!==o)&&this.syncWithAnchor(n,u==null?void 0:u.frag)}else!this.hls.hasEnoughToStart&&a&&a.cc!==o?(a.abortRequests(),this.syncWithAnchor(n,a)):this.state===at.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,n){var r;const s=((r=this.mainFragLoading)==null?void 0:r.frag)||null;if(n&&(s==null?void 0:s.cc)===n.cc)return;const i=(s||e).cc,o=this.getLevelDetails(),a=this.getLoadPosition(),u=Z2(o,i,a);u&&(this.log(`Waiting fragment cc (${n==null?void 0:n.cc}) cancelled because video is at cc ${e.cc}`),this.startFragRequested=!1,this.nextLoadPosition=u.start,this.resetLoadingState(),this.state===at.IDLE&&this.doTickIdle())}startLoad(e,n){if(!this.levels){this.startPosition=e,this.state=at.STOPPED;return}const r=this.lastCurrentTime;this.stopLoad(),this.setInterval(QE),r>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r,this.state=at.IDLE):this.state=at.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}doTick(){switch(this.state){case at.IDLE:this.doTickIdle();break;case at.WAITING_TRACK:{const{levels:n,trackId:r}=this,s=n==null?void 0:n[r],i=s==null?void 0:s.details;if(i&&!this.waitForLive(s)){if(this.waitForCdnTuneIn(i))break;this.state=at.WAITING_INIT_PTS}break}case at.FRAG_LOADING_WAITING_RETRY:{var e;const n=performance.now(),r=this.retryDate;if(!r||n>=r||(e=this.media)!=null&&e.seeking){const{levels:s,trackId:i}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((s==null?void 0:s[i])||null),this.state=at.IDLE}break}case at.WAITING_INIT_PTS:{const n=this.waitingData;if(n){const{frag:r,part:s,cache:i,complete:o}=n,a=this.mainAnchor;if(this.initPTS[r.cc]!==void 0){this.waitingData=null,this.state=at.FRAG_LOADING;const u=i.flush().buffer,l={frag:r,part:s,payload:u,networkDetails:null};this._handleFragmentLoadProgress(l),o&&super._handleFragmentLoadComplete(l)}else a&&a.cc!==n.frag.cc&&this.syncWithAnchor(a,n.frag)}else this.state=at.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:n,levels:r,media:s,trackId:i}=this,o=n.config;if(!this.buffering||!s&&!this.primaryPrefetch&&(this.startFragRequested||!o.startFragPrefetch)||!(r!=null&&r[i]))return;const a=r[i],u=a.details;if(!u||this.waitForLive(a)||this.waitForCdnTuneIn(u)){this.state=at.WAITING_TRACK,this.startFragRequested=!1;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,Yn.AUDIO,qt.AUDIO));const c=this.getFwdBufferInfo(l,qt.AUDIO);if(c===null)return;if(!this.switchingTrack&&this._streamEnded(c,u)){n.trigger(G.BUFFER_EOS,{type:"audio"}),this.state=at.ENDED;return}const d=c.len,f=n.maxBufferLength,h=u.fragments,p=h[0].start,g=this.getLoadPosition(),v=this.flushing?g:c.end;if(this.switchingTrack&&s){const b=g;u.PTSKnown&&b<p&&(c.end>p||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=p+.05)}if(d>=f&&!this.switchingTrack&&v<h[h.length-1].start)return;let y=this.getNextFragment(v,u);if(y&&this.isLoopLoading(y,v)&&(y=this.getNextFragmentLoopLoading(y,u,c,qt.MAIN,f)),!y){this.bufferFlushed=!0;return}let w=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&w&&Pr(y)&&!y.endList&&(!u.live||!this.loadingParts&&v<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(w)===xr.OK&&(this.mainFragLoading=w=null),w&&Pr(w))){if(y.start>w.end){const S=this.fragmentTracker.getFragAtPos(v,qt.MAIN);S&&S.end>w.end&&(w=S,this.mainFragLoading={frag:S,targetBufferTime:null})}if(y.start>w.end)return}this.loadFragment(y,a,v)}onMediaDetaching(e,n){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,n)}onAudioTracksUpdated(e,{audioTracks:n}){this.resetTransmuxer(),this.levels=n.map(r=>new ud(r))}onAudioTrackSwitching(e,n){const r=!!n.url;this.trackId=n.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),r?(this.switchingTrack=n,this.flushAudioIfNeeded(n),this.state!==at.STOPPED&&(this.setInterval(QE),this.state=at.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=n,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,n){this.mainDetails=n.details;const r=this.cachedTrackLoadedData;r&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(G.AUDIO_TRACK_LOADED,r))}onAudioTrackLoaded(e,n){var r;const{levels:s}=this,{details:i,id:o,groupId:a,track:u}=n;if(!s){this.warn(`Audio tracks reset while loading track ${o} "${u.name}" of "${a}"`);return}const l=this.mainDetails;if(!l||i.endCC>l.endCC||l.expired){this.cachedTrackLoadedData=n,this.state!==at.STOPPED&&(this.state=at.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${o} "${u.name}" of "${a}" loaded [${i.startSN},${i.endSN}]${i.lastPartSn?`[part-${i.lastPartSn}-${i.lastPartIndex}]`:""},duration:${i.totalduration}`);const c=s[o];let d=0;if(i.live||(r=c.details)!=null&&r.live){if(this.checkLiveUpdate(i),i.deltaUpdateFailed)return;if(c.details){var f;d=this.alignPlaylists(i,c.details,(f=this.levelLastLoaded)==null?void 0:f.details)}i.alignedSliding||(fA(i,l),i.alignedSliding||Ep(i,l),d=i.fragmentStart)}c.details=i,this.levelLastLoaded=c,this.startFragRequested||this.setStartPosition(l,d),this.hls.trigger(G.AUDIO_TRACK_UPDATED,{details:i,id:o,groupId:n.groupId}),this.state===at.WAITING_TRACK&&!this.waitForCdnTuneIn(i)&&(this.state=at.IDLE),this.tick()}_handleFragmentLoadProgress(e){var n;const r=e.frag,{part:s,payload:i}=e,{config:o,trackId:a,levels:u}=this;if(!u){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const l=u[a];if(!l){this.warn("Audio track is undefined on fragment load progress");return}const c=l.details;if(!c){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(r.start);return}const d=o.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let f=this.transmuxer;f||(f=this.transmuxer=new PA(this.hls,qt.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[r.cc],p=(n=r.initSegment)==null?void 0:n.data;if(h!==void 0){const v=s?s.index:-1,y=v!==-1,w=new hb(r.level,r.sn,r.stats.chunkCount,i.byteLength,v,y);f.push(i,p,d,"",r,s,c.totalduration,!1,w,h)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${c.startSN} ,${c.endSN}],track ${a}`);const{cache:g}=this.waitingData=this.waitingData||{frag:r,part:s,cache:new hA,complete:!1};g.push(new Uint8Array(i)),this.state!==at.STOPPED&&(this.state=at.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,n){this.bufferFlushed=this.flushing=!1;const r=n.tracks.audio;r&&(this.mediaBuffer=r.buffer||null)}onFragLoading(e,n){!this.audioOnly&&n.frag.type===qt.MAIN&&Pr(n.frag)&&(this.mainFragLoading=n,this.state===at.IDLE&&this.tick())}onFragBuffered(e,n){const{frag:r,part:s}=n;if(r.type!==qt.AUDIO){!this.audioOnly&&r.type===qt.MAIN&&!r.elementaryStreams.video&&!r.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${s?" p: "+s.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(Pr(r)){this.fragPrevious=r;const i=this.switchingTrack;i&&(this.bufferedTrack=i,this.switchingTrack=null,this.hls.trigger(G.AUDIO_TRACK_SWITCHED,Hn({},i)))}this.fragBufferedComplete(r,s),this.media&&this.tick()}onError(e,n){var r;if(n.fatal){this.state=at.ERROR;return}switch(n.details){case Ge.FRAG_GAP:case Ge.FRAG_PARSING_ERROR:case Ge.FRAG_DECRYPT_ERROR:case Ge.FRAG_LOAD_ERROR:case Ge.FRAG_LOAD_TIMEOUT:case Ge.KEY_LOAD_ERROR:case Ge.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(qt.AUDIO,n);break;case Ge.AUDIO_TRACK_LOAD_ERROR:case Ge.AUDIO_TRACK_LOAD_TIMEOUT:case Ge.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===at.WAITING_TRACK&&((r=n.context)==null?void 0:r.type)===An.AUDIO_TRACK&&(this.state=at.IDLE);break;case Ge.BUFFER_ADD_CODEC_ERROR:case Ge.BUFFER_APPEND_ERROR:if(n.parent!=="audio")return;this.resetLoadingState();break;case Ge.BUFFER_FULL_ERROR:if(n.parent!=="audio")return;this.reduceLengthAndFlushBuffer(n)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Ge.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onBufferFlushing(e,{type:n}){n!==Yn.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:n}){if(n!==Yn.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===at.ENDED&&(this.state=at.IDLE);const r=this.mediaBuffer||this.media;r&&(this.afterBufferFlushed(r,n,qt.AUDIO),this.tick())}}_handleTransmuxComplete(e){var n;const r="audio",{hls:s}=this,{remuxResult:i,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:u,part:l,level:c}=a,{details:d}=c,{audio:f,text:h,id3:p,initSegment:g}=i;if(this.fragContextChanged(u)||!d){this.fragmentTracker.removeFragment(u);return}if(this.state=at.PARSING,this.switchingTrack&&f&&this.completeAudioSwitch(this.switchingTrack),g!=null&&g.tracks){const v=u.initSegment||u;this._bufferInitSegment(c,g.tracks,v,o),s.trigger(G.FRAG_PARSING_INIT_SEGMENT,{frag:v,id:r,tracks:g.tracks})}if(f){const{startPTS:v,endPTS:y,startDTS:w,endDTS:b}=f;l&&(l.elementaryStreams[Yn.AUDIO]={startPTS:v,endPTS:y,startDTS:w,endDTS:b}),u.setElementaryStreamInfo(Yn.AUDIO,v,y,w,b),this.bufferFragmentData(f,u,l,o)}if(p!=null&&(n=p.samples)!=null&&n.length){const v=Kn({id:r,frag:u,details:d},p);s.trigger(G.FRAG_PARSING_METADATA,v)}if(h){const v=Kn({id:r,frag:u,details:d},h);s.trigger(G.FRAG_PARSING_USERDATA,v)}}_bufferInitSegment(e,n,r,s){if(this.state!==at.PARSING||(n.video&&delete n.video,n.audiovideo&&delete n.audiovideo,!n.audio))return;const i=n.audio;i.id=qt.AUDIO;const o=e.audioCodec;this.log(`Init audio buffer, container:${i.container}, codecs[level/parsed]=[${o}/${i.codec}]`),o&&o.split(",").length===1&&(i.levelCodec=o),this.hls.trigger(G.BUFFER_CODECS,n);const a=i.initSegment;if(a!=null&&a.byteLength){const u={type:"audio",frag:r,part:null,chunkMeta:s,parent:r.type,data:a};this.hls.trigger(G.BUFFER_APPENDING,u)}this.tickImmediate()}loadFragment(e,n,r){const s=this.fragmentTracker.getState(e);if(this.switchingTrack||s===xr.NOT_LOADED||s===xr.PARTIAL){var i;if(!Pr(e))this._loadInitSegment(e,n);else if((i=n.details)!=null&&i.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=at.WAITING_INIT_PTS;const o=this.mainDetails;o&&o.fragmentStart!==n.details.fragmentStart&&Ep(n.details,o)}else super.loadFragment(e,n,r)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:n,lang:r,assocLang:s,characteristics:i,audioCodec:o,channels:a}=this.bufferedTrack;rl({name:n,lang:r,assocLang:s,characteristics:i,audioCodec:o,channels:a},e,Ka)||(yp(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:n}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,n.trigger(G.AUDIO_TRACK_SWITCHED,Hn({},e))}}class Tb extends Fo{constructor(e,n){super(n,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,n,r){const s=n==null?void 0:n.renditionReports;if(s){let i=-1;for(let o=0;o<s.length;o++){const a=s[o];let u;try{u=new self.URL(a.URI,n.url).href}catch(l){this.warn(`Could not construct new URL for Rendition Report: ${l}`),u=a.URI||""}if(u===e){i=o;break}else u===e.substring(0,u.length)&&(i=o)}if(i!==-1){const o=s[i],a=parseInt(o["LAST-MSN"])||(n==null?void 0:n.lastPartSn);let u=parseInt(o["LAST-PART"])||(n==null?void 0:n.lastPartIndex);if(this.hls.config.lowLatencyMode){const c=Math.min(n.age-n.partTarget,n.targetduration);u>=0&&c>n.partTarget&&(u+=1)}const l=r&&pE(r);return new mE(a,u>=0?u:void 0,l)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,n){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,n){if(n)try{return n.addDirectives(e)}catch(r){this.warn(`Could not construct new URL with HLS Delivery Directives: ${r}`)}return e}playlistLoaded(e,n,r){const{details:s,stats:i}=n,o=self.performance.now(),a=i.loading.first?Math.max(0,o-i.loading.first):0;s.advancedDateTime=Date.now()-a;const u=this.hls.config.timelineOffset;if(u!==s.appliedTimelineOffset){const c=Math.max(u||0,0);s.appliedTimelineOffset=c,s.fragments.forEach(d=>{d.start=d.playlistOffset+c})}if(s.live||r!=null&&r.live){const c="levelInfo"in n?n.levelInfo:n.track;if(s.reloaded(r),r&&s.fragments.length>0){u8(r,s);const w=s.playlistParsingError;if(w){this.warn(w);const b=this.hls;if(!b.config.ignorePlaylistParsingErrors){var l;const{networkDetails:S}=n;b.trigger(G.ERROR,{type:nn.NETWORK_ERROR,details:Ge.LEVEL_PARSING_ERROR,fatal:!1,url:s.url,error:w,reason:w.message,level:n.level||void 0,parent:(l=s.fragments[0])==null?void 0:l.type,networkDetails:S,stats:i});return}s.playlistParsingError=null}}s.requestScheduled===-1&&(s.requestScheduled=i.loading.start);const d=this.hls.mainForwardBufferInfo,f=d?d.end-d.len:0,h=(s.edge-f)*1e3,p=aA(s,h);if(s.requestScheduled+p<o?s.requestScheduled=o:s.requestScheduled+=p,this.log(`live playlist ${e} ${s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:s.updated?"UPDATED":"MISSED"}`),!this.canLoad||!s.live)return;let g,v,y;if(s.canBlockReload&&s.endSN&&s.advanced){const w=this.hls.config.lowLatencyMode,b=s.lastPartSn,S=s.endSN,E=s.lastPartIndex,x=E!==-1,k=b===S;x?k?(v=S+1,y=w?0:E):(v=b,y=w?E+1:s.maxPartIndex):v=S+1;const A=s.age,C=A+s.ageHeader;let _=Math.min(C-s.partTarget,s.targetduration*1.5);if(_>0){if(C>s.targetduration*3)this.log(`Playlist last advanced ${A.toFixed(2)}s ago. Omitting segment and part directives.`),v=void 0,y=void 0;else if(r!=null&&r.tuneInGoal&&C-s.partTarget>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${_} with playlist age: ${s.age}`),_=0;else{const O=Math.floor(_/s.targetduration);if(v+=O,y!==void 0){const P=Math.round(_%s.targetduration/s.partTarget);y+=P}this.log(`CDN Tune-in age: ${s.ageHeader}s last advanced ${A.toFixed(2)}s goal: ${_} skip sn ${O} to part ${y}`)}s.tuneInGoal=_}if(g=this.getDeliveryDirectives(s,n.deliveryDirectives,v,y),w||!k){s.requestScheduled=o,this.loadingPlaylist(c,g);return}}else(s.canBlockReload||s.canSkipUntil)&&(g=this.getDeliveryDirectives(s,n.deliveryDirectives,v,y));g&&v!==void 0&&s.canBlockReload&&(s.requestScheduled=i.loading.first+Math.max(p-a*2,p/2)),this.scheduleLoading(c,g,s)}else this.clearTimer()}scheduleLoading(e,n,r){const s=r||e.details;if(!s){this.loadingPlaylist(e,n);return}const i=self.performance.now(),o=s.requestScheduled;if(i>=o){this.loadingPlaylist(e,n);return}const a=o-i;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(a)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,n),a)}getDeliveryDirectives(e,n,r,s){let i=pE(e);return n!=null&&n.skip&&e.deltaUpdateFailed&&(r=n.msn,s=n.part,i=Sh.No),new mE(r,s,i)}checkRetry(e){const n=e.details,r=bp(e),s=e.errorAction,{action:i,retryCount:o=0,retryConfig:a}=s||{},u=!!s&&!!a&&(i===Yr.RetryRequest||!s.resolved&&i===Yr.SendAlternateToPenaltyBox);if(u){var l;if(o>=a.maxNumRetry)return!1;if(r&&(l=e.context)!=null&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${n}" without delivery-directives`),this.loadPlaylist();else{const c=db(a,o);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),c),this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${n}" in ${c}ms`)}e.levelRetry=!0,s.resolved=!0}return u}}function DA(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!md(t[n].attrs,e[n].attrs))return!1;return!0}function md(t,e,n){const r=t["STABLE-RENDITION-ID"];return r&&!n?r===e["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(s=>t[s]!==e[s])}function b0(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}class mB extends Tb{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(G.MANIFEST_LOADING,this.onManifestLoading,this),e.on(G.MANIFEST_PARSED,this.onManifestParsed,this),e.on(G.LEVEL_LOADING,this.onLevelLoading,this),e.on(G.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(G.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(G.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(G.MANIFEST_LOADING,this.onManifestLoading,this),e.off(G.MANIFEST_PARSED,this.onManifestParsed,this),e.off(G.LEVEL_LOADING,this.onLevelLoading,this),e.off(G.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(G.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(G.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.audioTracks||[]}onAudioTrackLoaded(e,n){const{id:r,groupId:s,details:i}=n,o=this.tracksInGroup[r];if(!o||o.groupId!==s){this.warn(`Audio track with id:${r} and group:${s} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=n.details,this.log(`Audio track ${r} "${o.name}" lang:${o.lang} group:${s} loaded [${i.startSN}-${i.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,a)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.audioGroups||null,s=this.groupIds;let i=this.currentTrack;if(!r||(s==null?void 0:s.length)!==(r==null?void 0:r.length)||r!=null&&r.some(a=>(s==null?void 0:s.indexOf(a))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(f=>!r||r.indexOf(f.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(f=>f.default)&&(this.selectDefaultTrack=!1),a.forEach((f,h)=>{f.id=h});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const u=this.hls.config.audioPreference;if(!i&&u){const f=zi(u,a,Ka);if(f>-1)i=a[f];else{const h=zi(u,this.tracks);i=this.tracks[h]}}let l=this.findTrackId(i);l===-1&&i&&(l=this.findTrackId(null));const c={audioTracks:a};this.log(`Updating audio tracks, ${a.length} track(s) found in group(s): ${r==null?void 0:r.join(",")}`),this.hls.trigger(G.AUDIO_TRACKS_UPDATED,c);const d=this.trackId;if(l!==-1&&d===-1)this.setAudioTrack(l);else if(a.length&&d===-1){var o;const f=new Error(`No audio track selected for current audio group-ID(s): ${(o=this.groupIds)==null?void 0:o.join(",")} track count: ${a.length}`);this.warn(f.message),this.hls.trigger(G.ERROR,{type:nn.MEDIA_ERROR,details:Ge.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:f})}}}onError(e,n){n.fatal||!n.context||n.context.type===An.AUDIO_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const n=this.hls;if(n.config.audioPreference=e,e){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const s=this.currentTrack;if(s&&rl(e,s,Ka))return s;const i=zi(e,this.tracksInGroup,Ka);if(i>-1){const o=this.tracksInGroup[i];return this.setAudioTrack(i),o}else if(s){let o=n.loadLevel;o===-1&&(o=n.firstAutoLevel);const a=I4(e,n.levels,r,o,Ka);if(a===-1)return null;n.nextLoadLevel=a}if(e.channels||e.audioCodec){const o=zi(e,r);if(o>-1)return r[o]}}}return null}setAudioTrack(e){const n=this.tracksInGroup;if(e<0||e>=n.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,s=n[e],i=s.details&&!s.details.live;if(e===this.trackId&&s===r&&i||(this.log(`Switching to audio-track ${e} "${s.name}" lang:${s.lang} group:${s.groupId} channels:${s.channels}`),this.trackId=e,this.currentTrack=s,this.hls.trigger(G.AUDIO_TRACK_SWITCHING,Hn({},s)),i))return;const o=this.switchParams(s.url,r==null?void 0:r.details,s.details);this.loadPlaylist(o)}findTrackId(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const s=n[r];if(!(this.selectDefaultTrack&&!s.default)&&(!e||rl(e,s,Ka)))return r}if(e){const{name:r,lang:s,assocLang:i,characteristics:o,audioCodec:a,channels:u}=e;for(let l=0;l<n.length;l++){const c=n[l];if(rl({name:r,lang:s,assocLang:i,characteristics:o,audioCodec:a,channels:u},c,Ka))return l}for(let l=0;l<n.length;l++){const c=n[l];if(md(e.attrs,c.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return l}for(let l=0;l<n.length;l++){const c=n[l];if(md(e.attrs,c.attrs,["LANGUAGE"]))return l}}return-1}loadPlaylist(e){super.loadPlaylist();const n=this.currentTrack;this.shouldLoadPlaylist(n)&&yp(n.url,this.hls)&&this.scheduleLoading(n,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const r=e.id,s=e.groupId,i=this.getUrlWithDirectives(e.url,n),o=e.details,a=o==null?void 0:o.age;this.log(`Loading audio-track ${r} "${e.name}" lang:${e.lang} group:${s}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${a&&o.live?" age "+a.toFixed(1)+(o.type&&" "+o.type||""):""} ${i}`),this.hls.trigger(G.AUDIO_TRACK_LOADING,{url:i,id:r,groupId:s,deliveryDirectives:n||null,track:e})}}class gB{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,n,r){if(this.queues===null||this.tracks===null)return;const s=this.queues[n];s.push(e),s.length===1&&!r&&this.executeNext(n)}appendBlocker(e){return new Promise(n=>{const r={label:"async-blocker",execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(r,e)})}prependBlocker(e){return new Promise(n=>{if(this.queues){const r={label:"async-blocker-prepend",execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(r)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var n;const r=(n=e[0])==null?void 0:n.label;(r==="async-blocker"||r==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const n=this.queues[e];if(n.length){const s=n[0];try{s.execute()}catch(i){var r;if(s.onError(i),this.queues===null||this.tracks===null)return;const o=(r=this.tracks[e])==null?void 0:r.buffer;o!=null&&o.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var n;return((n=this.queues)==null?void 0:n[e][0])||null}toString(){const{queues:e,tracks:n}=this;return e===null||n===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var n,r;return(n=this.queues)!=null&&n[e]||(r=this.tracks)!=null&&r[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var n;const r=(n=this.tracks)==null?void 0:n[e],s=r==null?void 0:r.buffer;return s?`SourceBuffer${s.updating?" updating":""}${r.ended?" ended":""}${r.ending?" ending":""}`:"none"}listOps(e){var n;return((n=this.queues)==null?void 0:n[e].map(r=>r.label).join(", "))||""}}const ZE=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,OA="HlsJsTrackRemovedError";class vB extends Error{constructor(e){super(e),this.name=OA}}class yB extends Fo{constructor(e,n){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=r=>{var s;this.hls&&((s=this.mediaSource)==null?void 0:s.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=r=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=r=>{const{media:s,mediaSource:i}=this;r&&this.log("Media source opened"),!(!s||!i)&&(i.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(G.MEDIA_ATTACHED,{media:s,mediaSource:i}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:r,_objectUrl:s}=this;r!==s&&this.error(`Media element src was set while attaching MediaSource (${s} > ${r})`)},this.hls=e,this.fragmentTracker=n,this.appendSource=G3(Sa(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(G.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(G.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(G.MANIFEST_LOADING,this.onManifestLoading,this),e.on(G.MANIFEST_PARSED,this.onManifestParsed,this),e.on(G.BUFFER_RESET,this.onBufferReset,this),e.on(G.BUFFER_APPENDING,this.onBufferAppending,this),e.on(G.BUFFER_CODECS,this.onBufferCodecs,this),e.on(G.BUFFER_EOS,this.onBufferEos,this),e.on(G.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(G.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(G.FRAG_PARSED,this.onFragParsed,this),e.on(G.FRAG_CHANGED,this.onFragChanged,this),e.on(G.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(G.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(G.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(G.MANIFEST_LOADING,this.onManifestLoading,this),e.off(G.MANIFEST_PARSED,this.onManifestParsed,this),e.off(G.BUFFER_RESET,this.onBufferReset,this),e.off(G.BUFFER_APPENDING,this.onBufferAppending,this),e.off(G.BUFFER_CODECS,this.onBufferCodecs,this),e.off(G.BUFFER_EOS,this.onBufferEos,this),e.off(G.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(G.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(G.FRAG_PARSED,this.onFragParsed,this),e.off(G.FRAG_CHANGED,this.onFragChanged,this),e.off(G.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:n}=this;if(!e)return null;const r={};if(this.operationQueue){const i=this.isUpdating();i||this.operationQueue.removeBlockers();const o=this.isQueued();(i||o)&&this.warn(`Transfering MediaSource with${o?" operations in queue":""}${i?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const s=this.transferData;return!this.sourceBufferCount&&s&&s.mediaSource===n?Kn(r,s.tracks):this.sourceBuffers.forEach(i=>{const[o]=i;o&&(r[o]=Kn({},this.tracks[o]),this.removeBuffer(o)),i[0]=i[1]=null}),{media:e,mediaSource:n,tracks:r}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,n){var r;let s=2;(n.audio&&!n.video||!n.altAudio)&&(s=1),this.bufferCodecEventsTotal=s,this.log(`${s} bufferCodec event(s) expected.`),(r=this.transferData)!=null&&r.mediaSource&&this.sourceBufferCount&&s&&this.bufferCreated()}onMediaAttaching(e,n){const r=this.media=n.media,s=Sa(this.appendSource);if(this.transferData=this.overrides=void 0,r&&s){const i=!!n.mediaSource;(i||n.overrides)&&(this.transferData=n,this.overrides=n.overrides);const o=this.mediaSource=n.mediaSource||new s;if(this.assignMediaSource(o),i)this._objectUrl=r.src,this.attachTransferred();else{const a=this._objectUrl=self.URL.createObjectURL(o);if(this.appendSource)try{r.removeAttribute("src");const u=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||u&&o instanceof u,JE(r),bB(r,a),r.load()}catch{r.src=a}else r.src=a}r.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var n,r;this.log(`${((n=this.transferData)==null?void 0:n.mediaSource)===e?"transferred":"created"} media source: ${(r=e.constructor)==null?void 0:r.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,n=this.transferData;if(!n||!e)return;const r=this.tracks,s=n.tracks,i=s?Object.keys(s):null,o=i?i.length:0,a=()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()};if(s&&i&&o){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${rr(r,(u,l)=>u==="initSegment"?void 0:l)};
transfer tracks: ${rr(s,(u,l)=>u==="initSegment"?void 0:l)}}`),!O2(s,r)){n.mediaSource=null,n.tracks=void 0;const u=e.currentTime,l=this.details,c=Math.max(u,(l==null?void 0:l.fragments[0].start)||0);if(c-u>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${u} -> ${c}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(s)}"->"${Object.keys(r)}") start time: ${c} currentTime: ${u}`),this.onMediaDetaching(G.MEDIA_DETACHING,{}),this.onMediaAttaching(G.MEDIA_ATTACHING,n),e.currentTime=c;return}this.transferData=void 0,i.forEach(u=>{const l=u,c=s[l];if(c){const d=c.buffer;if(d){const f=this.fragmentTracker,h=c.id;if(f.hasFragments(h)||f.hasParts(h)){const v=pn.getBuffered(d);f.detectEvictedFragments(l,v,h,null,!0)}const p=rv(l),g=[l,d];this.sourceBuffers[p]=g,d.updating&&this.operationQueue&&this.operationQueue.prependBlocker(l),this.trackSourceBuffer(l,c)}}}),a(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),a()}get mediaSourceOpenOrEnded(){var e;const n=(e=this.mediaSource)==null?void 0:e.readyState;return n==="open"||n==="ended"}onMediaDetaching(e,n){const r=!!n.transferMedia;this.transferData=this.overrides=void 0;const{media:s,mediaSource:i,_objectUrl:o}=this;if(i){if(this.log(`media source ${r?"transferring":"detaching"}`),r)this.sourceBuffers.forEach(([a])=>{a&&this.removeBuffer(a)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const a=i.readyState==="open";try{const u=i.sourceBuffers;for(let l=u.length;l--;)a&&u[l].abort(),i.removeSourceBuffer(u[l]);a&&i.endOfStream()}catch(u){this.warn(`onMediaDetaching: ${u.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}i.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("sourceended",this._onMediaSourceEnded),i.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(i.removeEventListener("startstreaming",this._onStartStreaming),i.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}s&&(s.removeEventListener("emptied",this._onMediaEmptied),r||(o&&self.URL.revokeObjectURL(o),this.mediaSrc===o?(s.removeAttribute("src"),this.appendSource&&JE(s),s.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(G.MEDIA_DETACHED,n)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var n;const r=(n=this.tracks[e])==null?void 0:n.buffer;if(this.removeBuffer(e),r)try{var s;(s=this.mediaSource)!=null&&s.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(r)}catch(i){this.warn(`onBufferReset ${e}`,i)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[rv(e)]=[null,null];const n=this.tracks[e];n&&(n.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new gB(this.tracks)}onBufferCodecs(e,n){const r=this.tracks,s=Object.keys(n);this.log(`BUFFER_CODECS: "${s}" (current SB count ${this.sourceBufferCount})`);const i="audiovideo"in n&&(r.audio||r.video)||r.audiovideo&&("audio"in n||"video"in n),o=!i&&this.sourceBufferCount&&this.media&&s.some(a=>!r[a]);if(i||o){this.warn(`Unsupported transition between "${Object.keys(r)}" and "${s}" SourceBuffers`);return}s.forEach(a=>{var u,l,c;const d=n[a],{id:f,codec:h,levelCodec:p,container:g,metadata:v,supplemental:y}=d;let w=r[a];const b=(u=this.transferData)==null||(l=u.tracks)==null?void 0:l[a],S=b!=null&&b.buffer?b:w,E=(S==null?void 0:S.pendingCodec)||(S==null?void 0:S.codec),x=S==null?void 0:S.levelCodec;w||(w=r[a]={buffer:void 0,listeners:[],codec:h,supplemental:y,container:g,levelCodec:p,metadata:v,id:f});const k=bh(E,x),A=k==null?void 0:k.replace(ZE,"$1");let C=bh(h,p);const _=(c=C)==null?void 0:c.replace(ZE,"$1");C&&k&&A!==_&&(a.slice(0,5)==="audio"&&(C=gp(C,this.appendSource)),this.log(`switching codec ${E} to ${C}`),C!==(w.pendingCodec||w.codec)&&(w.pendingCodec=C),w.container=g,this.appendChangeType(a,g,C))}),(this.tracksReady||this.sourceBufferCount)&&(n.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&this.mediaSourceOpenOrEnded&&this.checkPendingTracks()}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,n)=>{const r=this.tracks[n];return e[n]={id:r.id,container:r.container,codec:r.codec,levelCodec:r.levelCodec},e},{})}appendChangeType(e,n,r){const s=`${n};codecs=${r}`,i={label:`change-type=${s}`,execute:()=>{const o=this.tracks[e];if(o){const a=o.buffer;a!=null&&a.changeType&&(this.log(`changing ${e} sourceBuffer type to ${s}`),a.changeType(s),o.codec=r,o.container=n)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn(`Failed to change ${e} SourceBuffer type`,o)}};this.append(i,e,this.isPending(this.tracks[e]))}blockAudio(e){var n;const r=e.start,s=r+e.duration*.05;if(((n=this.fragmentTracker.getAppendedFrag(r,qt.MAIN))==null?void 0:n.gap)===!0)return;const o={label:"block-audio",execute:()=>{var a;const u=this.tracks.video;(this.lastVideoAppendEnd>s||u!=null&&u.buffer&&pn.isBuffered(u.buffer,s)||((a=this.fragmentTracker.getAppendedFrag(s,qt.MAIN))==null?void 0:a.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:a=>{this.warn("Error executing block-audio operation",a)}};this.blockedAudioAppend={op:o,frag:e},this.append(o,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:n}=this;e&&n&&(this.blockedAudioAppend=null,n.unblockAudio(e.op))}onBufferAppending(e,n){const{tracks:r}=this,{data:s,type:i,parent:o,frag:a,part:u,chunkMeta:l}=n,c=l.buffering[i],d=a.sn,f=self.performance.now();c.start=f;const h=a.stats.buffering,p=u?u.stats.buffering:null;h.start===0&&(h.start=f),p&&p.start===0&&(p.start=f);const g=r.audio;let v=!1;i==="audio"&&(g==null?void 0:g.container)==="audio/mpeg"&&(v=!this.lastMpegAudioChunk||l.id===1||this.lastMpegAudioChunk.sn!==l.sn,this.lastMpegAudioChunk=l);const y=this.tracks.video,w=y==null?void 0:y.buffer;if(w&&d!=="initSegment"){const E=u||a,x=this.blockedAudioAppend;if(i==="audio"&&o!=="main"&&!this.blockedAudioAppend){const A=E.start+E.duration*.05,C=w.buffered,_=this.currentOp("video");!C.length&&!_?this.blockAudio(E):!_&&!pn.isBuffered(w,A)&&this.lastVideoAppendEnd<A&&this.blockAudio(E)}else if(i==="video"){const k=E.end;if(x){const A=x.frag.start;(k>A||k<this.lastVideoAppendEnd||pn.isBuffered(w,A))&&this.unblockAudio()}this.lastVideoAppendEnd=k}}const b=(u||a).start,S={label:`append-${i}`,execute:()=>{if(c.executeStart=self.performance.now(),v){const E=this.tracks[i];if(E){const x=E.buffer;if(x){const k=b-x.timestampOffset;Math.abs(k)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${b} (delta: ${k}) sn: ${d})`),x.timestampOffset=b)}}}this.appendExecutor(s,i)},onStart:()=>{},onComplete:()=>{const E=self.performance.now();c.executeEnd=c.end=E,h.first===0&&(h.first=E),p&&p.first===0&&(p.first=E);const x={};this.sourceBuffers.forEach(([k,A])=>{k&&(x[k]=pn.getBuffered(A))}),this.appendErrors[i]=0,i==="audio"||i==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(G.BUFFER_APPENDED,{type:i,frag:a,part:u,chunkMeta:l,parent:a.type,timeRanges:x})},onError:E=>{var x;const k={type:nn.MEDIA_ERROR,parent:a.type,details:Ge.BUFFER_APPEND_ERROR,sourceBufferName:i,frag:a,part:u,chunkMeta:l,error:E,err:E,fatal:!1},A=(x=this.media)==null?void 0:x.error;if(E.code===DOMException.QUOTA_EXCEEDED_ERR)k.details=Ge.BUFFER_FULL_ERROR;else if(E.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!A)k.errorAction=cd(!0);else if(E.name===OA&&this.sourceBufferCount===0)k.errorAction=cd(!0);else{const C=++this.appendErrors[i];this.warn(`Failed ${C}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${i}" sourceBuffer (${A||"no media error"})`),(C>=this.hls.config.appendErrorMaxRetry||A)&&(k.fatal=!0)}this.hls.trigger(G.ERROR,k)}};this.append(S,i,this.isPending(this.tracks[i]))}getFlushOp(e,n,r){return this.log(`queuing "${e}" remove ${n}-${r}`),{label:"remove",execute:()=>{this.removeExecutor(e,n,r)},onStart:()=>{},onComplete:()=>{this.hls.trigger(G.BUFFER_FLUSHED,{type:e})},onError:s=>{this.warn(`Failed to remove ${n}-${r} from "${e}" SourceBuffer`,s)}}}onBufferFlushing(e,n){const{type:r,startOffset:s,endOffset:i}=n;r?this.append(this.getFlushOp(r,s,i),r):this.sourceBuffers.forEach(([o])=>{o&&this.append(this.getFlushOp(o,s,i),o)})}onFragParsed(e,n){const{frag:r,part:s}=n,i=[],o=s?s.elementaryStreams:r.elementaryStreams;o[Yn.AUDIOVIDEO]?i.push("audiovideo"):(o[Yn.AUDIO]&&i.push("audio"),o[Yn.VIDEO]&&i.push("video"));const a=()=>{const u=self.performance.now();r.stats.buffering.end=u,s&&(s.stats.buffering.end=u);const l=s?s.stats:r.stats;this.hls.trigger(G.FRAG_BUFFERED,{frag:r,part:s,stats:l,id:r.type})};i.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(a,i).catch(u=>{this.warn(`Fragment buffered callback ${u}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,n){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var n,r;return e&&(!((n=this.tracks[e])!=null&&n.ended)||((r=this.tracks[e])==null?void 0:r.ending))})}onBufferEos(e,n){var r;this.sourceBuffers.forEach(([o])=>{if(o){const a=this.tracks[o];(!n.type||n.type===o)&&(a.ending=!0,a.ended||(a.ended=!0,this.log(`${o} buffer reached EOS`)))}});const s=((r=this.overrides)==null?void 0:r.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([o])=>{var a;return o&&!((a=this.tracks[o])!=null&&a.ended)})&&(s?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:o}=this;if(!o||o.readyState!=="open"){o&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${o.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),o.endOfStream(),this.hls.trigger(G.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(G.BUFFERED_TO_END,void 0)))}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const n=this.tracks[e];n&&(n.ending=!1)}})}onLevelUpdated(e,{details:n}){n.fragments.length&&(this.details=n,this.updateDuration())}updateDuration(){const e=this.getDurationAndRange();e&&this.blockUntilOpen(()=>this.updateMediaSource(e))}onError(e,n){if(n.details===Ge.BUFFER_APPEND_ERROR&&n.frag){var r;const s=(r=n.errorAction)==null?void 0:r.nextAutoLevel;Ut(s)&&s!==n.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:n,media:r}=this;if(!r||n===null||!this.sourceBufferCount)return;const s=e.config,i=r.currentTime,o=n.levelTargetDuration,a=n.live&&s.liveBackBufferLength!==null?s.liveBackBufferLength:s.backBufferLength;if(Ut(a)&&a>=0){const u=Math.max(a,o),l=Math.floor(i/o)*o-u;this.flushBackBuffer(i,o,l)}if(Ut(s.frontBufferFlushThreshold)&&s.frontBufferFlushThreshold>0){const u=Math.max(s.maxBufferLength,s.frontBufferFlushThreshold),l=Math.max(u,o),c=Math.floor(i/o)*o+l;this.flushFrontBuffer(i,o,c)}}flushBackBuffer(e,n,r){this.sourceBuffers.forEach(([s,i])=>{if(i){const a=pn.getBuffered(i);if(a.length>0&&r>a.start(0)){var o;this.hls.trigger(G.BACK_BUFFER_REACHED,{bufferEnd:r});const u=this.tracks[s];if((o=this.details)!=null&&o.live)this.hls.trigger(G.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(u!=null&&u.ended){this.log(`Cannot flush ${s} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(G.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:s})}}})}flushFrontBuffer(e,n,r){this.sourceBuffers.forEach(([s,i])=>{if(i){const o=pn.getBuffered(i),a=o.length;if(a<2)return;const u=o.start(a-1),l=o.end(a-1);if(r>u||e>=u&&e<=l)return;this.hls.trigger(G.BUFFER_FLUSHING,{startOffset:u,endOffset:1/0,type:s})}})}getDurationAndRange(){var e;const{details:n,mediaSource:r}=this;if(!n||!this.media||(r==null?void 0:r.readyState)!=="open")return null;const s=n.edge;if(n.live&&this.hls.config.liveDurationInfinity){if(n.fragments.length&&n.live&&r.setLiveSeekableRange){const l=Math.max(0,n.fragmentStart),c=Math.max(l,s);return{duration:1/0,start:l,end:c}}return{duration:1/0}}const i=(e=this.overrides)==null?void 0:e.duration;if(i)return Ut(i)?{duration:i}:null;const o=this.media.duration,a=Ut(r.duration)?r.duration:0;return s>a&&s>o||!Ut(o)?{duration:s}:null}updateMediaSource({duration:e,start:n,end:r}){const s=this.mediaSource;!this.media||!s||s.readyState!=="open"||(s.duration!==e&&(Ut(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),s.duration=e),n!==void 0&&r!==void 0&&(this.log(`MediaSource duration is set to ${s.duration}. Setting seekable range to ${n}-${r}.`),s.setLiveSeekableRange(n,r)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:n,tracks:r}=this;if(this.log(`checkPendingTracks (pending: ${n} codec events expected: ${e}) ${rr(r)}`),this.tracksReady){var s;const i=(s=this.transferData)==null?void 0:s.tracks;i&&Object.keys(i).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([n,r])=>{if(n){const s=this.tracks[n];e[n]={buffer:r,container:s.container,codec:s.codec,supplemental:s.supplemental,levelCodec:s.levelCodec,id:s.id,metadata:s.metadata}}}),this.hls.trigger(G.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([n])=>{this.executeNext(n)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(G.ERROR,{type:nn.MEDIA_ERROR,details:Ge.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:n,mediaSource:r}=this;if(!r)throw new Error("createSourceBuffers called when mediaSource was null");for(const i in e){const o=i,a=e[o];if(this.isPending(a)){const u=this.getTrackCodec(a,o),l=`${a.container};codecs=${u}`;a.codec=u,this.log(`creating sourceBuffer(${l})${this.currentOp(o)?" Queued":""} ${rr(a)}`);try{const c=r.addSourceBuffer(l),d=rv(o),f=[o,c];n[d]=f,a.buffer=c}catch(c){var s;this.error(`error while trying to add sourceBuffer: ${c.message}`),this.shiftAndExecuteNext(o),(s=this.operationQueue)==null||s.removeBlockers(),delete this.tracks[o],this.hls.trigger(G.ERROR,{type:nn.MEDIA_ERROR,details:Ge.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:c,sourceBufferName:o,mimeType:l,parent:a.id});return}this.trackSourceBuffer(o,a)}}this.bufferCreated()}getTrackCodec(e,n){const r=e.supplemental;let s=e.codec;r&&(n==="video"||n==="audiovideo")&&d0(r,"video")&&(s=m4(s,r));const i=bh(s,e.levelCodec);return i?n.slice(0,5)==="audio"?gp(i,this.appendSource):i:""}trackSourceBuffer(e,n){const r=n.buffer;if(!r)return;const s=this.getTrackCodec(n,e);this.tracks[e]={buffer:r,codec:s,container:n.container,levelCodec:n.levelCodec,supplemental:n.supplemental,metadata:n.metadata,id:n.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(i,o)=>{const a=o.removedRanges;a!=null&&a.length&&this.hls.trigger(G.BUFFER_FLUSHED,{type:i})})}get mediaSrc(){var e,n;const r=((e=this.media)==null||(n=e.querySelector)==null?void 0:n.call(e,"source"))||this.media;return r==null?void 0:r.src}onSBUpdateStart(e){const n=this.currentOp(e);n&&n.onStart()}onSBUpdateEnd(e){var n;if(((n=this.mediaSource)==null?void 0:n.readyState)==="closed"){this.resetBuffer(e);return}const r=this.currentOp(e);r&&(r.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,n){var r;const s=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(r=this.mediaSource)==null?void 0:r.readyState}`);this.error(`${s}`,n),this.hls.trigger(G.ERROR,{type:nn.MEDIA_ERROR,details:Ge.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:s,fatal:!1});const i=this.currentOp(e);i&&i.onError(s)}removeExecutor(e,n,r){const{media:s,mediaSource:i}=this,o=this.tracks[e],a=o==null?void 0:o.buffer;if(!s||!i||!a){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const u=Ut(s.duration)?s.duration:1/0,l=Ut(i.duration)?i.duration:1/0,c=Math.max(0,n),d=Math.min(r,u,l);d>c&&(!o.ending||o.ended)?(o.ended=!1,this.log(`Removing [${c},${d}] from the ${e} SourceBuffer`),a.remove(c,d)):this.shiftAndExecuteNext(e)}appendExecutor(e,n){const r=this.tracks[n],s=r==null?void 0:r.buffer;if(!s)throw new vB(`Attempting to append to the ${n} SourceBuffer, but it does not exist`);r.ending=!1,r.ended=!1,s.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(n=>{this.warn(`SourceBuffer blocked callback ${n}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(n){this.warn(`Callback run without blocking ${this.operationQueue} ${n}`)}}isUpdating(){return this.sourceBuffers.some(([e,n])=>e&&n.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,n=this.sourceBufferTypes){if(!n.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:r}=this,s=n.map(o=>this.appendBlocker(o));return n.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(s).then(o=>{r===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(n=>{var r;const s=(r=this.tracks[n])==null?void 0:r.buffer;!s||s.updating||this.shiftAndExecuteNext(n)})}append(e,n,r){this.operationQueue&&this.operationQueue.append(e,n,r)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,n)=>e+(this.isPending(this.tracks[n])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[n])=>e+(n?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,n,r){const s=this.tracks[e];if(!s)return;const i=s.buffer;if(!i)return;const o=r.bind(this,e);s.listeners.push({event:n,listener:o}),i.addEventListener(n,o)}removeBufferListeners(e){const n=this.tracks[e];if(!n)return;const r=n.buffer;r&&(n.listeners.forEach(s=>{r.removeEventListener(s.event,s.listener)}),n.listeners.length=0)}}function JE(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(n=>{t.removeChild(n)})}function bB(t,e){const n=self.document.createElement("source");n.type="video/mp4",n.src=e,t.appendChild(n)}function rv(t){return t==="audio"?1:0}class Cb{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(G.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(G.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(G.MANIFEST_PARSED,this.onManifestParsed,this),e.on(G.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(G.BUFFER_CODECS,this.onBufferCodecs,this),e.on(G.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(G.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(G.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(G.MANIFEST_PARSED,this.onManifestParsed,this),e.off(G.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(G.BUFFER_CODECS,this.onBufferCodecs,this),e.off(G.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,n){const r=this.hls.levels[n.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,n){this.media=n.media instanceof HTMLVideoElement?n.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,n){const r=this.hls;this.restrictedLevels=[],this.firstLevel=n.firstLevel,r.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onLevelsUpdated(e,n){this.timer&&Ut(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,n){this.hls.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const n=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&n.logger.log(`Setting autoLevelCapping to ${r}: ${e[r].height}p@${e[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),n.autoLevelCapping=r,n.autoLevelEnabled&&n.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=n.autoLevelCapping}}}getMaxLevel(e){const n=this.hls.levels;if(!n.length)return-1;const r=n.filter((s,i)=>this.isLevelAllowed(s)&&i<=e);return this.clientRect=null,Cb.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,n={width:0,height:0};if(e){const r=e.getBoundingClientRect();n.width=r.width,n.height=r.height,!n.width&&!n.height&&(n.width=r.right-r.left||e.width||0,n.height=r.bottom-r.top||e.height||0)}return this.clientRect=n,n}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(r=>e.bitrate===r.bitrate&&e.width===r.width&&e.height===r.height)}static getMaxLevelByMediaSize(e,n,r){if(!(e!=null&&e.length))return-1;const s=(a,u)=>u?a.width!==u.width||a.height!==u.height:!0;let i=e.length-1;const o=Math.max(n,r);for(let a=0;a<e.length;a+=1){const u=e[a];if((u.width>=o||u.height>=o)&&s(u,e[a+1])){i=a;break}}return i}}const SB={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},gs=SB,wB={HLS:"h"},EB=wB,xB="CMCD-Object",TB="CMCD-Request",CB="CMCD-Session",kB="CMCD-Status",Cc={OBJECT:xB,REQUEST:TB,SESSION:CB,STATUS:kB},_B={[Cc.OBJECT]:["br","d","ot","tb"],[Cc.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[Cc.SESSION]:["cid","pr","sf","sid","st","v"],[Cc.STATUS]:["bs","rtp"]};class Su{constructor(e,n){Array.isArray(e)&&(e=e.map(r=>r instanceof Su?r:new Su(r))),this.value=e,this.params=n}}const AB="Dict";function IB(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function RB(t,e,n,r){return new Error(`failed to ${t} "${IB(e)}" as ${n}`,{cause:r})}function Zi(t,e,n){return RB("serialize",t,e,n)}class $A{constructor(e){this.description=e}}const ex="Bare Item",LB="Boolean";function PB(t){if(typeof t!="boolean")throw Zi(t,LB);return t?"?1":"?0"}function DB(t){return btoa(String.fromCharCode(...t))}const OB="Byte Sequence";function $B(t){if(ArrayBuffer.isView(t)===!1)throw Zi(t,OB);return`:${DB(t)}:`}const MB="Integer";function NB(t){return t<-999999999999999||999999999999999<t}function MA(t){if(NB(t))throw Zi(t,MB);return t.toString()}function FB(t){return`@${MA(t.getTime()/1e3)}`}function NA(t,e){if(t<0)return-NA(-t,e);const n=Math.pow(10,e);if(Math.abs(t*n%1-.5)<Number.EPSILON){const s=Math.floor(t*n);return(s%2===0?s:s+1)/n}else return Math.round(t*n)/n}const BB="Decimal";function VB(t){const e=NA(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Zi(t,BB);const n=e.toString();return n.includes(".")?n:`${n}.0`}const UB="String",HB=/[\x00-\x1f\x7f]+/;function jB(t){if(HB.test(t))throw Zi(t,UB);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function KB(t){return t.description||t.toString().slice(7,-1)}const zB="Token";function tx(t){const e=KB(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Zi(e,zB);return e}function S0(t){switch(typeof t){case"number":if(!Ut(t))throw Zi(t,ex);return Number.isInteger(t)?MA(t):VB(t);case"string":return jB(t);case"symbol":return tx(t);case"boolean":return PB(t);case"object":if(t instanceof Date)return FB(t);if(t instanceof Uint8Array)return $B(t);if(t instanceof $A)return tx(t);default:throw Zi(t,ex)}}const WB="Key";function w0(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw Zi(t,WB);return t}function kb(t){return t==null?"":Object.entries(t).map(([e,n])=>n===!0?`;${w0(e)}`:`;${w0(e)}=${S0(n)}`).join("")}function FA(t){return t instanceof Su?`${S0(t.value)}${kb(t.params)}`:S0(t)}function GB(t){return`(${t.value.map(FA).join(" ")})${kb(t.params)}`}function qB(t,e={whitespace:!0}){if(typeof t!="object")throw Zi(t,AB);const n=t instanceof Map?t.entries():Object.entries(t),r=e!=null&&e.whitespace?" ":"";return Array.from(n).map(([s,i])=>{i instanceof Su||(i=new Su(i));let o=w0(s);return i.value===!0?o+=kb(i.params):(o+="=",Array.isArray(i.value)?o+=GB(i):o+=FA(i)),o}).join(`,${r}`)}function YB(t,e){return qB(t,e)}function XB(t){return t==="ot"||t==="sf"||t==="st"}function QB(t){return typeof t=="number"?Ut(t):t!=null&&t!==""&&t!==!1}function ZB(t,e){const n=new URL(t),r=new URL(e);if(n.origin!==r.origin)return t;const s=n.pathname.split("/").slice(1),i=r.pathname.split("/").slice(1,-1);for(;s[0]===i[0];)s.shift(),i.shift();for(;i.length;)i.shift(),s.unshift("..");return s.join("/")}const Th=t=>Math.round(t),JB=(t,e)=>(e!=null&&e.baseUrl&&(t=ZB(t,e.baseUrl)),encodeURIComponent(t)),jf=t=>Th(t/100)*100,e6={br:Th,d:Th,bl:jf,dl:jf,mtp:jf,nor:JB,rtp:jf,tb:Th};function t6(t,e){const n={};if(t==null||typeof t!="object")return n;const r=Object.keys(t).sort(),s=Kn({},e6,e==null?void 0:e.formatters),i=e==null?void 0:e.filter;return r.forEach(o=>{if(i!=null&&i(o))return;let a=t[o];const u=s[o];u&&(a=u(a,e)),!(o==="v"&&a===1)&&(o=="pr"&&a===1||QB(a)&&(XB(o)&&typeof a=="string"&&(a=new $A(a)),n[o]=a))}),n}function BA(t,e={}){return t?YB(t6(t,e),Kn({whitespace:!1},e)):""}function n6(t,e={}){const n={};if(!t)return n;const r=Object.entries(t),s=Object.entries(_B).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),i=r.reduce((o,a)=>{var u,l;const[c,d]=a,f=((u=s.find(h=>h[1].includes(c)))===null||u===void 0?void 0:u[0])||Cc.REQUEST;return(l=o[f])!==null&&l!==void 0||(o[f]={}),o[f][c]=d,o},{});return Object.entries(i).reduce((o,[a,u])=>(o[a]=BA(u,e),o),n)}function r6(t,e,n){return Kn(t,n6(e,n))}const s6="CMCD";function i6(t,e={}){if(!t)return"";const n=BA(t,e);return`${s6}=${encodeURIComponent(n)}`}const nx=/CMCD=[^&#]+/;function o6(t,e,n){const r=i6(e,n);if(!r)return t;if(nx.test(t))return t.replace(nx,r);const s=t.includes("?")?"&":"?";return`${t}${s}${r}`}class a6{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=s=>{try{this.apply(s,{ot:gs.MANIFEST,su:!this.initialized})}catch(i){this.hls.logger.warn("Could not generate manifest CMCD data.",i)}},this.applyFragmentData=s=>{try{const{frag:i,part:o}=s,a=this.hls.levels[i.level],u=this.getObjectType(i),l={d:(o||i).duration*1e3,ot:u};(u===gs.VIDEO||u===gs.AUDIO||u==gs.MUXED)&&(l.br=a.bitrate/1e3,l.tb=this.getTopBandwidth(u)/1e3,l.bl=this.getBufferLength(u));const c=o?this.getNextPart(o):this.getNextFrag(i);c!=null&&c.url&&c.url!==i.url&&(l.nor=c.url),this.apply(s,l)}catch(i){this.hls.logger.warn("Could not generate segment CMCD data.",i)}},this.hls=e;const n=this.config=e.config,{cmcd:r}=n;r!=null&&(n.pLoader=this.createPlaylistLoader(),n.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||e.sessionId,this.cid=r.contentId,this.useHeaders=r.useHeaders===!0,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(G.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(G.MEDIA_DETACHED,this.onMediaDetached,this),e.on(G.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(G.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(G.MEDIA_DETACHED,this.onMediaDetached,this),e.off(G.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,n){var r,s;this.audioBuffer=(r=n.tracks.audio)==null?void 0:r.buffer,this.videoBuffer=(s=n.tracks.video)==null?void 0:s.buffer}createData(){var e;return{v:1,sf:EB.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,n={}){Kn(n,this.createData());const r=n.ot===gs.INIT||n.ot===gs.VIDEO||n.ot===gs.MUXED;this.starved&&r&&(n.bs=!0,n.su=!0,this.starved=!1),n.su==null&&(n.su=this.buffering);const{includeKeys:s}=this;s&&(n=Object.keys(n).reduce((o,a)=>(s.includes(a)&&(o[a]=n[a]),o),{}));const i={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),r6(e.headers,n,i)):e.url=o6(e.url,n,i)}getNextFrag(e){var n;const r=(n=this.hls.levels[e.level])==null?void 0:n.details;if(r){const s=e.sn-r.startSN;return r.fragments[s+1]}}getNextPart(e){var n,r;const{index:s,fragment:i}=e,o=(n=this.hls.levels[i.level])==null||(r=n.details)==null?void 0:r.partList;if(o){const{sn:a}=i;for(let u=o.length-1;u>=0;u--){const l=o[u];if(l.index===s&&l.fragment.sn===a)return o[u+1]}}}getObjectType(e){const{type:n}=e;if(n==="subtitle")return gs.TIMED_TEXT;if(e.sn==="initSegment")return gs.INIT;if(n==="audio")return gs.AUDIO;if(n==="main")return this.hls.audioTracks.length?gs.VIDEO:gs.MUXED}getTopBandwidth(e){let n=0,r;const s=this.hls;if(e===gs.AUDIO)r=s.audioTracks;else{const i=s.maxAutoLevel,o=i>-1?i+1:s.levels.length;r=s.levels.slice(0,o)}return r.forEach(i=>{i.bitrate>n&&(n=i.bitrate)}),n>0?n:NaN}getBufferLength(e){const n=this.media,r=e===gs.AUDIO?this.audioBuffer:this.videoBuffer;return!r||!n?NaN:pn.bufferInfo(r,n.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,n=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(i){this.loader=void 0,this.loader=new r(i)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(i,o,a){n(i),this.loader.load(i,o,a)}}}createFragmentLoader(){const{fLoader:e}=this.config,n=this.applyFragmentData,r=e||this.config.loader;return class{constructor(i){this.loader=void 0,this.loader=new r(i)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(i,o,a){n(i),this.loader.load(i,o,a)}}}}const l6=3e5;class u6 extends Fo{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(G.MANIFEST_LOADING,this.onManifestLoading,this),e.on(G.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(G.MANIFEST_PARSED,this.onManifestParsed,this),e.on(G.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(G.MANIFEST_LOADING,this.onManifestLoading,this),e.off(G.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(G.MANIFEST_PARSED,this.onManifestParsed,this),e.off(G.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,n)=>(e.indexOf(n.pathwayId)===-1&&e.push(n.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const n=this.levels;n&&(this.levels=n.filter(r=>r!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,n){const{contentSteering:r}=n;r!==null&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,n){this.audioTracks=n.audioTracks,this.subtitleTracks=n.subtitleTracks}onError(e,n){const{errorAction:r}=n;if((r==null?void 0:r.action)===Yr.SendAlternateToPenaltyBox&&r.flags===mi.MoveAllAlternatesMatchingHost){const s=this.levels;let i=this._pathwayPriority,o=this.pathwayId;if(n.context){const{groupId:a,pathwayId:u,type:l}=n.context;a&&s?o=this.getPathwayForGroupId(a,l,o):u&&(o=u)}o in this.penalizedPathways||(this.penalizedPathways[o]=performance.now()),!i&&s&&(i=this.pathways()),i&&i.length>1&&(this.updatePathwayPriority(i),r.resolved=this.pathwayId!==o),r.resolved||this.warn(`Could not resolve ${n.details} ("${n.error.message}") with content-steering for Pathway: ${o} levels: ${s&&s.length} priorities: ${rr(i)} penalized: ${rr(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let n=this.getLevelsForPathway(this.pathwayId);if(n.length===0){const r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),n=this.getLevelsForPathway(r),this.pathwayId=r}return n.length!==e.length&&this.log(`Found ${n.length}/${e.length} levels in Pathway "${this.pathwayId}"`),n}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(n=>e===n.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let n;const r=this.penalizedPathways,s=performance.now();Object.keys(r).forEach(i=>{s-r[i]>l6&&delete r[i]});for(let i=0;i<e.length;i++){const o=e[i];if(o in r)continue;if(o===this.pathwayId)return;const a=this.hls.nextLoadLevel,u=this.hls.levels[a];if(n=this.getLevelsForPathway(o),n.length>0){this.log(`Setting Pathway to "${o}"`),this.pathwayId=o,cA(n),this.hls.trigger(G.LEVELS_UPDATED,{levels:n});const l=this.hls.levels[a];u&&l&&this.levels&&(l.attrs["STABLE-VARIANT-ID"]!==u.attrs["STABLE-VARIANT-ID"]&&l.bitrate!==u.bitrate&&this.log(`Unstable Pathways change from bitrate ${u.bitrate} to ${l.bitrate}`),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(e,n,r){const s=this.getLevelsForPathway(r).concat(this.levels||[]);for(let i=0;i<s.length;i++)if(n===An.AUDIO_TRACK&&s[i].hasAudioGroup(e)||n===An.SUBTITLE_TRACK&&s[i].hasSubtitleGroup(e))return s[i].pathwayId;return r}clonePathways(e){const n=this.levels;if(!n)return;const r={},s={};e.forEach(i=>{const{ID:o,"BASE-ID":a,"URI-REPLACEMENT":u}=i;if(n.some(c=>c.pathwayId===o))return;const l=this.getLevelsForPathway(a).map(c=>{const d=new ar(c.attrs);d["PATHWAY-ID"]=o;const f=d.AUDIO&&`${d.AUDIO}_clone_${o}`,h=d.SUBTITLES&&`${d.SUBTITLES}_clone_${o}`;f&&(r[d.AUDIO]=f,d.AUDIO=f),h&&(s[d.SUBTITLES]=h,d.SUBTITLES=h);const p=VA(c.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",u),g=new ud({attrs:d,audioCodec:c.audioCodec,bitrate:c.bitrate,height:c.height,name:c.name,url:p,videoCodec:c.videoCodec,width:c.width});if(c.audioGroups)for(let v=1;v<c.audioGroups.length;v++)g.addGroupId("audio",`${c.audioGroups[v]}_clone_${o}`);if(c.subtitleGroups)for(let v=1;v<c.subtitleGroups.length;v++)g.addGroupId("text",`${c.subtitleGroups[v]}_clone_${o}`);return g});n.push(...l),rx(this.audioTracks,r,u,o),rx(this.subtitleTracks,s,u,o)})}loadSteeringManifest(e){const n=this.hls.config,r=n.loader;this.loader&&this.loader.destroy(),this.loader=new r(n);let s;try{s=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(s.protocol!=="data:"){const c=(this.hls.bandwidthEstimate||n.abrEwmaDefaultEstimate)|0;s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+c)}const i={responseType:"json",url:s.href},o=n.steeringManifestLoadPolicy.default,a=o.errorRetry||o.timeoutRetry||{},u={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(c,d,f,h)=>{this.log(`Loaded steering manifest: "${s}"`);const p=c.data;if((p==null?void 0:p.VERSION)!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;const{"RELOAD-URI":g,"PATHWAY-CLONES":v,"PATHWAY-PRIORITY":y}=p;if(g)try{this.uri=new self.URL(g,s).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${g}`);return}this.scheduleRefresh(this.uri||f.url),v&&this.clonePathways(v);const w={steeringManifest:p,url:s.toString()};this.hls.trigger(G.STEERING_MANIFEST_LOADED,w),y&&this.updatePathwayPriority(y)},onError:(c,d,f,h)=>{if(this.log(`Error loading steering manifest: ${c.code} ${c.text} (${d.url})`),this.stopLoad(),c.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let p=this.timeToLoad*1e3;if(c.code===429){const g=this.loader;if(typeof(g==null?void 0:g.getResponseHeader)=="function"){const v=g.getResponseHeader("Retry-After");v&&(p=parseFloat(v)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,p)},onTimeout:(c,d,f)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${s}`),this.loader.load(i,u,l)}scheduleRefresh(e,n=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var r;const s=(r=this.hls)==null?void 0:r.media;if(s&&!s.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},n)}}function rx(t,e,n,r){t&&Object.keys(e).forEach(s=>{const i=t.filter(o=>o.groupId===s).map(o=>{const a=Kn({},o);return a.details=void 0,a.attrs=new ar(a.attrs),a.url=a.attrs.URI=VA(o.url,o.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),a.groupId=a.attrs["GROUP-ID"]=e[s],a.attrs["PATHWAY-ID"]=r,a});t.push(...i)})}function VA(t,e,n,r){const{HOST:s,PARAMS:i,[n]:o}=r;let a;e&&(a=o==null?void 0:o[e],a&&(t=a));const u=new self.URL(t);return s&&!a&&(u.host=s),i&&Object.keys(i).sort().forEach(l=>{l&&u.searchParams.set(l,i[l])}),u.href}function Fs(t,e,n){Zs(t,e,n),t.addEventListener(e,n)}function Zs(t,e,n){t.removeEventListener(e,n)}class nu extends Fo{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=nu.CDMCleanupPromise?[nu.CDMCleanupPromise]:[],this.onMediaEncrypted=n=>{const{initDataType:r,initData:s}=n,i=`"${n.type}" event: init data type: "${r}"`;if(this.debug(i),s!==null){if(!this.keyFormatPromise){let o=Object.keys(this.keySystemAccessPromises);o.length||(o=Tc(this.config));const a=o.map(Ff).filter(u=>!!u);this.keyFormatPromise=this.getKeyFormatPromise(a)}this.keyFormatPromise.then(o=>{const a=wh(o);let u,l;if(r==="sinf"){if(a!==jn.FAIRPLAY){this.warn(`Ignoring unexpected "${n.type}" event with init data type: "${r}" for selected key-system ${a}`);return}const p=Er(new Uint8Array(s));try{const g=mb(JSON.parse(p).sinf),v=U2(g);if(!v)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");u=new Uint8Array(v.subarray(8,24)),l=jn.FAIRPLAY}catch(g){this.warn(`${i} Failed to parse sinf: ${g}`);return}}else{if(a!==jn.WIDEVINE&&a!==jn.PLAYREADY){this.warn(`Ignoring unexpected "${n.type}" event with init data type: "${r}" for selected key-system ${a}`);return}const p=d4(s),g=p.filter(y=>!!y.systemId&&Yg(y.systemId)===a);g.length>1&&this.warn(`${i} Using first of ${g.length} pssh found for selected key-system ${a}`);const v=g[0];if(!v){p.length===0||p.some(y=>!y.systemId)?this.warn(`${i} contains incomplete or invalid pssh data`):this.log(`ignoring ${i} for ${p.map(y=>Yg(y.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(l=Yg(v.systemId),v.version===0&&v.data)if(l===jn.WIDEVINE){const y=v.data.length-22;u=new Uint8Array(v.data.subarray(y,y+16))}else l===jn.PLAYREADY&&(u=rA(v.data))}if(!l||!u)return;const c=Ui.hexDump(u),{keyIdToKeySessionPromise:d,mediaKeySessions:f}=this;let h=d[c];for(let p=0;p<f.length;p++){const g=f[p],v=g.decryptdata;if(!v.keyId)continue;const y=Ui.hexDump(v.keyId);if(c===y||v.uri.replace(/-/g,"").indexOf(c)!==-1){if(h=d[y],v.pssh)break;delete d[y],v.pssh=new Uint8Array(s),v.keyId=u,h=d[c]=h.then(()=>this.generateRequestWithPreferredKeySession(g,r,s,"encrypted-event-key-match")),h.catch(w=>this.handleError(w));break}}if(!h){if(l!==a){this.log(`Ignoring "${n.type}" event with ${l} init data for selected key-system ${a}`);return}h=d[c]=this.getKeySystemSelectionPromise([l]).then(({keySystem:p,mediaKeys:g})=>{var v;this.throwIfDestroyed();const y=new dd("ISO-23001-7",c,(v=Ff(p))!=null?v:"");return y.pssh=new Uint8Array(s),y.keyId=u,this.attemptSetMediaKeys(p,g).then(()=>{this.throwIfDestroyed();const w=this.createMediaKeySessionContext({decryptdata:y,keySystem:p,mediaKeys:g});return this.generateRequestWithPreferredKeySession(w,r,s,"encrypted-event-no-match")})}),h.catch(p=>this.handleError(p))}})}},this.onWaitingForKey=n=>{this.log(`"${n.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(G.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(G.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(G.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(G.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(G.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(G.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(G.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(G.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(G.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(G.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:n,widevineLicenseUrl:r}=this.config,s=n[e];if(s)return s.licenseUrl;if(e===jn.WIDEVINE&&r)return r}getLicenseServerUrlOrThrow(e){const n=this.getLicenseServerUrl(e);if(n===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return n}getServerCertificateUrl(e){const{drmSystems:n}=this.config,r=n[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const n=this.hls.levels,r=(o,a,u)=>!!o&&u.indexOf(o)===a,s=n.map(o=>o.audioCodec).filter(r),i=n.map(o=>o.videoCodec).filter(r);return s.length+i.length===0&&i.push("avc1.42e01e"),new Promise((o,a)=>{const u=l=>{const c=l.shift();this.getMediaKeysPromise(c,s,i).then(d=>o({keySystem:c,mediaKeys:d})).catch(d=>{l.length?u(l):d instanceof qs?a(d):a(new qs({type:nn.KEY_SYSTEM_ERROR,details:Ge.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};u(e)})}requestMediaKeySystemAccess(e,n){const{requestMediaKeySystemAccessFunc:r}=this.config;if(typeof r!="function"){let s=`Configured requestMediaKeySystemAccess is not a function ${r}`;return nA===null&&self.location.protocol==="http:"&&(s=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(s))}return r(e,n)}getMediaKeysPromise(e,n,r){const s=t8(e,n,r,this.config.drmSystemOptions),i=this.keySystemAccessPromises[e];let o=i==null?void 0:i.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${rr(s)}`),o=this.requestMediaKeySystemAccess(e,s);const a=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(u=>{this.log(`Failed to obtain access to key-system "${e}": ${u}`)}),o.then(u=>{this.log(`Access for key-system "${u.keySystem}" obtained`);const l=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),a.mediaKeys=u.createMediaKeys().then(c=>(this.log(`Media-keys created for "${e}"`),a.hasMediaKeys=!0,l.then(d=>d?this.setMediaKeysServerCertificate(c,e,d):c))),a.mediaKeys.catch(c=>{this.error(`Failed to create media-keys for "${e}"}: ${c}`)}),a.mediaKeys})}return o.then(()=>i.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:n,mediaKeys:r}){this.log(`Creating key-system session "${n}" keyId: ${Ui.hexDump(e.keyId||[])}`);const s=r.createSession(),i={decryptdata:e,keySystem:n,mediaKeys:r,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(i),i}renewKeySession(e){const n=e.decryptdata;if(n.pssh){const r=this.createMediaKeySessionContext(e),s=this.getKeyIdString(n),i="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(r,i,n.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Ui.hexDump(e.keyId)}updateKeySession(e,n){var r;const s=e.mediaKeysSession;return this.log(`Updating key-session "${s.sessionId}" for keyID ${Ui.hexDump(((r=e.decryptdata)==null?void 0:r.keyId)||[])}
      } (data length: ${n&&n.byteLength})`),s.update(n)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>Ff(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:n,mediaKeys:r})=>this.attemptSetMediaKeys(n,r))}selectKeySystem(e){return new Promise((n,r)=>this.getKeySystemSelectionPromise(e).then(({keySystem:s})=>{const i=Ff(s);i?n(i):r(new Error(`Unable to find format for key-system "${s}"`))}).catch(r))}selectKeySystemFormat(e){const n=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)),this.keyFormatPromise}getKeyFormatPromise(e){const n=Tc(this.config),r=e.map(wh).filter(s=>!!s&&n.indexOf(s)!==-1);return this.selectKeySystem(r)}loadKey(e){const n=e.keyInfo.decryptdata,r=this.getKeyIdString(n),s=`(keyId: ${r} format: "${n.keyFormat}" method: ${n.method} uri: ${n.uri})`;this.log(`Starting session for key ${s}`);let i=this.keyIdToKeySessionPromise[r];return i||(i=this.getKeySystemForKeyPromise(n).then(({keySystem:a,mediaKeys:u})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${s}`),this.attemptSetMediaKeys(a,u).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:a,mediaKeys:u,decryptdata:n}))))),(this.keyIdToKeySessionPromise[r]=i.then(a=>{const u="cenc",l=n.pssh?n.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(a,u,l,"playlist-key")})).catch(a=>this.handleError(a))),i}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof qs?this.hls.trigger(G.ERROR,e.data):this.hls.trigger(G.ERROR,{type:nn.KEY_SYSTEM_ERROR,details:Ge.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const n=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[n];if(!r){const s=wh(e.keyFormat),i=s?[s]:Tc(this.config);return this.attemptKeySystemAccess(i)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=Tc(this.config)),e.length===0)throw new qs({type:nn.KEY_SYSTEM_ERROR,details:Ge.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${rr({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,n){if(this.mediaKeys===n)return Promise.resolve();const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const s=Promise.all(r).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(n)});return this.mediaKeys=n,this.setMediaKeysQueue.push(s),s.then(()=>{this.log(`Media-keys set for "${e}"`),r.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(i=>r.indexOf(i)===-1)})}generateRequestWithPreferredKeySession(e,n,r,s){var i,o;const a=(i=this.config.drmSystems)==null||(o=i[e.keySystem])==null?void 0:o.generateRequest;if(a)try{const p=a.call(this.hls,n,r,e);if(!p)throw new Error("Invalid response from configured generateRequest filter");n=p.initDataType,r=p.initData?p.initData:null,e.decryptdata.pssh=r?new Uint8Array(r):null}catch(p){var u;if(this.warn(p.message),(u=this.hls)!=null&&u.config.debug)throw p}if(r===null)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${s}": ${l} (init data type: ${n} length: ${r?r.byteLength:null})`);const c=new vb,d=e._onmessage=p=>{const g=e.mediaKeysSession;if(!g){c.emit("error",new Error("invalid state"));return}const{messageType:v,message:y}=p;this.log(`"${v}" message event for session "${g.sessionId}" message size: ${y.byteLength}`),v==="license-request"||v==="license-renewal"?this.renewLicense(e,y).catch(w=>{c.eventNames().length?c.emit("error",w):this.handleError(w)}):v==="license-release"?e.keySystem===jn.FAIRPLAY&&(this.updateKeySession(e,p0("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${v}"`)},f=e._onkeystatuseschange=p=>{if(!e.mediaKeysSession){c.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const v=e.keyStatus;c.emit("keyStatus",v),v==="expired"&&(this.warn(`${e.keySystem} expired for key ${l}`),this.renewKeySession(e))};Fs(e.mediaKeysSession,"message",d),Fs(e.mediaKeysSession,"keystatuseschange",f);const h=new Promise((p,g)=>{c.on("error",g),c.on("keyStatus",v=>{v.startsWith("usable")?p():v==="output-restricted"?g(new qs({type:nn.KEY_SYSTEM_ERROR,details:Ge.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):v==="internal-error"?g(new qs({type:nn.KEY_SYSTEM_ERROR,details:Ge.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${v}"`)):v==="expired"?g(new Error("key expired while generating request")):this.warn(`unhandled key status change "${v}"`)})});return e.mediaKeysSession.generateRequest(n,r).then(()=>{var p;this.log(`Request generated for key-session "${(p=e.mediaKeysSession)==null?void 0:p.sessionId}" keyId: ${l}`)}).catch(p=>{throw new qs({type:nn.KEY_SYSTEM_ERROR,details:Ge.KEY_SYSTEM_NO_SESSION,error:p,fatal:!1},`Error generating key-session request: ${p}`)}).then(()=>h).catch(p=>{throw c.removeAllListeners(),this.removeSession(e),p}).then(()=>(c.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((n,r)=>{if(typeof r=="string"&&typeof n=="object"){const s=r;r=n,n=s}this.log(`key status change "${n}" for keyStatuses keyId: ${Ui.hexDump("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))} session keyId: ${Ui.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=n})}fetchServerCertificate(e){const n=this.config,r=n.loader,s=new r(n),i=this.getServerCertificateUrl(e);return i?(this.log(`Fetching server certificate for "${e}"`),new Promise((o,a)=>{const u={responseType:"arraybuffer",url:i},l=n.certLoadPolicy.default,c={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,h,p,g)=>{o(f.data)},onError:(f,h,p,g)=>{a(new qs({type:nn.KEY_SYSTEM_ERROR,details:Ge.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:Hn({url:u.url,data:void 0},f)},`"${e}" certificate request failed (${i}). Status: ${f.code} (${f.text})`))},onTimeout:(f,h,p)=>{a(new qs({type:nn.KEY_SYSTEM_ERROR,details:Ge.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:u.url,data:void 0}},`"${e}" certificate request timed out (${i})`))},onAbort:(f,h,p)=>{a(new Error("aborted"))}};s.load(u,c,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,n,r){return new Promise((s,i)=>{e.setServerCertificate(r).then(o=>{this.log(`setServerCertificate ${o?"success":"not supported by CDM"} (${r==null?void 0:r.byteLength}) on "${n}"`),s(e)}).catch(o=>{i(new qs({type:nn.KEY_SYSTEM_ERROR,details:Ge.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:o,fatal:!0},o.message))})})}renewLicense(e,n){return this.requestLicense(e,new Uint8Array(n)).then(r=>this.updateKeySession(e,new Uint8Array(r)).catch(s=>{throw new qs({type:nn.KEY_SYSTEM_ERROR,details:Ge.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:s,fatal:!0},s.message)}))}unpackPlayReadyKeyMessage(e,n){const r=String.fromCharCode.apply(null,new Uint16Array(n.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),n;const s=new DOMParser().parseFromString(r,"application/xml"),i=s.querySelectorAll("HttpHeader");if(i.length>0){let c;for(let d=0,f=i.length;d<f;d++){var o,a;c=i[d];const h=(o=c.querySelector("name"))==null?void 0:o.textContent,p=(a=c.querySelector("value"))==null?void 0:a.textContent;h&&p&&e.setRequestHeader(h,p)}}const u=s.querySelector("Challenge"),l=u==null?void 0:u.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return p0(atob(l))}setupLicenseXHR(e,n,r,s){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,n,r,s)}).catch(o=>{if(!r.decryptdata)throw o;return e.open("POST",n,!0),i.call(this.hls,e,n,r,s)}).then(o=>(e.readyState||e.open("POST",n,!0),{xhr:e,licenseChallenge:o||s})):(e.open("POST",n,!0),Promise.resolve({xhr:e,licenseChallenge:s}))}requestLicense(e,n){const r=this.config.keyLoadPolicy.default;return new Promise((s,i)=>{const o=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${o}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(a.readyState===4)if(a.status===200){this._requestLicenseFailureCount=0;let u=a.response;this.log(`License received ${u instanceof ArrayBuffer?u.byteLength:u}`);const l=this.config.licenseResponseCallback;if(l)try{u=l.call(this.hls,a,o,e)}catch(c){this.error(c)}s(u)}else{const u=r.errorRetry,l=u?u.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||a.status>=400&&a.status<500)i(new qs({type:nn.KEY_SYSTEM_ERROR,details:Ge.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:o,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${o}). Status: ${a.status} (${a.statusText})`));else{const c=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${c} attempts left`),this.requestLicense(e,n).then(s,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,o,e,n).then(({xhr:u,licenseChallenge:l})=>{e.keySystem==jn.PLAYREADY&&(l=this.unpackPlayReadyKeyMessage(u,l)),u.send(l)})})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,n){if(!this.config.emeEnabled)return;const r=n.media;this.media=r,Fs(r,"encrypted",this.onMediaEncrypted),Fs(r,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(Zs(e,"encrypted",this.onMediaEncrypted),Zs(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const n=this.media,r=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,dd.clearKeyUriToKeyIdMap();const s=r.length;nu.CDMCleanupPromise=Promise.all(r.map(i=>this.removeSession(i)).concat(n==null||(e=n.setMediaKeys(null))==null?void 0:e.catch(i=>{var o;this.log(`Could not clear media keys: ${i}`),(o=this.hls)==null||o.trigger(G.ERROR,{type:nn.OTHER_ERROR,details:Ge.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${i}`)})}))).catch(i=>{var o;this.log(`Could not close sessions and clear media keys: ${i}`),(o=this.hls)==null||o.trigger(G.ERROR,{type:nn.OTHER_ERROR,details:Ge.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${i}`)})}).then(()=>{s&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:n}){if(!(!n||!this.config.emeEnabled)&&!this.keyFormatPromise){const r=n.reduce((s,i)=>(s.indexOf(i.keyFormat)===-1&&s.push(i.keyFormat),s),[]);this.log(`Selecting key-system from session-keys ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)}}removeSession(e){const{mediaKeysSession:n,licenseXhr:r}=e;if(n){this.log(`Remove licenses and keys and close session ${n.sessionId}`),e._onmessage&&(n.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(n.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);s>-1&&this.mediaKeySessions.splice(s,1);const{drmSystemOptions:i}=this.config;return(r8(i)?new Promise((a,u)=>{self.setTimeout(()=>u(new Error("MediaKeySession.remove() timeout")),8e3),n.remove().then(a)}):Promise.resolve()).catch(a=>{var u;this.log(`Could not remove session: ${a}`),(u=this.hls)==null||u.trigger(G.ERROR,{type:nn.OTHER_ERROR,details:Ge.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${a}`)})}).then(()=>n.close()).catch(a=>{var u;this.log(`Could not close session: ${a}`),(u=this.hls)==null||u.trigger(G.ERROR,{type:nn.OTHER_ERROR,details:Ge.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${a}`)})})}}}nu.CDMCleanupPromise=void 0;class qs extends Error{constructor(e,n){super(n),this.data=void 0,e.error||(e.error=new Error(n)),this.data=e,e.err=e.error}}class c6{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(G.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(G.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(G.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(G.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,n){const r=this.hls.config;if(r.capLevelOnFPSDrop){const s=n.media instanceof self.HTMLVideoElement?n.media:null;this.media=s,s&&typeof s.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,n,r){const s=performance.now();if(n){if(this.lastTime){const i=s-this.lastTime,o=r-this.lastDroppedFrames,a=n-this.lastDecodedFrames,u=1e3*o/i,l=this.hls;if(l.trigger(G.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:r}),u>0&&o>l.config.fpsDroppedMonitoringThreshold*a){let c=l.currentLevel;l.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(l.autoLevelCapping===-1||l.autoLevelCapping>=c)&&(c=c-1,l.trigger(G.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:l.currentLevel}),l.autoLevelCapping=c,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=r,this.lastDecodedFrames=n}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const n=e.getVideoPlaybackQuality();this.checkFPS(e,n.totalVideoFrames,n.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function UA(t,e){let n;try{n=new Event("addtrack")}catch{n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function HA(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(r){Nn.debug(`[texttrack-utils]: ${r}`);try{const s=new self.TextTrackCue(e.startTime,e.endTime,e.text);s.id=e.id,t.addCue(s)}catch(s){Nn.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${s}`)}}n==="disabled"&&(t.mode=n)}function Wl(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues)for(let r=t.cues.length;r--;)e&&t.cues[r].removeEventListener("enter",e),t.removeCue(t.cues[r]);n==="disabled"&&(t.mode=n)}function E0(t,e,n,r){const s=t.mode;if(s==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const i=f6(t.cues,e,n);for(let o=0;o<i.length;o++)(!r||r(i[o]))&&t.removeCue(i[o])}s==="disabled"&&(t.mode=s)}function d6(t,e){if(e<=t[0].startTime)return 0;const n=t.length-1;if(e>t[n].endTime)return-1;let r=0,s=n,i;for(;r<=s;)if(i=Math.floor((s+r)/2),e<t[i].startTime)s=i-1;else if(e>t[i].startTime&&r<n)r=i+1;else return i;return t[r].startTime-e<e-t[s].startTime?r:s}function f6(t,e,n){const r=[],s=d6(t,e);if(s>-1)for(let i=s,o=t.length;i<o;i++){const a=t[i];if(a.startTime>=e&&a.endTime<=n)r.push(a);else if(a.startTime>n)return r}return r}function Ch(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];(r.kind==="subtitles"||r.kind==="captions")&&r.label&&e.push(t[n])}return e}class h6 extends Tb{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let n=null;const r=Ch(this.media.textTracks);for(let i=0;i<r.length;i++)if(r[i].mode==="hidden")n=r[i];else if(r[i].mode==="showing"){n=r[i];break}const s=this.findTrackForTextTrack(n);this.subtitleTrack!==s&&this.setSubtitleTrack(s)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(G.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(G.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(G.MANIFEST_LOADING,this.onManifestLoading,this),e.on(G.MANIFEST_PARSED,this.onManifestParsed,this),e.on(G.LEVEL_LOADING,this.onLevelLoading,this),e.on(G.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(G.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(G.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(G.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(G.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(G.MANIFEST_LOADING,this.onManifestLoading,this),e.off(G.MANIFEST_PARSED,this.onManifestParsed,this),e.off(G.LEVEL_LOADING,this.onLevelLoading,this),e.off(G.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(G.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(G.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,n){const r=this.media;if(!r)return;const s=!!n.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||r.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,s)return;Ch(r.textTracks).forEach(o=>{Wl(o)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.subtitleTracks}onSubtitleTrackLoaded(e,n){const{id:r,groupId:s,details:i}=n,o=this.tracksInGroup[r];if(!o||o.groupId!==s){this.warn(`Subtitle track with id:${r} and group:${s} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=n.details,this.log(`Subtitle track ${r} "${o.name}" lang:${o.lang} group:${s} loaded [${i.startSN}-${i.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,a)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.subtitleGroups||null,s=this.groupIds;let i=this.currentTrack;if(!r||(s==null?void 0:s.length)!==(r==null?void 0:r.length)||r!=null&&r.some(o=>(s==null?void 0:s.indexOf(o))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(c=>!r||r.indexOf(c.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(c=>c.default)&&(this.selectDefaultTrack=!1),o.forEach((c,d)=>{c.id=d});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const a=this.hls.config.subtitlePreference;if(!i&&a){this.selectDefaultTrack=!1;const c=zi(a,o);if(c>-1)i=o[c];else{const d=zi(a,this.tracks);i=this.tracks[d]}}let u=this.findTrackId(i);u===-1&&i&&(u=this.findTrackId(null));const l={subtitleTracks:o};this.log(`Updating subtitle tracks, ${o.length} track(s) found in "${r==null?void 0:r.join(",")}" group-id`),this.hls.trigger(G.SUBTITLE_TRACKS_UPDATED,l),u!==-1&&this.trackId===-1&&this.setSubtitleTrack(u)}}findTrackId(e){const n=this.tracksInGroup,r=this.selectDefaultTrack;for(let s=0;s<n.length;s++){const i=n[s];if(!(r&&!i.default||!r&&!e)&&(!e||rl(i,e)))return s}if(e){for(let s=0;s<n.length;s++){const i=n[s];if(md(e.attrs,i.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return s}for(let s=0;s<n.length;s++){const i=n[s];if(md(e.attrs,i.attrs,["LANGUAGE"]))return s}}return-1}findTrackForTextTrack(e){if(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const s=n[r];if(b0(s,e))return r}}return-1}onError(e,n){n.fatal||!n.context||n.context.type===An.SUBTITLE_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const n=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&rl(e,r))return r;const s=zi(e,this.tracksInGroup);if(s>-1){const i=this.tracksInGroup[s];return this.setSubtitleTrack(s),i}else{if(r)return null;{const i=zi(e,n);if(i>-1)return n[i]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const r=e.id,s=e.groupId,i=this.getUrlWithDirectives(e.url,n),o=e.details,a=o==null?void 0:o.age;this.log(`Loading subtitle ${r} "${e.name}" lang:${e.lang} group:${s}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${a&&o.live?" age "+a.toFixed(1)+(o.type&&" "+o.type||""):""} ${i}`),this.hls.trigger(G.SUBTITLE_TRACK_LOADING,{url:i,id:r,groupId:s,deliveryDirectives:n||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const n=Ch(e.textTracks),r=this.currentTrack;let s;if(r&&(s=n.filter(i=>b0(r,i))[0],s||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(n).forEach(i=>{i.mode!=="disabled"&&i!==s&&(i.mode="disabled")}),s){const i=this.subtitleDisplay?"showing":"hidden";s.mode!==i&&(s.mode=i)}}setSubtitleTrack(e){const n=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=n.length||!Ut(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,s=n[e]||null;if(this.trackId=e,this.currentTrack=s,this.toggleTrackModes(),!s){this.hls.trigger(G.SUBTITLE_TRACK_SWITCH,{id:e});return}const i=!!s.details&&!s.details.live;if(e===this.trackId&&s===r&&i)return;this.log(`Switching to subtitle-track ${e}`+(s?` "${s.name}" lang:${s.lang} group:${s.groupId}`:""));const{id:o,groupId:a="",name:u,type:l,url:c}=s;this.hls.trigger(G.SUBTITLE_TRACK_SWITCH,{id:o,groupId:a,name:u,type:l,url:c});const d=this.switchParams(s.url,r==null?void 0:r.details,s.details);this.loadPlaylist(d)}}function p6(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),n=e.toString();return URL.revokeObjectURL(e),n.slice(n.lastIndexOf("/")+1)}catch{let n=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const i=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(s=="x"?i:i&3|8).toString(16)})}}}function Hc(t){let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return(e>>>0).toString()}const ru=.025;let Tp=function(t){return t[t.Point=0]="Point",t[t.Range=1]="Range",t}({});function m6(t,e,n){return`${t.identifier}-${n+1}-${Hc(e)}`}class g6{constructor(e,n){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=n,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var n;if(e>0&&e>=this.assetList.length)return!0;const r=this.playoutLimit;return e<=0||isNaN(r)?!1:r===0?!0:(((n=this.assetList[e])==null?void 0:n.startOffset)||0)>r}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const n=this.dateRange.tagAnchor;if(n)return sv(e,n)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const n=this.dateRange.startTime,r=sv(n,e);return n-r<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,n=Ut(e)?e:this.duration;return this.cumulativeDuration+n}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const n=this.resumeAnchor;if(n)return sv(e,n)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<ru))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let n;return this._duration!==null?n=this._duration:this.dateRange.duration?n=this.dateRange.duration:n=this.dateRange.plannedDuration||0,!isNaN(e)&&e<n&&(n=e),n}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?Tp.Range:Tp.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return v6(this)}}function sv(t,e){return t-e.start<e.duration/2&&!(Math.abs(t-(e.start+e.duration))<ru)?e.start:e.start+e.duration}function jA(t,e,n){const r=new self.URL(t,n);return r.protocol!=="data:"&&r.searchParams.set("_HLS_primary_id",e),r}function iv(t,e){for(;(n=t.assetList[++e])!=null&&n.error;)var n;return e}function v6(t){return`["${t.identifier}" ${t.cue.pre?"<pre>":t.cue.post?"<post>":""}${t.timelineStart.toFixed(2)}-${t.resumeTime.toFixed(2)}]`}function Ul(t){const e=t.timelineStart,n=t.duration||0;return`["${t.identifier}" ${e.toFixed(2)}-${(e+n).toFixed(2)}]`}class y6{constructor(e,n,r,s){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls.trigger(G.PLAYOUT_LIMIT_REACHED,{})};const i=this.hls=new e(n);this.interstitial=r,this.assetItem=s;let o=s.uri;try{o=jA(o,n.primarySessionId).href}catch{}i.loadSource(o);const a=()=>{this.hasDetails=!0};i.once(G.LEVEL_LOADED,a),i.once(G.AUDIO_TRACK_LOADED,a),i.once(G.SUBTITLE_TRACK_LOADED,a),i.on(G.MEDIA_ATTACHING,(u,{media:l})=>{this.removeMediaListeners(),this.mediaAttached=l,this.interstitial.playoutLimit&&(l.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&i.on(G.BUFFER_APPENDED,()=>{const d=this.bufferedEnd;this.reachedPlayout(d)&&(this._bufferedEosTime=d,i.trigger(G.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){var e;return((e=this.interstitial)==null?void 0:e.appendInPlace)||!1}bufferedInPlaceToEnd(e){var n;if(!this.appendInPlace)return!1;if((n=this.hls)!=null&&n.bufferedToEnd)return!0;if(!e||!this._bufferedEosTime)return!1;const r=this.timelineOffset,s=pn.bufferInfo(e,r,0);return this.getAssetTime(s.end)>=this._bufferedEosTime-.02}reachedPlayout(e){const r=this.interstitial.playoutLimit;return this.startOffset+e>=r}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const n=pn.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(n.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;return e||0}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const n=this.timelineOffset;if(e!==n){const r=e-n;if(Math.abs(r)>1/9e4){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const n=this.timelineOffset,r=this.duration;return Math.min(Math.max(0,e-n),r)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls.destroy(),this.hls=this.interstitial=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){this.hls.attachMedia(e)}detachMedia(){this.removeMediaListeners(),this.mediaAttached=null,this.hls.detachMedia()}resumeBuffering(){this.hls.resumeBuffering()}pauseBuffering(){this.hls.pauseBuffering()}transferMedia(){return this.bufferSnapShot(),this.hls.transferMedia()}resetDetails(){const e=this.hls;if(this.hasDetails){e.stopLoad();const n=r=>delete r.details;e.levels.forEach(n),e.allAudioTracks.forEach(n),e.allSubtitleTracks.forEach(n),this.hasDetails=!1}}on(e,n,r){this.hls.on(e,n)}once(e,n,r){this.hls.once(e,n)}off(e,n,r){this.hls.off(e,n)}toString(){var e;return`HlsAssetPlayer: ${Ul(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const sx=.033;class b6 extends Fo{constructor(e,n){super("interstitials-sched",n),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,n){return this.events?this.events.reduce((r,s)=>e<=s.startOffset&&n>s.startOffset?(delete s.error,r+1):r,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,n){if(e.event)return this.findEventIndex(e.event.identifier);let r=-1;e.nextEvent?r=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(r=this.findEventIndex(e.previousEvent.identifier)+1);const s=this.items;if(s)for(s[r]||(n===void 0&&(n=e.start),r=this.findItemIndexAtTime(n));r>=0&&(i=s[r])!=null&&i.event;){var i;r--}return r}findItemIndexAtTime(e,n){const r=this.items;if(r)for(let s=0;s<r.length;s++){let i=r[s];if(n&&n!=="primary"&&(i=i[n]),e===i.start||e>i.start&&e<i.end)return s}return-1}findJumpRestrictedIndex(e,n){const r=this.items;if(r)for(let s=e;s<=n&&r[s];s++){const i=r[s].event;if(i!=null&&i.restrictions.jump&&!i.appendInPlace)return s}return-1}findEventIndex(e){const n=this.items;if(n)for(let s=n.length;s--;){var r;if(((r=n[s].event)==null?void 0:r.identifier)===e)return s}return-1}findAssetIndex(e,n){const r=e.assetList,s=r.length;if(s>1)for(let i=0;i<s;i++){const o=r[i];if(!o.error){const a=o.timelineStart;if(n===a||n>a&&n<a+(o.duration||0))return i}}return 0}get assetIdAtEnd(){var e,n;const r=(e=this.items)==null||(n=e[this.length-1])==null?void 0:n.event;if(r){const s=r.assetList,i=s[s.length-1];if(i)return i.identifier}return null}parseInterstitialDateRanges(e,n){const r=e.main.details,{dateRanges:s}=r,i=this.events,o=this.parseDateRanges(s,{url:r.url},n),a=Object.keys(s),u=i?i.filter(l=>!a.includes(l.identifier)):[];o.length&&o.sort((l,c)=>{const d=l.cue.pre,f=l.cue.post,h=c.cue.pre,p=c.cue.post;if(d&&!h)return-1;if(h&&!d||f&&!p)return 1;if(p&&!f)return-1;if(!d&&!h&&!f&&!p){const g=l.startTime,v=c.startTime;if(g!==v)return g-v}return l.dateRange.tagOrder-c.dateRange.tagOrder}),this.events=o,u.forEach(l=>{this.removeEvent(l)}),this.updateSchedule(e,u)}updateSchedule(e,n=[]){const r=this.events||[];if(r.length||n.length||this.length<2){const s=this.items,i=this.parseSchedule(r,e);(n.length||(s==null?void 0:s.length)!==i.length||i.some((a,u)=>Math.abs(a.playout.start-s[u].playout.start)>.005||Math.abs(a.playout.end-s[u].playout.end)>.005))&&(this.items=i,this.onScheduleUpdate(n,s))}}parseDateRanges(e,n,r){const s=[],i=Object.keys(e);for(let o=0;o<i.length;o++){const a=i[o],u=e[a];if(u.isInterstitial){let l=this.eventMap[a];l?l.setDateRange(u):(l=new g6(u,n),this.eventMap[a]=l,r===!1&&(l.appendInPlace=r)),s.push(l)}}return s}parseSchedule(e,n){const r=[],s=n.main.details,i=s.live?1/0:s.edge;let o=0;if(e=e.filter(u=>!u.error&&!(u.cue.once&&u.hasPlayed)),e.length){this.resolveOffsets(e,n);let u=0,l=0;if(e.forEach((c,d)=>{const f=c.cue.pre,h=c.cue.post,p=e[d-1]||null,g=c.appendInPlace,v=h?i:c.startOffset,y=c.duration,w=c.timelineOccupancy===Tp.Range?y:0,b=c.resumptionOffset,S=(p==null?void 0:p.startTime)===v,E=v+c.cumulativeDuration;let x=g?E+y:v+b;if(f||!h&&v<=0){const A=l;l+=w,c.timelineStart=E;const C=o;o+=y,r.push({event:c,start:E,end:x,playout:{start:C,end:o},integrated:{start:A,end:l}})}else if(v<=i){if(!S){const _=v-u;if(_>sx){const O=u,P=l;l+=_;const U=o;o+=_;const j={previousEvent:e[d-1]||null,nextEvent:c,start:O,end:O+_,playout:{start:U,end:o},integrated:{start:P,end:l}};r.push(j)}else _>0&&p&&(p.cumulativeDuration+=_,r[r.length-1].end=v)}h&&(x=E),c.timelineStart=E;const A=l;l+=w;const C=o;o+=y,r.push({event:c,start:E,end:x,playout:{start:C,end:o},integrated:{start:A,end:l}})}else return;const k=c.resumeTime;h||k>i?u=i:u=k}),u<i){var a;const c=u,d=l,f=i-u;l+=f;const h=o;o+=f,r.push({previousEvent:((a=r[r.length-1])==null?void 0:a.event)||null,nextEvent:null,start:u,end:c+f,playout:{start:h,end:o},integrated:{start:d,end:l}})}this.setDurations(i,o,l)}else r.push({previousEvent:null,nextEvent:null,start:0,end:i,playout:{start:0,end:i},integrated:{start:0,end:i}}),this.setDurations(i,i,i);return r}setDurations(e,n,r){this.durations={primary:e,playout:n,integrated:r}}resolveOffsets(e,n){const r=n.main.details,s=r.live?1/0:r.edge;let i=0,o=-1;e.forEach((a,u)=>{const l=a.cue.pre,c=a.cue.post,d=l?0:c?s:a.startTime;this.updateAssetDurations(a),o===d?a.cumulativeDuration=i:(i=0,o=d),!c&&a.snapOptions.in&&(a.resumeAnchor=fl(null,r.fragments,a.startOffset+a.resumptionOffset,0,0)||void 0),a.appendInPlace&&!a.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(a,n)||(a.appendInPlace=!1)),!a.appendInPlace&&u+1<e.length&&e[u+1].startTime-e[u].resumeTime<sx&&(e[u+1].appendInPlace=!1,e[u+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${a}`));const h=Ut(a.resumeOffset)?a.resumeOffset:a.duration;i+=h})}primaryCanResumeInPlaceAt(e,n){const r=e.resumeTime,s=e.startTime+e.resumptionOffset;return Math.abs(r-s)>ru?(this.log(`"${e.identifier}" resumption ${r} not aligned with estimated timeline end ${s}`),!1):n?!Object.keys(n).some(o=>{const a=n[o].details,u=a.edge;if(r>=u)return this.log(`"${e.identifier}" resumption ${r} past ${o} playlist end ${u}`),!1;const l=fl(null,a.fragments,r);if(!l)return this.log(`"${e.identifier}" resumption ${r} does not align with any fragments in ${o} playlist (${a.fragStart}-${a.fragmentEnd})`),!0;const c=o==="audio"?.175:0;return Math.abs(l.start-r)<ru+c||Math.abs(l.end-r)<ru+c?!1:(this.log(`"${e.identifier}" resumption ${r} not aligned with ${o} fragment bounds (${l.start}-${l.end} sn: ${l.sn} cc: ${l.cc})`),!0)}):(this.log(`"${e.identifier}" resumption ${r} can not be aligned with media (none selected)`),!1)}updateAssetDurations(e){if(!e.assetListLoaded)return;const n=e.timelineStart;let r=0,s=!1,i=!1;e.assetList.forEach((o,a)=>{const u=n+r;o.startOffset=r,o.timelineStart=u,s||(s=o.duration===null),i||(i=!!o.error);const l=o.error?0:o.duration||0;r+=l}),s&&!i?e.duration=Math.max(r,e.duration):e.duration=r}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function ta(t){return`[${t.event?'"'+t.event.identifier+'"':"primary"}: ${t.start.toFixed(2)}-${t.end.toFixed(2)}]`}class S6{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,n){const r=e.assetListUrl;let s;try{s=jA(r,this.hls.sessionId,e.baseUrl)}catch(f){const h=this.assignAssetListError(e,Ge.ASSET_LIST_LOAD_ERROR,f,r);this.hls.trigger(G.ERROR,h);return}n&&s.protocol!=="data:"&&s.searchParams.set("_HLS_start_offset",""+n);const i=this.hls.config,o=i.loader,a=new o(i),u={responseType:"json",url:s.href},l=i.interstitialAssetListLoadPolicy.default,c={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,h,p,g)=>{const v=f.data,y=v==null?void 0:v.ASSETS;if(!Array.isArray(y)){const w=this.assignAssetListError(e,Ge.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),p.url,h,g);this.hls.trigger(G.ERROR,w);return}e.assetListResponse=v,this.hls.trigger(G.ASSET_LIST_LOADED,{event:e,assetListResponse:v,networkDetails:g})},onError:(f,h,p,g)=>{const v=this.assignAssetListError(e,Ge.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${f.code} ${f.text} (${h.url})`),h.url,g,p);this.hls.trigger(G.ERROR,v)},onTimeout:(f,h,p)=>{const g=this.assignAssetListError(e,Ge.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${h.url})`),h.url,f,p);this.hls.trigger(G.ERROR,g)}};return a.load(u,c,d),this.hls.trigger(G.ASSET_LIST_LOADING,{event:e}),a}assignAssetListError(e,n,r,s,i,o){return e.error=r,{type:nn.NETWORK_ERROR,details:n,fatal:!1,interstitial:e,url:s,error:r,networkDetails:o,stats:i}}}function ix(t){t==null||t.play().catch(()=>{})}class w6 extends Fo{constructor(e,n){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled)return;const s=r-this.timelinePos;if(Math.abs(s)<1/7056e5)return;const o=s<=-.01;this.timelinePos=r,this.bufferedPos=r;const a=this.playingItem;if(!a){this.checkBuffer();return}if(o&&this.schedule.resetErrorsInRange(r,r-s)&&this.updateSchedule(),this.checkBuffer(),o&&r<a.start||r>=a.end){var u;const f=this.schedule.findItemIndexAtTime(this.timelinePos);if(!this.isInterstitial(a)&&(u=this.media)!=null&&u.paused&&(this.shouldPlay=!1),!o){const h=this.findItemIndex(a);if(f>h){const p=this.schedule.findJumpRestrictedIndex(h+1,f);if(p>h){this.setSchedulePosition(p);return}}}this.setSchedulePosition(f);return}const l=this.playingAsset;if(!l){if(this.playingLastItem&&this.isInterstitial(a)){const f=a.event.assetList[0];f&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(r,f))}return}const c=l.timelineStart,d=l.duration||0;(o&&r<c||r>=c+d)&&this.setScheduleToAssetAtTime(r,l)},this.onTimeupdate=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled)return;if(r>this.timelinePos)this.timelinePos=r,r>this.bufferedPos&&this.checkBuffer();else return;const s=this.playingItem;if(!s||this.playingLastItem)return;if(r>=s.end){this.timelinePos=s.end;const a=this.findItemIndex(s);this.setSchedulePosition(a+1)}const i=this.playingAsset;if(!i)return;const o=i.timelineStart+(i.duration||0);r>=o&&this.setScheduleToAssetAtTime(r,i)},this.onScheduleUpdate=(r,s)=>{const i=this.schedule,o=this.playingItem,a=i.events||[],u=i.items||[],l=i.durations,c=r.map(p=>p.identifier),d=!!(a.length||c.length);(d||s)&&this.log(`INTERSTITIALS_UPDATED (${a.length}): ${a}
Schedule: ${u.map(p=>ta(p))} pos: ${this.timelinePos}`),c.length&&this.log(`Removed events ${c}`),this.playerQueue.forEach(p=>{if(p.interstitial.appendInPlace){const g=p.assetItem.timelineStart,v=p.timelineOffset-g;if(v)try{p.timelineOffset=g}catch(y){Math.abs(v)>ru&&this.warn(`${y} ("${p.assetId}" ${p.timelineOffset}->${g})`)}}});let f=null;if(o){const p=this.updateItem(o,this.timelinePos);this.itemsMatch(o,p)&&(this.playingItem=p,this.waitingItem=this.endedItem=null,f=()=>this.trimInPlace(p,o))}else this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const h=this.bufferingItem;if(h){const p=this.updateItem(h,this.bufferedPos);this.itemsMatch(h,p)?(this.bufferingItem=p,f||(f=()=>this.trimInPlace(p,h))):h.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(h.event,null))}if(r.forEach(p=>{p.assetList.forEach(g=>{this.clearAssetPlayer(g.identifier,null)})}),d||s){if(this.hls.trigger(G.INTERSTITIALS_UPDATED,{events:a.slice(0),schedule:u.slice(0),durations:l,removedIds:c}),this.isInterstitial(o)&&c.includes(o.event.identifier)){this.warn(`Interstitial "${o.event.identifier}" removed while playing`),this.primaryFallback(o.event);return}f&&f(),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=n,this.assetListLoader=new S6(e),this.schedule=new b6(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e.on(G.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(G.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(G.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(G.MANIFEST_LOADING,this.onManifestLoading,this),e.on(G.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(G.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(G.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(G.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(G.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(G.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(G.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(G.BUFFER_APPENDED,this.onBufferAppended,this),e.on(G.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(G.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(G.MEDIA_ENDED,this.onMediaEnded,this),e.on(G.ERROR,this.onError,this),e.on(G.DESTROYING,this.onDestroying,this)}unregisterListeners(){const e=this.hls;e&&(e.off(G.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(G.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(G.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(G.MANIFEST_LOADING,this.onManifestLoading,this),e.off(G.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(G.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(G.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(G.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(G.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(G.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(G.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(G.BUFFER_CODECS,this.onBufferCodecs,this),e.off(G.BUFFER_APPENDED,this.onBufferAppended,this),e.off(G.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(G.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(G.MEDIA_ENDED,this.onMediaEnded,this),e.off(G.ERROR,this.onError,this),e.off(G.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.manager=null,this.hls=this.HlsPlayerClass=this.schedule=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Zs(e,"play",this.onPlay),Zs(e,"pause",this.onPause),Zs(e,"seeking",this.onSeeking),Zs(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,n){const r=this.media=n.media;Fs(r,"seeking",this.onSeeking),Fs(r,"timeupdate",this.onTimeupdate),Fs(r,"play",this.onPlay),Fs(r,"pause",this.onPause)}onMediaAttached(e,n){const r=this.effectivePlayingItem,s=this.detachedData;if(this.detachedData=null,r===null)this.checkStart();else if(!s){this.clearScheduleState();const i=this.findItemIndex(r);this.setSchedulePosition(i)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,n){const r=!!n.transferMedia,s=this.media;if(this.media=null,!r&&(s&&this.removeMediaListeners(s),this.detachedData)){const i=this.getBufferingPlayer();i&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,i.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.manager){if(!this.hls)return null;const e=this,n=()=>e.bufferingItem||e.waitingItem,r=d=>d&&e.getAssetPlayer(d.identifier),s=(d,f,h,p,g)=>{if(d){let v=d[f].start;const y=d.event;if(y){if(f==="playout"||y.timelineOccupancy!==Tp.Point){const w=r(h);(w==null?void 0:w.interstitial)===y&&(v+=w.assetItem.startOffset+w[g])}}else{const w=p==="bufferedPos"?o():e[p];v+=w-d.start}return v}return 0},i=(d,f)=>{if(d!==0&&f!=="primary"&&e.schedule.length){var h;const p=e.schedule.findItemIndexAtTime(d),g=(h=e.schedule.items)==null?void 0:h[p];if(g){const v=g[f].start-g.start;return d+v}}return d},o=()=>{const d=e.bufferedPos;return d===Number.MAX_VALUE?a("primary"):Math.max(d,0)},a=d=>{var f;return(f=e.primaryDetails)!=null&&f.live?e.primaryDetails.edge:e.schedule.durations[d]},u=(d,f)=>{var h,p;const g=e.effectivePlayingItem;if(g!=null&&(h=g.event)!=null&&h.restrictions.skip)return;e.log(`seek to ${d} "${f}"`);const v=e.effectivePlayingItem,y=e.schedule.findItemIndexAtTime(d,f),w=(p=e.schedule.items)==null?void 0:p[y],b=e.getBufferingPlayer(),S=b==null?void 0:b.interstitial,E=S==null?void 0:S.appendInPlace,x=v&&e.itemsMatch(v,w);if(v&&(E||x)){const A=r(e.playingAsset),C=(A==null?void 0:A.media)||e.primaryMedia;if(C){const _=f==="primary"?C.currentTime:s(v,f,e.playingAsset,"timelinePos","currentTime"),O=d-_,P=(E?_:C.currentTime)+O;if(P>=0&&(!A||E||P<=A.duration)){C.currentTime=P;return}}}if(w){let A=d;if(f!=="primary"){const _=w[f].start,O=d-_;A=w.start+O}const C=!e.isInterstitial(w);if((!e.isInterstitial(v)||v.event.appendInPlace)&&(C||w.event.appendInPlace)){const _=e.media||(E?b==null?void 0:b.media:null);_&&(_.currentTime=A)}else if(v){const _=e.findItemIndex(v);if(y>_){const P=e.schedule.findJumpRestrictedIndex(_+1,y);if(P>_){e.setSchedulePosition(P);return}}let O=0;if(C)e.timelinePos=A,e.checkBuffer();else{var k;const P=w==null||(k=w.event)==null?void 0:k.assetList;if(P){const U=d-(w[f]||w).start;for(let j=P.length;j--;){const N=P[j];if(N.duration&&U>=N.startOffset&&U<N.startOffset+N.duration){O=j;break}}}}e.setSchedulePosition(y,O)}}},l=()=>{const d=e.effectivePlayingItem;if(e.isInterstitial(d))return d;const f=n();return e.isInterstitial(f)?f:null},c={get currentTime(){const d=l(),f=e.effectivePlayingItem;return f&&f===d?s(f,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-f.playout.start:0},set currentTime(d){const f=l(),h=e.effectivePlayingItem;h&&h===f&&u(d+h.playout.start,"playout")},get duration(){const d=l();return d?d.playout.end-d.playout.start:0},get assetPlayers(){var d;const f=(d=l())==null?void 0:d.event.assetList;return f?f.map(h=>e.getAssetPlayer(h.identifier)):[]},get playingIndex(){var d;const f=(d=l())==null?void 0:d.event;return f&&e.effectivePlayingAsset?f.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return l()}};this.manager={get events(){var d,f;return((d=e.schedule)==null||(f=d.events)==null?void 0:f.slice(0))||[]},get schedule(){var d,f;return((d=e.schedule)==null||(f=d.items)==null?void 0:f.slice(0))||[]},get interstitialPlayer(){return l()?c:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return n()},get bufferingIndex(){const d=n();return e.findItemIndex(d)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const d=e.effectivePlayingItem;return e.findItemIndex(d)},primary:{get bufferedEnd(){return o()},get currentTime(){const d=e.timelinePos;return d>0?d:0},set currentTime(d){u(d,"primary")},get duration(){return a("primary")},get seekableStart(){var d;return((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0}},integrated:{get bufferedEnd(){return s(n(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return s(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(d){u(d,"integrated")},get duration(){return a("integrated")},get seekableStart(){var d;return i(((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0,"integrated")}},skip:()=>{const d=e.effectivePlayingItem,f=d==null?void 0:d.event;if(f&&!f.restrictions.skip){const h=e.findItemIndex(d);if(f.appendInPlace){const p=d.playout.start+d.event.duration;u(p+.001,"playout")}else e.advanceAfterAssetEnded(f,h,1/0)}}}}return this.manager}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const n=this.playingItem,r=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!n||!r?!1:this.findItemIndex(n)===r.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,n,r;if(this.mediaSelection===null)return;const s=this.waitingItem||this.playingItem;if(this.isInterstitial(s)&&!s.event.appendInPlace)return;let i=this.media;!i&&(e=this.bufferingItem)!=null&&(n=e.event)!=null&&n.appendInPlace&&(i=this.primaryMedia);const o=(r=i)==null?void 0:r.currentTime;if(!(o===void 0||!Ut(o)))return o}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,n){const r=this.getAssetPlayer(e);r&&this.transferMediaFromPlayer(r,n)}transferMediaFromPlayer(e,n){const r=e.interstitial.appendInPlace,s=e.media;if(r&&s===this.primaryMedia){if(this.bufferingAsset=null,(!n||this.isInterstitial(n)&&!n.event.appendInPlace)&&n&&s){this.detachedData={media:s};return}const i=e.transferMedia();this.log(`transfer MediaSource from ${e} ${rr(i)}`),this.detachedData=i}else n&&s&&(this.shouldPlay||(this.shouldPlay=!s.paused))}transferMediaTo(e,n){var r,s;if(e.media===n)return;let i=null;const o=this.hls,a=e!==o,u=a&&e.interstitial.appendInPlace,l=(r=this.detachedData)==null?void 0:r.mediaSource;let c;if(o.media)u&&(i=o.transferMedia(),this.detachedData=i),c="Primary";else if(l){const h=this.getBufferingPlayer();h?(i=h.transferMedia(),c=`${h}`):c="detached MediaSource"}else c="detached media";if(!i){if(l)i=this.detachedData,this.log(`using detachedData: MediaSource ${rr(i)}`);else if(!this.detachedData||o.media===n){const h=this.playerQueue;h.length>1&&h.forEach(p=>{if(a&&p.interstitial.appendInPlace!==u){const g=p.interstitial;this.clearInterstitial(p.interstitial,null),g.appendInPlace=!1,g.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${g}`)}}),this.hls.detachMedia(),this.detachedData={media:n}}}const d=i&&"mediaSource"in i&&((s=i.mediaSource)==null?void 0:s.readyState)!=="closed",f=d&&i?i:n;if(this.log(`${d?"transfering MediaSource":"attaching media"} to ${a?e:"Primary"} from ${c}`),f===i){const h=a&&e.assetId===this.schedule.assetIdAtEnd;f.overrides={duration:this.schedule.duration,endOfStream:!a||h,cueRemoval:!a}}e.attachMedia(f)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,n=e.events;if(!n||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const r=this.timelinePos,s=this.effectivePlayingItem;if(r===-1){const i=this.hls.startPosition;if(this.timelinePos=i,n.length&&n[0].cue.pre){const o=e.findEventIndex(n[0].identifier);this.setSchedulePosition(o)}else if(i>=0||!this.primaryLive){const o=this.timelinePos=i>0?i:0,a=e.findItemIndexAtTime(o);this.setSchedulePosition(a)}}else if(s&&!this.playingItem){const i=e.findItemIndex(s);this.setSchedulePosition(i)}}advanceAfterAssetEnded(e,n,r){const s=iv(e,r);if(!e.isAssetPastPlayoutLimit(s))this.setSchedulePosition(n,s);else{const i=this.schedule.items;if(i){const o=n+1,a=i.length;if(o>=a){this.setSchedulePosition(-1);return}const u=e.resumeTime;this.timelinePos<u&&(this.timelinePos=u,this.checkBuffer()),this.setSchedulePosition(o)}}}setScheduleToAssetAtTime(e,n){const r=this.schedule,s=n.parentIdentifier,i=r.getEvent(s);if(i){const o=r.findEventIndex(s),a=r.findAssetIndex(i,e);this.advanceAfterAssetEnded(i,o,a-1)}}setSchedulePosition(e,n){const r=this.schedule.items;if(!r||this.playbackDisabled)return;this.log(`setSchedulePosition ${e}, ${n}`);const s=e>=0?r[e]:null,i=this.playingItem,o=this.playingLastItem;if(this.isInterstitial(i)){var a;const l=i.event,c=this.playingAsset,d=c==null?void 0:c.identifier,f=d?this.getAssetPlayer(d):null;if(f&&d&&(!this.eventItemsMatch(i,s)||n!==void 0&&d!==((a=l.assetList)==null?void 0:a[n].identifier))){var u;const h=l.findAssetIndex(c);this.log(`INTERSTITIAL_ASSET_ENDED ${h+1}/${l.assetList.length} ${Ul(c)}`),this.endedAsset=c,this.playingAsset=null,this.hls.trigger(G.INTERSTITIAL_ASSET_ENDED,{asset:c,assetListIndex:h,event:l,schedule:r.slice(0),scheduleIndex:e,player:f}),this.retreiveMediaSource(d,s),f.media&&!((u=this.detachedData)!=null&&u.mediaSource)&&f.detachMedia()}if(!this.eventItemsMatch(i,s)&&(this.endedItem=i,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${l} ${ta(i)}`),l.hasPlayed=!0,this.hls.trigger(G.INTERSTITIAL_ENDED,{event:l,schedule:r.slice(0),scheduleIndex:e}),l.cue.once)){this.updateSchedule();const h=this.schedule.items;if(s&&h){const p=this.schedule.findItemIndex(s);this.advanceSchedule(p,h,n,i,o)}return}}this.advanceSchedule(e,r,n,i,o)}advanceSchedule(e,n,r,s,i){const o=e>=0?n[e]:null,a=this.primaryMedia,u=this.playerQueue;if(u.length&&u.forEach(l=>{const c=l.interstitial,d=this.schedule.findEventIndex(c.identifier);(d<e||d>e+1)&&this.clearInterstitial(c,o)}),this.isInterstitial(o)){this.timelinePos=Math.min(Math.max(this.timelinePos,o.start),o.end);const l=o.event;if(r===void 0){r=this.schedule.findAssetIndex(l,this.timelinePos);const h=iv(l,r-1);if(l.isAssetPastPlayoutLimit(h)){this.advanceAfterAssetEnded(l,e,r);return}r=h}const c=this.waitingItem;this.assetsBuffered(o,a)||this.setBufferingItem(o);let d=this.preloadAssets(l,r);if(this.eventItemsMatch(o,c||s)||(this.waitingItem=o,this.log(`INTERSTITIAL_STARTED ${ta(o)} ${l.appendInPlace?"append in place":""}`),this.hls.trigger(G.INTERSTITIAL_STARTED,{event:l,schedule:n.slice(0),scheduleIndex:e})),!l.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${l}`);return}if(l.assetListLoader&&(l.assetListLoader.destroy(),l.assetListLoader=void 0),!a){this.log(`Waiting for attachMedia to start Interstitial ${l}`);return}this.waitingItem=this.endedItem=null,this.playingItem=o;const f=l.assetList[r];if(!f){const h=n[e+1],p=this.media;h&&p&&!this.isInterstitial(h)&&p.currentTime<h.start&&(p.currentTime=this.timelinePos=h.start),this.advanceAfterAssetEnded(l,e,r||0);return}if(d||(d=this.getAssetPlayer(f.identifier)),d===null||d.destroyed){const h=l.assetList.length;this.warn(`asset ${r+1}/${h} player destroyed ${l}`),d=this.createAssetPlayer(l,f,r)}if(!this.eventItemsMatch(o,this.bufferingItem)&&l.appendInPlace&&this.isAssetBuffered(f))return;this.startAssetPlayer(d,r,n,e,a),this.shouldPlay&&ix(d.media)}else o!==null?(this.resumePrimary(o,e,s),this.shouldPlay&&ix(this.hls.media)):i&&this.isInterstitial(s)&&(this.endedItem=null,this.playingItem=s,s.event.appendInPlace||this.attachPrimary(this.schedule.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e,n;return(e=this.mediaSelection)==null||(n=e.main)==null?void 0:n.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,n,r){var s;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${ta(e)}`),!((s=this.detachedData)!=null&&s.mediaSource)){let o=this.timelinePos;(o<e.start||o>=e.end)&&(o=this.getPrimaryResumption(e,n),this.timelinePos=o),this.attachPrimary(o,e)}if(!r)return;const i=this.schedule.items;i&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${ta(e)}`),this.hls.trigger(G.INTERSTITIALS_PRIMARY_RESUMED,{schedule:i.slice(0),scheduleIndex:n}),this.checkBuffer())}getPrimaryResumption(e,n){const r=e.start;if(this.primaryLive){const s=this.primaryDetails;if(n===0)return this.hls.startPosition;if(s&&(r<s.fragmentStart||r>s.edge))return this.hls.liveSyncPosition||-1}return r}isAssetBuffered(e){const n=this.getAssetPlayer(e.identifier);return n!=null&&n.hls?n.hls.bufferedToEnd:pn.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,n,r){n?this.setBufferingItem(n):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const s=this.primaryMedia;if(!s)return;const i=this.hls;i.media?this.checkBuffer():(this.transferMediaTo(i,s),r&&this.startLoadingPrimaryAt(e,r)),r||(this.timelinePos=e,this.startLoadingPrimaryAt(e,r))}startLoadingPrimaryAt(e,n){var r;const s=this.hls;!s.loadingEnabled||!s.media||Math.abs((((r=s.mainForwardBufferInfo)==null?void 0:r.start)||s.media.currentTime)-e)>.5?s.startLoad(e,n):s.bufferingEnabled||s.resumeBuffering()}onManifestLoading(){this.stopLoad(),this.schedule.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(G.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(G.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,n){if(n.level===-1)return;const r=this.hls.levels[n.level],s=Hn(Hn({},this.mediaSelection||this.altSelection),{},{main:r});this.mediaSelection=s,this.schedule.parseInterstitialDateRanges(s,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,n){const r=this.hls.audioTracks[n.id],s=this.mediaSelection;if(!s){this.altSelection=Hn(Hn({},this.altSelection),{},{audio:r});return}const i=Hn(Hn({},s),{},{audio:r});this.mediaSelection=i}onSubtitleTrackUpdated(e,n){const r=this.hls.subtitleTracks[n.id],s=this.mediaSelection;if(!s){this.altSelection=Hn(Hn({},this.altSelection),{},{subtitles:r});return}const i=Hn(Hn({},s),{},{subtitles:r});this.mediaSelection=i}onAudioTrackSwitching(e,n){const r=vE(n);this.playerQueue.forEach(s=>s.hls.setAudioOption(n)||s.hls.setAudioOption(r))}onSubtitleTrackSwitch(e,n){const r=vE(n);this.playerQueue.forEach(s=>s.hls.setSubtitleOption(n)||n.id!==-1&&s.hls.setSubtitleOption(r))}onBufferCodecs(e,n){const r=n.tracks;r&&(this.requiredTracks=r)}onBufferAppended(e,n){this.checkBuffer()}onBufferFlushed(e,n){const r=this.playingItem;if(r&&!this.itemsMatch(r,this.bufferingItem)&&!this.isInterstitial(r)){const s=this.timelinePos;this.bufferedPos=s,this.checkBuffer()}}onBufferedToEnd(e){const n=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&n){for(let s=0;s<n.length;s++){const i=n[s];if(i.cue.post){var r;const o=this.schedule.findEventIndex(i.identifier),a=(r=this.schedule.items)==null?void 0:r[o];this.isInterstitial(a)&&this.eventItemsMatch(a,this.bufferingItem)&&this.bufferedToItem(a,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const n=this.playingItem;if(!this.playingLastItem&&n){const r=this.findItemIndex(n);this.setSchedulePosition(r+1)}else this.shouldPlay=!1}updateItem(e,n){const r=this.schedule.items;if(e&&r){const s=this.findItemIndex(e,n);return r[s]||null}return null}trimInPlace(e,n){if(this.isInterstitial(e)&&e.event.appendInPlace&&n.end-e.end>.25){e.event.assetList.forEach((i,o)=>{e.event.isAssetPastPlayoutLimit(o)&&this.clearAssetPlayer(i.identifier,null)});const r=e.end+.25,s=pn.bufferInfo(this.primaryMedia,r,0);(s.end>r||(s.nextStart||0)>r)&&(this.attachPrimary(r,null),this.flushFrontBuffer(r))}}itemsMatch(e,n){return!!n&&(e===n||e.event&&n.event&&this.eventItemsMatch(e,n)||!e.event&&!n.event&&this.findItemIndex(e)===this.findItemIndex(n))}eventItemsMatch(e,n){var r;return!!n&&(e===n||e.event.identifier===((r=n.event)==null?void 0:r.identifier))}findItemIndex(e,n){return e?this.schedule.findItemIndex(e,n):-1}updateSchedule(){const e=this.mediaSelection;e&&this.schedule.updateSchedule(e,[])}checkBuffer(e){const n=this.schedule.items;if(!n)return;const r=pn.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=r.len<1),this.updateBufferedPos(r.end,n,e)}updateBufferedPos(e,n,r){const s=this.schedule,i=this.bufferingItem;if(this.bufferedPos>e)return;if(n.length===1&&this.itemsMatch(n[0],i)){this.bufferedPos=e;return}const o=this.playingItem,a=this.findItemIndex(o);let u=s.findItemIndexAtTime(e);if(this.bufferedPos<e){var l,c;const d=this.findItemIndex(i),f=Math.min(d+1,n.length-1),h=n[f];if((u===-1&&i&&e>=i.end||(l=h.event)!=null&&l.appendInPlace&&e+.01>=h.start)&&(u=f),f-a>1&&(i==null||(c=i.event)==null?void 0:c.appendInPlace)===!1)return;if(this.bufferedPos=e,u>d&&u>a)this.bufferedToItem(h);else{const p=this.primaryDetails;this.primaryLive&&p&&e>p.edge-p.targetduration&&h.start<p.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(h)&&this.preloadAssets(h.event,0)}}else r&&o&&!this.itemsMatch(o,i)&&(u===a?this.bufferedToItem(o):u===a+1&&this.bufferedToItem(n[u]))}assetsBuffered(e,n){return e.event.assetList.length===0?!1:!e.event.assetList.some(s=>{const i=this.getAssetPlayer(s.identifier);return!(i!=null&&i.bufferedInPlaceToEnd(n))})}setBufferingItem(e){const n=this.bufferingItem,r=this.schedule;if(this.itemsMatch(e,n))this.bufferingItem!==e&&(this.bufferingItem=e);else{const{items:s,events:i}=r;if(!s||!i)return n;const o=this.isInterstitial(e),a=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const u=a?a.remaining:n?n.end-this.timelinePos:0;this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${ta(e)}`+(n?` (${u.toFixed(2)} remaining)`:"")),this.playbackDisabled||(o?e.event.assetList.forEach(l=>{const c=this.getAssetPlayer(l.identifier);c&&c.resumeBuffering()}):(this.hls.resumeBuffering(),this.playerQueue.forEach(l=>l.pauseBuffering()))),this.hls.trigger(G.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:i.slice(0),schedule:s.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}return n}bufferedToItem(e,n=0){const r=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,n);else if(r!==null){this.bufferingAsset=null;const s=this.detachedData;s?s.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const n=this.findItemIndex(e),r=this.getPrimaryResumption(e,n);this.startLoadingPrimaryAt(r)}bufferedToEvent(e,n){const r=e.event,s=r.assetList.length===0&&!r.assetListLoader,i=r.cue.once;if(s||!i){const o=this.preloadAssets(r,n);if(o!=null&&o.interstitial.appendInPlace){const a=r.assetList[n],u=this.primaryMedia;a&&u&&this.bufferAssetPlayer(o,u)}}}preloadAssets(e,n){const r=e.assetUrl,s=e.assetList.length,i=s===0&&!e.assetListLoader,o=e.cue.once;if(i){const u=e.timelineStart;if(e.appendInPlace){var a;const f=this.playingItem;!this.isInterstitial(f)&&(f==null||(a=f.nextEvent)==null?void 0:a.identifier)===e.identifier&&this.flushFrontBuffer(u+.25)}let l,c=0;if(!this.playingItem&&this.primaryLive&&(c=this.hls.startPosition,c===-1&&(c=this.hls.liveSyncPosition||0)),c&&!(e.cue.pre||e.cue.post)){const f=c-u;f>0&&(l=Math.round(f*1e3)/1e3)}if(this.log(`Load interstitial asset ${n+1}/${r?1:s} ${e}${l?` live-start: ${c} start-offset: ${l}`:""}`),r)return this.createAsset(e,0,0,u,e.duration,r);const d=this.assetListLoader.loadAssetList(e,l);d&&(e.assetListLoader=d)}else if(!o&&s){for(let u=n;u<s;u++){const l=e.assetList[u],c=this.getAssetPlayerQueueIndex(l.identifier);(c===-1||this.playerQueue[c].destroyed)&&!l.error&&this.createAssetPlayer(e,l,u)}return this.getAssetPlayer(e.assetList[n].identifier)}return null}flushFrontBuffer(e){const n=this.requiredTracks;if(!n)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(n).forEach(s=>{this.hls.trigger(G.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:s})})}getAssetPlayerQueueIndex(e){const n=this.playerQueue;for(let r=0;r<n.length;r++)if(e===n[r].assetId)return r;return-1}getAssetPlayer(e){const n=this.getAssetPlayerQueueIndex(e);return this.playerQueue[n]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:n}=this;if(n){for(let r=0;r<e.length;r++)if(e[r].media===n)return e[r]}return null}createAsset(e,n,r,s,i,o){const a={parentIdentifier:e.identifier,identifier:m6(e,o,n),duration:i,startOffset:r,timelineStart:s,uri:o};return this.createAssetPlayer(e,a,n)}createAssetPlayer(e,n,r){const s=this.hls,i=s.userConfig;let o=i.videoPreference;const a=s.loadLevelObj||s.levels[s.currentLevel];(o||a)&&(o=Kn({},o),a.videoCodec&&(o.videoCodec=a.videoCodec),a.videoRange&&(o.allowedVideoRanges=[a.videoRange]));const u=s.audioTracks[s.audioTrack],l=s.subtitleTracks[s.subtitleTrack];let c=0;if(this.primaryLive||e.appendInPlace){const b=this.timelinePos-n.timelineStart;if(b>1){const S=n.duration;S&&b<S&&(c=b)}}const d=n.identifier,f=Hn(Hn({},i),{},{autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:s.sessionId,assetPlayerId:d,abrEwmaDefaultEstimate:s.bandwidthEstimate,interstitialsController:void 0,startPosition:c,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:o,audioPreference:u||i.audioPreference,subtitlePreference:l||i.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,n.timelineStart&&(f.timelineOffset=n.timelineStart));const h=f.cmcd;h!=null&&h.sessionId&&h.contentId&&(f.cmcd=Kn({},h,{contentId:Hc(n.uri)})),this.getAssetPlayer(d)&&this.warn(`Duplicate date range identifier ${e} and asset ${d}`);const p=new y6(this.HlsPlayerClass,f,e,n);this.playerQueue.push(p),e.assetList[r]=n;const g=b=>{if(b.live){const x=new Error(`Interstitials MUST be VOD assets ${e}`),k={fatal:!0,type:nn.OTHER_ERROR,details:Ge.INTERSTITIAL_ASSET_ITEM_ERROR,error:x};this.handleAssetItemError(k,e,this.schedule.findEventIndex(e.identifier),r,x.message);return}const S=b.edge-b.fragmentStart,E=n.duration;(E===null||S>E)&&(this.log(`Interstitial asset "${d}" duration change ${E} > ${S}`),n.duration=S,this.updateSchedule())};p.on(G.LEVEL_UPDATED,(b,{details:S})=>g(S)),p.on(G.LEVEL_PTS_UPDATED,(b,{details:S})=>g(S));const v=(b,S)=>{const E=this.getAssetPlayer(d);if(E&&S.tracks){E.off(G.BUFFER_CODECS,v),E.tracks=S.tracks;const x=this.primaryMedia;this.bufferingAsset===E.assetItem&&x&&!E.media&&this.bufferAssetPlayer(E,x)}};p.on(G.BUFFER_CODECS,v);const y=()=>{var b;const S=this.getAssetPlayer(d);if(this.log(`buffered to end of asset ${S}`),!S)return;const E=this.schedule.findEventIndex(e.identifier),x=(b=this.schedule.items)==null?void 0:b[E];if(this.isInterstitial(x)){const A=e.findAssetIndex(n),C=iv(e,A);if(!e.isAssetPastPlayoutLimit(C))this.bufferedToItem(x,C);else{var k;const _=(k=this.schedule.items)==null?void 0:k[E+1];_&&this.bufferedToItem(_)}}};p.on(G.BUFFERED_TO_END,y);const w=b=>()=>{if(!this.getAssetPlayer(d))return;this.shouldPlay=!0;const E=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,E,b)};return p.once(G.MEDIA_ENDED,w(r)),p.once(G.PLAYOUT_LIMIT_REACHED,w(1/0)),p.on(G.ERROR,(b,S)=>{const E=this.getAssetPlayer(d);if(S.details===Ge.BUFFER_STALLED_ERROR){if(E!=null&&E.media){const x=E.currentTime,k=E.duration-x;x&&e.appendInPlace&&k/E.media.playbackRate<.5?(this.log(`Advancing buffer past end of asset ${d} ${e} at ${E.media.currentTime}`),y()):(this.warn(`Stalled at ${x} of ${x+k} in asset ${d} ${e}`),this.onTimeupdate(),this.checkBuffer(!0))}return}this.handleAssetItemError(S,e,this.schedule.findEventIndex(e.identifier),r,`Asset player error ${S.error} ${e}`)}),p.on(G.DESTROYING,()=>{if(!this.getAssetPlayer(d))return;const S=new Error(`Asset player destroyed unexpectedly ${d}`),E={fatal:!0,type:nn.OTHER_ERROR,details:Ge.INTERSTITIAL_ASSET_ITEM_ERROR,error:S};this.handleAssetItemError(E,e,this.schedule.findEventIndex(e.identifier),r,S.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${Ul(n)}`),this.hls.trigger(G.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:n,assetListIndex:r,event:e,player:p}),p}clearInterstitial(e,n){e.assetList.forEach(r=>{this.clearAssetPlayer(r.identifier,n)}),e.reset()}resetAssetPlayer(e){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){this.log(`reset asset player "${e}" after error`);const r=this.playerQueue[n];this.transferMediaFromPlayer(r,null),r.resetDetails()}}clearAssetPlayer(e,n){const r=this.getAssetPlayerQueueIndex(e);if(r!==-1){this.log(`clear asset player "${e}" toSegment: ${n&&ta(n)}`);const s=this.playerQueue[r];this.transferMediaFromPlayer(s,n),this.playerQueue.splice(r,1),s.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,n,r,s,i){const{interstitial:o,assetItem:a,assetId:u}=e,l=o.assetList.length,c=this.playingAsset;this.endedAsset=null,this.playingAsset=a,(!c||c.identifier!==u)&&(c&&(this.clearAssetPlayer(c.identifier,r[s]),delete c.error),this.log(`INTERSTITIAL_ASSET_STARTED ${n+1}/${l} ${Ul(a)}`),this.hls.trigger(G.INTERSTITIAL_ASSET_STARTED,{asset:a,assetListIndex:n,event:o,schedule:r.slice(0),scheduleIndex:s,player:e})),this.bufferAssetPlayer(e,i)}bufferAssetPlayer(e,n){var r,s;const{interstitial:i,assetItem:o}=e,a=this.schedule.findEventIndex(i.identifier),u=(r=this.schedule.items)==null?void 0:r[a];if(!u)return;this.setBufferingItem(u),this.bufferingAsset=o;const l=this.getBufferingPlayer();if(l===e)return;const c=i.appendInPlace;if(c&&(l==null?void 0:l.interstitial.appendInPlace)===!1)return;const d=(l==null?void 0:l.tracks)||((s=this.detachedData)==null?void 0:s.tracks)||this.requiredTracks;if(c&&o!==this.playingAsset){if(!e.tracks)return;if(d&&!O2(d,e.tracks)){const f=new Error(`Asset ${Ul(o)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(d)}')`),h={fatal:!0,type:nn.OTHER_ERROR,details:Ge.INTERSTITIAL_ASSET_ITEM_ERROR,error:f},p=i.findAssetIndex(o);this.handleAssetItemError(h,i,a,p,f.message);return}}this.transferMediaTo(e,n)}handleAssetItemError(e,n,r,s,i){if(e.details===Ge.BUFFER_STALLED_ERROR)return;const o=n.assetList[s];this.warn(`INTERSTITIAL_ASSET_ERROR ${o&&Ul(o)} ${e.error}`);const a=o==null?void 0:o.identifier,u=this.getAssetPlayerQueueIndex(a),l=this.playerQueue[u]||null,c=this.schedule.items,d=Kn({},e,{fatal:!1,errorAction:cd(!0),asset:o,assetListIndex:s,event:n,schedule:c,scheduleIndex:r,player:l});if(this.hls.trigger(G.INTERSTITIAL_ASSET_ERROR,d),!e.fatal)return;const f=this.playingAsset,h=new Error(i);if(o&&(this.clearAssetPlayer(a,null),o.error=h),!n.assetList.some(p=>!p.error))n.error=h;else if(n.appendInPlace){for(let p=s;p<n.assetList.length;p++)this.resetAssetPlayer(n.assetList[p].identifier);this.updateSchedule()}n.error?this.primaryFallback(n):f&&f.identifier===a&&this.advanceAfterAssetEnded(n,r,s)}primaryFallback(e){const n=e.timelineStart,r=this.effectivePlayingItem;if(this.updateSchedule(),r){this.log(`Fallback to primary from event "${e.identifier}" start: ${n} pos: ${this.timelinePos} playing: ${r?ta(r):"<none>"} error: ${e.error}`);let s=this.timelinePos;s===-1&&(s=this.hls.startPosition);const i=this.updateItem(r,s);this.itemsMatch(r,i)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(n,null),this.flushFrontBuffer(n));const o=this.schedule.findItemIndexAtTime(s);this.setSchedulePosition(o)}else this.checkStart()}onAssetListLoaded(e,n){var r;const s=n.event,i=s.identifier,o=n.assetListResponse.ASSETS;if(!this.schedule.hasEvent(i))return;const a=s.timelineStart,u=s.duration;let l=0;o.forEach((p,g)=>{const v=parseFloat(p.DURATION);this.createAsset(s,g,l,a+l,v,p.URI),l+=v}),s.duration=l,this.log(`Loaded asset-list with duration: ${l} (was: ${u}) ${s}`);const c=this.waitingItem,d=(c==null?void 0:c.event.identifier)===i;this.updateSchedule();const f=(r=this.bufferingItem)==null?void 0:r.event;if(d){var h;const p=this.schedule.findEventIndex(i),g=(h=this.schedule.items)==null?void 0:h[p];if(g){if(!this.playingItem&&this.timelinePos>g.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==p){s.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${s}`),this.primaryFallback(s);return}this.setBufferingItem(g)}this.setSchedulePosition(p)}else if((f==null?void 0:f.identifier)===i&&f.appendInPlace){const p=s.assetList[0],g=this.getAssetPlayer(p.identifier),v=this.primaryMedia;p&&g&&v&&this.bufferAssetPlayer(g,v)}}onError(e,n){switch(n.details){case Ge.ASSET_LIST_PARSING_ERROR:case Ge.ASSET_LIST_LOAD_ERROR:case Ge.ASSET_LIST_LOAD_TIMEOUT:{const r=n.interstitial;r&&this.primaryFallback(r);break}case Ge.BUFFER_STALLED_ERROR:{this.onTimeupdate(),this.checkBuffer(!0);break}}}}const ox=500;class E6 extends gb{constructor(e,n,r){super(e,n,r,"subtitle-stream-controller",qt.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(G.LEVEL_LOADED,this.onLevelLoaded,this),e.on(G.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(G.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(G.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(G.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(G.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(G.LEVEL_LOADED,this.onLevelLoaded,this),e.off(G.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(G.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(G.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(G.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(G.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,n){this.stopLoad(),this.state=at.IDLE,this.setInterval(ox),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,n){this.tracksBuffered=[],super.onMediaDetaching(e,n)}onLevelLoaded(e,n){this.mainDetails=n.details}onSubtitleFragProcessed(e,n){const{frag:r,success:s}=n;if(Pr(r)&&(this.fragPrevious=r),this.state=at.IDLE,!s)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let o;const a=r.start;for(let l=0;l<i.length;l++)if(a>=i[l].start&&a<=i[l].end){o=i[l];break}const u=r.start+r.duration;o?o.end=u:(o={start:a,end:u},i.push(o)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null),this.media&&this.tick()}onBufferFlushing(e,n){const{startOffset:r,endOffset:s}=n;if(r===0&&s!==Number.POSITIVE_INFINITY){const i=s-1;if(i<=0)return;n.endOffsetSubtitles=Math.max(0,i),this.tracksBuffered.forEach(o=>{for(let a=0;a<o.length;){if(o[a].end<=i){o.shift();continue}else if(o[a].start<i)o[a].start=i;else break;a++}}),this.fragmentTracker.removeFragmentsInRange(r,i,qt.SUBTITLE)}}onError(e,n){const r=n.frag;(r==null?void 0:r.type)===qt.SUBTITLE&&(n.details===Ge.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==at.STOPPED&&(this.state=at.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:n}){if(this.levels&&DA(this.levels,n)){this.levels=n.map(r=>new ud(r));return}this.tracksBuffered=[],this.levels=n.map(r=>{const s=new ud(r);return this.tracksBuffered[s.id]=[],s}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,qt.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,n){var r;if(this.currentTrackId=n.id,!((r=this.levels)!=null&&r.length)||this.currentTrackId===-1){this.clearInterval();return}const s=this.levels[this.currentTrackId];s!=null&&s.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,s&&this.state!==at.STOPPED&&this.setInterval(ox)}onSubtitleTrackLoaded(e,n){var r;const{currentTrackId:s,levels:i}=this,{details:o,id:a}=n;if(!i){this.warn(`Subtitle tracks were reset while loading level ${a}`);return}const u=i[a];if(a>=i.length||!u)return;this.log(`Subtitle track ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(o.live||(r=u.details)!=null&&r.live){const d=this.mainDetails;if(o.deltaUpdateFailed||!d)return;const f=d.fragments[0];if(!u.details)o.hasProgramDateTime&&d.hasProgramDateTime?(Ep(o,d),l=o.fragmentStart):f&&(l=f.start,g0(o,l));else{var c;l=this.alignPlaylists(o,u.details,(c=this.levelLastLoaded)==null?void 0:c.details),l===0&&f&&(l=f.start,g0(o,l))}}u.details=o,this.levelLastLoaded=u,a===s&&(this.hls.trigger(G.SUBTITLE_TRACK_UPDATED,{details:o,id:a,groupId:n.groupId}),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===at.IDLE&&(fl(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),u.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:n,payload:r}=e,s=n.decryptdata,i=this.hls;if(!this.fragContextChanged(n)&&r&&r.byteLength>0&&s!=null&&s.key&&s.iv&&tu(s.method)){const o=performance.now();this.decrypter.decrypt(new Uint8Array(r),s.key.buffer,s.iv.buffer,pb(s.method)).catch(a=>{throw i.trigger(G.ERROR,{type:nn.MEDIA_ERROR,details:Ge.FRAG_DECRYPT_ERROR,fatal:!1,error:a,reason:a.message,frag:n}),a}).then(a=>{const u=performance.now();i.trigger(G.FRAG_DECRYPTED,{frag:n,payload:a,stats:{tstart:o,tdecrypt:u}})}).catch(a=>{this.warn(`${a.name}: ${a.message}`),this.state=at.IDLE})}}doTick(){if(!this.media){this.state=at.IDLE;return}if(this.state===at.IDLE){const{currentTrackId:e,levels:n}=this,r=n==null?void 0:n[e];if(!r||!n.length||!r.details||this.waitForLive(r))return;const{config:s}=this,i=this.getLoadPosition(),o=pn.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,s.maxBufferHole),{end:a,len:u}=o,l=r.details,c=this.hls.maxBufferLength+l.levelTargetDuration;if(u>c)return;const d=l.fragments,f=d.length,h=l.edge;let p=null;const g=this.fragPrevious;if(a<h){const w=s.maxFragLookUpTolerance,b=a>h-w?0:w;p=fl(g,d,Math.max(d[0].start,a),b),!p&&g&&g.start<d[0].start&&(p=d[0])}else p=d[f-1];if(p=this.filterReplacedPrimary(p,r.details),!p)return;const v=p.sn-l.startSN,y=d[v-1];if(y&&y.cc===p.cc&&this.fragmentTracker.getState(y)===xr.NOT_LOADED&&(p=y),this.fragmentTracker.getState(p)===xr.NOT_LOADED){const w=this.mapToInitFragWhenRequired(p);w&&this.loadFragment(w,r,a)}}}loadFragment(e,n,r){Pr(e)?super.loadFragment(e,n,r):this._loadInitSegment(e,n)}get mediaBufferTimeRanges(){return new x6(this.tracksBuffered[this.currentTrackId]||[])}}class x6{constructor(e){this.buffered=void 0;const n=(r,s,i)=>{if(s=s>>>0,s>i-1)throw new DOMException(`Failed to execute '${r}' on 'TimeRanges': The index provided (${s}) is greater than the maximum bound (${i})`);return e[s][r]};this.buffered={get length(){return e.length},end(r){return n("end",r,e.length)},start(r){return n("start",r,e.length)}}}}const T6={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},KA=t=>String.fromCharCode(T6[t]||t),pi=15,ho=100,C6={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},k6={17:2,18:4,21:6,22:8,23:10,19:13,20:15},_6={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},A6={25:2,26:4,29:6,30:8,31:10,27:13,28:15},I6=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class R6{constructor(){this.time=null,this.verboseLevel=0}log(e,n){if(this.verboseLevel>=e){const r=typeof n=="function"?n():n;Nn.log(`${this.time} [${e}] ${r}`)}}}const Va=function(e){const n=[];for(let r=0;r<e.length;r++)n.push(e[r].toString(16));return n};class zA{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const n=["foreground","underline","italics","background","flash"];for(let r=0;r<n.length;r++){const s=n[r];e.hasOwnProperty(s)&&(this[s]=e[s])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class L6{constructor(){this.uchar=" ",this.penState=new zA}reset(){this.uchar=" ",this.penState.reset()}setChar(e,n){this.uchar=e,this.penState.copy(n)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}let P6=class{constructor(e){this.chars=[],this.pos=0,this.currPenState=new zA,this.cueStartTime=null,this.logger=void 0;for(let n=0;n<ho;n++)this.chars.push(new L6);this.logger=e}equals(e){for(let n=0;n<ho;n++)if(!this.chars[n].equals(e.chars[n]))return!1;return!0}copy(e){for(let n=0;n<ho;n++)this.chars[n].copy(e.chars[n])}isEmpty(){let e=!0;for(let n=0;n<ho;n++)if(!this.chars[n].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>ho&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=ho)}moveCursor(e){const n=this.pos+e;if(e>1)for(let r=this.pos+1;r<n+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(n)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const n=KA(e);if(this.pos>=ho){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1)}clearFromPos(e){let n;for(n=e;n<ho;n++)this.chars[n].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let n=!0;for(let r=0;r<ho;r++){const s=this.chars[r].uchar;s!==" "&&(n=!1),e.push(s)}return n?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};class ov{constructor(e){this.rows=[],this.currRow=pi-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let n=0;n<pi;n++)this.rows.push(new P6(e));this.logger=e}reset(){for(let e=0;e<pi;e++)this.rows[e].clear();this.currRow=pi-1}equals(e){let n=!0;for(let r=0;r<pi;r++)if(!this.rows[r].equals(e.rows[r])){n=!1;break}return n}copy(e){for(let n=0;n<pi;n++)this.rows[n].copy(e.rows[n])}isEmpty(){let e=!0;for(let n=0;n<pi;n++)if(!this.rows[n].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+rr(e));let n=e.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(let a=0;a<pi;a++)this.rows[a].clear();const i=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){const a=o.rows[i].cueStartTime,u=this.logger.time;if(a!==null&&u!==null&&a<u)for(let l=0;l<this.nrRollUpRows;l++)this.rows[n-this.nrRollUpRows+l+1].copy(o.rows[i+l])}}this.currRow=n;const r=this.rows[this.currRow];if(e.indent!==null){const i=e.indent,o=Math.max(i-1,0);r.setCursor(e.indent),e.color=r.chars[o].penState.foreground}const s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+rr(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(e,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const n=[];let r="",s=-1;for(let i=0;i<pi;i++){const o=this.rows[i].getTextString();o&&(s=i+1,e?n.push("Row "+s+": '"+o+"'"):n.push(o.trim()))}return n.length>0&&(e?r="["+n.join(" | ")+"]":r=n.join(`
`)),r}getTextAndFormat(){return this.rows}}class ax{constructor(e,n,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new ov(r),this.nonDisplayedMemory=new ov(r),this.lastOutputScreen=new ov(r),this.currRollUpRow=this.displayedMemory.rows[pi-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[pi-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);const n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>n+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const n={flash:!1};if(n.underline=e%2===1,n.italics=e>=46,n.italics)n.foreground="white";else{const r=Math.floor(e/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];n.foreground=s[r]}this.logger.log(2,"MIDROW: "+rr(n)),this.writeScreen.setPen(n)}outputDataUpdate(e=!1){const n=this.logger.time;n!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=n:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:n),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class lx{constructor(e,n,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=O6(),this.logger=void 0;const s=this.logger=new R6;this.channels=[null,new ax(e,n,s),new ax(e+1,r,s)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,n){this.channels[e].setHandler(n)}addData(e,n){this.logger.time=e;for(let r=0;r<n.length;r+=2){const s=n[r]&127,i=n[r+1]&127;let o=!1,a=null;if(s===0&&i===0)continue;this.logger.log(3,()=>"["+Va([n[r],n[r+1]])+"] -> ("+Va([s,i])+")");const u=this.cmdHistory;if(s>=16&&s<=31){if(D6(s,i,u)){Kf(null,null,u),this.logger.log(3,()=>"Repeated command ("+Va([s,i])+") is dropped");continue}Kf(s,i,this.cmdHistory),o=this.parseCmd(s,i),o||(o=this.parseMidrow(s,i)),o||(o=this.parsePAC(s,i)),o||(o=this.parseBackgroundAttributes(s,i))}else Kf(null,null,u);if(!o&&(a=this.parseChars(s,i),a)){const c=this.currentChannel;c&&c>0?this.channels[c].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!o&&!a&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Va([s,i])+" orig: "+Va([n[r],n[r+1]]))}}parseCmd(e,n){const r=(e===20||e===28||e===21||e===29)&&n>=32&&n<=47,s=(e===23||e===31)&&n>=33&&n<=35;if(!(r||s))return!1;const i=e===20||e===21||e===23?1:2,o=this.channels[i];return e===20||e===21||e===28||e===29?n===32?o.ccRCL():n===33?o.ccBS():n===34?o.ccAOF():n===35?o.ccAON():n===36?o.ccDER():n===37?o.ccRU(2):n===38?o.ccRU(3):n===39?o.ccRU(4):n===40?o.ccFON():n===41?o.ccRDC():n===42?o.ccTR():n===43?o.ccRTD():n===44?o.ccEDM():n===45?o.ccCR():n===46?o.ccENM():n===47&&o.ccEOC():o.ccTO(n-32),this.currentChannel=i,!0}parseMidrow(e,n){let r=0;if((e===17||e===25)&&n>=32&&n<=47){if(e===17?r=1:r=2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[r];return s?(s.ccMIDROW(n),this.logger.log(3,()=>"MIDROW ("+Va([e,n])+")"),!0):!1}return!1}parsePAC(e,n){let r;const s=(e>=17&&e<=23||e>=25&&e<=31)&&n>=64&&n<=127,i=(e===16||e===24)&&n>=64&&n<=95;if(!(s||i))return!1;const o=e<=23?1:2;n>=64&&n<=95?r=o===1?C6[e]:_6[e]:r=o===1?k6[e]:A6[e];const a=this.channels[o];return a?(a.setPAC(this.interpretPAC(r,n)),this.currentChannel=o,!0):!1}interpretPAC(e,n){let r;const s={color:null,italics:!1,indent:null,underline:!1,row:e};return n>95?r=n-96:r=n-64,s.underline=(r&1)===1,r<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(s.italics=!0,s.color="white"):s.indent=Math.floor((r-16)/2)*4,s}parseChars(e,n){let r,s=null,i=null;if(e>=25?(r=2,i=e-8):(r=1,i=e),i>=17&&i<=19){let o;i===17?o=n+80:i===18?o=n+112:o=n+144,this.logger.log(2,()=>"Special char '"+KA(o)+"' in channel "+r),s=[o]}else e>=32&&e<=127&&(s=n===0?[e]:[e,n]);return s&&this.logger.log(3,()=>"Char codes =  "+Va(s).join(",")),s}parseBackgroundAttributes(e,n){const r=(e===16||e===24)&&n>=32&&n<=47,s=(e===23||e===31)&&n>=45&&n<=47;if(!(r||s))return!1;let i;const o={};e===16||e===24?(i=Math.floor((n-32)/2),o.background=I6[i],n%2===1&&(o.background=o.background+"_semi")):n===45?o.background="transparent":(o.foreground="black",n===47&&(o.underline=!0));const a=e<=23?1:2;return this.channels[a].setBkgData(o),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const n=this.channels[e];n&&n.reset()}Kf(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let n=0;n<this.channels.length;n++){const r=this.channels[n];r&&r.cueSplitAtTime(e)}}}function Kf(t,e,n){n.a=t,n.b=e}function D6(t,e,n){return n.a===t&&n.b===e}function O6(){return{a:null,b:null}}var _b=function(){if(wp!=null&&wp.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function n(a,u){if(typeof u!="string"||!Array.isArray(a))return!1;const l=u.toLowerCase();return~a.indexOf(l)?l:!1}function r(a){return n(t,a)}function s(a){return n(e,a)}function i(a,...u){let l=1;for(;l<arguments.length;l++){const c=arguments[l];for(const d in c)a[d]=c[d]}return a}function o(a,u,l){const c=this,d={enumerable:!0};c.hasBeenReset=!1;let f="",h=!1,p=a,g=u,v=l,y=null,w="",b=!0,S="auto",E="start",x=50,k="middle",A=50,C="middle";Object.defineProperty(c,"id",i({},d,{get:function(){return f},set:function(_){f=""+_}})),Object.defineProperty(c,"pauseOnExit",i({},d,{get:function(){return h},set:function(_){h=!!_}})),Object.defineProperty(c,"startTime",i({},d,{get:function(){return p},set:function(_){if(typeof _!="number")throw new TypeError("Start time must be set to a number.");p=_,this.hasBeenReset=!0}})),Object.defineProperty(c,"endTime",i({},d,{get:function(){return g},set:function(_){if(typeof _!="number")throw new TypeError("End time must be set to a number.");g=_,this.hasBeenReset=!0}})),Object.defineProperty(c,"text",i({},d,{get:function(){return v},set:function(_){v=""+_,this.hasBeenReset=!0}})),Object.defineProperty(c,"region",i({},d,{get:function(){return y},set:function(_){y=_,this.hasBeenReset=!0}})),Object.defineProperty(c,"vertical",i({},d,{get:function(){return w},set:function(_){const O=r(_);if(O===!1)throw new SyntaxError("An invalid or illegal string was specified.");w=O,this.hasBeenReset=!0}})),Object.defineProperty(c,"snapToLines",i({},d,{get:function(){return b},set:function(_){b=!!_,this.hasBeenReset=!0}})),Object.defineProperty(c,"line",i({},d,{get:function(){return S},set:function(_){if(typeof _!="number"&&_!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");S=_,this.hasBeenReset=!0}})),Object.defineProperty(c,"lineAlign",i({},d,{get:function(){return E},set:function(_){const O=s(_);if(!O)throw new SyntaxError("An invalid or illegal string was specified.");E=O,this.hasBeenReset=!0}})),Object.defineProperty(c,"position",i({},d,{get:function(){return x},set:function(_){if(_<0||_>100)throw new Error("Position must be between 0 and 100.");x=_,this.hasBeenReset=!0}})),Object.defineProperty(c,"positionAlign",i({},d,{get:function(){return k},set:function(_){const O=s(_);if(!O)throw new SyntaxError("An invalid or illegal string was specified.");k=O,this.hasBeenReset=!0}})),Object.defineProperty(c,"size",i({},d,{get:function(){return A},set:function(_){if(_<0||_>100)throw new Error("Size must be between 0 and 100.");A=_,this.hasBeenReset=!0}})),Object.defineProperty(c,"align",i({},d,{get:function(){return C},set:function(_){const O=s(_);if(!O)throw new SyntaxError("An invalid or illegal string was specified.");C=O,this.hasBeenReset=!0}})),c.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o}();class $6{decode(e,n){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function WA(t){function e(r,s,i,o){return(r|0)*3600+(s|0)*60+(i|0)+parseFloat(o||0)}const n=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?e(n[2],n[3],0,n[4]):e(n[1],n[2],n[3],n[4]):null}class M6{constructor(){this.values=Object.create(null)}set(e,n){!this.get(e)&&n!==""&&(this.values[e]=n)}get(e,n,r){return r?this.has(e)?this.values[e]:n[r]:this.has(e)?this.values[e]:n}has(e){return e in this.values}alt(e,n,r){for(let s=0;s<r.length;++s)if(n===r[s]){this.set(e,n);break}}integer(e,n){/^-?\d+$/.test(n)&&this.set(e,parseInt(n,10))}percent(e,n){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(n)){const r=parseFloat(n);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function GA(t,e,n,r){const s=r?t.split(r):[t];for(const i in s){if(typeof s[i]!="string")continue;const o=s[i].split(n);if(o.length!==2)continue;const a=o[0],u=o[1];e(a,u)}}const x0=new _b(0,0,""),zf=x0.align==="middle"?"middle":"center";function N6(t,e,n){const r=t;function s(){const a=WA(t);if(a===null)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),a}function i(a,u){const l=new M6;GA(a,function(f,h){let p;switch(f){case"region":for(let g=n.length-1;g>=0;g--)if(n[g].id===h){l.set(f,n[g].region);break}break;case"vertical":l.alt(f,h,["rl","lr"]);break;case"line":p=h.split(","),l.integer(f,p[0]),l.percent(f,p[0])&&l.set("snapToLines",!1),l.alt(f,p[0],["auto"]),p.length===2&&l.alt("lineAlign",p[1],["start",zf,"end"]);break;case"position":p=h.split(","),l.percent(f,p[0]),p.length===2&&l.alt("positionAlign",p[1],["start",zf,"end","line-left","line-right","auto"]);break;case"size":l.percent(f,h);break;case"align":l.alt(f,h,["start",zf,"end","left","right"]);break}},/:/,/\s/),u.region=l.get("region",null),u.vertical=l.get("vertical","");let c=l.get("line","auto");c==="auto"&&x0.line===-1&&(c=-1),u.line=c,u.lineAlign=l.get("lineAlign","start"),u.snapToLines=l.get("snapToLines",!0),u.size=l.get("size",100),u.align=l.get("align",zf);let d=l.get("position","auto");d==="auto"&&x0.position===50&&(d=u.align==="start"||u.align==="left"?0:u.align==="end"||u.align==="right"?100:50),u.position=d}function o(){t=t.replace(/^\s+/,"")}if(o(),e.startTime=s(),o(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);t=t.slice(3),o(),e.endTime=s(),o(),i(t,e)}function qA(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class F6{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new $6,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));function r(){let i=n.buffer,o=0;for(i=qA(i);o<i.length&&i[o]!=="\r"&&i[o]!==`
`;)++o;const a=i.slice(0,o);return i[o]==="\r"&&++o,i[o]===`
`&&++o,n.buffer=i.slice(o),a}function s(i){GA(i,function(o,a){},/:/)}try{let i="";if(n.state==="INITIAL"){if(!/\r\n|\n/.test(n.buffer))return this;i=r();const a=i.match(/^()?WEBVTT([ \t].*)?$/);if(!(a!=null&&a[0]))throw new Error("Malformed WebVTT signature.");n.state="HEADER"}let o=!1;for(;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:i=r(),n.state){case"HEADER":/:/.test(i)?s(i):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;if(n.cue=new _b(0,0,""),n.state="CUE",i.indexOf("-->")===-1){n.cue.id=i;continue}case"CUE":if(!n.cue){n.state="BADCUE";continue}try{N6(i,n.cue,n.regionList)}catch{n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":{const a=i.indexOf("-->")!==-1;if(!i||a&&(o=!0)){n.oncue&&n.cue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}if(n.cue===null)continue;n.cue.text&&(n.cue.text+=`
`),n.cue.text+=i}continue;case"BADCUE":i||(n.state="ID")}}}catch{n.state==="CUETEXT"&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state=n.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(n){e.onparsingerror&&e.onparsingerror(n)}return e.onflush&&e.onflush(),this}}const B6=/\r\n|\n\r|\n|\r/g,av=function(e,n,r=0){return e.slice(r,r+n.length)===n},V6=function(e){let n=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),s=parseInt(e.slice(-9,-7)),i=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Ut(n)||!Ut(r)||!Ut(s)||!Ut(i))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return n+=1e3*r,n+=60*1e3*s,n+=60*60*1e3*i,n};function Ab(t,e,n){return Hc(t.toString())+Hc(e.toString())+Hc(n)}const U6=function(e,n,r){let s=e[n],i=e[s.prevCC];if(!i||!i.new&&s.new){e.ccOffset=e.presentationOffset=s.start,s.new=!1;return}for(;(o=i)!=null&&o.new;){var o;e.ccOffset+=s.start-i.start,s.new=!1,s=i,i=e[s.prevCC]}e.presentationOffset=r};function H6(t,e,n,r,s,i,o){const a=new F6,u=Hs(new Uint8Array(t)).trim().replace(B6,`
`).split(`
`),l=[],c=e?rB(e.baseTime,e.timescale):0;let d="00:00.000",f=0,h=0,p,g=!0;a.oncue=function(v){const y=n[r];let w=n.ccOffset;const b=(f-c)/9e4;if(y!=null&&y.new&&(h!==void 0?w=n.ccOffset=y.start:U6(n,r,b)),b){if(!e){p=new Error("Missing initPTS for VTT MPEGTS");return}w=b-n.presentationOffset}const S=v.endTime-v.startTime,E=Ys((v.startTime+w-h)*9e4,s*9e4)/9e4;v.startTime=Math.max(E,0),v.endTime=Math.max(E+S,0);const x=v.text.trim();v.text=decodeURIComponent(encodeURIComponent(x)),v.id||(v.id=Ab(v.startTime,v.endTime,x)),v.endTime>0&&l.push(v)},a.onparsingerror=function(v){p=v},a.onflush=function(){if(p){o(p);return}i(l)},u.forEach(v=>{if(g)if(av(v,"X-TIMESTAMP-MAP=")){g=!1,v.slice(16).split(",").forEach(y=>{av(y,"LOCAL:")?d=y.slice(6):av(y,"MPEGTS:")&&(f=parseInt(y.slice(7)))});try{h=V6(d)/1e3}catch(y){p=y}return}else v===""&&(g=!1);a.parse(v+`
`)}),a.flush()}const lv="stpp.ttml.im1t",YA=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,XA=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,j6={left:"start",center:"center",right:"end",start:"start",end:"end"};function ux(t,e,n,r){const s=vn(new Uint8Array(t),["mdat"]);if(s.length===0){r(new Error("Could not parse IMSC1 mdat"));return}const i=s.map(a=>Hs(a)),o=nB(e.baseTime,1,e.timescale);try{i.forEach(a=>n(K6(a,o)))}catch(a){r(a)}}function K6(t,e){const s=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!s)throw new Error("Invalid ttml");const i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(i).reduce((d,f)=>(d[f]=s.getAttribute(`ttp:${f}`)||i[f],d),{}),a=s.getAttribute("xml:space")!=="preserve",u=cx(uv(s,"styling","style")),l=cx(uv(s,"layout","region")),c=uv(s,"body","[begin]");return[].map.call(c,d=>{const f=QA(d,a);if(!f||!d.hasAttribute("begin"))return null;const h=dv(d.getAttribute("begin"),o),p=dv(d.getAttribute("dur"),o);let g=dv(d.getAttribute("end"),o);if(h===null)throw dx(d);if(g===null){if(p===null)throw dx(d);g=h+p}const v=new _b(h-e,g-e,f);v.id=Ab(v.startTime,v.endTime,v.text);const y=l[d.getAttribute("region")],w=u[d.getAttribute("style")],b=z6(y,w,u),{textAlign:S}=b;if(S){const E=j6[S];E&&(v.lineAlign=E),v.align=S}return Kn(v,b),v}).filter(d=>d!==null)}function uv(t,e,n){const r=t.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function cx(t){return t.reduce((e,n)=>{const r=n.getAttribute("xml:id");return r&&(e[r]=n),e},{})}function QA(t,e){return[].slice.call(t.childNodes).reduce((n,r,s)=>{var i;return r.nodeName==="br"&&s?n+`
`:(i=r.childNodes)!=null&&i.length?QA(r,e):e?n+r.textContent.trim().replace(/\s+/g," "):n+r.textContent},"")}function z6(t,e,n){const r="http://www.w3.org/ns/ttml#styling";let s=null;const i=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return o&&n.hasOwnProperty(o)&&(s=n[o]),i.reduce((a,u)=>{const l=cv(e,r,u)||cv(t,r,u)||cv(s,r,u);return l&&(a[u]=l),a},{})}function cv(t,e,n){return t&&t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null}function dx(t){return new Error(`Could not parse ttml timestamp ${t}`)}function dv(t,e){if(!t)return null;let n=WA(t);return n===null&&(YA.test(t)?n=W6(t,e):XA.test(t)&&(n=G6(t,e))),n}function W6(t,e){const n=YA.exec(t),r=(n[4]|0)+(n[5]|0)/e.subFrameRate;return(n[1]|0)*3600+(n[2]|0)*60+(n[3]|0)+r/e.frameRate}function G6(t,e){const n=XA.exec(t),r=Number(n[1]);switch(n[2]){case"h":return r*3600;case"m":return r*60;case"ms":return r*1e3;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}class Wf{constructor(e,n){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=n}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,n,r){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=n,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class q6{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=hx(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(G.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(G.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(G.MANIFEST_LOADING,this.onManifestLoading,this),e.on(G.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(G.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(G.FRAG_LOADING,this.onFragLoading,this),e.on(G.FRAG_LOADED,this.onFragLoaded,this),e.on(G.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(G.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(G.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(G.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(G.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(G.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(G.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(G.MANIFEST_LOADING,this.onManifestLoading,this),e.off(G.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(G.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(G.FRAG_LOADING,this.onFragLoading,this),e.off(G.FRAG_LOADED,this.onFragLoaded,this),e.off(G.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(G.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(G.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(G.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(G.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Wf(this,"textTrack1"),n=new Wf(this,"textTrack2"),r=new Wf(this,"textTrack3"),s=new Wf(this,"textTrack4");this.cea608Parser1=new lx(1,e,n),this.cea608Parser2=new lx(3,r,s)}addCues(e,n,r,s,i){let o=!1;for(let a=i.length;a--;){const u=i[a],l=Y6(u[0],u[1],n,r);if(l>=0&&(u[0]=Math.min(u[0],n),u[1]=Math.max(u[1],r),o=!0,l/(r-n)>.5))return}if(o||i.push([n,r]),this.config.renderTextTracksNatively){const a=this.captionsTracks[e];this.Cues.newCue(a,n,r,s)}else{const a=this.Cues.newCue(null,n,r,s);this.hls.trigger(G.CUES_PARSED,{type:"captions",cues:a,track:e})}}onInitPtsFound(e,{frag:n,id:r,initPTS:s,timescale:i}){const{unparsedVttFrags:o}=this;r===qt.MAIN&&(this.initPTS[n.cc]={baseTime:s,timescale:i}),o.length&&(this.unparsedVttFrags=[],o.forEach(a=>{this.onFragLoaded(G.FRAG_LOADED,a)}))}getExistingTrack(e,n){const{media:r}=this;if(r)for(let s=0;s<r.textTracks.length;s++){const i=r.textTracks[s];if(fx(i,{name:e,lang:n,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:n,captionsTracks:r,media:s}=this,{label:i,languageCode:o}=n[e],a=this.getExistingTrack(i,o);if(a)r[e]=a,Wl(r[e]),UA(r[e],s);else{const u=this.createTextTrack("captions",i,o);u&&(u[e]=!0,r[e]=u)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const n=this.captionsProperties[e];if(!n)return;const r=n.label,s={_id:e,label:r,kind:"captions",default:n.media?!!n.media.default:!1,closedCaptions:n.media};this.nonNativeCaptionsTracks[e]=s,this.hls.trigger(G.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}createTextTrack(e,n,r){const s=this.media;if(s)return s.addTextTrack(e,n,r)}onMediaAttaching(e,n){this.media=n.media,n.mediaSource||this._cleanTracks()}onMediaDetaching(e,n){const r=!!n.transferMedia;if(this.media=null,r)return;const{captionsTracks:s}=this;Object.keys(s).forEach(i=>{Wl(s[i]),delete s[i]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=hx(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const n=e.textTracks;if(n)for(let r=0;r<n.length;r++)Wl(n[r])}onSubtitleTracksUpdated(e,n){const r=n.subtitleTracks||[],s=r.some(i=>i.textCodec===lv);if(this.config.enableWebVTT||s&&this.config.enableIMSC1){if(DA(this.tracks,r)){this.tracks=r;return}if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const o=this.media,a=o?Ch(o.textTracks):null;if(this.tracks.forEach((u,l)=>{let c;if(a){let d=null;for(let f=0;f<a.length;f++)if(a[f]&&fx(a[f],u)){d=a[f],a[f]=null;break}d&&(c=d)}if(c)Wl(c);else{const d=ZA(u);c=this.createTextTrack(d,u.name,u.lang),c&&(c.mode="disabled")}c&&this.textTracks.push(c)}),a!=null&&a.length){const u=a.filter(l=>l!==null).map(l=>l.label);u.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${u.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const o=this.tracks.map(a=>({label:a.name,kind:a.type.toLowerCase(),default:a.default,subtitleTrack:a}));this.hls.trigger(G.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:o})}}}onManifestLoaded(e,n){this.config.enableCEA708Captions&&n.captions&&n.captions.forEach(r=>{const s=/(?:CC|SERVICE)([1-4])/.exec(r.instreamId);if(!s)return;const i=`textTrack${s[1]}`,o=this.captionsProperties[i];o&&(o.label=r.name,r.lang&&(o.languageCode=r.lang),o.media=r)})}closedCaptionsForLevel(e){const n=this.hls.levels[e.level];return n==null?void 0:n.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,n){if(this.enabled&&n.frag.type===qt.MAIN){var r,s;const{cea608Parser1:i,cea608Parser2:o,lastSn:a}=this,{cc:u,sn:l}=n.frag,c=(r=(s=n.part)==null?void 0:s.index)!=null?r:-1;i&&o&&(l!==a+1||l===a&&c!==this.lastPartIndex+1||u!==this.lastCc)&&(i.reset(),o.reset()),this.lastCc=u,this.lastSn=l,this.lastPartIndex=c}}onFragLoaded(e,n){const{frag:r,payload:s}=n;if(r.type===qt.SUBTITLE)if(s.byteLength){const i=r.decryptdata,o="stats"in n;if(i==null||!i.encrypted||o){const a=this.tracks[r.level],u=this.vttCCs;u[r.cc]||(u[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),a&&a.textCodec===lv?this._parseIMSC1(r,s):this._parseVTTs(n)}}else this.hls.trigger(G.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,n){const r=this.hls;ux(n,this.initPTS[e.cc],s=>{this._appendCues(s,e.level),r.trigger(G.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},s=>{r.logger.log(`Failed to parse IMSC1: ${s}`),r.trigger(G.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:s})})}_parseVTTs(e){var n;const{frag:r,payload:s}=e,{initPTS:i,unparsedVttFrags:o}=this,a=i.length-1;if(!i[r.cc]&&a===-1){o.push(e);return}const u=this.hls,l=(n=r.initSegment)!=null&&n.data?ri(r.initSegment.data,new Uint8Array(s)).buffer:s;H6(l,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,c=>{this._appendCues(c,r.level),u.trigger(G.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},c=>{const d=c.message==="Missing initPTS for VTT MPEGTS";d?o.push(e):this._fallbackToIMSC1(r,s),u.logger.log(`Failed to parse VTT cue: ${c}`),!(d&&a>r.cc)&&u.trigger(G.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:c})})}_fallbackToIMSC1(e,n){const r=this.tracks[e.level];r.textCodec||ux(n,this.initPTS[e.cc],()=>{r.textCodec=lv,this._parseIMSC1(e,n)},()=>{r.textCodec="wvtt"})}_appendCues(e,n){const r=this.hls;if(this.config.renderTextTracksNatively){const s=this.textTracks[n];if(!s||s.mode==="disabled")return;e.forEach(i=>HA(s,i))}else{const s=this.tracks[n];if(!s)return;const i=s.default?"default":"subtitles"+n;r.trigger(G.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,n){const{frag:r}=n;r.type===qt.SUBTITLE&&this.onFragLoaded(G.FRAG_LOADED,n)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,n){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:r,samples:s}=n;if(!(r.type===qt.MAIN&&this.closedCaptionsForLevel(r)==="NONE"))for(let i=0;i<s.length;i++){const o=s[i].bytes;if(o){this.cea608Parser1||this.initCea608Parsers();const a=this.extractCea608Data(o);this.cea608Parser1.addData(s[i].pts,a[0]),this.cea608Parser2.addData(s[i].pts,a[1])}}}onBufferFlushing(e,{startOffset:n,endOffset:r,endOffsetSubtitles:s,type:i}){const{media:o}=this;if(!(!o||o.currentTime<r)){if(!i||i==="video"){const{captionsTracks:a}=this;Object.keys(a).forEach(u=>E0(a[u],n,r))}if(this.config.renderTextTracksNatively&&n===0&&s!==void 0){const{textTracks:a}=this;Object.keys(a).forEach(u=>E0(a[u],n,s))}}}extractCea608Data(e){const n=[[],[]],r=e[0]&31;let s=2;for(let i=0;i<r;i++){const o=e[s++],a=127&e[s++],u=127&e[s++];if(a===0&&u===0)continue;if((4&o)!==0){const c=3&o;(c===0||c===1)&&(n[c].push(a),n[c].push(u))}}return n}}function ZA(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function fx(t,e){return!!t&&t.kind===ZA(e)&&b0(e,t)}function Y6(t,e,n,r){return Math.min(e,r)-Math.max(t,n)}function hx(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const X6=/\s/,Q6={newCue(t,e,n,r){const s=[];let i,o,a,u,l;const c=self.VTTCue||self.TextTrackCue;for(let f=0;f<r.rows.length;f++)if(i=r.rows[f],a=!0,u=0,l="",!i.isEmpty()){var d;for(let g=0;g<i.chars.length;g++)X6.test(i.chars[g].uchar)&&a?u++:(l+=i.chars[g].uchar,a=!1);i.cueStartTime=e,e===n&&(n+=1e-4),u>=16?u--:u++;const h=qA(l.trim()),p=Ab(e,n,h);t!=null&&(d=t.cues)!=null&&d.getCueById(p)||(o=new c(e,n,h),o.id=p,o.line=f+1,o.align="left",o.position=10+Math.min(80,Math.floor(u*8/32)*10),s.push(o))}return t&&s.length&&(s.sort((f,h)=>f.line==="auto"||h.line==="auto"?0:f.line>8&&h.line>8?h.line-f.line:f.line-h.line),s.forEach(f=>HA(t,f))),s}};function Z6(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const J6=/(\d+)-(\d+)\/(\d+)/;class px{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||r5,this.controller=new self.AbortController,this.stats=new ub}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,n,r){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const i=e5(e,this.controller.signal),o=e.responseType==="arraybuffer",a=o?"byteLength":"length",{maxTimeToFirstByteMs:u,maxLoadTimeMs:l}=n.loadPolicy;this.context=e,this.config=n,this.callbacks=r,this.request=this.fetchSetup(e,i),self.clearTimeout(this.requestTimeout),n.timeout=u&&Ut(u)?u:l,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))},n.timeout),(pd(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(d=>{var f;this.response=this.loader=d;const h=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),n.timeout=l,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))},l-(h-s.loading.start)),!d.ok){const{status:g,statusText:v}=d;throw new s5(v||"fetch, bad network response",g,d)}s.loading.first=h,s.total=n5(d.headers)||s.total;const p=(f=this.callbacks)==null?void 0:f.onProgress;return p&&Ut(n.highWaterMark)?this.loadProgressively(d,s,e,n.highWaterMark,p):o?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{var f,h;const p=this.response;if(!p)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const g=d[a];g&&(s.loaded=s.total=g);const v={url:p.url,data:d,code:p.status},y=(f=this.callbacks)==null?void 0:f.onProgress;y&&!Ut(n.highWaterMark)&&y(s,e,d,p),(h=this.callbacks)==null||h.onSuccess(v,s,e,p)}).catch(d=>{var f;if(self.clearTimeout(this.requestTimeout),s.aborted)return;const h=d&&d.code||0,p=d?d.message:null;(f=this.callbacks)==null||f.onError({code:h,text:p},e,d?d.details:null,s)})}getCacheAge(){let e=null;if(this.response){const n=this.response.headers.get("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,n,r,s=0,i){const o=new hA,a=e.body.getReader(),u=()=>a.read().then(l=>{if(l.done)return o.dataLength&&i(n,r,o.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const c=l.value,d=c.length;return n.loaded+=d,d<s||o.dataLength?(o.push(c),o.dataLength>=s&&i(n,r,o.flush().buffer,e)):i(n,r,c.buffer,e),u()}).catch(()=>Promise.reject());return u()}}function e5(t,e){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Kn({},t.headers))};return t.rangeEnd&&n.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),n}function t5(t){const e=J6.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function n5(t){const e=t.get("Content-Range");if(e){const r=t5(e);if(Ut(r))return r}const n=t.get("Content-Length");if(n)return parseInt(n)}function r5(t,e){return new self.Request(t.url,e)}class s5 extends Error{constructor(e,n,r){super(e),this.code=void 0,this.details=void 0,this.code=n,this.details=r}}const i5=/^age:\s*[\d.]+\s*$/im;class JA{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new ub,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,n,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=n,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:n}=this;if(!e||!n)return;const r=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0,s.aborted=!1;const i=this.xhrSetup;i?Promise.resolve().then(()=>{if(!(this.loader!==r||this.stats.aborted))return i(r,n.url)}).catch(o=>{if(!(this.loader!==r||this.stats.aborted))return r.open("GET",n.url,!0),i(r,n.url)}).then(()=>{this.loader!==r||this.stats.aborted||this.openAndSendXhr(r,n,e)}).catch(o=>{var a;(a=this.callbacks)==null||a.onError({code:r.status,text:o.message},n,r,s)}):this.openAndSendXhr(r,n,e)}openAndSendXhr(e,n,r){e.readyState||e.open("GET",n.url,!0);const s=n.headers,{maxTimeToFirstByteMs:i,maxLoadTimeMs:o}=r.loadPolicy;if(s)for(const a in s)e.setRequestHeader(a,s[a]);n.rangeEnd&&e.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=n.responseType,self.clearTimeout(this.requestTimeout),r.timeout=i&&Ut(i)?i:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:n,stats:r}=this;if(!e||!n)return;const s=n.readyState,i=this.config;if(!r.aborted&&s>=2&&(r.loading.first===0&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),s===4)){self.clearTimeout(this.requestTimeout),n.onreadystatechange=null,n.onprogress=null;const l=n.status,c=n.responseType==="text"?n.responseText:null;if(l>=200&&l<300){const p=c??n.response;if(p!=null){var o,a;r.loading.end=Math.max(self.performance.now(),r.loading.first);const g=n.responseType==="arraybuffer"?p.byteLength:p.length;r.loaded=r.total=g,r.bwEstimate=r.total*8e3/(r.loading.end-r.loading.first);const v=(o=this.callbacks)==null?void 0:o.onProgress;v&&v(r,e,p,n);const y={url:n.responseURL,data:p,code:l};(a=this.callbacks)==null||a.onSuccess(y,r,e,n);return}}const d=i.loadPolicy.errorRetry,f=r.retry,h={url:e.url,data:void 0,code:l};if(Sp(d,f,!1,h))this.retry(d);else{var u;Nn.error(`${l} while loading ${e.url}`),(u=this.callbacks)==null||u.onError({code:l,text:n.statusText},e,n,r)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,n=this.stats.retry;if(Sp(e,n,!0))this.retry(e);else{var r;Nn.warn(`timeout while loading ${(r=this.context)==null?void 0:r.url}`);const s=this.callbacks;s&&(this.abortInternal(),s.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:n,stats:r}=this;this.retryDelay=db(e,r.retry),r.retry++,Nn.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${n==null?void 0:n.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total)}getCacheAge(){let e=null;if(this.loader&&i5.test(this.loader.getAllResponseHeaders())){const n=this.loader.getResponseHeader("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const o5={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},a5=Hn(Hn({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:JA,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:R4,bufferController:yB,capLevelController:Cb,errorController:$4,fpsController:c6,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:nA,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:o5},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},l5()),{},{subtitleStreamController:E6,subtitleTrackController:h6,timelineController:q6,audioStreamController:pB,audioTrackController:mB,emeController:nu,cmcdController:a6,contentSteeringController:u6,interstitialsController:w6});function l5(){return{cueHandler:Q6,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function u5(t,e,n){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=T0(t),s=["manifest","level","frag"],i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return s.forEach(o=>{const a=`${o==="level"?"playlist":o}LoadPolicy`,u=e[a]===void 0,l=[];i.forEach(c=>{const d=`${o}Loading${c}`,f=e[d];if(f!==void 0&&u){l.push(d);const h=r[a].default;switch(e[a]={default:h},c){case"TimeOut":h.maxLoadTimeMs=f,h.maxTimeToFirstByteMs=f;break;case"MaxRetry":h.errorRetry.maxNumRetry=f,h.timeoutRetry.maxNumRetry=f;break;case"RetryDelay":h.errorRetry.retryDelayMs=f,h.timeoutRetry.retryDelayMs=f;break;case"MaxRetryTimeout":h.errorRetry.maxRetryDelayMs=f,h.timeoutRetry.maxRetryDelayMs=f;break}}}),l.length&&n.warn(`hls.js config: "${l.join('", "')}" setting(s) are deprecated, use "${a}": ${rr(e[a])}`)}),Hn(Hn({},r),e)}function T0(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(T0):Object.keys(t).reduce((e,n)=>(e[n]=T0(t[n]),e),{}):t}function c5(t,e){const n=t.loader;n!==px&&n!==JA?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):Z6()&&(t.loader=px,t.progressive=!0,t.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const kh=2,d5=.1,f5=.05,h5=100;class p5 extends J2{constructor(e,n){super("gap-controller",e.logger),this.hls=null,this.fragmentTracker=null,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var r;(r=this.media)!=null&&r.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var r;this.ended=((r=this.media)==null?void 0:r.currentTime)||1,this.hls.trigger(G.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=n,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(G.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(G.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(G.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(G.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(G.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(G.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,n){this.setInterval(h5),this.mediaSource=n.mediaSource;const r=this.media=n.media;Fs(r,"playing",this.onMediaPlaying),Fs(r,"waiting",this.onMediaWaiting),Fs(r,"ended",this.onMediaEnded)}onMediaDetaching(e,n){this.clearInterval();const{media:r}=this;r&&(Zs(r,"playing",this.onMediaPlaying),Zs(r,"waiting",this.onMediaWaiting),Zs(r,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,n){this.buffered=n.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const n=this.media.currentTime;this.poll(n,this.lastCurrentTime),this.lastCurrentTime=n}poll(e,n){var r,s;const i=(r=this.hls)==null?void 0:r.config;if(!i)return;const o=this.media;if(!o)return;const{seeking:a}=o,u=this.seeking&&!a,l=!this.seeking&&a,c=o.paused&&!a||o.ended||o.playbackRate===0;if(this.seeking=a,e!==n){n&&(this.ended=0),this.moved=!0,a||(this.nudgeRetry=0,i.nudgeOnVideoHole&&!c&&e>n&&this.nudgeOnVideoHole(e,n)),this.waiting===0&&this.stallResolved(e);return}if(l||u){u&&this.stallResolved(e);return}if(c){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&o.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(G.MEDIA_ENDED,{stalled:!1}));return}if(!pn.getBuffered(o).length){this.nudgeRetry=0;return}const d=pn.bufferInfo(o,e,0),f=d.nextStart||0,h=this.fragmentTracker;if(a&&h&&this.hls){const x=mx(this.hls.inFlightFragments,e),k=d.len>kh,A=!f||x||f-e>kh&&!h.getPartialFragment(e);if(k||A)return;this.moved=!1}const p=(s=this.hls)==null?void 0:s.latestLevelDetails;if(!this.moved&&this.stalled!==null&&h){if(!(d.len>0)&&!f)return;const k=Math.max(f,d.start||0)-e,C=!!(p!=null&&p.live)?p.targetduration*2:kh,_=h.getPartialFragment(e);if(k>0&&(k<=C||_)){o.paused||this._trySkipBufferHole(_);return}}const g=i.detectStallWithCurrentTimeMs,v=self.performance.now(),y=this.waiting;let w=this.stalled;if(w===null)if(y>0&&v-y<g)w=this.stalled=y;else{this.stalled=v;return}const b=v-w;if(!a&&(b>=g||y)&&this.hls){var S;if(((S=this.mediaSource)==null?void 0:S.readyState)==="ended"&&!(p!=null&&p.live)&&Math.abs(e-((p==null?void 0:p.edge)||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(G.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(d),!this.media||!this.hls)return}const E=pn.bufferInfo(o,e,i.maxBufferHole);this._tryFixBufferStall(E,b,e)}stallResolved(e){const n=this.stalled;if(n&&this.hls&&(this.stalled=null,this.stallReported)){const r=self.performance.now()-n;this.log(`playback not stuck anymore @${e}, after ${Math.round(r)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(G.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,n){var r;const s=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(r=this.buffered.audio)!=null&&r.length&&s&&s.length>1&&e>s.end(0)){const i=pn.bufferedInfo(pn.timeRangesToArray(this.buffered.audio),e,0);if(i.len>1&&n>=i.start){const o=pn.timeRangesToArray(s),a=pn.bufferedInfo(o,n,0).bufferedIndex;if(a>-1&&a<o.length-1){const u=pn.bufferedInfo(o,e,0).bufferedIndex,l=o[a].end,c=o[a+1].start;if((u===-1||u>a)&&c-l<1&&e-l<2){const d=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${l} -> ${c} buffered index: ${u}`);this.warn(d.message),this.media.currentTime+=1e-6;const f=this.fragmentTracker.getPartialFragment(e)||void 0,h=pn.bufferInfo(this.media,e,0);this.hls.trigger(G.ERROR,{type:nn.MEDIA_ERROR,details:Ge.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:d,reason:d.message,frag:f,buffer:h.len,bufferInfo:h})}}}}}_tryFixBufferStall(e,n,r){var s,i;const{fragmentTracker:o,media:a}=this,u=(s=this.hls)==null?void 0:s.config;if(!a||!o||!u)return;const l=(i=this.hls)==null?void 0:i.latestLevelDetails,c=o.getPartialFragment(r);if((c||l!=null&&l.live&&r<l.fragmentStart)&&(this._trySkipBufferHole(c)||!this.media))return;const d=e.buffered,f=this.adjacentTraversal(e,r);(d&&d.length>1&&e.len>u.maxBufferHole||e.nextStart&&(e.nextStart-r<u.maxBufferHole||f))&&(n>u.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,n){const r=this.fragmentTracker,s=e.nextStart;if(r&&s){const i=r.getFragAtPos(n,qt.MAIN),o=r.getFragAtPos(s,qt.MAIN);if(i&&o)return o.sn-i.sn<2}return!1}_reportStall(e){const{hls:n,media:r,stallReported:s,stalled:i}=this;if(!s&&i!==null&&r&&n){this.stallReported=!0;const o=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${rr(e)})`);this.warn(o.message),n.trigger(G.ERROR,{type:nn.MEDIA_ERROR,details:Ge.BUFFER_STALLED_ERROR,fatal:!1,error:o,buffer:e.len,bufferInfo:e,stalled:{start:i}})}}_trySkipBufferHole(e){var n;const{fragmentTracker:r,media:s}=this,i=(n=this.hls)==null?void 0:n.config;if(!s||!r||!i)return 0;const o=s.currentTime,a=pn.bufferInfo(s,o,0),u=o<a.start?a.start:a.nextStart;if(u&&this.hls){const c=a.len<=i.maxBufferHole,d=a.len>0&&a.len<1&&s.readyState<3,f=u-o;if(f>0&&(c||d)){if(f>i.maxBufferHole){let p=!1;if(o===0){const g=r.getAppendedFrag(0,qt.MAIN);g&&u<g.end&&(p=!0)}if(!p){const g=e||r.getAppendedFrag(o,qt.MAIN);if(g){var l;if(!((l=this.hls.loadLevelObj)!=null&&l.details)||mx(this.hls.inFlightFragments,u))return 0;let y=!1,w=g.end;for(;w<u;){const b=r.getPartialFragment(w);if(b)w+=b.duration;else{y=!0;break}}if(y)return 0}}}const h=Math.max(u+f5,o+d5);if(this.warn(`skipping hole, adjusting currentTime from ${o} to ${h}`),this.moved=!0,s.currentTime=h,!(e!=null&&e.gap)){const p=new Error(`fragment loaded with buffer holes, seeking from ${o} to ${h}`);this.hls.trigger(G.ERROR,{type:nn.MEDIA_ERROR,details:Ge.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:p,reason:p.message,frag:e||void 0,buffer:a.len,bufferInfo:a})}return h}}return 0}_tryNudgeBuffer(e){const{hls:n,media:r,nudgeRetry:s}=this,i=n==null?void 0:n.config;if(!r||!i)return 0;const o=r.currentTime;if(this.nudgeRetry++,s<i.nudgeMaxRetry){const a=o+(s+1)*i.nudgeOffset,u=new Error(`Nudging 'currentTime' from ${o} to ${a}`);this.warn(u.message),r.currentTime=a,n.trigger(G.ERROR,{type:nn.MEDIA_ERROR,details:Ge.BUFFER_NUDGE_ON_STALL,error:u,fatal:!1,buffer:e.len,bufferInfo:e})}else{const a=new Error(`Playhead still not moving while enough data buffered @${o} after ${i.nudgeMaxRetry} nudges`);this.error(a.message),n.trigger(G.ERROR,{type:nn.MEDIA_ERROR,details:Ge.BUFFER_STALLED_ERROR,error:a,fatal:!0,buffer:e.len,bufferInfo:e})}}}function mx(t,e){const n=gx(t.main);if(n&&n.start<=e)return n;const r=gx(t.audio);return r&&r.start<=e?r:null}function gx(t){if(!t)return null;switch(t.state){case at.IDLE:case at.STOPPED:case at.ENDED:case at.ERROR:return null}return t.frag}const m5=.25;function C0(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function vx(t,e,n,r,s){let i=new t(e,n,"");try{i.value=r,s&&(i.type=s)}catch{i=new t(e,n,rr(s?Hn({type:s},r):r))}return i}const Gf=(()=>{const t=C0();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function g5(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class v5{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(G.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e.on(G.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(G.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(G.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(G.MANIFEST_LOADING,this.onManifestLoading,this),e.on(G.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(G.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(G.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(G.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(G.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(G.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(G.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(G.MANIFEST_LOADING,this.onManifestLoading,this),e.off(G.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(G.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(G.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(G.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}onMediaAttaching(e,n){var r;this.media=n.media,((r=n.overrides)==null?void 0:r.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){const e=this.hls.latestLevelDetails;e&&this.updateDateRangeCues(e)}onMediaDetaching(e,n){this.media=null,!n.transferMedia&&(this.id3Track&&(this.removeCues&&Wl(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const n=this.getID3Track(e.textTracks);return n.mode="hidden",n}getID3Track(e){if(this.media){for(let n=0;n<e.length;n++){const r=e[n];if(r.kind==="metadata"&&r.label==="id3")return UA(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,n){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:r,enableID3MetadataCues:s}}}=this;if(!r&&!s)return;const{samples:i}=n;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=C0();if(o)for(let a=0;a<i.length;a++){const u=i[a].type;if(u===Os.emsg&&!r||!s)continue;const l=SA(i[a].data);if(l){const c=i[a].pts;let d=c+i[a].duration;d>Gf&&(d=Gf),d-c<=0&&(d=c+m5);for(let h=0;h<l.length;h++){const p=l[h];if(!wA(p)){this.updateId3CueEnds(c,u);const g=vx(o,c,d,p,u);g&&this.id3Track.addCue(g)}}}}}updateId3CueEnds(e,n){var r;const s=(r=this.id3Track)==null?void 0:r.cues;if(s)for(let i=s.length;i--;){const o=s[i];o.type===n&&o.startTime<e&&o.endTime===Gf&&(o.endTime=e)}}onBufferFlushing(e,{startOffset:n,endOffset:r,type:s}){const{id3Track:i,hls:o}=this;if(!o)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:u}}=o;if(i&&(a||u)){let l;s==="audio"?l=c=>c.type===Os.audioId3&&u:s==="video"?l=c=>c.type===Os.emsg&&a:l=c=>c.type===Os.audioId3&&u||c.type===Os.emsg&&a,E0(i,n,r,l)}}onLevelUpdated(e,{details:n}){this.updateDateRangeCues(n,!0)}onLevelPtsUpdated(e,n){Math.abs(n.drift)>.01&&this.updateDateRangeCues(n.details)}updateDateRangeCues(e,n){if(!this.media||!e.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{id3Track:r}=this,{dateRanges:s}=e,i=Object.keys(s);let o=this.dateRangeCuesAppended;if(r&&n){var a;if((a=r.cues)!=null&&a.length){const c=Object.keys(o).filter(d=>!i.includes(d));for(let d=c.length;d--;){const f=c[d],h=o[f].cues;delete o[f],Object.keys(h).forEach(p=>{try{const g=h[p];g.removeEventListener("enter",this.onEventCueEnter),r.removeCue(g)}catch{}})}}else o=this.dateRangeCuesAppended={}}const u=e.fragments[e.fragments.length-1];if(i.length===0||!Ut(u==null?void 0:u.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=C0();for(let c=0;c<i.length;c++){const d=i[c],f=s[d],h=f.startTime,p=o[d],g=(p==null?void 0:p.cues)||{};let v=(p==null?void 0:p.durationKnown)||!1,y=Gf;const{duration:w,endDate:b}=f;if(b&&w!==null)y=h+w,v=!0;else if(f.endOnNext&&!v){const E=i.reduce((x,k)=>{if(k!==f.id){const A=s[k];if(A.class===f.class&&A.startDate>f.startDate&&(!x||f.startDate<x.startDate))return A}return x},null);E&&(y=E.startTime,v=!0)}const S=Object.keys(f.attr);for(let E=0;E<S.length;E++){const x=S[E];if(!q4(x))continue;const k=g[x];if(k)v&&!p.durationKnown?k.endTime=y:Math.abs(k.startTime-h)>.01&&(k.startTime=h,k.endTime=y);else if(l){let A=f.attr[x];Y4(x)&&(A=g5(A));const _=vx(l,h,y,{key:x,data:A},Os.dateRange);_&&(_.id=d,this.id3Track.addCue(_),g[x]=_,this.hls.config.interstitialsController&&(x==="X-ASSET-LIST"||x==="X-ASSET-URL")&&_.addEventListener("enter",this.onEventCueEnter))}}o[d]={cues:g,dateRange:f,durationKnown:v}}}}class y5{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:n}=this,r=this.levelDetails;if(!n||!r)return;this.currentTime=n.currentTime;const s=this.computeLatency();if(s===null)return;this._latency=s;const{lowLatencyMode:i,maxLiveSyncPlaybackRate:o}=this.config;if(!i||o===1||!r.live)return;const a=this.targetLatency;if(a===null)return;const u=s-a,l=Math.min(this.maxLatency,a+r.targetduration);if(u<l&&u>.05&&this.forwardBufferLength>1){const d=Math.min(2,Math.max(1,o)),f=Math.round(2/(1+Math.exp(-.75*u-this.edgeStalled))*20)/20,h=Math.min(d,Math.max(1,f));this.changeMediaPlaybackRate(n,h)}else n.playbackRate!==1&&n.playbackRate!==0&&this.changeMediaPlaybackRate(n,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const n=this.levelDetails;return n?e.liveMaxLatencyDurationCount*n.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:n,partHoldBack:r,targetduration:s}=e,{liveSyncDuration:i,liveSyncDurationCount:o,lowLatencyMode:a}=this.config,u=this.hls.userConfig;let l=a&&r||n;(this._targetLatencyUpdated||u.liveSyncDuration||u.liveSyncDurationCount||l===0)&&(l=i!==void 0?i:o*s);const c=s;return l+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,c)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),n=this.targetLatency;if(e===null||n===null)return null;const r=this.levelDetails;if(r===null)return null;const s=r.edge,i=e-n-this.edgeStalled,o=s-r.totalduration,a=s-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(o,i),a)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const n=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-n,0)}get forwardBufferLength(){const{media:e}=this,n=this.levelDetails;if(!e||!n)return 0;const r=e.buffered.length;return(r?e.buffered.end(r-1):n.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(G.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(G.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(G.MANIFEST_LOADING,this.onManifestLoading,this),e.on(G.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(G.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(G.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(G.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(G.MANIFEST_LOADING,this.onManifestLoading,this),e.off(G.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(G.ERROR,this.onError,this))}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:n}){n.advanced&&this.onTimeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,n){var r;n.details===Ge.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(r=this.levelDetails)!=null&&r.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,n){var r,s;e.playbackRate!==n&&((r=this.hls)==null||r.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(s=this.targetLatency)==null?void 0:s.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${n}`),e.playbackRate=n)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class b5 extends Tb{constructor(e,n){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=n,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(G.MANIFEST_LOADING,this.onManifestLoading,this),e.on(G.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(G.LEVEL_LOADED,this.onLevelLoaded,this),e.on(G.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(G.FRAG_BUFFERED,this.onFragBuffered,this),e.on(G.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(G.MANIFEST_LOADING,this.onManifestLoading,this),e.off(G.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(G.LEVEL_LOADED,this.onLevelLoaded,this),e.off(G.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(G.FRAG_BUFFERED,this.onFragBuffered,this),e.off(G.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(n=>{n.loadError=0,n.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,n){this.resetLevels()}onManifestLoaded(e,n){const r=this.hls.config.preferManagedMediaSource,s=[],i={},o={};let a=!1,u=!1,l=!1;n.levels.forEach(c=>{const d=c.attrs;let{audioCodec:f,videoCodec:h}=c;f&&(c.audioCodec=f=gp(f,r)||void 0),h&&(h=c.videoCodec=g4(h));const{width:p,height:g,unknownCodecs:v}=c;let y=v?v.length:0;if(v)for(let _=y;_--;){const O=v[_];this.isAudioSupported(O)?(c.audioCodec=f=f?`${f},${O}`:O,y--,yu.audio[f.substring(0,4)]=2):this.isVideoSupported(O)&&(c.videoCodec=h=h?`${h},${O}`:O,y--,yu.video[h.substring(0,4)]=2)}if(a||(a=!!(p&&g)),u||(u=!!h),l||(l=!!f),y||f&&!this.isAudioSupported(f)||h&&!this.isVideoSupported(h)){this.log(`Some or all CODECS not supported "${d.CODECS}"`);return}const{CODECS:w,"FRAME-RATE":b,"HDCP-LEVEL":S,"PATHWAY-ID":E,RESOLUTION:x,"VIDEO-RANGE":k}=d,C=`${`${E||"."}-`}${c.bitrate}-${x}-${b}-${w}-${k}-${S}`;if(i[C])if(i[C].uri!==c.url&&!c.attrs["PATHWAY-ID"]){const _=o[C]+=1;c.attrs["PATHWAY-ID"]=new Array(_+1).join(".");const O=this.createLevel(c);i[C]=O,s.push(O)}else i[C].addGroupId("audio",d.AUDIO),i[C].addGroupId("text",d.SUBTITLES);else{const _=this.createLevel(c);i[C]=_,o[C]=1,s.push(_)}}),this.filterAndSortMediaOptions(s,n,a,u,l)}createLevel(e){const n=new ud(e),r=e.supplemental;if(r!=null&&r.videoCodec&&!this.isVideoSupported(r.videoCodec)){const s=new Error(`SUPPLEMENTAL-CODECS not supported "${r.videoCodec}"`);this.log(s.message),n.supportedResult=q2(s,[])}return n}isAudioSupported(e){return d0(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return d0(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,n,r,s,i){let o=[],a=[],u=e;if((r||s)&&i&&(u=u.filter(({videoCodec:v,videoRange:y,width:w,height:b})=>(!!v||!!(w&&b))&&w4(y))),u.length===0){Promise.resolve().then(()=>{if(this.hls){let v="no level with compatible codecs found in manifest",y=v;n.levels.length&&(y=`one or more CODECS in variant not supported: ${rr(n.levels.map(b=>b.attrs.CODECS).filter((b,S,E)=>E.indexOf(b)===S))}`,this.warn(y),v+=` (${y})`);const w=new Error(v);this.hls.trigger(G.ERROR,{type:nn.MEDIA_ERROR,details:Ge.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:n.url,error:w,reason:y})}});return}n.audioTracks&&(o=n.audioTracks.filter(v=>!v.audioCodec||this.isAudioSupported(v.audioCodec)),yx(o)),n.subtitles&&(a=n.subtitles,yx(a));const l=u.slice(0);u.sort((v,y)=>{if(v.attrs["HDCP-LEVEL"]!==y.attrs["HDCP-LEVEL"])return(v.attrs["HDCP-LEVEL"]||"")>(y.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&v.height!==y.height)return v.height-y.height;if(v.frameRate!==y.frameRate)return v.frameRate-y.frameRate;if(v.videoRange!==y.videoRange)return vp.indexOf(v.videoRange)-vp.indexOf(y.videoRange);if(v.videoCodec!==y.videoCodec){const w=dE(v.videoCodec),b=dE(y.videoCodec);if(w!==b)return b-w}if(v.uri===y.uri&&v.codecSet!==y.codecSet){const w=mp(v.codecSet),b=mp(y.codecSet);if(w!==b)return b-w}return v.averageBitrate!==y.averageBitrate?v.averageBitrate-y.averageBitrate:0});let c=l[0];if(this.steering&&(u=this.steering.filterParsedLevels(u),u.length!==l.length)){for(let v=0;v<l.length;v++)if(l[v].pathwayId===u[0].pathwayId){c=l[v];break}}this._levels=u;for(let v=0;v<u.length;v++)if(u[v]===c){var d;this._firstLevel=v;const y=c.bitrate,w=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${u.length} level(s) found, first bitrate: ${y}`),((d=this.hls.userConfig)==null?void 0:d.abrEwmaDefaultEstimate)===void 0){const b=Math.min(y,this.hls.config.abrEwmaDefaultEstimateMax);b>w&&w===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=b)}break}const f=i&&!s,h=this.hls.config,p=!!(h.audioStreamController&&h.audioTrackController),g={levels:u,audioTracks:o,subtitleTracks:a,sessionData:n.sessionData,sessionKeys:n.sessionKeys,firstLevel:this._firstLevel,stats:n.stats,audio:i,video:s,altAudio:p&&!f&&o.some(v=>!!v.url)};this.hls.trigger(G.MANIFEST_PARSED,g)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const n=this._levels;if(n.length===0)return;if(e<0||e>=n.length){const c=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(G.ERROR,{type:nn.OTHER_ERROR,details:Ge.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:c,reason:c.message}),d)return;e=Math.min(e,n.length-1)}const r=this.currentLevelIndex,s=this.currentLevel,i=s?s.attrs["PATHWAY-ID"]:void 0,o=n[e],a=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,r===e&&s&&i===a)return;this.log(`Switching to level ${e} (${o.height?o.height+"p ":""}${o.videoRange?o.videoRange+" ":""}${o.codecSet?o.codecSet+" ":""}@${o.bitrate})${a?" with Pathway "+a:""} from level ${r}${i?" with Pathway "+i:""}`);const u={level:e,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(G.LEVEL_SWITCHING,u);const l=o.details;if(!l||l.live){const c=this.switchParams(o.uri,s==null?void 0:s.details,l);this.loadPlaylist(c)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const n=this.steering.pathways(),r=e.filter(s=>n.indexOf(s)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${n}`);return}this.steering.pathwayPriority=r}}onError(e,n){n.fatal||!n.context||n.context.type===An.LEVEL&&n.context.level===this.level&&this.checkRetry(n)}onFragBuffered(e,{frag:n}){if(n!==void 0&&n.type===qt.MAIN){const r=n.elementaryStreams;if(!Object.keys(r).some(i=>!!r[i]))return;const s=this._levels[n.level];s!=null&&s.loadError&&(this.log(`Resetting level error count of ${s.loadError} on frag buffered`),s.loadError=0)}}onLevelLoaded(e,n){var r;const{level:s,details:i}=n,o=n.levelInfo;if(!o){var a;this.warn(`Invalid level index ${s}`),(a=n.deliveryDirectives)!=null&&a.skip&&(i.deltaUpdateFailed=!0);return}if(o===this.currentLevel||n.withoutMultiVariant){o.fragmentError===0&&(o.loadError=0);let u=o.details;u===n.details&&u.advanced&&(u=void 0),this.playlistLoaded(s,n,u)}else(r=n.deliveryDirectives)!=null&&r.skip&&(i.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const r=this.getUrlWithDirectives(e.uri,n),s=this.currentLevelIndex,i=e.attrs["PATHWAY-ID"],o=e.details,a=o==null?void 0:o.age;this.log(`Loading level index ${s}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${i?" Pathway "+i:""}${a&&o.live?" age "+a.toFixed(1)+(o.type&&" "+o.type||""):""} ${r}`),this.hls.trigger(G.LEVEL_LOADING,{url:r,level:s,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:n||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var n;if(this._levels.length===1)return;const r=this._levels.filter((i,o)=>o!==e?!0:(this.steering&&this.steering.removeLevel(i),i===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,i.details&&i.details.fragments.forEach(a=>a.level=-1)),!1));cA(r),this._levels=r,this.currentLevelIndex>-1&&(n=this.currentLevel)!=null&&n.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const s=r.length-1;this._firstLevel=Math.min(this._firstLevel,s),this._startLevel&&(this._startLevel=Math.min(this._startLevel,s)),this.hls.trigger(G.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,{levels:n}){this._levels=n}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:n,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==n&&(this._maxAutoLevel=n,this.hls.trigger(G.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:n,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function yx(t){const e={};t.forEach(n=>{const r=n.groupId||"";n.id=e[r]=e[r]||0,e[r]++})}function eI(){return self.SourceBuffer||self.WebKitSourceBuffer}function tI(){if(!Sa())return!1;const e=eI();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function S5(){if(!tI())return!1;const t=Sa();return typeof(t==null?void 0:t.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>t.isTypeSupported(ld(e,"video")))||["mp4a.40.2","fLaC"].some(e=>t.isTypeSupported(ld(e,"audio"))))}function w5(){var t;const e=eI();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}const E5=100;class x5 extends gb{constructor(e,n,r){super(e,n,r,"stream-controller",qt.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const s=this.media,i=s?s.currentTime:null;if(i===null||!Ut(i)||(this.log(`Media seeked to ${i.toFixed(3)}`),!this.getBufferedFrag(i)))return;const o=this.getFwdBufferInfoAtPos(s,i,qt.MAIN,0);if(o===null||o.len===0){this.warn(`Main forward buffer length at ${i} on "seeked" event ${o?o.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(G.MANIFEST_PARSED,this.onManifestParsed,this),e.on(G.LEVEL_LOADING,this.onLevelLoading,this),e.on(G.LEVEL_LOADED,this.onLevelLoaded,this),e.on(G.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(G.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(G.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(G.BUFFER_CREATED,this.onBufferCreated,this),e.on(G.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(G.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(G.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(G.MANIFEST_PARSED,this.onManifestParsed,this),e.off(G.LEVEL_LOADED,this.onLevelLoaded,this),e.off(G.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(G.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(G.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(G.BUFFER_CREATED,this.onBufferCreated,this),e.off(G.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(G.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(G.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,n){if(this.levels){const{lastCurrentTime:r,hls:s}=this;if(this.stopLoad(),this.setInterval(E5),this.level=-1,!this.startFragRequested){let i=s.startLevel;i===-1&&(s.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=s.firstAutoLevel),s.nextLoadLevel=i,this.level=s.loadLevel,this._hasEnoughToStart=!!n}r>0&&e===-1&&!n&&(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r),this.state=at.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=at.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case at.WAITING_LEVEL:{const{levels:n,level:r}=this,s=n==null?void 0:n[r],i=s==null?void 0:s.details;if(i&&(!i.live||this.levelLastLoaded===s&&!this.waitForLive(s))){if(this.waitForCdnTuneIn(i))break;this.state=at.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=at.IDLE;break}break}case at.FRAG_LOADING_WAITING_RETRY:{var e;const n=self.performance.now(),r=this.retryDate;if(!r||n>=r||(e=this.media)!=null&&e.seeking){const{levels:s,level:i}=this,o=s==null?void 0:s[i];this.resetStartWhenNotLoaded(o||null),this.state=at.IDLE}}break}this.state===at.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:n,levels:r,media:s}=this;if(n===null||!s&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const i=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(r!=null&&r[i]))return;const o=r[i],a=this.getMainFwdBufferInfo();if(a===null)return;const u=this.getLevelDetails();if(u&&this._streamEnded(a,u)){const g={};this.altAudio===2&&(g.type="video"),this.hls.trigger(G.BUFFER_EOS,g),this.state=at.ENDED;return}if(!this.buffering)return;e.loadLevel!==i&&e.manualLevel===-1&&this.log(`Adapting to level ${i} from level ${this.level}`),this.level=e.nextLoadLevel=i;const l=o.details;if(!l||this.state===at.WAITING_LEVEL||this.waitForLive(o)){this.level=i,this.state=at.WAITING_LEVEL,this.startFragRequested=!1;return}const c=a.len,d=this.getMaxBufferLength(o.maxBitrate);if(c>=d)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const f=this.backtrackFragment?this.backtrackFragment.start:a.end;let h=this.getNextFragment(f,l);if(this.couldBacktrack&&!this.fragPrevious&&h&&Pr(h)&&this.fragmentTracker.getState(h)!==xr.OK){var p;const v=((p=this.backtrackFragment)!=null?p:h).sn-l.startSN,y=l.fragments[v-1];y&&h.cc===y.cc&&(h=y,this.fragmentTracker.removeFragment(y))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(h&&this.isLoopLoading(h,f)){if(!h.gap){const v=this.audioOnly&&!this.altAudio?Yn.AUDIO:Yn.VIDEO,y=(v===Yn.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;y&&this.afterBufferFlushed(y,v,qt.MAIN)}h=this.getNextFragmentLoopLoading(h,l,a,qt.MAIN,d)}h&&(h.initSegment&&!h.initSegment.data&&!this.bitrateTest&&(h=h.initSegment),this.loadFragment(h,o,f))}loadFragment(e,n,r){const s=this.fragmentTracker.getState(e);s===xr.NOT_LOADED||s===xr.PARTIAL?Pr(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,n)):super.loadFragment(e,n,r):this._loadInitSegment(e,n):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,qt.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:n}=this;if(n!=null&&n.readyState){let r;const s=this.getAppendedFrag(n.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const i=this.getLevelDetails();if(i!=null&&i.live){const a=this.getMainFwdBufferInfo();if(!a||a.len<i.targetduration*2)return}if(!n.paused&&e){const a=this.hls.nextLoadLevel,u=e[a],l=this.fragLastKbps;l&&this.fragCurrent?r=this.fragCurrent.duration*u.maxBitrate/(1e3*l)+1:r=0}else r=0;const o=this.getBufferedFrag(n.currentTime+r);if(o){const a=this.followingBufferedFrag(o);if(a){this.abortCurrentFrag();const u=a.maxStartPTS?a.maxStartPTS:a.start,l=a.duration,c=Math.max(o.end,u+Math.min(Math.max(l-this.config.maxFragLookUpTolerance,l*(this.couldBacktrack?.5:.125)),l*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case at.KEY_LOADING:case at.FRAG_LOADING:case at.FRAG_LOADING_WAITING_RETRY:case at.PARSING:case at.PARSED:this.state=at.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,n){super.flushMainBuffer(e,n,this.altAudio===2?"video":null)}onMediaAttached(e,n){super.onMediaAttached(e,n);const r=n.media;Fs(r,"playing",this.onMediaPlaying),Fs(r,"seeked",this.onMediaSeeked)}onMediaDetaching(e,n){const{media:r}=this;r&&(Zs(r,"playing",this.onMediaPlaying),Zs(r,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,n),!n.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(G.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,n){let r=!1,s=!1;n.levels.forEach(i=>{const o=i.audioCodec;o&&(r=r||o.indexOf("mp4a.40.2")!==-1,s=s||o.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=r&&s&&!w5(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=n.levels,this.startFragRequested=!1}onLevelLoading(e,n){const{levels:r}=this;if(!r||this.state!==at.IDLE)return;const s=n.levelInfo;(!s.details||s.details.live&&(this.levelLastLoaded!==s||s.details.expired)||this.waitForCdnTuneIn(s.details))&&(this.state=at.WAITING_LEVEL)}onLevelLoaded(e,n){var r;const{levels:s,startFragRequested:i}=this,o=n.level,a=n.details,u=a.totalduration;if(!s){this.warn(`Levels were reset while loading level ${o}`);return}this.log(`Level ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${u}`);const l=n.levelInfo,c=this.fragCurrent;c&&(this.state===at.FRAG_LOADING||this.state===at.FRAG_LOADING_WAITING_RETRY)&&c.level!==n.level&&c.loader&&this.abortCurrentFrag();let d=0;if(a.live||(r=l.details)!=null&&r.live){var f;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;d=this.alignPlaylists(a,l.details,(f=this.levelLastLoaded)==null?void 0:f.details)}if(l.details=a,this.levelLastLoaded=l,i||this.setStartPosition(a,d),this.hls.trigger(G.LEVEL_UPDATED,{details:a,level:o}),this.state===at.WAITING_LEVEL){if(this.waitForCdnTuneIn(a))return;this.state=at.IDLE}i&&a.live&&this.synchronizeToLiveEdge(a),this.tick()}synchronizeToLiveEdge(e){const{config:n,media:r}=this;if(!r)return;const s=this.hls.liveSyncPosition,i=this.getLoadPosition(),o=e.fragmentStart,a=e.edge,u=i>=o-n.maxFragLookUpTolerance&&i<=a;if(s!==null&&r.duration>s&&(i<s||!u)){const c=n.liveMaxLatencyDuration!==void 0?n.liveMaxLatencyDuration:n.liveMaxLatencyDurationCount*e.targetduration;if((!u&&r.readyState<4||i<a-c)&&(this._hasEnoughToStart||(this.nextLoadPosition=s),r.readyState))if(this.warn(`Playback: ${i.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${s.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var l;const d=pn.bufferInfo(r,s,0);if(!(d!=null&&(l=d.buffered)!=null&&l.length)){r.currentTime=s;return}if(d.start<=i){r.currentTime=s;return}const{nextStart:h}=pn.bufferedInfo(d.buffered,i,0);h&&(r.currentTime=h)}else r.currentTime=s}}_handleFragmentLoadProgress(e){var n;const r=e.frag,{part:s,payload:i}=e,{levels:o}=this;if(!o){this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const a=o[r.level];if(!a){this.warn(`Level ${r.level} not found on progress`);return}const u=a.details;if(!u){this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),this.fragmentTracker.removeFragment(r);return}const l=a.videoCodec,c=u.PTSKnown||!u.live,d=(n=r.initSegment)==null?void 0:n.data,f=this._getAudioCodec(a),h=this.transmuxer=this.transmuxer||new PA(this.hls,qt.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=s?s.index:-1,g=p!==-1,v=new hb(r.level,r.sn,r.stats.chunkCount,i.byteLength,p,g),y=this.initPTS[r.cc];h.push(i,d,f,l,r,s,u.totalduration,c,v,y)}onAudioTrackSwitching(e,n){const r=this.hls,s=this.altAudio===2;if(yp(n.url,r))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const o=this.fragCurrent;o&&(this.log("Switching to main audio track, cancel main fragment load"),o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(s){this.fragmentTracker.removeAllFragments(),r.once(G.BUFFER_FLUSHED,()=>{var o;(o=this.hls)==null||o.trigger(G.AUDIO_TRACK_SWITCHED,n)}),r.trigger(G.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}r.trigger(G.AUDIO_TRACK_SWITCHED,n)}}onAudioTrackSwitched(e,n){const r=yp(n.url,this.hls);if(r){const s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=r?2:0,this.tick()}onBufferCreated(e,n){const r=n.tracks;let s,i,o=!1;for(const a in r){const u=r[a];if(u.id==="main"){if(i=a,s=u,a==="video"){const l=r[a];l&&(this.videoBuffer=l.buffer)}}else o=!0}o&&s?(this.log(`Alternate track found, use ${i}.buffered to schedule main fragment loading`),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(e,n){const{frag:r,part:s}=n,i=r.type===qt.MAIN;if(i){if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${s?" p: "+s.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),this.state===at.PARSED&&(this.state=at.IDLE);return}const a=s?s.stats:r.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),Pr(r)&&(this.fragPrevious=r),this.fragBufferedComplete(r,s)}const o=this.media;o&&(!this._hasEnoughToStart&&pn.getBuffered(o).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),i&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,n){var r;if(n.fatal){this.state=at.ERROR;return}switch(n.details){case Ge.FRAG_GAP:case Ge.FRAG_PARSING_ERROR:case Ge.FRAG_DECRYPT_ERROR:case Ge.FRAG_LOAD_ERROR:case Ge.FRAG_LOAD_TIMEOUT:case Ge.KEY_LOAD_ERROR:case Ge.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(qt.MAIN,n);break;case Ge.LEVEL_LOAD_ERROR:case Ge.LEVEL_LOAD_TIMEOUT:case Ge.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===at.WAITING_LEVEL&&((r=n.context)==null?void 0:r.type)===An.LEVEL&&(this.state=at.IDLE);break;case Ge.BUFFER_ADD_CODEC_ERROR:case Ge.BUFFER_APPEND_ERROR:if(n.parent!=="main")return;this.resetLoadingState();break;case Ge.BUFFER_FULL_ERROR:if(n.parent!=="main")return;this.reduceLengthAndFlushBuffer(n)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case Ge.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onFragLoadEmergencyAborted(){this.state=at.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:n}){if(n!==Yn.AUDIO||!this.altAudio){const r=(n===Yn.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;r&&(this.afterBufferFlushed(r,n,qt.MAIN),this.tick())}}onLevelsUpdated(e,n){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=n.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const n=e.currentTime;let r=this.startPosition;if(r>=0&&n<r){if(e.seeking){this.log(`could not seek to ${r}, already seeking at ${n}`);return}const s=this.timelineOffset;s&&r&&(r+=s);const i=this.getLevelDetails(),o=pn.getBuffered(e),a=o.length?o.start(0):0,u=a-r,l=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||u>0&&(u<l||this.loadingParts&&u<2*((i==null?void 0:i.partTarget)||0)))&&(this.log(`adjusting start position by ${u} to match buffer start`),r+=u,this.startPosition=r),n<r&&(this.log(`seek to target start position ${r} from current time ${n} buffer start ${a}`),e.currentTime=r)}}_getAudioCodec(e){let n=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&n&&(this.log("Swapping audio codec"),n.indexOf("mp4a.40.5")!==-1?n="mp4a.40.2":n="mp4a.40.5"),n}_loadBitrateTestFrag(e,n){e.bitrateTest=!0,this._doFragLoad(e,n).then(r=>{const{hls:s}=this,i=r==null?void 0:r.frag;if(!i||this.fragContextChanged(i))return;n.fragmentError=0,this.state=at.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const o=i.stats;o.parsing.start=o.parsing.end=o.buffering.start=o.buffering.end=self.performance.now(),s.trigger(G.FRAG_LOADED,r),i.bitrateTest=!1})}_handleTransmuxComplete(e){var n;const r=this.playlistType,{hls:s}=this,{remuxResult:i,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:u,part:l,level:c}=a,{video:d,text:f,id3:h,initSegment:p}=i,{details:g}=c,v=this.altAudio?void 0:i.audio;if(this.fragContextChanged(u)){this.fragmentTracker.removeFragment(u);return}if(this.state=at.PARSING,p){if(p!=null&&p.tracks){const b=u.initSegment||u;this._bufferInitSegment(c,p.tracks,b,o),s.trigger(G.FRAG_PARSING_INIT_SEGMENT,{frag:b,id:r,tracks:p.tracks})}const y=p.initPTS,w=p.timescale;Ut(y)&&(this.initPTS[u.cc]={baseTime:y,timescale:w},s.trigger(G.INIT_PTS_FOUND,{frag:u,id:r,initPTS:y,timescale:w}))}if(d&&g){v&&d.type==="audiovideo"&&this.logMuxedErr(u);const y=g.fragments[u.sn-1-g.startSN],w=u.sn===g.startSN,b=!y||u.cc>y.cc;if(i.independent!==!1){const{startPTS:S,endPTS:E,startDTS:x,endDTS:k}=d;if(l)l.elementaryStreams[d.type]={startPTS:S,endPTS:E,startDTS:x,endDTS:k};else if(d.firstKeyFrame&&d.independent&&o.id===1&&!b&&(this.couldBacktrack=!0),d.dropped&&d.independent){const A=this.getMainFwdBufferInfo(),C=(A?A.end:this.getLoadPosition())+this.config.maxBufferHole,_=d.firstKeyFramePTS?d.firstKeyFramePTS:S;if(!w&&C<_-this.config.maxBufferHole&&!b){this.backtrack(u);return}else b&&(u.gap=!0);u.setElementaryStreamInfo(d.type,u.start,E,u.start,k,!0)}else w&&S-(g.appliedTimelineOffset||0)>kh&&(u.gap=!0);u.setElementaryStreamInfo(d.type,S,E,x,k),this.backtrackFragment&&(this.backtrackFragment=u),this.bufferFragmentData(d,u,l,o,w||b)}else if(w||b)u.gap=!0;else{this.backtrack(u);return}}if(v){const{startPTS:y,endPTS:w,startDTS:b,endDTS:S}=v;l&&(l.elementaryStreams[Yn.AUDIO]={startPTS:y,endPTS:w,startDTS:b,endDTS:S}),u.setElementaryStreamInfo(Yn.AUDIO,y,w,b,S),this.bufferFragmentData(v,u,l,o)}if(g&&h!=null&&(n=h.samples)!=null&&n.length){const y={id:r,frag:u,details:g,samples:h.samples};s.trigger(G.FRAG_PARSING_METADATA,y)}if(g&&f){const y={id:r,frag:u,details:g,samples:f.samples};s.trigger(G.FRAG_PARSING_USERDATA,y)}}logMuxedErr(e){this.warn(`${Pr(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,n,r,s){if(this.state!==at.PARSING)return;this.audioOnly=!!n.audio&&!n.video,this.altAudio&&!this.audioOnly&&(delete n.audio,n.audiovideo&&this.logMuxedErr(r));const{audio:i,video:o,audiovideo:a}=n;if(i){let l=bh(i.codec,e.audioCodec);l==="mp4a"&&(l="mp4a.40.5");const c=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){l&&(l.indexOf("mp4a.40.5")!==-1?l="mp4a.40.2":l="mp4a.40.5");const d=i.metadata;d&&"channelCount"in d&&(d.channelCount||1)!==1&&c.indexOf("firefox")===-1&&(l="mp4a.40.5")}l&&l.indexOf("mp4a.40.5")!==-1&&c.indexOf("android")!==-1&&i.container!=="audio/mpeg"&&(l="mp4a.40.2",this.log(`Android: force audio codec to ${l}`)),e.audioCodec&&e.audioCodec!==l&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${l}"`),i.levelCodec=l,i.id=qt.MAIN,this.log(`Init audio buffer, container:${i.container}, codecs[selected/level/parsed]=[${l||""}/${e.audioCodec||""}/${i.codec}]`),delete n.audiovideo}if(o){o.levelCodec=e.videoCodec,o.id=qt.MAIN;const l=o.codec;if((l==null?void 0:l.length)===4)switch(l){case"hvc1":case"hev1":o.codec="hvc1.1.6.L120.90";break;case"av01":o.codec="av01.0.04M.08";break;case"avc1":o.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${o.container}, codecs[level/parsed]=[${e.videoCodec||""}/${l}]${o.codec!==l?" parsed-corrected="+o.codec:""}${o.supplemental?" supplemental="+o.supplemental:""}`),delete n.audiovideo}a&&(this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.codecs}/${a.codec}]`),delete n.video,delete n.audio);const u=Object.keys(n);if(u.length){if(this.hls.trigger(G.BUFFER_CODECS,n),!this.hls)return;u.forEach(l=>{const d=n[l].initSegment;d!=null&&d.byteLength&&this.hls.trigger(G.BUFFER_APPENDING,{type:l,data:d,frag:r,part:null,chunkMeta:s,parent:r.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,qt.MAIN)}get maxBufferLength(){const{levels:e,level:n}=this,r=e==null?void 0:e[n];return r?this.getMaxBufferLength(r.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=at.IDLE}checkFragmentChanged(){const e=this.media;let n=null;if(e&&e.readyState>1&&e.seeking===!1){const r=e.currentTime;if(pn.isBuffered(e,r)?n=this.getAppendedFrag(r):pn.isBuffered(e,r+.1)&&(n=this.getAppendedFrag(r+.1)),n){this.backtrackFragment=null;const s=this.fragPlaying,i=n.level;(!s||n.sn!==s.sn||s.level!==i)&&(this.fragPlaying=n,this.hls.trigger(G.FRAG_CHANGED,{frag:n}),(!s||s.level!==i)&&this.hls.trigger(G.LEVEL_SWITCHED,{level:i}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const n=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return Ut(n)?this.getAppendedFrag(n):null}get currentProgramDateTime(){var e;const n=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(Ut(n)){const r=this.getLevelDetails(),s=this.currentFrag||(r?fl(null,r.fragments,n):null);if(s){const i=s.programDateTime;if(i!==null){const o=i+(n-s.start)*1e3;return new Date(o)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class T5{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const r in this.keyUriToKeyInfo){const s=this.keyUriToKeyInfo[r].loader;if(s){var n;if(e&&e!==((n=s.context)==null?void 0:n.frag.type))return;s.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e];(n.mediaKeySessionContext||n.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e].loader;n&&n.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,n=Ge.KEY_LOAD_ERROR,r,s,i){return new go({type:nn.NETWORK_ERROR,details:n,fatal:!1,frag:e,response:i,error:r,networkDetails:s})}loadClear(e,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(n.length){const{sn:r,cc:s}=e;for(let i=0;i<n.length;i++){const o=n[i];if(s<=o.cc&&(r==="initSegment"||o.sn==="initSegment"||r<o.sn))return this.emeController.selectKeySystemFormat(o).then(a=>{if(o.setKeyFormat(a),this.emeController&&this.config.requireKeySystemAccessOnStart){const u=wh(a);if(u)return this.emeController.getKeySystemAccess([u])}})}}else if(this.config.requireKeySystemAccessOnStart){const r=Tc(this.config);if(r.length)return this.emeController.getKeySystemAccess(r)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(n=>this.loadInternal(e,n)):this.loadInternal(e)}loadInternal(e,n){var r,s;n&&e.setKeyFormat(n);const i=e.decryptdata;if(!i){const l=new Error(n?`Expected frag.decryptdata to be defined after setting format ${n}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,Ge.KEY_LOAD_ERROR,l))}const o=i.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,Ge.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${o}"`)));let a=this.keyUriToKeyInfo[o];if((r=a)!=null&&r.decryptdata.key)return i.key=a.decryptdata.key,Promise.resolve({frag:e,keyInfo:a});if((s=a)!=null&&s.keyLoadPromise){var u;switch((u=a.mediaKeySessionContext)==null?void 0:u.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then(l=>(i.key=l.keyInfo.decryptdata.key,{frag:e,keyInfo:a}))}}switch(a=this.keyUriToKeyInfo[o]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return i.keyFormat==="identity"?this.loadKeyHTTP(a,e):this.loadKeyEME(a,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(a,e);default:return Promise.reject(this.createKeyLoadError(e,Ge.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${i.method}"`)))}}loadKeyEME(e,n){const r={frag:n,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const s=this.emeController.loadKey(r);if(s)return(e.keyLoadPromise=s.then(i=>(e.mediaKeySessionContext=i,r))).catch(i=>{throw e.keyLoadPromise=null,i})}return Promise.resolve(r)}loadKeyHTTP(e,n){const r=this.config,s=r.loader,i=new s(r);return n.keyLoader=e.loader=i,e.keyLoadPromise=new Promise((o,a)=>{const u={keyInfo:e,frag:n,responseType:"arraybuffer",url:e.decryptdata.uri},l=r.keyLoadPolicy.default,c={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,h,p,g)=>{const{frag:v,keyInfo:y,url:w}=p;if(!v.decryptdata||y!==this.keyUriToKeyInfo[w])return a(this.createKeyLoadError(v,Ge.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),g));y.decryptdata.key=v.decryptdata.key=new Uint8Array(f.data),v.keyLoader=null,y.loader=null,o({frag:v,keyInfo:y})},onError:(f,h,p,g)=>{this.resetLoader(h),a(this.createKeyLoadError(n,Ge.KEY_LOAD_ERROR,new Error(`HTTP Error ${f.code} loading key ${f.text}`),p,Hn({url:u.url,data:void 0},f)))},onTimeout:(f,h,p)=>{this.resetLoader(h),a(this.createKeyLoadError(n,Ge.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),p))},onAbort:(f,h,p)=>{this.resetLoader(h),a(this.createKeyLoadError(n,Ge.INTERNAL_ABORTED,new Error("key loading aborted"),p))}};i.load(u,c,d)})}resetLoader(e){const{frag:n,keyInfo:r,url:s}=e,i=r.loader;n.keyLoader===i&&(n.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[s],i&&i.destroy()}}function bx(t){const{type:e}=t;switch(e){case An.AUDIO_TRACK:return qt.AUDIO;case An.SUBTITLE_TRACK:return qt.SUBTITLE;default:return qt.MAIN}}function fv(t,e){let n=t.url;return(n===void 0||n.indexOf("data:")===0)&&(n=e.url),n}class C5{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(G.MANIFEST_LOADING,this.onManifestLoading,this),e.on(G.LEVEL_LOADING,this.onLevelLoading,this),e.on(G.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(G.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(G.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(G.MANIFEST_LOADING,this.onManifestLoading,this),e.off(G.LEVEL_LOADING,this.onLevelLoading,this),e.off(G.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(G.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(G.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const n=this.hls.config,r=n.pLoader,s=n.loader,i=r||s,o=new i(n);return this.loaders[e.type]=o,o}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const n=this.loaders[e];n&&n.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,n){const{url:r}=n;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:An.MANIFEST,url:r,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,n){const{id:r,level:s,pathwayId:i,url:o,deliveryDirectives:a,levelInfo:u}=n;this.load({id:r,level:s,pathwayId:i,responseType:"text",type:An.LEVEL,url:o,deliveryDirectives:a,levelOrTrack:u})}onAudioTrackLoading(e,n){const{id:r,groupId:s,url:i,deliveryDirectives:o,track:a}=n;this.load({id:r,groupId:s,level:null,responseType:"text",type:An.AUDIO_TRACK,url:i,deliveryDirectives:o,levelOrTrack:a})}onSubtitleTrackLoading(e,n){const{id:r,groupId:s,url:i,deliveryDirectives:o,track:a}=n;this.load({id:r,groupId:s,level:null,responseType:"text",type:An.SUBTITLE_TRACK,url:i,deliveryDirectives:o,levelOrTrack:a})}onLevelsUpdated(e,n){const r=this.loaders[An.LEVEL];if(r){const s=r.context;s&&!n.levels.some(i=>i===s.levelOrTrack)&&(r.abort(),delete this.loaders[An.LEVEL])}}load(e){var n;const r=this.hls.config;let s=this.getInternalLoader(e);if(s){const l=this.hls.logger,c=s.context;if(c&&c.levelOrTrack===e.levelOrTrack&&(c.url===e.url||c.deliveryDirectives&&!e.deliveryDirectives)){c.url===e.url?l.log(`[playlist-loader]: ignore ${e.url} ongoing request`):l.log(`[playlist-loader]: ignore ${e.url} in favor of ${c.url}`);return}l.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),s.abort()}let i;if(e.type===An.MANIFEST?i=r.manifestLoadPolicy.default:i=Kn({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),s=this.createInternalLoader(e),Ut((n=e.deliveryDirectives)==null?void 0:n.part)){let l;if(e.type===An.LEVEL&&e.level!==null?l=this.hls.levels[e.level].details:e.type===An.AUDIO_TRACK&&e.id!==null?l=this.hls.audioTracks[e.id].details:e.type===An.SUBTITLE_TRACK&&e.id!==null&&(l=this.hls.subtitleTracks[e.id].details),l){const c=l.partTarget,d=l.targetduration;if(c&&d){const f=Math.max(c*3,d*.8)*1e3;i=Kn({},i,{maxTimeToFirstByteMs:Math.min(f,i.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(f,i.maxTimeToFirstByteMs)})}}}const o=i.errorRetry||i.timeoutRetry||{},a={loadPolicy:i,timeout:i.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},u={onSuccess:(l,c,d,f)=>{const h=this.getInternalLoader(d);this.resetInternalLoader(d.type);const p=l.data;if(p.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(l,d,new Error("no EXTM3U delimiter"),f||null,c);return}c.parsing.start=performance.now(),Wi.isMediaPlaylist(p)||d.type!==An.MANIFEST?this.handleTrackOrLevelPlaylist(l,c,d,f||null,h):this.handleMasterPlaylist(l,c,d,f)},onError:(l,c,d,f)=>{this.handleNetworkError(c,d,!1,l,f)},onTimeout:(l,c,d)=>{this.handleNetworkError(c,d,!0,void 0,l)}};s.load(e,a,u)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:n},forceStartLoad:r}=this.hls;(e||r)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${n}`),this.hls.startLoad(n))}handleMasterPlaylist(e,n,r,s){const i=this.hls,o=e.data,a=fv(e,r),u=Wi.parseMasterPlaylist(o,a);if(u.playlistParsingError){this.handleManifestParsingError(e,r,u.playlistParsingError,s,n);return}const{contentSteering:l,levels:c,sessionData:d,sessionKeys:f,startTimeOffset:h,variableList:p}=u;this.variableList=p;const{AUDIO:g=[],SUBTITLES:v,"CLOSED-CAPTIONS":y}=Wi.parseMasterPlaylistMedia(o,a,u);g.length&&!g.some(b=>!b.url)&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new ar({}),bitrate:0,url:""})),i.trigger(G.MANIFEST_LOADED,{levels:c,audioTracks:g,subtitles:v,captions:y,contentSteering:l,url:a,stats:n,networkDetails:s,sessionData:d,sessionKeys:f,startTimeOffset:h,variableList:p})}handleTrackOrLevelPlaylist(e,n,r,s,i){const o=this.hls,{id:a,level:u,type:l}=r,c=fv(e,r),d=Ut(u)?u:Ut(a)?a:0,f=bx(r),h=Wi.parseLevelPlaylist(e.data,c,d,f,0,this.variableList);if(l===An.MANIFEST){const p={attrs:new ar({}),bitrate:0,details:h,name:"",url:c};h.requestScheduled=n.loading.start+aA(h,0),o.trigger(G.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:c,stats:n,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}n.parsing.end=performance.now(),r.levelDetails=h,this.handlePlaylistLoaded(h,e,n,r,s,i)}handleManifestParsingError(e,n,r,s,i){this.hls.trigger(G.ERROR,{type:nn.NETWORK_ERROR,details:Ge.MANIFEST_PARSING_ERROR,fatal:n.type===An.MANIFEST,url:e.url,err:r,error:r,reason:r.message,response:e,context:n,networkDetails:s,stats:i})}handleNetworkError(e,n,r=!1,s,i){let o=`A network ${r?"timeout":"error"+(s?" (status "+s.code+")":"")} occurred while loading ${e.type}`;e.type===An.LEVEL?o+=`: ${e.level} id: ${e.id}`:(e.type===An.AUDIO_TRACK||e.type===An.SUBTITLE_TRACK)&&(o+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(o);this.hls.logger.warn(`[playlist-loader]: ${o}`);let u=Ge.UNKNOWN,l=!1;const c=this.getInternalLoader(e);switch(e.type){case An.MANIFEST:u=r?Ge.MANIFEST_LOAD_TIMEOUT:Ge.MANIFEST_LOAD_ERROR,l=!0;break;case An.LEVEL:u=r?Ge.LEVEL_LOAD_TIMEOUT:Ge.LEVEL_LOAD_ERROR,l=!1;break;case An.AUDIO_TRACK:u=r?Ge.AUDIO_TRACK_LOAD_TIMEOUT:Ge.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case An.SUBTITLE_TRACK:u=r?Ge.SUBTITLE_TRACK_LOAD_TIMEOUT:Ge.SUBTITLE_LOAD_ERROR,l=!1;break}c&&this.resetInternalLoader(e.type);const d={type:nn.NETWORK_ERROR,details:u,fatal:l,url:e.url,loader:c,context:e,error:a,networkDetails:n,stats:i};if(s){const f=(n==null?void 0:n.url)||e.url;d.response=Hn({url:f,data:void 0},s)}this.hls.trigger(G.ERROR,d)}handlePlaylistLoaded(e,n,r,s,i,o){const a=this.hls,{type:u,level:l,id:c,groupId:d,deliveryDirectives:f}=s,h=fv(n,s),p=bx(s),g=typeof s.level=="number"&&p===qt.MAIN?l:void 0;if(!e.fragments.length){const y=e.playlistParsingError=new Error("No Segments found in Playlist");a.trigger(G.ERROR,{type:nn.NETWORK_ERROR,details:Ge.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:y,reason:y.message,response:n,context:s,level:g,parent:p,networkDetails:i,stats:r});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const v=e.playlistParsingError;if(v){if(this.hls.logger.warn(v),!a.config.ignorePlaylistParsingErrors){a.trigger(G.ERROR,{type:nn.NETWORK_ERROR,details:Ge.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:v,reason:v.message,response:n,context:s,level:g,parent:p,networkDetails:i,stats:r});return}e.playlistParsingError=null}switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),(!o.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),u){case An.MANIFEST:case An.LEVEL:a.trigger(G.LEVEL_LOADED,{details:e,levelInfo:s.levelOrTrack||a.levels[0],level:g||0,id:c||0,stats:r,networkDetails:i,deliveryDirectives:f,withoutMultiVariant:u===An.MANIFEST});break;case An.AUDIO_TRACK:a.trigger(G.AUDIO_TRACK_LOADED,{details:e,track:s.levelOrTrack,id:c||0,groupId:d||"",stats:r,networkDetails:i,deliveryDirectives:f});break;case An.SUBTITLE_TRACK:a.trigger(G.SUBTITLE_TRACK_LOADED,{details:e,track:s.levelOrTrack,id:c||0,groupId:d||"",stats:r,networkDetails:i,deliveryDirectives:f});break}}}class Eo{static get version(){return fd}static isMSESupported(){return tI()}static isSupported(){return S5()}static getMediaSource(){return Sa()}static get Events(){return G}static get MetadataSchema(){return Os}static get ErrorTypes(){return nn}static get ErrorDetails(){return Ge}static get DefaultConfig(){return Eo.defaultConfig?Eo.defaultConfig:a5}static set DefaultConfig(e){Eo.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new vb,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const n=this.logger=W3(e.debug||!1,"Hls instance",e.assetPlayerId),r=this.config=u5(Eo.DefaultConfig,e,n);this.userConfig=e,r.progressive&&c5(r,n);const{abrController:s,bufferController:i,capLevelController:o,errorController:a,fpsController:u}=r,l=new a(this),c=this.abrController=new s(this),d=new M4(this),f=r.interstitialsController,h=f?this.interstitialsController=new f(this,Eo):null,p=this.bufferController=new i(this,d),g=this.capLevelController=new o(this),v=new u(this),y=new C5(this),w=r.contentSteeringController,b=w?new w(this):null,S=this.levelController=new b5(this,b),E=new v5(this),x=new T5(this.config),k=this.streamController=new x5(this,d,x),A=this.gapController=new p5(this,d);g.setStreamController(k),v.setStreamController(k);const C=[y,S,k];h&&C.splice(1,0,h),b&&C.splice(1,0,b),this.networkControllers=C;const _=[c,p,A,g,v,E,d];this.audioTrackController=this.createController(r.audioTrackController,C);const O=r.audioStreamController;O&&C.push(this.audioStreamController=new O(this,d,x)),this.subtitleTrackController=this.createController(r.subtitleTrackController,C);const P=r.subtitleStreamController;P&&C.push(this.subtititleStreamController=new P(this,d,x)),this.createController(r.timelineController,_),x.emeController=this.emeController=this.createController(r.emeController,_),this.cmcdController=this.createController(r.cmcdController,_),this.latencyController=this.createController(y5,_),this.coreComponents=_,C.push(l);const U=l.onErrorOut;typeof U=="function"&&this.on(G.ERROR,U,l),this.on(G.MANIFEST_LOADED,y.onManifestLoaded,y)}createController(e,n){if(e){const r=new e(this);return n&&n.push(r),r}return null}on(e,n,r=this){this._emitter.on(e,n,r)}once(e,n,r=this){this._emitter.once(e,n,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,n,r=this,s){this._emitter.off(e,n,r,s)}listeners(e){return this._emitter.listeners(e)}emit(e,n,r){return this._emitter.emit(e,n,r)}trigger(e,n){if(this.config.debug)return this.emit(e,e,n);try{return this.emit(e,e,n)}catch(r){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),!this.triggeringException){this.triggeringException=!0;const s=e===G.ERROR;this.trigger(G.ERROR,{type:nn.OTHER_ERROR,details:Ge.INTERNAL_EXCEPTION,fatal:s,event:e,error:r}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(G.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(n=>n.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(n=>n.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const i=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(G.ERROR,{type:nn.OTHER_ERROR,details:Ge.ATTACH_MEDIA_ERROR,fatal:!0,error:i});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const n="media"in e,r=n?e.media:e,s=n?e:{media:r};this._media=r,this.trigger(G.MEDIA_ATTACHING,s)}detachMedia(){this.logger.log("detachMedia"),this.trigger(G.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(G.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const n=this.media,r=this._url,s=this._url=lb.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${s}`),n&&r&&(r!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(n)),this.trigger(G.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,n){this.logger.log(`startLoad(${e+(n?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let r=0;r<this.networkControllers.length&&(this.networkControllers[r].startLoad(e,n),!(!this.started||!this.networkControllers));r++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[qt.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[qt.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[qt.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,n=e==null?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),n&&this.startLoad(n))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=p6()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const n=!!e;n!==this.config.capLevelToPlayerSize&&(n?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=n)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){S4(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:n}}=this;if(!e)return 0;const r=e.length;for(let s=0;s<r;s++)if(e[s].maxBitrate>=n)return s;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:n,maxHdcpLevel:r}=this;let s;if(n===-1&&e!=null&&e.length?s=e.length-1:s=n,r)for(let i=s;i--;){const o=e[i].attrs["HDCP-LEVEL"];if(o&&o<=r)return i}return s}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var n;return((n=this.audioTrackController)==null?void 0:n.setAudioOption(e))||null}setSubtitleOption(e){var n;return((n=this.subtitleTrackController)==null?void 0:n.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const n=this.audioTrackController;n&&(n.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const n=this.subtitleTrackController;n&&(n.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const n=this.subtitleTrackController;n&&(n.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,n=this.allAudioTracks){const r=X2(n);return Y2(e,r,navigator.mediaCapabilities)}}Eo.defaultConfig=void 0;var kc={exports:{}};kc.exports;var Sx;function k5(){return Sx||(Sx=1,function(t,e){/*!
 * artplayer-plugin-danmuku.js v5.1.5
 * Github: https://github.com/zhw2590582/ArtPlayer
 * (c) 2017-2025 Harvey Zack
 * Released under the MIT License.
 */(function(n,r,s,i,o){var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof Co<"u"?Co:{},u=typeof a[i]=="function"&&a[i],l=u.cache||{},c=typeof hp=="function"&&hp.bind(t);function d(p,g){if(!l[p]){if(!n[p]){var v=typeof a[i]=="function"&&a[i];if(!g&&v)return v(p,!0);if(u)return u(p,!0);if(c&&typeof p=="string")return c(p);var y=Error("Cannot find module '"+p+"'");throw y.code="MODULE_NOT_FOUND",y}b.resolve=function(S){var E=n[p][1][S];return E??S},b.cache={};var w=l[p]=new d.Module(p);n[p][0].call(w.exports,b,w,w.exports,this)}return l[p].exports;function b(S){var E=b.resolve(S);return E===!1?{}:d(E)}}d.isParcelRequire=!0,d.Module=function(p){this.id=p,this.bundle=d,this.exports={}},d.modules=n,d.cache=l,d.parent=u,d.register=function(p,g){n[p]=[function(v,y){y.exports=g},{}]},Object.defineProperty(d,"root",{get:function(){return a[i]}}),a[i]=d;for(var f=0;f<r.length;f++)d(r[f]);{var h=d(s);t.exports=h}})({bgm6t:[function(n,r,s){var i=n("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(s),i.export(s,"default",()=>f);var o=n("./danmuku"),a=i.interopDefault(o),u=n("./setting"),l=i.interopDefault(u),c=n("./heatmap"),d=i.interopDefault(c);function f(h){return p=>{let g=new a.default(p,h),v=new l.default(p,g);return g.option.heatmap&&(0,d.default)(p,g,g.option.heatmap),{name:"artplayerPluginDanmuku",emit:g.emit.bind(g),load:g.load.bind(g),config:g.config.bind(g),hide:g.hide.bind(g),show:g.show.bind(g),reset:g.reset.bind(g),mount:v.mount.bind(v),get option(){return g.option},get isHide(){return g.isHide},get isStop(){return g.isStop}}}}f.icons=l.default.icons,typeof window<"u"&&(window.artplayerPluginDanmuku=f)},{"./danmuku":"4ns48","./setting":"lO8OT","./heatmap":"8AxLD","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4ns48":[function(n,r,s){var i=n("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(s);var o=n("./bilibili"),a=n("bundle-text:./worker"),u=i.interopDefault(a);class l{constructor(d,f){let{constructor:h,template:p}=d;this.utils=h.utils,this.validator=h.validator,this.$danmuku=p.$danmuku,this.$player=p.$player,this.art=d,this.queue=[],this.$refs=[],this.isStop=!1,this.isHide=!1,this.timer=null,this.index=0,this.option=l.option,this.states={wait:[],ready:[],emit:[],stop:[]},this.config(f);let g=new Blob([u.default],{type:"application/javascript"});this.worker=new Worker(URL.createObjectURL(g)),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this.reset=this.reset.bind(this),this.resize=this.resize.bind(this),this.destroy=this.destroy.bind(this),d.on("video:play",this.start),d.on("video:playing",this.start),d.on("video:pause",this.stop),d.on("video:waiting",this.stop),d.on("destroy",this.destroy),d.on("resize",this.resize),this.load()}static get option(){return{danmuku:[],speed:5,margin:[10,"25%"],opacity:1,color:"#FFFFFF",mode:0,modes:[0,1,2],fontSize:25,antiOverlap:!0,synchronousPlayback:!1,mount:void 0,heatmap:!1,width:512,points:[],filter:()=>!0,beforeEmit:()=>!0,beforeVisible:()=>!0,visible:!0,emitter:!0,maxLength:200,lockTime:5,theme:"dark",OPACITY:{},FONT_SIZE:{},MARGIN:{},SPEED:{},COLOR:[]}}static get scheme(){return{danmuku:"array|function|string",speed:"number",margin:"array",opacity:"number",color:"string",mode:"number",modes:"array",fontSize:"number|string",antiOverlap:"boolean",synchronousPlayback:"boolean",mount:"?htmldivelement|string",heatmap:"object|boolean",width:"number",points:"array",filter:"function",beforeEmit:"function",beforeVisible:"function",visible:"boolean",emitter:"boolean",maxLength:"number",lockTime:"number",theme:"string",OPACITY:"object",FONT_SIZE:"object",MARGIN:"object",SPEED:"object",COLOR:"array"}}static get cssText(){return' user-select: none; position: absolute; white-space: pre; pointer-events: none; perspective: 500px; display: inline-block; will-change: transform; font-weight: normal; line-height: 1.125; visibility: hidden; font-family: SimHei, "Microsoft JhengHei", Arial, Helvetica, sans-serif; text-shadow: rgb(0, 0, 0) 1px 0px 1px, rgb(0, 0, 0) 0px 1px 1px, rgb(0, 0, 0) 0px -1px 1px, rgb(0, 0, 0) -1px 0px 1px; '}get isRotate(){var d,f;return(f=(d=this.art.plugins)==null?void 0:d.autoOrientation)==null?void 0:f.state}get marginTop(){let{clamp:d}=this.utils,f=this.option.margin[0],{clientHeight:h}=this.$player;return typeof f=="number"?d(f,0,h):typeof f=="string"&&f.endsWith("%")?d(h*(parseFloat(f)/100),0,h):l.option.margin[0]}get marginBottom(){let{clamp:d}=this.utils,f=this.option.margin[1],{clientHeight:h}=this.$player;return typeof f=="number"?d(f,0,h):typeof f=="string"&&f.endsWith("%")?d(h*(parseFloat(f)/100),0,h):l.option.margin[1]}get fontSize(){let{clamp:d}=this.utils,{clientHeight:f}=this.$player,h=this.option.fontSize;return typeof h=="number"?Math.round(d(h,12,f)):typeof h=="string"&&h.endsWith("%")?Math.round(d(f*(parseFloat(h)/100),12,f)):l.option.fontSize}get $ref(){let d=this.$refs.pop()||document.createElement("div");return d.style.cssText=l.cssText,d.dataset.mode="",d.className="",d}get readys(){let{currentTime:d}=this.art,f=[];return this.filter("ready",h=>f.push(h)),this.filter("wait",h=>{d+.1>=h.time&&h.time>=d-.1&&f.push(h)}),f}get visibles(){let d=[],{clientWidth:f}=this.$player,h=this.getLeft(this.$player);return this.filter("emit",p=>{let g=p.$ref.offsetTop,v=this.getLeft(p.$ref)-h,y=p.$ref.clientHeight,w=p.$ref.clientWidth,b=v+w,S=b/p.$restTime,E={};E.top=g,E.left=v,E.height=y,E.width=w,E.right=f-b,E.speed=S,E.distance=b,E.time=p.$restTime,E.mode=p.mode,d.push(E)}),d}get speed(){return this.option.synchronousPlayback&&this.art.playbackRate?this.option.speed/Number(this.art.playbackRate):this.option.speed}async load(d){let{errorHandle:f}=this.utils,h=[],p=d||this.option.danmuku;try{typeof p=="function"?h=await p():p instanceof Promise?h=await p:typeof p=="string"?h=await(0,o.bilibiliDanmuParseFromUrl)(p):Array.isArray(p)&&(h=p),f(Array.isArray(h),"Danmuku need return an array as result"),d===void 0&&(this.reset(),this.queue=[],this.states={wait:[],ready:[],emit:[],stop:[]},this.$refs=[],this.$danmuku.innerText="");for(let g=0;g<h.length;g++){let v=h[g];await this.emit(v)}this.art.emit("artplayerPluginDanmuku:loaded",this.queue)}catch(g){throw this.art.emit("artplayerPluginDanmuku:error",g),g}return this}async emit(d){let{clamp:f}=this.utils;if(this.validator(d,{text:"string",mode:"?number",color:"?string",time:"?number",border:"?boolean",style:"?object"}),!d.text.trim()||(d.time?d.time=f(d.time,0,1/0):d.time=this.art.currentTime+.5,d.mode===void 0&&(d.mode=this.option.mode),d.style===void 0&&(d.style={}),d.color===void 0&&(d.color=this.option.color),![0,1,2].includes(d.mode)||!this.option.filter(d)))return this;let h={...d,$state:"wait",$id:this.index++,$ref:null,$restTime:0,$lastStartTime:0};return this.setState(h,"wait"),this.queue.push(h),this}config(d){let{clamp:f}=this.utils,{$controlsCenter:h}=this.art.template;return Object.keys(d).some(p=>JSON.stringify(this.option[p])!==JSON.stringify(d[p]))&&(this.option=Object.assign({},l.option,this.option,d),this.validator(this.option,l.scheme),this.option.mode=f(this.option.mode,0,2),this.option.speed=f(this.option.speed,1,10),this.option.opacity=f(this.option.opacity,0,1),this.option.lockTime=f(this.option.lockTime,1,60),this.option.maxLength=f(this.option.maxLength,1,1e3),this.option.mount=this.option.mount||h,d.fontSize&&this.reset(),this.option.visible?this.show():this.hide(),this.art.emit("artplayerPluginDanmuku:config",this.option)),this}getLeft(d){let f=d.getBoundingClientRect();return this.isRotate?f.top:f.left}postMessage(d={}){return new Promise(f=>{d.id=Date.now(),this.worker.postMessage(d),this.worker.onmessage=h=>{let{data:p}=h;p.id===d.id&&f(p)}})}filter(d,f){let h=this.states[d]||[];for(let p=0;p<h.length;p++)f(h[p]);return h}setState(d,f){this.states[d.$state]=this.states[d.$state].filter(h=>h!==d),d.$state=f,d.$ref&&(d.$ref.dataset.state=f),this.states[f].push(d)}makeWait(d){this.setState(d,"wait"),d.$ref&&(d.$ref.style.cssText=l.cssText,d.$ref.style.visibility="hidden",d.$ref.style.marginLeft="0px",d.$ref.style.transform="translateX(0px)",d.$ref.style.transition="transform 0s linear 0s",this.$refs.push(d.$ref),d.$ref=null)}update(){let{setStyles:d}=this.utils;return this.timer=window.requestAnimationFrame(async()=>{if(this.art.playing&&!this.isHide){this.filter("emit",h=>{let p=(Date.now()-h.$lastStartTime)/1e3;h.$restTime-=p,h.$lastStartTime=Date.now(),h.$restTime<=0&&this.makeWait(h)});let f=this.readys;for(let h=0;h<f.length;h++){let p=f[h];if(await this.option.beforeVisible(p)){let{clientWidth:g,clientHeight:v}=this.$player;p.$ref=this.$ref,p.$ref.innerText=p.text,this.$danmuku.appendChild(p.$ref),p.$ref.style.opacity=this.option.opacity,p.$ref.style.fontSize=`${this.fontSize}px`,p.$ref.style.color=p.color,p.$ref.style.border=p.border?`1px solid ${p.color}`:null,p.$ref.style.backgroundColor=p.border?"rgb(0 0 0 / 50%)":null,d(p.$ref,p.style),p.$lastStartTime=Date.now(),p.$restTime=this.speed;let y=g+p.$ref.clientWidth,{result:w}=await this.postMessage({type:"getDanmuTop",target:{mode:p.mode,height:p.$ref.clientHeight,speed:y/p.$restTime},visibles:this.visibles,antiOverlap:this.option.antiOverlap,clientWidth:g,clientHeight:v,marginBottom:this.marginBottom,marginTop:this.marginTop});if(p.$ref)if(this.isStop||w===void 0)this.setState(p,"ready"),this.$refs.push(p.$ref),p.$ref=null;else{switch(this.setState(p,"emit"),p.$ref.style.top=`${w}px`,p.$ref.style.visibility="visible",p.$ref.dataset.mode=p.mode,p.mode){case 0:p.$ref.style.left=`${g}px`,p.$ref.style.marginLeft="0px",p.$ref.style.transform=`translateX(${-y}px)`,p.$ref.style.transition=`transform ${p.$restTime}s linear 0s`;break;case 1:case 2:p.$ref.style.left="50%",p.$ref.style.marginLeft=`-${p.$ref.clientWidth/2}px`}this.art.emit("artplayerPluginDanmuku:visible",p)}}}}this.isStop||this.update()}),this}resize(){let{clientWidth:d}=this.$player;this.filter("stop",f=>{f.mode===0&&(f.$ref.style.left=`${d}px`)}),this.filter("emit",f=>{if(f.$lastStartTime=Date.now(),f.mode===0){let h=d+f.$ref.clientWidth;f.$ref.style.left=`${d}px`,f.$ref.style.transform=`translateX(${-h}px)`,f.$ref.style.transition=`transform ${f.$restTime}s linear 0s`}})}continue(){let{clientWidth:d}=this.$player;return this.filter("stop",f=>{if(this.setState(f,"emit"),f.$lastStartTime=Date.now(),f.mode===0){let h=d+f.$ref.clientWidth;f.$ref.style.transform=`translateX(${-h}px)`,f.$ref.style.transition=`transform ${f.$restTime}s linear 0s`}}),this}suspend(){let{clientWidth:d}=this.$player;return this.filter("emit",f=>{if(this.setState(f,"stop"),f.mode===0){let h=d-(this.getLeft(f.$ref)-this.getLeft(this.$player));f.$ref.style.transform=`translateX(${-h}px)`,f.$ref.style.transition="transform 0s linear 0s"}}),this}stop(){return this.isStop=!0,this.suspend(),window.cancelAnimationFrame(this.timer),this.art.emit("artplayerPluginDanmuku:stop"),this}start(){return this.isStop=!1,this.continue(),this.update(),this.art.emit("artplayerPluginDanmuku:start"),this}reset(){return this.queue.forEach(d=>this.makeWait(d)),this.art.emit("artplayerPluginDanmuku:reset"),this}show(){return this.isHide=!1,this.$danmuku.style.opacity=1,this.option.visible=!0,this.art.emit("artplayerPluginDanmuku:show"),this}hide(){return this.isHide=!0,this.$danmuku.style.opacity=0,this.option.visible=!1,this.art.emit("artplayerPluginDanmuku:hide"),this}destroy(){this.stop(),this.worker.terminate(),this.art.off("video:play",this.start),this.art.off("video:playing",this.start),this.art.off("video:pause",this.stop),this.art.off("video:waiting",this.stop),this.art.off("resize",this.reset),this.art.off("destroy",this.destroy),this.art.emit("artplayerPluginDanmuku:destroy")}}s.default=l},{"./bilibili":"f83sx","bundle-text:./worker":"lfIAi","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],f83sx:[function(n,r,s){var i=n("@parcel/transformer-js/src/esmodule-helpers.js");function o(c){switch(c){case 1:case 2:case 3:default:return 0;case 4:return 2;case 5:return 1}}function a(c){if(typeof c!="string")return[];let d=new RegExp(/<d (?:.*? )??p="(?<p>.+?)"(?: .*?)?>(?<text>.+?)<\/d>/gs);return Array.from(c.matchAll(d)).map(f=>{let h=f.groups.p.split(",");return h.length>=8?{text:f.groups.text.trim().replaceAll("&quot;",'"').replaceAll("&apos;","'").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&amp;","&"),time:Number(h[0]),mode:o(Number(h[1])),fontSize:Number(h[2]),color:`#${Number(h[3]).toString(16)}`,timestamp:Number(h[4]),pool:Number(h[5]),userID:h[6],rowID:Number(h[7])}:null}).filter(Boolean)}function u({data:c}){let{xml:d,id:f}=c;if(!f||!d)return;let h=a(d);self.postMessage({danmus:h,id:f})}function l(c){return new Promise(async d=>{let f=await fetch(c),h=await f.text();try{let p=function(){let g=new Blob([` ${o.toString()} ${a.toString()} onmessage = ${u.toString()} `],{type:"application/javascript"});return new Worker(URL.createObjectURL(g))}();p.onmessage=g=>{let{danmus:v,id:y}=g.data;y&&v&&(d(v),p.terminate())},p.postMessage({xml:h,id:Date.now()})}catch{d(a(h))}})}i.defineInteropFlag(s),i.export(s,"bilibiliDanmuParseFromUrl",()=>l)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9pCYc":[function(n,r,s){s.interopDefault=function(i){return i&&i.__esModule?i:{default:i}},s.defineInteropFlag=function(i){Object.defineProperty(i,"__esModule",{value:!0})},s.exportAll=function(i,o){return Object.keys(i).forEach(function(a){a==="default"||a==="__esModule"||Object.prototype.hasOwnProperty.call(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:function(){return i[a]}})}),o},s.export=function(i,o,a){Object.defineProperty(i,o,{enumerable:!0,get:a})}},{}],lfIAi:[function(n,r,s){r.exports=`!function(e,t,n,o,i){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},f="function"==typeof r[o]&&r[o],l=f.cache||{},d="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function u(t,n){if(!l[t]){if(!e[t]){var i="function"==typeof r[o]&&r[o];if(!n&&i)return i(t,!0);if(f)return f(t,!0);if(d&&"string"==typeof t)return d(t);var h=Error("Cannot find module '"+t+"'");throw h.code="MODULE_NOT_FOUND",h}s.resolve=function(n){var o=e[t][1][n];return null!=o?o:n},s.cache={};var p=l[t]=new u.Module(t);e[t][0].call(p.exports,s,p,p.exports,this)}return l[t].exports;function s(e){var t=s.resolve(e);return!1===t?{}:u(t)}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=l,u.parent=f,u.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(u,"root",{get:function(){return r[o]}}),r[o]=u;for(var h=0;h<t.length;h++)u(t[h]);if(n){var p=u(n);"object"==typeof exports&&"undefined"!=typeof module?module.exports=p:"function"==typeof define&&define.amd&&define(function(){return p})}}({"59OZS":[function(e,t,n){function o({target:e,visibles:t,clientWidth:n,clientHeight:o,marginBottom:i,marginTop:r,antiOverlap:f}){let l=o-i,d=t.filter(t=>t.mode===e.mode&&t.top<=l).sort((e,t)=>e.top-t.top);if(0===d.length)return 2===e.mode?l-e.height:r;if(d.unshift({type:"top",top:0,left:0,right:0,height:r,width:n,speed:0,distance:n}),d.push({type:"bottom",top:l,left:0,right:0,height:i,width:n,speed:0,distance:n}),2===e.mode)for(let t=d.length-2;t>=0;t-=1){let n=d[t],o=d[t+1],i=n.top+n.height;if(o.top-i>=e.height)return o.top-e.height}else for(let t=1;t<d.length;t+=1){let n=d[t],o=d[t-1],i=o.top+o.height;if(n.top-i>=e.height)return i}let u=[];for(let e=1;e<d.length-1;e+=1){let t=d[e];if(u.length){let e=u[u.length-1];e[0].top===t.top?e.push(t):u.push([t])}else u.push([t])}if(f)switch(e.mode){case 0:{let t=u.find(t=>t.every(t=>!(n<t.distance)&&(e.speed<t.speed||t.right/(e.speed-t.speed)>t.time)));return t&&t[0]?t[0].top:void 0}case 1:case 2:return}else{switch(e.mode){case 0:u.sort((e,t)=>{let n=Math.min(...t.map(e=>e.right)),o=Math.min(...e.map(e=>e.right));return n*t.length-o*e.length});break;case 1:case 2:u.sort((e,t)=>{let n=Math.max(...t.map(e=>e.width));return Math.max(...e.map(e=>e.width))*e.length-n*t.length})}return u[0][0].top}}onmessage=e=>{let{data:t}=e;if(!t.id||!t.type)return;let n=(0,({getDanmuTop:o})[t.type])(t);self.postMessage({result:n,id:t.id})}},{}]},["59OZS"],"59OZS","parcelRequire4dc0");`},{}],lO8OT:[function(n,r,s){var i=n("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(s);var o=n("bundle-text:./style.less"),a=i.interopDefault(o),u=n("bundle-text:./img/on.svg"),l=i.interopDefault(u),c=n("bundle-text:./img/off.svg"),d=i.interopDefault(c),f=n("bundle-text:./img/config.svg"),h=i.interopDefault(f),p=n("bundle-text:./img/style.svg"),g=i.interopDefault(p),v=n("bundle-text:./img/mode_0_off.svg"),y=i.interopDefault(v),w=n("bundle-text:./img/mode_0_on.svg"),b=i.interopDefault(w),S=n("bundle-text:./img/mode_1_off.svg"),E=i.interopDefault(S),x=n("bundle-text:./img/mode_1_on.svg"),k=i.interopDefault(x),A=n("bundle-text:./img/mode_2_off.svg"),C=i.interopDefault(A),_=n("bundle-text:./img/mode_2_on.svg"),O=i.interopDefault(_),P=n("bundle-text:./img/check_on.svg"),U=i.interopDefault(P),j=n("bundle-text:./img/check_off.svg"),N=i.interopDefault(j);if(s.default=class{constructor(R,V){this.art=R,this.danmuku=V,this.utils=R.constructor.utils;let{setStyle:D}=this.utils,{$controlsCenter:M}=R.template;D(M,"display","flex"),this.template={$controlsCenter:M,$mount:M,$danmuku:null,$toggle:null,$config:null,$configPanel:null,$configModes:null,$style:null,$stylePanel:null,$styleModes:null,$colors:null,$opacitySlider:null,$opacityValue:null,$marginSlider:null,$marginValue:null,$fontSizeSlider:null,$fontSizeValue:null,$speedSlider:null,$speedValue:null,$input:null,$send:null},this.slider={opacity:null,margin:null,fontSize:null,speed:null},this.emitting=!1,this.isLock=!1,this.timer=null,this.createTemplate(),this.createSliders(),this.createEvents(),this.mount(this.option.mount),R.on("resize",()=>this.resize()),R.on("fullscreen",K=>this.onFullscreen(K)),R.on("fullscreenWeb",K=>this.onFullscreen(K)),R.proxy(this.template.$config,"mouseenter",()=>{this.onMouseEnter({$control:this.template.$config,$panel:this.template.$configPanel})}),R.proxy(this.template.$style,"mouseenter",()=>{this.onMouseEnter({$control:this.template.$style,$panel:this.template.$stylePanel})})}static get icons(){return{$on:l.default,$off:d.default,$config:h.default,$style:g.default,$mode_0_off:y.default,$mode_0_on:b.default,$mode_1_off:E.default,$mode_1_on:k.default,$mode_2_off:C.default,$mode_2_on:O.default,$check_on:U.default,$check_off:N.default}}get option(){return this.danmuku.option}get outside(){return this.template.$mount!==this.template.$controlsCenter}get TEMPLATE(){let{option:R}=this;return`<div class="apd-toggle">${l.default}${d.default}</div><div class="apd-config">${h.default}<div class="apd-config-panel"><div class="apd-config-panel-inner"><div class="apd-config-mode"><div class="apd-modes"><div data-mode="0" class="apd-mode">${y.default}${b.default}<div></div></div><div data-mode="1" class="apd-mode">${E.default}${k.default}<div></div></div><div data-mode="2" class="apd-mode">${C.default}${O.default}<div></div></div></div></div><div class="apd-config-other"><div class="apd-other apd-anti-overlap">${U.default}${N.default} </div><div class="apd-other apd-sync-video">${U.default}${N.default} </div></div><div class="apd-config-slider apd-config-opacity"><div class="apd-slider"></div><div class="apd-value"></div></div><div class="apd-config-slider apd-config-margin"><div class="apd-slider"></div><div class="apd-value"></div></div><div class="apd-config-slider apd-config-fontSize"><div class="apd-slider"></div><div class="apd-value"></div></div><div class="apd-config-slider apd-config-speed"><div class="apd-slider"></div><div class="apd-value"></div></div></div></div></div><div class="apd-emitter"><div class="apd-style">${g.default}<div class="apd-style-panel"><div class="apd-style-panel-inner"><div class="apd-style-mode"><div class="apd-modes"><div data-mode="0" class="apd-mode">${b.default}<div></div></div><div data-mode="1" class="apd-mode">${k.default}<div></div></div><div data-mode="2" class="apd-mode">${O.default}<div></div></div></div></div><div class="apd-style-color"><div class="apd-colors">${this.COLOR.map(V=>`<div data-color="${V}" class="apd-color" style="background-color: ${V}"></div>`).join("")}</div></div></div></div></div><input class="apd-input" placeholder="" autocomplete="off" maxLength="${R.maxLength}" /><div class="apd-send"></div></div>`}get OPACITY(){return{min:0,max:100,steps:[],...this.option.OPACITY}}get FONT_SIZE(){return{min:12,max:120,steps:[],...this.option.FONT_SIZE}}get MARGIN(){return{min:0,max:3,steps:[{name:"1/4",value:[10,"75%"]},{name:"",value:[10,"50%"]},{name:"3/4",value:[10,"25%"]},{name:"",value:[10,10]}],...this.option.MARGIN}}get SPEED(){return{min:0,max:4,steps:[{name:"",value:10},{name:"",value:7.5,hide:!0},{name:"",value:5},{name:"",value:2.5,hide:!0},{name:"",value:1}],...this.option.SPEED}}get COLOR(){return this.option.COLOR.length?this.option.COLOR:["#FE0302","#FF7204","#FFAA02","#FFD302","#FFFF00","#A0EE00","#00CD00","#019899","#4266BE","#89D5FF","#CC0273","#222222","#9B9B9B","#FFFFFF"]}query(R){let{query:V}=this.utils,{$danmuku:D}=this.template;return V(R,D)}append(R,V){let{append:D}=this.utils;[...R.children].some(M=>M===V)||D(R,V)}setData(R,V){let{$player:D}=this.art.template,{$mount:M}=this.template;D.dataset[R]=V,this.outside&&(M.dataset[R]=V)}createTemplate(){let{createElement:R,tooltip:V}=this.utils,D=R("div");D.className="artplayer-plugin-danmuku",D.innerHTML=this.TEMPLATE,this.template.$danmuku=D,this.template.$toggle=this.query(".apd-toggle"),this.template.$config=this.query(".apd-config"),this.template.$configPanel=this.query(".apd-config-panel"),this.template.$configModes=this.query(".apd-config-mode .apd-modes"),this.template.$style=this.query(".apd-style"),this.template.$stylePanel=this.query(".apd-style-panel"),this.template.$styleModes=this.query(".apd-style-mode .apd-modes"),this.template.$colors=this.query(".apd-colors"),this.template.$antiOverlap=this.query(".apd-anti-overlap"),this.template.$syncVideo=this.query(".apd-sync-video"),this.template.$opacitySlider=this.query(".apd-config-opacity .apd-slider"),this.template.$opacityValue=this.query(".apd-config-opacity .apd-value"),this.template.$marginSlider=this.query(".apd-config-margin .apd-slider"),this.template.$marginValue=this.query(".apd-config-margin .apd-value"),this.template.$fontSizeSlider=this.query(".apd-config-fontSize .apd-slider"),this.template.$fontSizeValue=this.query(".apd-config-fontSize .apd-value"),this.template.$speedSlider=this.query(".apd-config-speed .apd-slider"),this.template.$speedValue=this.query(".apd-config-speed .apd-value"),this.template.$input=this.query(".apd-input"),this.template.$send=this.query(".apd-send");let{$toggle:M}=this.template;this.art.on("artplayerPluginDanmuku:show",()=>{V(M,"")}),this.art.on("artplayerPluginDanmuku:hide",()=>{V(M,"")})}createEvents(){let{$toggle:R,$configModes:V,$styleModes:D,$colors:M,$antiOverlap:K,$syncVideo:q,$send:ee,$input:X}=this.template;this.art.proxy(R,"click",()=>{this.danmuku.config({visible:!this.option.visible}),this.reset()}),this.art.proxy(V,"click",te=>{let ue=te.target.closest(".apd-mode");if(!ue)return;let he=Number(ue.dataset.mode);this.option.modes.includes(he)?this.danmuku.config({modes:this.option.modes.filter(Z=>Z!==he)}):this.danmuku.config({modes:[...this.option.modes,he]}),this.reset()}),this.art.proxy(K,"click",()=>{this.danmuku.config({antiOverlap:!this.option.antiOverlap}),this.reset()}),this.art.proxy(q,"click",()=>{this.danmuku.config({synchronousPlayback:!this.option.synchronousPlayback}),this.reset()}),this.art.proxy(D,"click",te=>{let ue=te.target.closest(".apd-mode");if(!ue)return;let he=Number(ue.dataset.mode);this.danmuku.config({mode:he}),this.reset()}),this.art.proxy(M,"click",te=>{let ue=te.target.closest(".apd-color");ue&&(this.danmuku.config({color:ue.dataset.color}),this.reset())}),this.art.proxy(ee,"click",()=>this.emit()),this.art.proxy(X,"keypress",te=>{te.key==="Enter"&&(te.preventDefault(),this.emit())})}createSliders(){this.slider.opacity=this.createSlider({...this.OPACITY,container:this.template.$opacitySlider,findIndex:()=>Math.round(100*this.option.opacity),onChange:R=>{let{$opacityValue:V}=this.template;V.textContent=`${R}%`,this.danmuku.config({opacity:R/100})}}),this.slider.margin=this.createSlider({...this.MARGIN,container:this.template.$marginSlider,findIndex:()=>this.MARGIN.steps.findIndex(R=>R.value[0]===this.option.margin[0]&&R.value[1]===this.option.margin[1]),onChange:R=>{let V=this.MARGIN.steps[R];if(!V)return;let{$marginValue:D}=this.template;D.textContent=V.name,this.danmuku.config({margin:V.value})}}),this.slider.fontSize=this.createSlider({...this.FONT_SIZE,container:this.template.$fontSizeSlider,findIndex:()=>this.danmuku.fontSize,onChange:R=>{let{$fontSizeValue:V}=this.template;V.textContent=`${R}px`,R!==this.danmuku.fontSize&&this.danmuku.config({fontSize:R})}}),this.slider.speed=this.createSlider({...this.SPEED,container:this.template.$speedSlider,findIndex:()=>this.SPEED.steps.findIndex(R=>R.value===this.option.speed),onChange:R=>{let V=this.SPEED.steps[R];if(!V)return;let{$speedValue:D}=this.template;D.textContent=V.name,this.danmuku.config({speed:V.value})}})}createSlider({min:R,max:V,container:D,findIndex:M,onChange:K,steps:q=[]}){let{query:ee,clamp:X,setStyle:te}=this.utils;te(D,"touch-action","none"),D.innerHTML=`<div class="apd-slider-line"><div class="apd-slider-points">${q.map(()=>'<div class="apd-slider-point"></div>').join("")}</div><div class="apd-slider-progress"></div></div><div class="apd-slider-dot"></div><div class="apd-slider-steps">${q.map(Te=>Te.hide?"":`<div class="apd-slider-step">${Te.name}</div>`).join("")}</div>`;let ue=ee(".apd-slider-dot",D),he=ee(".apd-slider-progress",D),Z=!1;function ce(Te=M()){if(Te<R||Te>V)return;let Ce=(Te-R)/(V-R);ue.style.left=`${100*Ce}%`,q.length===0&&(he.style.width=ue.style.left),K(Te)}function ae(Te){let{top:Ce,height:z,left:re,width:ve}=D.getBoundingClientRect();this.art.isRotate?ce(Math.round(X(Te.clientY-Ce,0,z)/z*(V-R)+R)):ce(Math.round(X(Te.clientX-re,0,ve)/ve*(V-R)+R))}return this.art.proxy(D,"click",Te=>{ae.call(this,Te)}),this.art.proxy(D,"pointerdown",Te=>{Z=Te.button===0}),this.art.proxy(document,"pointermove",Te=>{Z&&ae.call(this,Te)}),this.art.proxy(document,"pointerup",Te=>{Z&&(Z=!1,ae.call(this,Te))}),{reset:ce}}onFullscreen(R){let{$danmuku:V,$controlsCenter:D,$mount:M}=this.template;this.outside?R?this.append(D,V):this.append(M,V):this.append(D,V)}onMouseEnter({$control:R,$panel:V}){let{$player:D}=this.art.template,M=R.getBoundingClientRect(),K=V.getBoundingClientRect(),q=D.getBoundingClientRect(),ee=K.width/2-M.width/2,X=q.left-(M.left-ee),te=M.right+ee-q.right;X>0?V.style.left=`${-ee+X}px`:te>0?V.style.left=`${-ee-te}px`:V.style.left=`${-ee}px`}async emit(){let{$input:R}=this.template,V=R.value.trim();if(!V.length||this.isLock||this.emitting)return;let D={text:V,mode:this.option.mode,color:this.option.color,time:this.art.currentTime};try{this.emitting=!0;let M=await this.option.beforeEmit(D);if(this.emitting=!1,M!==!0)return;D.border=!0,delete D.time,this.danmuku.emit(D),R.value="",this.lock()}catch{this.emitting=!1}}lock(){let{addClass:R}=this.utils,{$send:V}=this.template;this.isLock=!0;let D=this.option.lockTime;V.innerText=D,R(V,"apd-lock");let M=()=>{this.timer=setTimeout(()=>{D===0?this.unlock():(D-=1,V.innerText=D,M())},1e3)};M()}unlock(){let{removeClass:R}=this.utils,{$send:V}=this.template;clearTimeout(this.timer),this.isLock=!1,V.innerText="",R(V,"apd-lock")}resize(){if(this.outside||this.art.fullscreen||this.art.fullscreenWeb)return;let{$player:R,$controlsCenter:V}=this.art.template,{$danmuku:D}=this.template;this.art.width<this.option.width?this.append(R,D):this.append(V,D)}reset(){let{inverseClass:R,tooltip:V}=this.utils,{$toggle:D,$colors:M}=this.template;this.slider.opacity.reset(),this.slider.margin.reset(),this.slider.fontSize.reset(),this.slider.speed.reset(),this.setData("danmukuVisible",this.option.visible),this.setData("danmukuMode",this.option.mode),this.setData("danmukuColor",this.option.color),this.setData("danmukuMode0",this.option.modes.includes(0)),this.setData("danmukuMode1",this.option.modes.includes(1)),this.setData("danmukuMode2",this.option.modes.includes(2)),this.setData("danmukuAntiOverlap",this.option.antiOverlap),this.setData("danmukuSyncVideo",this.option.synchronousPlayback),this.setData("danmukuTheme",this.option.theme),this.setData("danmukuEmitter",this.option.emitter);let K=Array.from(M.children).find(q=>q.dataset.color===this.option.color.toUpperCase());K&&R(K,"apd-active"),V(D,this.option.visible?"":""),this.resize()}mount(R){let{errorHandle:V}=this.utils,D=typeof R=="string"?document.querySelector(R):R;V(D,`Can not find the mount point: ${R}`),this.append(D,this.template.$danmuku),this.template.$mount=D,this.reset()}},typeof document<"u"){let R="artplayer-plugin-danmuku",V=document.getElementById(R);if(V)V.textContent=a.default;else{let D=document.createElement("style");D.id=R,D.textContent=a.default,document.head.appendChild(D)}}},{"bundle-text:./style.less":"hViDo","bundle-text:./img/on.svg":"9pjcf","bundle-text:./img/off.svg":"b2dkP","bundle-text:./img/config.svg":"l8tyy","bundle-text:./img/style.svg":"5iZC3","bundle-text:./img/mode_0_off.svg":"i0Vut","bundle-text:./img/mode_0_on.svg":"hOSvZ","bundle-text:./img/mode_1_off.svg":"bOXC3","bundle-text:./img/mode_1_on.svg":"lKuh0","bundle-text:./img/mode_2_off.svg":"eB8W6","bundle-text:./img/mode_2_on.svg":"bpe2E","bundle-text:./img/check_on.svg":"kL9zy","bundle-text:./img/check_off.svg":"22xpM","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hViDo:[function(n,r,s){r.exports='.artplayer-plugin-danmuku{z-index:99;color:#fff;flex-shrink:0;justify-content:center;align-items:center;gap:10px;width:100%;height:32px;font-size:12px;font-weight:300;display:flex;position:relative}.artplayer-plugin-danmuku .apd-icon{cursor:pointer;opacity:.75;fill:#fff;transition:all .2s}.artplayer-plugin-danmuku .apd-icon:hover{opacity:1}.artplayer-plugin-danmuku .apd-config{display:flex;position:relative}.artplayer-plugin-danmuku .apd-config .apd-config-panel{opacity:0;pointer-events:none;width:320px;padding:10px;position:absolute;bottom:24px;left:0}.artplayer-plugin-danmuku .apd-config .apd-config-panel .apd-config-panel-inner{background-color:#000000d9;border-radius:3px;width:100%;padding:10px}.artplayer-plugin-danmuku .apd-config:hover .apd-config-panel{opacity:100;pointer-events:all}.artplayer-plugin-danmuku .apd-config-mode,.artplayer-plugin-danmuku .apd-config-slider,.artplayer-plugin-danmuku .apd-config-other,.artplayer-plugin-danmuku .apd-style-mode{margin-bottom:15px}.artplayer-plugin-danmuku .apd-modes{align-items:center;gap:20px;margin-top:5px;display:flex}.artplayer-plugin-danmuku .apd-modes .apd-mode{cursor:pointer;text-align:center}.artplayer-plugin-danmuku .apd-modes .apd-mode:hover{color:#00a1d6}.artplayer-plugin-danmuku .apd-config-slider{align-items:center;gap:12px;display:flex}.artplayer-plugin-danmuku .apd-config-slider .apd-value{text-align:right;width:32px}.artplayer-plugin-danmuku .apd-slider{cursor:pointer;flex:1;justify-content:center;align-items:center;height:20px;display:flex;position:relative}.artplayer-plugin-danmuku .apd-slider .apd-slider-line{background-color:#ffffff40;border-radius:3px;width:100%;height:2px;position:relative;overflow:hidden}.artplayer-plugin-danmuku .apd-slider .apd-slider-points{justify-content:space-between;align-items:center;display:flex;position:absolute;inset:0}.artplayer-plugin-danmuku .apd-slider .apd-slider-points .apd-slider-point{background-color:#ffffff80;border-radius:50%;width:2px;height:2px}.artplayer-plugin-danmuku .apd-slider .apd-slider-progress{background-color:#00a1d6;width:0%;height:100%}.artplayer-plugin-danmuku .apd-slider .apd-slider-dot{background-color:#00a1d6;border-radius:50%;width:12px;height:12px;position:absolute;left:0%;transform:translate(-6px)}.artplayer-plugin-danmuku .apd-slider .apd-slider-steps{color:#777;justify-content:space-between;align-items:center;width:calc(100% + 32px);display:flex;position:absolute;bottom:-12px}.artplayer-plugin-danmuku .apd-slider .apd-slider-steps .apd-slider-step{text-align:center;flex-shrink:0;width:36px;scale:.95}.artplayer-plugin-danmuku .apd-config-other{align-items:center;gap:20px;display:flex}.artplayer-plugin-danmuku .apd-config-other .apd-check-off,.artplayer-plugin-danmuku .apd-config-other .apd-check-on{width:16px;height:16px}.artplayer-plugin-danmuku .apd-config-other .apd-other{cursor:pointer;align-items:center;gap:2px;display:flex}.artplayer-plugin-danmuku .apd-config-other .apd-other:hover{color:#00a1d6}.artplayer-plugin-danmuku .apd-emitter{background-color:#ffffff40;border-radius:5px;flex:1;align-items:center;height:100%;display:flex}.artplayer-plugin-danmuku .apd-style{justify-content:center;align-items:center;display:flex;position:relative}.artplayer-plugin-danmuku .apd-style .apd-style-panel{opacity:0;pointer-events:none;width:200px;padding:10px;position:absolute;bottom:24px;left:0}.artplayer-plugin-danmuku .apd-style .apd-style-panel .apd-style-panel-inner{background-color:#000000d9;border-radius:3px;width:100%;padding:10px}.artplayer-plugin-danmuku .apd-style:hover .apd-style-panel{opacity:100;pointer-events:all}.artplayer-plugin-danmuku .apd-colors{flex-wrap:wrap;gap:8px;margin-top:5px;display:flex}.artplayer-plugin-danmuku .apd-colors .apd-color{cursor:pointer;border-radius:2px;width:16px;height:16px}.artplayer-plugin-danmuku .apd-colors .apd-color.apd-active{border:1px solid #000;box-shadow:0 0 0 1px #fff}.artplayer-plugin-danmuku .apd-input{color:#fff;background-color:#0000;border:none;outline:none;flex:1;width:auto;min-width:0;height:100%;line-height:1}.artplayer-plugin-danmuku .apd-input::placeholder{color:#ffffff80}.artplayer-plugin-danmuku .apd-send{cursor:pointer;text-shadow:none;background-color:#00a1d6;border-top-right-radius:5px;border-bottom-right-radius:5px;flex-shrink:0;justify-content:center;align-items:center;width:60px;height:100%;display:flex}.artplayer-plugin-danmuku .apd-send.apd-lock{cursor:not-allowed;color:#666;background-color:#e7e7e7}.art-controls-center .apd-emitter{flex:none;width:260px}.art-fullscreen .artplayer-plugin-danmuku,.art-fullscreen-web .artplayer-plugin-danmuku{gap:16px;height:38px}.art-fullscreen .artplayer-plugin-danmuku .apd-config-icon,.art-fullscreen-web .artplayer-plugin-danmuku .apd-config-icon,.art-fullscreen .artplayer-plugin-danmuku .apd-toggle-off,.art-fullscreen-web .artplayer-plugin-danmuku .apd-toggle-off,.art-fullscreen .artplayer-plugin-danmuku .apd-toggle-on,.art-fullscreen-web .artplayer-plugin-danmuku .apd-toggle-on{width:28px;height:28px}.art-fullscreen .artplayer-plugin-danmuku .apd-emitter,.art-fullscreen-web .artplayer-plugin-danmuku .apd-emitter{flex:none;width:400px}.art-video-player>.artplayer-plugin-danmuku{padding:0 10px;position:absolute;bottom:-40px;left:0;right:0}.art-video-player:has(>.artplayer-plugin-danmuku){margin-bottom:40px}[data-danmuku-emitter=false] .apd-emitter{display:none!important}[data-danmuku-emitter=false] .art-controls-center .artplayer-plugin-danmuku{justify-content:flex-end;gap:18px}[data-danmuku-emitter=false].art-fullscreen .art-controls-center .artplayer-plugin-danmuku,[data-danmuku-emitter=false].art-fullscreen-web .art-controls-center .artplayer-plugin-danmuku{gap:24px}[data-danmuku-theme=light]>.artplayer-plugin-danmuku .apd-icon{fill:#333}[data-danmuku-theme=light]>.artplayer-plugin-danmuku .apd-emitter{background-color:#f1f2f3}[data-danmuku-theme=light]>.artplayer-plugin-danmuku .apd-input{color:#000}[data-danmuku-theme=light]>.artplayer-plugin-danmuku .apd-input::placeholder{color:#0000004d}[data-danmuku-visible=false] .apd-toggle-off{display:block}[data-danmuku-visible=false] .apd-toggle-on,[data-danmuku-visible=true] .apd-toggle-off{display:none}[data-danmuku-visible=true] .apd-toggle-on{display:block}[data-danmuku-anti-overlap=false] .apd-anti-overlap .apd-check-on{display:none}[data-danmuku-anti-overlap=false] .apd-anti-overlap .apd-check-off,[data-danmuku-anti-overlap=true] .apd-anti-overlap .apd-check-on{display:block}[data-danmuku-anti-overlap=true] .apd-anti-overlap .apd-check-off,[data-danmuku-sync-video=false] .apd-sync-video .apd-check-on{display:none}[data-danmuku-sync-video=false] .apd-sync-video .apd-check-off,[data-danmuku-sync-video=true] .apd-sync-video .apd-check-on{display:block}[data-danmuku-sync-video=true] .apd-sync-video .apd-check-off{display:none}[data-danmuku-mode0=false] .apd-config-mode .apd-mode-0-off{display:block}[data-danmuku-mode0=false] .apd-config-mode .apd-mode-0-on{display:none}[data-danmuku-mode0=false] .art-danmuku [data-mode="0"]{opacity:0!important}[data-danmuku-mode0=true] .apd-config-mode .apd-mode-0-off{display:none}[data-danmuku-mode0=true] .apd-config-mode .apd-mode-0-on{display:block}[data-danmuku-mode="0"] .apd-style-mode [data-mode="0"]{color:#00a1d6}[data-danmuku-mode="0"] .apd-style-mode [data-mode="0"] path{fill:#00a1d6}[data-danmuku-mode1=false] .apd-config-mode .apd-mode-1-off{display:block}[data-danmuku-mode1=false] .apd-config-mode .apd-mode-1-on{display:none}[data-danmuku-mode1=false] .art-danmuku [data-mode="1"]{opacity:0!important}[data-danmuku-mode1=true] .apd-config-mode .apd-mode-1-off{display:none}[data-danmuku-mode1=true] .apd-config-mode .apd-mode-1-on{display:block}[data-danmuku-mode="1"] .apd-style-mode [data-mode="1"]{color:#00a1d6}[data-danmuku-mode="1"] .apd-style-mode [data-mode="1"] path{fill:#00a1d6}[data-danmuku-mode2=false] .apd-config-mode .apd-mode-2-off{display:block}[data-danmuku-mode2=false] .apd-config-mode .apd-mode-2-on{display:none}[data-danmuku-mode2=false] .art-danmuku [data-mode="2"]{opacity:0!important}[data-danmuku-mode2=true] .apd-config-mode .apd-mode-2-off{display:none}[data-danmuku-mode2=true] .apd-config-mode .apd-mode-2-on{display:block}[data-danmuku-mode="2"] .apd-style-mode [data-mode="2"]{color:#00a1d6}[data-danmuku-mode="2"] .apd-style-mode [data-mode="2"] path{fill:#00a1d6}'},{}],"9pjcf":[function(n,r,s){r.exports='<svg class="apd-icon apd-toggle-on" xmlns="http://www.w3.org/2000/svg" data-pointer="none" viewBox="0 0 24 24" width="24" height="24"><path fill-rule="evenodd" d="M11.989 4.828c-.47 0-.975.004-1.515.012l-1.71-2.566a1.008 1.008 0 0 0-1.678 1.118l.999 1.5c-.681.018-1.403.04-2.164.068a4.013 4.013 0 0 0-3.83 3.44c-.165 1.15-.245 2.545-.245 4.185 0 1.965.115 3.67.35 5.116a4.012 4.012 0 0 0 3.763 3.363l.906.046c1.205.063 1.808.095 3.607.095a.988.988 0 0 0 0-1.975c-1.758 0-2.339-.03-3.501-.092l-.915-.047a2.037 2.037 0 0 1-1.91-1.708c-.216-1.324-.325-2.924-.325-4.798 0-1.563.076-2.864.225-3.904.14-.977.96-1.713 1.945-1.747 2.444-.087 4.465-.13 6.063-.131 1.598 0 3.62.044 6.064.13.96.034 1.71.81 1.855 1.814.075.524.113 1.962.141 3.065v.002c.01.342.017.65.025.88a.987.987 0 1 0 1.974-.068c-.008-.226-.016-.523-.025-.856v-.027c-.03-1.118-.073-2.663-.16-3.276-.273-1.906-1.783-3.438-3.74-3.507-.9-.032-1.743-.058-2.531-.078l1.05-1.46a1.008 1.008 0 0 0-1.638-1.177l-1.862 2.59c-.38-.004-.744-.007-1.088-.007h-.13Zm.521 4.775h-1.32v4.631h2.222v.847h-2.618v1.078h2.618l.003.678c.36.026.714.163 1.01.407h.11v-1.085h2.694v-1.078h-2.695v-.847H16.8v-4.63h-1.276a8.59 8.59 0 0 0 .748-1.42L15.183 7.8a14.232 14.232 0 0 1-.814 1.804h-1.518l.693-.308a8.862 8.862 0 0 0-.814-1.408l-1.045.352c.297.396.572.847.825 1.364Zm-4.18 3.564.154-1.485h1.98V8.294h-3.2v.98H9.33v1.43H7.472l-.308 3.453h2.277c0 1.166-.044 1.925-.12 2.277-.078.352-.386.528-.936.528-.308 0-.616-.022-.902-.055l.297 1.067.062.005c.285.02.551.04.818.04 1.001-.067 1.562-.419 1.694-1.057.11-.638.176-1.903.176-3.795h-2.2Zm7.458.11v-.858h-1.254v.858h1.254Zm-2.376-.858v.858h-1.199v-.858h1.2Zm-1.199-.946h1.2v-.902h-1.2v.902Zm2.321 0v-.902h1.254v.902h-1.254Z" clip-rule="evenodd"/><path fill="#00AEEC" fill-rule="evenodd" d="M22.846 14.627a1 1 0 0 0-1.412.075l-5.091 5.703-2.216-2.275-.097-.086-.008-.005a1 1 0 0 0-1.322 1.493l2.963 3.041.093.083.007.005a1 1 0 0 0 1.354-.124l5.81-6.505.08-.102.005-.008a1 1 0 0 0-.166-1.295Z" clip-rule="evenodd"/></svg>'},{}],b2dkP:[function(n,r,s){r.exports='<svg class="apd-icon apd-toggle-off" xmlns="http://www.w3.org/2000/svg" data-pointer="none" viewBox="0 0 24 24" width="24" height="24"><path fill-rule="evenodd" d="m8.085 4.891-.999-1.499a1.008 1.008 0 0 1 1.679-1.118l1.709 2.566c.54-.008 1.045-.012 1.515-.012h.13c.345 0 .707.003 1.088.007l1.862-2.59a1.008 1.008 0 0 1 1.637 1.177l-1.049 1.46c.788.02 1.631.046 2.53.078 1.958.069 3.468 1.6 3.74 3.507.088.613.13 2.158.16 3.276l.001.027c.01.333.017.63.025.856a.987.987 0 0 1-1.974.069c-.008-.23-.016-.539-.025-.881v-.002c-.028-1.103-.066-2.541-.142-3.065-.143-1.004-.895-1.78-1.854-1.813a179.14 179.14 0 0 0-6.064-.131c-1.598 0-3.619.044-6.063.13a2.037 2.037 0 0 0-1.945 1.748c-.15 1.04-.225 2.341-.225 3.904 0 1.874.11 3.474.325 4.798.154.949.95 1.66 1.91 1.708a97.58 97.58 0 0 0 5.416.139.988.988 0 0 1 0 1.975 99.78 99.78 0 0 1-5.513-.141A4.012 4.012 0 0 1 2.197 17.7c-.236-1.446-.351-3.151-.351-5.116 0-1.64.08-3.035.245-4.184A4.013 4.013 0 0 1 5.92 4.96c.761-.027 1.483-.05 2.164-.069Zm4.436 4.707h-1.32v4.63h2.222v.848h-2.618v1.078h2.431a5.01 5.01 0 0 1 3.575-3.115V9.598h-1.276a8.59 8.59 0 0 0 .748-1.42l-1.089-.384a14.232 14.232 0 0 1-.814 1.804h-1.518l.693-.308a8.862 8.862 0 0 0-.814-1.408l-1.045.352c.297.396.572.847.825 1.364Zm-4.18 3.564.154-1.485h1.98V8.289h-3.2v.979h2.067v1.43H7.483l-.308 3.454h2.277c0 1.166-.044 1.925-.12 2.277-.078.352-.386.528-.936.528-.308 0-.616-.022-.902-.055l.297 1.067.062.004c.285.02.551.04.818.04 1.001-.066 1.562-.418 1.694-1.056.11-.638.176-1.903.176-3.795h-2.2Zm7.458.11v-.858h-1.254v.858H15.8Zm-2.376-.858v.858h-1.199v-.858h1.2Zm-1.199-.946h1.2v-.902h-1.2v.902Zm2.321 0v-.902H15.8v.902h-1.254Zm3.517 10.594a4 4 0 1 0 0-8 4 4 0 0 0 0 8Zm-.002-1.502a2.5 2.5 0 0 1-2.217-3.657l3.326 3.398a2.49 2.49 0 0 1-1.109.259Zm2.5-2.5c0 .42-.103.815-.286 1.162l-3.328-3.401a2.5 2.5 0 0 1 3.614 2.239Z" clip-rule="evenodd"/></svg>'},{}],l8tyy:[function(n,r,s){r.exports='<svg class="apd-icon apd-config-icon" xmlns="http://www.w3.org/2000/svg" data-pointer="none" viewBox="0 0 24 24" width="24" height="24"><path fill-rule="evenodd" d="m15.645 4.881 1.06-1.473a.998.998 0 1 0-1.622-1.166L13.22 4.835a110.67 110.67 0 0 0-1.1-.007h-.131c-.47 0-.975.004-1.515.012L8.783 2.3A.998.998 0 0 0 7.12 3.408l.988 1.484c-.688.019-1.418.042-2.188.069a4.013 4.013 0 0 0-3.83 3.44c-.165 1.15-.245 2.545-.245 4.185 0 1.965.115 3.67.35 5.116a4.012 4.012 0 0 0 3.763 3.363 99.78 99.78 0 0 0 5.513.141.988.988 0 0 0 0-1.975 97.58 97.58 0 0 1-5.416-.139 2.037 2.037 0 0 1-1.91-1.708c-.216-1.324-.325-2.924-.325-4.798 0-1.563.076-2.864.225-3.904.14-.977.96-1.713 1.945-1.747 2.444-.087 4.465-.13 6.063-.131 1.598 0 3.62.044 6.064.13.96.034 1.71.81 1.855 1.814.075.524.113 1.962.141 3.065v.002c.005.183.01.07.014-.038.004-.096.008-.189.011-.081a.987.987 0 1 0 1.974-.069c-.004-.105-.007-.009-.011.09a2.175 2.175 0 0 1-.007.135l-.002.01a.574.574 0 0 1-.005-.091v-.027c-.03-1.118-.073-2.663-.16-3.276-.273-1.906-1.783-3.438-3.74-3.507-.905-.032-1.752-.058-2.543-.079Zm-3.113 4.703h-1.307v4.643h2.2v.04l.651-1.234c.113-.215.281-.389.482-.509v-.11h.235c.137-.049.283-.074.433-.074h1.553V9.584h-1.264a8.5 8.5 0 0 0 .741-1.405l-1.078-.381c-.24.631-.501 1.23-.806 1.786h-1.503l.686-.305a8.613 8.613 0 0 0-.806-1.394l-1.034.348c.294.392.566.839.817 1.35Zm-1.7 5.502h2.16l-.564 1.068h-1.595v-1.068Zm-2.498-1.863.152-1.561h1.96V8.289H7.277v.969h2.048v1.435h-1.84l-.306 3.51h2.254c0 1.155-.043 1.906-.12 2.255-.076.348-.38.523-.925.523-.305 0-.61-.022-.893-.055l.294 1.056.061.005c.282.02.546.039.81.039.991-.065 1.547-.414 1.677-1.046.11-.631.175-1.883.175-3.757H8.334Zm5.09-.8v.85h-1.188v-.85h1.187Zm-1.188-.955h1.187v-.893h-1.187v.893Zm2.322.007v-.893h1.241v.893h-1.241Zm.528 2.757a1.26 1.26 0 0 1 1.087-.627l4.003-.009a1.26 1.26 0 0 1 1.094.63l1.721 2.982c.226.39.225.872-.001 1.263l-1.743 3a1.26 1.26 0 0 1-1.086.628l-4.003.009a1.26 1.26 0 0 1-1.094-.63l-1.722-2.982a1.26 1.26 0 0 1 .002-1.263l1.742-3Zm1.967.858a1.26 1.26 0 0 0-1.08.614l-.903 1.513a1.26 1.26 0 0 0-.002 1.289l.885 1.492c.227.384.64.62 1.086.618l2.192-.005a1.26 1.26 0 0 0 1.08-.615l.904-1.518a1.26 1.26 0 0 0 .001-1.288l-.884-1.489a1.26 1.26 0 0 0-1.086-.616l-2.193.005Zm2.517 2.76a1.4 1.4 0 1 1-2.8 0 1.4 1.4 0 0 1 2.8 0Z" clip-rule="evenodd"/></svg>'},{}],"5iZC3":[function(n,r,s){r.exports='<svg class="apd-icon apd-style-icon" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" data-pointer="none" style="enable-background:new 0 0 22 22" viewBox="0 0 22 22" width="36" height="24"><path d="M17 16H5c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1zM6.96 15c.39 0 .74-.24.89-.6l.65-1.6h5l.66 1.6c.15.36.5.6.89.6.69 0 1.15-.71.88-1.34l-3.88-8.97C11.87 4.27 11.46 4 11 4s-.87.27-1.05.69l-3.88 8.97c-.27.63.2 1.34.89 1.34zM11 5.98 12.87 11H9.13L11 5.98z"/></svg>'},{}],i0Vut:[function(n,r,s){r.exports='<svg class="apd-icon apd-mode-0-off" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" data-pointer="none" style="enable-background:new 0 0 28 28" viewBox="0 0 28 28" width="28" height="28"><path d="M23 15c1.487 0 2.866.464 4 1.255V7a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v14a4 4 0 0 0 4 4h11.674A7 7 0 0 1 23 15zM11 9h6a1 1 0 0 1 0 2h-6a1 1 0 0 1 0-2zm-3 2H6V9h2v2zm4 4h-2v-2h2v2zm2-1a1 1 0 0 1 1-1h1a1 1 0 0 1 0 2h-1a1 1 0 0 1-1-1z" fill="#00AEEC"/><path d="M26.536 18.464a5 5 0 0 0-7.071 0 5 5 0 0 0 0 7.071 5 5 0 1 0 7.071-7.071zm-5.657 5.657a3 3 0 0 1-.586-3.415l4.001 4.001a3 3 0 0 1-3.415-.586zm4.829-.827-4.001-4.001a3.002 3.002 0 0 1 4.001 4.001z" fill="#00AEEC"/></svg>'},{}],hOSvZ:[function(n,r,s){r.exports='<svg class="apd-icon apd-mode-0-on" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" data-pointer="none" style="enable-background:new 0 0 28 28" viewBox="0 0 28 28" width="28" height="28"><path d="M23 3H5a4 4 0 0 0-4 4v14a4 4 0 0 0 4 4h18a4 4 0 0 0 4-4V7a4 4 0 0 0-4-4zM11 9h6a1 1 0 0 1 0 2h-6a1 1 0 0 1 0-2zm-3 2H6V9h2v2zm4 4h-2v-2h2v2zm9 0h-6a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2z" fill="#FFF"/></svg>'},{}],bOXC3:[function(n,r,s){r.exports='<svg class="apd-icon apd-mode-1-off" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" data-pointer="none" style="enable-background:new 0 0 28 28" viewBox="0 0 28 28" width="28" height="28"><path d="M23 15c1.487 0 2.866.464 4 1.255V7a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v14a4 4 0 0 0 4 4h11.674A7 7 0 0 1 23 15zm-4-8h2v2h-2V7zM9 9H7V7h2v2zm4 0h-2V7h2v2zm2-2h2v2h-2V7z" fill="#00AEEC"/><path d="M26.536 18.464a5 5 0 0 0-7.071 0 5 5 0 0 0 0 7.071 5 5 0 1 0 7.071-7.071zm-5.657 5.657a3 3 0 0 1-.586-3.415l4.001 4.001a3 3 0 0 1-3.415-.586zm4.829-.827-4.001-4.001a3.002 3.002 0 0 1 4.001 4.001z" fill="#00AEEC"/></svg>'},{}],lKuh0:[function(n,r,s){r.exports='<svg class="apd-icon apd-mode-1-on" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" data-pointer="none" style="enable-background:new 0 0 28 28" viewBox="0 0 28 28" width="28" height="28"><path d="M23 3H5a4 4 0 0 0-4 4v14a4 4 0 0 0 4 4h18a4 4 0 0 0 4-4V7a4 4 0 0 0-4-4zM9 9H7V7h2v2zm4 0h-2V7h2v2zm4 0h-2V7h2v2zm4 0h-2V7h2v2z" fill="#FFF"/></svg>'},{}],eB8W6:[function(n,r,s){r.exports='<svg class="apd-icon apd-mode-2-off" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" data-pointer="none" style="enable-background:new 0 0 28 28" viewBox="0 0 28 28" width="28" height="28"><path d="M23 15c1.487 0 2.866.464 4 1.255V7a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v14a4 4 0 0 0 4 4h11.674A7 7 0 0 1 23 15zM9 21H7v-2h2v2zm4 0h-2v-2h2v2z" fill="#00AEEC"/><path d="M26.536 18.464a5 5 0 0 0-7.071 0 5 5 0 0 0 0 7.071 5 5 0 1 0 7.071-7.071zm-5.657 5.657a3 3 0 0 1-.586-3.415l4.001 4.001a3 3 0 0 1-3.415-.586zm4.829-.827-4.001-4.001a3.002 3.002 0 0 1 4.001 4.001z" fill="#00AEEC"/></svg>'},{}],bpe2E:[function(n,r,s){r.exports='<svg class="apd-icon apd-mode-2-on" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" data-pointer="none" style="enable-background:new 0 0 28 28" viewBox="0 0 28 28" width="28" height="28"><path d="M23 3H5a4 4 0 0 0-4 4v14a4 4 0 0 0 4 4h18a4 4 0 0 0 4-4V7a4 4 0 0 0-4-4zM9 21H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z" fill="#FFF"/></svg>'},{}],kL9zy:[function(n,r,s){r.exports='<svg class="apd-icon apd-check-on" xmlns="http://www.w3.org/2000/svg" data-pointer="none" viewBox="0 0 32 32" width="32" height="32"><path d="m13 18.25-1.8-1.8c-.6-.6-1.65-.6-2.25 0s-.6 1.5 0 2.25l2.85 2.85c.318.318.762.468 1.2.448.438.02.882-.13 1.2-.448l8.85-8.85c.6-.6.6-1.65 0-2.25s-1.65-.6-2.25 0l-7.8 7.8zM8 4h16c2.21 0 4 1.79 4 4v16c0 2.21-1.79 4-4 4H8c-2.21 0-4-1.79-4-4V8c0-2.21 1.79-4 4-4z" fill="#00AEEC"/></svg>'},{}],"22xpM":[function(n,r,s){r.exports='<svg class="apd-icon apd-check-off" xmlns="http://www.w3.org/2000/svg" data-pointer="none" viewBox="0 0 32 32" width="32" height="32"><path d="M8 6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H8zm0-2h16c2.21 0 4 1.79 4 4v16c0 2.21-1.79 4-4 4H8c-2.21 0-4-1.79-4-4V8c0-2.21 1.79-4 4-4z" fill="#FFF"/></svg>'},{}],"8AxLD":[function(n,r,s){var i=n("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(s),i.export(s,"default",()=>u);let o={map:(l,c,d,f,h)=>(l-c)*(h-f)/(d-c)+f,range(l,c,d){let f=Math.round(l/d)*d;return Array.from({length:Math.floor((c-l)/d)},(h,p)=>p*d+f)}},a=(l,c)=>{let d=c[0]-l[0],f=c[1]-l[1];return{length:Math.sqrt(Math.pow(d,2)+Math.pow(f,2)),angle:Math.atan2(f,d)}};function u(l,c,d){let{query:f}=l.constructor.utils;l.controls.add({name:"heatmap",position:"top",html:"",style:{position:"absolute",top:"-100px",left:"0px",right:"0px",height:"100px",width:"100%",pointerEvents:"none"},mounted(h){let p=null,g=null;function v(y=[]){if(p=null,g=null,h.innerHTML="",!l.duration||l.option.isLive)return;let w={w:h.offsetWidth,h:h.offsetHeight},b={xMin:0,xMax:w.w,yMin:0,yMax:128,scale:.25,opacity:.2,minHeight:Math.floor(.05*w.h),sampling:Math.floor(w.w/100),smoothing:.2,flattening:.2};typeof d=="object"&&Object.assign(b,d);let S=[];if(Array.isArray(y)&&y.length)S=[...y];else{let U=l.duration/w.w;for(let j=0;j<=w.w;j+=b.sampling){let N=c.queue.filter(({time:R})=>R>j*U&&R<=(j+b.sampling)*U).length;S.push([j,N])}}if(S.length===0)return;let E=S[S.length-1],x=E[0],k=E[1];x!==w.w&&S.push([w.w,k]);let A=S.map(U=>U[1]),C=(Math.min(...A)+Math.max(...A))/2;for(let U=0;U<S.length;U++){let j=S[U],N=j[1];j[1]=N*(N>C?1+b.scale:1-b.scale)+b.minHeight}let _=(U,j,N,R)=>{let V=a(j||U,N||U),D=o.map(Math.cos(V.angle)*b.flattening,0,1,1,0),M=V.angle*D+(R?Math.PI:0),K=V.length*b.smoothing;return[U[0]+Math.cos(M)*K,U[1]+Math.sin(M)*K]},O=(U,j,N)=>{let R=_(N[j-1],N[j-2],U),V=_(U,N[j-1],N[j+1],!0),D=j===N.length-1?" z":"";return`C ${R[0]},${R[1]} ${V[0]},${V[1]} ${U[0]},${U[1]}${D}`},P=S.map(U=>[o.map(U[0],b.xMin,b.xMax,0,w.w),o.map(U[1],b.yMin,b.yMax,w.h,0)]).reduce((U,j,N,R)=>N===0?`M ${R[R.length-1][0]},${w.h} L ${j[0]},${w.h} L ${j[0]},${j[1]}`:`${U} ${O(j,N,R)}`,"");h.innerHTML=`<svg viewBox="0 0 ${w.w} ${w.h}"><defs><linearGradient id="heatmap-solids" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:var(--art-theme);stop-opacity:${b.opacity}" /><stop offset="0%" style="stop-color:var(--art-theme);stop-opacity:${b.opacity}" id="heatmap-start" /><stop offset="0%" style="stop-color:var(--art-progress-color);stop-opacity:1" id="heatmap-stop" /><stop offset="100%" style="stop-color:var(--art-progress-color);stop-opacity:1" /></linearGradient></defs><path fill="url(#heatmap-solids)" d="${P}"></path></svg>`,p=f("#heatmap-start",h),g=f("#heatmap-stop",h),p.setAttribute("offset",`${100*l.played}%`),g.setAttribute("offset",`${100*l.played}%`)}l.on("video:timeupdate",()=>{p&&g&&(p.setAttribute("offset",`${100*l.played}%`),g.setAttribute("offset",`${100*l.played}%`))}),l.on("setBar",(y,w)=>{p&&g&&y==="played"&&(p.setAttribute("offset",`${100*w}%`),g.setAttribute("offset",`${100*w}%`))}),l.on("ready",()=>v()),l.on("resize",()=>v()),l.on("artplayerPluginDanmuku:loaded",()=>v()),l.on("artplayerPluginDanmuku:points",y=>v(y))}})}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}]},["bgm6t"],"bgm6t","parcelRequire4dc0")}(kc,kc.exports)),kc.exports}var _5=k5();const A5=ui(_5);var _h={exports:{}},I5=_h.exports,wx;function R5(){return wx||(wx=1,function(t,e){(function(n,r){t.exports=r()})(I5,function(){var n=function(T,I){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,W){B.__proto__=W}||function(B,W){for(var Q in W)Object.prototype.hasOwnProperty.call(W,Q)&&(B[Q]=W[Q])})(T,I)},r=function(){return(r=Object.assign||function(T){for(var I,B=1,W=arguments.length;B<W;B++)for(var Q in I=arguments[B])Object.prototype.hasOwnProperty.call(I,Q)&&(T[Q]=I[Q]);return T}).apply(this,arguments)};function s(T,I,B){for(var W,Q=0,oe=I.length;Q<oe;Q++)!W&&Q in I||((W=W||Array.prototype.slice.call(I,0,Q))[Q]=I[Q]);return T.concat(W||Array.prototype.slice.call(I))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Co,o=Object.keys,a=Array.isArray;function u(T,I){return typeof I!="object"||o(I).forEach(function(B){T[B]=I[B]}),T}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var l=Object.getPrototypeOf,c={}.hasOwnProperty;function d(T,I){return c.call(T,I)}function f(T,I){typeof I=="function"&&(I=I(l(T))),(typeof Reflect>"u"?o:Reflect.ownKeys)(I).forEach(function(B){p(T,B,I[B])})}var h=Object.defineProperty;function p(T,I,B,W){h(T,I,u(B&&d(B,"get")&&typeof B.get=="function"?{get:B.get,set:B.set,configurable:!0}:{value:B,configurable:!0,writable:!0},W))}function g(T){return{from:function(I){return T.prototype=Object.create(I.prototype),p(T.prototype,"constructor",T),{extend:f.bind(null,T.prototype)}}}}var v=Object.getOwnPropertyDescriptor,y=[].slice;function w(T,I,B){return y.call(T,I,B)}function b(T,I){return I(T)}function S(T){if(!T)throw new Error("Assertion Failed")}function E(T){i.setImmediate?setImmediate(T):setTimeout(T,0)}function x(T,I){if(typeof I=="string"&&d(T,I))return T[I];if(!I)return T;if(typeof I!="string"){for(var B=[],W=0,Q=I.length;W<Q;++W){var oe=x(T,I[W]);B.push(oe)}return B}var me=I.indexOf(".");if(me!==-1){var we=T[I.substr(0,me)];return we==null?void 0:x(we,I.substr(me+1))}}function k(T,I,B){if(T&&I!==void 0&&!("isFrozen"in Object&&Object.isFrozen(T)))if(typeof I!="string"&&"length"in I){S(typeof B!="string"&&"length"in B);for(var W=0,Q=I.length;W<Q;++W)k(T,I[W],B[W])}else{var oe,me,we=I.indexOf(".");we!==-1?(oe=I.substr(0,we),(me=I.substr(we+1))===""?B===void 0?a(T)&&!isNaN(parseInt(oe))?T.splice(oe,1):delete T[oe]:T[oe]=B:k(we=!(we=T[oe])||!d(T,oe)?T[oe]={}:we,me,B)):B===void 0?a(T)&&!isNaN(parseInt(I))?T.splice(I,1):delete T[I]:T[I]=B}}function A(T){var I,B={};for(I in T)d(T,I)&&(B[I]=T[I]);return B}var C=[].concat;function _(T){return C.apply([],T)}var St="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(_([8,16,32,64].map(function(T){return["Int","Uint","Float"].map(function(I){return I+T+"Array"})}))).filter(function(T){return i[T]}),O=new Set(St.map(function(T){return i[T]})),P=null;function U(T){return P=new WeakMap,T=function I(B){if(!B||typeof B!="object")return B;var W=P.get(B);if(W)return W;if(a(B)){W=[],P.set(B,W);for(var Q=0,oe=B.length;Q<oe;++Q)W.push(I(B[Q]))}else if(O.has(B.constructor))W=B;else{var me,we=l(B);for(me in W=we===Object.prototype?{}:Object.create(we),P.set(B,W),B)d(B,me)&&(W[me]=I(B[me]))}return W}(T),P=null,T}var j={}.toString;function N(T){return j.call(T).slice(8,-1)}var R=typeof Symbol<"u"?Symbol.iterator:"@@iterator",V=typeof R=="symbol"?function(T){var I;return T!=null&&(I=T[R])&&I.apply(T)}:function(){return null};function D(T,I){return I=T.indexOf(I),0<=I&&T.splice(I,1),0<=I}var M={};function K(T){var I,B,W,Q;if(arguments.length===1){if(a(T))return T.slice();if(this===M&&typeof T=="string")return[T];if(Q=V(T)){for(B=[];!(W=Q.next()).done;)B.push(W.value);return B}if(T==null)return[T];if(typeof(I=T.length)!="number")return[T];for(B=new Array(I);I--;)B[I]=T[I];return B}for(I=arguments.length,B=new Array(I);I--;)B[I]=arguments[I];return B}var q=typeof Symbol<"u"?function(T){return T[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},et=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ws=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(et),ee={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function X(T,I){this.name=T,this.message=I}function te(T,I){return T+". Errors: "+Object.keys(I).map(function(B){return I[B].toString()}).filter(function(B,W,Q){return Q.indexOf(B)===W}).join(`
`)}function ue(T,I,B,W){this.failures=I,this.failedKeys=W,this.successCount=B,this.message=te(T,I)}function he(T,I){this.name="BulkError",this.failures=Object.keys(I).map(function(B){return I[B]}),this.failuresByPos=I,this.message=te(T,this.failures)}g(X).from(Error).extend({toString:function(){return this.name+": "+this.message}}),g(ue).from(X),g(he).from(X);var Z=Ws.reduce(function(T,I){return T[I]=I+"Error",T},{}),ce=X,ae=Ws.reduce(function(T,I){var B=I+"Error";function W(Q,oe){this.name=B,Q?typeof Q=="string"?(this.message="".concat(Q).concat(oe?`
 `+oe:""),this.inner=oe||null):typeof Q=="object"&&(this.message="".concat(Q.name," ").concat(Q.message),this.inner=Q):(this.message=ee[I]||B,this.inner=null)}return g(W).from(ce),T[I]=W,T},{});ae.Syntax=SyntaxError,ae.Type=TypeError,ae.Range=RangeError;var Te=et.reduce(function(T,I){return T[I+"Error"]=ae[I],T},{}),Ce=Ws.reduce(function(T,I){return["Syntax","Type","Range"].indexOf(I)===-1&&(T[I+"Error"]=ae[I]),T},{});function z(){}function re(T){return T}function ve(T,I){return T==null||T===re?I:function(B){return I(T(B))}}function ke(T,I){return function(){T.apply(this,arguments),I.apply(this,arguments)}}function Ee(T,I){return T===z?I:function(){var B=T.apply(this,arguments);B!==void 0&&(arguments[0]=B);var W=this.onsuccess,Q=this.onerror;this.onsuccess=null,this.onerror=null;var oe=I.apply(this,arguments);return W&&(this.onsuccess=this.onsuccess?ke(W,this.onsuccess):W),Q&&(this.onerror=this.onerror?ke(Q,this.onerror):Q),oe!==void 0?oe:B}}function be(T,I){return T===z?I:function(){T.apply(this,arguments);var B=this.onsuccess,W=this.onerror;this.onsuccess=this.onerror=null,I.apply(this,arguments),B&&(this.onsuccess=this.onsuccess?ke(B,this.onsuccess):B),W&&(this.onerror=this.onerror?ke(W,this.onerror):W)}}function Se(T,I){return T===z?I:function(B){var W=T.apply(this,arguments);u(B,W);var Q=this.onsuccess,oe=this.onerror;return this.onsuccess=null,this.onerror=null,B=I.apply(this,arguments),Q&&(this.onsuccess=this.onsuccess?ke(Q,this.onsuccess):Q),oe&&(this.onerror=this.onerror?ke(oe,this.onerror):oe),W===void 0?B===void 0?void 0:B:u(W,B)}}function _e(T,I){return T===z?I:function(){return I.apply(this,arguments)!==!1&&T.apply(this,arguments)}}function Ne(T,I){return T===z?I:function(){var B=T.apply(this,arguments);if(B&&typeof B.then=="function"){for(var W=this,Q=arguments.length,oe=new Array(Q);Q--;)oe[Q]=arguments[Q];return B.then(function(){return I.apply(W,oe)})}return I.apply(this,arguments)}}Ce.ModifyError=ue,Ce.DexieError=X,Ce.BulkError=he;var Me=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function st(T){Me=T}var qe={},Ae=100,St=typeof Promise>"u"?[]:function(){var T=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[T,l(T),T];var I=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[I,l(I),T]}(),et=St[0],Ws=St[1],St=St[2],Ws=Ws&&Ws.then,Lt=et&&et.constructor,Pt=!!St,en=function(T,I){Ye.push([T,I]),bn&&(queueMicrotask(ln),bn=!1)},zt=!0,bn=!0,ht=[],Nt=[],fe=re,Le={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:z,pgp:!1,env:{},finalize:z},ne=Le,Ye=[],Et=0,tn=[];function ct(T){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var I=this._PSD=ne;if(typeof T!="function"){if(T!==qe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&As(this,this._value))}this._state=null,this._value=null,++I.ref,function B(W,Q){try{Q(function(oe){if(W._state===null){if(oe===W)throw new TypeError("A promise cannot be resolved with itself.");var me=W._lib&&Vt();oe&&typeof oe.then=="function"?B(W,function(we,Re){oe instanceof ct?oe._then(we,Re):oe.then(we,Re)}):(W._state=!0,W._value=oe,ir(W)),me&&cr()}},As.bind(null,W))}catch(oe){As(W,oe)}}(this,T)}var Wt={get:function(){var T=ne,I=Wo;function B(W,Q){var oe=this,me=!T.global&&(T!==ne||I!==Wo),we=me&&!Vn(),Re=new ct(function(De,Be){jr(oe,new Fn(ao(W,T,me,we),ao(Q,T,me,we),De,Be,T))});return this._consoleTask&&(Re._consoleTask=this._consoleTask),Re}return B.prototype=qe,B},set:function(T){p(this,"then",T&&T.prototype===qe?Wt:{get:function(){return T},set:Wt.set})}};function Fn(T,I,B,W,Q){this.onFulfilled=typeof T=="function"?T:null,this.onRejected=typeof I=="function"?I:null,this.resolve=B,this.reject=W,this.psd=Q}function As(T,I){var B,W;Nt.push(I),T._state===null&&(B=T._lib&&Vt(),I=fe(I),T._state=!1,T._value=I,W=T,ht.some(function(Q){return Q._value===W._value})||ht.push(W),ir(T),B&&cr())}function ir(T){var I=T._listeners;T._listeners=[];for(var B=0,W=I.length;B<W;++B)jr(T,I[B]);var Q=T._PSD;--Q.ref||Q.finalize(),Et===0&&(++Et,en(function(){--Et==0&&ms()},[]))}function jr(T,I){if(T._state!==null){var B=T._state?I.onFulfilled:I.onRejected;if(B===null)return(T._state?I.resolve:I.reject)(T._value);++I.psd.ref,++Et,en(yt,[B,T,I])}else T._listeners.push(I)}function yt(T,I,B){try{var W,Q=I._value;!I._state&&Nt.length&&(Nt=[]),W=Me&&I._consoleTask?I._consoleTask.run(function(){return T(Q)}):T(Q),I._state||Nt.indexOf(Q)!==-1||function(oe){for(var me=ht.length;me;)if(ht[--me]._value===oe._value)return ht.splice(me,1)}(I),B.resolve(W)}catch(oe){B.reject(oe)}finally{--Et==0&&ms(),--B.psd.ref||B.psd.finalize()}}function ln(){Kr(Le,function(){Vt()&&cr()})}function Vt(){var T=zt;return bn=zt=!1,T}function cr(){var T,I,B;do for(;0<Ye.length;)for(T=Ye,Ye=[],B=T.length,I=0;I<B;++I){var W=T[I];W[0].apply(null,W[1])}while(0<Ye.length);bn=zt=!0}function ms(){var T=ht;ht=[],T.forEach(function(W){W._PSD.onunhandled.call(null,W._value,W)});for(var I=tn.slice(0),B=I.length;B;)I[--B]()}function Is(T){return new ct(qe,!1,T)}function Bn(T,I){var B=ne;return function(){var W=Vt(),Q=ne;try{return wr(B,!0),T.apply(this,arguments)}catch(oe){I&&I(oe)}finally{wr(Q,!1),W&&cr()}}}f(ct.prototype,{then:Wt,_then:function(T,I){jr(this,new Fn(null,null,T,I,ne))},catch:function(T){if(arguments.length===1)return this.then(null,T);var I=T,B=arguments[1];return typeof I=="function"?this.then(null,function(W){return(W instanceof I?B:Is)(W)}):this.then(null,function(W){return(W&&W.name===I?B:Is)(W)})},finally:function(T){return this.then(function(I){return ct.resolve(T()).then(function(){return I})},function(I){return ct.resolve(T()).then(function(){return Is(I)})})},timeout:function(T,I){var B=this;return T<1/0?new ct(function(W,Q){var oe=setTimeout(function(){return Q(new ae.Timeout(I))},T);B.then(W,Q).finally(clearTimeout.bind(null,oe))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&p(ct.prototype,Symbol.toStringTag,"Dexie.Promise"),Le.env=di(),f(ct,{all:function(){var T=K.apply(null,arguments).map(hr);return new ct(function(I,B){T.length===0&&I([]);var W=T.length;T.forEach(function(Q,oe){return ct.resolve(Q).then(function(me){T[oe]=me,--W||I(T)},B)})})},resolve:function(T){return T instanceof ct?T:T&&typeof T.then=="function"?new ct(function(I,B){T.then(I,B)}):new ct(qe,!0,T)},reject:Is,race:function(){var T=K.apply(null,arguments).map(hr);return new ct(function(I,B){T.map(function(W){return ct.resolve(W).then(I,B)})})},PSD:{get:function(){return ne},set:function(T){return ne=T}},totalEchoes:{get:function(){return Wo}},newPSD:Ct,usePSD:Kr,scheduler:{get:function(){return en},set:function(T){en=T}},rejectionMapper:{get:function(){return fe},set:function(T){fe=T}},follow:function(T,I){return new ct(function(B,W){return Ct(function(Q,oe){var me=ne;me.unhandleds=[],me.onunhandled=oe,me.finalize=ke(function(){var we,Re=this;we=function(){Re.unhandleds.length===0?Q():oe(Re.unhandleds[0])},tn.push(function De(){we(),tn.splice(tn.indexOf(De),1)}),++Et,en(function(){--Et==0&&ms()},[])},me.finalize),T()},I,B,W)})}}),Lt&&(Lt.allSettled&&p(ct,"allSettled",function(){var T=K.apply(null,arguments).map(hr);return new ct(function(I){T.length===0&&I([]);var B=T.length,W=new Array(B);T.forEach(function(Q,oe){return ct.resolve(Q).then(function(me){return W[oe]={status:"fulfilled",value:me}},function(me){return W[oe]={status:"rejected",reason:me}}).then(function(){return--B||I(W)})})})}),Lt.any&&typeof AggregateError<"u"&&p(ct,"any",function(){var T=K.apply(null,arguments).map(hr);return new ct(function(I,B){T.length===0&&B(new AggregateError([]));var W=T.length,Q=new Array(W);T.forEach(function(oe,me){return ct.resolve(oe).then(function(we){return I(we)},function(we){Q[me]=we,--W||B(new AggregateError(Q))})})})}),Lt.withResolvers&&(ct.withResolvers=Lt.withResolvers));var or={awaits:0,echoes:0,id:0},tc=0,Ko=[],zo=0,Wo=0,Ze=0;function Ct(T,I,B,W){var Q=ne,oe=Object.create(Q);return oe.parent=Q,oe.ref=0,oe.global=!1,oe.id=++Ze,Le.env,oe.env=Pt?{Promise:ct,PromiseProp:{value:ct,configurable:!0,writable:!0},all:ct.all,race:ct.race,allSettled:ct.allSettled,any:ct.any,resolve:ct.resolve,reject:ct.reject}:{},I&&u(oe,I),++Q.ref,oe.finalize=function(){--this.parent.ref||this.parent.finalize()},W=Kr(oe,T,B,W),oe.ref===0&&oe.finalize(),W}function dn(){return or.id||(or.id=++tc),++or.awaits,or.echoes+=Ae,or.id}function Vn(){return!!or.awaits&&(--or.awaits==0&&(or.id=0),or.echoes=or.awaits*Ae,!0)}function hr(T){return or.echoes&&T&&T.constructor===Lt?(dn(),T.then(function(I){return Vn(),I},function(I){return Vn(),gt(I)})):T}function Pi(){var T=Ko[Ko.length-1];Ko.pop(),wr(T,!1)}function wr(T,I){var B,W=ne;(I?!or.echoes||zo++&&T===ne:!zo||--zo&&T===ne)||queueMicrotask(I?(function(Q){++Wo,or.echoes&&--or.echoes!=0||(or.echoes=or.awaits=or.id=0),Ko.push(ne),wr(Q,!0)}).bind(null,T):Pi),T!==ne&&(ne=T,W===Le&&(Le.env=di()),Pt&&(B=Le.env.Promise,I=T.env,(W.global||T.global)&&(Object.defineProperty(i,"Promise",I.PromiseProp),B.all=I.all,B.race=I.race,B.resolve=I.resolve,B.reject=I.reject,I.allSettled&&(B.allSettled=I.allSettled),I.any&&(B.any=I.any))))}function di(){var T=i.Promise;return Pt?{Promise:T,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:T.all,race:T.race,allSettled:T.allSettled,any:T.any,resolve:T.resolve,reject:T.reject}:{}}function Kr(T,I,B,W,Q){var oe=ne;try{return wr(T,!0),I(B,W,Q)}finally{wr(oe,!1)}}function ao(T,I,B,W){return typeof T!="function"?T:function(){var Q=ne;B&&dn(),wr(I,!0);try{return T.apply(this,arguments)}finally{wr(Q,!1),W&&queueMicrotask(Vn)}}}function Qe(T){Promise===Lt&&or.echoes===0?zo===0?T():enqueueNativeMicroTask(T):setTimeout(T,0)}(""+Ws).indexOf("[native code]")===-1&&(dn=Vn=z);var gt=ct.reject,Gt="",rn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",vr="String expected.",yr=[],zs="__dbnames",fi="readonly",Go="readwrite";function qo(T,I){return T?I?function(){return T.apply(this,arguments)&&I.apply(this,arguments)}:T:I}var cf={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Tl(T){return typeof T!="string"||/\./.test(T)?function(I){return I}:function(I){return I[T]===void 0&&T in I&&delete(I=U(I))[T],I}}function df(){throw ae.Type()}function Pn(T,I){try{var B=SS(T),W=SS(I);if(B!==W)return B==="Array"?1:W==="Array"?-1:B==="binary"?1:W==="binary"?-1:B==="string"?1:W==="string"?-1:B==="Date"?1:W!=="Date"?NaN:-1;switch(B){case"number":case"Date":case"string":return I<T?1:T<I?-1:0;case"binary":return function(Q,oe){for(var me=Q.length,we=oe.length,Re=me<we?me:we,De=0;De<Re;++De)if(Q[De]!==oe[De])return Q[De]<oe[De]?-1:1;return me===we?0:me<we?-1:1}(wS(T),wS(I));case"Array":return function(Q,oe){for(var me=Q.length,we=oe.length,Re=me<we?me:we,De=0;De<Re;++De){var Be=Pn(Q[De],oe[De]);if(Be!==0)return Be}return me===we?0:me<we?-1:1}(T,I)}}catch{}return NaN}function SS(T){var I=typeof T;return I!="object"?I:ArrayBuffer.isView(T)?"binary":(T=N(T),T==="ArrayBuffer"?"binary":T)}function wS(T){return T instanceof Uint8Array?T:ArrayBuffer.isView(T)?new Uint8Array(T.buffer,T.byteOffset,T.byteLength):new Uint8Array(T)}var ES=(er.prototype._trans=function(T,I,B){var W=this._tx||ne.trans,Q=this.name,oe=Me&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(T==="readonly"?"read":"write"," ").concat(this.name));function me(De,Be,xe){if(!xe.schema[Q])throw new ae.NotFound("Table "+Q+" not part of transaction");return I(xe.idbtrans,xe)}var we=Vt();try{var Re=W&&W.db._novip===this.db._novip?W===ne.trans?W._promise(T,me,B):Ct(function(){return W._promise(T,me,B)},{trans:W,transless:ne.transless||ne}):function De(Be,xe,He,Pe){if(Be.idbdb&&(Be._state.openComplete||ne.letThrough||Be._vip)){var Fe=Be._createTransaction(xe,He,Be._dbSchema);try{Fe.create(),Be._state.PR1398_maxLoop=3}catch(Ue){return Ue.name===Z.InvalidState&&Be.isOpen()&&0<--Be._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Be.close({disableAutoOpen:!1}),Be.open().then(function(){return De(Be,xe,He,Pe)})):gt(Ue)}return Fe._promise(xe,function(Ue,$e){return Ct(function(){return ne.trans=Fe,Pe(Ue,$e,Fe)})}).then(function(Ue){if(xe==="readwrite")try{Fe.idbtrans.commit()}catch{}return xe==="readonly"?Ue:Fe._completion.then(function(){return Ue})})}if(Be._state.openComplete)return gt(new ae.DatabaseClosed(Be._state.dbOpenError));if(!Be._state.isBeingOpened){if(!Be._state.autoOpen)return gt(new ae.DatabaseClosed);Be.open().catch(z)}return Be._state.dbReadyPromise.then(function(){return De(Be,xe,He,Pe)})}(this.db,T,[this.name],me);return oe&&(Re._consoleTask=oe,Re=Re.catch(function(De){return console.trace(De),gt(De)})),Re}finally{we&&cr()}},er.prototype.get=function(T,I){var B=this;return T&&T.constructor===Object?this.where(T).first(I):T==null?gt(new ae.Type("Invalid argument to Table.get()")):this._trans("readonly",function(W){return B.core.get({trans:W,key:T}).then(function(Q){return B.hook.reading.fire(Q)})}).then(I)},er.prototype.where=function(T){if(typeof T=="string")return new this.db.WhereClause(this,T);if(a(T))return new this.db.WhereClause(this,"[".concat(T.join("+"),"]"));var I=o(T);if(I.length===1)return this.where(I[0]).equals(T[I[0]]);var B=this.schema.indexes.concat(this.schema.primKey).filter(function(we){if(we.compound&&I.every(function(De){return 0<=we.keyPath.indexOf(De)})){for(var Re=0;Re<I.length;++Re)if(I.indexOf(we.keyPath[Re])===-1)return!1;return!0}return!1}).sort(function(we,Re){return we.keyPath.length-Re.keyPath.length})[0];if(B&&this.db._maxKey!==Gt){var oe=B.keyPath.slice(0,I.length);return this.where(oe).equals(oe.map(function(Re){return T[Re]}))}!B&&Me&&console.warn("The query ".concat(JSON.stringify(T)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(I.join("+"),"]"));var W=this.schema.idxByName;function Q(we,Re){return Pn(we,Re)===0}var me=I.reduce(function(xe,Re){var De=xe[0],Be=xe[1],xe=W[Re],He=T[Re];return[De||xe,De||!xe?qo(Be,xe&&xe.multi?function(Pe){return Pe=x(Pe,Re),a(Pe)&&Pe.some(function(Fe){return Q(He,Fe)})}:function(Pe){return Q(He,x(Pe,Re))}):Be]},[null,null]),oe=me[0],me=me[1];return oe?this.where(oe.name).equals(T[oe.keyPath]).filter(me):B?this.filter(me):this.where(I).equals("")},er.prototype.filter=function(T){return this.toCollection().and(T)},er.prototype.count=function(T){return this.toCollection().count(T)},er.prototype.offset=function(T){return this.toCollection().offset(T)},er.prototype.limit=function(T){return this.toCollection().limit(T)},er.prototype.each=function(T){return this.toCollection().each(T)},er.prototype.toArray=function(T){return this.toCollection().toArray(T)},er.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},er.prototype.orderBy=function(T){return new this.db.Collection(new this.db.WhereClause(this,a(T)?"[".concat(T.join("+"),"]"):T))},er.prototype.reverse=function(){return this.toCollection().reverse()},er.prototype.mapToClass=function(T){var I,B=this.db,W=this.name;function Q(){return I!==null&&I.apply(this,arguments)||this}(this.schema.mappedClass=T).prototype instanceof df&&(function(Re,De){if(typeof De!="function"&&De!==null)throw new TypeError("Class extends value "+String(De)+" is not a constructor or null");function Be(){this.constructor=Re}n(Re,De),Re.prototype=De===null?Object.create(De):(Be.prototype=De.prototype,new Be)}(Q,I=T),Object.defineProperty(Q.prototype,"db",{get:function(){return B},enumerable:!1,configurable:!0}),Q.prototype.table=function(){return W},T=Q);for(var oe=new Set,me=T.prototype;me;me=l(me))Object.getOwnPropertyNames(me).forEach(function(Re){return oe.add(Re)});function we(Re){if(!Re)return Re;var De,Be=Object.create(T.prototype);for(De in Re)if(!oe.has(De))try{Be[De]=Re[De]}catch{}return Be}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=we,this.hook("reading",we),T},er.prototype.defineClass=function(){return this.mapToClass(function(T){u(this,T)})},er.prototype.add=function(T,I){var B=this,W=this.schema.primKey,Q=W.auto,oe=W.keyPath,me=T;return oe&&Q&&(me=Tl(oe)(T)),this._trans("readwrite",function(we){return B.core.mutate({trans:we,type:"add",keys:I!=null?[I]:null,values:[me]})}).then(function(we){return we.numFailures?ct.reject(we.failures[0]):we.lastResult}).then(function(we){if(oe)try{k(T,oe,we)}catch{}return we})},er.prototype.update=function(T,I){return typeof T!="object"||a(T)?this.where(":id").equals(T).modify(I):(T=x(T,this.schema.primKey.keyPath),T===void 0?gt(new ae.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(T).modify(I))},er.prototype.put=function(T,I){var B=this,W=this.schema.primKey,Q=W.auto,oe=W.keyPath,me=T;return oe&&Q&&(me=Tl(oe)(T)),this._trans("readwrite",function(we){return B.core.mutate({trans:we,type:"put",values:[me],keys:I!=null?[I]:null})}).then(function(we){return we.numFailures?ct.reject(we.failures[0]):we.lastResult}).then(function(we){if(oe)try{k(T,oe,we)}catch{}return we})},er.prototype.delete=function(T){var I=this;return this._trans("readwrite",function(B){return I.core.mutate({trans:B,type:"delete",keys:[T]})}).then(function(B){return B.numFailures?ct.reject(B.failures[0]):void 0})},er.prototype.clear=function(){var T=this;return this._trans("readwrite",function(I){return T.core.mutate({trans:I,type:"deleteRange",range:cf})}).then(function(I){return I.numFailures?ct.reject(I.failures[0]):void 0})},er.prototype.bulkGet=function(T){var I=this;return this._trans("readonly",function(B){return I.core.getMany({keys:T,trans:B}).then(function(W){return W.map(function(Q){return I.hook.reading.fire(Q)})})})},er.prototype.bulkAdd=function(T,I,B){var W=this,Q=Array.isArray(I)?I:void 0,oe=(B=B||(Q?void 0:I))?B.allKeys:void 0;return this._trans("readwrite",function(me){var De=W.schema.primKey,we=De.auto,De=De.keyPath;if(De&&Q)throw new ae.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(Q&&Q.length!==T.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");var Re=T.length,De=De&&we?T.map(Tl(De)):T;return W.core.mutate({trans:me,type:"add",keys:Q,values:De,wantResults:oe}).then(function(Fe){var xe=Fe.numFailures,He=Fe.results,Pe=Fe.lastResult,Fe=Fe.failures;if(xe===0)return oe?He:Pe;throw new he("".concat(W.name,".bulkAdd(): ").concat(xe," of ").concat(Re," operations failed"),Fe)})})},er.prototype.bulkPut=function(T,I,B){var W=this,Q=Array.isArray(I)?I:void 0,oe=(B=B||(Q?void 0:I))?B.allKeys:void 0;return this._trans("readwrite",function(me){var De=W.schema.primKey,we=De.auto,De=De.keyPath;if(De&&Q)throw new ae.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(Q&&Q.length!==T.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");var Re=T.length,De=De&&we?T.map(Tl(De)):T;return W.core.mutate({trans:me,type:"put",keys:Q,values:De,wantResults:oe}).then(function(Fe){var xe=Fe.numFailures,He=Fe.results,Pe=Fe.lastResult,Fe=Fe.failures;if(xe===0)return oe?He:Pe;throw new he("".concat(W.name,".bulkPut(): ").concat(xe," of ").concat(Re," operations failed"),Fe)})})},er.prototype.bulkUpdate=function(T){var I=this,B=this.core,W=T.map(function(me){return me.key}),Q=T.map(function(me){return me.changes}),oe=[];return this._trans("readwrite",function(me){return B.getMany({trans:me,keys:W,cache:"clone"}).then(function(we){var Re=[],De=[];T.forEach(function(xe,He){var Pe=xe.key,Fe=xe.changes,Ue=we[He];if(Ue){for(var $e=0,Xe=Object.keys(Fe);$e<Xe.length;$e++){var Je=Xe[$e],tt=Fe[Je];if(Je===I.schema.primKey.keyPath){if(Pn(tt,Pe)!==0)throw new ae.Constraint("Cannot update primary key in bulkUpdate()")}else k(Ue,Je,tt)}oe.push(He),Re.push(Pe),De.push(Ue)}});var Be=Re.length;return B.mutate({trans:me,type:"put",keys:Re,values:De,updates:{keys:W,changeSpecs:Q}}).then(function(xe){var He=xe.numFailures,Pe=xe.failures;if(He===0)return Be;for(var Fe=0,Ue=Object.keys(Pe);Fe<Ue.length;Fe++){var $e,Xe=Ue[Fe],Je=oe[Number(Xe)];Je!=null&&($e=Pe[Xe],delete Pe[Xe],Pe[Je]=$e)}throw new he("".concat(I.name,".bulkUpdate(): ").concat(He," of ").concat(Be," operations failed"),Pe)})})})},er.prototype.bulkDelete=function(T){var I=this,B=T.length;return this._trans("readwrite",function(W){return I.core.mutate({trans:W,type:"delete",keys:T})}).then(function(me){var Q=me.numFailures,oe=me.lastResult,me=me.failures;if(Q===0)return oe;throw new he("".concat(I.name,".bulkDelete(): ").concat(Q," of ").concat(B," operations failed"),me)})},er);function er(){}function nc(T){function I(me,we){if(we){for(var Re=arguments.length,De=new Array(Re-1);--Re;)De[Re-1]=arguments[Re];return B[me].subscribe.apply(null,De),T}if(typeof me=="string")return B[me]}var B={};I.addEventType=oe;for(var W=1,Q=arguments.length;W<Q;++W)oe(arguments[W]);return I;function oe(me,we,Re){if(typeof me!="object"){var De;we=we||_e;var Be={subscribers:[],fire:Re=Re||z,subscribe:function(xe){Be.subscribers.indexOf(xe)===-1&&(Be.subscribers.push(xe),Be.fire=we(Be.fire,xe))},unsubscribe:function(xe){Be.subscribers=Be.subscribers.filter(function(He){return He!==xe}),Be.fire=Be.subscribers.reduce(we,Re)}};return B[me]=I[me]=Be}o(De=me).forEach(function(xe){var He=De[xe];if(a(He))oe(xe,De[xe][0],De[xe][1]);else{if(He!=="asap")throw new ae.InvalidArgument("Invalid event config");var Pe=oe(xe,re,function(){for(var Fe=arguments.length,Ue=new Array(Fe);Fe--;)Ue[Fe]=arguments[Fe];Pe.subscribers.forEach(function($e){E(function(){$e.apply(null,Ue)})})})}})}}function rc(T,I){return g(I).from({prototype:T}),I}function Cl(T,I){return!(T.filter||T.algorithm||T.or)&&(I?T.justLimit:!T.replayFilter)}function ng(T,I){T.filter=qo(T.filter,I)}function rg(T,I,B){var W=T.replayFilter;T.replayFilter=W?function(){return qo(W(),I())}:I,T.justLimit=B&&!W}function ff(T,I){if(T.isPrimKey)return I.primaryKey;var B=I.getIndexByKeyPath(T.index);if(!B)throw new ae.Schema("KeyPath "+T.index+" on object store "+I.name+" is not indexed");return B}function xS(T,I,B){var W=ff(T,I.schema);return I.openCursor({trans:B,values:!T.keysOnly,reverse:T.dir==="prev",unique:!!T.unique,query:{index:W,range:T.range}})}function hf(T,I,B,W){var Q=T.replayFilter?qo(T.filter,T.replayFilter()):T.filter;if(T.or){var oe={},me=function(we,Re,De){var Be,xe;Q&&!Q(Re,De,function(He){return Re.stop(He)},function(He){return Re.fail(He)})||((xe=""+(Be=Re.primaryKey))=="[object ArrayBuffer]"&&(xe=""+new Uint8Array(Be)),d(oe,xe)||(oe[xe]=!0,I(we,Re,De)))};return Promise.all([T.or._iterate(me,B),TS(xS(T,W,B),T.algorithm,me,!T.keysOnly&&T.valueMapper)])}return TS(xS(T,W,B),qo(T.algorithm,Q),I,!T.keysOnly&&T.valueMapper)}function TS(T,I,B,W){var Q=Bn(W?function(oe,me,we){return B(W(oe),me,we)}:B);return T.then(function(oe){if(oe)return oe.start(function(){var me=function(){return oe.continue()};I&&!I(oe,function(we){return me=we},function(we){oe.stop(we),me=z},function(we){oe.fail(we),me=z})||Q(oe.value,oe,function(we){return me=we}),me()})})}var sc=(CS.prototype.execute=function(T){var I=this["@@propmod"];if(I.add!==void 0){var B=I.add;if(a(B))return s(s([],a(T)?T:[],!0),B).sort();if(typeof B=="number")return(Number(T)||0)+B;if(typeof B=="bigint")try{return BigInt(T)+B}catch{return BigInt(0)+B}throw new TypeError("Invalid term ".concat(B))}if(I.remove!==void 0){var W=I.remove;if(a(W))return a(T)?T.filter(function(Q){return!W.includes(Q)}).sort():[];if(typeof W=="number")return Number(T)-W;if(typeof W=="bigint")try{return BigInt(T)-W}catch{return BigInt(0)-W}throw new TypeError("Invalid subtrahend ".concat(W))}return B=(B=I.replacePrefix)===null||B===void 0?void 0:B[0],B&&typeof T=="string"&&T.startsWith(B)?I.replacePrefix[1]+T.substring(B.length):T},CS);function CS(T){this["@@propmod"]=T}var nO=(Mn.prototype._read=function(T,I){var B=this._ctx;return B.error?B.table._trans(null,gt.bind(null,B.error)):B.table._trans("readonly",T).then(I)},Mn.prototype._write=function(T){var I=this._ctx;return I.error?I.table._trans(null,gt.bind(null,I.error)):I.table._trans("readwrite",T,"locked")},Mn.prototype._addAlgorithm=function(T){var I=this._ctx;I.algorithm=qo(I.algorithm,T)},Mn.prototype._iterate=function(T,I){return hf(this._ctx,T,I,this._ctx.table.core)},Mn.prototype.clone=function(T){var I=Object.create(this.constructor.prototype),B=Object.create(this._ctx);return T&&u(B,T),I._ctx=B,I},Mn.prototype.raw=function(){return this._ctx.valueMapper=null,this},Mn.prototype.each=function(T){var I=this._ctx;return this._read(function(B){return hf(I,T,B,I.table.core)})},Mn.prototype.count=function(T){var I=this;return this._read(function(B){var W=I._ctx,Q=W.table.core;if(Cl(W,!0))return Q.count({trans:B,query:{index:ff(W,Q.schema),range:W.range}}).then(function(me){return Math.min(me,W.limit)});var oe=0;return hf(W,function(){return++oe,!1},B,Q).then(function(){return oe})}).then(T)},Mn.prototype.sortBy=function(T,I){var B=T.split(".").reverse(),W=B[0],Q=B.length-1;function oe(Re,De){return De?oe(Re[B[De]],De-1):Re[W]}var me=this._ctx.dir==="next"?1:-1;function we(Re,De){return Pn(oe(Re,Q),oe(De,Q))*me}return this.toArray(function(Re){return Re.sort(we)}).then(I)},Mn.prototype.toArray=function(T){var I=this;return this._read(function(B){var W=I._ctx;if(W.dir==="next"&&Cl(W,!0)&&0<W.limit){var Q=W.valueMapper,oe=ff(W,W.table.core.schema);return W.table.core.query({trans:B,limit:W.limit,values:!0,query:{index:oe,range:W.range}}).then(function(we){return we=we.result,Q?we.map(Q):we})}var me=[];return hf(W,function(we){return me.push(we)},B,W.table.core).then(function(){return me})},T)},Mn.prototype.offset=function(T){var I=this._ctx;return T<=0||(I.offset+=T,Cl(I)?rg(I,function(){var B=T;return function(W,Q){return B===0||(B===1?--B:Q(function(){W.advance(B),B=0}),!1)}}):rg(I,function(){var B=T;return function(){return--B<0}})),this},Mn.prototype.limit=function(T){return this._ctx.limit=Math.min(this._ctx.limit,T),rg(this._ctx,function(){var I=T;return function(B,W,Q){return--I<=0&&W(Q),0<=I}},!0),this},Mn.prototype.until=function(T,I){return ng(this._ctx,function(B,W,Q){return!T(B.value)||(W(Q),I)}),this},Mn.prototype.first=function(T){return this.limit(1).toArray(function(I){return I[0]}).then(T)},Mn.prototype.last=function(T){return this.reverse().first(T)},Mn.prototype.filter=function(T){var I;return ng(this._ctx,function(B){return T(B.value)}),(I=this._ctx).isMatch=qo(I.isMatch,T),this},Mn.prototype.and=function(T){return this.filter(T)},Mn.prototype.or=function(T){return new this.db.WhereClause(this._ctx.table,T,this)},Mn.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Mn.prototype.desc=function(){return this.reverse()},Mn.prototype.eachKey=function(T){var I=this._ctx;return I.keysOnly=!I.isMatch,this.each(function(B,W){T(W.key,W)})},Mn.prototype.eachUniqueKey=function(T){return this._ctx.unique="unique",this.eachKey(T)},Mn.prototype.eachPrimaryKey=function(T){var I=this._ctx;return I.keysOnly=!I.isMatch,this.each(function(B,W){T(W.primaryKey,W)})},Mn.prototype.keys=function(T){var I=this._ctx;I.keysOnly=!I.isMatch;var B=[];return this.each(function(W,Q){B.push(Q.key)}).then(function(){return B}).then(T)},Mn.prototype.primaryKeys=function(T){var I=this._ctx;if(I.dir==="next"&&Cl(I,!0)&&0<I.limit)return this._read(function(W){var Q=ff(I,I.table.core.schema);return I.table.core.query({trans:W,values:!1,limit:I.limit,query:{index:Q,range:I.range}})}).then(function(W){return W.result}).then(T);I.keysOnly=!I.isMatch;var B=[];return this.each(function(W,Q){B.push(Q.primaryKey)}).then(function(){return B}).then(T)},Mn.prototype.uniqueKeys=function(T){return this._ctx.unique="unique",this.keys(T)},Mn.prototype.firstKey=function(T){return this.limit(1).keys(function(I){return I[0]}).then(T)},Mn.prototype.lastKey=function(T){return this.reverse().firstKey(T)},Mn.prototype.distinct=function(){var T=this._ctx,T=T.index&&T.table.schema.idxByName[T.index];if(!T||!T.multi)return this;var I={};return ng(this._ctx,function(Q){var W=Q.primaryKey.toString(),Q=d(I,W);return I[W]=!0,!Q}),this},Mn.prototype.modify=function(T){var I=this,B=this._ctx;return this._write(function(W){var Q,oe,me;me=typeof T=="function"?T:(Q=o(T),oe=Q.length,function($e){for(var Xe=!1,Je=0;Je<oe;++Je){var tt=Q[Je],ot=T[tt],xt=x($e,tt);ot instanceof sc?(k($e,tt,ot.execute(xt)),Xe=!0):xt!==ot&&(k($e,tt,ot),Xe=!0)}return Xe});var we=B.table.core,xe=we.schema.primaryKey,Re=xe.outbound,De=xe.extractKey,Be=200,xe=I.db._options.modifyChunkSize;xe&&(Be=typeof xe=="object"?xe[we.name]||xe["*"]||200:xe);function He($e,tt){var Je=tt.failures,tt=tt.numFailures;Fe+=$e-tt;for(var ot=0,xt=o(Je);ot<xt.length;ot++){var It=xt[ot];Pe.push(Je[It])}}var Pe=[],Fe=0,Ue=[];return I.clone().primaryKeys().then(function($e){function Xe(tt){var ot=Math.min(Be,$e.length-tt);return we.getMany({trans:W,keys:$e.slice(tt,tt+ot),cache:"immutable"}).then(function(xt){for(var It=[],Tt=[],kt=Re?[]:null,$t=[],At=0;At<ot;++At){var Ht=xt[At],gn={value:U(Ht),primKey:$e[tt+At]};me.call(gn,gn.value,gn)!==!1&&(gn.value==null?$t.push($e[tt+At]):Re||Pn(De(Ht),De(gn.value))===0?(Tt.push(gn.value),Re&&kt.push($e[tt+At])):($t.push($e[tt+At]),It.push(gn.value)))}return Promise.resolve(0<It.length&&we.mutate({trans:W,type:"add",values:It}).then(function(kn){for(var _n in kn.failures)$t.splice(parseInt(_n),1);He(It.length,kn)})).then(function(){return(0<Tt.length||Je&&typeof T=="object")&&we.mutate({trans:W,type:"put",keys:kt,values:Tt,criteria:Je,changeSpec:typeof T!="function"&&T,isAdditionalChunk:0<tt}).then(function(kn){return He(Tt.length,kn)})}).then(function(){return(0<$t.length||Je&&T===sg)&&we.mutate({trans:W,type:"delete",keys:$t,criteria:Je,isAdditionalChunk:0<tt}).then(function(kn){return He($t.length,kn)})}).then(function(){return $e.length>tt+ot&&Xe(tt+Be)})})}var Je=Cl(B)&&B.limit===1/0&&(typeof T!="function"||T===sg)&&{index:B.index,range:B.range};return Xe(0).then(function(){if(0<Pe.length)throw new ue("Error modifying one or more objects",Pe,Fe,Ue);return $e.length})})})},Mn.prototype.delete=function(){var T=this._ctx,I=T.range;return Cl(T)&&(T.isPrimKey||I.type===3)?this._write(function(B){var W=T.table.core.schema.primaryKey,Q=I;return T.table.core.count({trans:B,query:{index:W,range:Q}}).then(function(oe){return T.table.core.mutate({trans:B,type:"deleteRange",range:Q}).then(function(me){var we=me.failures;if(me.lastResult,me.results,me=me.numFailures,me)throw new ue("Could not delete some values",Object.keys(we).map(function(Re){return we[Re]}),oe-me);return oe-me})})}):this.modify(sg)},Mn);function Mn(){}var sg=function(T,I){return I.value=null};function rO(T,I){return T<I?-1:T===I?0:1}function sO(T,I){return I<T?-1:T===I?0:1}function Rs(T,I,B){return T=T instanceof _S?new T.Collection(T):T,T._ctx.error=new(B||TypeError)(I),T}function kl(T){return new T.Collection(T,function(){return kS("")}).limit(0)}function pf(T,I,B,W){var Q,oe,me,we,Re,De,Be,xe=B.length;if(!B.every(function(Fe){return typeof Fe=="string"}))return Rs(T,vr);function He(Fe){Q=Fe==="next"?function($e){return $e.toUpperCase()}:function($e){return $e.toLowerCase()},oe=Fe==="next"?function($e){return $e.toLowerCase()}:function($e){return $e.toUpperCase()},me=Fe==="next"?rO:sO;var Ue=B.map(function($e){return{lower:oe($e),upper:Q($e)}}).sort(function($e,Xe){return me($e.lower,Xe.lower)});we=Ue.map(function($e){return $e.upper}),Re=Ue.map(function($e){return $e.lower}),Be=(De=Fe)==="next"?"":W}He("next"),T=new T.Collection(T,function(){return Yo(we[0],Re[xe-1]+W)}),T._ondirectionchange=function(Fe){He(Fe)};var Pe=0;return T._addAlgorithm(function(Fe,Ue,$e){var Xe=Fe.key;if(typeof Xe!="string")return!1;var Je=oe(Xe);if(I(Je,Re,Pe))return!0;for(var tt=null,ot=Pe;ot<xe;++ot){var xt=function(It,Tt,kt,$t,At,Ht){for(var gn=Math.min(It.length,$t.length),kn=-1,_n=0;_n<gn;++_n){var Ls=Tt[_n];if(Ls!==$t[_n])return At(It[_n],kt[_n])<0?It.substr(0,_n)+kt[_n]+kt.substr(_n+1):At(It[_n],$t[_n])<0?It.substr(0,_n)+$t[_n]+kt.substr(_n+1):0<=kn?It.substr(0,kn)+Tt[kn]+kt.substr(kn+1):null;At(It[_n],Ls)<0&&(kn=_n)}return gn<$t.length&&Ht==="next"?It+kt.substr(It.length):gn<It.length&&Ht==="prev"?It.substr(0,kt.length):kn<0?null:It.substr(0,kn)+$t[kn]+kt.substr(kn+1)}(Xe,Je,we[ot],Re[ot],me,De);xt===null&&tt===null?Pe=ot+1:(tt===null||0<me(tt,xt))&&(tt=xt)}return Ue(tt!==null?function(){Fe.continue(tt+Be)}:$e),!1}),T}function Yo(T,I,B,W){return{type:2,lower:T,upper:I,lowerOpen:B,upperOpen:W}}function kS(T){return{type:1,lower:T,upper:T}}var _S=(Object.defineProperty(Rr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Rr.prototype.between=function(T,I,B,W){B=B!==!1,W=W===!0;try{return 0<this._cmp(T,I)||this._cmp(T,I)===0&&(B||W)&&(!B||!W)?kl(this):new this.Collection(this,function(){return Yo(T,I,!B,!W)})}catch{return Rs(this,rn)}},Rr.prototype.equals=function(T){return T==null?Rs(this,rn):new this.Collection(this,function(){return kS(T)})},Rr.prototype.above=function(T){return T==null?Rs(this,rn):new this.Collection(this,function(){return Yo(T,void 0,!0)})},Rr.prototype.aboveOrEqual=function(T){return T==null?Rs(this,rn):new this.Collection(this,function(){return Yo(T,void 0,!1)})},Rr.prototype.below=function(T){return T==null?Rs(this,rn):new this.Collection(this,function(){return Yo(void 0,T,!1,!0)})},Rr.prototype.belowOrEqual=function(T){return T==null?Rs(this,rn):new this.Collection(this,function(){return Yo(void 0,T)})},Rr.prototype.startsWith=function(T){return typeof T!="string"?Rs(this,vr):this.between(T,T+Gt,!0,!0)},Rr.prototype.startsWithIgnoreCase=function(T){return T===""?this.startsWith(T):pf(this,function(I,B){return I.indexOf(B[0])===0},[T],Gt)},Rr.prototype.equalsIgnoreCase=function(T){return pf(this,function(I,B){return I===B[0]},[T],"")},Rr.prototype.anyOfIgnoreCase=function(){var T=K.apply(M,arguments);return T.length===0?kl(this):pf(this,function(I,B){return B.indexOf(I)!==-1},T,"")},Rr.prototype.startsWithAnyOfIgnoreCase=function(){var T=K.apply(M,arguments);return T.length===0?kl(this):pf(this,function(I,B){return B.some(function(W){return I.indexOf(W)===0})},T,Gt)},Rr.prototype.anyOf=function(){var T=this,I=K.apply(M,arguments),B=this._cmp;try{I.sort(B)}catch{return Rs(this,rn)}if(I.length===0)return kl(this);var W=new this.Collection(this,function(){return Yo(I[0],I[I.length-1])});W._ondirectionchange=function(oe){B=oe==="next"?T._ascending:T._descending,I.sort(B)};var Q=0;return W._addAlgorithm(function(oe,me,we){for(var Re=oe.key;0<B(Re,I[Q]);)if(++Q===I.length)return me(we),!1;return B(Re,I[Q])===0||(me(function(){oe.continue(I[Q])}),!1)}),W},Rr.prototype.notEqual=function(T){return this.inAnyRange([[-1/0,T],[T,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Rr.prototype.noneOf=function(){var T=K.apply(M,arguments);if(T.length===0)return new this.Collection(this);try{T.sort(this._ascending)}catch{return Rs(this,rn)}var I=T.reduce(function(B,W){return B?B.concat([[B[B.length-1][1],W]]):[[-1/0,W]]},null);return I.push([T[T.length-1],this.db._maxKey]),this.inAnyRange(I,{includeLowers:!1,includeUppers:!1})},Rr.prototype.inAnyRange=function(Xe,I){var B=this,W=this._cmp,Q=this._ascending,oe=this._descending,me=this._min,we=this._max;if(Xe.length===0)return kl(this);if(!Xe.every(function(Je){return Je[0]!==void 0&&Je[1]!==void 0&&Q(Je[0],Je[1])<=0}))return Rs(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ae.InvalidArgument);var Re=!I||I.includeLowers!==!1,De=I&&I.includeUppers===!0,Be,xe=Q;function He(Je,tt){return xe(Je[0],tt[0])}try{(Be=Xe.reduce(function(Je,tt){for(var ot=0,xt=Je.length;ot<xt;++ot){var It=Je[ot];if(W(tt[0],It[1])<0&&0<W(tt[1],It[0])){It[0]=me(It[0],tt[0]),It[1]=we(It[1],tt[1]);break}}return ot===xt&&Je.push(tt),Je},[])).sort(He)}catch{return Rs(this,rn)}var Pe=0,Fe=De?function(Je){return 0<Q(Je,Be[Pe][1])}:function(Je){return 0<=Q(Je,Be[Pe][1])},Ue=Re?function(Je){return 0<oe(Je,Be[Pe][0])}:function(Je){return 0<=oe(Je,Be[Pe][0])},$e=Fe,Xe=new this.Collection(this,function(){return Yo(Be[0][0],Be[Be.length-1][1],!Re,!De)});return Xe._ondirectionchange=function(Je){xe=Je==="next"?($e=Fe,Q):($e=Ue,oe),Be.sort(He)},Xe._addAlgorithm(function(Je,tt,ot){for(var xt,It=Je.key;$e(It);)if(++Pe===Be.length)return tt(ot),!1;return!Fe(xt=It)&&!Ue(xt)||(B._cmp(It,Be[Pe][1])===0||B._cmp(It,Be[Pe][0])===0||tt(function(){xe===Q?Je.continue(Be[Pe][0]):Je.continue(Be[Pe][1])}),!1)}),Xe},Rr.prototype.startsWithAnyOf=function(){var T=K.apply(M,arguments);return T.every(function(I){return typeof I=="string"})?T.length===0?kl(this):this.inAnyRange(T.map(function(I){return[I,I+Gt]})):Rs(this,"startsWithAnyOf() only works with strings")},Rr);function Rr(){}function Di(T){return Bn(function(I){return ic(I),T(I.target.error),!1})}function ic(T){T.stopPropagation&&T.stopPropagation(),T.preventDefault&&T.preventDefault()}var oc="storagemutated",ig="x-storagemutated-1",Xo=nc(null,oc),iO=(Oi.prototype._lock=function(){return S(!ne.global),++this._reculock,this._reculock!==1||ne.global||(ne.lockOwnerFor=this),this},Oi.prototype._unlock=function(){if(S(!ne.global),--this._reculock==0)for(ne.global||(ne.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var T=this._blockedFuncs.shift();try{Kr(T[1],T[0])}catch{}}return this},Oi.prototype._locked=function(){return this._reculock&&ne.lockOwnerFor!==this},Oi.prototype.create=function(T){var I=this;if(!this.mode)return this;var B=this.db.idbdb,W=this.db._state.dbOpenError;if(S(!this.idbtrans),!T&&!B)switch(W&&W.name){case"DatabaseClosedError":throw new ae.DatabaseClosed(W);case"MissingAPIError":throw new ae.MissingAPI(W.message,W);default:throw new ae.OpenFailed(W)}if(!this.active)throw new ae.TransactionInactive;return S(this._completion._state===null),(T=this.idbtrans=T||(this.db.core||B).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Bn(function(Q){ic(Q),I._reject(T.error)}),T.onabort=Bn(function(Q){ic(Q),I.active&&I._reject(new ae.Abort(T.error)),I.active=!1,I.on("abort").fire(Q)}),T.oncomplete=Bn(function(){I.active=!1,I._resolve(),"mutatedParts"in T&&Xo.storagemutated.fire(T.mutatedParts)}),this},Oi.prototype._promise=function(T,I,B){var W=this;if(T==="readwrite"&&this.mode!=="readwrite")return gt(new ae.ReadOnly("Transaction is readonly"));if(!this.active)return gt(new ae.TransactionInactive);if(this._locked())return new ct(function(oe,me){W._blockedFuncs.push([function(){W._promise(T,I,B).then(oe,me)},ne])});if(B)return Ct(function(){var oe=new ct(function(me,we){W._lock();var Re=I(me,we,W);Re&&Re.then&&Re.then(me,we)});return oe.finally(function(){return W._unlock()}),oe._lib=!0,oe});var Q=new ct(function(oe,me){var we=I(oe,me,W);we&&we.then&&we.then(oe,me)});return Q._lib=!0,Q},Oi.prototype._root=function(){return this.parent?this.parent._root():this},Oi.prototype.waitFor=function(T){var I,B=this._root(),W=ct.resolve(T);B._waitingFor?B._waitingFor=B._waitingFor.then(function(){return W}):(B._waitingFor=W,B._waitingQueue=[],I=B.idbtrans.objectStore(B.storeNames[0]),function oe(){for(++B._spinCount;B._waitingQueue.length;)B._waitingQueue.shift()();B._waitingFor&&(I.get(-1/0).onsuccess=oe)}());var Q=B._waitingFor;return new ct(function(oe,me){W.then(function(we){return B._waitingQueue.push(Bn(oe.bind(null,we)))},function(we){return B._waitingQueue.push(Bn(me.bind(null,we)))}).finally(function(){B._waitingFor===Q&&(B._waitingFor=null)})})},Oi.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ae.Abort))},Oi.prototype.table=function(T){var I=this._memoizedTables||(this._memoizedTables={});if(d(I,T))return I[T];var B=this.schema[T];if(!B)throw new ae.NotFound("Table "+T+" not part of transaction");return B=new this.db.Table(T,B,this),B.core=this.db.core.table(T),I[T]=B},Oi);function Oi(){}function og(T,I,B,W,Q,oe,me){return{name:T,keyPath:I,unique:B,multi:W,auto:Q,compound:oe,src:(B&&!me?"&":"")+(W?"*":"")+(Q?"++":"")+AS(I)}}function AS(T){return typeof T=="string"?T:T?"["+[].join.call(T,"+")+"]":""}function ag(T,I,B){return{name:T,primKey:I,indexes:B,mappedClass:null,idxByName:(W=function(Q){return[Q.name,Q]},B.reduce(function(Q,oe,me){return me=W(oe,me),me&&(Q[me[0]]=me[1]),Q},{}))};var W}var ac=function(T){try{return T.only([[]]),ac=function(){return[[]]},[[]]}catch{return ac=function(){return Gt},Gt}};function lg(T){return T==null?function(){}:typeof T=="string"?(I=T).split(".").length===1?function(B){return B[I]}:function(B){return x(B,I)}:function(B){return x(B,T)};var I}function IS(T){return[].slice.call(T)}var oO=0;function lc(T){return T==null?":id":typeof T=="string"?T:"[".concat(T.join("+"),"]")}function aO(T,I,Re){function W($e){if($e.type===3)return null;if($e.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Pe=$e.lower,Fe=$e.upper,Ue=$e.lowerOpen,$e=$e.upperOpen;return Pe===void 0?Fe===void 0?null:I.upperBound(Fe,!!$e):Fe===void 0?I.lowerBound(Pe,!!Ue):I.bound(Pe,Fe,!!Ue,!!$e)}function Q(He){var Pe,Fe=He.name;return{name:Fe,schema:He,mutate:function(Ue){var $e=Ue.trans,Xe=Ue.type,Je=Ue.keys,tt=Ue.values,ot=Ue.range;return new Promise(function(xt,It){xt=Bn(xt);var Tt=$e.objectStore(Fe),kt=Tt.keyPath==null,$t=Xe==="put"||Xe==="add";if(!$t&&Xe!=="delete"&&Xe!=="deleteRange")throw new Error("Invalid operation type: "+Xe);var At,Ht=(Je||tt||{length:1}).length;if(Je&&tt&&Je.length!==tt.length)throw new Error("Given keys array must have same length as given values array.");if(Ht===0)return xt({numFailures:0,failures:{},results:[],lastResult:void 0});function gn(ns){++Ls,ic(ns)}var kn=[],_n=[],Ls=0;if(Xe==="deleteRange"){if(ot.type===4)return xt({numFailures:Ls,failures:_n,results:[],lastResult:void 0});ot.type===3?kn.push(At=Tt.clear()):kn.push(At=Tt.delete(W(ot)))}else{var kt=$t?kt?[tt,Je]:[tt,null]:[Je,null],mn=kt[0],Wr=kt[1];if($t)for(var Gr=0;Gr<Ht;++Gr)kn.push(At=Wr&&Wr[Gr]!==void 0?Tt[Xe](mn[Gr],Wr[Gr]):Tt[Xe](mn[Gr])),At.onerror=gn;else for(Gr=0;Gr<Ht;++Gr)kn.push(At=Tt[Xe](mn[Gr])),At.onerror=gn}function _f(ns){ns=ns.target.result,kn.forEach(function(Ma,kg){return Ma.error!=null&&(_n[kg]=Ma.error)}),xt({numFailures:Ls,failures:_n,results:Xe==="delete"?Je:kn.map(function(Ma){return Ma.result}),lastResult:ns})}At.onerror=function(ns){gn(ns),_f(ns)},At.onsuccess=_f})},getMany:function(Ue){var $e=Ue.trans,Xe=Ue.keys;return new Promise(function(Je,tt){Je=Bn(Je);for(var ot,xt=$e.objectStore(Fe),It=Xe.length,Tt=new Array(It),kt=0,$t=0,At=function(kn){kn=kn.target,Tt[kn._pos]=kn.result,++$t===kt&&Je(Tt)},Ht=Di(tt),gn=0;gn<It;++gn)Xe[gn]!=null&&((ot=xt.get(Xe[gn]))._pos=gn,ot.onsuccess=At,ot.onerror=Ht,++kt);kt===0&&Je(Tt)})},get:function(Ue){var $e=Ue.trans,Xe=Ue.key;return new Promise(function(Je,tt){Je=Bn(Je);var ot=$e.objectStore(Fe).get(Xe);ot.onsuccess=function(xt){return Je(xt.target.result)},ot.onerror=Di(tt)})},query:(Pe=De,function(Ue){return new Promise(function($e,Xe){$e=Bn($e);var Je,tt,ot,kt=Ue.trans,xt=Ue.values,It=Ue.limit,At=Ue.query,Tt=It===1/0?void 0:It,$t=At.index,At=At.range,kt=kt.objectStore(Fe),$t=$t.isPrimaryKey?kt:kt.index($t.name),At=W(At);if(It===0)return $e({result:[]});Pe?((Tt=xt?$t.getAll(At,Tt):$t.getAllKeys(At,Tt)).onsuccess=function(Ht){return $e({result:Ht.target.result})},Tt.onerror=Di(Xe)):(Je=0,tt=!xt&&"openKeyCursor"in $t?$t.openKeyCursor(At):$t.openCursor(At),ot=[],tt.onsuccess=function(Ht){var gn=tt.result;return gn?(ot.push(xt?gn.value:gn.primaryKey),++Je===It?$e({result:ot}):void gn.continue()):$e({result:ot})},tt.onerror=Di(Xe))})}),openCursor:function(Ue){var $e=Ue.trans,Xe=Ue.values,Je=Ue.query,tt=Ue.reverse,ot=Ue.unique;return new Promise(function(xt,It){xt=Bn(xt);var $t=Je.index,Tt=Je.range,kt=$e.objectStore(Fe),kt=$t.isPrimaryKey?kt:kt.index($t.name),$t=tt?ot?"prevunique":"prev":ot?"nextunique":"next",At=!Xe&&"openKeyCursor"in kt?kt.openKeyCursor(W(Tt),$t):kt.openCursor(W(Tt),$t);At.onerror=Di(It),At.onsuccess=Bn(function(Ht){var gn,kn,_n,Ls,mn=At.result;mn?(mn.___id=++oO,mn.done=!1,gn=mn.continue.bind(mn),kn=(kn=mn.continuePrimaryKey)&&kn.bind(mn),_n=mn.advance.bind(mn),Ls=function(){throw new Error("Cursor not stopped")},mn.trans=$e,mn.stop=mn.continue=mn.continuePrimaryKey=mn.advance=function(){throw new Error("Cursor not started")},mn.fail=Bn(It),mn.next=function(){var Wr=this,Gr=1;return this.start(function(){return Gr--?Wr.continue():Wr.stop()}).then(function(){return Wr})},mn.start=function(Wr){function Gr(){if(At.result)try{Wr()}catch(ns){mn.fail(ns)}else mn.done=!0,mn.start=function(){throw new Error("Cursor behind last entry")},mn.stop()}var _f=new Promise(function(ns,Ma){ns=Bn(ns),At.onerror=Di(Ma),mn.fail=Ma,mn.stop=function(kg){mn.stop=mn.continue=mn.continuePrimaryKey=mn.advance=Ls,ns(kg)}});return At.onsuccess=Bn(function(ns){At.onsuccess=Gr,Gr()}),mn.continue=gn,mn.continuePrimaryKey=kn,mn.advance=_n,Gr(),_f},xt(mn)):xt(null)},It)})},count:function(Ue){var $e=Ue.query,Xe=Ue.trans,Je=$e.index,tt=$e.range;return new Promise(function(ot,xt){var It=Xe.objectStore(Fe),Tt=Je.isPrimaryKey?It:It.index(Je.name),It=W(tt),Tt=It?Tt.count(It):Tt.count();Tt.onsuccess=Bn(function(kt){return ot(kt.target.result)}),Tt.onerror=Di(xt)})}}}var oe,me,we,Be=(me=Re,we=IS((oe=T).objectStoreNames),{schema:{name:oe.name,tables:we.map(function(He){return me.objectStore(He)}).map(function(He){var Pe=He.keyPath,$e=He.autoIncrement,Fe=a(Pe),Ue={},$e={name:He.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Pe==null,compound:Fe,keyPath:Pe,autoIncrement:$e,unique:!0,extractKey:lg(Pe)},indexes:IS(He.indexNames).map(function(Xe){return He.index(Xe)}).map(function(ot){var Je=ot.name,tt=ot.unique,xt=ot.multiEntry,ot=ot.keyPath,xt={name:Je,compound:a(ot),keyPath:ot,unique:tt,multiEntry:xt,extractKey:lg(ot)};return Ue[lc(ot)]=xt}),getIndexByKeyPath:function(Xe){return Ue[lc(Xe)]}};return Ue[":id"]=$e.primaryKey,Pe!=null&&(Ue[lc(Pe)]=$e.primaryKey),$e})},hasGetAll:0<we.length&&"getAll"in me.objectStore(we[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Re=Be.schema,De=Be.hasGetAll,Be=Re.tables.map(Q),xe={};return Be.forEach(function(He){return xe[He.name]=He}),{stack:"dbcore",transaction:T.transaction.bind(T),table:function(He){if(!xe[He])throw new Error("Table '".concat(He,"' not found"));return xe[He]},MIN_KEY:-1/0,MAX_KEY:ac(I),schema:Re}}function lO(T,I,B,W){var Q=B.IDBKeyRange;return B.indexedDB,{dbcore:(W=aO(I,Q,W),T.dbcore.reduce(function(oe,me){return me=me.create,r(r({},oe),me(oe))},W))}}function mf(T,W){var B=W.db,W=lO(T._middlewares,B,T._deps,W);T.core=W.dbcore,T.tables.forEach(function(Q){var oe=Q.name;T.core.schema.tables.some(function(me){return me.name===oe})&&(Q.core=T.core.table(oe),T[oe]instanceof T.Table&&(T[oe].core=Q.core))})}function gf(T,I,B,W){B.forEach(function(Q){var oe=W[Q];I.forEach(function(me){var we=function Re(De,Be){return v(De,Be)||(De=l(De))&&Re(De,Be)}(me,Q);(!we||"value"in we&&we.value===void 0)&&(me===T.Transaction.prototype||me instanceof T.Transaction?p(me,Q,{get:function(){return this.table(Q)},set:function(Re){h(this,Q,{value:Re,writable:!0,configurable:!0,enumerable:!0})}}):me[Q]=new T.Table(Q,oe))})})}function ug(T,I){I.forEach(function(B){for(var W in B)B[W]instanceof T.Table&&delete B[W]})}function uO(T,I){return T._cfg.version-I._cfg.version}function cO(T,I,B,W){var Q=T._dbSchema;B.objectStoreNames.contains("$meta")&&!Q.$meta&&(Q.$meta=ag("$meta",LS("")[0],[]),T._storeNames.push("$meta"));var oe=T._createTransaction("readwrite",T._storeNames,Q);oe.create(B),oe._completion.catch(W);var me=oe._reject.bind(oe),we=ne.transless||ne;Ct(function(){return ne.trans=oe,ne.transless=we,I!==0?(mf(T,B),De=I,((Re=oe).storeNames.includes("$meta")?Re.table("$meta").get("version").then(function(Be){return Be??De}):ct.resolve(De)).then(function(Be){return He=Be,Pe=oe,Fe=B,Ue=[],Be=(xe=T)._versions,$e=xe._dbSchema=yf(0,xe.idbdb,Fe),(Be=Be.filter(function(Xe){return Xe._cfg.version>=He})).length!==0?(Be.forEach(function(Xe){Ue.push(function(){var Je=$e,tt=Xe._cfg.dbschema;bf(xe,Je,Fe),bf(xe,tt,Fe),$e=xe._dbSchema=tt;var ot=cg(Je,tt);ot.add.forEach(function($t){dg(Fe,$t[0],$t[1].primKey,$t[1].indexes)}),ot.change.forEach(function($t){if($t.recreate)throw new ae.Upgrade("Not yet support for changing primary key");var At=Fe.objectStore($t.name);$t.add.forEach(function(Ht){return vf(At,Ht)}),$t.change.forEach(function(Ht){At.deleteIndex(Ht.name),vf(At,Ht)}),$t.del.forEach(function(Ht){return At.deleteIndex(Ht)})});var xt=Xe._cfg.contentUpgrade;if(xt&&Xe._cfg.version>He){mf(xe,Fe),Pe._memoizedTables={};var It=A(tt);ot.del.forEach(function($t){It[$t]=Je[$t]}),ug(xe,[xe.Transaction.prototype]),gf(xe,[xe.Transaction.prototype],o(It),It),Pe.schema=It;var Tt,kt=q(xt);return kt&&dn(),ot=ct.follow(function(){var $t;(Tt=xt(Pe))&&kt&&($t=Vn.bind(null,null),Tt.then($t,$t))}),Tt&&typeof Tt.then=="function"?ct.resolve(Tt):ot.then(function(){return Tt})}}),Ue.push(function(Je){var tt,ot,xt=Xe._cfg.dbschema;tt=xt,ot=Je,[].slice.call(ot.db.objectStoreNames).forEach(function(It){return tt[It]==null&&ot.db.deleteObjectStore(It)}),ug(xe,[xe.Transaction.prototype]),gf(xe,[xe.Transaction.prototype],xe._storeNames,xe._dbSchema),Pe.schema=xe._dbSchema}),Ue.push(function(Je){xe.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(xe.idbdb.version/10)===Xe._cfg.version?(xe.idbdb.deleteObjectStore("$meta"),delete xe._dbSchema.$meta,xe._storeNames=xe._storeNames.filter(function(tt){return tt!=="$meta"})):Je.objectStore("$meta").put(Xe._cfg.version,"version"))})}),function Xe(){return Ue.length?ct.resolve(Ue.shift()(Pe.idbtrans)).then(Xe):ct.resolve()}().then(function(){RS($e,Fe)})):ct.resolve();var xe,He,Pe,Fe,Ue,$e}).catch(me)):(o(Q).forEach(function(Be){dg(B,Be,Q[Be].primKey,Q[Be].indexes)}),mf(T,B),void ct.follow(function(){return T.on.populate.fire(oe)}).catch(me));var Re,De})}function dO(T,I){RS(T._dbSchema,I),I.db.version%10!=0||I.objectStoreNames.contains("$meta")||I.db.createObjectStore("$meta").add(Math.ceil(I.db.version/10-1),"version");var B=yf(0,T.idbdb,I);bf(T,T._dbSchema,I);for(var W=0,Q=cg(B,T._dbSchema).change;W<Q.length;W++){var oe=function(me){if(me.change.length||me.recreate)return console.warn("Unable to patch indexes of table ".concat(me.name," because it has changes on the type of index or primary key.")),{value:void 0};var we=I.objectStore(me.name);me.add.forEach(function(Re){Me&&console.debug("Dexie upgrade patch: Creating missing index ".concat(me.name,".").concat(Re.src)),vf(we,Re)})}(Q[W]);if(typeof oe=="object")return oe.value}}function cg(T,I){var B,W={del:[],add:[],change:[]};for(B in T)I[B]||W.del.push(B);for(B in I){var Q=T[B],oe=I[B];if(Q){var me={name:B,def:oe,recreate:!1,del:[],add:[],change:[]};if(""+(Q.primKey.keyPath||"")!=""+(oe.primKey.keyPath||"")||Q.primKey.auto!==oe.primKey.auto)me.recreate=!0,W.change.push(me);else{var we=Q.idxByName,Re=oe.idxByName,De=void 0;for(De in we)Re[De]||me.del.push(De);for(De in Re){var Be=we[De],xe=Re[De];Be?Be.src!==xe.src&&me.change.push(xe):me.add.push(xe)}(0<me.del.length||0<me.add.length||0<me.change.length)&&W.change.push(me)}}else W.add.push([B,oe])}return W}function dg(T,I,B,W){var Q=T.db.createObjectStore(I,B.keyPath?{keyPath:B.keyPath,autoIncrement:B.auto}:{autoIncrement:B.auto});return W.forEach(function(oe){return vf(Q,oe)}),Q}function RS(T,I){o(T).forEach(function(B){I.db.objectStoreNames.contains(B)||(Me&&console.debug("Dexie: Creating missing table",B),dg(I,B,T[B].primKey,T[B].indexes))})}function vf(T,I){T.createIndex(I.name,I.keyPath,{unique:I.unique,multiEntry:I.multi})}function yf(T,I,B){var W={};return w(I.objectStoreNames,0).forEach(function(Q){for(var oe=B.objectStore(Q),me=og(AS(De=oe.keyPath),De||"",!0,!1,!!oe.autoIncrement,De&&typeof De!="string",!0),we=[],Re=0;Re<oe.indexNames.length;++Re){var Be=oe.index(oe.indexNames[Re]),De=Be.keyPath,Be=og(Be.name,De,!!Be.unique,!!Be.multiEntry,!1,De&&typeof De!="string",!1);we.push(Be)}W[Q]=ag(Q,me,we)}),W}function bf(T,I,B){for(var W=B.db.objectStoreNames,Q=0;Q<W.length;++Q){var oe=W[Q],me=B.objectStore(oe);T._hasGetAll="getAll"in me;for(var we=0;we<me.indexNames.length;++we){var Re=me.indexNames[we],De=me.index(Re).keyPath,Be=typeof De=="string"?De:"["+w(De).join("+")+"]";!I[oe]||(De=I[oe].idxByName[Be])&&(De.name=Re,delete I[oe].idxByName[Be],I[oe].idxByName[Re]=De)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(T._hasGetAll=!1)}function LS(T){return T.split(",").map(function(I,B){var W=(I=I.trim()).replace(/([&*]|\+\+)/g,""),Q=/^\[/.test(W)?W.match(/^\[(.*)\]$/)[1].split("+"):W;return og(W,Q||null,/\&/.test(I),/\*/.test(I),/\+\+/.test(I),a(Q),B===0)})}var fO=(Sf.prototype._parseStoresSpec=function(T,I){o(T).forEach(function(B){if(T[B]!==null){var W=LS(T[B]),Q=W.shift();if(Q.unique=!0,Q.multi)throw new ae.Schema("Primary key cannot be multi-valued");W.forEach(function(oe){if(oe.auto)throw new ae.Schema("Only primary key can be marked as autoIncrement (++)");if(!oe.keyPath)throw new ae.Schema("Index must have a name and cannot be an empty string")}),I[B]=ag(B,Q,W)}})},Sf.prototype.stores=function(B){var I=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,B):B;var B=I._versions,W={},Q={};return B.forEach(function(oe){u(W,oe._cfg.storesSource),Q=oe._cfg.dbschema={},oe._parseStoresSpec(W,Q)}),I._dbSchema=Q,ug(I,[I._allTables,I,I.Transaction.prototype]),gf(I,[I._allTables,I,I.Transaction.prototype,this._cfg.tables],o(Q),Q),I._storeNames=o(Q),this},Sf.prototype.upgrade=function(T){return this._cfg.contentUpgrade=Ne(this._cfg.contentUpgrade||z,T),this},Sf);function Sf(){}function fg(T,I){var B=T._dbNamesDB;return B||(B=T._dbNamesDB=new lo(zs,{addons:[],indexedDB:T,IDBKeyRange:I})).version(1).stores({dbnames:"name"}),B.table("dbnames")}function hg(T){return T&&typeof T.databases=="function"}function pg(T){return Ct(function(){return ne.letThrough=!0,T()})}function mg(T){return!("from"in T)}var zr=function(T,I){if(!this){var B=new zr;return T&&"d"in T&&u(B,T),B}u(this,arguments.length?{d:1,from:T,to:1<arguments.length?I:T}:{d:0})};function uc(T,I,B){var W=Pn(I,B);if(!isNaN(W)){if(0<W)throw RangeError();if(mg(T))return u(T,{from:I,to:B,d:1});var Q=T.l,W=T.r;if(Pn(B,T.from)<0)return Q?uc(Q,I,B):T.l={from:I,to:B,d:1,l:null,r:null},DS(T);if(0<Pn(I,T.to))return W?uc(W,I,B):T.r={from:I,to:B,d:1,l:null,r:null},DS(T);Pn(I,T.from)<0&&(T.from=I,T.l=null,T.d=W?W.d+1:1),0<Pn(B,T.to)&&(T.to=B,T.r=null,T.d=T.l?T.l.d+1:1),B=!T.r,Q&&!T.l&&cc(T,Q),W&&B&&cc(T,W)}}function cc(T,I){mg(I)||function B(W,Re){var oe=Re.from,me=Re.to,we=Re.l,Re=Re.r;uc(W,oe,me),we&&B(W,we),Re&&B(W,Re)}(T,I)}function PS(T,I){var B=wf(I),W=B.next();if(W.done)return!1;for(var Q=W.value,oe=wf(T),me=oe.next(Q.from),we=me.value;!W.done&&!me.done;){if(Pn(we.from,Q.to)<=0&&0<=Pn(we.to,Q.from))return!0;Pn(Q.from,we.from)<0?Q=(W=B.next(we.from)).value:we=(me=oe.next(Q.from)).value}return!1}function wf(T){var I=mg(T)?null:{s:0,n:T};return{next:function(B){for(var W=0<arguments.length;I;)switch(I.s){case 0:if(I.s=1,W)for(;I.n.l&&Pn(B,I.n.from)<0;)I={up:I,n:I.n.l,s:1};else for(;I.n.l;)I={up:I,n:I.n.l,s:1};case 1:if(I.s=2,!W||Pn(B,I.n.to)<=0)return{value:I.n,done:!1};case 2:if(I.n.r){I.s=3,I={up:I,n:I.n.r,s:0};continue}case 3:I=I.up}return{done:!0}}}}function DS(T){var I,B,W=(((I=T.r)===null||I===void 0?void 0:I.d)||0)-(((B=T.l)===null||B===void 0?void 0:B.d)||0),Q=1<W?"r":W<-1?"l":"";Q&&(I=Q=="r"?"l":"r",B=r({},T),W=T[Q],T.from=W.from,T.to=W.to,T[Q]=W[Q],B[Q]=W[I],(T[I]=B).d=OS(B)),T.d=OS(T)}function OS(B){var I=B.r,B=B.l;return(I?B?Math.max(I.d,B.d):I.d:B?B.d:0)+1}function Ef(T,I){return o(I).forEach(function(B){T[B]?cc(T[B],I[B]):T[B]=function W(Q){var oe,me,we={};for(oe in Q)d(Q,oe)&&(me=Q[oe],we[oe]=!me||typeof me!="object"||O.has(me.constructor)?me:W(me));return we}(I[B])}),T}function gg(T,I){return T.all||I.all||Object.keys(T).some(function(B){return I[B]&&PS(I[B],T[B])})}f(zr.prototype,((Ws={add:function(T){return cc(this,T),this},addKey:function(T){return uc(this,T,T),this},addKeys:function(T){var I=this;return T.forEach(function(B){return uc(I,B,B)}),this},hasKey:function(T){var I=wf(this).next(T).value;return I&&Pn(I.from,T)<=0&&0<=Pn(I.to,T)}})[R]=function(){return wf(this)},Ws));var Oa={},vg={},yg=!1;function xf(T){Ef(vg,T),yg||(yg=!0,setTimeout(function(){yg=!1,bg(vg,!(vg={}))},0))}function bg(T,I){I===void 0&&(I=!1);var B=new Set;if(T.all)for(var W=0,Q=Object.values(Oa);W<Q.length;W++)$S(me=Q[W],T,B,I);else for(var oe in T){var me,we=/^idb\:\/\/(.*)\/(.*)\//.exec(oe);we&&(oe=we[1],we=we[2],(me=Oa["idb://".concat(oe,"/").concat(we)])&&$S(me,T,B,I))}B.forEach(function(Re){return Re()})}function $S(T,I,B,W){for(var Q=[],oe=0,me=Object.entries(T.queries.query);oe<me.length;oe++){for(var we=me[oe],Re=we[0],De=[],Be=0,xe=we[1];Be<xe.length;Be++){var He=xe[Be];gg(I,He.obsSet)?He.subscribers.forEach(function($e){return B.add($e)}):W&&De.push(He)}W&&Q.push([Re,De])}if(W)for(var Pe=0,Fe=Q;Pe<Fe.length;Pe++){var Ue=Fe[Pe],Re=Ue[0],De=Ue[1];T.queries.query[Re]=De}}function hO(T){var I=T._state,B=T._deps.indexedDB;if(I.isBeingOpened||T.idbdb)return I.dbReadyPromise.then(function(){return I.dbOpenError?gt(I.dbOpenError):T});I.isBeingOpened=!0,I.dbOpenError=null,I.openComplete=!1;var W=I.openCanceller,Q=Math.round(10*T.verno),oe=!1;function me(){if(I.openCanceller!==W)throw new ae.DatabaseClosed("db.open() was cancelled")}function we(){return new ct(function(He,Pe){if(me(),!B)throw new ae.MissingAPI;var Fe=T.name,Ue=I.autoSchema||!Q?B.open(Fe):B.open(Fe,Q);if(!Ue)throw new ae.MissingAPI;Ue.onerror=Di(Pe),Ue.onblocked=Bn(T._fireOnBlocked),Ue.onupgradeneeded=Bn(function($e){var Xe;Be=Ue.transaction,I.autoSchema&&!T._options.allowEmptyDB?(Ue.onerror=ic,Be.abort(),Ue.result.close(),(Xe=B.deleteDatabase(Fe)).onsuccess=Xe.onerror=Bn(function(){Pe(new ae.NoSuchDatabase("Database ".concat(Fe," doesnt exist")))})):(Be.onerror=Di(Pe),$e=$e.oldVersion>Math.pow(2,62)?0:$e.oldVersion,xe=$e<1,T.idbdb=Ue.result,oe&&dO(T,Be),cO(T,$e/10,Be,Pe))},Pe),Ue.onsuccess=Bn(function(){Be=null;var $e,Xe,Je,tt,ot,xt=T.idbdb=Ue.result,It=w(xt.objectStoreNames);if(0<It.length)try{var Tt=xt.transaction((tt=It).length===1?tt[0]:tt,"readonly");if(I.autoSchema)Xe=xt,Je=Tt,($e=T).verno=Xe.version/10,Je=$e._dbSchema=yf(0,Xe,Je),$e._storeNames=w(Xe.objectStoreNames,0),gf($e,[$e._allTables],o(Je),Je);else if(bf(T,T._dbSchema,Tt),((ot=cg(yf(0,(ot=T).idbdb,Tt),ot._dbSchema)).add.length||ot.change.some(function(kt){return kt.add.length||kt.change.length}))&&!oe)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),xt.close(),Q=xt.version+1,oe=!0,He(we());mf(T,Tt)}catch{}yr.push(T),xt.onversionchange=Bn(function(kt){I.vcFired=!0,T.on("versionchange").fire(kt)}),xt.onclose=Bn(function(kt){T.on("close").fire(kt)}),xe&&(ot=T._deps,Tt=Fe,xt=ot.indexedDB,ot=ot.IDBKeyRange,hg(xt)||Tt===zs||fg(xt,ot).put({name:Tt}).catch(z)),He()},Pe)}).catch(function(He){switch(He==null?void 0:He.name){case"UnknownError":if(0<I.PR1398_maxLoop)return I.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),we();break;case"VersionError":if(0<Q)return Q=0,we()}return ct.reject(He)})}var Re,De=I.dbReadyResolve,Be=null,xe=!1;return ct.race([W,(typeof navigator>"u"?ct.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(He){function Pe(){return indexedDB.databases().finally(He)}Re=setInterval(Pe,100),Pe()}).finally(function(){return clearInterval(Re)}):Promise.resolve()).then(we)]).then(function(){return me(),I.onReadyBeingFired=[],ct.resolve(pg(function(){return T.on.ready.fire(T.vip)})).then(function He(){if(0<I.onReadyBeingFired.length){var Pe=I.onReadyBeingFired.reduce(Ne,z);return I.onReadyBeingFired=[],ct.resolve(pg(function(){return Pe(T.vip)})).then(He)}})}).finally(function(){I.openCanceller===W&&(I.onReadyBeingFired=null,I.isBeingOpened=!1)}).catch(function(He){I.dbOpenError=He;try{Be&&Be.abort()}catch{}return W===I.openCanceller&&T._close(),gt(He)}).finally(function(){I.openComplete=!0,De()}).then(function(){var He;return xe&&(He={},T.tables.forEach(function(Pe){Pe.schema.indexes.forEach(function(Fe){Fe.name&&(He["idb://".concat(T.name,"/").concat(Pe.name,"/").concat(Fe.name)]=new zr(-1/0,[[[]]]))}),He["idb://".concat(T.name,"/").concat(Pe.name,"/")]=He["idb://".concat(T.name,"/").concat(Pe.name,"/:dels")]=new zr(-1/0,[[[]]])}),Xo(oc).fire(He),bg(He,!0)),T})}function Sg(T){function I(oe){return T.next(oe)}var B=Q(I),W=Q(function(oe){return T.throw(oe)});function Q(oe){return function(Re){var we=oe(Re),Re=we.value;return we.done?Re:Re&&typeof Re.then=="function"?Re.then(B,W):a(Re)?Promise.all(Re).then(B,W):B(Re)}}return Q(I)()}function Tf(T,I,B){for(var W=a(T)?T.slice():[T],Q=0;Q<B;++Q)W.push(I);return W}var pO={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(T){return r(r({},T),{table:function(I){var B=T.table(I),W=B.schema,Q={},oe=[];function me(xe,He,Pe){var Fe=lc(xe),Ue=Q[Fe]=Q[Fe]||[],$e=xe==null?0:typeof xe=="string"?1:xe.length,Xe=0<He,Xe=r(r({},Pe),{name:Xe?"".concat(Fe,"(virtual-from:").concat(Pe.name,")"):Pe.name,lowLevelIndex:Pe,isVirtual:Xe,keyTail:He,keyLength:$e,extractKey:lg(xe),unique:!Xe&&Pe.unique});return Ue.push(Xe),Xe.isPrimaryKey||oe.push(Xe),1<$e&&me($e===2?xe[0]:xe.slice(0,$e-1),He+1,Pe),Ue.sort(function(Je,tt){return Je.keyTail-tt.keyTail}),Xe}I=me(W.primaryKey.keyPath,0,W.primaryKey),Q[":id"]=[I];for(var we=0,Re=W.indexes;we<Re.length;we++){var De=Re[we];me(De.keyPath,0,De)}function Be(xe){var He,Pe=xe.query.index;return Pe.isVirtual?r(r({},xe),{query:{index:Pe.lowLevelIndex,range:(He=xe.query.range,Pe=Pe.keyTail,{type:He.type===1?2:He.type,lower:Tf(He.lower,He.lowerOpen?T.MAX_KEY:T.MIN_KEY,Pe),lowerOpen:!0,upper:Tf(He.upper,He.upperOpen?T.MIN_KEY:T.MAX_KEY,Pe),upperOpen:!0})}}):xe}return r(r({},B),{schema:r(r({},W),{primaryKey:I,indexes:oe,getIndexByKeyPath:function(xe){return(xe=Q[lc(xe)])&&xe[0]}}),count:function(xe){return B.count(Be(xe))},query:function(xe){return B.query(Be(xe))},openCursor:function(xe){var He=xe.query.index,Pe=He.keyTail,Fe=He.isVirtual,Ue=He.keyLength;return Fe?B.openCursor(Be(xe)).then(function(Xe){return Xe&&$e(Xe)}):B.openCursor(xe);function $e(Xe){return Object.create(Xe,{continue:{value:function(Je){Je!=null?Xe.continue(Tf(Je,xe.reverse?T.MAX_KEY:T.MIN_KEY,Pe)):xe.unique?Xe.continue(Xe.key.slice(0,Ue).concat(xe.reverse?T.MIN_KEY:T.MAX_KEY,Pe)):Xe.continue()}},continuePrimaryKey:{value:function(Je,tt){Xe.continuePrimaryKey(Tf(Je,T.MAX_KEY,Pe),tt)}},primaryKey:{get:function(){return Xe.primaryKey}},key:{get:function(){var Je=Xe.key;return Ue===1?Je[0]:Je.slice(0,Ue)}},value:{get:function(){return Xe.value}}})}}})}})}};function wg(T,I,B,W){return B=B||{},W=W||"",o(T).forEach(function(Q){var oe,me,we;d(I,Q)?(oe=T[Q],me=I[Q],typeof oe=="object"&&typeof me=="object"&&oe&&me?(we=N(oe))!==N(me)?B[W+Q]=I[Q]:we==="Object"?wg(oe,me,B,W+Q+"."):oe!==me&&(B[W+Q]=I[Q]):oe!==me&&(B[W+Q]=I[Q])):B[W+Q]=void 0}),o(I).forEach(function(Q){d(T,Q)||(B[W+Q]=I[Q])}),B}function Eg(T,I){return I.type==="delete"?I.keys:I.keys||I.values.map(T.extractKey)}var mO={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(T){return r(r({},T),{table:function(I){var B=T.table(I),W=B.schema.primaryKey;return r(r({},B),{mutate:function(Q){var oe=ne.trans,me=oe.table(I).hook,we=me.deleting,Re=me.creating,De=me.updating;switch(Q.type){case"add":if(Re.fire===z)break;return oe._promise("readwrite",function(){return Be(Q)},!0);case"put":if(Re.fire===z&&De.fire===z)break;return oe._promise("readwrite",function(){return Be(Q)},!0);case"delete":if(we.fire===z)break;return oe._promise("readwrite",function(){return Be(Q)},!0);case"deleteRange":if(we.fire===z)break;return oe._promise("readwrite",function(){return function xe(He,Pe,Fe){return B.query({trans:He,values:!1,query:{index:W,range:Pe},limit:Fe}).then(function(Ue){var $e=Ue.result;return Be({type:"delete",keys:$e,trans:He}).then(function(Xe){return 0<Xe.numFailures?Promise.reject(Xe.failures[0]):$e.length<Fe?{failures:[],numFailures:0,lastResult:void 0}:xe(He,r(r({},Pe),{lower:$e[$e.length-1],lowerOpen:!0}),Fe)})})}(Q.trans,Q.range,1e4)},!0)}return B.mutate(Q);function Be(xe){var He,Pe,Fe,Ue=ne.trans,$e=xe.keys||Eg(W,xe);if(!$e)throw new Error("Keys missing");return(xe=xe.type==="add"||xe.type==="put"?r(r({},xe),{keys:$e}):r({},xe)).type!=="delete"&&(xe.values=s([],xe.values)),xe.keys&&(xe.keys=s([],xe.keys)),He=B,Fe=$e,((Pe=xe).type==="add"?Promise.resolve([]):He.getMany({trans:Pe.trans,keys:Fe,cache:"immutable"})).then(function(Xe){var Je=$e.map(function(tt,ot){var xt,It,Tt,kt=Xe[ot],$t={onerror:null,onsuccess:null};return xe.type==="delete"?we.fire.call($t,tt,kt,Ue):xe.type==="add"||kt===void 0?(xt=Re.fire.call($t,tt,xe.values[ot],Ue),tt==null&&xt!=null&&(xe.keys[ot]=tt=xt,W.outbound||k(xe.values[ot],W.keyPath,tt))):(xt=wg(kt,xe.values[ot]),(It=De.fire.call($t,xt,tt,kt,Ue))&&(Tt=xe.values[ot],Object.keys(It).forEach(function(At){d(Tt,At)?Tt[At]=It[At]:k(Tt,At,It[At])}))),$t});return B.mutate(xe).then(function(tt){for(var ot=tt.failures,xt=tt.results,It=tt.numFailures,tt=tt.lastResult,Tt=0;Tt<$e.length;++Tt){var kt=(xt||$e)[Tt],$t=Je[Tt];kt==null?$t.onerror&&$t.onerror(ot[Tt]):$t.onsuccess&&$t.onsuccess(xe.type==="put"&&Xe[Tt]?xe.values[Tt]:kt)}return{failures:ot,results:xt,numFailures:It,lastResult:tt}}).catch(function(tt){return Je.forEach(function(ot){return ot.onerror&&ot.onerror(tt)}),Promise.reject(tt)})})}}})}})}};function MS(T,I,B){try{if(!I||I.keys.length<T.length)return null;for(var W=[],Q=0,oe=0;Q<I.keys.length&&oe<T.length;++Q)Pn(I.keys[Q],T[oe])===0&&(W.push(B?U(I.values[Q]):I.values[Q]),++oe);return W.length===T.length?W:null}catch{return null}}var gO={stack:"dbcore",level:-1,create:function(T){return{table:function(I){var B=T.table(I);return r(r({},B),{getMany:function(W){if(!W.cache)return B.getMany(W);var Q=MS(W.keys,W.trans._cache,W.cache==="clone");return Q?ct.resolve(Q):B.getMany(W).then(function(oe){return W.trans._cache={keys:W.keys,values:W.cache==="clone"?U(oe):oe},oe})},mutate:function(W){return W.type!=="add"&&(W.trans._cache=null),B.mutate(W)}})}}}};function NS(T,I){return T.trans.mode==="readonly"&&!!T.subscr&&!T.trans.explicit&&T.trans.db._options.cache!=="disabled"&&!I.schema.primaryKey.outbound}function FS(T,I){switch(T){case"query":return I.values&&!I.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var vO={stack:"dbcore",level:0,name:"Observability",create:function(T){var I=T.schema.name,B=new zr(T.MIN_KEY,T.MAX_KEY);return r(r({},T),{transaction:function(W,Q,oe){if(ne.subscr&&Q!=="readonly")throw new ae.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ne.querier));return T.transaction(W,Q,oe)},table:function(W){var Q=T.table(W),oe=Q.schema,me=oe.primaryKey,xe=oe.indexes,we=me.extractKey,Re=me.outbound,De=me.autoIncrement&&xe.filter(function(Pe){return Pe.compound&&Pe.keyPath.includes(me.keyPath)}),Be=r(r({},Q),{mutate:function(Pe){function Fe(At){return At="idb://".concat(I,"/").concat(W,"/").concat(At),tt[At]||(tt[At]=new zr)}var Ue,$e,Xe,Je=Pe.trans,tt=Pe.mutatedParts||(Pe.mutatedParts={}),ot=Fe(""),xt=Fe(":dels"),It=Pe.type,$t=Pe.type==="deleteRange"?[Pe.range]:Pe.type==="delete"?[Pe.keys]:Pe.values.length<50?[Eg(me,Pe).filter(function(At){return At}),Pe.values]:[],Tt=$t[0],kt=$t[1],$t=Pe.trans._cache;return a(Tt)?(ot.addKeys(Tt),($t=It==="delete"||Tt.length===kt.length?MS(Tt,$t):null)||xt.addKeys(Tt),($t||kt)&&(Ue=Fe,$e=$t,Xe=kt,oe.indexes.forEach(function(At){var Ht=Ue(At.name||"");function gn(_n){return _n!=null?At.extractKey(_n):null}function kn(_n){return At.multiEntry&&a(_n)?_n.forEach(function(Ls){return Ht.addKey(Ls)}):Ht.addKey(_n)}($e||Xe).forEach(function(_n,Wr){var mn=$e&&gn($e[Wr]),Wr=Xe&&gn(Xe[Wr]);Pn(mn,Wr)!==0&&(mn!=null&&kn(mn),Wr!=null&&kn(Wr))})}))):Tt?(kt={from:(kt=Tt.lower)!==null&&kt!==void 0?kt:T.MIN_KEY,to:(kt=Tt.upper)!==null&&kt!==void 0?kt:T.MAX_KEY},xt.add(kt),ot.add(kt)):(ot.add(B),xt.add(B),oe.indexes.forEach(function(At){return Fe(At.name).add(B)})),Q.mutate(Pe).then(function(At){return!Tt||Pe.type!=="add"&&Pe.type!=="put"||(ot.addKeys(At.results),De&&De.forEach(function(Ht){for(var gn=Pe.values.map(function(mn){return Ht.extractKey(mn)}),kn=Ht.keyPath.findIndex(function(mn){return mn===me.keyPath}),_n=0,Ls=At.results.length;_n<Ls;++_n)gn[_n][kn]=At.results[_n];Fe(Ht.name).addKeys(gn)})),Je.mutatedParts=Ef(Je.mutatedParts||{},tt),At})}}),xe=function(Fe){var Ue=Fe.query,Fe=Ue.index,Ue=Ue.range;return[Fe,new zr((Fe=Ue.lower)!==null&&Fe!==void 0?Fe:T.MIN_KEY,(Ue=Ue.upper)!==null&&Ue!==void 0?Ue:T.MAX_KEY)]},He={get:function(Pe){return[me,new zr(Pe.key)]},getMany:function(Pe){return[me,new zr().addKeys(Pe.keys)]},count:xe,query:xe,openCursor:xe};return o(He).forEach(function(Pe){Be[Pe]=function(Fe){var Ue=ne.subscr,$e=!!Ue,Xe=NS(ne,Q)&&FS(Pe,Fe)?Fe.obsSet={}:Ue;if($e){var Je=function(kt){return kt="idb://".concat(I,"/").concat(W,"/").concat(kt),Xe[kt]||(Xe[kt]=new zr)},tt=Je(""),ot=Je(":dels"),Ue=He[Pe](Fe),$e=Ue[0],Ue=Ue[1];if((Pe==="query"&&$e.isPrimaryKey&&!Fe.values?ot:Je($e.name||"")).add(Ue),!$e.isPrimaryKey){if(Pe!=="count"){var xt=Pe==="query"&&Re&&Fe.values&&Q.query(r(r({},Fe),{values:!1}));return Q[Pe].apply(this,arguments).then(function(kt){if(Pe==="query"){if(Re&&Fe.values)return xt.then(function(gn){return gn=gn.result,tt.addKeys(gn),kt});var $t=Fe.values?kt.result.map(we):kt.result;(Fe.values?tt:ot).addKeys($t)}else if(Pe==="openCursor"){var At=kt,Ht=Fe.values;return At&&Object.create(At,{key:{get:function(){return ot.addKey(At.primaryKey),At.key}},primaryKey:{get:function(){var gn=At.primaryKey;return ot.addKey(gn),gn}},value:{get:function(){return Ht&&tt.addKey(At.primaryKey),At.value}}})}return kt})}ot.add(B)}}return Q[Pe].apply(this,arguments)}}),Be}})}};function BS(T,I,B){if(B.numFailures===0)return I;if(I.type==="deleteRange")return null;var W=I.keys?I.keys.length:"values"in I&&I.values?I.values.length:1;return B.numFailures===W?null:(I=r({},I),a(I.keys)&&(I.keys=I.keys.filter(function(Q,oe){return!(oe in B.failures)})),"values"in I&&a(I.values)&&(I.values=I.values.filter(function(Q,oe){return!(oe in B.failures)})),I)}function xg(T,I){return B=T,((W=I).lower===void 0||(W.lowerOpen?0<Pn(B,W.lower):0<=Pn(B,W.lower)))&&(T=T,(I=I).upper===void 0||(I.upperOpen?Pn(T,I.upper)<0:Pn(T,I.upper)<=0));var B,W}function VS(T,I,He,W,Q,oe){if(!He||He.length===0)return T;var me=I.query.index,we=me.multiEntry,Re=I.query.range,De=W.schema.primaryKey.extractKey,Be=me.extractKey,xe=(me.lowLevelIndex||me).extractKey,He=He.reduce(function(Pe,Fe){var Ue=Pe,$e=[];if(Fe.type==="add"||Fe.type==="put")for(var Xe=new zr,Je=Fe.values.length-1;0<=Je;--Je){var tt,ot=Fe.values[Je],xt=De(ot);Xe.hasKey(xt)||(tt=Be(ot),(we&&a(tt)?tt.some(function(At){return xg(At,Re)}):xg(tt,Re))&&(Xe.addKey(xt),$e.push(ot)))}switch(Fe.type){case"add":var It=new zr().addKeys(I.values?Pe.map(function(Ht){return De(Ht)}):Pe),Ue=Pe.concat(I.values?$e.filter(function(Ht){return Ht=De(Ht),!It.hasKey(Ht)&&(It.addKey(Ht),!0)}):$e.map(function(Ht){return De(Ht)}).filter(function(Ht){return!It.hasKey(Ht)&&(It.addKey(Ht),!0)}));break;case"put":var Tt=new zr().addKeys(Fe.values.map(function(Ht){return De(Ht)}));Ue=Pe.filter(function(Ht){return!Tt.hasKey(I.values?De(Ht):Ht)}).concat(I.values?$e:$e.map(function(Ht){return De(Ht)}));break;case"delete":var kt=new zr().addKeys(Fe.keys);Ue=Pe.filter(function(Ht){return!kt.hasKey(I.values?De(Ht):Ht)});break;case"deleteRange":var $t=Fe.range;Ue=Pe.filter(function(Ht){return!xg(De(Ht),$t)})}return Ue},T);return He===T?T:(He.sort(function(Pe,Fe){return Pn(xe(Pe),xe(Fe))||Pn(De(Pe),De(Fe))}),I.limit&&I.limit<1/0&&(He.length>I.limit?He.length=I.limit:T.length===I.limit&&He.length<I.limit&&(Q.dirty=!0)),oe?Object.freeze(He):He)}function US(T,I){return Pn(T.lower,I.lower)===0&&Pn(T.upper,I.upper)===0&&!!T.lowerOpen==!!I.lowerOpen&&!!T.upperOpen==!!I.upperOpen}function yO(T,I){return function(B,W,Q,oe){if(B===void 0)return W!==void 0?-1:0;if(W===void 0)return 1;if((W=Pn(B,W))===0){if(Q&&oe)return 0;if(Q)return 1;if(oe)return-1}return W}(T.lower,I.lower,T.lowerOpen,I.lowerOpen)<=0&&0<=function(B,W,Q,oe){if(B===void 0)return W!==void 0?1:0;if(W===void 0)return-1;if((W=Pn(B,W))===0){if(Q&&oe)return 0;if(Q)return-1;if(oe)return 1}return W}(T.upper,I.upper,T.upperOpen,I.upperOpen)}function bO(T,I,B,W){T.subscribers.add(B),W.addEventListener("abort",function(){var Q,oe;T.subscribers.delete(B),T.subscribers.size===0&&(Q=T,oe=I,setTimeout(function(){Q.subscribers.size===0&&D(oe,Q)},3e3))})}var SO={stack:"dbcore",level:0,name:"Cache",create:function(T){var I=T.schema.name;return r(r({},T),{transaction:function(B,W,Q){var oe,me,we=T.transaction(B,W,Q);return W==="readwrite"&&(me=(oe=new AbortController).signal,Q=function(Re){return function(){if(oe.abort(),W==="readwrite"){for(var De=new Set,Be=0,xe=B;Be<xe.length;Be++){var He=xe[Be],Pe=Oa["idb://".concat(I,"/").concat(He)];if(Pe){var Fe=T.table(He),Ue=Pe.optimisticOps.filter(function(Ht){return Ht.trans===we});if(we._explicit&&Re&&we.mutatedParts)for(var $e=0,Xe=Object.values(Pe.queries.query);$e<Xe.length;$e++)for(var Je=0,tt=(It=Xe[$e]).slice();Je<tt.length;Je++)gg((Tt=tt[Je]).obsSet,we.mutatedParts)&&(D(It,Tt),Tt.subscribers.forEach(function(Ht){return De.add(Ht)}));else if(0<Ue.length){Pe.optimisticOps=Pe.optimisticOps.filter(function(Ht){return Ht.trans!==we});for(var ot=0,xt=Object.values(Pe.queries.query);ot<xt.length;ot++)for(var It,Tt,kt,$t=0,At=(It=xt[ot]).slice();$t<At.length;$t++)(Tt=At[$t]).res!=null&&we.mutatedParts&&(Re&&!Tt.dirty?(kt=Object.isFrozen(Tt.res),kt=VS(Tt.res,Tt.req,Ue,Fe,Tt,kt),Tt.dirty?(D(It,Tt),Tt.subscribers.forEach(function(Ht){return De.add(Ht)})):kt!==Tt.res&&(Tt.res=kt,Tt.promise=ct.resolve({result:kt}))):(Tt.dirty&&D(It,Tt),Tt.subscribers.forEach(function(Ht){return De.add(Ht)})))}}}De.forEach(function(Ht){return Ht()})}}},we.addEventListener("abort",Q(!1),{signal:me}),we.addEventListener("error",Q(!1),{signal:me}),we.addEventListener("complete",Q(!0),{signal:me})),we},table:function(B){var W=T.table(B),Q=W.schema.primaryKey;return r(r({},W),{mutate:function(oe){var me=ne.trans;if(Q.outbound||me.db._options.cache==="disabled"||me.explicit||me.idbtrans.mode!=="readwrite")return W.mutate(oe);var we=Oa["idb://".concat(I,"/").concat(B)];return we?(me=W.mutate(oe),oe.type!=="add"&&oe.type!=="put"||!(50<=oe.values.length||Eg(Q,oe).some(function(Re){return Re==null}))?(we.optimisticOps.push(oe),oe.mutatedParts&&xf(oe.mutatedParts),me.then(function(Re){0<Re.numFailures&&(D(we.optimisticOps,oe),(Re=BS(0,oe,Re))&&we.optimisticOps.push(Re),oe.mutatedParts&&xf(oe.mutatedParts))}),me.catch(function(){D(we.optimisticOps,oe),oe.mutatedParts&&xf(oe.mutatedParts)})):me.then(function(Re){var De=BS(0,r(r({},oe),{values:oe.values.map(function(Be,xe){var He;return Re.failures[xe]?Be:(Be=(He=Q.keyPath)!==null&&He!==void 0&&He.includes(".")?U(Be):r({},Be),k(Be,Q.keyPath,Re.results[xe]),Be)})}),Re);we.optimisticOps.push(De),queueMicrotask(function(){return oe.mutatedParts&&xf(oe.mutatedParts)})}),me):W.mutate(oe)},query:function(oe){if(!NS(ne,W)||!FS("query",oe))return W.query(oe);var me=((De=ne.trans)===null||De===void 0?void 0:De.db._options.cache)==="immutable",xe=ne,we=xe.requery,Re=xe.signal,De=function(Fe,Ue,$e,Xe){var Je=Oa["idb://".concat(Fe,"/").concat(Ue)];if(!Je)return[];if(!(Ue=Je.queries[$e]))return[null,!1,Je,null];var tt=Ue[(Xe.query?Xe.query.index.name:null)||""];if(!tt)return[null,!1,Je,null];switch($e){case"query":var ot=tt.find(function(xt){return xt.req.limit===Xe.limit&&xt.req.values===Xe.values&&US(xt.req.query.range,Xe.query.range)});return ot?[ot,!0,Je,tt]:[tt.find(function(xt){return("limit"in xt.req?xt.req.limit:1/0)>=Xe.limit&&(!Xe.values||xt.req.values)&&yO(xt.req.query.range,Xe.query.range)}),!1,Je,tt];case"count":return ot=tt.find(function(xt){return US(xt.req.query.range,Xe.query.range)}),[ot,!!ot,Je,tt]}}(I,B,"query",oe),Be=De[0],xe=De[1],He=De[2],Pe=De[3];return Be&&xe?Be.obsSet=oe.obsSet:(xe=W.query(oe).then(function(Fe){var Ue=Fe.result;if(Be&&(Be.res=Ue),me){for(var $e=0,Xe=Ue.length;$e<Xe;++$e)Object.freeze(Ue[$e]);Object.freeze(Ue)}else Fe.result=U(Ue);return Fe}).catch(function(Fe){return Pe&&Be&&D(Pe,Be),Promise.reject(Fe)}),Be={obsSet:oe.obsSet,promise:xe,subscribers:new Set,type:"query",req:oe,dirty:!1},Pe?Pe.push(Be):(Pe=[Be],(He=He||(Oa["idb://".concat(I,"/").concat(B)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[oe.query.index.name||""]=Pe)),bO(Be,Pe,we,Re),Be.promise.then(function(Fe){return{result:VS(Fe.result,oe,He==null?void 0:He.optimisticOps,W,Be,me)}})}})}})}};function Cf(T,I){return new Proxy(T,{get:function(B,W,Q){return W==="db"?I:Reflect.get(B,W,Q)}})}var lo=(pr.prototype.version=function(T){if(isNaN(T)||T<.1)throw new ae.Type("Given version is not a positive number");if(T=Math.round(10*T)/10,this.idbdb||this._state.isBeingOpened)throw new ae.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,T);var I=this._versions,B=I.filter(function(W){return W._cfg.version===T})[0];return B||(B=new this.Version(T),I.push(B),I.sort(uO),B.stores({}),this._state.autoSchema=!1,B)},pr.prototype._whenReady=function(T){var I=this;return this.idbdb&&(this._state.openComplete||ne.letThrough||this._vip)?T():new ct(function(B,W){if(I._state.openComplete)return W(new ae.DatabaseClosed(I._state.dbOpenError));if(!I._state.isBeingOpened){if(!I._state.autoOpen)return void W(new ae.DatabaseClosed);I.open().catch(z)}I._state.dbReadyPromise.then(B,W)}).then(T)},pr.prototype.use=function(T){var I=T.stack,B=T.create,W=T.level,Q=T.name;return Q&&this.unuse({stack:I,name:Q}),T=this._middlewares[I]||(this._middlewares[I]=[]),T.push({stack:I,create:B,level:W??10,name:Q}),T.sort(function(oe,me){return oe.level-me.level}),this},pr.prototype.unuse=function(T){var I=T.stack,B=T.name,W=T.create;return I&&this._middlewares[I]&&(this._middlewares[I]=this._middlewares[I].filter(function(Q){return W?Q.create!==W:!!B&&Q.name!==B})),this},pr.prototype.open=function(){var T=this;return Kr(Le,function(){return hO(T)})},pr.prototype._close=function(){var T=this._state,I=yr.indexOf(this);if(0<=I&&yr.splice(I,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}T.isBeingOpened||(T.dbReadyPromise=new ct(function(B){T.dbReadyResolve=B}),T.openCanceller=new ct(function(B,W){T.cancelOpen=W}))},pr.prototype.close=function(B){var I=(B===void 0?{disableAutoOpen:!0}:B).disableAutoOpen,B=this._state;I?(B.isBeingOpened&&B.cancelOpen(new ae.DatabaseClosed),this._close(),B.autoOpen=!1,B.dbOpenError=new ae.DatabaseClosed):(this._close(),B.autoOpen=this._options.autoOpen||B.isBeingOpened,B.openComplete=!1,B.dbOpenError=null)},pr.prototype.delete=function(T){var I=this;T===void 0&&(T={disableAutoOpen:!0});var B=0<arguments.length&&typeof arguments[0]!="object",W=this._state;return new ct(function(Q,oe){function me(){I.close(T);var we=I._deps.indexedDB.deleteDatabase(I.name);we.onsuccess=Bn(function(){var Re,De,Be;Re=I._deps,De=I.name,Be=Re.indexedDB,Re=Re.IDBKeyRange,hg(Be)||De===zs||fg(Be,Re).delete(De).catch(z),Q()}),we.onerror=Di(oe),we.onblocked=I._fireOnBlocked}if(B)throw new ae.InvalidArgument("Invalid closeOptions argument to db.delete()");W.isBeingOpened?W.dbReadyPromise.then(me):me()})},pr.prototype.backendDB=function(){return this.idbdb},pr.prototype.isOpen=function(){return this.idbdb!==null},pr.prototype.hasBeenClosed=function(){var T=this._state.dbOpenError;return T&&T.name==="DatabaseClosed"},pr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},pr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(pr.prototype,"tables",{get:function(){var T=this;return o(this._allTables).map(function(I){return T._allTables[I]})},enumerable:!1,configurable:!0}),pr.prototype.transaction=function(){var T=(function(I,B,W){var Q=arguments.length;if(Q<2)throw new ae.InvalidArgument("Too few arguments");for(var oe=new Array(Q-1);--Q;)oe[Q-1]=arguments[Q];return W=oe.pop(),[I,_(oe),W]}).apply(this,arguments);return this._transaction.apply(this,T)},pr.prototype._transaction=function(T,I,B){var W=this,Q=ne.trans;Q&&Q.db===this&&T.indexOf("!")===-1||(Q=null);var oe,me,we=T.indexOf("?")!==-1;T=T.replace("!","").replace("?","");try{if(me=I.map(function(De){if(De=De instanceof W.Table?De.name:De,typeof De!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return De}),T=="r"||T===fi)oe=fi;else{if(T!="rw"&&T!=Go)throw new ae.InvalidArgument("Invalid transaction mode: "+T);oe=Go}if(Q){if(Q.mode===fi&&oe===Go){if(!we)throw new ae.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");Q=null}Q&&me.forEach(function(De){if(Q&&Q.storeNames.indexOf(De)===-1){if(!we)throw new ae.SubTransaction("Table "+De+" not included in parent transaction.");Q=null}}),we&&Q&&!Q.active&&(Q=null)}}catch(De){return Q?Q._promise(null,function(Be,xe){xe(De)}):gt(De)}var Re=(function De(Be,xe,He,Pe,Fe){return ct.resolve().then(function(){var Ue=ne.transless||ne,$e=Be._createTransaction(xe,He,Be._dbSchema,Pe);if($e.explicit=!0,Ue={trans:$e,transless:Ue},Pe)$e.idbtrans=Pe.idbtrans;else try{$e.create(),$e.idbtrans._explicit=!0,Be._state.PR1398_maxLoop=3}catch(tt){return tt.name===Z.InvalidState&&Be.isOpen()&&0<--Be._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Be.close({disableAutoOpen:!1}),Be.open().then(function(){return De(Be,xe,He,null,Fe)})):gt(tt)}var Xe,Je=q(Fe);return Je&&dn(),Ue=ct.follow(function(){var tt;(Xe=Fe.call($e,$e))&&(Je?(tt=Vn.bind(null,null),Xe.then(tt,tt)):typeof Xe.next=="function"&&typeof Xe.throw=="function"&&(Xe=Sg(Xe)))},Ue),(Xe&&typeof Xe.then=="function"?ct.resolve(Xe).then(function(tt){return $e.active?tt:gt(new ae.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Ue.then(function(){return Xe})).then(function(tt){return Pe&&$e._resolve(),$e._completion.then(function(){return tt})}).catch(function(tt){return $e._reject(tt),gt(tt)})})}).bind(null,this,oe,me,Q,B);return Q?Q._promise(oe,Re,"lock"):ne.trans?Kr(ne.transless,function(){return W._whenReady(Re)}):this._whenReady(Re)},pr.prototype.table=function(T){if(!d(this._allTables,T))throw new ae.InvalidTable("Table ".concat(T," does not exist"));return this._allTables[T]},pr);function pr(T,I){var B=this;this._middlewares={},this.verno=0;var W=pr.dependencies;this._options=I=r({addons:pr.addons,autoOpen:!0,indexedDB:W.indexedDB,IDBKeyRange:W.IDBKeyRange,cache:"cloned"},I),this._deps={indexedDB:I.indexedDB,IDBKeyRange:I.IDBKeyRange},W=I.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var Q,oe,me,we,Re,De={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:z,dbReadyPromise:null,cancelOpen:z,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:I.autoOpen};De.dbReadyPromise=new ct(function(xe){De.dbReadyResolve=xe}),De.openCanceller=new ct(function(xe,He){De.cancelOpen=He}),this._state=De,this.name=T,this.on=nc(this,"populate","blocked","versionchange","close",{ready:[Ne,z]}),this.on.ready.subscribe=b(this.on.ready.subscribe,function(xe){return function(He,Pe){pr.vip(function(){var Fe,Ue=B._state;Ue.openComplete?(Ue.dbOpenError||ct.resolve().then(He),Pe&&xe(He)):Ue.onReadyBeingFired?(Ue.onReadyBeingFired.push(He),Pe&&xe(He)):(xe(He),Fe=B,Pe||xe(function $e(){Fe.on.ready.unsubscribe(He),Fe.on.ready.unsubscribe($e)}))})}}),this.Collection=(Q=this,rc(nO.prototype,function(Xe,$e){this.db=Q;var Pe=cf,Fe=null;if($e)try{Pe=$e()}catch(Je){Fe=Je}var Ue=Xe._ctx,$e=Ue.table,Xe=$e.hook.reading.fire;this._ctx={table:$e,index:Ue.index,isPrimKey:!Ue.index||$e.schema.primKey.keyPath&&Ue.index===$e.schema.primKey.name,range:Pe,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Fe,or:Ue.or,valueMapper:Xe!==re?Xe:null}})),this.Table=(oe=this,rc(ES.prototype,function(xe,He,Pe){this.db=oe,this._tx=Pe,this.name=xe,this.schema=He,this.hook=oe._allTables[xe]?oe._allTables[xe].hook:nc(null,{creating:[Ee,z],reading:[ve,re],updating:[Se,z],deleting:[be,z]})})),this.Transaction=(me=this,rc(iO.prototype,function(xe,He,Pe,Fe,Ue){var $e=this;this.db=me,this.mode=xe,this.storeNames=He,this.schema=Pe,this.chromeTransactionDurability=Fe,this.idbtrans=null,this.on=nc(this,"complete","error","abort"),this.parent=Ue||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ct(function(Xe,Je){$e._resolve=Xe,$e._reject=Je}),this._completion.then(function(){$e.active=!1,$e.on.complete.fire()},function(Xe){var Je=$e.active;return $e.active=!1,$e.on.error.fire(Xe),$e.parent?$e.parent._reject(Xe):Je&&$e.idbtrans&&$e.idbtrans.abort(),gt(Xe)})})),this.Version=(we=this,rc(fO.prototype,function(xe){this.db=we,this._cfg={version:xe,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Re=this,rc(_S.prototype,function(xe,He,Pe){if(this.db=Re,this._ctx={table:xe,index:He===":id"?null:He,or:Pe},this._cmp=this._ascending=Pn,this._descending=function(Fe,Ue){return Pn(Ue,Fe)},this._max=function(Fe,Ue){return 0<Pn(Fe,Ue)?Fe:Ue},this._min=function(Fe,Ue){return Pn(Fe,Ue)<0?Fe:Ue},this._IDBKeyRange=Re._deps.IDBKeyRange,!this._IDBKeyRange)throw new ae.MissingAPI})),this.on("versionchange",function(xe){0<xe.newVersion?console.warn("Another connection wants to upgrade database '".concat(B.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(B.name,"'. Closing db now to resume the delete request.")),B.close({disableAutoOpen:!1})}),this.on("blocked",function(xe){!xe.newVersion||xe.newVersion<xe.oldVersion?console.warn("Dexie.delete('".concat(B.name,"') was blocked")):console.warn("Upgrade '".concat(B.name,"' blocked by other connection holding version ").concat(xe.oldVersion/10))}),this._maxKey=ac(I.IDBKeyRange),this._createTransaction=function(xe,He,Pe,Fe){return new B.Transaction(xe,He,Pe,B._options.chromeTransactionDurability,Fe)},this._fireOnBlocked=function(xe){B.on("blocked").fire(xe),yr.filter(function(He){return He.name===B.name&&He!==B&&!He._state.vcFired}).map(function(He){return He.on("versionchange").fire(xe)})},this.use(gO),this.use(SO),this.use(vO),this.use(pO),this.use(mO);var Be=new Proxy(this,{get:function(xe,He,Pe){if(He==="_vip")return!0;if(He==="table")return function(Ue){return Cf(B.table(Ue),Be)};var Fe=Reflect.get(xe,He,Pe);return Fe instanceof ES?Cf(Fe,Be):He==="tables"?Fe.map(function(Ue){return Cf(Ue,Be)}):He==="_createTransaction"?function(){return Cf(Fe.apply(this,arguments),Be)}:Fe}});this.vip=Be,W.forEach(function(xe){return xe(B)})}var kf,Ws=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",wO=(Tg.prototype.subscribe=function(T,I,B){return this._subscribe(T&&typeof T!="function"?T:{next:T,error:I,complete:B})},Tg.prototype[Ws]=function(){return this},Tg);function Tg(T){this._subscribe=T}try{kf={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{kf={indexedDB:null,IDBKeyRange:null}}function HS(T){var I,B=!1,W=new wO(function(Q){var oe=q(T),me,we=!1,Re={},De={},Be={get closed(){return we},unsubscribe:function(){we||(we=!0,me&&me.abort(),xe&&Xo.storagemutated.unsubscribe(Pe))}};Q.start&&Q.start(Be);var xe=!1,He=function(){return Qe(Fe)},Pe=function(Ue){Ef(Re,Ue),gg(De,Re)&&He()},Fe=function(){var Ue,$e,Xe;!we&&kf.indexedDB&&(Re={},Ue={},me&&me.abort(),me=new AbortController,Xe=function(Je){var tt=Vt();try{oe&&dn();var ot=Ct(T,Je);return ot=oe?ot.finally(Vn):ot}finally{tt&&cr()}}($e={subscr:Ue,signal:me.signal,requery:He,querier:T,trans:null}),Promise.resolve(Xe).then(function(Je){B=!0,I=Je,we||$e.signal.aborted||(Re={},function(tt){for(var ot in tt)if(d(tt,ot))return;return 1}(De=Ue)||xe||(Xo(oc,Pe),xe=!0),Qe(function(){return!we&&Q.next&&Q.next(Je)}))},function(Je){B=!1,["DatabaseClosedError","AbortError"].includes(Je==null?void 0:Je.name)||we||Qe(function(){we||Q.error&&Q.error(Je)})}))};return setTimeout(He,0),Be});return W.hasValue=function(){return B},W.getValue=function(){return I},W}var $a=lo;function Cg(T){var I=Qo;try{Qo=!0,Xo.storagemutated.fire(T),bg(T,!0)}finally{Qo=I}}f($a,r(r({},Ce),{delete:function(T){return new $a(T,{addons:[]}).delete()},exists:function(T){return new $a(T,{addons:[]}).open().then(function(I){return I.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(T){try{return I=$a.dependencies,B=I.indexedDB,I=I.IDBKeyRange,(hg(B)?Promise.resolve(B.databases()).then(function(W){return W.map(function(Q){return Q.name}).filter(function(Q){return Q!==zs})}):fg(B,I).toCollection().primaryKeys()).then(T)}catch{return gt(new ae.MissingAPI)}var I,B},defineClass:function(){return function(T){u(this,T)}},ignoreTransaction:function(T){return ne.trans?Kr(ne.transless,T):T()},vip:pg,async:function(T){return function(){try{var I=Sg(T.apply(this,arguments));return I&&typeof I.then=="function"?I:ct.resolve(I)}catch(B){return gt(B)}}},spawn:function(T,I,B){try{var W=Sg(T.apply(B,I||[]));return W&&typeof W.then=="function"?W:ct.resolve(W)}catch(Q){return gt(Q)}},currentTransaction:{get:function(){return ne.trans||null}},waitFor:function(T,I){return I=ct.resolve(typeof T=="function"?$a.ignoreTransaction(T):T).timeout(I||6e4),ne.trans?ne.trans.waitFor(I):I},Promise:ct,debug:{get:function(){return Me},set:function(T){st(T)}},derive:g,extend:u,props:f,override:b,Events:nc,on:Xo,liveQuery:HS,extendObservabilitySet:Ef,getByKeyPath:x,setByKeyPath:k,delByKeyPath:function(T,I){typeof I=="string"?k(T,I,void 0):"length"in I&&[].map.call(I,function(B){k(T,B,void 0)})},shallowClone:A,deepClone:U,getObjectDiff:wg,cmp:Pn,asap:E,minKey:-1/0,addons:[],connections:yr,errnames:Z,dependencies:kf,cache:Oa,semVer:"4.0.11",version:"4.0.11".split(".").map(function(T){return parseInt(T)}).reduce(function(T,I,B){return T+I/Math.pow(10,2*B)})})),$a.maxKey=ac($a.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Xo(oc,function(T){Qo||(T=new CustomEvent(ig,{detail:T}),Qo=!0,dispatchEvent(T),Qo=!1)}),addEventListener(ig,function(T){T=T.detail,Qo||Cg(T)}));var _l,Qo=!1,jS=function(){};return typeof BroadcastChannel<"u"&&((jS=function(){(_l=new BroadcastChannel(ig)).onmessage=function(T){return T.data&&Cg(T.data)}})(),typeof _l.unref=="function"&&_l.unref(),Xo(oc,function(T){Qo||_l.postMessage(T)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(T){if(!lo.disableBfCache&&T.persisted){Me&&console.debug("Dexie: handling persisted pagehide"),_l!=null&&_l.close();for(var I=0,B=yr;I<B.length;I++)B[I].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(T){!lo.disableBfCache&&T.persisted&&(Me&&console.debug("Dexie: handling persisted pageshow"),jS(),Cg({all:new zr(-1/0,[[]])}))})),ct.rejectionMapper=function(T,I){return!T||T instanceof X||T instanceof TypeError||T instanceof SyntaxError||!T.name||!Te[T.name]?T:(I=new Te[T.name](I||T.message,T),"stack"in T&&p(I,"stack",{get:function(){return this.inner.stack}}),I)},st(Me),r(lo,Object.freeze({__proto__:null,Dexie:lo,liveQuery:HS,Entity:df,cmp:Pn,PropModification:sc,replacePrefix:function(T,I){return new sc({replacePrefix:[T,I]})},add:function(T){return new sc({add:T})},remove:function(T){return new sc({remove:T})},default:lo,RangeSet:zr,mergeRanges:cc,rangesOverlap:PS}),{default:lo}),lo})}(_h)),_h.exports}var L5=R5();const k0=ui(L5),Ex=Symbol.for("Dexie"),Cp=globalThis[Ex]||(globalThis[Ex]=k0);if(k0.semVer!==Cp.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${k0.semVer} and ${Cp.semVer}`);const{liveQuery:Ome,mergeRanges:$me,rangesOverlap:Mme,RangeSet:Nme,cmp:Fme,Entity:Bme,PropModification:Vme,replacePrefix:Ume,add:Hme,remove:jme}=Cp,gd="anime",P5={info:"&anime_id",anime:"&anime_id",danmu:"&episode_id"},Ib={[gd]:O5(gd,P5)},kp=Ib[gd].anime,D5=Ib[gd].info,_0=Ib[gd].danmu;function O5(t,e,n=1){let r=new Cp(t);return r.version(n).stores(e),r}function Rb(t,e,n=60){const r=t.put.bind(t),s=t.get.bind(t),i=async function(a,u){const l=new Date,c={[e]:a,value:u,expiry:l.getTime()+n*6e4},d=await r(c),f=new Event(r.name);return f.key=a,f.value=u,document.dispatchEvent(f),d},o=async function(a){const u=await s(a),l=new Event(s.name);return l.key=a,l.value=u?u.value:null,document.dispatchEvent(l),u?new Date().getTime()>u.expiry?(await t.delete(a),null):u.value:null};return t.put=i,t.get=o,{put:i,get:o}}Rb(kp,"anime_id",60*24*7);Rb(D5,"anime_id",60*24*7);Rb(_0,"episode_id",60*24*7);let Lb="/proxy",$5="/api/v2/comment/",M5="/api/v2/search/episodes",N5="/api/v2/bangumi/";function F5(t,e){return e=e.toString().padStart(4,"0"),`${t}${e}`}async function B5(t,e){const n=await Ra({url:`${Lb}${M5}`,method:"get",params:{anime:t,episode:e}});return console.log(n),n.animes}async function V5(t){return(await Ra({url:`${Lb}${N5}${t}`,method:"get"})).bangumi}async function U5(t){return(await Ra({url:`${Lb}${$5}${t}?withRelated=true&chConvert=1`,method:"get"})).comments}let A0=["","",""],xx=()=>{let t=document.querySelector("#danmu_count"),e=document.querySelector("#anime_list"),n=document.querySelector("#episode_list");try{return[`${e.options[e.selectedIndex].text}`,`: ${n.options[n.selectedIndex].text}`,` ${t.textContent} `]}catch(r){return console.log(r),[]}};function H5(t){let e=document.querySelector("#episode_list");async function n(s){let{title:i,episode:o}=s.storage.get("info"),a=s.storage.get(i),u=document.querySelector("#episode_list");const l=u.selectedIndex;console.log("update_episode_select: ",l);let c=l+1-o;c!==a.episode_dif&&(a.episode_dif=c,s.storage.set(i,a));const d=u.value;let f;try{f=await U5(d),await _0.put(d,f)}catch(h){if(console.log(": ",h),f=await _0.get(d),!f)throw new Error("")}X5(s,f)}async function r(s){console.log("update_episode_list: ");let{title:i,episode:o,url:a}=s.storage.get("info"),u=s.storage.get(i);console.log("animeId: ",u.animeId);let l=parseInt(u.animeId),c=await kp.get(l);if(c.imageUrl===void 0){let v=await V5(l);console.log("bangumi: ",v),c.imageUrl=v.imageUrl,await kp.put(l,c);const y={vod_id:l,name:c.animeTitle,vod_pic:c.imageUrl,episode:o,url:a};I3(y).then(w=>{console.log(":",w)})}let d=document.querySelector("#episode_list");const{episodes:f}=c,h=f.reduce((v,y)=>v+`<option value="${y.episodeId}">${y.episodeTitle}</option>`,"");d.innerHTML=h;let p=F5(u.animeId,u.episode_dif+o);d.value=p;const g=new CustomEvent("update_episode_select",{detail:{art:s}});document.dispatchEvent(g)}e.addEventListener("change",async function(s){await n(t)}),document.addEventListener("update_episode_list",async function(s){let{art:i}=s.detail;await r(i)}),document.addEventListener("update_episode_select",async function(s){let{art:i}=s.detail;await n(i)})}function j5(t){let e=document.querySelector("#anime_list");e.addEventListener("change",async()=>{let{title:r}=t.storage.get("info"),s=t.storage.get(r);const i=e.value;i!==s.animeId&&(s.animeId=i,t.storage.set(r,s),await nI(t),await Pb(t))});let n=document.querySelector("#anime_name");n.addEventListener("keypress",async r=>{if(r.key==="Enter"){let s=n.value,i=t.storage.get("info"),o=t.storage.get(i.title);o.animeTitle=s,t.storage.set(s,o),i.title=s,t.storage.set("info",i),await I0(t)}}),n.addEventListener("blur",async()=>{let r=n.value,s=t.storage.get("info"),i=t.storage.get(s.title);i.animeTitle=r,t.storage.set(r,i),s.title=r,t.storage.set("info",s),await I0(t)})}function K5(t){tV(t),j5(t),H5(t)}async function nI(t){let{title:e}=t.storage.get("info"),n=t.storage.get(e);n.animeTitle===null&&(n.animeTitle=e,t.storage.set(e,n));let r=document.querySelector("#anime_name");r.value=n.animeTitle}async function I0(t){let{title:e}=t.storage.get("info"),n=t.storage.get(e),r;try{r=await B5(n.animeTitle)}catch(s){console.log(": ",s)}if(r.length>0){n.animeId=r[0].animeId,n.animes=r,t.storage.set(e,n);for(let s of r)console.log("animeId: ",s.animeId),await kp.put(s.animeId,s);await Pb(t)}else _c(t,A0)}async function z5(t){let{title:e}=t.storage.get("info"),n=t.storage.get(e);console.log("update_anime_list: ");let r=document.querySelector("#anime_list");const s=n.animes.reduce((o,a)=>o+`<option value="${a.animeId}">${a.animeTitle}</option>`,"");r.innerHTML=s,r.value=n.animeId;const i=new CustomEvent("update_episode_list",{detail:{art:t}});document.dispatchEvent(i)}async function Pb(t){let{title:e}=t.storage.get("info");t.storage.get(e).animeId===null?(console.log(""),await I0(t)):(console.log(""),await z5(t))}var Ah={exports:{}},W5=Ah.exports,Tx;function G5(){return Tx||(Tx=1,function(t,e){(function(n,r){r()})(W5,function(){function n(l,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function r(l,c,d){var f=new XMLHttpRequest;f.open("GET",l),f.responseType="blob",f.onload=function(){u(f.response,c,d)},f.onerror=function(){console.error("could not download file")},f.send()}function s(l){var c=new XMLHttpRequest;c.open("HEAD",l,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function i(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Co=="object"&&Co.global===Co?Co:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(l,c,d){var f=o.URL||o.webkitURL,h=document.createElement("a");c=c||l.name||"download",h.download=c,h.rel="noopener",typeof l=="string"?(h.href=l,h.origin===location.origin?i(h):s(h.href)?r(l,c,d):i(h,h.target="_blank")):(h.href=f.createObjectURL(l),setTimeout(function(){f.revokeObjectURL(h.href)},4e4),setTimeout(function(){i(h)},0))}:"msSaveOrOpenBlob"in navigator?function(l,c,d){if(c=c||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(n(l,d),c);else if(s(l))r(l,c,d);else{var f=document.createElement("a");f.href=l,f.target="_blank",setTimeout(function(){i(f)})}}:function(l,c,d,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof l=="string")return r(l,c,d);var h=l.type==="application/octet-stream",p=/constructor/i.test(o.HTMLElement)||o.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||h&&p||a)&&typeof FileReader<"u"){var v=new FileReader;v.onloadend=function(){var b=v.result;b=g?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=b:location=b,f=null},v.readAsDataURL(l)}else{var y=o.URL||o.webkitURL,w=y.createObjectURL(l);f?f.location=w:location.href=w,f=null,setTimeout(function(){y.revokeObjectURL(w)},4e4)}});o.saveAs=u.saveAs=u,t.exports=u})}(Ah)),Ah.exports}var q5=G5();const Y5=`<div id="k-player-danmaku-search-form">
                <label>
                  <span></span>
                  <input type="text" id="anime_name" class="k-input" />
                </label>
                <div style="min-height:24px; padding-top:4px">
                  <span id="tips"></span>
                </div>
                <label>
                  <span></span>
                  <select id="anime_list" class="k-select"></select>
                </label>
                <label>
                  <span></span>
                  <select id="episode_list" class="k-select"></select>
                </label>
                <label>
                  <span class="open-danmaku-list">
                    <span></span>
                    <small id="danmu_count"></small>
                  </span>
                </label>
                
                <span class="specific-thanks"> play </span>
              </div>`;function _c(t,e){t.notice.show=e.join(`,

`)}function X5(t,e){let n=sI(e);t.plugins.artplayerPluginDanmuku.config({danmuku:n}),t.plugins.artplayerPluginDanmuku.load()}function Q5(t){const e=document.createElement("input");e.type="file",e.accept=".json, .xml",e.addEventListener("change",()=>{const n=e.files[0];if(!n)return;const r=new FileReader;r.onload=()=>{const s=r.result;if(n.name.endsWith(".json")){let i=JSON.parse(s),o;i.length===1?o=i[0].comments:o=i;const a=sI(o);console.log("Parsed JSON danmaku:",a),t.plugins.artplayerPluginDanmuku.config({danmuku:a}),t.plugins.artplayerPluginDanmuku.load()}else if(n.name.endsWith(".xml")){const i=nV(s);console.log("Parsed XML danmaku:",i),t.plugins.artplayerPluginDanmuku.config({danmuku:i}),t.plugins.artplayerPluginDanmuku.load()}else console.error("Unsupported file format. Please upload a .json or .xml file.")},r.readAsText(n)}),e.click()}function Z5(t){const e=document.createElement("input");e.type="file",e.accept=".srt,.ass,.vtt",e.onchange=async function(){const n=e.files[0];if(!n)return;const r=new FileReader;r.onload=function(s){let i=s.target.result;n.name.endsWith(".srt")&&(i=`WEBVTT FILE

`+i.replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2"));const o=new Blob([i],{type:n.name.endsWith(".vtt")?"text/vtt":"text/plain"}),a=URL.createObjectURL(o);t.subtitle.url=a,t.subtitle.show=!0,t.once("destroy",()=>{URL.revokeObjectURL(a)})},r.readAsText(n,"utf-8")},e.click()}async function J5(t){let e=t.plugins.artplayerPluginDanmuku.option.danmuku,n=t.storage.get("info");const{title:r,episode:s}=n;{const i=eV(e),o=new Blob([i],{type:"text/xml;charset=utf-8"});q5.saveAs(o,`${r} - ${s}.xml`)}}function eV(t,e,n){let r=`<?xml version="1.0" encoding="UTF-8"?><i>
`;return Array.isArray(t)&&t.forEach(s=>{const i=s.time||0,o=s.mode!==void 0?s.mode===0?1:4:1,a=s.fontSize||25,u=s.color?parseInt(s.color.replace("#",""),16):16777215,l=s.timestamp||Date.now(),c=s.pool||0,d=s.userID||0,f=s.rowID||0,h=`${i},${o},${a},${u},${l},${c},${d},${f}`,p=(s.text||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");r+=`  <d p="${h}">${p}</d>
`}),r+="</i>",r}function tV(t){let e=A5({danmuku:[],speed:5,opacity:1,fontSize:25,color:"#FFFFFF",mode:0,margin:[10,"25%"],antiOverlap:!0,useWorker:!0,synchronousPlayback:!1,filter:r=>r.text.length<50,lockTime:5,maxLength:100,minWidth:200,maxWidth:600,theme:"light",heatmap:!0,beforeEmit:r=>!!r.text.trim()});t.plugins.add(e),t.on("artplayerPluginDanmuku:emit",r=>{console.info("",r)}),t.on("artplayerPluginDanmuku:error",r=>{console.info("",r)}),t.on("artplayerPluginDanmuku:config",r=>{});let n=document.querySelector("#danmu_count");t.on("artplayerPluginDanmuku:loaded",r=>{console.info("",r.length),n.textContent=r.length,n.textContent===""?_c(t,A0):_c(t,xx())}),t.on("pause",()=>{n.textContent===""?_c(t,A0):_c(t,xx())})}function rI(t){switch(t){case 1:case 2:case 3:return 0;case 4:case 5:return 1;default:return 0}}function nV(t){if(typeof t!="string")return[];const e=t.matchAll(/<d (?:.*? )??p="(?<p>.+?)"(?: .*?)?>(?<text>.+?)<\/d>/gs);return Array.from(e).map(n=>{const r=n.groups.p.split(",");return r.length>=8?{text:n.groups.text.trim().replaceAll("&quot;",'"').replaceAll("&apos;","'").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&amp;","&"),time:Number(r[0]),mode:rI(Number(r[1])),fontSize:Number(r[2]),color:`#${Number(r[3]).toString(16)}`,timestamp:Number(r[4]),pool:Number(r[5]),userID:r[6],rowID:Number(r[7])}:null}).filter(Boolean)}function sI(t){return t.map(e=>{let n=e.p.split(",");return{text:e.m,time:Number(n[0]),mode:rI(Number(n[1])),fontSize:25,color:`#${Number(n[2]).toString(16)}`,timestamp:Number(e.cid),pool:0,userID:n[3],rowID:0}})}function rV(t,e,n){if(Eo.isSupported()){n.hls&&n.hls.destroy();const r=new Eo;r.loadSource(e),r.attachMedia(t),n.hls=r,n.on("destroy",()=>r.destroy())}else t.canPlayType("application/vnd.apple.mpegurl")?t.src=e:n.notice.show="Unsupported playback format: m3u8"}function Cx(t,e,n,r){let s={container:e,url:t,poster:n,autoSize:!0,fullscreen:!0,fullscreenWeb:!0,autoOrientation:!0,flip:!0,playbackRate:!0,aspectRatio:!0,setting:!0,controls:[{position:"right",html:"",click:()=>Z5(i)},{position:"right",html:"",click:()=>Q5(i)},{position:"right",html:"",click:()=>J5(i)}],contextmenu:[{name:"",html:Y5}]};s.url.endsWith(".m3u8")&&Object.assign(s,{type:"m3u8",customType:{m3u8:rV}});let i=new N3(s);return i}const kx="/assets/backgroud-CDzjwRHu.png",sV={class:"video-container",width:"100vw",height:"100vw",allowfullscreen:""},iV={__name:"Play",setup(t){let e=".video-container";async function n(r){await nI(r),await Pb(r)}return ZN(),Ft(async()=>{const r=new URLSearchParams(window.location.search),s=r.get("episode"),i=r.get("title");let o=r.get("url");if(!o)try{const u=await D2({name:i,episode:s});u.success&&u.data&&u.data.length>0?(o=u.data[0].url,console.log(":",o)):console.log("")}catch(a){console.error(":",a)}if(o){let a=Cx(o,e,kx);K5(a);let u={title:i,url:o,episode:s},l={anime_idx:0,episode_dif:0,animeTitle:null,animeId:null};a.storage.set("info",u),a.storage.set(i,l),await n(a)}else Cx(".m3u8",e,kx),console.log("URL")}),(r,s)=>($(),Y("div",sV))}},oV=mm(iV,[["__scopeId","data-v-d9423a7f"]]);/*! Element Plus Icons Vue v2.3.2 */var aV=se({name:"ArrowDown",__name:"arrow-down",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.59 30.59 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.59 30.59 0 0 0-42.752 0z"})]))}}),Bo=aV,lV=se({name:"ArrowLeft",__name:"arrow-left",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.59 30.59 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.59 30.59 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0"})]))}}),Ea=lV,uV=se({name:"ArrowRight",__name:"arrow-right",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M340.864 149.312a30.59 30.59 0 0 0 0 42.752L652.736 512 340.864 831.872a30.59 30.59 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),cs=uV,cV=se({name:"ArrowUp",__name:"arrow-up",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),Db=cV,dV=se({name:"Back",__name:"back",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64"}),J("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312z"})]))}}),fV=dV,hV=se({name:"Calendar",__name:"calendar",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"})]))}}),pV=hV,mV=se({name:"CaretRight",__name:"caret-right",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"})]))}}),iI=mV,gV=se({name:"CaretTop",__name:"caret-top",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"})]))}}),vV=gV,yV=se({name:"Check",__name:"check",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),zd=yV,bV=se({name:"CircleCheckFilled",__name:"circle-check-filled",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.27 38.27 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),SV=bV,wV=se({name:"CircleCheck",__name:"circle-check",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),J("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752z"})]))}}),Ob=wV,EV=se({name:"CircleCloseFilled",__name:"circle-close-filled",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),$b=EV,xV=se({name:"CircleClose",__name:"circle-close",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),J("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),Vo=xV,TV=se({name:"Clock",__name:"clock",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),J("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"}),J("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"})]))}}),oI=TV,CV=se({name:"Close",__name:"close",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),si=CV,kV=se({name:"DArrowLeft",__name:"d-arrow-left",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.59 30.59 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.59 30.59 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672zm256 0a29.12 29.12 0 0 1 41.728 0 30.59 30.59 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.59 30.59 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672z"})]))}}),xa=kV,_V=se({name:"DArrowRight",__name:"d-arrow-right",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.59 30.59 0 0 1 0-42.752L764.736 512 452.864 192a30.59 30.59 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.59 30.59 0 0 1 0-42.752L508.736 512 196.864 192a30.59 30.59 0 0 1 0-42.688"})]))}}),Ta=_V,AV=se({name:"Delete",__name:"delete",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),IV=AV,RV=se({name:"Document",__name:"document",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),LV=RV,PV=se({name:"FullScreen",__name:"full-screen",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),DV=PV,OV=se({name:"Hide",__name:"hide",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4s-12.8-9.6-22.4-9.6-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176S0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4s3.2 16 9.6 22.4 12.8 9.6 22.4 9.6 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4m-646.4 528Q115.2 579.2 76.8 512q43.2-72 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4m140.8-96Q352 555.2 352 512c0-44.8 16-83.2 48-112s67.2-48 112-48c28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6q-43.2 72-153.6 172.8c-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176S1024 528 1024 512s-48.001-73.6-134.401-176"}),J("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112s-67.2 48-112 48"})]))}}),$V=OV,MV=se({name:"InfoFilled",__name:"info-filled",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.99 12.99 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),vd=MV,NV=se({name:"Loading",__name:"loading",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248m452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248M828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0"})]))}}),Ji=NV,FV=se({name:"Minus",__name:"minus",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),BV=FV,VV=se({name:"MoreFilled",__name:"more-filled",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),_x=VV,UV=se({name:"More",__name:"more",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),HV=UV,jV=se({name:"PictureFilled",__name:"picture-filled",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112M256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384"})]))}}),KV=jV,zV=se({name:"Picture",__name:"picture",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M160 160v704h704V160zm-32-64h768a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32"}),J("path",{fill:"currentColor",d:"M384 288q64 0 64 64t-64 64-64-64 64-64M185.408 876.992l-50.816-38.912L350.72 556.032a96 96 0 0 1 134.592-17.856l1.856 1.472 122.88 99.136a32 32 0 0 0 44.992-4.864l216-269.888 49.92 39.936-215.808 269.824-.256.32a96 96 0 0 1-135.04 14.464l-122.88-99.072-.64-.512a32 32 0 0 0-44.8 5.952z"})]))}}),WV=zV,GV=se({name:"Plus",__name:"plus",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),aI=GV,qV=se({name:"QuestionFilled",__name:"question-filled",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592q0-64.416-42.24-101.376c-28.16-25.344-65.472-37.312-111.232-37.312m-12.672 406.208a54.27 54.27 0 0 0-38.72 14.784 49.4 49.4 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.85 54.85 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.97 51.97 0 0 0-15.488-38.016 55.94 55.94 0 0 0-39.424-14.784"})]))}}),YV=qV,XV=se({name:"RefreshLeft",__name:"refresh-left",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),QV=XV,ZV=se({name:"RefreshRight",__name:"refresh-right",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88"})]))}}),JV=ZV,eU=se({name:"ScaleToOriginal",__name:"scale-to-original",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.12 30.12 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.12 30.12 0 0 0-30.118-30.118m-361.412 0a30.12 30.12 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.12 30.12 0 0 0-30.118-30.118M512 361.412a30.12 30.12 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.12 30.12 0 0 0 512 361.412M512 512a30.12 30.12 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.12 30.12 0 0 0 512 512"})]))}}),tU=eU,nU=se({name:"Search",__name:"search",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),rU=nU,sU=se({name:"SortDown",__name:"sort-down",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0"})]))}}),iU=sU,oU=se({name:"SortUp",__name:"sort-up",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248"})]))}}),aU=oU,lU=se({name:"StarFilled",__name:"star-filled",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M313.6 924.48a70.4 70.4 0 0 1-74.152-5.365 70.4 70.4 0 0 1-27.992-68.875l37.888-220.928L88.96 472.96a70.4 70.4 0 0 1 3.788-104.225A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 100.246-28.595 70.4 70.4 0 0 1 25.962 28.595l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),qf=lU,uU=se({name:"Star",__name:"star",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),cU=uU,dU=se({name:"SuccessFilled",__name:"success-filled",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.27 38.27 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),lI=dU,fU=se({name:"View",__name:"view",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288m0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.19 160.19 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),hU=fU,pU=se({name:"WarningFilled",__name:"warning-filled",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.43 58.43 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.43 58.43 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),_m=pU,mU=se({name:"ZoomIn",__name:"zoom-in",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),uI=mU,gU=se({name:"ZoomOut",__name:"zoom-out",setup(t){return(e,n)=>($(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[J("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),vU=gU;const yU={class:"anime-container"},bU={class:"anime-image-placeholder"},SU={class:"image-slot"},wU={class:"anime-info"},EU=["title"],xU={class:"anime-time"},TU={class:"created-at"},CU={class:"updated-at"},kU={class:"site-selection"},_U={class:"play-button"},AU={class:"pagination-container"},IU="https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png",RU={__name:"Anime",setup(t){const e=QN(),n=H([]),r=H(0),s=H(1),i=H(12),o=fn({}),a=h=>{const p=new Date(h);return`${p.getFullYear()}-${String(p.getMonth()+1).padStart(2,"0")}-${String(p.getDate()).padStart(2,"0")}`},u=async()=>{try{const h=await R3({page_num:s.value,page_size:i.value});h.code===0&&(n.value=h.data.rows,r.value=h.data.total,h.data.rows.forEach(p=>{const g=Object.keys(p.vod_play_url);g.length>0&&(o[p.vod_id]=g[0])}))}catch(h){console.error(":",h)}},l=(h,p,g)=>{console.log(` ${h} : ${g}`)},c=h=>{const p=o[h.vod_id],g=h.vod_play_url[p],v=Object.keys(g)[0],y=g[v];e.push({path:"/play",query:{url:y,title:h.vod_name}})},d=h=>{i.value=h,u()},f=h=>{s.value=h,u()};return Ft(()=>{u()}),(h,p)=>{const g=Mt("el-icon"),v=Mt("el-image"),y=Mt("el-option"),w=Mt("el-select"),b=Mt("el-button"),S=Mt("el-card"),E=Mt("el-col"),x=Mt("el-row"),k=Mt("el-pagination");return $(),Y("div",yU,[ie(x,{gutter:20},{default:le(()=>[($(!0),Y(dt,null,Zt(n.value,A=>($(),ye(E,{key:A.vod_id,span:3,class:"anime-card-col"},{default:le(()=>[ie(S,{"body-style":{padding:"10px"},class:"anime-card"},{default:le(()=>[J("div",bU,[ie(v,{src:IU,fit:"cover",class:"anime-image"},{error:le(()=>[J("div",SU,[ie(g,null,{default:le(()=>[ie(m(WV))]),_:1})])]),_:1})]),J("div",wU,[J("div",{class:"anime-title",title:A.vod_name},ze(A.vod_name),9,EU),J("div",xU,[J("div",TU,": "+ze(a(A.created_at)),1),J("div",CU,": "+ze(a(A.updated_at)),1)]),J("div",kU,[ie(w,{modelValue:o[A.vod_id],"onUpdate:modelValue":C=>o[A.vod_id]=C,placeholder:"",size:"small",onChange:C=>l(A.vod_id,A.vod_play_url,C)},{default:le(()=>[($(!0),Y(dt,null,Zt(A.vod_play_url,(C,_)=>($(),ye(y,{key:_,label:_,value:_},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),J("div",_U,[ie(b,{type:"primary",size:"small",onClick:C=>c(A),disabled:!o[A.vod_id]},{default:le(()=>p[2]||(p[2]=[Qt("  ")])),_:2,__:[2]},1032,["onClick","disabled"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),J("div",AU,[ie(k,{"current-page":s.value,"onUpdate:currentPage":p[0]||(p[0]=A=>s.value=A),"page-size":i.value,"onUpdate:pageSize":p[1]||(p[1]=A=>i.value=A),"page-sizes":[12,24,36,48],total:r.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:d,onCurrentChange:f},null,8,["current-page","page-size","total"])])])}}},LU=mm(RU,[["__scopeId","data-v-ce131888"]]),PU=[{path:"/",redirect:"/anime"},{path:"/anime",name:"Anime",component:LU},{path:"/detail",name:"Detail",component:O3},{path:"/play",name:"Play",component:oV}],DU=YN({history:TN(),routes:PU}),OU="2.9.11",Ax=Symbol("INSTALLED_KEY"),cI=Symbol(),jc="el",$U="is-",Ua=(t,e,n,r,s)=>{let i=`${t}-${e}`;return n&&(i+=`-${n}`),r&&(i+=`__${r}`),s&&(i+=`--${s}`),i},dI=Symbol("namespaceContextKey"),Mb=t=>{const e=t||(Kt()?nt(dI,H(jc)):H(jc));return L(()=>m(e)||jc)},Oe=(t,e)=>{const n=Mb(e);return{namespace:n,b:(g="")=>Ua(n.value,t,g,"",""),e:g=>g?Ua(n.value,t,"",g,""):"",m:g=>g?Ua(n.value,t,"","",g):"",be:(g,v)=>g&&v?Ua(n.value,t,g,v,""):"",em:(g,v)=>g&&v?Ua(n.value,t,"",g,v):"",bm:(g,v)=>g&&v?Ua(n.value,t,g,"",v):"",bem:(g,v,y)=>g&&v&&y?Ua(n.value,t,g,v,y):"",is:(g,...v)=>{const y=v.length>=1?v[0]:!0;return g&&y?`${$U}${g}`:""},cssVar:g=>{const v={};for(const y in g)g[y]&&(v[`--${n.value}-${y}`]=g[y]);return v},cssVarName:g=>`--${n.value}-${g}`,cssVarBlock:g=>{const v={};for(const y in g)g[y]&&(v[`--${n.value}-${t}-${y}`]=g[y]);return v},cssVarBlockName:g=>`--${n.value}-${t}-${g}`}};var fI=typeof global=="object"&&global&&global.Object===Object&&global,MU=typeof self=="object"&&self&&self.Object===Object&&self,Ai=fI||MU||Function("return this")(),ii=Ai.Symbol,hI=Object.prototype,NU=hI.hasOwnProperty,FU=hI.toString,vc=ii?ii.toStringTag:void 0;function BU(t){var e=NU.call(t,vc),n=t[vc];try{t[vc]=void 0;var r=!0}catch{}var s=FU.call(t);return r&&(e?t[vc]=n:delete t[vc]),s}var VU=Object.prototype,UU=VU.toString;function HU(t){return UU.call(t)}var jU="[object Null]",KU="[object Undefined]",Ix=ii?ii.toStringTag:void 0;function Sl(t){return t==null?t===void 0?KU:jU:Ix&&Ix in Object(t)?BU(t):HU(t)}function eo(t){return t!=null&&typeof t=="object"}var zU="[object Symbol]";function Am(t){return typeof t=="symbol"||eo(t)&&Sl(t)==zU}function Nb(t,e){for(var n=-1,r=t==null?0:t.length,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}var hs=Array.isArray,Rx=ii?ii.prototype:void 0,Lx=Rx?Rx.toString:void 0;function pI(t){if(typeof t=="string")return t;if(hs(t))return Nb(t,pI)+"";if(Am(t))return Lx?Lx.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var WU=/\s/;function GU(t){for(var e=t.length;e--&&WU.test(t.charAt(e)););return e}var qU=/^\s+/;function YU(t){return t&&t.slice(0,GU(t)+1).replace(qU,"")}function ps(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Px=NaN,XU=/^[-+]0x[0-9a-f]+$/i,QU=/^0b[01]+$/i,ZU=/^0o[0-7]+$/i,JU=parseInt;function Dx(t){if(typeof t=="number")return t;if(Am(t))return Px;if(ps(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ps(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=YU(t);var n=QU.test(t);return n||ZU.test(t)?JU(t.slice(2),n?2:8):XU.test(t)?Px:+t}function Fb(t){return t}var eH="[object AsyncFunction]",tH="[object Function]",nH="[object GeneratorFunction]",rH="[object Proxy]";function Bb(t){if(!ps(t))return!1;var e=Sl(t);return e==tH||e==nH||e==eH||e==rH}var hv=Ai["__core-js_shared__"],Ox=function(){var t=/[^.]+$/.exec(hv&&hv.keys&&hv.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function sH(t){return!!Ox&&Ox in t}var iH=Function.prototype,oH=iH.toString;function wl(t){if(t!=null){try{return oH.call(t)}catch{}try{return t+""}catch{}}return""}var aH=/[\\^$.*+?()[\]{}|]/g,lH=/^\[object .+?Constructor\]$/,uH=Function.prototype,cH=Object.prototype,dH=uH.toString,fH=cH.hasOwnProperty,hH=RegExp("^"+dH.call(fH).replace(aH,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function pH(t){if(!ps(t)||sH(t))return!1;var e=Bb(t)?hH:lH;return e.test(wl(t))}function mH(t,e){return t==null?void 0:t[e]}function El(t,e){var n=mH(t,e);return pH(n)?n:void 0}var R0=El(Ai,"WeakMap"),$x=Object.create,gH=function(){function t(){}return function(e){if(!ps(e))return{};if($x)return $x(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function vH(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function yH(){}function mI(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var bH=800,SH=16,wH=Date.now;function EH(t){var e=0,n=0;return function(){var r=wH(),s=SH-(r-n);if(n=r,s>0){if(++e>=bH)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function xH(t){return function(){return t}}var _p=function(){try{var t=El(Object,"defineProperty");return t({},"",{}),t}catch{}}(),TH=_p?function(t,e){return _p(t,"toString",{configurable:!0,enumerable:!1,value:xH(e),writable:!0})}:Fb,gI=EH(TH);function CH(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function vI(t,e,n,r){for(var s=t.length,i=n+(r?1:-1);r?i--:++i<s;)if(e(t[i],i,t))return i;return-1}function kH(t){return t!==t}function _H(t,e,n){for(var r=n-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}function AH(t,e,n){return e===e?_H(t,e,n):vI(t,kH,n)}function IH(t,e){var n=t==null?0:t.length;return!!n&&AH(t,e,0)>-1}var RH=9007199254740991,LH=/^(?:0|[1-9]\d*)$/;function Im(t,e){var n=typeof t;return e=e??RH,!!e&&(n=="number"||n!="symbol"&&LH.test(t))&&t>-1&&t%1==0&&t<e}function Vb(t,e,n){e=="__proto__"&&_p?_p(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Wd(t,e){return t===e||t!==t&&e!==e}var PH=Object.prototype,DH=PH.hasOwnProperty;function Ub(t,e,n){var r=t[e];(!(DH.call(t,e)&&Wd(r,n))||n===void 0&&!(e in t))&&Vb(t,e,n)}function ju(t,e,n,r){var s=!n;n||(n={});for(var i=-1,o=e.length;++i<o;){var a=e[i],u=void 0;u===void 0&&(u=t[a]),s?Vb(n,a,u):Ub(n,a,u)}return n}var Mx=Math.max;function yI(t,e,n){return e=Mx(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,i=Mx(r.length-e,0),o=Array(i);++s<i;)o[s]=r[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=r[s];return a[e]=n(o),vH(t,this,a)}}function bI(t,e){return gI(yI(t,e,Fb),t+"")}var OH=9007199254740991;function Hb(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=OH}function Ku(t){return t!=null&&Hb(t.length)&&!Bb(t)}function $H(t,e,n){if(!ps(n))return!1;var r=typeof e;return(r=="number"?Ku(n)&&Im(e,n.length):r=="string"&&e in n)?Wd(n[e],t):!1}function MH(t){return bI(function(e,n){var r=-1,s=n.length,i=s>1?n[s-1]:void 0,o=s>2?n[2]:void 0;for(i=t.length>3&&typeof i=="function"?(s--,i):void 0,o&&$H(n[0],n[1],o)&&(i=s<3?void 0:i,s=1),e=Object(e);++r<s;){var a=n[r];a&&t(e,a,r,i)}return e})}var NH=Object.prototype;function jb(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||NH;return t===n}function FH(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var BH="[object Arguments]";function Nx(t){return eo(t)&&Sl(t)==BH}var SI=Object.prototype,VH=SI.hasOwnProperty,UH=SI.propertyIsEnumerable,yd=Nx(function(){return arguments}())?Nx:function(t){return eo(t)&&VH.call(t,"callee")&&!UH.call(t,"callee")};function HH(){return!1}var wI=typeof Vs=="object"&&Vs&&!Vs.nodeType&&Vs,Fx=wI&&typeof Us=="object"&&Us&&!Us.nodeType&&Us,jH=Fx&&Fx.exports===wI,Bx=jH?Ai.Buffer:void 0,KH=Bx?Bx.isBuffer:void 0,bd=KH||HH,zH="[object Arguments]",WH="[object Array]",GH="[object Boolean]",qH="[object Date]",YH="[object Error]",XH="[object Function]",QH="[object Map]",ZH="[object Number]",JH="[object Object]",e7="[object RegExp]",t7="[object Set]",n7="[object String]",r7="[object WeakMap]",s7="[object ArrayBuffer]",i7="[object DataView]",o7="[object Float32Array]",a7="[object Float64Array]",l7="[object Int8Array]",u7="[object Int16Array]",c7="[object Int32Array]",d7="[object Uint8Array]",f7="[object Uint8ClampedArray]",h7="[object Uint16Array]",p7="[object Uint32Array]",tr={};tr[o7]=tr[a7]=tr[l7]=tr[u7]=tr[c7]=tr[d7]=tr[f7]=tr[h7]=tr[p7]=!0;tr[zH]=tr[WH]=tr[s7]=tr[GH]=tr[i7]=tr[qH]=tr[YH]=tr[XH]=tr[QH]=tr[ZH]=tr[JH]=tr[e7]=tr[t7]=tr[n7]=tr[r7]=!1;function m7(t){return eo(t)&&Hb(t.length)&&!!tr[Sl(t)]}function Kb(t){return function(e){return t(e)}}var EI=typeof Vs=="object"&&Vs&&!Vs.nodeType&&Vs,Kc=EI&&typeof Us=="object"&&Us&&!Us.nodeType&&Us,g7=Kc&&Kc.exports===EI,pv=g7&&fI.process,wu=function(){try{var t=Kc&&Kc.require&&Kc.require("util").types;return t||pv&&pv.binding&&pv.binding("util")}catch{}}(),Vx=wu&&wu.isTypedArray,zb=Vx?Kb(Vx):m7,v7=Object.prototype,y7=v7.hasOwnProperty;function xI(t,e){var n=hs(t),r=!n&&yd(t),s=!n&&!r&&bd(t),i=!n&&!r&&!s&&zb(t),o=n||r||s||i,a=o?FH(t.length,String):[],u=a.length;for(var l in t)(e||y7.call(t,l))&&!(o&&(l=="length"||s&&(l=="offset"||l=="parent")||i&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||Im(l,u)))&&a.push(l);return a}function TI(t,e){return function(n){return t(e(n))}}var b7=TI(Object.keys,Object),S7=Object.prototype,w7=S7.hasOwnProperty;function E7(t){if(!jb(t))return b7(t);var e=[];for(var n in Object(t))w7.call(t,n)&&n!="constructor"&&e.push(n);return e}function Gd(t){return Ku(t)?xI(t):E7(t)}function x7(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var T7=Object.prototype,C7=T7.hasOwnProperty;function k7(t){if(!ps(t))return x7(t);var e=jb(t),n=[];for(var r in t)r=="constructor"&&(e||!C7.call(t,r))||n.push(r);return n}function qd(t){return Ku(t)?xI(t,!0):k7(t)}var _7=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A7=/^\w*$/;function Wb(t,e){if(hs(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Am(t)?!0:A7.test(t)||!_7.test(t)||e!=null&&t in Object(e)}var Sd=El(Object,"create");function I7(){this.__data__=Sd?Sd(null):{},this.size=0}function R7(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var L7="__lodash_hash_undefined__",P7=Object.prototype,D7=P7.hasOwnProperty;function O7(t){var e=this.__data__;if(Sd){var n=e[t];return n===L7?void 0:n}return D7.call(e,t)?e[t]:void 0}var $7=Object.prototype,M7=$7.hasOwnProperty;function N7(t){var e=this.__data__;return Sd?e[t]!==void 0:M7.call(e,t)}var F7="__lodash_hash_undefined__";function B7(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Sd&&e===void 0?F7:e,this}function hl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}hl.prototype.clear=I7;hl.prototype.delete=R7;hl.prototype.get=O7;hl.prototype.has=N7;hl.prototype.set=B7;function V7(){this.__data__=[],this.size=0}function Rm(t,e){for(var n=t.length;n--;)if(Wd(t[n][0],e))return n;return-1}var U7=Array.prototype,H7=U7.splice;function j7(t){var e=this.__data__,n=Rm(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():H7.call(e,n,1),--this.size,!0}function K7(t){var e=this.__data__,n=Rm(e,t);return n<0?void 0:e[n][1]}function z7(t){return Rm(this.__data__,t)>-1}function W7(t,e){var n=this.__data__,r=Rm(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Uo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Uo.prototype.clear=V7;Uo.prototype.delete=j7;Uo.prototype.get=K7;Uo.prototype.has=z7;Uo.prototype.set=W7;var wd=El(Ai,"Map");function G7(){this.size=0,this.__data__={hash:new hl,map:new(wd||Uo),string:new hl}}function q7(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Lm(t,e){var n=t.__data__;return q7(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Y7(t){var e=Lm(this,t).delete(t);return this.size-=e?1:0,e}function X7(t){return Lm(this,t).get(t)}function Q7(t){return Lm(this,t).has(t)}function Z7(t,e){var n=Lm(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Ho(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ho.prototype.clear=G7;Ho.prototype.delete=Y7;Ho.prototype.get=X7;Ho.prototype.has=Q7;Ho.prototype.set=Z7;var J7="Expected a function";function Pm(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(J7);var n=function(){var r=arguments,s=e?e.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var o=t.apply(this,r);return n.cache=i.set(s,o)||i,o};return n.cache=new(Pm.Cache||Ho),n}Pm.Cache=Ho;var ej=500;function tj(t){var e=Pm(t,function(r){return n.size===ej&&n.clear(),r}),n=e.cache;return e}var nj=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rj=/\\(\\)?/g,sj=tj(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(nj,function(n,r,s,i){e.push(s?i.replace(rj,"$1"):r||n)}),e});function ij(t){return t==null?"":pI(t)}function zu(t,e){return hs(t)?t:Wb(t,e)?[t]:sj(ij(t))}function Wu(t){if(typeof t=="string"||Am(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Dm(t,e){e=zu(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[Wu(e[n++])];return n&&n==r?t:void 0}function sr(t,e,n){var r=t==null?void 0:Dm(t,e);return r===void 0?n:r}function Gb(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var Ux=ii?ii.isConcatSpreadable:void 0;function oj(t){return hs(t)||yd(t)||!!(Ux&&t&&t[Ux])}function Yd(t,e,n,r,s){var i=-1,o=t.length;for(n||(n=oj),s||(s=[]);++i<o;){var a=t[i];e>0&&n(a)?e>1?Yd(a,e-1,n,r,s):Gb(s,a):r||(s[s.length]=a)}return s}function CI(t){var e=t==null?0:t.length;return e?Yd(t,1):[]}function kI(t){return gI(yI(t,void 0,CI),t+"")}var qb=TI(Object.getPrototypeOf,Object),aj="[object Object]",lj=Function.prototype,uj=Object.prototype,_I=lj.toString,cj=uj.hasOwnProperty,dj=_I.call(Object);function AI(t){if(!eo(t)||Sl(t)!=aj)return!1;var e=qb(t);if(e===null)return!0;var n=cj.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&_I.call(n)==dj}function fj(t,e,n){var r=-1,s=t.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(s);++r<s;)i[r]=t[r+e];return i}function Zr(){if(!arguments.length)return[];var t=arguments[0];return hs(t)?t:[t]}function hj(){this.__data__=new Uo,this.size=0}function pj(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function mj(t){return this.__data__.get(t)}function gj(t){return this.__data__.has(t)}var vj=200;function yj(t,e){var n=this.__data__;if(n instanceof Uo){var r=n.__data__;if(!wd||r.length<vj-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ho(r)}return n.set(t,e),this.size=n.size,this}function Si(t){var e=this.__data__=new Uo(t);this.size=e.size}Si.prototype.clear=hj;Si.prototype.delete=pj;Si.prototype.get=mj;Si.prototype.has=gj;Si.prototype.set=yj;function bj(t,e){return t&&ju(e,Gd(e),t)}function Sj(t,e){return t&&ju(e,qd(e),t)}var II=typeof Vs=="object"&&Vs&&!Vs.nodeType&&Vs,Hx=II&&typeof Us=="object"&&Us&&!Us.nodeType&&Us,wj=Hx&&Hx.exports===II,jx=wj?Ai.Buffer:void 0,Kx=jx?jx.allocUnsafe:void 0;function RI(t,e){if(e)return t.slice();var n=t.length,r=Kx?Kx(n):new t.constructor(n);return t.copy(r),r}function Ej(t,e){for(var n=-1,r=t==null?0:t.length,s=0,i=[];++n<r;){var o=t[n];e(o,n,t)&&(i[s++]=o)}return i}function LI(){return[]}var xj=Object.prototype,Tj=xj.propertyIsEnumerable,zx=Object.getOwnPropertySymbols,Yb=zx?function(t){return t==null?[]:(t=Object(t),Ej(zx(t),function(e){return Tj.call(t,e)}))}:LI;function Cj(t,e){return ju(t,Yb(t),e)}var kj=Object.getOwnPropertySymbols,PI=kj?function(t){for(var e=[];t;)Gb(e,Yb(t)),t=qb(t);return e}:LI;function _j(t,e){return ju(t,PI(t),e)}function DI(t,e,n){var r=e(t);return hs(t)?r:Gb(r,n(t))}function L0(t){return DI(t,Gd,Yb)}function OI(t){return DI(t,qd,PI)}var P0=El(Ai,"DataView"),D0=El(Ai,"Promise"),su=El(Ai,"Set"),Wx="[object Map]",Aj="[object Object]",Gx="[object Promise]",qx="[object Set]",Yx="[object WeakMap]",Xx="[object DataView]",Ij=wl(P0),Rj=wl(wd),Lj=wl(D0),Pj=wl(su),Dj=wl(R0),gi=Sl;(P0&&gi(new P0(new ArrayBuffer(1)))!=Xx||wd&&gi(new wd)!=Wx||D0&&gi(D0.resolve())!=Gx||su&&gi(new su)!=qx||R0&&gi(new R0)!=Yx)&&(gi=function(t){var e=Sl(t),n=e==Aj?t.constructor:void 0,r=n?wl(n):"";if(r)switch(r){case Ij:return Xx;case Rj:return Wx;case Lj:return Gx;case Pj:return qx;case Dj:return Yx}return e});var Oj=Object.prototype,$j=Oj.hasOwnProperty;function Mj(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&$j.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Ap=Ai.Uint8Array;function Xb(t){var e=new t.constructor(t.byteLength);return new Ap(e).set(new Ap(t)),e}function Nj(t,e){var n=e?Xb(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var Fj=/\w*$/;function Bj(t){var e=new t.constructor(t.source,Fj.exec(t));return e.lastIndex=t.lastIndex,e}var Qx=ii?ii.prototype:void 0,Zx=Qx?Qx.valueOf:void 0;function Vj(t){return Zx?Object(Zx.call(t)):{}}function $I(t,e){var n=e?Xb(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Uj="[object Boolean]",Hj="[object Date]",jj="[object Map]",Kj="[object Number]",zj="[object RegExp]",Wj="[object Set]",Gj="[object String]",qj="[object Symbol]",Yj="[object ArrayBuffer]",Xj="[object DataView]",Qj="[object Float32Array]",Zj="[object Float64Array]",Jj="[object Int8Array]",e9="[object Int16Array]",t9="[object Int32Array]",n9="[object Uint8Array]",r9="[object Uint8ClampedArray]",s9="[object Uint16Array]",i9="[object Uint32Array]";function o9(t,e,n){var r=t.constructor;switch(e){case Yj:return Xb(t);case Uj:case Hj:return new r(+t);case Xj:return Nj(t,n);case Qj:case Zj:case Jj:case e9:case t9:case n9:case r9:case s9:case i9:return $I(t,n);case jj:return new r;case Kj:case Gj:return new r(t);case zj:return Bj(t);case Wj:return new r;case qj:return Vj(t)}}function MI(t){return typeof t.constructor=="function"&&!jb(t)?gH(qb(t)):{}}var a9="[object Map]";function l9(t){return eo(t)&&gi(t)==a9}var Jx=wu&&wu.isMap,u9=Jx?Kb(Jx):l9,c9="[object Set]";function d9(t){return eo(t)&&gi(t)==c9}var eT=wu&&wu.isSet,f9=eT?Kb(eT):d9,h9=1,p9=2,m9=4,NI="[object Arguments]",g9="[object Array]",v9="[object Boolean]",y9="[object Date]",b9="[object Error]",FI="[object Function]",S9="[object GeneratorFunction]",w9="[object Map]",E9="[object Number]",BI="[object Object]",x9="[object RegExp]",T9="[object Set]",C9="[object String]",k9="[object Symbol]",_9="[object WeakMap]",A9="[object ArrayBuffer]",I9="[object DataView]",R9="[object Float32Array]",L9="[object Float64Array]",P9="[object Int8Array]",D9="[object Int16Array]",O9="[object Int32Array]",$9="[object Uint8Array]",M9="[object Uint8ClampedArray]",N9="[object Uint16Array]",F9="[object Uint32Array]",Qn={};Qn[NI]=Qn[g9]=Qn[A9]=Qn[I9]=Qn[v9]=Qn[y9]=Qn[R9]=Qn[L9]=Qn[P9]=Qn[D9]=Qn[O9]=Qn[w9]=Qn[E9]=Qn[BI]=Qn[x9]=Qn[T9]=Qn[C9]=Qn[k9]=Qn[$9]=Qn[M9]=Qn[N9]=Qn[F9]=!0;Qn[b9]=Qn[FI]=Qn[_9]=!1;function iu(t,e,n,r,s,i){var o,a=e&h9,u=e&p9,l=e&m9;if(n&&(o=s?n(t,r,s,i):n(t)),o!==void 0)return o;if(!ps(t))return t;var c=hs(t);if(c){if(o=Mj(t),!a)return mI(t,o)}else{var d=gi(t),f=d==FI||d==S9;if(bd(t))return RI(t,a);if(d==BI||d==NI||f&&!s){if(o=u||f?{}:MI(t),!a)return u?_j(t,Sj(o,t)):Cj(t,bj(o,t))}else{if(!Qn[d])return s?t:{};o=o9(t,d,a)}}i||(i=new Si);var h=i.get(t);if(h)return h;i.set(t,o),f9(t)?t.forEach(function(v){o.add(iu(v,e,n,v,t,i))}):u9(t)&&t.forEach(function(v,y){o.set(y,iu(v,e,n,y,t,i))});var p=l?u?OI:L0:u?qd:Gd,g=c?void 0:p(t);return CH(g||t,function(v,y){g&&(y=v,v=t[y]),Ub(o,y,iu(v,e,n,y,t,i))}),o}var B9=4;function tT(t){return iu(t,B9)}var V9=1,U9=4;function Ip(t){return iu(t,V9|U9)}var H9="__lodash_hash_undefined__";function j9(t){return this.__data__.set(t,H9),this}function K9(t){return this.__data__.has(t)}function Ed(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Ho;++e<n;)this.add(t[e])}Ed.prototype.add=Ed.prototype.push=j9;Ed.prototype.has=K9;function z9(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function VI(t,e){return t.has(e)}var W9=1,G9=2;function UI(t,e,n,r,s,i){var o=n&W9,a=t.length,u=e.length;if(a!=u&&!(o&&u>a))return!1;var l=i.get(t),c=i.get(e);if(l&&c)return l==e&&c==t;var d=-1,f=!0,h=n&G9?new Ed:void 0;for(i.set(t,e),i.set(e,t);++d<a;){var p=t[d],g=e[d];if(r)var v=o?r(g,p,d,e,t,i):r(p,g,d,t,e,i);if(v!==void 0){if(v)continue;f=!1;break}if(h){if(!z9(e,function(y,w){if(!VI(h,w)&&(p===y||s(p,y,n,r,i)))return h.push(w)})){f=!1;break}}else if(!(p===g||s(p,g,n,r,i))){f=!1;break}}return i.delete(t),i.delete(e),f}function q9(t){var e=-1,n=Array(t.size);return t.forEach(function(r,s){n[++e]=[s,r]}),n}function Qb(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var Y9=1,X9=2,Q9="[object Boolean]",Z9="[object Date]",J9="[object Error]",eK="[object Map]",tK="[object Number]",nK="[object RegExp]",rK="[object Set]",sK="[object String]",iK="[object Symbol]",oK="[object ArrayBuffer]",aK="[object DataView]",nT=ii?ii.prototype:void 0,mv=nT?nT.valueOf:void 0;function lK(t,e,n,r,s,i,o){switch(n){case aK:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case oK:return!(t.byteLength!=e.byteLength||!i(new Ap(t),new Ap(e)));case Q9:case Z9:case tK:return Wd(+t,+e);case J9:return t.name==e.name&&t.message==e.message;case nK:case sK:return t==e+"";case eK:var a=q9;case rK:var u=r&Y9;if(a||(a=Qb),t.size!=e.size&&!u)return!1;var l=o.get(t);if(l)return l==e;r|=X9,o.set(t,e);var c=UI(a(t),a(e),r,s,i,o);return o.delete(t),c;case iK:if(mv)return mv.call(t)==mv.call(e)}return!1}var uK=1,cK=Object.prototype,dK=cK.hasOwnProperty;function fK(t,e,n,r,s,i){var o=n&uK,a=L0(t),u=a.length,l=L0(e),c=l.length;if(u!=c&&!o)return!1;for(var d=u;d--;){var f=a[d];if(!(o?f in e:dK.call(e,f)))return!1}var h=i.get(t),p=i.get(e);if(h&&p)return h==e&&p==t;var g=!0;i.set(t,e),i.set(e,t);for(var v=o;++d<u;){f=a[d];var y=t[f],w=e[f];if(r)var b=o?r(w,y,f,e,t,i):r(y,w,f,t,e,i);if(!(b===void 0?y===w||s(y,w,n,r,i):b)){g=!1;break}v||(v=f=="constructor")}if(g&&!v){var S=t.constructor,E=e.constructor;S!=E&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof E=="function"&&E instanceof E)&&(g=!1)}return i.delete(t),i.delete(e),g}var hK=1,rT="[object Arguments]",sT="[object Array]",Yf="[object Object]",pK=Object.prototype,iT=pK.hasOwnProperty;function mK(t,e,n,r,s,i){var o=hs(t),a=hs(e),u=o?sT:gi(t),l=a?sT:gi(e);u=u==rT?Yf:u,l=l==rT?Yf:l;var c=u==Yf,d=l==Yf,f=u==l;if(f&&bd(t)){if(!bd(e))return!1;o=!0,c=!1}if(f&&!c)return i||(i=new Si),o||zb(t)?UI(t,e,n,r,s,i):lK(t,e,u,n,r,s,i);if(!(n&hK)){var h=c&&iT.call(t,"__wrapped__"),p=d&&iT.call(e,"__wrapped__");if(h||p){var g=h?t.value():t,v=p?e.value():e;return i||(i=new Si),s(g,v,n,r,i)}}return f?(i||(i=new Si),fK(t,e,n,r,s,i)):!1}function Om(t,e,n,r,s){return t===e?!0:t==null||e==null||!eo(t)&&!eo(e)?t!==t&&e!==e:mK(t,e,n,r,Om,s)}var gK=1,vK=2;function yK(t,e,n,r){var s=n.length,i=s;if(t==null)return!i;for(t=Object(t);s--;){var o=n[s];if(o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++s<i;){o=n[s];var a=o[0],u=t[a],l=o[1];if(o[2]){if(u===void 0&&!(a in t))return!1}else{var c=new Si,d;if(!(d===void 0?Om(l,u,gK|vK,r,c):d))return!1}}return!0}function HI(t){return t===t&&!ps(t)}function bK(t){for(var e=Gd(t),n=e.length;n--;){var r=e[n],s=t[r];e[n]=[r,s,HI(s)]}return e}function jI(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function SK(t){var e=bK(t);return e.length==1&&e[0][2]?jI(e[0][0],e[0][1]):function(n){return n===t||yK(n,t,e)}}function wK(t,e){return t!=null&&e in Object(t)}function EK(t,e,n){e=zu(e,t);for(var r=-1,s=e.length,i=!1;++r<s;){var o=Wu(e[r]);if(!(i=t!=null&&n(t,o)))break;t=t[o]}return i||++r!=s?i:(s=t==null?0:t.length,!!s&&Hb(s)&&Im(o,s)&&(hs(t)||yd(t)))}function KI(t,e){return t!=null&&EK(t,e,wK)}var xK=1,TK=2;function CK(t,e){return Wb(t)&&HI(e)?jI(Wu(t),e):function(n){var r=sr(n,t);return r===void 0&&r===e?KI(n,t):Om(e,r,xK|TK)}}function kK(t){return function(e){return e==null?void 0:e[t]}}function _K(t){return function(e){return Dm(e,t)}}function AK(t){return Wb(t)?kK(Wu(t)):_K(t)}function zI(t){return typeof t=="function"?t:t==null?Fb:typeof t=="object"?hs(t)?CK(t[0],t[1]):SK(t):AK(t)}function IK(t){return function(e,n,r){for(var s=-1,i=Object(e),o=r(e),a=o.length;a--;){var u=o[++s];if(n(i[u],u,i)===!1)break}return e}}var WI=IK();function RK(t,e){return t&&WI(t,e,Gd)}function LK(t,e){return function(n,r){if(n==null)return n;if(!Ku(n))return t(n,r);for(var s=n.length,i=-1,o=Object(n);++i<s&&r(o[i],i,o)!==!1;);return n}}var PK=LK(RK),gv=function(){return Ai.Date.now()},DK="Expected a function",OK=Math.max,$K=Math.min;function _s(t,e,n){var r,s,i,o,a,u,l=0,c=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(DK);e=Dx(e)||0,ps(n)&&(c=!!n.leading,d="maxWait"in n,i=d?OK(Dx(n.maxWait)||0,e):i,f="trailing"in n?!!n.trailing:f);function h(x){var k=r,A=s;return r=s=void 0,l=x,o=t.apply(A,k),o}function p(x){return l=x,a=setTimeout(y,e),c?h(x):o}function g(x){var k=x-u,A=x-l,C=e-k;return d?$K(C,i-A):C}function v(x){var k=x-u,A=x-l;return u===void 0||k>=e||k<0||d&&A>=i}function y(){var x=gv();if(v(x))return w(x);a=setTimeout(y,g(x))}function w(x){return a=void 0,f&&r?h(x):(r=s=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=s=a=void 0}function S(){return a===void 0?o:w(gv())}function E(){var x=gv(),k=v(x);if(r=arguments,s=this,u=x,k){if(a===void 0)return p(u);if(d)return clearTimeout(a),a=setTimeout(y,e),h(u)}return a===void 0&&(a=setTimeout(y,e)),o}return E.cancel=b,E.flush=S,E}function O0(t,e,n){(n!==void 0&&!Wd(t[e],n)||n===void 0&&!(e in t))&&Vb(t,e,n)}function GI(t){return eo(t)&&Ku(t)}function $0(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function MK(t){return ju(t,qd(t))}function NK(t,e,n,r,s,i,o){var a=$0(t,n),u=$0(e,n),l=o.get(u);if(l){O0(t,n,l);return}var c=i?i(a,u,n+"",t,e,o):void 0,d=c===void 0;if(d){var f=hs(u),h=!f&&bd(u),p=!f&&!h&&zb(u);c=u,f||h||p?hs(a)?c=a:GI(a)?c=mI(a):h?(d=!1,c=RI(u,!0)):p?(d=!1,c=$I(u,!0)):c=[]:AI(u)||yd(u)?(c=a,yd(a)?c=MK(a):(!ps(a)||Bb(a))&&(c=MI(u))):d=!1}d&&(o.set(u,c),s(c,u,r,i,o),o.delete(u)),O0(t,n,c)}function qI(t,e,n,r,s){t!==e&&WI(e,function(i,o){if(s||(s=new Si),ps(i))NK(t,e,o,n,qI,r,s);else{var a=r?r($0(t,o),i,o+"",t,e,s):void 0;a===void 0&&(a=i),O0(t,o,a)}},qd)}function FK(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function YI(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var s=r-1;return vI(t,zI(e),s,!0)}function BK(t,e){var n=-1,r=Ku(t)?Array(t.length):[];return PK(t,function(s,i,o){r[++n]=e(s,i,o)}),r}function VK(t,e){var n=hs(t)?Nb:BK;return n(t,zI(e))}function UK(t,e){return Yd(VK(t,e),1)}var HK=1/0;function jK(t){var e=t==null?0:t.length;return e?Yd(t,HK):[]}function xd(t){for(var e=-1,n=t==null?0:t.length,r={};++e<n;){var s=t[e];r[s[0]]=s[1]}return r}function KK(t,e){return e.length<2?t:Dm(t,fj(e,0,-1))}function Tr(t,e){return Om(t,e)}function Sr(t){return t==null}function Xd(t){return t===null}function XI(t){return t===void 0}var QI=MH(function(t,e,n){qI(t,e,n)});function zK(t,e){return e=zu(e,t),t=KK(t,e),t==null||delete t[Wu(FK(e))]}function WK(t){return AI(t)?void 0:t}var GK=1,qK=2,YK=4,XK=kI(function(t,e){var n={};if(t==null)return n;var r=!1;e=Nb(e,function(i){return i=zu(i,t),r||(r=i.length>1),i}),ju(t,OI(t),n),r&&(n=iu(n,GK|qK|YK,WK));for(var s=e.length;s--;)zK(n,e[s]);return n});function ZI(t,e,n,r){if(!ps(t))return t;e=zu(e,t);for(var s=-1,i=e.length,o=i-1,a=t;a!=null&&++s<i;){var u=Wu(e[s]),l=n;if(u==="__proto__"||u==="constructor"||u==="prototype")return t;if(s!=o){var c=a[u];l=void 0,l===void 0&&(l=ps(c)?c:Im(e[s+1])?[]:{})}Ub(a,u,l),a=a[u]}return t}function QK(t,e,n){for(var r=-1,s=e.length,i={};++r<s;){var o=e[r],a=Dm(t,o);n(a,o)&&ZI(i,zu(o,t),a)}return i}function ZK(t,e){return QK(t,e,function(n,r){return KI(t,r)})}var vi=kI(function(t,e){return t==null?{}:ZK(t,e)});function JK(t,e,n){return t==null?t:ZI(t,e,n)}var ez="Expected a function";function sl(t,e,n){var r=!0,s=!0;if(typeof t!="function")throw new TypeError(ez);return ps(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),_s(t,e,{leading:r,maxWait:e,trailing:s})}var tz=1/0,nz=su&&1/Qb(new su([,-0]))[1]==tz?function(t){return new su(t)}:yH,rz=200;function sz(t,e,n){var r=-1,s=IH,i=t.length,o=!0,a=[],u=a;if(i>=rz){var l=nz(t);if(l)return Qb(l);o=!1,s=VI,u=new Ed}else u=a;e:for(;++r<i;){var c=t[r],d=c;if(c=c!==0?c:0,o&&d===d){for(var f=u.length;f--;)if(u[f]===d)continue e;a.push(c)}else s(u,d,n)||(u!==a&&u.push(d),a.push(c))}return a}var vv=bI(function(t){return sz(Yd(t,1,GI,!0))});const an=t=>t===void 0,wn=t=>typeof t=="boolean",vt=t=>typeof t=="number",$s=t=>!t&&t!==0||Ve(t)&&t.length===0||Bt(t)&&!Object.keys(t).length,ds=t=>typeof Element>"u"?!1:t instanceof Element,js=t=>Sr(t),iz=t=>ut(t)?!Number.isNaN(Number(t)):!1,$m=t=>t===window;var oz=Object.defineProperty,az=Object.defineProperties,lz=Object.getOwnPropertyDescriptors,oT=Object.getOwnPropertySymbols,uz=Object.prototype.hasOwnProperty,cz=Object.prototype.propertyIsEnumerable,aT=(t,e,n)=>e in t?oz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dz=(t,e)=>{for(var n in e||(e={}))uz.call(e,n)&&aT(t,n,e[n]);if(oT)for(var n of oT(e))cz.call(e,n)&&aT(t,n,e[n]);return t},fz=(t,e)=>az(t,lz(e));function Rp(t,e){var n;const r=On();return Fr(()=>{r.value=t()},fz(dz({},e),{flush:(n=void 0)!=null?n:"sync"})),Bu(r)}var lT;const on=typeof window<"u",hz=t=>typeof t<"u",M0=t=>typeof t=="function",pz=t=>typeof t=="string",Eu=()=>{},Lp=on&&((lT=window==null?void 0:window.navigator)==null?void 0:lT.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Ca(t){return typeof t=="function"?t():m(t)}function JI(t,e){function n(...r){return new Promise((s,i)=>{Promise.resolve(t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(s).catch(i)})}return n}function mz(t,e={}){let n,r,s=Eu;const i=a=>{clearTimeout(a),s(),s=Eu};return a=>{const u=Ca(t),l=Ca(e.maxWait);return n&&i(n),u<=0||l!==void 0&&l<=0?(r&&(i(r),r=null),Promise.resolve(a())):new Promise((c,d)=>{s=e.rejectOnCancel?d:c,l&&!r&&(r=setTimeout(()=>{n&&i(n),r=null,c(a())},l)),n=setTimeout(()=>{r&&i(r),r=null,c(a())},u)})}}function gz(t,e=!0,n=!0,r=!1){let s=0,i,o=!0,a=Eu,u;const l=()=>{i&&(clearTimeout(i),i=void 0,a(),a=Eu)};return d=>{const f=Ca(t),h=Date.now()-s,p=()=>u=d();return l(),f<=0?(s=Date.now(),p()):(h>f&&(n||!o)?(s=Date.now(),p()):e&&(u=new Promise((g,v)=>{a=r?v:g,i=setTimeout(()=>{s=Date.now(),o=!0,g(p()),l()},Math.max(0,f-h))})),!n&&!i&&(i=setTimeout(()=>o=!0,f)),o=!1,u)}}function vz(t){return t}function yz(t,e){let n,r,s;const i=H(!0),o=()=>{i.value=!0,s()};Ie(t,o,{flush:"sync"});const a=M0(e)?e:e.get,u=M0(e)?void 0:e.set,l=i$((c,d)=>(r=c,s=d,{get(){return i.value&&(n=a(),i.value=!1),r(),n},set(f){u==null||u(f)}}));return Object.isExtensible(l)&&(l.trigger=o),l}function Qd(t){return Rk()?(Lk(t),!0):!1}function bz(t,e=200,n={}){return JI(mz(e,n),t)}function Sz(t,e=200,n={}){const r=H(t.value),s=bz(()=>{r.value=t.value},e,n);return Ie(t,()=>s()),r}function eR(t,e=200,n=!1,r=!0,s=!1){return JI(gz(e,n,r,s),t)}function Zb(t,e=!0){Kt()?Ft(t):e?t():ft(t)}function pl(t,e,n={}){const{immediate:r=!0}=n,s=H(!1);let i=null;function o(){i&&(clearTimeout(i),i=null)}function a(){s.value=!1,o()}function u(...l){o(),s.value=!0,i=setTimeout(()=>{s.value=!1,i=null,t(...l)},Ca(e))}return r&&(s.value=!0,on&&u()),Qd(a),{isPending:Bu(s),start:u,stop:a}}function us(t){var e;const n=Ca(t);return(e=n==null?void 0:n.$el)!=null?e:n}const La=on?window:void 0,wz=on?window.document:void 0;function Cn(...t){let e,n,r,s;if(pz(t[0])||Array.isArray(t[0])?([n,r,s]=t,e=La):[e,n,r,s]=t,!e)return Eu;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const i=[],o=()=>{i.forEach(c=>c()),i.length=0},a=(c,d,f,h)=>(c.addEventListener(d,f,h),()=>c.removeEventListener(d,f,h)),u=Ie(()=>[us(e),Ca(s)],([c,d])=>{o(),c&&i.push(...n.flatMap(f=>r.map(h=>a(c,f,h,d))))},{immediate:!0,flush:"post"}),l=()=>{u(),o()};return Qd(l),l}let uT=!1;function Jb(t,e,n={}){const{window:r=La,ignore:s=[],capture:i=!0,detectIframe:o=!1}=n;if(!r)return;Lp&&!uT&&(uT=!0,Array.from(r.document.body.children).forEach(f=>f.addEventListener("click",Eu)));let a=!0;const u=f=>s.some(h=>{if(typeof h=="string")return Array.from(r.document.querySelectorAll(h)).some(p=>p===f.target||f.composedPath().includes(p));{const p=us(h);return p&&(f.target===p||f.composedPath().includes(p))}}),c=[Cn(r,"click",f=>{const h=us(t);if(!(!h||h===f.target||f.composedPath().includes(h))){if(f.detail===0&&(a=!u(f)),!a){a=!0;return}e(f)}},{passive:!0,capture:i}),Cn(r,"pointerdown",f=>{const h=us(t);h&&(a=!f.composedPath().includes(h)&&!u(f))},{passive:!0}),o&&Cn(r,"blur",f=>{var h;const p=us(t);((h=r.document.activeElement)==null?void 0:h.tagName)==="IFRAME"&&!(p!=null&&p.contains(r.document.activeElement))&&e(f)})].filter(Boolean);return()=>c.forEach(f=>f())}function Ez(t={}){var e;const{window:n=La}=t,r=(e=t.document)!=null?e:n==null?void 0:n.document,s=yz(()=>null,()=>r==null?void 0:r.activeElement);return n&&(Cn(n,"blur",i=>{i.relatedTarget===null&&s.trigger()},!0),Cn(n,"focus",s.trigger,!0)),s}function tR(t,e=!1){const n=H(),r=()=>n.value=!!t();return r(),Zb(r,e),n}function xz(t){return JSON.parse(JSON.stringify(t))}const cT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dT="__vueuse_ssr_handlers__";cT[dT]=cT[dT]||{};function Tz(t,e,{window:n=La,initialValue:r=""}={}){const s=H(r),i=L(()=>{var o;return us(e)||((o=n==null?void 0:n.document)==null?void 0:o.documentElement)});return Ie([i,()=>Ca(t)],([o,a])=>{var u;if(o&&n){const l=(u=n.getComputedStyle(o).getPropertyValue(a))==null?void 0:u.trim();s.value=l||r}},{immediate:!0}),Ie(s,o=>{var a;(a=i.value)!=null&&a.style&&i.value.style.setProperty(Ca(t),o)}),s}function Cz({document:t=wz}={}){if(!t)return H("visible");const e=H(t.visibilityState);return Cn(t,"visibilitychange",()=>{e.value=t.visibilityState}),e}var fT=Object.getOwnPropertySymbols,kz=Object.prototype.hasOwnProperty,_z=Object.prototype.propertyIsEnumerable,Az=(t,e)=>{var n={};for(var r in t)kz.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&fT)for(var r of fT(t))e.indexOf(r)<0&&_z.call(t,r)&&(n[r]=t[r]);return n};function zn(t,e,n={}){const r=n,{window:s=La}=r,i=Az(r,["window"]);let o;const a=tR(()=>s&&"ResizeObserver"in s),u=()=>{o&&(o.disconnect(),o=void 0)},l=Ie(()=>us(t),d=>{u(),a.value&&s&&d&&(o=new ResizeObserver(e),o.observe(d,i))},{immediate:!0,flush:"post"}),c=()=>{u(),l()};return Qd(c),{isSupported:a,stop:c}}function hT(t,e={}){const{reset:n=!0,windowResize:r=!0,windowScroll:s=!0,immediate:i=!0}=e,o=H(0),a=H(0),u=H(0),l=H(0),c=H(0),d=H(0),f=H(0),h=H(0);function p(){const g=us(t);if(!g){n&&(o.value=0,a.value=0,u.value=0,l.value=0,c.value=0,d.value=0,f.value=0,h.value=0);return}const v=g.getBoundingClientRect();o.value=v.height,a.value=v.bottom,u.value=v.left,l.value=v.right,c.value=v.top,d.value=v.width,f.value=v.x,h.value=v.y}return zn(t,p),Ie(()=>us(t),g=>!g&&p()),s&&Cn("scroll",p,{capture:!0,passive:!0}),r&&Cn("resize",p,{passive:!0}),Zb(()=>{i&&p()}),{height:o,bottom:a,left:u,right:l,top:c,width:d,x:f,y:h,update:p}}var pT=Object.getOwnPropertySymbols,Iz=Object.prototype.hasOwnProperty,Rz=Object.prototype.propertyIsEnumerable,Lz=(t,e)=>{var n={};for(var r in t)Iz.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&pT)for(var r of pT(t))e.indexOf(r)<0&&Rz.call(t,r)&&(n[r]=t[r]);return n};function nR(t,e,n={}){const r=n,{window:s=La}=r,i=Lz(r,["window"]);let o;const a=tR(()=>s&&"MutationObserver"in s),u=()=>{o&&(o.disconnect(),o=void 0)},l=Ie(()=>us(t),d=>{u(),a.value&&s&&d&&(o=new MutationObserver(e),o.observe(d,i))},{immediate:!0}),c=()=>{u(),l()};return Qd(c),{isSupported:a,stop:c}}var mT;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(mT||(mT={}));var Pz=Object.defineProperty,gT=Object.getOwnPropertySymbols,Dz=Object.prototype.hasOwnProperty,Oz=Object.prototype.propertyIsEnumerable,vT=(t,e,n)=>e in t?Pz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$z=(t,e)=>{for(var n in e||(e={}))Dz.call(e,n)&&vT(t,n,e[n]);if(gT)for(var n of gT(e))Oz.call(e,n)&&vT(t,n,e[n]);return t};const Mz={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};$z({linear:vz},Mz);function rR(t,e,n,r={}){var s,i,o;const{clone:a=!1,passive:u=!1,eventName:l,deep:c=!1,defaultValue:d}=r,f=Kt(),h=n||(f==null?void 0:f.emit)||((s=f==null?void 0:f.$emit)==null?void 0:s.bind(f))||((o=(i=f==null?void 0:f.proxy)==null?void 0:i.$emit)==null?void 0:o.bind(f==null?void 0:f.proxy));let p=l;e||(e="modelValue"),p=l||p||`update:${e.toString()}`;const g=y=>a?M0(a)?a(y):xz(y):y,v=()=>hz(t[e])?g(t[e]):d;if(u){const y=v(),w=H(y);return Ie(()=>t[e],b=>w.value=g(b)),Ie(w,b=>{(b!==t[e]||c)&&h(p,b)},{deep:c}),w}else return L({get(){return v()},set(y){h(p,y)}})}function Nz({window:t=La}={}){if(!t)return H(!1);const e=H(t.document.hasFocus());return Cn(t,"blur",()=>{e.value=!1}),Cn(t,"focus",()=>{e.value=!0}),e}function Fz(t={}){const{window:e=La,initialWidth:n=1/0,initialHeight:r=1/0,listenOrientation:s=!0,includeScrollbar:i=!0}=t,o=H(n),a=H(r),u=()=>{e&&(i?(o.value=e.innerWidth,a.value=e.innerHeight):(o.value=e.document.documentElement.clientWidth,a.value=e.document.documentElement.clientHeight))};return u(),Zb(u),Cn("resize",u,{passive:!0}),s&&Cn("orientationchange",u,{passive:!0}),{width:o,height:a}}class Bz extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function lr(t,e){throw new Bz(`[${t}] ${e}`)}const yT={current:0},bT=H(0),sR=2e3,ST=Symbol("elZIndexContextKey"),iR=Symbol("zIndexContextKey"),Gu=t=>{const e=Kt()?nt(ST,yT):yT,n=t||(Kt()?nt(iR,void 0):void 0),r=L(()=>{const o=m(n);return vt(o)?o:sR}),s=L(()=>r.value+bT.value),i=()=>(e.current++,bT.value=e.current,s.value);return!on&&nt(ST),{initialZIndex:r,currentZIndex:s,nextZIndex:i}};var Vz={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const Uz=t=>(e,n)=>Hz(e,n,m(t)),Hz=(t,e,n)=>sr(n,t,t).replace(/\{(\w+)\}/g,(r,s)=>{var i;return`${(i=e==null?void 0:e[s])!=null?i:`{${s}}`}`}),jz=t=>{const e=L(()=>m(t).name),n=Dn(t)?t:H(t);return{lang:e,locale:n,t:Uz(t)}},oR=Symbol("localeContextKey"),sn=t=>{const e=t||nt(oR,H());return jz(L(()=>e.value||Vz))},aR="__epPropKey",de=t=>t,Kz=t=>Bt(t)&&!!t[aR],Ii=(t,e)=>{if(!Bt(t)||Kz(t))return t;const{values:n,required:r,default:s,type:i,validator:o}=t,u={type:i,required:!!r,validator:n||o?l=>{let c=!1,d=[];if(n&&(d=Array.from(n),hn(t,"default")&&d.push(s),c||(c=d.includes(l))),o&&(c||(c=o(l))),!c&&d.length>0){const f=[...new Set(d)].map(h=>JSON.stringify(h)).join(", ");dM(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${f}], got value ${JSON.stringify(l)}.`)}return c}:void 0,[aR]:!0};return hn(t,"default")&&(u.default=s),u},Ke=t=>xd(Object.entries(t).map(([e,n])=>[e,Ii(n,e)])),so=["","default","small","large"],fr=Ii({type:String,values:so,required:!1}),lR=Symbol("size"),uR=()=>{const t=nt(lR,{});return L(()=>m(t.size)||"")},cR=Symbol("emptyValuesContextKey"),zz=["",void 0,null],Wz=void 0,qu=Ke({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:t=>pt(t)?!t():!t}}),Mm=(t,e)=>{const n=Kt()?nt(cR,H({})):H({}),r=L(()=>t.emptyValues||n.value.emptyValues||zz),s=L(()=>pt(t.valueOnClear)?t.valueOnClear():t.valueOnClear!==void 0?t.valueOnClear:pt(n.value.valueOnClear)?n.value.valueOnClear():n.value.valueOnClear!==void 0?n.value.valueOnClear:e!==void 0?e:Wz),i=o=>r.value.includes(o);return r.value.includes(s.value),{emptyValues:r,valueOnClear:s,isEmptyValue:i}},xu=t=>Object.keys(t),dR=t=>Object.entries(t),zc=(t,e,n)=>({get value(){return sr(t,e,n)},set value(r){JK(t,e,r)}}),Pp=H();function Zd(t,e=void 0){const n=Kt()?nt(cI,Pp):Pp;return t?L(()=>{var r,s;return(s=(r=n.value)==null?void 0:r[t])!=null?s:e}):n}function Nm(t,e){const n=Zd(),r=Oe(t,L(()=>{var a;return((a=n.value)==null?void 0:a.namespace)||jc})),s=sn(L(()=>{var a;return(a=n.value)==null?void 0:a.locale})),i=Gu(L(()=>{var a;return((a=n.value)==null?void 0:a.zIndex)||sR})),o=L(()=>{var a;return m(e)||((a=n.value)==null?void 0:a.size)||""});return e1(L(()=>m(n)||{})),{ns:r,locale:s,zIndex:i,size:o}}const e1=(t,e,n=!1)=>{var r;const s=!!Kt(),i=s?Zd():void 0,o=(r=e==null?void 0:e.provide)!=null?r:s?Jt:void 0;if(!o)return;const a=L(()=>{const u=m(t);return i!=null&&i.value?Gz(i.value,u):u});return o(cI,a),o(oR,L(()=>a.value.locale)),o(dI,L(()=>a.value.namespace)),o(iR,L(()=>a.value.zIndex)),o(lR,{size:L(()=>a.value.size||"")}),o(cR,L(()=>({emptyValues:a.value.emptyValues,valueOnClear:a.value.valueOnClear}))),(n||!Pp.value)&&(Pp.value=a.value),a},Gz=(t,e)=>{const n=[...new Set([...xu(t),...xu(e)])],r={};for(const s of n)r[s]=e[s]!==void 0?e[s]:t[s];return r},qz=(t=[])=>({version:OU,install:(n,r)=>{n[Ax]||(n[Ax]=!0,t.forEach(s=>n.use(s)),r&&e1(r,n,!0))}}),_t="update:modelValue",Xt="change",dr="input",Yz=Ke({zIndex:{type:de([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),Xz={scroll:({scrollTop:t,fixed:e})=>vt(t)&&wn(e),[Xt]:t=>wn(t)};var We=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n};function Qz(t,e,n,r){const s=n-e;return t/=r/2,t<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e}const ka=t=>on?window.requestAnimationFrame(t):setTimeout(t,16),ml=t=>on?window.cancelAnimationFrame(t):clearTimeout(t),fR=(t="")=>t.split(" ").filter(e=>!!e.trim()),ws=(t,e)=>{if(!t||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return t.classList.contains(e)},Js=(t,e)=>{!t||!e.trim()||t.classList.add(...fR(e))},ts=(t,e)=>{!t||!e.trim()||t.classList.remove(...fR(e))},xo=(t,e)=>{var n;if(!on||!t||!e)return"";let r=fs(e);r==="float"&&(r="cssFloat");try{const s=t.style[r];if(s)return s;const i=(n=document.defaultView)==null?void 0:n.getComputedStyle(t,"");return i?i[r]:""}catch{return t.style[r]}},hR=(t,e,n)=>{if(!(!t||!e))if(Bt(e))dR(e).forEach(([r,s])=>hR(t,r,s));else{const r=fs(e);t.style[r]=n}};function Xn(t,e="px"){if(!t)return"";if(vt(t)||iz(t))return`${t}${e}`;if(ut(t))return t}const Zz=(t,e)=>{if(!on)return!1;const n={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(e)],r=xo(t,n);return["scroll","auto","overlay"].some(s=>r.includes(s))},t1=(t,e)=>{if(!on)return;let n=t;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(Zz(n,e))return n;n=n.parentNode}return n};let Xf;const pR=t=>{var e;if(!on)return 0;if(Xf!==void 0)return Xf;const n=document.createElement("div");n.className=`${t}-scrollbar__wrap`,n.style.visibility="hidden",n.style.width="100px",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);const r=n.offsetWidth;n.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",n.appendChild(s);const i=s.offsetWidth;return(e=n.parentNode)==null||e.removeChild(n),Xf=r-i,Xf};function n1(t,e){if(!on)return;if(!e){t.scrollTop=0;return}const n=[];let r=e.offsetParent;for(;r!==null&&t!==r&&t.contains(r);)n.push(r),r=r.offsetParent;const s=e.offsetTop+n.reduce((u,l)=>u+l.offsetTop,0),i=s+e.offsetHeight,o=t.scrollTop,a=o+t.clientHeight;s<o?t.scrollTop=s:i>a&&(t.scrollTop=i-t.clientHeight)}function Jz(t,e,n,r,s){const i=Date.now();let o;const a=()=>{const l=Date.now()-i,c=Qz(l>r?r:l,e,n,r);$m(t)?t.scrollTo(window.pageXOffset,c):t.scrollTop=c,l<r?o=ka(a):pt(s)&&s()};return a(),()=>{o&&ml(o)}}const wT=(t,e)=>$m(e)?t.ownerDocument.documentElement:e,ET=t=>$m(t)?window.scrollY:t.scrollTop,mR="ElAffix",eW=se({name:mR}),tW=se({...eW,props:Yz,emits:Xz,setup(t,{expose:e,emit:n}){const r=t,s=Oe("affix"),i=On(),o=On(),a=On(),{height:u}=Fz(),{height:l,width:c,top:d,bottom:f,update:h}=hT(o,{windowScroll:!1}),p=hT(i),g=H(!1),v=H(0),y=H(0),w=L(()=>({height:g.value?`${l.value}px`:"",width:g.value?`${c.value}px`:""})),b=L(()=>{if(!g.value)return{};const x=r.offset?Xn(r.offset):0;return{height:`${l.value}px`,width:`${c.value}px`,top:r.position==="top"?x:"",bottom:r.position==="bottom"?x:"",transform:y.value?`translateY(${y.value}px)`:"",zIndex:r.zIndex}}),S=()=>{if(!a.value)return;v.value=a.value instanceof Window?document.documentElement.scrollTop:a.value.scrollTop||0;const{position:x,target:k,offset:A}=r,C=A+l.value;if(x==="top")if(k){const _=p.bottom.value-C;g.value=A>d.value&&p.bottom.value>0,y.value=_<0?_:0}else g.value=A>d.value;else if(k){const _=u.value-p.top.value-C;g.value=u.value-A<f.value&&u.value>p.top.value,y.value=_<0?-_:0}else g.value=u.value-A<f.value},E=async()=>{h(),await ft(),n("scroll",{scrollTop:v.value,fixed:g.value})};return Ie(g,x=>n(Xt,x)),Ft(()=>{var x;r.target?(i.value=(x=document.querySelector(r.target))!=null?x:void 0,i.value||lr(mR,`Target does not exist: ${r.target}`)):i.value=document.documentElement,a.value=t1(o.value,!0),h()}),Cn(a,"scroll",E),Fr(S),e({update:S,updateRoot:h}),(x,k)=>($(),Y("div",{ref_key:"root",ref:o,class:F(m(s).b()),style:mt(m(w))},[J("div",{class:F({[m(s).m("fixed")]:g.value}),style:mt(m(b))},[pe(x.$slots,"default")],6)],6))}});var nW=We(tW,[["__file","affix.vue"]]);const Dt=(t,e)=>{if(t.install=n=>{for(const r of[t,...Object.values(e??{})])n.component(r.name,r)},e)for(const[n,r]of Object.entries(e))t[n]=r;return t},gR=(t,e)=>(t.install=n=>{t._context=n._context,n.config.globalProperties[e]=t},t),rW=(t,e)=>(t.install=n=>{n.directive(e,t)},t),Gn=t=>(t.install=xn,t),sW=Dt(nW),iW=Ke({size:{type:de([Number,String])},color:{type:String}}),oW=se({name:"ElIcon",inheritAttrs:!1}),aW=se({...oW,props:iW,setup(t){const e=t,n=Oe("icon"),r=L(()=>{const{size:s,color:i}=e;return!s&&!i?{}:{fontSize:an(s)?void 0:Xn(s),"--color":i}});return(s,i)=>($(),Y("i",Yt({class:m(n).b(),style:m(r)},s.$attrs),[pe(s.$slots,"default")],16))}});var lW=We(aW,[["__file","icon.vue"]]);const lt=Dt(lW),Tn=de([String,Object,Function]),vR={Close:si},r1={Close:si,SuccessFilled:lI,InfoFilled:vd,WarningFilled:_m,CircleCloseFilled:$b},_a={primary:vd,success:lI,warning:_m,error:$b,info:vd},Fm={validating:Ji,success:Ob,error:Vo},uW=["light","dark"],cW=Ke({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:xu(_a),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:uW,default:"light"}}),dW={close:t=>t instanceof MouseEvent},fW=se({name:"ElAlert"}),hW=se({...fW,props:cW,emits:dW,setup(t,{emit:e}){const n=t,{Close:r}=r1,s=gr(),i=Oe("alert"),o=H(!0),a=L(()=>_a[n.type]),u=L(()=>!!(n.description||s.default)),l=c=>{o.value=!1,e("close",c)};return(c,d)=>($(),ye(Ar,{name:m(i).b("fade"),persisted:""},{default:le(()=>[Ot(J("div",{class:F([m(i).b(),m(i).m(c.type),m(i).is("center",c.center),m(i).is(c.effect)]),role:"alert"},[c.showIcon&&(c.$slots.icon||m(a))?($(),ye(m(lt),{key:0,class:F([m(i).e("icon"),{[m(i).is("big")]:m(u)}])},{default:le(()=>[pe(c.$slots,"icon",{},()=>[($(),ye(jt(m(a))))])]),_:3},8,["class"])):ge("v-if",!0),J("div",{class:F(m(i).e("content"))},[c.title||c.$slots.title?($(),Y("span",{key:0,class:F([m(i).e("title"),{"with-description":m(u)}])},[pe(c.$slots,"title",{},()=>[Qt(ze(c.title),1)])],2)):ge("v-if",!0),m(u)?($(),Y("p",{key:1,class:F(m(i).e("description"))},[pe(c.$slots,"default",{},()=>[Qt(ze(c.description),1)])],2)):ge("v-if",!0),c.closable?($(),Y(dt,{key:2},[c.closeText?($(),Y("div",{key:0,class:F([m(i).e("close-btn"),m(i).is("customed")]),onClick:l},ze(c.closeText),3)):($(),ye(m(lt),{key:1,class:F(m(i).e("close-btn")),onClick:l},{default:le(()=>[ie(m(r))]),_:1},8,["class"]))],64)):ge("v-if",!0)],2)],2),[[cn,o.value]])]),_:3},8,["name"]))}});var pW=We(hW,[["__file","alert.vue"]]);const mW=Dt(pW),Bm=()=>on&&/firefox/i.test(window.navigator.userAgent);let vs;const gW={height:"0",visibility:"hidden",overflow:Bm()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},vW=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function yW(t){const e=window.getComputedStyle(t),n=e.getPropertyValue("box-sizing"),r=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),s=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:vW.map(o=>[o,e.getPropertyValue(o)]),paddingSize:r,borderSize:s,boxSizing:n}}function xT(t,e=1,n){var r;vs||(vs=document.createElement("textarea"),document.body.appendChild(vs));const{paddingSize:s,borderSize:i,boxSizing:o,contextStyle:a}=yW(t);a.forEach(([d,f])=>vs==null?void 0:vs.style.setProperty(d,f)),Object.entries(gW).forEach(([d,f])=>vs==null?void 0:vs.style.setProperty(d,f,"important")),vs.value=t.value||t.placeholder||"";let u=vs.scrollHeight;const l={};o==="border-box"?u=u+i:o==="content-box"&&(u=u-s),vs.value="";const c=vs.scrollHeight-s;if(vt(e)){let d=c*e;o==="border-box"&&(d=d+s+i),u=Math.max(d,u),l.minHeight=`${d}px`}if(vt(n)){let d=c*n;o==="border-box"&&(d=d+s+i),u=Math.min(d,u)}return l.height=`${u}px`,(r=vs.parentNode)==null||r.removeChild(vs),vs=void 0,l}const Wn=t=>t,bW=Ke({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),$r=t=>vi(bW,t),s1=Ke({id:{type:String,default:void 0},size:fr,disabled:Boolean,modelValue:{type:de([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:de([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:Tn},prefixIcon:{type:Tn},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:de([Object,Array,String]),default:()=>Wn({})},autofocus:Boolean,rows:{type:Number,default:2},...$r(["ariaLabel"])}),SW={[_t]:t=>ut(t),input:t=>ut(t),change:t=>ut(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},wW=["class","style"],EW=/^on[A-Z]/,Jd=(t={})=>{const{excludeListeners:e=!1,excludeKeys:n}=t,r=L(()=>((n==null?void 0:n.value)||[]).concat(wW)),s=Kt();return L(s?()=>{var i;return xd(Object.entries((i=s.proxy)==null?void 0:i.$attrs).filter(([o])=>!r.value.includes(o)&&!(e&&EW.test(o))))}:()=>({}))},xl=Symbol("formContextKey"),to=Symbol("formItemContextKey"),TT={prefix:Math.floor(Math.random()*1e4),current:0},xW=Symbol("elIdInjection"),i1=()=>Kt()?nt(xW,TT):TT,Or=t=>{const e=i1(),n=Mb();return Rp(()=>m(t)||`${n.value}-id-${e.prefix}-${e.current++}`)},Ur=()=>{const t=nt(xl,void 0),e=nt(to,void 0);return{form:t,formItem:e}},ci=(t,{formItemContext:e,disableIdGeneration:n,disableIdManagement:r})=>{n||(n=H(!1)),r||(r=H(!1));const s=H();let i;const o=L(()=>{var a;return!!(!(t.label||t.ariaLabel)&&e&&e.inputIds&&((a=e.inputIds)==null?void 0:a.length)<=1)});return Ft(()=>{i=Ie([En(t,"id"),n],([a,u])=>{const l=a??(u?void 0:Or().value);l!==s.value&&(e!=null&&e.removeInputId&&(s.value&&e.removeInputId(s.value),!(r!=null&&r.value)&&!u&&l&&e.addInputId(l)),s.value=l)},{immediate:!0})}),Ia(()=>{i&&i(),e!=null&&e.removeInputId&&s.value&&e.removeInputId(s.value)}),{isLabeledByFormItem:o,inputId:s}},o1=t=>{const e=Kt();return L(()=>{var n,r;return(r=(n=e==null?void 0:e.proxy)==null?void 0:n.$props)==null?void 0:r[t]})},ur=(t,e={})=>{const n=H(void 0),r=e.prop?n:o1("size"),s=e.global?n:uR(),i=e.form?{size:void 0}:nt(xl,void 0),o=e.formItem?{size:void 0}:nt(to,void 0);return L(()=>r.value||m(t)||(o==null?void 0:o.size)||(i==null?void 0:i.size)||s.value||"")},Hr=t=>{const e=o1("disabled"),n=nt(xl,void 0);return L(()=>e.value||m(t)||(n==null?void 0:n.disabled)||!1)};function Pa(t,{beforeFocus:e,afterFocus:n,beforeBlur:r,afterBlur:s}={}){const i=Kt(),{emit:o}=i,a=On(),u=o1("disabled"),l=H(!1),c=h=>{pt(e)&&e(h)||l.value||(l.value=!0,o("focus",h),n==null||n())},d=h=>{var p;pt(r)&&r(h)||h.relatedTarget&&((p=a.value)!=null&&p.contains(h.relatedTarget))||(l.value=!1,o("blur",h),s==null||s())},f=()=>{var h,p;(h=a.value)!=null&&h.contains(document.activeElement)&&a.value!==document.activeElement||u.value||(p=t.value)==null||p.focus()};return Ie([a,u],([h,p])=>{h&&(p?h.removeAttribute("tabindex"):h.setAttribute("tabindex","-1"))}),Cn(a,"focus",c,!0),Cn(a,"blur",d,!0),Cn(a,"click",f,!0),{isFocused:l,wrapperRef:a,handleFocus:c,handleBlur:d}}const TW=t=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(t);function ef({afterComposition:t,emit:e}){const n=H(!1),r=a=>{e==null||e("compositionstart",a),n.value=!0},s=a=>{var u;e==null||e("compositionupdate",a);const l=(u=a.target)==null?void 0:u.value,c=l[l.length-1]||"";n.value=!TW(c)},i=a=>{e==null||e("compositionend",a),n.value&&(n.value=!1,ft(()=>t(a)))};return{isComposing:n,handleComposition:a=>{a.type==="compositionend"?i(a):s(a)},handleCompositionStart:r,handleCompositionUpdate:s,handleCompositionEnd:i}}function CW(t){let e;function n(){if(t.value==null)return;const{selectionStart:s,selectionEnd:i,value:o}=t.value;if(s==null||i==null)return;const a=o.slice(0,Math.max(0,s)),u=o.slice(Math.max(0,i));e={selectionStart:s,selectionEnd:i,value:o,beforeTxt:a,afterTxt:u}}function r(){if(t.value==null||e==null)return;const{value:s}=t.value,{beforeTxt:i,afterTxt:o,selectionStart:a}=e;if(i==null||o==null||a==null)return;let u=s.length;if(s.endsWith(o))u=s.length-o.length;else if(s.startsWith(i))u=i.length;else{const l=i[a-1],c=s.indexOf(l,a-1);c!==-1&&(u=c+1)}t.value.setSelectionRange(u,u)}return[n,r]}const kW="ElInput",_W=se({name:kW,inheritAttrs:!1}),AW=se({..._W,props:s1,emits:SW,setup(t,{expose:e,emit:n}){const r=t,s=No(),i=Jd(),o=gr(),a=L(()=>[r.type==="textarea"?g.b():p.b(),p.m(f.value),p.is("disabled",h.value),p.is("exceed",ee.value),{[p.b("group")]:o.prepend||o.append,[p.m("prefix")]:o.prefix||r.prefixIcon,[p.m("suffix")]:o.suffix||r.suffixIcon||r.clearable||r.showPassword,[p.bm("suffix","password-clear")]:D.value&&M.value,[p.b("hidden")]:r.type==="hidden"},s.class]),u=L(()=>[p.e("wrapper"),p.is("focus",A.value)]),{form:l,formItem:c}=Ur(),{inputId:d}=ci(r,{formItemContext:c}),f=ur(),h=Hr(),p=Oe("input"),g=Oe("textarea"),v=On(),y=On(),w=H(!1),b=H(!1),S=H(),E=On(r.inputStyle),x=L(()=>v.value||y.value),{wrapperRef:k,isFocused:A,handleFocus:C,handleBlur:_}=Pa(x,{beforeFocus(){return h.value},afterBlur(){var Ae;r.validateEvent&&((Ae=c==null?void 0:c.validate)==null||Ae.call(c,"blur").catch(et=>void 0))}}),O=L(()=>{var Ae;return(Ae=l==null?void 0:l.statusIcon)!=null?Ae:!1}),P=L(()=>(c==null?void 0:c.validateState)||""),U=L(()=>P.value&&Fm[P.value]),j=L(()=>b.value?hU:$V),N=L(()=>[s.style]),R=L(()=>[r.inputStyle,E.value,{resize:r.resize}]),V=L(()=>Sr(r.modelValue)?"":String(r.modelValue)),D=L(()=>r.clearable&&!h.value&&!r.readonly&&!!V.value&&(A.value||w.value)),M=L(()=>r.showPassword&&!h.value&&!!V.value),K=L(()=>r.showWordLimit&&!!r.maxlength&&(r.type==="text"||r.type==="textarea")&&!h.value&&!r.readonly&&!r.showPassword),q=L(()=>V.value.length),ee=L(()=>!!K.value&&q.value>Number(r.maxlength)),X=L(()=>!!o.suffix||!!r.suffixIcon||D.value||r.showPassword||K.value||!!P.value&&O.value),[te,ue]=CW(v);zn(y,Ae=>{if(ce(),!K.value||r.resize!=="both")return;const et=Ae[0],{width:St}=et.contentRect;S.value={right:`calc(100% - ${St+15+6}px)`}});const he=()=>{const{type:Ae,autosize:et}=r;if(!(!on||Ae!=="textarea"||!y.value))if(et){const St=Bt(et)?et.minRows:void 0,Lt=Bt(et)?et.maxRows:void 0,Pt=xT(y.value,St,Lt);E.value={overflowY:"hidden",...Pt},ft(()=>{y.value.offsetHeight,E.value=Pt})}else E.value={minHeight:xT(y.value).minHeight}},ce=(Ae=>{let et=!1;return()=>{var St;if(et||!r.autosize)return;((St=y.value)==null?void 0:St.offsetParent)===null||(Ae(),et=!0)}})(he),ae=()=>{const Ae=x.value,et=r.formatter?r.formatter(V.value):V.value;!Ae||Ae.value===et||(Ae.value=et)},Te=async Ae=>{te();let{value:et}=Ae.target;if(r.formatter&&r.parser&&(et=r.parser(et)),!z.value){if(et===V.value){ae();return}n(_t,et),n(dr,et),await ft(),ae(),ue()}},Ce=Ae=>{let{value:et}=Ae.target;r.formatter&&r.parser&&(et=r.parser(et)),n(Xt,et)},{isComposing:z,handleCompositionStart:re,handleCompositionUpdate:ve,handleCompositionEnd:ke}=ef({emit:n,afterComposition:Te}),Ee=()=>{te(),b.value=!b.value,setTimeout(ue)},be=()=>{var Ae;return(Ae=x.value)==null?void 0:Ae.focus()},Se=()=>{var Ae;return(Ae=x.value)==null?void 0:Ae.blur()},_e=Ae=>{w.value=!1,n("mouseleave",Ae)},Ne=Ae=>{w.value=!0,n("mouseenter",Ae)},Me=Ae=>{n("keydown",Ae)},st=()=>{var Ae;(Ae=x.value)==null||Ae.select()},qe=()=>{n(_t,""),n(Xt,""),n("clear"),n(dr,"")};return Ie(()=>r.modelValue,()=>{var Ae;ft(()=>he()),r.validateEvent&&((Ae=c==null?void 0:c.validate)==null||Ae.call(c,"change").catch(et=>void 0))}),Ie(V,()=>ae()),Ie(()=>r.type,async()=>{await ft(),ae(),he()}),Ft(()=>{!r.formatter&&r.parser,ae(),ft(he)}),e({input:v,textarea:y,ref:x,textareaStyle:R,autosize:En(r,"autosize"),isComposing:z,focus:be,blur:Se,select:st,clear:qe,resizeTextarea:he}),(Ae,et)=>($(),Y("div",{class:F([m(a),{[m(p).bm("group","append")]:Ae.$slots.append,[m(p).bm("group","prepend")]:Ae.$slots.prepend}]),style:mt(m(N)),onMouseenter:Ne,onMouseleave:_e},[ge(" input "),Ae.type!=="textarea"?($(),Y(dt,{key:0},[ge(" prepend slot "),Ae.$slots.prepend?($(),Y("div",{key:0,class:F(m(p).be("group","prepend"))},[pe(Ae.$slots,"prepend")],2)):ge("v-if",!0),J("div",{ref_key:"wrapperRef",ref:k,class:F(m(u))},[ge(" prefix slot "),Ae.$slots.prefix||Ae.prefixIcon?($(),Y("span",{key:0,class:F(m(p).e("prefix"))},[J("span",{class:F(m(p).e("prefix-inner"))},[pe(Ae.$slots,"prefix"),Ae.prefixIcon?($(),ye(m(lt),{key:0,class:F(m(p).e("icon"))},{default:le(()=>[($(),ye(jt(Ae.prefixIcon)))]),_:1},8,["class"])):ge("v-if",!0)],2)],2)):ge("v-if",!0),J("input",Yt({id:m(d),ref_key:"input",ref:v,class:m(p).e("inner")},m(i),{minlength:Ae.minlength,maxlength:Ae.maxlength,type:Ae.showPassword?b.value?"text":"password":Ae.type,disabled:m(h),readonly:Ae.readonly,autocomplete:Ae.autocomplete,tabindex:Ae.tabindex,"aria-label":Ae.ariaLabel,placeholder:Ae.placeholder,style:Ae.inputStyle,form:Ae.form,autofocus:Ae.autofocus,role:Ae.containerRole,onCompositionstart:m(re),onCompositionupdate:m(ve),onCompositionend:m(ke),onInput:Te,onChange:Ce,onKeydown:Me}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),ge(" suffix slot "),m(X)?($(),Y("span",{key:1,class:F(m(p).e("suffix"))},[J("span",{class:F(m(p).e("suffix-inner"))},[!m(D)||!m(M)||!m(K)?($(),Y(dt,{key:0},[pe(Ae.$slots,"suffix"),Ae.suffixIcon?($(),ye(m(lt),{key:0,class:F(m(p).e("icon"))},{default:le(()=>[($(),ye(jt(Ae.suffixIcon)))]),_:1},8,["class"])):ge("v-if",!0)],64)):ge("v-if",!0),m(D)?($(),ye(m(lt),{key:1,class:F([m(p).e("icon"),m(p).e("clear")]),onMousedown:wt(m(xn),["prevent"]),onClick:qe},{default:le(()=>[ie(m(Vo))]),_:1},8,["class","onMousedown"])):ge("v-if",!0),m(M)?($(),ye(m(lt),{key:2,class:F([m(p).e("icon"),m(p).e("password")]),onClick:Ee},{default:le(()=>[($(),ye(jt(m(j))))]),_:1},8,["class"])):ge("v-if",!0),m(K)?($(),Y("span",{key:3,class:F(m(p).e("count"))},[J("span",{class:F(m(p).e("count-inner"))},ze(m(q))+" / "+ze(Ae.maxlength),3)],2)):ge("v-if",!0),m(P)&&m(U)&&m(O)?($(),ye(m(lt),{key:4,class:F([m(p).e("icon"),m(p).e("validateIcon"),m(p).is("loading",m(P)==="validating")])},{default:le(()=>[($(),ye(jt(m(U))))]),_:1},8,["class"])):ge("v-if",!0)],2)],2)):ge("v-if",!0)],2),ge(" append slot "),Ae.$slots.append?($(),Y("div",{key:1,class:F(m(p).be("group","append"))},[pe(Ae.$slots,"append")],2)):ge("v-if",!0)],64)):($(),Y(dt,{key:1},[ge(" textarea "),J("textarea",Yt({id:m(d),ref_key:"textarea",ref:y,class:[m(g).e("inner"),m(p).is("focus",m(A))]},m(i),{minlength:Ae.minlength,maxlength:Ae.maxlength,tabindex:Ae.tabindex,disabled:m(h),readonly:Ae.readonly,autocomplete:Ae.autocomplete,style:m(R),"aria-label":Ae.ariaLabel,placeholder:Ae.placeholder,form:Ae.form,autofocus:Ae.autofocus,rows:Ae.rows,role:Ae.containerRole,onCompositionstart:m(re),onCompositionupdate:m(ve),onCompositionend:m(ke),onInput:Te,onFocus:m(C),onBlur:m(_),onChange:Ce,onKeydown:Me}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),m(K)?($(),Y("span",{key:0,style:mt(S.value),class:F(m(p).e("count"))},ze(m(q))+" / "+ze(Ae.maxlength),7)):ge("v-if",!0)],64))],38))}});var IW=We(AW,[["__file","input.vue"]]);const es=Dt(IW),Dl=4,yR={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},RW=({move:t,size:e,bar:n})=>({[n.size]:e,transform:`translate${n.axis}(${t}%)`}),a1=Symbol("scrollbarContextKey"),LW=Ke({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),PW="Thumb",DW=se({__name:"thumb",props:LW,setup(t){const e=t,n=nt(a1),r=Oe("scrollbar");n||lr(PW,"can not inject scrollbar context");const s=H(),i=H(),o=H({}),a=H(!1);let u=!1,l=!1,c=on?document.onselectstart:null;const d=L(()=>yR[e.vertical?"vertical":"horizontal"]),f=L(()=>RW({size:e.size,move:e.move,bar:d.value})),h=L(()=>s.value[d.value.offset]**2/n.wrapElement[d.value.scrollSize]/e.ratio/i.value[d.value.offset]),p=x=>{var k;if(x.stopPropagation(),x.ctrlKey||[1,2].includes(x.button))return;(k=window.getSelection())==null||k.removeAllRanges(),v(x);const A=x.currentTarget;A&&(o.value[d.value.axis]=A[d.value.offset]-(x[d.value.client]-A.getBoundingClientRect()[d.value.direction]))},g=x=>{if(!i.value||!s.value||!n.wrapElement)return;const k=Math.abs(x.target.getBoundingClientRect()[d.value.direction]-x[d.value.client]),A=i.value[d.value.offset]/2,C=(k-A)*100*h.value/s.value[d.value.offset];n.wrapElement[d.value.scroll]=C*n.wrapElement[d.value.scrollSize]/100},v=x=>{x.stopImmediatePropagation(),u=!0,document.addEventListener("mousemove",y),document.addEventListener("mouseup",w),c=document.onselectstart,document.onselectstart=()=>!1},y=x=>{if(!s.value||!i.value||u===!1)return;const k=o.value[d.value.axis];if(!k)return;const A=(s.value.getBoundingClientRect()[d.value.direction]-x[d.value.client])*-1,C=i.value[d.value.offset]-k,_=(A-C)*100*h.value/s.value[d.value.offset];n.wrapElement[d.value.scroll]=_*n.wrapElement[d.value.scrollSize]/100},w=()=>{u=!1,o.value[d.value.axis]=0,document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",w),E(),l&&(a.value=!1)},b=()=>{l=!1,a.value=!!e.size},S=()=>{l=!0,a.value=u};In(()=>{E(),document.removeEventListener("mouseup",w)});const E=()=>{document.onselectstart!==c&&(document.onselectstart=c)};return Cn(En(n,"scrollbarElement"),"mousemove",b),Cn(En(n,"scrollbarElement"),"mouseleave",S),(x,k)=>($(),ye(Ar,{name:m(r).b("fade"),persisted:""},{default:le(()=>[Ot(J("div",{ref_key:"instance",ref:s,class:F([m(r).e("bar"),m(r).is(m(d).key)]),onMousedown:g,onClick:wt(()=>{},["stop"])},[J("div",{ref_key:"thumb",ref:i,class:F(m(r).e("thumb")),style:mt(m(f)),onMousedown:p},null,38)],42,["onClick"]),[[cn,x.always||a.value]])]),_:1},8,["name"]))}});var CT=We(DW,[["__file","thumb.vue"]]);const OW=Ke({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),$W=se({__name:"bar",props:OW,setup(t,{expose:e}){const n=t,r=nt(a1),s=H(0),i=H(0),o=H(""),a=H(""),u=H(1),l=H(1);return e({handleScroll:f=>{if(f){const h=f.offsetHeight-Dl,p=f.offsetWidth-Dl;i.value=f.scrollTop*100/h*u.value,s.value=f.scrollLeft*100/p*l.value}},update:()=>{const f=r==null?void 0:r.wrapElement;if(!f)return;const h=f.offsetHeight-Dl,p=f.offsetWidth-Dl,g=h**2/f.scrollHeight,v=p**2/f.scrollWidth,y=Math.max(g,n.minSize),w=Math.max(v,n.minSize);u.value=g/(h-g)/(y/(h-y)),l.value=v/(p-v)/(w/(p-w)),a.value=y+Dl<h?`${y}px`:"",o.value=w+Dl<p?`${w}px`:""}}),(f,h)=>($(),Y(dt,null,[ie(CT,{move:s.value,ratio:l.value,size:o.value,always:f.always},null,8,["move","ratio","size","always"]),ie(CT,{move:i.value,ratio:u.value,size:a.value,vertical:"",always:f.always},null,8,["move","ratio","size","always"])],64))}});var MW=We($W,[["__file","bar.vue"]]);const NW=Ke({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:de([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...$r(["ariaLabel","ariaOrientation"])}),bR={scroll:({scrollTop:t,scrollLeft:e})=>[t,e].every(vt)},FW="ElScrollbar",BW=se({name:FW}),VW=se({...BW,props:NW,emits:bR,setup(t,{expose:e,emit:n}){const r=t,s=Oe("scrollbar");let i,o,a=0,u=0;const l=H(),c=H(),d=H(),f=H(),h=L(()=>{const E={};return r.height&&(E.height=Xn(r.height)),r.maxHeight&&(E.maxHeight=Xn(r.maxHeight)),[r.wrapStyle,E]}),p=L(()=>[r.wrapClass,s.e("wrap"),{[s.em("wrap","hidden-default")]:!r.native}]),g=L(()=>[s.e("view"),r.viewClass]),v=()=>{var E;c.value&&((E=f.value)==null||E.handleScroll(c.value),a=c.value.scrollTop,u=c.value.scrollLeft,n("scroll",{scrollTop:c.value.scrollTop,scrollLeft:c.value.scrollLeft}))};function y(E,x){Bt(E)?c.value.scrollTo(E):vt(E)&&vt(x)&&c.value.scrollTo(E,x)}const w=E=>{vt(E)&&(c.value.scrollTop=E)},b=E=>{vt(E)&&(c.value.scrollLeft=E)},S=()=>{var E;(E=f.value)==null||E.update()};return Ie(()=>r.noresize,E=>{E?(i==null||i(),o==null||o()):({stop:i}=zn(d,S),o=Cn("resize",S))},{immediate:!0}),Ie(()=>[r.maxHeight,r.height],()=>{r.native||ft(()=>{var E;S(),c.value&&((E=f.value)==null||E.handleScroll(c.value))})}),Jt(a1,fn({scrollbarElement:l,wrapElement:c})),lm(()=>{c.value&&(c.value.scrollTop=a,c.value.scrollLeft=u)}),Ft(()=>{r.native||ft(()=>{S()})}),ki(()=>S()),e({wrapRef:c,update:S,scrollTo:y,setScrollTop:w,setScrollLeft:b,handleScroll:v}),(E,x)=>($(),Y("div",{ref_key:"scrollbarRef",ref:l,class:F(m(s).b())},[J("div",{ref_key:"wrapRef",ref:c,class:F(m(p)),style:mt(m(h)),tabindex:E.tabindex,onScroll:v},[($(),ye(jt(E.tag),{id:E.id,ref_key:"resizeRef",ref:d,class:F(m(g)),style:mt(E.viewStyle),role:E.role,"aria-label":E.ariaLabel,"aria-orientation":E.ariaOrientation},{default:le(()=>[pe(E.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),E.native?ge("v-if",!0):($(),ye(MW,{key:0,ref_key:"barRef",ref:f,always:E.always,"min-size":E.minSize},null,8,["always","min-size"]))],2))}});var UW=We(VW,[["__file","scrollbar.vue"]]);const io=Dt(UW),l1=Symbol("popper"),SR=Symbol("popperContent"),wR=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],ER=Ke({role:{type:String,values:wR,default:"tooltip"}}),HW=se({name:"ElPopper",inheritAttrs:!1}),jW=se({...HW,props:ER,setup(t,{expose:e}){const n=t,r=H(),s=H(),i=H(),o=H(),a=L(()=>n.role),u={triggerRef:r,popperInstanceRef:s,contentRef:i,referenceRef:o,role:a};return e(u),Jt(l1,u),(l,c)=>pe(l.$slots,"default")}});var KW=We(jW,[["__file","popper.vue"]]);const zW=se({name:"ElPopperArrow",inheritAttrs:!1}),WW=se({...zW,setup(t,{expose:e}){const n=Oe("popper"),{arrowRef:r,arrowStyle:s}=nt(SR,void 0);return In(()=>{r.value=void 0}),e({arrowRef:r}),(i,o)=>($(),Y("span",{ref_key:"arrowRef",ref:r,class:F(m(n).e("arrow")),style:mt(m(s)),"data-popper-arrow":""},null,6))}});var GW=We(WW,[["__file","arrow.vue"]]);const xR=Ke({virtualRef:{type:de(Object)},virtualTriggering:Boolean,onMouseenter:{type:de(Function)},onMouseleave:{type:de(Function)},onClick:{type:de(Function)},onKeydown:{type:de(Function)},onFocus:{type:de(Function)},onBlur:{type:de(Function)},onContextmenu:{type:de(Function)},id:String,open:Boolean}),TR=Symbol("elForwardRef"),qW=t=>{Jt(TR,{setForwardRef:n=>{t.value=n}})},YW=t=>({mounted(e){t(e)},updated(e){t(e)},unmounted(){t(null)}}),XW='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',QW=t=>getComputedStyle(t).position==="fixed"?!1:t.offsetParent!==null,kT=t=>Array.from(t.querySelectorAll(XW)).filter(e=>Dp(e)&&QW(e)),Dp=t=>{if(t.tabIndex>0||t.tabIndex===0&&t.getAttribute("tabIndex")!==null)return!0;if(t.tabIndex<0||t.hasAttribute("disabled")||t.getAttribute("aria-disabled")==="true")return!1;switch(t.nodeName){case"A":return!!t.href&&t.rel!=="ignore";case"INPUT":return!(t.type==="hidden"||t.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Ih=function(t,e,...n){let r;e.includes("mouse")||e.includes("click")?r="MouseEvents":e.includes("key")?r="KeyboardEvent":r="HTMLEvents";const s=document.createEvent(r);return s.initEvent(e,...n),t.dispatchEvent(s),t},CR=t=>!t.getAttribute("aria-owns"),kR=(t,e,n)=>{const{parentNode:r}=t;if(!r)return null;const s=r.querySelectorAll(n),i=Array.prototype.indexOf.call(s,t);return s[i+e]||null},Rh=t=>{t&&(t.focus(),!CR(t)&&t.click())},ZW="ElOnlyChild",_R=se({name:ZW,setup(t,{slots:e,attrs:n}){var r;const s=nt(TR),i=YW((r=s==null?void 0:s.setForwardRef)!=null?r:xn);return()=>{var o;const a=(o=e.default)==null?void 0:o.call(e,n);if(!a||a.length>1)return null;const u=AR(a);return u?Ot(Lo(u,n),[[i]]):null}}});function AR(t){if(!t)return null;const e=t;for(const n of e){if(Bt(n))switch(n.type){case br:continue;case Vu:case"svg":return _T(n);case dt:return AR(n.children);default:return n}return _T(n)}return null}function _T(t){const e=Oe("only-child");return ie("span",{class:e.e("content")},[t])}const JW=se({name:"ElPopperTrigger",inheritAttrs:!1}),eG=se({...JW,props:xR,setup(t,{expose:e}){const n=t,{role:r,triggerRef:s}=nt(l1,void 0);qW(s);const i=L(()=>a.value?n.id:void 0),o=L(()=>{if(r&&r.value==="tooltip")return n.open&&n.id?n.id:void 0}),a=L(()=>{if(r&&r.value!=="tooltip")return r.value}),u=L(()=>a.value?`${n.open}`:void 0);let l;const c=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return Ft(()=>{Ie(()=>n.virtualRef,d=>{d&&(s.value=us(d))},{immediate:!0}),Ie(s,(d,f)=>{l==null||l(),l=void 0,ds(d)&&(c.forEach(h=>{var p;const g=n[h];g&&(d.addEventListener(h.slice(2).toLowerCase(),g),(p=f==null?void 0:f.removeEventListener)==null||p.call(f,h.slice(2).toLowerCase(),g))}),Dp(d)&&(l=Ie([i,o,a,u],h=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((p,g)=>{Sr(h[g])?d.removeAttribute(p):d.setAttribute(p,h[g])})},{immediate:!0}))),ds(f)&&Dp(f)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(h=>f.removeAttribute(h))},{immediate:!0})}),In(()=>{if(l==null||l(),l=void 0,s.value&&ds(s.value)){const d=s.value;c.forEach(f=>{const h=n[f];h&&d.removeEventListener(f.slice(2).toLowerCase(),h)}),s.value=void 0}}),e({triggerRef:s}),(d,f)=>d.virtualTriggering?ge("v-if",!0):($(),ye(m(_R),Yt({key:0},d.$attrs,{"aria-controls":m(i),"aria-describedby":m(o),"aria-expanded":m(u),"aria-haspopup":m(a)}),{default:le(()=>[pe(d.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var tG=We(eG,[["__file","trigger.vue"]]);const yv="focus-trap.focus-after-trapped",bv="focus-trap.focus-after-released",nG="focus-trap.focusout-prevented",AT={cancelable:!0,bubbles:!1},rG={cancelable:!0,bubbles:!1},IT="focusAfterTrapped",RT="focusAfterReleased",u1=Symbol("elFocusTrap"),c1=H(),Vm=H(0),d1=H(0);let Qf=0;const IR=t=>{const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0||r===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e},LT=(t,e)=>{for(const n of t)if(!sG(n,e))return n},sG=(t,e)=>{if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1},iG=t=>{const e=IR(t),n=LT(e,t),r=LT(e.reverse(),t);return[n,r]},oG=t=>t instanceof HTMLInputElement&&"select"in t,yo=(t,e)=>{if(t&&t.focus){const n=document.activeElement;let r=!1;ds(t)&&!Dp(t)&&!t.getAttribute("tabindex")&&(t.setAttribute("tabindex","-1"),r=!0),t.focus({preventScroll:!0}),d1.value=window.performance.now(),t!==n&&oG(t)&&e&&t.select(),ds(t)&&r&&t.removeAttribute("tabindex")}};function PT(t,e){const n=[...t],r=t.indexOf(e);return r!==-1&&n.splice(r,1),n}const aG=()=>{let t=[];return{push:r=>{const s=t[0];s&&r!==s&&s.pause(),t=PT(t,r),t.unshift(r)},remove:r=>{var s,i;t=PT(t,r),(i=(s=t[0])==null?void 0:s.resume)==null||i.call(s)}}},lG=(t,e=!1)=>{const n=document.activeElement;for(const r of t)if(yo(r,e),document.activeElement!==n)return},DT=aG(),uG=()=>Vm.value>d1.value,Zf=()=>{c1.value="pointer",Vm.value=window.performance.now()},OT=()=>{c1.value="keyboard",Vm.value=window.performance.now()},cG=()=>(Ft(()=>{Qf===0&&(document.addEventListener("mousedown",Zf),document.addEventListener("touchstart",Zf),document.addEventListener("keydown",OT)),Qf++}),In(()=>{Qf--,Qf<=0&&(document.removeEventListener("mousedown",Zf),document.removeEventListener("touchstart",Zf),document.removeEventListener("keydown",OT))}),{focusReason:c1,lastUserFocusTimestamp:Vm,lastAutomatedFocusTimestamp:d1}),Jf=t=>new CustomEvent(nG,{...rG,detail:t}),it={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"};let Hl=[];const $T=t=>{t.code===it.esc&&Hl.forEach(e=>e(t))},dG=t=>{Ft(()=>{Hl.length===0&&document.addEventListener("keydown",$T),on&&Hl.push(t)}),In(()=>{Hl=Hl.filter(e=>e!==t),Hl.length===0&&on&&document.removeEventListener("keydown",$T)})},fG=se({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[IT,RT,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:e}){const n=H();let r,s;const{focusReason:i}=cG();dG(p=>{t.trapped&&!o.paused&&e("release-requested",p)});const o={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},a=p=>{if(!t.loop&&!t.trapped||o.paused)return;const{code:g,altKey:v,ctrlKey:y,metaKey:w,currentTarget:b,shiftKey:S}=p,{loop:E}=t,x=g===it.tab&&!v&&!y&&!w,k=document.activeElement;if(x&&k){const A=b,[C,_]=iG(A);if(C&&_){if(!S&&k===_){const P=Jf({focusReason:i.value});e("focusout-prevented",P),P.defaultPrevented||(p.preventDefault(),E&&yo(C,!0))}else if(S&&[C,A].includes(k)){const P=Jf({focusReason:i.value});e("focusout-prevented",P),P.defaultPrevented||(p.preventDefault(),E&&yo(_,!0))}}else if(k===A){const P=Jf({focusReason:i.value});e("focusout-prevented",P),P.defaultPrevented||p.preventDefault()}}};Jt(u1,{focusTrapRef:n,onKeydown:a}),Ie(()=>t.focusTrapEl,p=>{p&&(n.value=p)},{immediate:!0}),Ie([n],([p],[g])=>{p&&(p.addEventListener("keydown",a),p.addEventListener("focusin",c),p.addEventListener("focusout",d)),g&&(g.removeEventListener("keydown",a),g.removeEventListener("focusin",c),g.removeEventListener("focusout",d))});const u=p=>{e(IT,p)},l=p=>e(RT,p),c=p=>{const g=m(n);if(!g)return;const v=p.target,y=p.relatedTarget,w=v&&g.contains(v);t.trapped||y&&g.contains(y)||(r=y),w&&e("focusin",p),!o.paused&&t.trapped&&(w?s=v:yo(s,!0))},d=p=>{const g=m(n);if(!(o.paused||!g))if(t.trapped){const v=p.relatedTarget;!Sr(v)&&!g.contains(v)&&setTimeout(()=>{if(!o.paused&&t.trapped){const y=Jf({focusReason:i.value});e("focusout-prevented",y),y.defaultPrevented||yo(s,!0)}},0)}else{const v=p.target;v&&g.contains(v)||e("focusout",p)}};async function f(){await ft();const p=m(n);if(p){DT.push(o);const g=p.contains(document.activeElement)?r:document.activeElement;if(r=g,!p.contains(g)){const y=new Event(yv,AT);p.addEventListener(yv,u),p.dispatchEvent(y),y.defaultPrevented||ft(()=>{let w=t.focusStartEl;ut(w)||(yo(w),document.activeElement!==w&&(w="first")),w==="first"&&lG(IR(p),!0),(document.activeElement===g||w==="container")&&yo(p)})}}}function h(){const p=m(n);if(p){p.removeEventListener(yv,u);const g=new CustomEvent(bv,{...AT,detail:{focusReason:i.value}});p.addEventListener(bv,l),p.dispatchEvent(g),!g.defaultPrevented&&(i.value=="keyboard"||!uG()||p.contains(document.activeElement))&&yo(r??document.body),p.removeEventListener(bv,l),DT.remove(o)}}return Ft(()=>{t.trapped&&f(),Ie(()=>t.trapped,p=>{p?f():h()})}),In(()=>{t.trapped&&h(),n.value&&(n.value.removeEventListener("keydown",a),n.value.removeEventListener("focusin",c),n.value.removeEventListener("focusout",d),n.value=void 0)}),{onKeydown:a}}});function hG(t,e,n,r,s,i){return pe(t.$slots,"default",{handleKeydown:t.onKeydown})}var Yu=We(fG,[["render",hG],["__file","focus-trap.vue"]]),Ts="top",oi="bottom",ai="right",Cs="left",f1="auto",tf=[Ts,oi,ai,Cs],Tu="start",Td="end",pG="clippingParents",RR="viewport",yc="popper",mG="reference",MT=tf.reduce(function(t,e){return t.concat([e+"-"+Tu,e+"-"+Td])},[]),jo=[].concat(tf,[f1]).reduce(function(t,e){return t.concat([e,e+"-"+Tu,e+"-"+Td])},[]),gG="beforeRead",vG="read",yG="afterRead",bG="beforeMain",SG="main",wG="afterMain",EG="beforeWrite",xG="write",TG="afterWrite",CG=[gG,vG,yG,bG,SG,wG,EG,xG,TG];function no(t){return t?(t.nodeName||"").toLowerCase():null}function Ri(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Cu(t){var e=Ri(t).Element;return t instanceof e||t instanceof Element}function ni(t){var e=Ri(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function h1(t){if(typeof ShadowRoot>"u")return!1;var e=Ri(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function kG(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},i=e.elements[n];!ni(i)||!no(i)||(Object.assign(i.style,r),Object.keys(s).forEach(function(o){var a=s[o];a===!1?i.removeAttribute(o):i.setAttribute(o,a===!0?"":a)}))})}function _G(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],i=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(u,l){return u[l]="",u},{});!ni(s)||!no(s)||(Object.assign(s.style,a),Object.keys(i).forEach(function(u){s.removeAttribute(u)}))})}}var LR={name:"applyStyles",enabled:!0,phase:"write",fn:kG,effect:_G,requires:["computeStyles"]};function Yi(t){return t.split("-")[0]}var il=Math.max,Op=Math.min,ku=Math.round;function _u(t,e){e===void 0&&(e=!1);var n=t.getBoundingClientRect(),r=1,s=1;if(ni(t)&&e){var i=t.offsetHeight,o=t.offsetWidth;o>0&&(r=ku(n.width)/o||1),i>0&&(s=ku(n.height)/i||1)}return{width:n.width/r,height:n.height/s,top:n.top/s,right:n.right/r,bottom:n.bottom/s,left:n.left/r,x:n.left/r,y:n.top/s}}function p1(t){var e=_u(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function PR(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&h1(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Po(t){return Ri(t).getComputedStyle(t)}function AG(t){return["table","td","th"].indexOf(no(t))>=0}function Da(t){return((Cu(t)?t.ownerDocument:t.document)||window.document).documentElement}function Um(t){return no(t)==="html"?t:t.assignedSlot||t.parentNode||(h1(t)?t.host:null)||Da(t)}function NT(t){return!ni(t)||Po(t).position==="fixed"?null:t.offsetParent}function IG(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&ni(t)){var r=Po(t);if(r.position==="fixed")return null}var s=Um(t);for(h1(s)&&(s=s.host);ni(s)&&["html","body"].indexOf(no(s))<0;){var i=Po(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function nf(t){for(var e=Ri(t),n=NT(t);n&&AG(n)&&Po(n).position==="static";)n=NT(n);return n&&(no(n)==="html"||no(n)==="body"&&Po(n).position==="static")?e:n||IG(t)||e}function m1(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Wc(t,e,n){return il(t,Op(e,n))}function RG(t,e,n){var r=Wc(t,e,n);return r>n?n:r}function DR(){return{top:0,right:0,bottom:0,left:0}}function OR(t){return Object.assign({},DR(),t)}function $R(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var LG=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,OR(typeof t!="number"?t:$R(t,tf))};function PG(t){var e,n=t.state,r=t.name,s=t.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Yi(n.placement),u=m1(a),l=[Cs,ai].indexOf(a)>=0,c=l?"height":"width";if(!(!i||!o)){var d=LG(s.padding,n),f=p1(i),h=u==="y"?Ts:Cs,p=u==="y"?oi:ai,g=n.rects.reference[c]+n.rects.reference[u]-o[u]-n.rects.popper[c],v=o[u]-n.rects.reference[u],y=nf(i),w=y?u==="y"?y.clientHeight||0:y.clientWidth||0:0,b=g/2-v/2,S=d[h],E=w-f[c]-d[p],x=w/2-f[c]/2+b,k=Wc(S,x,E),A=u;n.modifiersData[r]=(e={},e[A]=k,e.centerOffset=k-x,e)}}function DG(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||!PR(e.elements.popper,s)||(e.elements.arrow=s))}var OG={name:"arrow",enabled:!0,phase:"main",fn:PG,effect:DG,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Au(t){return t.split("-")[1]}var $G={top:"auto",right:"auto",bottom:"auto",left:"auto"};function MG(t){var e=t.x,n=t.y,r=window,s=r.devicePixelRatio||1;return{x:ku(e*s)/s||0,y:ku(n*s)/s||0}}function FT(t){var e,n=t.popper,r=t.popperRect,s=t.placement,i=t.variation,o=t.offsets,a=t.position,u=t.gpuAcceleration,l=t.adaptive,c=t.roundOffsets,d=t.isFixed,f=o.x,h=f===void 0?0:f,p=o.y,g=p===void 0?0:p,v=typeof c=="function"?c({x:h,y:g}):{x:h,y:g};h=v.x,g=v.y;var y=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),b=Cs,S=Ts,E=window;if(l){var x=nf(n),k="clientHeight",A="clientWidth";if(x===Ri(n)&&(x=Da(n),Po(x).position!=="static"&&a==="absolute"&&(k="scrollHeight",A="scrollWidth")),x=x,s===Ts||(s===Cs||s===ai)&&i===Td){S=oi;var C=d&&x===E&&E.visualViewport?E.visualViewport.height:x[k];g-=C-r.height,g*=u?1:-1}if(s===Cs||(s===Ts||s===oi)&&i===Td){b=ai;var _=d&&x===E&&E.visualViewport?E.visualViewport.width:x[A];h-=_-r.width,h*=u?1:-1}}var O=Object.assign({position:a},l&&$G),P=c===!0?MG({x:h,y:g}):{x:h,y:g};if(h=P.x,g=P.y,u){var U;return Object.assign({},O,(U={},U[S]=w?"0":"",U[b]=y?"0":"",U.transform=(E.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",U))}return Object.assign({},O,(e={},e[S]=w?g+"px":"",e[b]=y?h+"px":"",e.transform="",e))}function NG(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,i=n.adaptive,o=i===void 0?!0:i,a=n.roundOffsets,u=a===void 0?!0:a,l={placement:Yi(e.placement),variation:Au(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,FT(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,FT(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var MR={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:NG,data:{}},eh={passive:!0};function FG(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,i=s===void 0?!0:s,o=r.resize,a=o===void 0?!0:o,u=Ri(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&l.forEach(function(c){c.addEventListener("scroll",n.update,eh)}),a&&u.addEventListener("resize",n.update,eh),function(){i&&l.forEach(function(c){c.removeEventListener("scroll",n.update,eh)}),a&&u.removeEventListener("resize",n.update,eh)}}var NR={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:FG,data:{}},BG={left:"right",right:"left",bottom:"top",top:"bottom"};function Lh(t){return t.replace(/left|right|bottom|top/g,function(e){return BG[e]})}var VG={start:"end",end:"start"};function BT(t){return t.replace(/start|end/g,function(e){return VG[e]})}function g1(t){var e=Ri(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function v1(t){return _u(Da(t)).left+g1(t).scrollLeft}function UG(t){var e=Ri(t),n=Da(t),r=e.visualViewport,s=n.clientWidth,i=n.clientHeight,o=0,a=0;return r&&(s=r.width,i=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,a=r.offsetTop)),{width:s,height:i,x:o+v1(t),y:a}}function HG(t){var e,n=Da(t),r=g1(t),s=(e=t.ownerDocument)==null?void 0:e.body,i=il(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=il(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+v1(t),u=-r.scrollTop;return Po(s||n).direction==="rtl"&&(a+=il(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:a,y:u}}function y1(t){var e=Po(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function FR(t){return["html","body","#document"].indexOf(no(t))>=0?t.ownerDocument.body:ni(t)&&y1(t)?t:FR(Um(t))}function Gc(t,e){var n;e===void 0&&(e=[]);var r=FR(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=Ri(r),o=s?[i].concat(i.visualViewport||[],y1(r)?r:[]):r,a=e.concat(o);return s?a:a.concat(Gc(Um(o)))}function N0(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function jG(t){var e=_u(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function VT(t,e){return e===RR?N0(UG(t)):Cu(e)?jG(e):N0(HG(Da(t)))}function KG(t){var e=Gc(Um(t)),n=["absolute","fixed"].indexOf(Po(t).position)>=0,r=n&&ni(t)?nf(t):t;return Cu(r)?e.filter(function(s){return Cu(s)&&PR(s,r)&&no(s)!=="body"}):[]}function zG(t,e,n){var r=e==="clippingParents"?KG(t):[].concat(e),s=[].concat(r,[n]),i=s[0],o=s.reduce(function(a,u){var l=VT(t,u);return a.top=il(l.top,a.top),a.right=Op(l.right,a.right),a.bottom=Op(l.bottom,a.bottom),a.left=il(l.left,a.left),a},VT(t,i));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function BR(t){var e=t.reference,n=t.element,r=t.placement,s=r?Yi(r):null,i=r?Au(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,u;switch(s){case Ts:u={x:o,y:e.y-n.height};break;case oi:u={x:o,y:e.y+e.height};break;case ai:u={x:e.x+e.width,y:a};break;case Cs:u={x:e.x-n.width,y:a};break;default:u={x:e.x,y:e.y}}var l=s?m1(s):null;if(l!=null){var c=l==="y"?"height":"width";switch(i){case Tu:u[l]=u[l]-(e[c]/2-n[c]/2);break;case Td:u[l]=u[l]+(e[c]/2-n[c]/2);break}}return u}function Cd(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,i=n.boundary,o=i===void 0?pG:i,a=n.rootBoundary,u=a===void 0?RR:a,l=n.elementContext,c=l===void 0?yc:l,d=n.altBoundary,f=d===void 0?!1:d,h=n.padding,p=h===void 0?0:h,g=OR(typeof p!="number"?p:$R(p,tf)),v=c===yc?mG:yc,y=t.rects.popper,w=t.elements[f?v:c],b=zG(Cu(w)?w:w.contextElement||Da(t.elements.popper),o,u),S=_u(t.elements.reference),E=BR({reference:S,element:y,placement:s}),x=N0(Object.assign({},y,E)),k=c===yc?x:S,A={top:b.top-k.top+g.top,bottom:k.bottom-b.bottom+g.bottom,left:b.left-k.left+g.left,right:k.right-b.right+g.right},C=t.modifiersData.offset;if(c===yc&&C){var _=C[s];Object.keys(A).forEach(function(O){var P=[ai,oi].indexOf(O)>=0?1:-1,U=[Ts,oi].indexOf(O)>=0?"y":"x";A[O]+=_[U]*P})}return A}function WG(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,i=n.rootBoundary,o=n.padding,a=n.flipVariations,u=n.allowedAutoPlacements,l=u===void 0?jo:u,c=Au(r),d=c?a?MT:MT.filter(function(p){return Au(p)===c}):tf,f=d.filter(function(p){return l.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,g){return p[g]=Cd(t,{placement:g,boundary:s,rootBoundary:i,padding:o})[Yi(g)],p},{});return Object.keys(h).sort(function(p,g){return h[p]-h[g]})}function GG(t){if(Yi(t)===f1)return[];var e=Lh(t);return[BT(t),e,BT(e)]}function qG(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!0:o,u=n.fallbackPlacements,l=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,g=n.allowedAutoPlacements,v=e.options.placement,y=Yi(v),w=y===v,b=u||(w||!p?[Lh(v)]:GG(v)),S=[v].concat(b).reduce(function(te,ue){return te.concat(Yi(ue)===f1?WG(e,{placement:ue,boundary:c,rootBoundary:d,padding:l,flipVariations:p,allowedAutoPlacements:g}):ue)},[]),E=e.rects.reference,x=e.rects.popper,k=new Map,A=!0,C=S[0],_=0;_<S.length;_++){var O=S[_],P=Yi(O),U=Au(O)===Tu,j=[Ts,oi].indexOf(P)>=0,N=j?"width":"height",R=Cd(e,{placement:O,boundary:c,rootBoundary:d,altBoundary:f,padding:l}),V=j?U?ai:Cs:U?oi:Ts;E[N]>x[N]&&(V=Lh(V));var D=Lh(V),M=[];if(i&&M.push(R[P]<=0),a&&M.push(R[V]<=0,R[D]<=0),M.every(function(te){return te})){C=O,A=!1;break}k.set(O,M)}if(A)for(var K=p?3:1,q=function(te){var ue=S.find(function(he){var Z=k.get(he);if(Z)return Z.slice(0,te).every(function(ce){return ce})});if(ue)return C=ue,"break"},ee=K;ee>0;ee--){var X=q(ee);if(X==="break")break}e.placement!==C&&(e.modifiersData[r]._skip=!0,e.placement=C,e.reset=!0)}}var YG={name:"flip",enabled:!0,phase:"main",fn:qG,requiresIfExists:["offset"],data:{_skip:!1}};function UT(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function HT(t){return[Ts,ai,oi,Cs].some(function(e){return t[e]>=0})}function XG(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,i=e.modifiersData.preventOverflow,o=Cd(e,{elementContext:"reference"}),a=Cd(e,{altBoundary:!0}),u=UT(o,r),l=UT(a,s,i),c=HT(u),d=HT(l);e.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}var QG={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:XG};function ZG(t,e,n){var r=Yi(t),s=[Cs,Ts].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=i[0],a=i[1];return o=o||0,a=(a||0)*s,[Cs,ai].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function JG(t){var e=t.state,n=t.options,r=t.name,s=n.offset,i=s===void 0?[0,0]:s,o=jo.reduce(function(c,d){return c[d]=ZG(d,e.rects,i),c},{}),a=o[e.placement],u=a.x,l=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=l),e.modifiersData[r]=o}var eq={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:JG};function tq(t){var e=t.state,n=t.name;e.modifiersData[n]=BR({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}var VR={name:"popperOffsets",enabled:!0,phase:"read",fn:tq,data:{}};function nq(t){return t==="x"?"y":"x"}function rq(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!1:o,u=n.boundary,l=n.rootBoundary,c=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,p=n.tetherOffset,g=p===void 0?0:p,v=Cd(e,{boundary:u,rootBoundary:l,padding:d,altBoundary:c}),y=Yi(e.placement),w=Au(e.placement),b=!w,S=m1(y),E=nq(S),x=e.modifiersData.popperOffsets,k=e.rects.reference,A=e.rects.popper,C=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,_=typeof C=="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,P={x:0,y:0};if(x){if(i){var U,j=S==="y"?Ts:Cs,N=S==="y"?oi:ai,R=S==="y"?"height":"width",V=x[S],D=V+v[j],M=V-v[N],K=h?-A[R]/2:0,q=w===Tu?k[R]:A[R],ee=w===Tu?-A[R]:-k[R],X=e.elements.arrow,te=h&&X?p1(X):{width:0,height:0},ue=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:DR(),he=ue[j],Z=ue[N],ce=Wc(0,k[R],te[R]),ae=b?k[R]/2-K-ce-he-_.mainAxis:q-ce-he-_.mainAxis,Te=b?-k[R]/2+K+ce+Z+_.mainAxis:ee+ce+Z+_.mainAxis,Ce=e.elements.arrow&&nf(e.elements.arrow),z=Ce?S==="y"?Ce.clientTop||0:Ce.clientLeft||0:0,re=(U=O==null?void 0:O[S])!=null?U:0,ve=V+ae-re-z,ke=V+Te-re,Ee=Wc(h?Op(D,ve):D,V,h?il(M,ke):M);x[S]=Ee,P[S]=Ee-V}if(a){var be,Se=S==="x"?Ts:Cs,_e=S==="x"?oi:ai,Ne=x[E],Me=E==="y"?"height":"width",st=Ne+v[Se],qe=Ne-v[_e],Ae=[Ts,Cs].indexOf(y)!==-1,et=(be=O==null?void 0:O[E])!=null?be:0,St=Ae?st:Ne-k[Me]-A[Me]-et+_.altAxis,Lt=Ae?Ne+k[Me]+A[Me]-et-_.altAxis:qe,Pt=h&&Ae?RG(St,Ne,Lt):Wc(h?St:st,Ne,h?Lt:qe);x[E]=Pt,P[E]=Pt-Ne}e.modifiersData[r]=P}}var sq={name:"preventOverflow",enabled:!0,phase:"main",fn:rq,requiresIfExists:["offset"]};function iq(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function oq(t){return t===Ri(t)||!ni(t)?g1(t):iq(t)}function aq(t){var e=t.getBoundingClientRect(),n=ku(e.width)/t.offsetWidth||1,r=ku(e.height)/t.offsetHeight||1;return n!==1||r!==1}function lq(t,e,n){n===void 0&&(n=!1);var r=ni(e),s=ni(e)&&aq(e),i=Da(e),o=_u(t,s),a={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&((no(e)!=="body"||y1(i))&&(a=oq(e)),ni(e)?(u=_u(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):i&&(u.x=v1(i))),{x:o.left+a.scrollLeft-u.x,y:o.top+a.scrollTop-u.y,width:o.width,height:o.height}}function uq(t){var e=new Map,n=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function s(i){n.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var u=e.get(a);u&&s(u)}}),r.push(i)}return t.forEach(function(i){n.has(i.name)||s(i)}),r}function cq(t){var e=uq(t);return CG.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function dq(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function fq(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var jT={placement:"bottom",modifiers:[],strategy:"absolute"};function KT(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function b1(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,i=s===void 0?jT:s;return function(o,a,u){u===void 0&&(u=i);var l={placement:"bottom",orderedModifiers:[],options:Object.assign({},jT,i),modifiersData:{},elements:{reference:o,popper:a},attributes:{},styles:{}},c=[],d=!1,f={state:l,setOptions:function(g){var v=typeof g=="function"?g(l.options):g;p(),l.options=Object.assign({},i,l.options,v),l.scrollParents={reference:Cu(o)?Gc(o):o.contextElement?Gc(o.contextElement):[],popper:Gc(a)};var y=cq(fq([].concat(r,l.options.modifiers)));return l.orderedModifiers=y.filter(function(w){return w.enabled}),h(),f.update()},forceUpdate:function(){if(!d){var g=l.elements,v=g.reference,y=g.popper;if(KT(v,y)){l.rects={reference:lq(v,nf(y),l.options.strategy==="fixed"),popper:p1(y)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach(function(A){return l.modifiersData[A.name]=Object.assign({},A.data)});for(var w=0;w<l.orderedModifiers.length;w++){if(l.reset===!0){l.reset=!1,w=-1;continue}var b=l.orderedModifiers[w],S=b.fn,E=b.options,x=E===void 0?{}:E,k=b.name;typeof S=="function"&&(l=S({state:l,options:x,name:k,instance:f})||l)}}}},update:dq(function(){return new Promise(function(g){f.forceUpdate(),g(l)})}),destroy:function(){p(),d=!0}};if(!KT(o,a))return f;f.setOptions(u).then(function(g){!d&&u.onFirstUpdate&&u.onFirstUpdate(g)});function h(){l.orderedModifiers.forEach(function(g){var v=g.name,y=g.options,w=y===void 0?{}:y,b=g.effect;if(typeof b=="function"){var S=b({state:l,name:v,instance:f,options:w}),E=function(){};c.push(S||E)}})}function p(){c.forEach(function(g){return g()}),c=[]}return f}}b1();var hq=[NR,VR,MR,LR];b1({defaultModifiers:hq});var pq=[NR,VR,MR,LR,eq,YG,sq,OG,QG],mq=b1({defaultModifiers:pq});const UR=Ke({arrowOffset:{type:Number,default:5}}),gq=["fixed","absolute"],vq=Ke({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:de(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:jo,default:"bottom"},popperOptions:{type:de(Object),default:()=>({})},strategy:{type:String,values:gq,default:"absolute"}}),HR=Ke({...vq,...UR,id:String,style:{type:de([String,Array,Object])},className:{type:de([String,Array,Object])},effect:{type:de(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:de([String,Array,Object])},popperStyle:{type:de([String,Array,Object])},referenceEl:{type:de(Object)},triggerTargetEl:{type:de(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...$r(["ariaLabel"])}),yq={mouseenter:t=>t instanceof MouseEvent,mouseleave:t=>t instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},bq=(t,e)=>{const n=H(!1),r=H();return{focusStartRef:r,trapped:n,onFocusAfterReleased:l=>{var c;((c=l.detail)==null?void 0:c.focusReason)!=="pointer"&&(r.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:l=>{t.visible&&!n.value&&(l.target&&(r.value=l.target),n.value=!0)},onFocusoutPrevented:l=>{t.trapping||(l.detail.focusReason==="pointer"&&l.preventDefault(),n.value=!1)},onReleaseRequested:()=>{n.value=!1,e("close")}}},Sq=(t,e=[])=>{const{placement:n,strategy:r,popperOptions:s}=t,i={placement:n,strategy:r,...s,modifiers:[...Eq(t),...e]};return xq(i,s==null?void 0:s.modifiers),i},wq=t=>{if(on)return us(t)};function Eq(t){const{offset:e,gpuAcceleration:n,fallbackPlacements:r}=t;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:r}},{name:"computeStyles",options:{gpuAcceleration:n}}]}function xq(t,e){e&&(t.modifiers=[...t.modifiers,...e??[]])}const Tq=(t,e,n={})=>{const r={name:"updateState",enabled:!0,phase:"write",fn:({state:u})=>{const l=Cq(u);Object.assign(o.value,l)},requires:["computeStyles"]},s=L(()=>{const{onFirstUpdate:u,placement:l,strategy:c,modifiers:d}=m(n);return{onFirstUpdate:u,placement:l||"bottom",strategy:c||"absolute",modifiers:[...d||[],r,{name:"applyStyles",enabled:!1}]}}),i=On(),o=H({styles:{popper:{position:m(s).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),a=()=>{i.value&&(i.value.destroy(),i.value=void 0)};return Ie(s,u=>{const l=m(i);l&&l.setOptions(u)},{deep:!0}),Ie([t,e],([u,l])=>{a(),!(!u||!l)&&(i.value=mq(u,l,m(s)))}),In(()=>{a()}),{state:L(()=>{var u;return{...((u=m(i))==null?void 0:u.state)||{}}}),styles:L(()=>m(o).styles),attributes:L(()=>m(o).attributes),update:()=>{var u;return(u=m(i))==null?void 0:u.update()},forceUpdate:()=>{var u;return(u=m(i))==null?void 0:u.forceUpdate()},instanceRef:L(()=>m(i))}};function Cq(t){const e=Object.keys(t.elements),n=xd(e.map(s=>[s,t.styles[s]||{}])),r=xd(e.map(s=>[s,t.attributes[s]]));return{styles:n,attributes:r}}const kq=0,_q=t=>{const{popperInstanceRef:e,contentRef:n,triggerRef:r,role:s}=nt(l1,void 0),i=H(),o=L(()=>t.arrowOffset),a=L(()=>({name:"eventListeners",enabled:!!t.visible})),u=L(()=>{var y;const w=m(i),b=(y=m(o))!=null?y:kq;return{name:"arrow",enabled:!XI(w),options:{element:w,padding:b}}}),l=L(()=>({onFirstUpdate:()=>{p()},...Sq(t,[m(u),m(a)])})),c=L(()=>wq(t.referenceEl)||m(r)),{attributes:d,state:f,styles:h,update:p,forceUpdate:g,instanceRef:v}=Tq(c,n,l);return Ie(v,y=>e.value=y,{flush:"sync"}),Ft(()=>{Ie(()=>{var y;return(y=m(c))==null?void 0:y.getBoundingClientRect()},()=>{p()})}),{attributes:d,arrowRef:i,contentRef:n,instanceRef:v,state:f,styles:h,role:s,forceUpdate:g,update:p}},Aq=(t,{attributes:e,styles:n,role:r})=>{const{nextZIndex:s}=Gu(),i=Oe("popper"),o=L(()=>m(e).popper),a=H(vt(t.zIndex)?t.zIndex:s()),u=L(()=>[i.b(),i.is("pure",t.pure),i.is(t.effect),t.popperClass]),l=L(()=>[{zIndex:m(a)},m(n).popper,t.popperStyle||{}]),c=L(()=>r.value==="dialog"?"false":void 0),d=L(()=>m(n).arrow||{});return{ariaModal:c,arrowStyle:d,contentAttrs:o,contentClass:u,contentStyle:l,contentZIndex:a,updateZIndex:()=>{a.value=vt(t.zIndex)?t.zIndex:s()}}},Iq=se({name:"ElPopperContent"}),Rq=se({...Iq,props:HR,emits:yq,setup(t,{expose:e,emit:n}){const r=t,{focusStartRef:s,trapped:i,onFocusAfterReleased:o,onFocusAfterTrapped:a,onFocusInTrap:u,onFocusoutPrevented:l,onReleaseRequested:c}=bq(r,n),{attributes:d,arrowRef:f,contentRef:h,styles:p,instanceRef:g,role:v,update:y}=_q(r),{ariaModal:w,arrowStyle:b,contentAttrs:S,contentClass:E,contentStyle:x,updateZIndex:k}=Aq(r,{styles:p,attributes:d,role:v}),A=nt(to,void 0);Jt(SR,{arrowStyle:b,arrowRef:f}),A&&Jt(to,{...A,addInputId:xn,removeInputId:xn});let C;const _=(P=!0)=>{y(),P&&k()},O=()=>{_(!1),r.visible&&r.focusOnShow?i.value=!0:r.visible===!1&&(i.value=!1)};return Ft(()=>{Ie(()=>r.triggerTargetEl,(P,U)=>{C==null||C(),C=void 0;const j=m(P||h.value),N=m(U||h.value);ds(j)&&(C=Ie([v,()=>r.ariaLabel,w,()=>r.id],R=>{["role","aria-label","aria-modal","id"].forEach((V,D)=>{Sr(R[D])?j.removeAttribute(V):j.setAttribute(V,R[D])})},{immediate:!0})),N!==j&&ds(N)&&["role","aria-label","aria-modal","id"].forEach(R=>{N.removeAttribute(R)})},{immediate:!0}),Ie(()=>r.visible,O,{immediate:!0})}),In(()=>{C==null||C(),C=void 0}),e({popperContentRef:h,popperInstanceRef:g,updatePopper:_,contentStyle:x}),(P,U)=>($(),Y("div",Yt({ref_key:"contentRef",ref:h},m(S),{style:m(x),class:m(E),tabindex:"-1",onMouseenter:j=>P.$emit("mouseenter",j),onMouseleave:j=>P.$emit("mouseleave",j)}),[ie(m(Yu),{trapped:m(i),"trap-on-focus-in":!0,"focus-trap-el":m(h),"focus-start-el":m(s),onFocusAfterTrapped:m(a),onFocusAfterReleased:m(o),onFocusin:m(u),onFocusoutPrevented:m(l),onReleaseRequested:m(c)},{default:le(()=>[pe(P.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var Lq=We(Rq,[["__file","content.vue"]]);const jR=Dt(KW),Hm=Symbol("elTooltip");function zT(){let t;const e=(r,s)=>{n(),t=window.setTimeout(r,s)},n=()=>window.clearTimeout(t);return Qd(()=>n()),{registerTimeout:e,cancelTimeout:n}}const Pq=Ke({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),Dq=({showAfter:t,hideAfter:e,autoClose:n,open:r,close:s})=>{const{registerTimeout:i}=zT(),{registerTimeout:o,cancelTimeout:a}=zT();return{onOpen:c=>{i(()=>{r(c);const d=m(n);vt(d)&&d>0&&o(()=>{s(c)},d)},m(t))},onClose:c=>{a(),i(()=>{s(c)},m(e))}}},jm=Ke({to:{type:de([String,Object]),required:!0},disabled:Boolean}),nr=Ke({...Pq,...HR,appendTo:{type:jm.to.type},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:de(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...$r(["ariaLabel"])}),ou=Ke({...xR,disabled:Boolean,trigger:{type:de([String,Array]),default:"hover"},triggerKeys:{type:de(Array),default:()=>[it.enter,it.numpadEnter,it.space]}}),Oq=Ii({type:de(Boolean),default:null}),$q=Ii({type:de(Function)}),Mq=t=>{const e=`update:${t}`,n=`onUpdate:${t}`,r=[e],s={[t]:Oq,[n]:$q};return{useModelToggle:({indicator:o,toggleReason:a,shouldHideWhenRouteChanges:u,shouldProceed:l,onShow:c,onHide:d})=>{const f=Kt(),{emit:h}=f,p=f.props,g=L(()=>pt(p[n])),v=L(()=>p[t]===null),y=k=>{o.value!==!0&&(o.value=!0,a&&(a.value=k),pt(c)&&c(k))},w=k=>{o.value!==!1&&(o.value=!1,a&&(a.value=k),pt(d)&&d(k))},b=k=>{if(p.disabled===!0||pt(l)&&!l())return;const A=g.value&&on;A&&h(e,!0),(v.value||!A)&&y(k)},S=k=>{if(p.disabled===!0||!on)return;const A=g.value&&on;A&&h(e,!1),(v.value||!A)&&w(k)},E=k=>{wn(k)&&(p.disabled&&k?g.value&&h(e,!1):o.value!==k&&(k?y():w()))},x=()=>{o.value?S():b()};return Ie(()=>p[t],E),u&&f.appContext.config.globalProperties.$route!==void 0&&Ie(()=>({...f.proxy.$route}),()=>{u.value&&o.value&&S()}),Ft(()=>{E(p[t])}),{hide:S,show:b,toggle:x,hasUpdateHandler:g}},useModelToggleProps:s,useModelToggleEmits:r}},{useModelToggleProps:Nq,useModelToggleEmits:Fq,useModelToggle:Bq}=Mq("visible"),Vq=Ke({...ER,...Nq,...nr,...ou,...UR,showArrow:{type:Boolean,default:!0}}),Uq=[...Fq,"before-show","before-hide","show","hide","open","close"],Hq=(t,e)=>Ve(t)?t.includes(e):t===e,Ol=(t,e,n)=>r=>{Hq(m(t),e)&&n(r)},Jn=(t,e,{checkForDefaultPrevented:n=!0}={})=>s=>{const i=t==null?void 0:t(s);if(n===!1||!i)return e==null?void 0:e(s)},WT=t=>e=>e.pointerType==="mouse"?t(e):void 0,jq=se({name:"ElTooltipTrigger"}),Kq=se({...jq,props:ou,setup(t,{expose:e}){const n=t,r=Oe("tooltip"),{controlled:s,id:i,open:o,onOpen:a,onClose:u,onToggle:l}=nt(Hm,void 0),c=H(null),d=()=>{if(m(s)||n.disabled)return!0},f=En(n,"trigger"),h=Jn(d,Ol(f,"hover",a)),p=Jn(d,Ol(f,"hover",u)),g=Jn(d,Ol(f,"click",S=>{S.button===0&&l(S)})),v=Jn(d,Ol(f,"focus",a)),y=Jn(d,Ol(f,"focus",u)),w=Jn(d,Ol(f,"contextmenu",S=>{S.preventDefault(),l(S)})),b=Jn(d,S=>{const{code:E}=S;n.triggerKeys.includes(E)&&(S.preventDefault(),l(S))});return e({triggerRef:c}),(S,E)=>($(),ye(m(tG),{id:m(i),"virtual-ref":S.virtualRef,open:m(o),"virtual-triggering":S.virtualTriggering,class:F(m(r).e("trigger")),onBlur:m(y),onClick:m(g),onContextmenu:m(w),onFocus:m(v),onMouseenter:m(h),onMouseleave:m(p),onKeydown:m(b)},{default:le(()=>[pe(S.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var zq=We(Kq,[["__file","trigger.vue"]]);const Wq=se({__name:"teleport",props:jm,setup(t){return(e,n)=>e.disabled?pe(e.$slots,"default",{key:0}):($(),ye(g$,{key:1,to:e.to},[pe(e.$slots,"default")],8,["to"]))}});var Gq=We(Wq,[["__file","teleport.vue"]]);const Xu=Dt(Gq),KR=()=>{const t=Mb(),e=i1(),n=L(()=>`${t.value}-popper-container-${e.prefix}`),r=L(()=>`#${n.value}`);return{id:n,selector:r}},qq=t=>{const e=document.createElement("div");return e.id=t,document.body.appendChild(e),e},Yq=()=>{const{id:t,selector:e}=KR();return cm(()=>{on&&(document.body.querySelector(e.value)||qq(t.value))}),{id:t,selector:e}},Xq=se({name:"ElTooltipContent",inheritAttrs:!1}),Qq=se({...Xq,props:nr,setup(t,{expose:e}){const n=t,{selector:r}=KR(),s=Oe("tooltip"),i=H(),o=Rp(()=>{var D;return(D=i.value)==null?void 0:D.popperContentRef});let a;const{controlled:u,id:l,open:c,trigger:d,onClose:f,onOpen:h,onShow:p,onHide:g,onBeforeShow:v,onBeforeHide:y}=nt(Hm,void 0),w=L(()=>n.transition||`${s.namespace.value}-fade-in-linear`),b=L(()=>n.persistent);In(()=>{a==null||a()});const S=L(()=>m(b)?!0:m(c)),E=L(()=>n.disabled?!1:m(c)),x=L(()=>n.appendTo||r.value),k=L(()=>{var D;return(D=n.style)!=null?D:{}}),A=H(!0),C=()=>{g(),V()&&yo(document.body),A.value=!0},_=()=>{if(m(u))return!0},O=Jn(_,()=>{n.enterable&&m(d)==="hover"&&h()}),P=Jn(_,()=>{m(d)==="hover"&&f()}),U=()=>{var D,M;(M=(D=i.value)==null?void 0:D.updatePopper)==null||M.call(D),v==null||v()},j=()=>{y==null||y()},N=()=>{p()},R=()=>{n.virtualTriggering||f()},V=D=>{var M;const K=(M=i.value)==null?void 0:M.popperContentRef,q=(D==null?void 0:D.relatedTarget)||document.activeElement;return K==null?void 0:K.contains(q)};return Ie(()=>m(c),D=>{D?(A.value=!1,a=Jb(o,()=>{if(m(u))return;m(d)!=="hover"&&f()})):a==null||a()},{flush:"post"}),Ie(()=>n.content,()=>{var D,M;(M=(D=i.value)==null?void 0:D.updatePopper)==null||M.call(D)}),e({contentRef:i,isFocusInsideContent:V}),(D,M)=>($(),ye(m(Xu),{disabled:!D.teleported,to:m(x)},{default:le(()=>[ie(Ar,{name:m(w),onAfterLeave:C,onBeforeEnter:U,onAfterEnter:N,onBeforeLeave:j},{default:le(()=>[m(S)?Ot(($(),ye(m(Lq),Yt({key:0,id:m(l),ref_key:"contentRef",ref:i},D.$attrs,{"aria-label":D.ariaLabel,"aria-hidden":A.value,"boundaries-padding":D.boundariesPadding,"fallback-placements":D.fallbackPlacements,"gpu-acceleration":D.gpuAcceleration,offset:D.offset,placement:D.placement,"popper-options":D.popperOptions,"arrow-offset":D.arrowOffset,strategy:D.strategy,effect:D.effect,enterable:D.enterable,pure:D.pure,"popper-class":D.popperClass,"popper-style":[D.popperStyle,m(k)],"reference-el":D.referenceEl,"trigger-target-el":D.triggerTargetEl,visible:m(E),"z-index":D.zIndex,onMouseenter:m(O),onMouseleave:m(P),onBlur:R,onClose:m(f)}),{default:le(()=>[pe(D.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","arrow-offset","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[cn,m(E)]]):ge("v-if",!0)]),_:3},8,["name"])]),_:3},8,["disabled","to"]))}});var Zq=We(Qq,[["__file","content.vue"]]);const Jq=se({name:"ElTooltip"}),eY=se({...Jq,props:Vq,emits:Uq,setup(t,{expose:e,emit:n}){const r=t;Yq();const s=Oe("tooltip"),i=Or(),o=H(),a=H(),u=()=>{var b;const S=m(o);S&&((b=S.popperInstanceRef)==null||b.update())},l=H(!1),c=H(),{show:d,hide:f,hasUpdateHandler:h}=Bq({indicator:l,toggleReason:c}),{onOpen:p,onClose:g}=Dq({showAfter:En(r,"showAfter"),hideAfter:En(r,"hideAfter"),autoClose:En(r,"autoClose"),open:d,close:f}),v=L(()=>wn(r.visible)&&!h.value),y=L(()=>[s.b(),r.popperClass]);Jt(Hm,{controlled:v,id:i,open:Bu(l),trigger:En(r,"trigger"),onOpen:b=>{p(b)},onClose:b=>{g(b)},onToggle:b=>{m(l)?g(b):p(b)},onShow:()=>{n("show",c.value)},onHide:()=>{n("hide",c.value)},onBeforeShow:()=>{n("before-show",c.value)},onBeforeHide:()=>{n("before-hide",c.value)},updatePopper:u}),Ie(()=>r.disabled,b=>{b&&l.value&&(l.value=!1)});const w=b=>{var S;return(S=a.value)==null?void 0:S.isFocusInsideContent(b)};return c_(()=>l.value&&f()),e({popperRef:o,contentRef:a,isFocusInsideContent:w,updatePopper:u,onOpen:p,onClose:g,hide:f}),(b,S)=>($(),ye(m(jR),{ref_key:"popperRef",ref:o,role:b.role},{default:le(()=>[ie(zq,{disabled:b.disabled,trigger:b.trigger,"trigger-keys":b.triggerKeys,"virtual-ref":b.virtualRef,"virtual-triggering":b.virtualTriggering},{default:le(()=>[b.$slots.default?pe(b.$slots,"default",{key:0}):ge("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),ie(Zq,{ref_key:"contentRef",ref:a,"aria-label":b.ariaLabel,"boundaries-padding":b.boundariesPadding,content:b.content,disabled:b.disabled,effect:b.effect,enterable:b.enterable,"fallback-placements":b.fallbackPlacements,"hide-after":b.hideAfter,"gpu-acceleration":b.gpuAcceleration,offset:b.offset,persistent:b.persistent,"popper-class":m(y),"popper-style":b.popperStyle,placement:b.placement,"popper-options":b.popperOptions,"arrow-offset":b.arrowOffset,pure:b.pure,"raw-content":b.rawContent,"reference-el":b.referenceEl,"trigger-target-el":b.triggerTargetEl,"show-after":b.showAfter,strategy:b.strategy,teleported:b.teleported,transition:b.transition,"virtual-triggering":b.virtualTriggering,"z-index":b.zIndex,"append-to":b.appendTo},{default:le(()=>[pe(b.$slots,"content",{},()=>[b.rawContent?($(),Y("span",{key:0,innerHTML:b.content},null,8,["innerHTML"])):($(),Y("span",{key:1},ze(b.content),1))]),b.showArrow?($(),ye(m(GW),{key:0})):ge("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","arrow-offset","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var tY=We(eY,[["__file","tooltip.vue"]]);const Vr=Dt(tY),nY=Ke({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:de(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:de([Function,Array]),default:xn},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},teleported:nr.teleported,appendTo:nr.appendTo,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String,...$r(["ariaLabel"])}),rY={[_t]:t=>ut(t),[dr]:t=>ut(t),[Xt]:t=>ut(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,select:t=>Bt(t)},zR="ElAutocomplete",sY=se({name:zR,inheritAttrs:!1}),iY=se({...sY,props:nY,emits:rY,setup(t,{expose:e,emit:n}){const r=t,s=Jd(),i=No(),o=Hr(),a=Oe("autocomplete"),u=H(),l=H(),c=H(),d=H();let f=!1,h=!1;const p=H([]),g=H(-1),v=H(""),y=H(!1),w=H(!1),b=H(!1),S=Or(),E=L(()=>i.style),x=L(()=>(p.value.length>0||b.value)&&y.value),k=L(()=>!r.hideLoading&&b.value),A=L(()=>u.value?Array.from(u.value.$el.querySelectorAll("input")):[]),C=()=>{x.value&&(v.value=`${u.value.$el.offsetWidth}px`)},_=()=>{g.value=-1},O=async Z=>{if(w.value)return;const ce=ae=>{b.value=!1,!w.value&&(Ve(ae)?(p.value=ae,g.value=r.highlightFirstItem?0:-1):lr(zR,"autocomplete suggestions must be an array"))};if(b.value=!0,Ve(r.fetchSuggestions))ce(r.fetchSuggestions);else{const ae=await r.fetchSuggestions(Z,ce);Ve(ae)&&ce(ae)}},P=_s(O,r.debounce),U=Z=>{const ce=!!Z;if(n(dr,Z),n(_t,Z),w.value=!1,y.value||(y.value=ce),!r.triggerOnFocus&&!Z){w.value=!0,p.value=[];return}P(Z)},j=Z=>{var ce;o.value||(((ce=Z.target)==null?void 0:ce.tagName)!=="INPUT"||A.value.includes(document.activeElement))&&(y.value=!0)},N=Z=>{n(Xt,Z)},R=Z=>{var ce;if(h)h=!1;else{y.value=!0,n("focus",Z);const ae=(ce=r.modelValue)!=null?ce:"";r.triggerOnFocus&&!f&&P(String(ae))}},V=Z=>{setTimeout(()=>{var ce;if((ce=c.value)!=null&&ce.isFocusInsideContent()){h=!0;return}y.value&&q(),n("blur",Z)})},D=()=>{y.value=!1,n(_t,""),n("clear")},M=async()=>{x.value&&g.value>=0&&g.value<p.value.length?te(p.value[g.value]):r.selectWhenUnmatched&&(n("select",{value:r.modelValue}),p.value=[],g.value=-1)},K=Z=>{x.value&&(Z.preventDefault(),Z.stopPropagation(),q())},q=()=>{y.value=!1},ee=()=>{var Z;(Z=u.value)==null||Z.focus()},X=()=>{var Z;(Z=u.value)==null||Z.blur()},te=async Z=>{n(dr,Z[r.valueKey]),n(_t,Z[r.valueKey]),n("select",Z),p.value=[],g.value=-1},ue=Z=>{if(!x.value||b.value)return;if(Z<0){g.value=-1;return}Z>=p.value.length&&(Z=p.value.length-1);const ce=l.value.querySelector(`.${a.be("suggestion","wrap")}`),Te=ce.querySelectorAll(`.${a.be("suggestion","list")} li`)[Z],Ce=ce.scrollTop,{offsetTop:z,scrollHeight:re}=Te;z+re>Ce+ce.clientHeight&&(ce.scrollTop+=re),z<Ce&&(ce.scrollTop-=re),g.value=Z,u.value.ref.setAttribute("aria-activedescendant",`${S.value}-item-${g.value}`)},he=Jb(d,()=>{var Z;(Z=c.value)!=null&&Z.isFocusInsideContent()||x.value&&q()});return In(()=>{he==null||he()}),Ft(()=>{u.value.ref.setAttribute("role","textbox"),u.value.ref.setAttribute("aria-autocomplete","list"),u.value.ref.setAttribute("aria-controls","id"),u.value.ref.setAttribute("aria-activedescendant",`${S.value}-item-${g.value}`),f=u.value.ref.hasAttribute("readonly")}),e({highlightedIndex:g,activated:y,loading:b,inputRef:u,popperRef:c,suggestions:p,handleSelect:te,handleKeyEnter:M,focus:ee,blur:X,close:q,highlight:ue,getData:O}),(Z,ce)=>($(),ye(m(Vr),{ref_key:"popperRef",ref:c,visible:m(x),placement:Z.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[m(a).e("popper"),Z.popperClass],teleported:Z.teleported,"append-to":Z.appendTo,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${m(a).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:C,onHide:_},{content:le(()=>[J("div",{ref_key:"regionRef",ref:l,class:F([m(a).b("suggestion"),m(a).is("loading",m(k))]),style:mt({[Z.fitInputWidth?"width":"minWidth"]:v.value,outline:"none"}),role:"region"},[ie(m(io),{id:m(S),tag:"ul","wrap-class":m(a).be("suggestion","wrap"),"view-class":m(a).be("suggestion","list"),role:"listbox"},{default:le(()=>[m(k)?($(),Y("li",{key:0},[pe(Z.$slots,"loading",{},()=>[ie(m(lt),{class:F(m(a).is("loading"))},{default:le(()=>[ie(m(Ji))]),_:1},8,["class"])])])):($(!0),Y(dt,{key:1},Zt(p.value,(ae,Te)=>($(),Y("li",{id:`${m(S)}-item-${Te}`,key:Te,class:F({highlighted:g.value===Te}),role:"option","aria-selected":g.value===Te,onClick:Ce=>te(ae)},[pe(Z.$slots,"default",{item:ae},()=>[Qt(ze(ae[Z.valueKey]),1)])],10,["id","aria-selected","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:le(()=>[J("div",{ref_key:"listboxRef",ref:d,class:F([m(a).b(),Z.$attrs.class]),style:mt(m(E)),role:"combobox","aria-haspopup":"listbox","aria-expanded":m(x),"aria-owns":m(S)},[ie(m(es),Yt({ref_key:"inputRef",ref:u},m(s),{clearable:Z.clearable,disabled:m(o),name:Z.name,"model-value":Z.modelValue,"aria-label":Z.ariaLabel,onInput:U,onChange:N,onFocus:R,onBlur:V,onClear:D,onKeydown:[Sn(wt(ae=>ue(g.value-1),["prevent"]),["up"]),Sn(wt(ae=>ue(g.value+1),["prevent"]),["down"]),Sn(M,["enter"]),Sn(q,["tab"]),Sn(K,["esc"])],onMousedown:j}),ks({_:2},[Z.$slots.prepend?{name:"prepend",fn:le(()=>[pe(Z.$slots,"prepend")])}:void 0,Z.$slots.append?{name:"append",fn:le(()=>[pe(Z.$slots,"append")])}:void 0,Z.$slots.prefix?{name:"prefix",fn:le(()=>[pe(Z.$slots,"prefix")])}:void 0,Z.$slots.suffix?{name:"suffix",fn:le(()=>[pe(Z.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","aria-label","onKeydown"])],14,["aria-expanded","aria-owns"])]),_:3},8,["visible","placement","popper-class","teleported","append-to","transition"]))}});var oY=We(iY,[["__file","autocomplete.vue"]]);const aY=Dt(oY),lY=Ke({size:{type:[Number,String],values:so,default:"",validator:t=>vt(t)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:Tn},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:de(String),default:"cover"}}),uY={error:t=>t instanceof Event},cY=se({name:"ElAvatar"}),dY=se({...cY,props:lY,emits:uY,setup(t,{emit:e}){const n=t,r=Oe("avatar"),s=H(!1),i=L(()=>{const{size:l,icon:c,shape:d}=n,f=[r.b()];return ut(l)&&f.push(r.m(l)),c&&f.push(r.m("icon")),d&&f.push(r.m(d)),f}),o=L(()=>{const{size:l}=n;return vt(l)?r.cssVarBlock({size:Xn(l)||""}):void 0}),a=L(()=>({objectFit:n.fit}));Ie(()=>n.src,()=>s.value=!1);function u(l){s.value=!0,e("error",l)}return(l,c)=>($(),Y("span",{class:F(m(i)),style:mt(m(o))},[(l.src||l.srcSet)&&!s.value?($(),Y("img",{key:0,src:l.src,alt:l.alt,srcset:l.srcSet,style:mt(m(a)),onError:u},null,44,["src","alt","srcset"])):l.icon?($(),ye(m(lt),{key:1},{default:le(()=>[($(),ye(jt(l.icon)))]),_:1})):pe(l.$slots,"default",{key:2})],6))}});var fY=We(dY,[["__file","avatar.vue"]]);const hY=Dt(fY),pY={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},mY={click:t=>t instanceof MouseEvent},gY=(t,e,n)=>{const r=On(),s=On(),i=H(!1),o=()=>{r.value&&(i.value=r.value.scrollTop>=t.visibilityHeight)},a=l=>{var c;(c=r.value)==null||c.scrollTo({top:0,behavior:"smooth"}),e("click",l)},u=eR(o,300,!0);return Cn(s,"scroll",u),Ft(()=>{var l;s.value=document,r.value=document.documentElement,t.target&&(r.value=(l=document.querySelector(t.target))!=null?l:void 0,r.value||lr(n,`target does not exist: ${t.target}`),s.value=r.value),o()}),{visible:i,handleClick:a}},WR="ElBacktop",vY=se({name:WR}),yY=se({...vY,props:pY,emits:mY,setup(t,{emit:e}){const n=t,r=Oe("backtop"),{handleClick:s,visible:i}=gY(n,e,WR),o=L(()=>({right:`${n.right}px`,bottom:`${n.bottom}px`}));return(a,u)=>($(),ye(Ar,{name:`${m(r).namespace.value}-fade-in`},{default:le(()=>[m(i)?($(),Y("div",{key:0,style:mt(m(o)),class:F(m(r).b()),onClick:wt(m(s),["stop"])},[pe(a.$slots,"default",{},()=>[ie(m(lt),{class:F(m(r).e("icon"))},{default:le(()=>[ie(m(vV))]),_:1},8,["class"])])],14,["onClick"])):ge("v-if",!0)]),_:3},8,["name"]))}});var bY=We(yY,[["__file","backtop.vue"]]);const SY=Dt(bY),wY=Ke({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:de([String,Object,Array])},offset:{type:de(Array),default:[0,0]},badgeClass:{type:String}}),EY=se({name:"ElBadge"}),xY=se({...EY,props:wY,setup(t,{expose:e}){const n=t,r=Oe("badge"),s=L(()=>n.isDot?"":vt(n.value)&&vt(n.max)?n.max<n.value?`${n.max}+`:`${n.value}`:`${n.value}`),i=L(()=>{var o,a,u,l,c;return[{backgroundColor:n.color,marginRight:Xn(-((a=(o=n.offset)==null?void 0:o[0])!=null?a:0)),marginTop:Xn((l=(u=n.offset)==null?void 0:u[1])!=null?l:0)},(c=n.badgeStyle)!=null?c:{}]});return e({content:s}),(o,a)=>($(),Y("div",{class:F(m(r).b())},[pe(o.$slots,"default"),ie(Ar,{name:`${m(r).namespace.value}-zoom-in-center`,persisted:""},{default:le(()=>[Ot(J("sup",{class:F([m(r).e("content"),m(r).em("content",o.type),m(r).is("fixed",!!o.$slots.default),m(r).is("dot",o.isDot),m(r).is("hide-zero",!o.showZero&&n.value===0),o.badgeClass]),style:mt(m(i))},[pe(o.$slots,"content",{value:m(s)},()=>[Qt(ze(m(s)),1)])],6),[[cn,!o.hidden&&(m(s)||o.isDot||o.$slots.content)]])]),_:3},8,["name"])],2))}});var TY=We(xY,[["__file","badge.vue"]]);const GR=Dt(TY),qR=Symbol("breadcrumbKey"),CY=Ke({separator:{type:String,default:"/"},separatorIcon:{type:Tn}}),kY=se({name:"ElBreadcrumb"}),_Y=se({...kY,props:CY,setup(t){const e=t,{t:n}=sn(),r=Oe("breadcrumb"),s=H();return Jt(qR,e),Ft(()=>{const i=s.value.querySelectorAll(`.${r.e("item")}`);i.length&&i[i.length-1].setAttribute("aria-current","page")}),(i,o)=>($(),Y("div",{ref_key:"breadcrumb",ref:s,class:F(m(r).b()),"aria-label":m(n)("el.breadcrumb.label"),role:"navigation"},[pe(i.$slots,"default")],10,["aria-label"]))}});var AY=We(_Y,[["__file","breadcrumb.vue"]]);const IY=Ke({to:{type:de([String,Object]),default:""},replace:Boolean}),RY=se({name:"ElBreadcrumbItem"}),LY=se({...RY,props:IY,setup(t){const e=t,n=Kt(),r=nt(qR,void 0),s=Oe("breadcrumb"),i=n.appContext.config.globalProperties.$router,o=H(),a=()=>{!e.to||!i||(e.replace?i.replace(e.to):i.push(e.to))};return(u,l)=>{var c,d;return $(),Y("span",{class:F(m(s).e("item"))},[J("span",{ref_key:"link",ref:o,class:F([m(s).e("inner"),m(s).is("link",!!u.to)]),role:"link",onClick:a},[pe(u.$slots,"default")],2),(c=m(r))!=null&&c.separatorIcon?($(),ye(m(lt),{key:0,class:F(m(s).e("separator"))},{default:le(()=>[($(),ye(jt(m(r).separatorIcon)))]),_:1},8,["class"])):($(),Y("span",{key:1,class:F(m(s).e("separator")),role:"presentation"},ze((d=m(r))==null?void 0:d.separator),3))],2)}}});var YR=We(LY,[["__file","breadcrumb-item.vue"]]);const PY=Dt(AY,{BreadcrumbItem:YR}),DY=Gn(YR),XR=Symbol("buttonGroupContextKey"),Ao=({from:t,replacement:e,scope:n,version:r,ref:s,type:i="API"},o)=>{Ie(()=>m(o),a=>{},{immediate:!0})},OY=(t,e)=>{Ao({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},L(()=>t.type==="text"));const n=nt(XR,void 0),r=Zd("button"),{form:s}=Ur(),i=ur(L(()=>n==null?void 0:n.size)),o=Hr(),a=H(),u=gr(),l=L(()=>{var v;return t.type||(n==null?void 0:n.type)||((v=r.value)==null?void 0:v.type)||""}),c=L(()=>{var v,y,w;return(w=(y=t.autoInsertSpace)!=null?y:(v=r.value)==null?void 0:v.autoInsertSpace)!=null?w:!1}),d=L(()=>{var v,y,w;return(w=(y=t.plain)!=null?y:(v=r.value)==null?void 0:v.plain)!=null?w:!1}),f=L(()=>{var v,y,w;return(w=(y=t.round)!=null?y:(v=r.value)==null?void 0:v.round)!=null?w:!1}),h=L(()=>t.tag==="button"?{ariaDisabled:o.value||t.loading,disabled:o.value||t.loading,autofocus:t.autofocus,type:t.nativeType}:{}),p=L(()=>{var v;const y=(v=u.default)==null?void 0:v.call(u);if(c.value&&(y==null?void 0:y.length)===1){const w=y[0];if((w==null?void 0:w.type)===Vu){const b=w.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(b.trim())}}return!1});return{_disabled:o,_size:i,_type:l,_ref:a,_props:h,_plain:d,_round:f,shouldAddSpace:p,handleClick:v=>{if(o.value||t.loading){v.stopPropagation();return}t.nativeType==="reset"&&(s==null||s.resetFields()),e("click",v)}}},F0=["default","primary","success","warning","info","danger","text",""],$Y=["button","submit","reset"],B0=Ke({size:fr,disabled:Boolean,type:{type:String,values:F0,default:""},icon:{type:Tn},nativeType:{type:String,values:$Y,default:"button"},loading:Boolean,loadingIcon:{type:Tn,default:()=>Ji},plain:{type:Boolean,default:void 0},text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:{type:Boolean,default:void 0},circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:de([String,Object]),default:"button"}}),MY={click:t=>t instanceof MouseEvent};function Br(t,e){NY(t)&&(t="100%");var n=FY(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function th(t){return Math.min(1,Math.max(0,t))}function NY(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function FY(t){return typeof t=="string"&&t.indexOf("%")!==-1}function QR(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function nh(t){return t<=1?"".concat(Number(t)*100,"%"):t}function Xa(t){return t.length===1?"0"+t:String(t)}function BY(t,e,n){return{r:Br(t,255)*255,g:Br(e,255)*255,b:Br(n,255)*255}}function GT(t,e,n){t=Br(t,255),e=Br(e,255),n=Br(n,255);var r=Math.max(t,e,n),s=Math.min(t,e,n),i=0,o=0,a=(r+s)/2;if(r===s)o=0,i=0;else{var u=r-s;switch(o=a>.5?u/(2-r-s):u/(r+s),r){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4;break}i/=6}return{h:i,s:o,l:a}}function Sv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*(6*n):n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function VY(t,e,n){var r,s,i;if(t=Br(t,360),e=Br(e,100),n=Br(n,100),e===0)s=n,i=n,r=n;else{var o=n<.5?n*(1+e):n+e-n*e,a=2*n-o;r=Sv(a,o,t+1/3),s=Sv(a,o,t),i=Sv(a,o,t-1/3)}return{r:r*255,g:s*255,b:i*255}}function qT(t,e,n){t=Br(t,255),e=Br(e,255),n=Br(n,255);var r=Math.max(t,e,n),s=Math.min(t,e,n),i=0,o=r,a=r-s,u=r===0?0:a/r;if(r===s)i=0;else{switch(r){case t:i=(e-n)/a+(e<n?6:0);break;case e:i=(n-t)/a+2;break;case n:i=(t-e)/a+4;break}i/=6}return{h:i,s:u,v:o}}function UY(t,e,n){t=Br(t,360)*6,e=Br(e,100),n=Br(n,100);var r=Math.floor(t),s=t-r,i=n*(1-e),o=n*(1-s*e),a=n*(1-(1-s)*e),u=r%6,l=[n,o,i,i,a,n][u],c=[a,n,n,o,i,i][u],d=[i,i,a,n,n,o][u];return{r:l*255,g:c*255,b:d*255}}function YT(t,e,n,r){var s=[Xa(Math.round(t).toString(16)),Xa(Math.round(e).toString(16)),Xa(Math.round(n).toString(16))];return r&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function HY(t,e,n,r,s){var i=[Xa(Math.round(t).toString(16)),Xa(Math.round(e).toString(16)),Xa(Math.round(n).toString(16)),Xa(jY(r))];return s&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))&&i[3].startsWith(i[3].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function jY(t){return Math.round(parseFloat(t)*255).toString(16)}function XT(t){return Ps(t)/255}function Ps(t){return parseInt(t,16)}function KY(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var V0={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function zY(t){var e={r:0,g:0,b:0},n=1,r=null,s=null,i=null,o=!1,a=!1;return typeof t=="string"&&(t=qY(t)),typeof t=="object"&&(po(t.r)&&po(t.g)&&po(t.b)?(e=BY(t.r,t.g,t.b),o=!0,a=String(t.r).substr(-1)==="%"?"prgb":"rgb"):po(t.h)&&po(t.s)&&po(t.v)?(r=nh(t.s),s=nh(t.v),e=UY(t.h,r,s),o=!0,a="hsv"):po(t.h)&&po(t.s)&&po(t.l)&&(r=nh(t.s),i=nh(t.l),e=VY(t.h,r,i),o=!0,a="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=QR(n),{ok:o,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var WY="[-\\+]?\\d+%?",GY="[-\\+]?\\d*\\.\\d+%?",ha="(?:".concat(GY,")|(?:").concat(WY,")"),wv="[\\s|\\(]+(".concat(ha,")[,|\\s]+(").concat(ha,")[,|\\s]+(").concat(ha,")\\s*\\)?"),Ev="[\\s|\\(]+(".concat(ha,")[,|\\s]+(").concat(ha,")[,|\\s]+(").concat(ha,")[,|\\s]+(").concat(ha,")\\s*\\)?"),hi={CSS_UNIT:new RegExp(ha),rgb:new RegExp("rgb"+wv),rgba:new RegExp("rgba"+Ev),hsl:new RegExp("hsl"+wv),hsla:new RegExp("hsla"+Ev),hsv:new RegExp("hsv"+wv),hsva:new RegExp("hsva"+Ev),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function qY(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(V0[t])t=V0[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=hi.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=hi.rgba.exec(t),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=hi.hsl.exec(t),n?{h:n[1],s:n[2],l:n[3]}:(n=hi.hsla.exec(t),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=hi.hsv.exec(t),n?{h:n[1],s:n[2],v:n[3]}:(n=hi.hsva.exec(t),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=hi.hex8.exec(t),n?{r:Ps(n[1]),g:Ps(n[2]),b:Ps(n[3]),a:XT(n[4]),format:e?"name":"hex8"}:(n=hi.hex6.exec(t),n?{r:Ps(n[1]),g:Ps(n[2]),b:Ps(n[3]),format:e?"name":"hex"}:(n=hi.hex4.exec(t),n?{r:Ps(n[1]+n[1]),g:Ps(n[2]+n[2]),b:Ps(n[3]+n[3]),a:XT(n[4]+n[4]),format:e?"name":"hex8"}:(n=hi.hex3.exec(t),n?{r:Ps(n[1]+n[1]),g:Ps(n[2]+n[2]),b:Ps(n[3]+n[3]),format:e?"name":"hex"}:!1)))))))))}function po(t){return!!hi.CSS_UNIT.exec(String(t))}var ZR=function(){function t(e,n){e===void 0&&(e=""),n===void 0&&(n={});var r;if(e instanceof t)return e;typeof e=="number"&&(e=KY(e)),this.originalInput=e;var s=zY(e);this.originalInput=e,this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=n.format)!==null&&r!==void 0?r:s.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=s.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),n,r,s,i=e.r/255,o=e.g/255,a=e.b/255;return i<=.03928?n=i/12.92:n=Math.pow((i+.055)/1.055,2.4),o<=.03928?r=o/12.92:r=Math.pow((o+.055)/1.055,2.4),a<=.03928?s=a/12.92:s=Math.pow((a+.055)/1.055,2.4),.2126*n+.7152*r+.0722*s},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=QR(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=qT(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=qT(this.r,this.g,this.b),n=Math.round(e.h*360),r=Math.round(e.s*100),s=Math.round(e.v*100);return this.a===1?"hsv(".concat(n,", ").concat(r,"%, ").concat(s,"%)"):"hsva(".concat(n,", ").concat(r,"%, ").concat(s,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=GT(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=GT(this.r,this.g,this.b),n=Math.round(e.h*360),r=Math.round(e.s*100),s=Math.round(e.l*100);return this.a===1?"hsl(".concat(n,", ").concat(r,"%, ").concat(s,"%)"):"hsla(".concat(n,", ").concat(r,"%, ").concat(s,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),YT(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),HY(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),n=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(n,", ").concat(r,")"):"rgba(".concat(e,", ").concat(n,", ").concat(r,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(n){return"".concat(Math.round(Br(n,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(n){return Math.round(Br(n,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+YT(this.r,this.g,this.b,!1),n=0,r=Object.entries(V0);n<r.length;n++){var s=r[n],i=s[0],o=s[1];if(e===o)return i}return!1},t.prototype.toString=function(e){var n=!!e;e=e??this.format;var r=!1,s=this.a<1&&this.a>=0,i=!n&&s&&(e.startsWith("hex")||e==="name");return i?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=th(n.l),new t(n)},t.prototype.brighten=function(e){e===void 0&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),new t(n)},t.prototype.darken=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=th(n.l),new t(n)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=th(n.s),new t(n)},t.prototype.saturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=th(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,new t(n)},t.prototype.mix=function(e,n){n===void 0&&(n=50);var r=this.toRgb(),s=new t(e).toRgb(),i=n/100,o={r:(s.r-r.r)*i+r.r,g:(s.g-r.g)*i+r.g,b:(s.b-r.b)*i+r.b,a:(s.a-r.a)*i+r.a};return new t(o)},t.prototype.analogous=function(e,n){e===void 0&&(e=6),n===void 0&&(n=30);var r=this.toHsl(),s=360/n,i=[this];for(r.h=(r.h-(s*e>>1)+720)%360;--e;)r.h=(r.h+s)%360,i.push(new t(r));return i},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var n=this.toHsv(),r=n.h,s=n.s,i=n.v,o=[],a=1/e;e--;)o.push(new t({h:r,s,v:i})),i=(i+a)%1;return o},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var n=this.toRgb(),r=new t(e).toRgb(),s=n.a+r.a*(1-n.a);return new t({r:(n.r*n.a+r.r*r.a*(1-n.a))/s,g:(n.g*n.a+r.g*r.a*(1-n.a))/s,b:(n.b*n.a+r.b*r.a*(1-n.a))/s,a:s})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),r=n.h,s=[this],i=360/e,o=1;o<e;o++)s.push(new t({h:(r+o*i)%360,s:n.s,l:n.l}));return s},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function na(t,e=20){return t.mix("#141414",e).toString()}function YY(t){const e=Hr(),n=Oe("button");return L(()=>{let r={},s=t.color;if(s){const i=s.match(/var\((.*?)\)/);i&&(s=window.getComputedStyle(window.document.documentElement).getPropertyValue(i[1]));const o=new ZR(s),a=t.dark?o.tint(20).toString():na(o,20);if(t.plain)r=n.cssVarBlock({"bg-color":t.dark?na(o,90):o.tint(90).toString(),"text-color":s,"border-color":t.dark?na(o,50):o.tint(50).toString(),"hover-text-color":`var(${n.cssVarName("color-white")})`,"hover-bg-color":s,"hover-border-color":s,"active-bg-color":a,"active-text-color":`var(${n.cssVarName("color-white")})`,"active-border-color":a}),e.value&&(r[n.cssVarBlockName("disabled-bg-color")]=t.dark?na(o,90):o.tint(90).toString(),r[n.cssVarBlockName("disabled-text-color")]=t.dark?na(o,50):o.tint(50).toString(),r[n.cssVarBlockName("disabled-border-color")]=t.dark?na(o,80):o.tint(80).toString());else{const u=t.dark?na(o,30):o.tint(30).toString(),l=o.isDark()?`var(${n.cssVarName("color-white")})`:`var(${n.cssVarName("color-black")})`;if(r=n.cssVarBlock({"bg-color":s,"text-color":l,"border-color":s,"hover-bg-color":u,"hover-text-color":l,"hover-border-color":u,"active-bg-color":a,"active-border-color":a}),e.value){const c=t.dark?na(o,50):o.tint(50).toString();r[n.cssVarBlockName("disabled-bg-color")]=c,r[n.cssVarBlockName("disabled-text-color")]=t.dark?"rgba(255, 255, 255, 0.5)":`var(${n.cssVarName("color-white")})`,r[n.cssVarBlockName("disabled-border-color")]=c}}}return r})}const XY=se({name:"ElButton"}),QY=se({...XY,props:B0,emits:MY,setup(t,{expose:e,emit:n}){const r=t,s=YY(r),i=Oe("button"),{_ref:o,_size:a,_type:u,_disabled:l,_props:c,_plain:d,_round:f,shouldAddSpace:h,handleClick:p}=OY(r,n),g=L(()=>[i.b(),i.m(u.value),i.m(a.value),i.is("disabled",l.value),i.is("loading",r.loading),i.is("plain",d.value),i.is("round",f.value),i.is("circle",r.circle),i.is("text",r.text),i.is("link",r.link),i.is("has-bg",r.bg)]);return e({ref:o,size:a,type:u,disabled:l,shouldAddSpace:h}),(v,y)=>($(),ye(jt(v.tag),Yt({ref_key:"_ref",ref:o},m(c),{class:m(g),style:m(s),onClick:m(p)}),{default:le(()=>[v.loading?($(),Y(dt,{key:0},[v.$slots.loading?pe(v.$slots,"loading",{key:0}):($(),ye(m(lt),{key:1,class:F(m(i).is("loading"))},{default:le(()=>[($(),ye(jt(v.loadingIcon)))]),_:1},8,["class"]))],64)):v.icon||v.$slots.icon?($(),ye(m(lt),{key:1},{default:le(()=>[v.icon?($(),ye(jt(v.icon),{key:0})):pe(v.$slots,"icon",{key:1})]),_:3})):ge("v-if",!0),v.$slots.default?($(),Y("span",{key:2,class:F({[m(i).em("text","expand")]:m(h)})},[pe(v.$slots,"default")],2)):ge("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var ZY=We(QY,[["__file","button.vue"]]);const JY={size:B0.size,type:B0.type},eX=se({name:"ElButtonGroup"}),tX=se({...eX,props:JY,setup(t){const e=t;Jt(XR,fn({size:En(e,"size"),type:En(e,"type")}));const n=Oe("button");return(r,s)=>($(),Y("div",{class:F(m(n).b("group"))},[pe(r.$slots,"default")],2))}});var JR=We(tX,[["__file","button-group.vue"]]);const Cr=Dt(ZY,{ButtonGroup:JR}),eL=Gn(JR);var Ph={exports:{}},nX=Ph.exports,QT;function rX(){return QT||(QT=1,function(t,e){(function(n,r){t.exports=r()})(nX,function(){var n=1e3,r=6e4,s=36e5,i="millisecond",o="second",a="minute",u="hour",l="day",c="week",d="month",f="quarter",h="year",p="date",g="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(j){var N=["th","st","nd","rd"],R=j%100;return"["+j+(N[(R-20)%10]||N[R]||N[0])+"]"}},b=function(j,N,R){var V=String(j);return!V||V.length>=N?j:""+Array(N+1-V.length).join(R)+j},S={s:b,z:function(j){var N=-j.utcOffset(),R=Math.abs(N),V=Math.floor(R/60),D=R%60;return(N<=0?"+":"-")+b(V,2,"0")+":"+b(D,2,"0")},m:function j(N,R){if(N.date()<R.date())return-j(R,N);var V=12*(R.year()-N.year())+(R.month()-N.month()),D=N.clone().add(V,d),M=R-D<0,K=N.clone().add(V+(M?-1:1),d);return+(-(V+(R-D)/(M?D-K:K-D))||0)},a:function(j){return j<0?Math.ceil(j)||0:Math.floor(j)},p:function(j){return{M:d,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:i,Q:f}[j]||String(j||"").toLowerCase().replace(/s$/,"")},u:function(j){return j===void 0}},E="en",x={};x[E]=w;var k="$isDayjsObject",A=function(j){return j instanceof P||!(!j||!j[k])},C=function j(N,R,V){var D;if(!N)return E;if(typeof N=="string"){var M=N.toLowerCase();x[M]&&(D=M),R&&(x[M]=R,D=M);var K=N.split("-");if(!D&&K.length>1)return j(K[0])}else{var q=N.name;x[q]=N,D=q}return!V&&D&&(E=D),D||!V&&E},_=function(j,N){if(A(j))return j.clone();var R=typeof N=="object"?N:{};return R.date=j,R.args=arguments,new P(R)},O=S;O.l=C,O.i=A,O.w=function(j,N){return _(j,{locale:N.$L,utc:N.$u,x:N.$x,$offset:N.$offset})};var P=function(){function j(R){this.$L=C(R.locale,null,!0),this.parse(R),this.$x=this.$x||R.x||{},this[k]=!0}var N=j.prototype;return N.parse=function(R){this.$d=function(V){var D=V.date,M=V.utc;if(D===null)return new Date(NaN);if(O.u(D))return new Date;if(D instanceof Date)return new Date(D);if(typeof D=="string"&&!/Z$/i.test(D)){var K=D.match(v);if(K){var q=K[2]-1||0,ee=(K[7]||"0").substring(0,3);return M?new Date(Date.UTC(K[1],q,K[3]||1,K[4]||0,K[5]||0,K[6]||0,ee)):new Date(K[1],q,K[3]||1,K[4]||0,K[5]||0,K[6]||0,ee)}}return new Date(D)}(R),this.init()},N.init=function(){var R=this.$d;this.$y=R.getFullYear(),this.$M=R.getMonth(),this.$D=R.getDate(),this.$W=R.getDay(),this.$H=R.getHours(),this.$m=R.getMinutes(),this.$s=R.getSeconds(),this.$ms=R.getMilliseconds()},N.$utils=function(){return O},N.isValid=function(){return this.$d.toString()!==g},N.isSame=function(R,V){var D=_(R);return this.startOf(V)<=D&&D<=this.endOf(V)},N.isAfter=function(R,V){return _(R)<this.startOf(V)},N.isBefore=function(R,V){return this.endOf(V)<_(R)},N.$g=function(R,V,D){return O.u(R)?this[V]:this.set(D,R)},N.unix=function(){return Math.floor(this.valueOf()/1e3)},N.valueOf=function(){return this.$d.getTime()},N.startOf=function(R,V){var D=this,M=!!O.u(V)||V,K=O.p(R),q=function(ae,Te){var Ce=O.w(D.$u?Date.UTC(D.$y,Te,ae):new Date(D.$y,Te,ae),D);return M?Ce:Ce.endOf(l)},ee=function(ae,Te){return O.w(D.toDate()[ae].apply(D.toDate("s"),(M?[0,0,0,0]:[23,59,59,999]).slice(Te)),D)},X=this.$W,te=this.$M,ue=this.$D,he="set"+(this.$u?"UTC":"");switch(K){case h:return M?q(1,0):q(31,11);case d:return M?q(1,te):q(0,te+1);case c:var Z=this.$locale().weekStart||0,ce=(X<Z?X+7:X)-Z;return q(M?ue-ce:ue+(6-ce),te);case l:case p:return ee(he+"Hours",0);case u:return ee(he+"Minutes",1);case a:return ee(he+"Seconds",2);case o:return ee(he+"Milliseconds",3);default:return this.clone()}},N.endOf=function(R){return this.startOf(R,!1)},N.$set=function(R,V){var D,M=O.p(R),K="set"+(this.$u?"UTC":""),q=(D={},D[l]=K+"Date",D[p]=K+"Date",D[d]=K+"Month",D[h]=K+"FullYear",D[u]=K+"Hours",D[a]=K+"Minutes",D[o]=K+"Seconds",D[i]=K+"Milliseconds",D)[M],ee=M===l?this.$D+(V-this.$W):V;if(M===d||M===h){var X=this.clone().set(p,1);X.$d[q](ee),X.init(),this.$d=X.set(p,Math.min(this.$D,X.daysInMonth())).$d}else q&&this.$d[q](ee);return this.init(),this},N.set=function(R,V){return this.clone().$set(R,V)},N.get=function(R){return this[O.p(R)]()},N.add=function(R,V){var D,M=this;R=Number(R);var K=O.p(V),q=function(te){var ue=_(M);return O.w(ue.date(ue.date()+Math.round(te*R)),M)};if(K===d)return this.set(d,this.$M+R);if(K===h)return this.set(h,this.$y+R);if(K===l)return q(1);if(K===c)return q(7);var ee=(D={},D[a]=r,D[u]=s,D[o]=n,D)[K]||1,X=this.$d.getTime()+R*ee;return O.w(X,this)},N.subtract=function(R,V){return this.add(-1*R,V)},N.format=function(R){var V=this,D=this.$locale();if(!this.isValid())return D.invalidDate||g;var M=R||"YYYY-MM-DDTHH:mm:ssZ",K=O.z(this),q=this.$H,ee=this.$m,X=this.$M,te=D.weekdays,ue=D.months,he=D.meridiem,Z=function(Te,Ce,z,re){return Te&&(Te[Ce]||Te(V,M))||z[Ce].slice(0,re)},ce=function(Te){return O.s(q%12||12,Te,"0")},ae=he||function(Te,Ce,z){var re=Te<12?"AM":"PM";return z?re.toLowerCase():re};return M.replace(y,function(Te,Ce){return Ce||function(z){switch(z){case"YY":return String(V.$y).slice(-2);case"YYYY":return O.s(V.$y,4,"0");case"M":return X+1;case"MM":return O.s(X+1,2,"0");case"MMM":return Z(D.monthsShort,X,ue,3);case"MMMM":return Z(ue,X);case"D":return V.$D;case"DD":return O.s(V.$D,2,"0");case"d":return String(V.$W);case"dd":return Z(D.weekdaysMin,V.$W,te,2);case"ddd":return Z(D.weekdaysShort,V.$W,te,3);case"dddd":return te[V.$W];case"H":return String(q);case"HH":return O.s(q,2,"0");case"h":return ce(1);case"hh":return ce(2);case"a":return ae(q,ee,!0);case"A":return ae(q,ee,!1);case"m":return String(ee);case"mm":return O.s(ee,2,"0");case"s":return String(V.$s);case"ss":return O.s(V.$s,2,"0");case"SSS":return O.s(V.$ms,3,"0");case"Z":return K}return null}(Te)||K.replace(":","")})},N.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},N.diff=function(R,V,D){var M,K=this,q=O.p(V),ee=_(R),X=(ee.utcOffset()-this.utcOffset())*r,te=this-ee,ue=function(){return O.m(K,ee)};switch(q){case h:M=ue()/12;break;case d:M=ue();break;case f:M=ue()/3;break;case c:M=(te-X)/6048e5;break;case l:M=(te-X)/864e5;break;case u:M=te/s;break;case a:M=te/r;break;case o:M=te/n;break;default:M=te}return D?M:O.a(M)},N.daysInMonth=function(){return this.endOf(d).$D},N.$locale=function(){return x[this.$L]},N.locale=function(R,V){if(!R)return this.$L;var D=this.clone(),M=C(R,V,!0);return M&&(D.$L=M),D},N.clone=function(){return O.w(this.$d,this)},N.toDate=function(){return new Date(this.valueOf())},N.toJSON=function(){return this.isValid()?this.toISOString():null},N.toISOString=function(){return this.$d.toISOString()},N.toString=function(){return this.$d.toUTCString()},j}(),U=P.prototype;return _.prototype=U,[["$ms",i],["$s",o],["$m",a],["$H",u],["$W",l],["$M",d],["$y",h],["$D",p]].forEach(function(j){U[j[1]]=function(N){return this.$g(N,j[0],j[1])}}),_.extend=function(j,N){return j.$i||(j(N,P,_),j.$i=!0),_},_.locale=C,_.isDayjs=A,_.unix=function(j){return _(1e3*j)},_.en=x[E],_.Ls=x,_.p={},_})}(Ph)),Ph.exports}var sX=rX();const Rt=ui(sX),xv=(t,e)=>[t>0?t-1:void 0,t,t<e?t+1:void 0],ga=t=>Array.from(Array.from({length:t}).keys()),tL=t=>t.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),nL=t=>t.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),ZT=function(t,e){const n=va(t),r=va(e);return n&&r?t.getTime()===e.getTime():!n&&!r?t===e:!1},JT=function(t,e){const n=Ve(t),r=Ve(e);return n&&r?t.length!==e.length?!1:t.every((s,i)=>ZT(s,e[i])):!n&&!r?ZT(t,e):!1},eC=function(t,e,n){const r=$s(e)||e==="x"?Rt(t).locale(n):Rt(t,e).locale(n);return r.isValid()?r:void 0},tC=function(t,e,n){return $s(e)?t:e==="x"?+t:Rt(t).locale(n).format(e)},Tv=(t,e)=>{var n;const r=[],s=e==null?void 0:e();for(let i=0;i<t;i++)r.push((n=s==null?void 0:s.includes(i))!=null?n:!1);return r},rh=t=>Ve(t)?t.map(e=>e.toDate()):t.toDate(),iX=(t,e)=>{const n=t.subtract(1,"month").endOf("month").date();return ga(e).map((r,s)=>n-(e-s-1))},oX=t=>{const e=t.daysInMonth();return ga(e).map((n,r)=>r+1)},aX=t=>ga(t.length/7).map(e=>{const n=e*7;return t.slice(n,n+7)}),lX=Ke({selectedDay:{type:de(Object)},range:{type:de(Array)},date:{type:de(Object),required:!0},hideHeader:{type:Boolean}}),uX={pick:t=>Bt(t)};var Dh={exports:{}},cX=Dh.exports,nC;function dX(){return nC||(nC=1,function(t,e){(function(n,r){t.exports=r()})(cX,function(){return function(n,r,s){var i=r.prototype,o=function(d){return d&&(d.indexOf?d:d.s)},a=function(d,f,h,p,g){var v=d.name?d:d.$locale(),y=o(v[f]),w=o(v[h]),b=y||w.map(function(E){return E.slice(0,p)});if(!g)return b;var S=v.weekStart;return b.map(function(E,x){return b[(x+(S||0))%7]})},u=function(){return s.Ls[s.locale()]},l=function(d,f){return d.formats[f]||function(h){return h.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(p,g,v){return g||v.slice(1)})}(d.formats[f.toUpperCase()])},c=function(){var d=this;return{months:function(f){return f?f.format("MMMM"):a(d,"months")},monthsShort:function(f){return f?f.format("MMM"):a(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):a(d,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):a(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):a(d,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return l(d.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return c.bind(this)()},s.localeData=function(){var d=u();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return s.weekdays()},weekdaysShort:function(){return s.weekdaysShort()},weekdaysMin:function(){return s.weekdaysMin()},months:function(){return s.months()},monthsShort:function(){return s.monthsShort()},longDateFormat:function(f){return l(d,f)},meridiem:d.meridiem,ordinal:d.ordinal}},s.months=function(){return a(u(),"months")},s.monthsShort=function(){return a(u(),"monthsShort","months",3)},s.weekdays=function(d){return a(u(),"weekdays",null,null,d)},s.weekdaysShort=function(d){return a(u(),"weekdaysShort","weekdays",3,d)},s.weekdaysMin=function(d){return a(u(),"weekdaysMin","weekdays",2,d)}}})}(Dh)),Dh.exports}var fX=dX();const rL=ui(fX),hX=["year","years","month","months","date","dates","week","datetime","datetimerange","daterange","monthrange","yearrange"],Cv=["sun","mon","tue","wed","thu","fri","sat"],pX=(t,e)=>{Rt.extend(rL);const n=Rt.localeData().firstDayOfWeek(),{t:r,lang:s}=sn(),i=Rt().locale(s.value),o=L(()=>!!t.range&&!!t.range.length),a=L(()=>{let f=[];if(o.value){const[h,p]=t.range,g=ga(p.date()-h.date()+1).map(w=>({text:h.date()+w,type:"current"}));let v=g.length%7;v=v===0?0:7-v;const y=ga(v).map((w,b)=>({text:b+1,type:"next"}));f=g.concat(y)}else{const h=t.date.startOf("month").day(),p=iX(t.date,(h-n+7)%7).map(w=>({text:w,type:"prev"})),g=oX(t.date).map(w=>({text:w,type:"current"}));f=[...p,...g];const v=7-(f.length%7||7),y=ga(v).map((w,b)=>({text:b+1,type:"next"}));f=f.concat(y)}return aX(f)}),u=L(()=>{const f=n;return f===0?Cv.map(h=>r(`el.datepicker.weeks.${h}`)):Cv.slice(f).concat(Cv.slice(0,f)).map(h=>r(`el.datepicker.weeks.${h}`))}),l=(f,h)=>{switch(h){case"prev":return t.date.startOf("month").subtract(1,"month").date(f);case"next":return t.date.startOf("month").add(1,"month").date(f);case"current":return t.date.date(f)}};return{now:i,isInRange:o,rows:a,weekDays:u,getFormattedDate:l,handlePickDay:({text:f,type:h})=>{const p=l(f,h);e("pick",p)},getSlotData:({text:f,type:h})=>{const p=l(f,h);return{isSelected:p.isSame(t.selectedDay),type:`${h}-month`,day:p.format("YYYY-MM-DD"),date:p.toDate()}}}},mX=se({name:"DateTable"}),gX=se({...mX,props:lX,emits:uX,setup(t,{expose:e,emit:n}){const r=t,{isInRange:s,now:i,rows:o,weekDays:a,getFormattedDate:u,handlePickDay:l,getSlotData:c}=pX(r,n),d=Oe("calendar-table"),f=Oe("calendar-day"),h=({text:p,type:g})=>{const v=[g];if(g==="current"){const y=u(p,g);y.isSame(r.selectedDay,"day")&&v.push(f.is("selected")),y.isSame(i,"day")&&v.push(f.is("today"))}return v};return e({getFormattedDate:u}),(p,g)=>($(),Y("table",{class:F([m(d).b(),m(d).is("range",m(s))]),cellspacing:"0",cellpadding:"0"},[p.hideHeader?ge("v-if",!0):($(),Y("thead",{key:0},[J("tr",null,[($(!0),Y(dt,null,Zt(m(a),v=>($(),Y("th",{key:v,scope:"col"},ze(v),1))),128))])])),J("tbody",null,[($(!0),Y(dt,null,Zt(m(o),(v,y)=>($(),Y("tr",{key:y,class:F({[m(d).e("row")]:!0,[m(d).em("row","hide-border")]:y===0&&p.hideHeader})},[($(!0),Y(dt,null,Zt(v,(w,b)=>($(),Y("td",{key:b,class:F(h(w)),onClick:S=>m(l)(w)},[J("div",{class:F(m(f).b())},[pe(p.$slots,"date-cell",{data:m(c)(w)},()=>[J("span",null,ze(w.text),1)])],2)],10,["onClick"]))),128))],2))),128))])],2))}});var rC=We(gX,[["__file","date-table.vue"]]);const vX=(t,e)=>{const n=t.endOf("month"),r=e.startOf("month"),i=n.isSame(r,"week")?r.add(1,"week"):r;return[[t,n],[i.startOf("week"),e]]},yX=(t,e)=>{const n=t.endOf("month"),r=t.add(1,"month").startOf("month"),s=n.isSame(r,"week")?r.add(1,"week"):r,i=s.endOf("month"),o=e.startOf("month"),a=i.isSame(o,"week")?o.add(1,"week"):o;return[[t,n],[s.startOf("week"),i],[a.startOf("week"),e]]},bX=(t,e,n)=>{const{lang:r}=sn(),s=H(),i=Rt().locale(r.value),o=L({get(){return t.modelValue?u.value:s.value},set(v){if(!v)return;s.value=v;const y=v.toDate();e(dr,y),e(_t,y)}}),a=L(()=>{if(!t.range||!Ve(t.range)||t.range.length!==2||t.range.some(b=>!va(b)))return[];const v=t.range.map(b=>Rt(b).locale(r.value)),[y,w]=v;return y.isAfter(w)?[]:y.isSame(w,"month")?h(y,w):y.add(1,"month").month()!==w.month()?[]:h(y,w)}),u=L(()=>t.modelValue?Rt(t.modelValue).locale(r.value):o.value||(a.value.length?a.value[0][0]:i)),l=L(()=>u.value.subtract(1,"month").date(1)),c=L(()=>u.value.add(1,"month").date(1)),d=L(()=>u.value.subtract(1,"year").date(1)),f=L(()=>u.value.add(1,"year").date(1)),h=(v,y)=>{const w=v.startOf("week"),b=y.endOf("week"),S=w.get("month"),E=b.get("month");return S===E?[[w,b]]:(S+1)%12===E?vX(w,b):S+2===E||(S+1)%11===E?yX(w,b):[]},p=v=>{o.value=v};return{calculateValidatedDateRange:h,date:u,realSelectedDay:o,pickDay:p,selectDate:v=>{const w={"prev-month":l.value,"next-month":c.value,"prev-year":d.value,"next-year":f.value,today:i}[v];w.isSame(u.value,"day")||p(w)},validatedRange:a}},SX=t=>Ve(t)&&t.length===2&&t.every(e=>va(e)),wX=Ke({modelValue:{type:Date},range:{type:de(Array),validator:SX}}),EX={[_t]:t=>va(t),[dr]:t=>va(t)},xX="ElCalendar",TX=se({name:xX}),CX=se({...TX,props:wX,emits:EX,setup(t,{expose:e,emit:n}){const r=t,s=Oe("calendar"),{calculateValidatedDateRange:i,date:o,pickDay:a,realSelectedDay:u,selectDate:l,validatedRange:c}=bX(r,n),{t:d}=sn(),f=L(()=>{const h=`el.datepicker.month${o.value.format("M")}`;return`${o.value.year()} ${d("el.datepicker.year")} ${d(h)}`});return e({selectedDay:u,pickDay:a,selectDate:l,calculateValidatedDateRange:i}),(h,p)=>($(),Y("div",{class:F(m(s).b())},[J("div",{class:F(m(s).e("header"))},[pe(h.$slots,"header",{date:m(f)},()=>[J("div",{class:F(m(s).e("title"))},ze(m(f)),3),m(c).length===0?($(),Y("div",{key:0,class:F(m(s).e("button-group"))},[ie(m(eL),null,{default:le(()=>[ie(m(Cr),{size:"small",onClick:g=>m(l)("prev-month")},{default:le(()=>[Qt(ze(m(d)("el.datepicker.prevMonth")),1)]),_:1},8,["onClick"]),ie(m(Cr),{size:"small",onClick:g=>m(l)("today")},{default:le(()=>[Qt(ze(m(d)("el.datepicker.today")),1)]),_:1},8,["onClick"]),ie(m(Cr),{size:"small",onClick:g=>m(l)("next-month")},{default:le(()=>[Qt(ze(m(d)("el.datepicker.nextMonth")),1)]),_:1},8,["onClick"])]),_:1})],2)):ge("v-if",!0)])],2),m(c).length===0?($(),Y("div",{key:0,class:F(m(s).e("body"))},[ie(rC,{date:m(o),"selected-day":m(u),onPick:m(a)},ks({_:2},[h.$slots["date-cell"]?{name:"date-cell",fn:le(g=>[pe(h.$slots,"date-cell",Ms(Qi(g)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):($(),Y("div",{key:1,class:F(m(s).e("body"))},[($(!0),Y(dt,null,Zt(m(c),(g,v)=>($(),ye(rC,{key:v,date:g[0],"selected-day":m(u),range:g,"hide-header":v!==0,onPick:m(a)},ks({_:2},[h.$slots["date-cell"]?{name:"date-cell",fn:le(y=>[pe(h.$slots,"date-cell",Ms(Qi(y)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var kX=We(CX,[["__file","calendar.vue"]]);const _X=Dt(kX),AX=Ke({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:de([String,Object,Array]),default:""},headerClass:String,bodyClass:String,footerClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),IX=se({name:"ElCard"}),RX=se({...IX,props:AX,setup(t){const e=Oe("card");return(n,r)=>($(),Y("div",{class:F([m(e).b(),m(e).is(`${n.shadow}-shadow`)])},[n.$slots.header||n.header?($(),Y("div",{key:0,class:F([m(e).e("header"),n.headerClass])},[pe(n.$slots,"header",{},()=>[Qt(ze(n.header),1)])],2)):ge("v-if",!0),J("div",{class:F([m(e).e("body"),n.bodyClass]),style:mt(n.bodyStyle)},[pe(n.$slots,"default")],6),n.$slots.footer||n.footer?($(),Y("div",{key:1,class:F([m(e).e("footer"),n.footerClass])},[pe(n.$slots,"footer",{},()=>[Qt(ze(n.footer),1)])],2)):ge("v-if",!0)],2))}});var LX=We(RX,[["__file","card.vue"]]);const PX=Dt(LX),DX=Ke({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),OX={change:(t,e)=>[t,e].every(vt)},sL=Symbol("carouselContextKey"),U0="ElCarouselItem";var Xs=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(Xs||{});function H0(t){return $n(t)&&t.type===dt}function $X(t){return $n(t)&&t.type===br}function MX(t){return $n(t)&&!H0(t)&&!$X(t)}const NX=t=>{if(!$n(t))return{};const e=t.props||{},n=($n(t.type)?t.type.props:void 0)||{},r={};return Object.keys(n).forEach(s=>{hn(n[s],"default")&&(r[s]=n[s].default)}),Object.keys(e).forEach(s=>{r[fs(s)]=e[s]}),r},FX=t=>{if(!Ve(t)||t.length>1)throw new Error("expect to receive a single Vue element child");return t[0]},Gi=t=>{const e=Ve(t)?t:[t],n=[];return e.forEach(r=>{var s;Ve(r)?n.push(...Gi(r)):$n(r)&&((s=r.component)!=null&&s.subTree)?n.push(r,...Gi(r.component.subTree)):$n(r)&&Ve(r.children)?n.push(...Gi(r.children)):$n(r)&&r.shapeFlag===2?n.push(...Gi(r.type())):n.push(r)}),n},BX=(t,e,n)=>Gi(t.subTree).filter(i=>{var o;return $n(i)&&((o=i.type)==null?void 0:o.name)===e&&!!i.component}).map(i=>i.component.uid).map(i=>n[i]).filter(i=>!!i),S1=(t,e)=>{const n={},r=On([]);return{children:r,addChild:o=>{n[o.uid]=o,r.value=BX(t,e,n)},removeChild:o=>{delete n[o],r.value=r.value.filter(a=>a.uid!==o)}}},sC=300,VX=(t,e,n)=>{const{children:r,addChild:s,removeChild:i}=S1(Kt(),U0),o=gr(),a=H(-1),u=H(null),l=H(!1),c=H(),d=H(0),f=H(!0),h=L(()=>t.arrow!=="never"&&!m(v)),p=L(()=>r.value.some(X=>X.props.label.toString().length>0)),g=L(()=>t.type==="card"),v=L(()=>t.direction==="vertical"),y=L(()=>t.height!=="auto"?{height:t.height}:{height:`${d.value}px`,overflow:"hidden"}),w=sl(X=>{A(X)},sC,{trailing:!0}),b=sl(X=>{R(X)},sC),S=X=>f.value?a.value<=1?X<=1:X>1:!0;function E(){u.value&&(clearInterval(u.value),u.value=null)}function x(){t.interval<=0||!t.autoplay||u.value||(u.value=setInterval(()=>k(),t.interval))}const k=()=>{a.value<r.value.length-1?a.value=a.value+1:t.loop&&(a.value=0)};function A(X){if(ut(X)){const he=r.value.filter(Z=>Z.props.name===X);he.length>0&&(X=r.value.indexOf(he[0]))}if(X=Number(X),Number.isNaN(X)||X!==Math.floor(X))return;const te=r.value.length,ue=a.value;X<0?a.value=t.loop?te-1:0:X>=te?a.value=t.loop?0:te-1:a.value=X,ue===a.value&&C(ue),M()}function C(X){r.value.forEach((te,ue)=>{te.translateItem(ue,a.value,X)})}function _(X,te){var ue,he,Z,ce;const ae=m(r),Te=ae.length;if(Te===0||!X.states.inStage)return!1;const Ce=te+1,z=te-1,re=Te-1,ve=ae[re].states.active,ke=ae[0].states.active,Ee=(he=(ue=ae[Ce])==null?void 0:ue.states)==null?void 0:he.active,be=(ce=(Z=ae[z])==null?void 0:Z.states)==null?void 0:ce.active;return te===re&&ke||Ee?"left":te===0&&ve||be?"right":!1}function O(){l.value=!0,t.pauseOnHover&&E()}function P(){l.value=!1,x()}function U(X){m(v)||r.value.forEach((te,ue)=>{X===_(te,ue)&&(te.states.hover=!0)})}function j(){m(v)||r.value.forEach(X=>{X.states.hover=!1})}function N(X){a.value=X}function R(X){t.trigger==="hover"&&X!==a.value&&(a.value=X)}function V(){A(a.value-1)}function D(){A(a.value+1)}function M(){E(),t.pauseOnHover||x()}function K(X){t.height==="auto"&&(d.value=X)}function q(){var X;const te=(X=o.default)==null?void 0:X.call(o);if(!te)return null;const he=Gi(te).filter(Z=>$n(Z)&&Z.type.name===U0);return(he==null?void 0:he.length)===2&&t.loop&&!g.value?(f.value=!0,he):(f.value=!1,null)}Ie(()=>a.value,(X,te)=>{C(te),f.value&&(X=X%2,te=te%2),te>-1&&e(Xt,X,te)}),Ie(()=>t.autoplay,X=>{X?x():E()}),Ie(()=>t.loop,()=>{A(a.value)}),Ie(()=>t.interval,()=>{M()});const ee=On();return Ft(()=>{Ie(()=>r.value,()=>{r.value.length>0&&A(t.initialIndex)},{immediate:!0}),ee.value=zn(c.value,()=>{C()}),x()}),In(()=>{E(),c.value&&ee.value&&ee.value.stop()}),Jt(sL,{root:c,isCardType:g,isVertical:v,items:r,loop:t.loop,cardScale:t.cardScale,addItem:s,removeItem:i,setActiveItem:A,setContainerHeight:K}),{root:c,activeIndex:a,arrowDisplay:h,hasLabel:p,hover:l,isCardType:g,items:r,isVertical:v,containerStyle:y,isItemsTwoLength:f,handleButtonEnter:U,handleButtonLeave:j,handleIndicatorClick:N,handleMouseEnter:O,handleMouseLeave:P,setActiveItem:A,prev:V,next:D,PlaceholderItem:q,isTwoLengthShow:S,throttledArrowClick:w,throttledIndicatorHover:b}},UX="ElCarousel",HX=se({name:UX}),jX=se({...HX,props:DX,emits:OX,setup(t,{expose:e,emit:n}){const r=t,{root:s,activeIndex:i,arrowDisplay:o,hasLabel:a,hover:u,isCardType:l,items:c,isVertical:d,containerStyle:f,handleButtonEnter:h,handleButtonLeave:p,handleIndicatorClick:g,handleMouseEnter:v,handleMouseLeave:y,setActiveItem:w,prev:b,next:S,PlaceholderItem:E,isTwoLengthShow:x,throttledArrowClick:k,throttledIndicatorHover:A}=VX(r,n),C=Oe("carousel"),{t:_}=sn(),O=L(()=>{const N=[C.b(),C.m(r.direction)];return m(l)&&N.push(C.m("card")),N}),P=L(()=>{const N=[C.e("indicators"),C.em("indicators",r.direction)];return m(a)&&N.push(C.em("indicators","labels")),r.indicatorPosition==="outside"&&N.push(C.em("indicators","outside")),m(d)&&N.push(C.em("indicators","right")),N});function U(N){if(!r.motionBlur)return;const R=m(d)?`${C.namespace.value}-transitioning-vertical`:`${C.namespace.value}-transitioning`;N.currentTarget.classList.add(R)}function j(N){if(!r.motionBlur)return;const R=m(d)?`${C.namespace.value}-transitioning-vertical`:`${C.namespace.value}-transitioning`;N.currentTarget.classList.remove(R)}return e({activeIndex:i,setActiveItem:w,prev:b,next:S}),(N,R)=>($(),Y("div",{ref_key:"root",ref:s,class:F(m(O)),onMouseenter:wt(m(v),["stop"]),onMouseleave:wt(m(y),["stop"])},[m(o)?($(),ye(Ar,{key:0,name:"carousel-arrow-left",persisted:""},{default:le(()=>[Ot(J("button",{type:"button",class:F([m(C).e("arrow"),m(C).em("arrow","left")]),"aria-label":m(_)("el.carousel.leftArrow"),onMouseenter:V=>m(h)("left"),onMouseleave:m(p),onClick:wt(V=>m(k)(m(i)-1),["stop"])},[ie(m(lt),null,{default:le(()=>[ie(m(Ea))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[cn,(N.arrow==="always"||m(u))&&(r.loop||m(i)>0)]])]),_:1})):ge("v-if",!0),m(o)?($(),ye(Ar,{key:1,name:"carousel-arrow-right",persisted:""},{default:le(()=>[Ot(J("button",{type:"button",class:F([m(C).e("arrow"),m(C).em("arrow","right")]),"aria-label":m(_)("el.carousel.rightArrow"),onMouseenter:V=>m(h)("right"),onMouseleave:m(p),onClick:wt(V=>m(k)(m(i)+1),["stop"])},[ie(m(lt),null,{default:le(()=>[ie(m(cs))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[cn,(N.arrow==="always"||m(u))&&(r.loop||m(i)<m(c).length-1)]])]),_:1})):ge("v-if",!0),J("div",{class:F(m(C).e("container")),style:mt(m(f)),onTransitionstart:U,onTransitionend:j},[ie(m(E)),pe(N.$slots,"default")],38),N.indicatorPosition!=="none"?($(),Y("ul",{key:2,class:F(m(P))},[($(!0),Y(dt,null,Zt(m(c),(V,D)=>Ot(($(),Y("li",{key:D,class:F([m(C).e("indicator"),m(C).em("indicator",N.direction),m(C).is("active",D===m(i))]),onMouseenter:M=>m(A)(D),onClick:wt(M=>m(g)(D),["stop"])},[J("button",{class:F(m(C).e("button")),"aria-label":m(_)("el.carousel.indicator",{index:D+1})},[m(a)?($(),Y("span",{key:0},ze(V.props.label),1)):ge("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[cn,m(x)(D)]])),128))],2)):ge("v-if",!0),r.motionBlur?($(),Y("svg",{key:3,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[J("defs",null,[J("filter",{id:"elCarouselHorizontal"},[J("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),J("filter",{id:"elCarouselVertical"},[J("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):ge("v-if",!0)],42,["onMouseenter","onMouseleave"]))}});var KX=We(jX,[["__file","carousel.vue"]]);const zX=Ke({name:{type:String,default:""},label:{type:[String,Number],default:""}}),WX=t=>{const e=nt(sL),n=Kt(),r=H(),s=H(!1),i=H(0),o=H(1),a=H(!1),u=H(!1),l=H(!1),c=H(!1),{isCardType:d,isVertical:f,cardScale:h}=e;function p(b,S,E){const x=E-1,k=S-1,A=S+1,C=E/2;return S===0&&b===x?-1:S===x&&b===0?E:b<k&&S-b>=C?E+1:b>A&&b-S>=C?-2:b}function g(b,S){var E,x;const k=m(f)?((E=e.root.value)==null?void 0:E.offsetHeight)||0:((x=e.root.value)==null?void 0:x.offsetWidth)||0;return l.value?k*((2-h)*(b-S)+1)/4:b<S?-(1+h)*k/4:(3+h)*k/4}function v(b,S,E){const x=e.root.value;return x?((E?x.offsetHeight:x.offsetWidth)||0)*(b-S):0}const y=(b,S,E)=>{var x;const k=m(d),A=(x=e.items.value.length)!=null?x:Number.NaN,C=b===S;!k&&!an(E)&&(c.value=C||b===E),!C&&A>2&&e.loop&&(b=p(b,S,A));const _=m(f);a.value=C,k?(l.value=Math.round(Math.abs(b-S))<=1,i.value=g(b,S),o.value=m(a)?1:h):i.value=v(b,S,_),u.value=!0,C&&r.value&&e.setContainerHeight(r.value.offsetHeight)};function w(){if(e&&m(d)){const b=e.items.value.findIndex(({uid:S})=>S===n.uid);e.setActiveItem(b)}}return Ft(()=>{e.addItem({props:t,states:fn({hover:s,translate:i,scale:o,active:a,ready:u,inStage:l,animating:c}),uid:n.uid,translateItem:y})}),Ia(()=>{e.removeItem(n.uid)}),{carouselItemRef:r,active:a,animating:c,hover:s,inStage:l,isVertical:f,translate:i,isCardType:d,scale:o,ready:u,handleItemClick:w}},GX=se({name:U0}),qX=se({...GX,props:zX,setup(t){const e=t,n=Oe("carousel"),{carouselItemRef:r,active:s,animating:i,hover:o,inStage:a,isVertical:u,translate:l,isCardType:c,scale:d,ready:f,handleItemClick:h}=WX(e),p=L(()=>[n.e("item"),n.is("active",s.value),n.is("in-stage",a.value),n.is("hover",o.value),n.is("animating",i.value),{[n.em("item","card")]:c.value,[n.em("item","card-vertical")]:c.value&&u.value}]),g=L(()=>{const y=`${`translate${m(u)?"Y":"X"}`}(${m(l)}px)`,w=`scale(${m(d)})`;return{transform:[y,w].join(" ")}});return(v,y)=>Ot(($(),Y("div",{ref_key:"carouselItemRef",ref:r,class:F(m(p)),style:mt(m(g)),onClick:m(h)},[m(c)?Ot(($(),Y("div",{key:0,class:F(m(n).e("mask"))},null,2)),[[cn,!m(s)]]):ge("v-if",!0),pe(v.$slots,"default")],14,["onClick"])),[[cn,m(f)]])}});var iL=We(qX,[["__file","carousel-item.vue"]]);const YX=Dt(KX,{CarouselItem:iL}),XX=Gn(iL),oL={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},border:Boolean,size:fr,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...$r(["ariaControls"])},aL={[_t]:t=>ut(t)||vt(t)||wn(t),change:t=>ut(t)||vt(t)||wn(t)},Qu=Symbol("checkboxGroupContextKey"),QX=({model:t,isChecked:e})=>{const n=nt(Qu,void 0),r=L(()=>{var i,o;const a=(i=n==null?void 0:n.max)==null?void 0:i.value,u=(o=n==null?void 0:n.min)==null?void 0:o.value;return!an(a)&&t.value.length>=a&&!e.value||!an(u)&&t.value.length<=u&&e.value});return{isDisabled:Hr(L(()=>(n==null?void 0:n.disabled.value)||r.value)),isLimitDisabled:r}},ZX=(t,{model:e,isLimitExceeded:n,hasOwnLabel:r,isDisabled:s,isLabeledByFormItem:i})=>{const o=nt(Qu,void 0),{formItem:a}=Ur(),{emit:u}=Kt();function l(p){var g,v,y,w;return[!0,t.trueValue,t.trueLabel].includes(p)?(v=(g=t.trueValue)!=null?g:t.trueLabel)!=null?v:!0:(w=(y=t.falseValue)!=null?y:t.falseLabel)!=null?w:!1}function c(p,g){u(Xt,l(p),g)}function d(p){if(n.value)return;const g=p.target;u(Xt,l(g.checked),p)}async function f(p){n.value||!r.value&&!s.value&&i.value&&(p.composedPath().some(y=>y.tagName==="LABEL")||(e.value=l([!1,t.falseValue,t.falseLabel].includes(e.value)),await ft(),c(e.value,p)))}const h=L(()=>(o==null?void 0:o.validateEvent)||t.validateEvent);return Ie(()=>t.modelValue,()=>{h.value&&(a==null||a.validate("change").catch(p=>void 0))}),{handleChange:d,onClickRoot:f}},JX=t=>{const e=H(!1),{emit:n}=Kt(),r=nt(Qu,void 0),s=L(()=>an(r)===!1),i=H(!1),o=L({get(){var a,u;return s.value?(a=r==null?void 0:r.modelValue)==null?void 0:a.value:(u=t.modelValue)!=null?u:e.value},set(a){var u,l;s.value&&Ve(a)?(i.value=((u=r==null?void 0:r.max)==null?void 0:u.value)!==void 0&&a.length>(r==null?void 0:r.max.value)&&a.length>o.value.length,i.value===!1&&((l=r==null?void 0:r.changeEvent)==null||l.call(r,a))):(n(_t,a),e.value=a)}});return{model:o,isGroup:s,isLimitExceeded:i}},eQ=(t,e,{model:n})=>{const r=nt(Qu,void 0),s=H(!1),i=L(()=>js(t.value)?t.label:t.value),o=L(()=>{const c=n.value;return wn(c)?c:Ve(c)?Bt(i.value)?c.map(Rn).some(d=>Tr(d,i.value)):c.map(Rn).includes(i.value):c!=null?c===t.trueValue||c===t.trueLabel:!!c}),a=ur(L(()=>{var c;return(c=r==null?void 0:r.size)==null?void 0:c.value}),{prop:!0}),u=ur(L(()=>{var c;return(c=r==null?void 0:r.size)==null?void 0:c.value})),l=L(()=>!!e.default||!js(i.value));return{checkboxButtonSize:a,isChecked:o,isFocused:s,checkboxSize:u,hasOwnLabel:l,actualValue:i}},lL=(t,e)=>{const{formItem:n}=Ur(),{model:r,isGroup:s,isLimitExceeded:i}=JX(t),{isFocused:o,isChecked:a,checkboxButtonSize:u,checkboxSize:l,hasOwnLabel:c,actualValue:d}=eQ(t,e,{model:r}),{isDisabled:f}=QX({model:r,isChecked:a}),{inputId:h,isLabeledByFormItem:p}=ci(t,{formItemContext:n,disableIdGeneration:c,disableIdManagement:s}),{handleChange:g,onClickRoot:v}=ZX(t,{model:r,isLimitExceeded:i,hasOwnLabel:c,isDisabled:f,isLabeledByFormItem:p});return(()=>{function w(){var b,S;Ve(r.value)&&!r.value.includes(d.value)?r.value.push(d.value):r.value=(S=(b=t.trueValue)!=null?b:t.trueLabel)!=null?S:!0}t.checked&&w()})(),Ao({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},L(()=>s.value&&js(t.value))),Ao({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},L(()=>!!t.trueLabel)),Ao({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},L(()=>!!t.falseLabel)),{inputId:h,isLabeledByFormItem:p,isChecked:a,isDisabled:f,isFocused:o,checkboxButtonSize:u,checkboxSize:l,hasOwnLabel:c,model:r,actualValue:d,handleChange:g,onClickRoot:v}},tQ=se({name:"ElCheckbox"}),nQ=se({...tQ,props:oL,emits:aL,setup(t){const e=t,n=gr(),{inputId:r,isLabeledByFormItem:s,isChecked:i,isDisabled:o,isFocused:a,checkboxSize:u,hasOwnLabel:l,model:c,actualValue:d,handleChange:f,onClickRoot:h}=lL(e,n),p=Oe("checkbox"),g=L(()=>[p.b(),p.m(u.value),p.is("disabled",o.value),p.is("bordered",e.border),p.is("checked",i.value)]),v=L(()=>[p.e("input"),p.is("disabled",o.value),p.is("checked",i.value),p.is("indeterminate",e.indeterminate),p.is("focus",a.value)]);return(y,w)=>($(),ye(jt(!m(l)&&m(s)?"span":"label"),{class:F(m(g)),"aria-controls":y.indeterminate?y.ariaControls:null,onClick:m(h)},{default:le(()=>{var b,S,E,x;return[J("span",{class:F(m(v))},[y.trueValue||y.falseValue||y.trueLabel||y.falseLabel?Ot(($(),Y("input",{key:0,id:m(r),"onUpdate:modelValue":k=>Dn(c)?c.value=k:null,class:F(m(p).e("original")),type:"checkbox",indeterminate:y.indeterminate,name:y.name,tabindex:y.tabindex,disabled:m(o),"true-value":(S=(b=y.trueValue)!=null?b:y.trueLabel)!=null?S:!0,"false-value":(x=(E=y.falseValue)!=null?E:y.falseLabel)!=null?x:!1,onChange:m(f),onFocus:k=>a.value=!0,onBlur:k=>a.value=!1,onClick:wt(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[cp,m(c)]]):Ot(($(),Y("input",{key:1,id:m(r),"onUpdate:modelValue":k=>Dn(c)?c.value=k:null,class:F(m(p).e("original")),type:"checkbox",indeterminate:y.indeterminate,disabled:m(o),value:m(d),name:y.name,tabindex:y.tabindex,onChange:m(f),onFocus:k=>a.value=!0,onBlur:k=>a.value=!1,onClick:wt(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","disabled","value","name","tabindex","onChange","onFocus","onBlur","onClick"])),[[cp,m(c)]]),J("span",{class:F(m(p).e("inner"))},null,2)],2),m(l)?($(),Y("span",{key:0,class:F(m(p).e("label"))},[pe(y.$slots,"default"),y.$slots.default?ge("v-if",!0):($(),Y(dt,{key:0},[Qt(ze(y.label),1)],64))],2)):ge("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var rQ=We(nQ,[["__file","checkbox.vue"]]);const sQ=se({name:"ElCheckboxButton"}),iQ=se({...sQ,props:oL,emits:aL,setup(t){const e=t,n=gr(),{isFocused:r,isChecked:s,isDisabled:i,checkboxButtonSize:o,model:a,actualValue:u,handleChange:l}=lL(e,n),c=nt(Qu,void 0),d=Oe("checkbox"),f=L(()=>{var p,g,v,y;const w=(g=(p=c==null?void 0:c.fill)==null?void 0:p.value)!=null?g:"";return{backgroundColor:w,borderColor:w,color:(y=(v=c==null?void 0:c.textColor)==null?void 0:v.value)!=null?y:"",boxShadow:w?`-1px 0 0 0 ${w}`:void 0}}),h=L(()=>[d.b("button"),d.bm("button",o.value),d.is("disabled",i.value),d.is("checked",s.value),d.is("focus",r.value)]);return(p,g)=>{var v,y,w,b;return $(),Y("label",{class:F(m(h))},[p.trueValue||p.falseValue||p.trueLabel||p.falseLabel?Ot(($(),Y("input",{key:0,"onUpdate:modelValue":S=>Dn(a)?a.value=S:null,class:F(m(d).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:m(i),"true-value":(y=(v=p.trueValue)!=null?v:p.trueLabel)!=null?y:!0,"false-value":(b=(w=p.falseValue)!=null?w:p.falseLabel)!=null?b:!1,onChange:m(l),onFocus:S=>r.value=!0,onBlur:S=>r.value=!1,onClick:wt(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[cp,m(a)]]):Ot(($(),Y("input",{key:1,"onUpdate:modelValue":S=>Dn(a)?a.value=S:null,class:F(m(d).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:m(i),value:m(u),onChange:m(l),onFocus:S=>r.value=!0,onBlur:S=>r.value=!1,onClick:wt(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","value","onChange","onFocus","onBlur","onClick"])),[[cp,m(a)]]),p.$slots.default||p.label?($(),Y("span",{key:2,class:F(m(d).be("button","inner")),style:mt(m(s)?m(f):void 0)},[pe(p.$slots,"default",{},()=>[Qt(ze(p.label),1)])],6)):ge("v-if",!0)],2)}}});var uL=We(iQ,[["__file","checkbox-button.vue"]]);const oQ=Ke({modelValue:{type:de(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:fr,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...$r(["ariaLabel"])}),aQ={[_t]:t=>Ve(t),change:t=>Ve(t)},lQ=se({name:"ElCheckboxGroup"}),uQ=se({...lQ,props:oQ,emits:aQ,setup(t,{emit:e}){const n=t,r=Oe("checkbox"),{formItem:s}=Ur(),{inputId:i,isLabeledByFormItem:o}=ci(n,{formItemContext:s}),a=async l=>{e(_t,l),await ft(),e(Xt,l)},u=L({get(){return n.modelValue},set(l){a(l)}});return Jt(Qu,{...vi(_r(n),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:u,changeEvent:a}),Ie(()=>n.modelValue,()=>{n.validateEvent&&(s==null||s.validate("change").catch(l=>void 0))}),(l,c)=>{var d;return $(),ye(jt(l.tag),{id:m(i),class:F(m(r).b("group")),role:"group","aria-label":m(o)?void 0:l.ariaLabel||"checkbox-group","aria-labelledby":m(o)?(d=m(s))==null?void 0:d.labelId:void 0},{default:le(()=>[pe(l.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var cL=We(uQ,[["__file","checkbox-group.vue"]]);const li=Dt(rQ,{CheckboxButton:uL,CheckboxGroup:cL}),cQ=Gn(uL),dL=Gn(cL),fL=Ke({modelValue:{type:[String,Number,Boolean],default:void 0},size:fr,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),dQ=Ke({...fL,border:Boolean}),hL={[_t]:t=>ut(t)||vt(t)||wn(t),[Xt]:t=>ut(t)||vt(t)||wn(t)},pL=Symbol("radioGroupKey"),mL=(t,e)=>{const n=H(),r=nt(pL,void 0),s=L(()=>!!r),i=L(()=>js(t.value)?t.label:t.value),o=L({get(){return s.value?r.modelValue:t.modelValue},set(d){s.value?r.changeEvent(d):e&&e(_t,d),n.value.checked=t.modelValue===i.value}}),a=ur(L(()=>r==null?void 0:r.size)),u=Hr(L(()=>r==null?void 0:r.disabled)),l=H(!1),c=L(()=>u.value||s.value&&o.value!==i.value?-1:0);return Ao({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},L(()=>s.value&&js(t.value))),{radioRef:n,isGroup:s,radioGroup:r,focus:l,size:a,disabled:u,tabIndex:c,modelValue:o,actualValue:i}},fQ=se({name:"ElRadio"}),hQ=se({...fQ,props:dQ,emits:hL,setup(t,{emit:e}){const n=t,r=Oe("radio"),{radioRef:s,radioGroup:i,focus:o,size:a,disabled:u,modelValue:l,actualValue:c}=mL(n,e);function d(){ft(()=>e(Xt,l.value))}return(f,h)=>{var p;return $(),Y("label",{class:F([m(r).b(),m(r).is("disabled",m(u)),m(r).is("focus",m(o)),m(r).is("bordered",f.border),m(r).is("checked",m(l)===m(c)),m(r).m(m(a))])},[J("span",{class:F([m(r).e("input"),m(r).is("disabled",m(u)),m(r).is("checked",m(l)===m(c))])},[Ot(J("input",{ref_key:"radioRef",ref:s,"onUpdate:modelValue":g=>Dn(l)?l.value=g:null,class:F(m(r).e("original")),value:m(c),name:f.name||((p=m(i))==null?void 0:p.name),disabled:m(u),checked:m(l)===m(c),type:"radio",onFocus:g=>o.value=!0,onBlur:g=>o.value=!1,onChange:d,onClick:wt(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[z_,m(l)]]),J("span",{class:F(m(r).e("inner"))},null,2)],2),J("span",{class:F(m(r).e("label")),onKeydown:wt(()=>{},["stop"])},[pe(f.$slots,"default",{},()=>[Qt(ze(f.label),1)])],42,["onKeydown"])],2)}}});var pQ=We(hQ,[["__file","radio.vue"]]);const mQ=Ke({...fL}),gQ=se({name:"ElRadioButton"}),vQ=se({...gQ,props:mQ,setup(t){const e=t,n=Oe("radio"),{radioRef:r,focus:s,size:i,disabled:o,modelValue:a,radioGroup:u,actualValue:l}=mL(e),c=L(()=>({backgroundColor:(u==null?void 0:u.fill)||"",borderColor:(u==null?void 0:u.fill)||"",boxShadow:u!=null&&u.fill?`-1px 0 0 0 ${u.fill}`:"",color:(u==null?void 0:u.textColor)||""}));return(d,f)=>{var h;return $(),Y("label",{class:F([m(n).b("button"),m(n).is("active",m(a)===m(l)),m(n).is("disabled",m(o)),m(n).is("focus",m(s)),m(n).bm("button",m(i))])},[Ot(J("input",{ref_key:"radioRef",ref:r,"onUpdate:modelValue":p=>Dn(a)?a.value=p:null,class:F(m(n).be("button","original-radio")),value:m(l),type:"radio",name:d.name||((h=m(u))==null?void 0:h.name),disabled:m(o),onFocus:p=>s.value=!0,onBlur:p=>s.value=!1,onClick:wt(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[z_,m(a)]]),J("span",{class:F(m(n).be("button","inner")),style:mt(m(a)===m(l)?m(c):{}),onKeydown:wt(()=>{},["stop"])},[pe(d.$slots,"default",{},()=>[Qt(ze(d.label),1)])],46,["onKeydown"])],2)}}});var gL=We(vQ,[["__file","radio-button.vue"]]);const yQ=Ke({id:{type:String,default:void 0},size:fr,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...$r(["ariaLabel"])}),bQ=hL,SQ=se({name:"ElRadioGroup"}),wQ=se({...SQ,props:yQ,emits:bQ,setup(t,{emit:e}){const n=t,r=Oe("radio"),s=Or(),i=H(),{formItem:o}=Ur(),{inputId:a,isLabeledByFormItem:u}=ci(n,{formItemContext:o}),l=d=>{e(_t,d),ft(()=>e(Xt,d))};Ft(()=>{const d=i.value.querySelectorAll("[type=radio]"),f=d[0];!Array.from(d).some(h=>h.checked)&&f&&(f.tabIndex=0)});const c=L(()=>n.name||s.value);return Jt(pL,fn({..._r(n),changeEvent:l,name:c})),Ie(()=>n.modelValue,()=>{n.validateEvent&&(o==null||o.validate("change").catch(d=>void 0))}),(d,f)=>($(),Y("div",{id:m(a),ref_key:"radioGroupRef",ref:i,class:F(m(r).b("group")),role:"radiogroup","aria-label":m(u)?void 0:d.ariaLabel||"radio-group","aria-labelledby":m(u)?m(o).labelId:void 0},[pe(d.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var vL=We(wQ,[["__file","radio-group.vue"]]);const yL=Dt(pQ,{RadioButton:gL,RadioGroup:vL}),EQ=Gn(vL),xQ=Gn(gL);var TQ=se({name:"NodeContent",setup(){return{ns:Oe("cascader-node")}},render(){const{ns:t}=this,{node:e,panel:n}=this.$parent,{data:r,label:s}=e,{renderLabelFn:i}=n;return bt("span",{class:t.e("label")},i?i({node:e,data:r}):s)}});const w1=Symbol(),CQ=se({name:"ElCascaderNode",components:{ElCheckbox:li,ElRadio:yL,NodeContent:TQ,ElIcon:lt,Check:zd,Loading:Ji,ArrowRight:cs},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(t,{emit:e}){const n=nt(w1),r=Oe("cascader-node"),s=L(()=>n.isHoverMenu),i=L(()=>n.config.multiple),o=L(()=>n.config.checkStrictly),a=L(()=>{var x;return(x=n.checkedNodes[0])==null?void 0:x.uid}),u=L(()=>t.node.isDisabled),l=L(()=>t.node.isLeaf),c=L(()=>o.value&&!l.value||!u.value),d=L(()=>h(n.expandingNode)),f=L(()=>o.value&&n.checkedNodes.some(h)),h=x=>{var k;const{level:A,uid:C}=t.node;return((k=x==null?void 0:x.pathNodes[A-1])==null?void 0:k.uid)===C},p=()=>{d.value||n.expandNode(t.node)},g=x=>{const{node:k}=t;x!==k.checked&&n.handleCheckChange(k,x)},v=()=>{n.lazyLoad(t.node,()=>{l.value||p()})},y=x=>{s.value&&(w(),!l.value&&e("expand",x))},w=()=>{const{node:x}=t;!c.value||x.loading||(x.loaded?p():v())},b=()=>{s.value&&!l.value||(l.value&&!u.value&&!o.value&&!i.value?E(!0):w())},S=x=>{o.value?(g(x),t.node.loaded&&p()):E(x)},E=x=>{t.node.loaded?(g(x),!o.value&&p()):v()};return{panel:n,isHoverMenu:s,multiple:i,checkStrictly:o,checkedNodeId:a,isDisabled:u,isLeaf:l,expandable:c,inExpandingPath:d,inCheckedPath:f,ns:r,handleHoverExpand:y,handleExpand:w,handleClick:b,handleCheck:E,handleSelectCheck:S}}});function kQ(t,e,n,r,s,i){const o=Mt("el-checkbox"),a=Mt("el-radio"),u=Mt("check"),l=Mt("el-icon"),c=Mt("node-content"),d=Mt("loading"),f=Mt("arrow-right");return $(),Y("li",{id:`${t.menuId}-${t.node.uid}`,role:"menuitem","aria-haspopup":!t.isLeaf,"aria-owns":t.isLeaf?void 0:t.menuId,"aria-expanded":t.inExpandingPath,tabindex:t.expandable?-1:void 0,class:F([t.ns.b(),t.ns.is("selectable",t.checkStrictly),t.ns.is("active",t.node.checked),t.ns.is("disabled",!t.expandable),t.inExpandingPath&&"in-active-path",t.inCheckedPath&&"in-checked-path"]),onMouseenter:t.handleHoverExpand,onFocus:t.handleHoverExpand,onClick:t.handleClick},[ge(" prefix "),t.multiple?($(),ye(o,{key:0,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:t.isDisabled,onClick:wt(()=>{},["stop"]),"onUpdate:modelValue":t.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):t.checkStrictly?($(),ye(a,{key:1,"model-value":t.checkedNodeId,label:t.node.uid,disabled:t.isDisabled,"onUpdate:modelValue":t.handleSelectCheck,onClick:wt(()=>{},["stop"])},{default:le(()=>[ge(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),J("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):t.isLeaf&&t.node.checked?($(),ye(l,{key:2,class:F(t.ns.e("prefix"))},{default:le(()=>[ie(u)]),_:1},8,["class"])):ge("v-if",!0),ge(" content "),ie(c),ge(" postfix "),t.isLeaf?ge("v-if",!0):($(),Y(dt,{key:3},[t.node.loading?($(),ye(l,{key:0,class:F([t.ns.is("loading"),t.ns.e("postfix")])},{default:le(()=>[ie(d)]),_:1},8,["class"])):($(),ye(l,{key:1,class:F(["arrow-right",t.ns.e("postfix")])},{default:le(()=>[ie(f)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var _Q=We(CQ,[["render",kQ],["__file","node.vue"]]);const AQ=se({name:"ElCascaderMenu",components:{Loading:Ji,ElIcon:lt,ElScrollbar:io,ElCascaderNode:_Q},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(t){const e=Kt(),n=Oe("cascader-menu"),{t:r}=sn(),s=Or();let i=null,o=null;const a=nt(w1),u=H(null),l=L(()=>!t.nodes.length),c=L(()=>!a.initialLoaded),d=L(()=>`${s.value}-${t.index}`),f=v=>{i=v.target},h=v=>{if(!(!a.isHoverMenu||!i||!u.value))if(i.contains(v.target)){p();const y=e.vnode.el,{left:w}=y.getBoundingClientRect(),{offsetWidth:b,offsetHeight:S}=y,E=v.clientX-w,x=i.offsetTop,k=x+i.offsetHeight;u.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${E} ${x} L${b} 0 V${x} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${E} ${k} L${b} ${S} V${k} Z" />
        `}else o||(o=window.setTimeout(g,a.config.hoverThreshold))},p=()=>{o&&(clearTimeout(o),o=null)},g=()=>{u.value&&(u.value.innerHTML="",p())};return{ns:n,panel:a,hoverZone:u,isEmpty:l,isLoading:c,menuId:d,t:r,handleExpand:f,handleMouseMove:h,clearHoverZone:g}}});function IQ(t,e,n,r,s,i){const o=Mt("el-cascader-node"),a=Mt("loading"),u=Mt("el-icon"),l=Mt("el-scrollbar");return $(),ye(l,{key:t.menuId,tag:"ul",role:"menu",class:F(t.ns.b()),"wrap-class":t.ns.e("wrap"),"view-class":[t.ns.e("list"),t.ns.is("empty",t.isEmpty)],onMousemove:t.handleMouseMove,onMouseleave:t.clearHoverZone},{default:le(()=>{var c;return[($(!0),Y(dt,null,Zt(t.nodes,d=>($(),ye(o,{key:d.uid,node:d,"menu-id":t.menuId,onExpand:t.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),t.isLoading?($(),Y("div",{key:0,class:F(t.ns.e("empty-text"))},[ie(u,{size:"14",class:F(t.ns.is("loading"))},{default:le(()=>[ie(a)]),_:1},8,["class"]),Qt(" "+ze(t.t("el.cascader.loading")),1)],2)):t.isEmpty?($(),Y("div",{key:1,class:F(t.ns.e("empty-text"))},[pe(t.$slots,"empty",{},()=>[Qt(ze(t.t("el.cascader.noData")),1)])],2)):(c=t.panel)!=null&&c.isHoverMenu?($(),Y(dt,{key:2},[ge(" eslint-disable-next-line vue/html-self-closing "),($(),Y("svg",{ref:"hoverZone",class:F(t.ns.e("hover-zone"))},null,2))],2112)):ge("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var RQ=We(AQ,[["render",IQ],["__file","menu.vue"]]);const E1=(t="")=>t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),Ki=t=>Vd(t);let LQ=0;const PQ=t=>{const e=[t];let{parent:n}=t;for(;n;)e.unshift(n),n=n.parent;return e};let j0=class K0{constructor(e,n,r,s=!1){this.data=e,this.config=n,this.parent=r,this.root=s,this.uid=LQ++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:i,label:o,children:a}=n,u=e[a],l=PQ(this);this.level=s?0:r?r.level+1:1,this.value=e[i],this.label=e[o],this.pathNodes=l,this.pathValues=l.map(c=>c.value),this.pathLabels=l.map(c=>c.label),this.childrenData=u,this.children=(u||[]).map(c=>new K0(c,n,this)),this.loaded=!n.lazy||this.isLeaf||!$s(u)}get isDisabled(){const{data:e,parent:n,config:r}=this,{disabled:s,checkStrictly:i}=r;return(pt(s)?s(e,this):!!e[s])||!i&&(n==null?void 0:n.isDisabled)}get isLeaf(){const{data:e,config:n,childrenData:r,loaded:s}=this,{lazy:i,leaf:o}=n,a=pt(o)?o(e,this):e[o];return an(a)?i&&!s?!1:!(Ve(r)&&r.length):!!a}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:n,children:r}=this,s=new K0(e,this.config,this);return Ve(n)?n.push(e):this.childrenData=[e],r.push(s),s}calcText(e,n){const r=e?this.pathLabels.join(n):this.label;return this.text=r,r}broadcast(e,...n){const r=`onParent${Ki(e)}`;this.children.forEach(s=>{s&&(s.broadcast(e,...n),s[r]&&s[r](...n))})}emit(e,...n){const{parent:r}=this,s=`onChild${Ki(e)}`;r&&(r[s]&&r[s](...n),r.emit(e,...n))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,n=e.filter(s=>!s.isDisabled),r=n.length?n.every(s=>s.checked):!1;this.setCheckState(r)}setCheckState(e){const n=this.children.length,r=this.children.reduce((s,i)=>{const o=i.checked?1:i.indeterminate?.5:0;return s+o},0);this.checked=this.loaded&&this.children.filter(s=>!s.isDisabled).every(s=>s.loaded&&s.checked)&&e,this.indeterminate=this.loaded&&r!==n&&r>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:n,multiple:r}=this.config;n||!r?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}};const z0=(t,e)=>t.reduce((n,r)=>(r.isLeaf?n.push(r):(!e&&n.push(r),n=n.concat(z0(r.children,e))),n),[]);class iC{constructor(e,n){this.config=n;const r=(e||[]).map(s=>new j0(s,this.config));this.nodes=r,this.allNodes=z0(r,!1),this.leafNodes=z0(r,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,n){const r=n?n.appendChild(e):new j0(e,this.config);n||this.nodes.push(r),this.appendAllNodesAndLeafNodes(r)}appendNodes(e,n){e.forEach(r=>this.appendNode(r,n))}appendAllNodesAndLeafNodes(e){this.allNodes.push(e),e.isLeaf&&this.leafNodes.push(e),e.children&&e.children.forEach(n=>{this.appendAllNodesAndLeafNodes(n)})}getNodeByValue(e,n=!1){return js(e)?null:this.getFlattedNodes(n).find(s=>Tr(s.value,e)||Tr(s.pathValues,e))||null}getSameNode(e){return e&&this.getFlattedNodes(!1).find(({value:r,level:s})=>Tr(e.value,r)&&e.level===s)||null}}const bL=Ke({modelValue:{type:de([Number,String,Array])},options:{type:de(Array),default:()=>[]},props:{type:de(Object),default:()=>({})}}),DQ={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:xn,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},OQ=t=>L(()=>({...DQ,...t.props})),oC=t=>{if(!t)return 0;const e=t.id.split("-");return Number(e[e.length-2])},$Q=t=>{if(!t)return;const e=t.querySelector("input");e?e.click():CR(t)&&t.click()},MQ=(t,e)=>{const n=e.slice(0),r=n.map(i=>i.uid),s=t.reduce((i,o)=>{const a=r.indexOf(o.uid);return a>-1&&(i.push(o),n.splice(a,1),r.splice(a,1)),i},[]);return s.push(...n),s},aC=t=>[...new Set(t)],ls=t=>!t&&t!==0?[]:Ve(t)?t:[t],NQ=se({name:"ElCascaderPanel",components:{ElCascaderMenu:RQ},props:{...bL,border:{type:Boolean,default:!0},renderLabel:Function},emits:[_t,Xt,"close","expand-change"],setup(t,{emit:e,slots:n}){let r=!1;const s=Oe("cascader"),i=OQ(t);let o=null;const a=H(!0),u=H([]),l=H(null),c=H([]),d=H(null),f=H([]),h=L(()=>i.value.expandTrigger==="hover"),p=L(()=>t.renderLabel||n.default),g=()=>{const{options:P}=t,U=i.value;r=!1,o=new iC(P,U),c.value=[o.getNodes()],U.lazy&&$s(t.options)?(a.value=!1,v(void 0,j=>{j&&(o=new iC(j,U),c.value=[o.getNodes()]),a.value=!0,A(!1,!0)})):A(!1,!0)},v=(P,U)=>{const j=i.value;P=P||new j0({},j,void 0,!0),P.loading=!0;const N=R=>{const V=P,D=V.root?null:V;R&&(o==null||o.appendNodes(R,D)),V.loading=!1,V.loaded=!0,V.childrenData=V.childrenData||[],U&&U(R)};j.lazyLoad(P,N)},y=(P,U)=>{var j;const{level:N}=P,R=c.value.slice(0,N);let V;P.isLeaf?V=P.pathNodes[N-2]:(V=P,R.push(P.children)),((j=d.value)==null?void 0:j.uid)!==(V==null?void 0:V.uid)&&(d.value=P,c.value=R,!U&&e("expand-change",(P==null?void 0:P.pathValues)||[]))},w=(P,U,j=!0)=>{const{checkStrictly:N,multiple:R}=i.value,V=f.value[0];r=!0,!R&&(V==null||V.doCheck(!1)),P.doCheck(U),k(),j&&!R&&!N&&e("close"),!j&&!R&&!N&&b(P)},b=P=>{P&&(P=P.parent,b(P),P&&y(P))},S=P=>o==null?void 0:o.getFlattedNodes(P),E=P=>{var U;return(U=S(P))==null?void 0:U.filter(j=>j.checked!==!1)},x=()=>{f.value.forEach(P=>P.doCheck(!1)),k(),c.value=c.value.slice(0,1),d.value=null,e("expand-change",[])},k=()=>{var P;const{checkStrictly:U,multiple:j}=i.value,N=f.value,R=E(!U),V=MQ(N,R),D=V.map(M=>M.valueByOption);f.value=V,l.value=j?D:(P=D[0])!=null?P:null},A=(P=!1,U=!1)=>{const{modelValue:j}=t,{lazy:N,multiple:R,checkStrictly:V}=i.value,D=!V;if(!(!a.value||r||!U&&Tr(j,l.value)))if(N&&!P){const K=aC(jK(ls(j))).map(q=>o==null?void 0:o.getNodeByValue(q)).filter(q=>!!q&&!q.loaded&&!q.loading);K.length?K.forEach(q=>{v(q,()=>A(!1,U))}):A(!0,U)}else{const M=R?ls(j):[j],K=aC(M.map(q=>o==null?void 0:o.getNodeByValue(q,D)));C(K,U),l.value=Ip(j)}},C=(P,U=!0)=>{const{checkStrictly:j}=i.value,N=f.value,R=P.filter(M=>!!M&&(j||M.isLeaf)),V=o==null?void 0:o.getSameNode(d.value),D=U&&V||R[0];D?D.pathNodes.forEach(M=>y(M,!0)):d.value=null,N.forEach(M=>M.doCheck(!1)),fn(R).forEach(M=>M.doCheck(!0)),f.value=R,ft(_)},_=()=>{on&&u.value.forEach(P=>{const U=P==null?void 0:P.$el;if(U){const j=U.querySelector(`.${s.namespace.value}-scrollbar__wrap`),N=U.querySelector(`.${s.b("node")}.${s.is("active")}`)||U.querySelector(`.${s.b("node")}.in-active-path`);n1(j,N)}})},O=P=>{const U=P.target,{code:j}=P;switch(j){case it.up:case it.down:{P.preventDefault();const N=j===it.up?-1:1;Rh(kR(U,N,`.${s.b("node")}[tabindex="-1"]`));break}case it.left:{P.preventDefault();const N=u.value[oC(U)-1],R=N==null?void 0:N.$el.querySelector(`.${s.b("node")}[aria-expanded="true"]`);Rh(R);break}case it.right:{P.preventDefault();const N=u.value[oC(U)+1],R=N==null?void 0:N.$el.querySelector(`.${s.b("node")}[tabindex="-1"]`);Rh(R);break}case it.enter:case it.numpadEnter:$Q(U);break}};return Jt(w1,fn({config:i,expandingNode:d,checkedNodes:f,isHoverMenu:h,initialLoaded:a,renderLabelFn:p,lazyLoad:v,expandNode:y,handleCheckChange:w})),Ie([i,()=>t.options],g,{deep:!0,immediate:!0}),Ie(()=>t.modelValue,()=>{r=!1,A()},{deep:!0}),Ie(()=>l.value,P=>{Tr(P,t.modelValue)||(e(_t,P),e(Xt,P))}),f_(()=>u.value=[]),Ft(()=>!$s(t.modelValue)&&A()),{ns:s,menuList:u,menus:c,checkedNodes:f,handleKeyDown:O,handleCheckChange:w,getFlattedNodes:S,getCheckedNodes:E,clearCheckedNodes:x,calculateCheckedValue:k,scrollToExpandingNode:_}}});function FQ(t,e,n,r,s,i){const o=Mt("el-cascader-menu");return $(),Y("div",{class:F([t.ns.b("panel"),t.ns.is("bordered",t.border)]),onKeydown:t.handleKeyDown},[($(!0),Y(dt,null,Zt(t.menus,(a,u)=>($(),ye(o,{key:u,ref_for:!0,ref:l=>t.menuList[u]=l,index:u,nodes:[...a]},{empty:le(()=>[pe(t.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var BQ=We(NQ,[["render",FQ],["__file","index.vue"]]);const SL=Dt(BQ),Do=Ke({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:so},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),VQ={close:t=>t instanceof MouseEvent,click:t=>t instanceof MouseEvent},UQ=se({name:"ElTag"}),HQ=se({...UQ,props:Do,emits:VQ,setup(t,{emit:e}){const n=t,r=ur(),s=Oe("tag"),i=L(()=>{const{type:l,hit:c,effect:d,closable:f,round:h}=n;return[s.b(),s.is("closable",f),s.m(l||"primary"),s.m(r.value),s.m(d),s.is("hit",c),s.is("round",h)]}),o=l=>{e("close",l)},a=l=>{e("click",l)},u=l=>{var c,d,f;(f=(d=(c=l==null?void 0:l.component)==null?void 0:c.subTree)==null?void 0:d.component)!=null&&f.bum&&(l.component.subTree.component.bum=null)};return(l,c)=>l.disableTransitions?($(),Y("span",{key:0,class:F(m(i)),style:mt({backgroundColor:l.color}),onClick:a},[J("span",{class:F(m(s).e("content"))},[pe(l.$slots,"default")],2),l.closable?($(),ye(m(lt),{key:0,class:F(m(s).e("close")),onClick:wt(o,["stop"])},{default:le(()=>[ie(m(si))]),_:1},8,["class","onClick"])):ge("v-if",!0)],6)):($(),ye(Ar,{key:1,name:`${m(s).namespace.value}-zoom-in-center`,appear:"",onVnodeMounted:u},{default:le(()=>[J("span",{class:F(m(i)),style:mt({backgroundColor:l.color}),onClick:a},[J("span",{class:F(m(s).e("content"))},[pe(l.$slots,"default")],2),l.closable?($(),ye(m(lt),{key:0,class:F(m(s).e("close")),onClick:wt(o,["stop"])},{default:le(()=>[ie(m(si))]),_:1},8,["class","onClick"])):ge("v-if",!0)],6)]),_:3},8,["name"]))}});var jQ=We(HQ,[["__file","tag.vue"]]);const Iu=Dt(jQ),KQ=Ke({...bL,size:fr,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:de(Function),default:(t,e)=>t.text.includes(e)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:de(Function),default:()=>!0},placement:{type:de(String),values:jo,default:"bottom-start"},fallbackPlacements:{type:de(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:nr.teleported,tagType:{...Do.type,default:"info"},tagEffect:{...Do.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...qu}),zQ={[_t]:t=>!0,[Xt]:t=>!0,focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,visibleChange:t=>wn(t),expandChange:t=>!!t,removeTag:t=>!!t},sa=new Map;if(on){let t;document.addEventListener("mousedown",e=>t=e),document.addEventListener("mouseup",e=>{if(t){for(const n of sa.values())for(const{documentHandler:r}of n)r(e,t);t=void 0}})}function lC(t,e){let n=[];return Ve(e.arg)?n=e.arg:ds(e.arg)&&n.push(e.arg),function(r,s){const i=e.instance.popperRef,o=r.target,a=s==null?void 0:s.target,u=!e||!e.instance,l=!o||!a,c=t.contains(o)||t.contains(a),d=t===o,f=n.length&&n.some(p=>p==null?void 0:p.contains(o))||n.length&&n.includes(a),h=i&&(i.contains(o)||i.contains(a));u||l||c||d||f||h||e.value(r,s)}}const Oo={beforeMount(t,e){sa.has(t)||sa.set(t,[]),sa.get(t).push({documentHandler:lC(t,e),bindingFn:e.value})},updated(t,e){sa.has(t)||sa.set(t,[]);const n=sa.get(t),r=n.findIndex(i=>i.bindingFn===e.oldValue),s={documentHandler:lC(t,e),bindingFn:e.value};r>=0?n.splice(r,1,s):n.push(s)},unmounted(t){sa.delete(t)}},WQ="ElCascader",GQ=se({name:WQ}),qQ=se({...GQ,props:KQ,emits:zQ,setup(t,{expose:e,emit:n}){const r=t,s={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:fe})=>{const{modifiersData:Le,placement:ne}=fe;["right","left","bottom","top"].includes(ne)||Le.arrow&&(Le.arrow.x=35)},requires:["arrow"]}]},i=No();let o=0,a=0;const u=Oe("cascader"),l=Oe("input"),{t:c}=sn(),{form:d,formItem:f}=Ur(),{valueOnClear:h}=Mm(r),{isComposing:p,handleComposition:g}=ef({afterComposition(fe){var Le;const ne=(Le=fe.target)==null?void 0:Le.value;ht(ne)}}),v=H(null),y=H(null),w=H(null),b=H(null),S=H(null),E=H(!1),x=H(!1),k=H(!1),A=H(!1),C=H(""),_=H(""),O=H([]),P=H([]),U=H([]),j=L(()=>i.style),N=L(()=>r.disabled||(d==null?void 0:d.disabled)),R=L(()=>r.placeholder||c("el.cascader.placeholder")),V=L(()=>_.value||O.value.length>0||p.value?"":R.value),D=ur(),M=L(()=>D.value==="small"?"small":"default"),K=L(()=>!!r.props.multiple),q=L(()=>!r.filterable||K.value),ee=L(()=>K.value?_.value:C.value),X=L(()=>{var fe;return((fe=b.value)==null?void 0:fe.checkedNodes)||[]}),te=L(()=>!r.clearable||N.value||k.value||!x.value?!1:!!X.value.length),ue=L(()=>{const{showAllLevels:fe,separator:Le}=r,ne=X.value;return ne.length?K.value?"":ne[0].calcText(fe,Le):""}),he=L(()=>(f==null?void 0:f.validateState)||""),Z=L({get(){return Ip(r.modelValue)},set(fe){const Le=fe??h.value;n(_t,Le),n(Xt,Le),r.validateEvent&&(f==null||f.validate("change").catch(ne=>void 0))}}),ce=L(()=>[u.b(),u.m(D.value),u.is("disabled",N.value),i.class]),ae=L(()=>[l.e("icon"),"icon-arrow-down",u.is("reverse",E.value)]),Te=L(()=>u.is("focus",E.value||A.value)),Ce=L(()=>{var fe,Le;return(Le=(fe=v.value)==null?void 0:fe.popperRef)==null?void 0:Le.contentRef}),z=fe=>{var Le,ne,Ye;N.value||(fe=fe??!E.value,fe!==E.value&&(E.value=fe,(ne=(Le=y.value)==null?void 0:Le.input)==null||ne.setAttribute("aria-expanded",`${fe}`),fe?(re(),ft((Ye=b.value)==null?void 0:Ye.scrollToExpandingNode)):r.filterable&&et(),n("visibleChange",fe)))},re=()=>{ft(()=>{var fe;(fe=v.value)==null||fe.updatePopper()})},ve=()=>{k.value=!1},ke=fe=>{const{showAllLevels:Le,separator:ne}=r;return{node:fe,key:fe.uid,text:fe.calcText(Le,ne),hitState:!1,closable:!N.value&&!fe.isDisabled,isCollapseTag:!1}},Ee=fe=>{var Le;const ne=fe.node;ne.doCheck(!1),(Le=b.value)==null||Le.calculateCheckedValue(),n("removeTag",ne.valueByOption)},be=()=>{if(!K.value)return;const fe=X.value,Le=[],ne=[];if(fe.forEach(Ye=>ne.push(ke(Ye))),P.value=ne,fe.length){fe.slice(0,r.maxCollapseTags).forEach(tn=>Le.push(ke(tn)));const Ye=fe.slice(r.maxCollapseTags),Et=Ye.length;Et&&(r.collapseTags?Le.push({key:-1,text:`+ ${Et}`,closable:!1,isCollapseTag:!0}):Ye.forEach(tn=>Le.push(ke(tn))))}O.value=Le},Se=()=>{var fe,Le;const{filterMethod:ne,showAllLevels:Ye,separator:Et}=r,tn=(Le=(fe=b.value)==null?void 0:fe.getFlattedNodes(!r.props.checkStrictly))==null?void 0:Le.filter(ct=>ct.isDisabled?!1:(ct.calcText(Ye,Et),ne(ct,ee.value)));K.value&&(O.value.forEach(ct=>{ct.hitState=!1}),P.value.forEach(ct=>{ct.hitState=!1})),k.value=!0,U.value=tn,re()},_e=()=>{var fe;let Le;k.value&&S.value?Le=S.value.$el.querySelector(`.${u.e("suggestion-item")}`):Le=(fe=b.value)==null?void 0:fe.$el.querySelector(`.${u.b("node")}[tabindex="-1"]`),Le&&(Le.focus(),!k.value&&Le.click())},Ne=()=>{var fe,Le;const ne=(fe=y.value)==null?void 0:fe.input,Ye=w.value,Et=(Le=S.value)==null?void 0:Le.$el;if(!(!on||!ne)){if(Et){const tn=Et.querySelector(`.${u.e("suggestion-list")}`);tn.style.minWidth=`${ne.offsetWidth}px`}if(Ye){const{offsetHeight:tn}=Ye,ct=O.value.length>0?`${Math.max(tn,o)-2}px`:`${o}px`;ne.style.height=ct,re()}}},Me=fe=>{var Le;return(Le=b.value)==null?void 0:Le.getCheckedNodes(fe)},st=fe=>{re(),n("expandChange",fe)},qe=fe=>{if(!p.value)switch(fe.code){case it.enter:case it.numpadEnter:z();break;case it.down:z(!0),ft(_e),fe.preventDefault();break;case it.esc:E.value===!0&&(fe.preventDefault(),fe.stopPropagation(),z(!1));break;case it.tab:z(!1);break}},Ae=()=>{var fe;(fe=b.value)==null||fe.clearCheckedNodes(),!E.value&&r.filterable&&et(),z(!1),n("clear")},et=()=>{const{value:fe}=ue;C.value=fe,_.value=fe},St=fe=>{var Le,ne;const{checked:Ye}=fe;K.value?(Le=b.value)==null||Le.handleCheckChange(fe,!Ye,!1):(!Ye&&((ne=b.value)==null||ne.handleCheckChange(fe,!0,!1)),z(!1))},Lt=fe=>{const Le=fe.target,{code:ne}=fe;switch(ne){case it.up:case it.down:{fe.preventDefault();const Ye=ne===it.up?-1:1;Rh(kR(Le,Ye,`.${u.e("suggestion-item")}[tabindex="-1"]`));break}case it.enter:case it.numpadEnter:Le.click();break}},Pt=()=>{const fe=O.value,Le=fe[fe.length-1];a=_.value?0:a+1,!(!Le||!a||r.collapseTags&&fe.length>1)&&(Le.hitState?Ee(Le):Le.hitState=!0)},en=fe=>{const Le=fe.target,ne=u.e("search-input");Le.className===ne&&(A.value=!0),n("focus",fe)},zt=fe=>{A.value=!1,n("blur",fe)},bn=_s(()=>{const{value:fe}=ee;if(!fe)return;const Le=r.beforeFilter(fe);ul(Le)?Le.then(Se).catch(()=>{}):Le!==!1?Se():ve()},r.debounce),ht=(fe,Le)=>{!E.value&&z(!0),!(Le!=null&&Le.isComposing)&&(fe?bn():ve())},Nt=fe=>Number.parseFloat(Tz(l.cssVarName("input-height"),fe).value)-2;return Ie(k,re),Ie([X,N,()=>r.collapseTags],be),Ie(O,()=>{ft(()=>Ne())}),Ie(D,async()=>{await ft();const fe=y.value.input;o=Nt(fe)||o,Ne()}),Ie(ue,et,{immediate:!0}),Ft(()=>{const fe=y.value.input,Le=Nt(fe);o=fe.offsetHeight||Le,zn(fe,Ne)}),e({getCheckedNodes:Me,cascaderPanelRef:b,togglePopperVisible:z,contentRef:Ce,presentText:ue}),(fe,Le)=>($(),ye(m(Vr),{ref_key:"tooltipRef",ref:v,visible:E.value,teleported:fe.teleported,"popper-class":[m(u).e("dropdown"),fe.popperClass],"popper-options":s,"fallback-placements":fe.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:fe.placement,transition:`${m(u).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:fe.persistent,onHide:ve},{default:le(()=>[Ot(($(),Y("div",{class:F(m(ce)),style:mt(m(j)),onClick:()=>z(m(q)?void 0:!0),onKeydown:qe,onMouseenter:ne=>x.value=!0,onMouseleave:ne=>x.value=!1},[ie(m(es),{ref_key:"input",ref:y,modelValue:C.value,"onUpdate:modelValue":ne=>C.value=ne,placeholder:m(V),readonly:m(q),disabled:m(N),"validate-event":!1,size:m(D),class:F(m(Te)),tabindex:m(K)&&fe.filterable&&!m(N)?-1:void 0,onCompositionstart:m(g),onCompositionupdate:m(g),onCompositionend:m(g),onFocus:en,onBlur:zt,onInput:ht},ks({suffix:le(()=>[m(te)?($(),ye(m(lt),{key:"clear",class:F([m(l).e("icon"),"icon-circle-close"]),onClick:wt(Ae,["stop"])},{default:le(()=>[ie(m(Vo))]),_:1},8,["class","onClick"])):($(),ye(m(lt),{key:"arrow-down",class:F(m(ae)),onClick:wt(ne=>z(),["stop"])},{default:le(()=>[ie(m(Bo))]),_:1},8,["class","onClick"]))]),_:2},[fe.$slots.prefix?{name:"prefix",fn:le(()=>[pe(fe.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),m(K)?($(),Y("div",{key:0,ref_key:"tagWrapper",ref:w,class:F([m(u).e("tags"),m(u).is("validate",!!m(he))])},[($(!0),Y(dt,null,Zt(O.value,ne=>($(),ye(m(Iu),{key:ne.key,type:fe.tagType,size:m(M),effect:fe.tagEffect,hit:ne.hitState,closable:ne.closable,"disable-transitions":"",onClose:Ye=>Ee(ne)},{default:le(()=>[ne.isCollapseTag===!1?($(),Y("span",{key:0},ze(ne.text),1)):($(),ye(m(Vr),{key:1,disabled:E.value||!fe.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:le(()=>[J("span",null,ze(ne.text),1)]),content:le(()=>[J("div",{class:F(m(u).e("collapse-tags"))},[($(!0),Y(dt,null,Zt(P.value.slice(fe.maxCollapseTags),(Ye,Et)=>($(),Y("div",{key:Et,class:F(m(u).e("collapse-tag"))},[($(),ye(m(Iu),{key:Ye.key,class:"in-tooltip",type:fe.tagType,size:m(M),effect:fe.tagEffect,hit:Ye.hitState,closable:Ye.closable,"disable-transitions":"",onClose:tn=>Ee(Ye)},{default:le(()=>[J("span",null,ze(Ye.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),fe.filterable&&!m(N)?Ot(($(),Y("input",{key:0,"onUpdate:modelValue":ne=>_.value=ne,type:"text",class:F(m(u).e("search-input")),placeholder:m(ue)?"":m(R),onInput:ne=>ht(_.value,ne),onClick:wt(ne=>z(!0),["stop"]),onKeydown:Sn(Pt,["delete"]),onCompositionstart:m(g),onCompositionupdate:m(g),onCompositionend:m(g),onFocus:en,onBlur:zt},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[pm,_.value]]):ge("v-if",!0)],2)):ge("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[m(Oo),()=>z(!1),m(Ce)]])]),content:le(()=>[Ot(ie(m(SL),{ref_key:"cascaderPanelRef",ref:b,modelValue:m(Z),"onUpdate:modelValue":ne=>Dn(Z)?Z.value=ne:null,options:fe.options,props:r.props,border:!1,"render-label":fe.$slots.default,onExpandChange:st,onClose:ne=>fe.$nextTick(()=>z(!1))},{empty:le(()=>[pe(fe.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[cn,!k.value]]),fe.filterable?Ot(($(),ye(m(io),{key:0,ref_key:"suggestionPanel",ref:S,tag:"ul",class:F(m(u).e("suggestion-panel")),"view-class":m(u).e("suggestion-list"),onKeydown:Lt},{default:le(()=>[U.value.length?($(!0),Y(dt,{key:0},Zt(U.value,ne=>($(),Y("li",{key:ne.uid,class:F([m(u).e("suggestion-item"),m(u).is("checked",ne.checked)]),tabindex:-1,onClick:Ye=>St(ne)},[pe(fe.$slots,"suggestion-item",{item:ne},()=>[J("span",null,ze(ne.text),1),ne.checked?($(),ye(m(lt),{key:0},{default:le(()=>[ie(m(zd))]),_:1})):ge("v-if",!0)])],10,["onClick"]))),128)):pe(fe.$slots,"empty",{key:1},()=>[J("li",{class:F(m(u).e("empty-text"))},ze(m(c)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[cn,k.value]]):ge("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var YQ=We(qQ,[["__file","cascader.vue"]]);const XQ=Dt(YQ),QQ=Ke({checked:Boolean,disabled:Boolean,type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"}}),ZQ={"update:checked":t=>wn(t),[Xt]:t=>wn(t)},JQ=se({name:"ElCheckTag"}),eZ=se({...JQ,props:QQ,emits:ZQ,setup(t,{emit:e}){const n=t,r=Oe("check-tag"),s=L(()=>n.disabled),i=L(()=>[r.b(),r.is("checked",n.checked),r.is("disabled",s.value),r.m(n.type||"primary")]),o=()=>{if(s.value)return;const a=!n.checked;e(Xt,a),e("update:checked",a)};return(a,u)=>($(),Y("span",{class:F(m(i)),onClick:o},[pe(a.$slots,"default")],2))}});var tZ=We(eZ,[["__file","check-tag.vue"]]);const nZ=Dt(tZ),rZ=Ke({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:de([Number,Object]),default:()=>Wn({})},sm:{type:de([Number,Object]),default:()=>Wn({})},md:{type:de([Number,Object]),default:()=>Wn({})},lg:{type:de([Number,Object]),default:()=>Wn({})},xl:{type:de([Number,Object]),default:()=>Wn({})}}),wL=Symbol("rowContextKey"),sZ=se({name:"ElCol"}),iZ=se({...sZ,props:rZ,setup(t){const e=t,{gutter:n}=nt(wL,{gutter:L(()=>0)}),r=Oe("col"),s=L(()=>{const o={};return n.value&&(o.paddingLeft=o.paddingRight=`${n.value/2}px`),o}),i=L(()=>{const o=[];return["span","offset","pull","push"].forEach(l=>{const c=e[l];vt(c)&&(l==="span"?o.push(r.b(`${e[l]}`)):c>0&&o.push(r.b(`${l}-${e[l]}`)))}),["xs","sm","md","lg","xl"].forEach(l=>{vt(e[l])?o.push(r.b(`${l}-${e[l]}`)):Bt(e[l])&&Object.entries(e[l]).forEach(([c,d])=>{o.push(c!=="span"?r.b(`${l}-${c}-${d}`):r.b(`${l}-${d}`))})}),n.value&&o.push(r.is("guttered")),[r.b(),o]});return(o,a)=>($(),ye(jt(o.tag),{class:F(m(i)),style:mt(m(s))},{default:le(()=>[pe(o.$slots,"default")]),_:3},8,["class","style"]))}});var oZ=We(iZ,[["__file","col.vue"]]);const aZ=Dt(oZ),uC=t=>vt(t)||ut(t)||Ve(t),lZ=Ke({accordion:Boolean,modelValue:{type:de([Array,String,Number]),default:()=>Wn([])},expandIconPosition:{type:de([String]),default:"right"},beforeCollapse:{type:de(Function)}}),uZ={[_t]:uC,[Xt]:uC},EL=Symbol("collapseContextKey"),cZ="ElCollapse",dZ=(t,e)=>{const n=H(Zr(t.modelValue)),r=o=>{n.value=o;const a=t.accordion?n.value[0]:n.value;e(_t,a),e(Xt,a)},s=o=>{if(t.accordion)r([n.value[0]===o?"":o]);else{const a=[...n.value],u=a.indexOf(o);u>-1?a.splice(u,1):a.push(o),r(a)}},i=async o=>{const{beforeCollapse:a}=t;if(!a){s(o);return}const u=a(o);[ul(u),wn(u)].includes(!0)||lr(cZ,"beforeCollapse must return type `Promise<boolean>` or `boolean`"),ul(u)?u.then(c=>{c!==!1&&s(o)}).catch(c=>{}):u&&s(o)};return Ie(()=>t.modelValue,()=>n.value=Zr(t.modelValue),{deep:!0}),Jt(EL,{activeNames:n,handleItemClick:i}),{activeNames:n,setActiveNames:r}},fZ=t=>{const e=Oe("collapse");return{rootKls:L(()=>[e.b(),e.b(`icon-position-${t.expandIconPosition}`)])}},hZ=se({name:"ElCollapse"}),pZ=se({...hZ,props:lZ,emits:uZ,setup(t,{expose:e,emit:n}){const r=t,{activeNames:s,setActiveNames:i}=dZ(r,n),{rootKls:o}=fZ(r);return e({activeNames:s,setActiveNames:i}),(a,u)=>($(),Y("div",{class:F(m(o))},[pe(a.$slots,"default")],2))}});var mZ=We(pZ,[["__file","collapse.vue"]]);const gZ=se({name:"ElCollapseTransition"}),vZ=se({...gZ,setup(t){const e=Oe("collapse-transition"),n=s=>{s.style.maxHeight="",s.style.overflow=s.dataset.oldOverflow,s.style.paddingTop=s.dataset.oldPaddingTop,s.style.paddingBottom=s.dataset.oldPaddingBottom},r={beforeEnter(s){s.dataset||(s.dataset={}),s.dataset.oldPaddingTop=s.style.paddingTop,s.dataset.oldPaddingBottom=s.style.paddingBottom,s.style.height&&(s.dataset.elExistsHeight=s.style.height),s.style.maxHeight=0,s.style.paddingTop=0,s.style.paddingBottom=0},enter(s){requestAnimationFrame(()=>{s.dataset.oldOverflow=s.style.overflow,s.dataset.elExistsHeight?s.style.maxHeight=s.dataset.elExistsHeight:s.scrollHeight!==0?s.style.maxHeight=`${s.scrollHeight}px`:s.style.maxHeight=0,s.style.paddingTop=s.dataset.oldPaddingTop,s.style.paddingBottom=s.dataset.oldPaddingBottom,s.style.overflow="hidden"})},afterEnter(s){s.style.maxHeight="",s.style.overflow=s.dataset.oldOverflow},enterCancelled(s){n(s)},beforeLeave(s){s.dataset||(s.dataset={}),s.dataset.oldPaddingTop=s.style.paddingTop,s.dataset.oldPaddingBottom=s.style.paddingBottom,s.dataset.oldOverflow=s.style.overflow,s.style.maxHeight=`${s.scrollHeight}px`,s.style.overflow="hidden"},leave(s){s.scrollHeight!==0&&(s.style.maxHeight=0,s.style.paddingTop=0,s.style.paddingBottom=0)},afterLeave(s){n(s)},leaveCancelled(s){n(s)}};return(s,i)=>($(),ye(Ar,Yt({name:m(e).b()},C$(r)),{default:le(()=>[pe(s.$slots,"default")]),_:3},16,["name"]))}});var yZ=We(vZ,[["__file","collapse-transition.vue"]]);const Km=Dt(yZ),bZ=Ke({title:{type:String,default:""},name:{type:de([String,Number]),default:void 0},icon:{type:Tn,default:cs},disabled:Boolean}),SZ=t=>{const e=nt(EL),{namespace:n}=Oe("collapse"),r=H(!1),s=H(!1),i=i1(),o=L(()=>i.current++),a=L(()=>{var f;return(f=t.name)!=null?f:`${n.value}-id-${i.prefix}-${m(o)}`}),u=L(()=>e==null?void 0:e.activeNames.value.includes(m(a)));return{focusing:r,id:o,isActive:u,handleFocus:()=>{setTimeout(()=>{s.value?s.value=!1:r.value=!0},50)},handleHeaderClick:()=>{t.disabled||(e==null||e.handleItemClick(m(a)),r.value=!1,s.value=!0)},handleEnterClick:()=>{e==null||e.handleItemClick(m(a))}}},wZ=(t,{focusing:e,isActive:n,id:r})=>{const s=Oe("collapse"),i=L(()=>[s.b("item"),s.is("active",m(n)),s.is("disabled",t.disabled)]),o=L(()=>[s.be("item","header"),s.is("active",m(n)),{focusing:m(e)&&!t.disabled}]),a=L(()=>[s.be("item","arrow"),s.is("active",m(n))]),u=L(()=>[s.be("item","title")]),l=L(()=>s.be("item","wrap")),c=L(()=>s.be("item","content")),d=L(()=>s.b(`content-${m(r)}`)),f=L(()=>s.b(`head-${m(r)}`));return{itemTitleKls:u,arrowKls:a,headKls:o,rootKls:i,itemWrapperKls:l,itemContentKls:c,scopedContentId:d,scopedHeadId:f}},EZ=se({name:"ElCollapseItem"}),xZ=se({...EZ,props:bZ,setup(t,{expose:e}){const n=t,{focusing:r,id:s,isActive:i,handleFocus:o,handleHeaderClick:a,handleEnterClick:u}=SZ(n),{arrowKls:l,headKls:c,rootKls:d,itemTitleKls:f,itemWrapperKls:h,itemContentKls:p,scopedContentId:g,scopedHeadId:v}=wZ(n,{focusing:r,isActive:i,id:s});return e({isActive:i}),(y,w)=>($(),Y("div",{class:F(m(d))},[J("button",{id:m(v),class:F(m(c)),"aria-expanded":m(i),"aria-controls":m(g),"aria-describedby":m(g),tabindex:y.disabled?-1:0,type:"button",onClick:m(a),onKeydown:Sn(wt(m(u),["stop","prevent"]),["space","enter"]),onFocus:m(o),onBlur:b=>r.value=!1},[J("span",{class:F(m(f))},[pe(y.$slots,"title",{isActive:m(i)},()=>[Qt(ze(y.title),1)])],2),pe(y.$slots,"icon",{isActive:m(i)},()=>[ie(m(lt),{class:F(m(l))},{default:le(()=>[($(),ye(jt(y.icon)))]),_:1},8,["class"])])],42,["id","aria-expanded","aria-controls","aria-describedby","tabindex","onClick","onKeydown","onFocus","onBlur"]),ie(m(Km),null,{default:le(()=>[Ot(J("div",{id:m(g),role:"region",class:F(m(h)),"aria-hidden":!m(i),"aria-labelledby":m(v)},[J("div",{class:F(m(p))},[pe(y.$slots,"default")],2)],10,["id","aria-hidden","aria-labelledby"]),[[cn,m(i)]])]),_:3})],2))}});var xL=We(xZ,[["__file","collapse-item.vue"]]);const TZ=Dt(mZ,{CollapseItem:xL}),CZ=Gn(xL),kZ=Ke({color:{type:de(Object),required:!0},vertical:{type:Boolean,default:!1}});let kv=!1;function kd(t,e){if(!on)return;const n=function(i){var o;(o=e.drag)==null||o.call(e,i)},r=function(i){var o;document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",r),document.onselectstart=null,document.ondragstart=null,kv=!1,(o=e.end)==null||o.call(e,i)},s=function(i){var o;kv||(i.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n),document.addEventListener("mouseup",r),document.addEventListener("touchmove",n),document.addEventListener("touchend",r),kv=!0,(o=e.start)==null||o.call(e,i))};t.addEventListener("mousedown",s),t.addEventListener("touchstart",s,{passive:!1})}const _Z=(t,e)=>{if(!on||!t||!e)return!1;const n=t.getBoundingClientRect();let r;return e instanceof Element?r=e.getBoundingClientRect():r={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<r.bottom&&n.bottom>r.top&&n.right>r.left&&n.left<r.right},cC=t=>{let e=0,n=t;for(;n;)e+=n.offsetTop,n=n.offsetParent;return e},W0=(t,e)=>Math.abs(cC(t)-cC(e)),x1=t=>{let e,n;return t.type==="touchend"?(n=t.changedTouches[0].clientY,e=t.changedTouches[0].clientX):t.type.startsWith("touch")?(n=t.touches[0].clientY,e=t.touches[0].clientX):(n=t.clientY,e=t.clientX),{clientX:e,clientY:n}},AZ=t=>{const e=Kt(),{t:n}=sn(),r=On(),s=On(),i=L(()=>t.color.get("alpha")),o=L(()=>n("el.colorpicker.alphaLabel"));function a(d){var f;d.target!==r.value&&u(d),(f=r.value)==null||f.focus()}function u(d){if(!s.value||!r.value)return;const h=e.vnode.el.getBoundingClientRect(),{clientX:p,clientY:g}=x1(d);if(t.vertical){let v=g-h.top;v=Math.max(r.value.offsetHeight/2,v),v=Math.min(v,h.height-r.value.offsetHeight/2),t.color.set("alpha",Math.round((v-r.value.offsetHeight/2)/(h.height-r.value.offsetHeight)*100))}else{let v=p-h.left;v=Math.max(r.value.offsetWidth/2,v),v=Math.min(v,h.width-r.value.offsetWidth/2),t.color.set("alpha",Math.round((v-r.value.offsetWidth/2)/(h.width-r.value.offsetWidth)*100))}}function l(d){const{code:f,shiftKey:h}=d,p=h?10:1;switch(f){case it.left:case it.down:d.preventDefault(),d.stopPropagation(),c(-p);break;case it.right:case it.up:d.preventDefault(),d.stopPropagation(),c(p);break}}function c(d){let f=i.value+d;f=f<0?0:f>100?100:f,t.color.set("alpha",f)}return{thumb:r,bar:s,alpha:i,alphaLabel:o,handleDrag:u,handleClick:a,handleKeydown:l}},IZ=(t,{bar:e,thumb:n,handleDrag:r})=>{const s=Kt(),i=Oe("color-alpha-slider"),o=H(0),a=H(0),u=H();function l(){if(!n.value||t.vertical)return 0;const w=s.vnode.el,b=t.color.get("alpha");return w?Math.round(b*(w.offsetWidth-n.value.offsetWidth/2)/100):0}function c(){if(!n.value)return 0;const w=s.vnode.el;if(!t.vertical)return 0;const b=t.color.get("alpha");return w?Math.round(b*(w.offsetHeight-n.value.offsetHeight/2)/100):0}function d(){if(t.color&&t.color.value){const{r:w,g:b,b:S}=t.color.toRgb();return`linear-gradient(to right, rgba(${w}, ${b}, ${S}, 0) 0%, rgba(${w}, ${b}, ${S}, 1) 100%)`}return""}function f(){o.value=l(),a.value=c(),u.value=d()}Ft(()=>{if(!e.value||!n.value)return;const w={drag:b=>{r(b)},end:b=>{r(b)}};kd(e.value,w),kd(n.value,w),f()}),Ie(()=>t.color.get("alpha"),()=>f()),Ie(()=>t.color.value,()=>f());const h=L(()=>[i.b(),i.is("vertical",t.vertical)]),p=L(()=>i.e("bar")),g=L(()=>i.e("thumb")),v=L(()=>({background:u.value})),y=L(()=>({left:Xn(o.value),top:Xn(a.value)}));return{rootKls:h,barKls:p,barStyle:v,thumbKls:g,thumbStyle:y,update:f}},RZ="ElColorAlphaSlider",LZ=se({name:RZ}),PZ=se({...LZ,props:kZ,setup(t,{expose:e}){const n=t,{alpha:r,alphaLabel:s,bar:i,thumb:o,handleDrag:a,handleClick:u,handleKeydown:l}=AZ(n),{rootKls:c,barKls:d,barStyle:f,thumbKls:h,thumbStyle:p,update:g}=IZ(n,{bar:i,thumb:o,handleDrag:a});return e({update:g,bar:i,thumb:o}),(v,y)=>($(),Y("div",{class:F(m(c))},[J("div",{ref_key:"bar",ref:i,class:F(m(d)),style:mt(m(f)),onClick:m(u)},null,14,["onClick"]),J("div",{ref_key:"thumb",ref:o,class:F(m(h)),style:mt(m(p)),"aria-label":m(s),"aria-valuenow":m(r),"aria-orientation":v.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:m(l)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}});var DZ=We(PZ,[["__file","alpha-slider.vue"]]);const OZ=se({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(t){const e=Oe("color-hue-slider"),n=Kt(),r=H(),s=H(),i=H(0),o=H(0),a=L(()=>t.color.get("hue"));Ie(()=>a.value,()=>{f()});function u(h){h.target!==r.value&&l(h)}function l(h){if(!s.value||!r.value)return;const g=n.vnode.el.getBoundingClientRect(),{clientX:v,clientY:y}=x1(h);let w;if(t.vertical){let b=y-g.top;b=Math.min(b,g.height-r.value.offsetHeight/2),b=Math.max(r.value.offsetHeight/2,b),w=Math.round((b-r.value.offsetHeight/2)/(g.height-r.value.offsetHeight)*360)}else{let b=v-g.left;b=Math.min(b,g.width-r.value.offsetWidth/2),b=Math.max(r.value.offsetWidth/2,b),w=Math.round((b-r.value.offsetWidth/2)/(g.width-r.value.offsetWidth)*360)}t.color.set("hue",w)}function c(){if(!r.value)return 0;const h=n.vnode.el;if(t.vertical)return 0;const p=t.color.get("hue");return h?Math.round(p*(h.offsetWidth-r.value.offsetWidth/2)/360):0}function d(){if(!r.value)return 0;const h=n.vnode.el;if(!t.vertical)return 0;const p=t.color.get("hue");return h?Math.round(p*(h.offsetHeight-r.value.offsetHeight/2)/360):0}function f(){i.value=c(),o.value=d()}return Ft(()=>{if(!s.value||!r.value)return;const h={drag:p=>{l(p)},end:p=>{l(p)}};kd(s.value,h),kd(r.value,h),f()}),{bar:s,thumb:r,thumbLeft:i,thumbTop:o,hueValue:a,handleClick:u,update:f,ns:e}}});function $Z(t,e,n,r,s,i){return $(),Y("div",{class:F([t.ns.b(),t.ns.is("vertical",t.vertical)])},[J("div",{ref:"bar",class:F(t.ns.e("bar")),onClick:t.handleClick},null,10,["onClick"]),J("div",{ref:"thumb",class:F(t.ns.e("thumb")),style:mt({left:t.thumbLeft+"px",top:t.thumbTop+"px"})},null,6)],2)}var MZ=We(OZ,[["render",$Z],["__file","hue-slider.vue"]]);const NZ=Ke({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:fr,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:nr.teleported,predefine:{type:de(Array)},validateEvent:{type:Boolean,default:!0},...$r(["ariaLabel"])}),FZ={[_t]:t=>ut(t)||Sr(t),[Xt]:t=>ut(t)||Sr(t),activeChange:t=>ut(t)||Sr(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent},TL=Symbol("colorPickerContextKey"),dC=function(t,e,n){return[t,e*n/((t=(2-e)*n)<1?t:2-t)||0,t/2]},BZ=function(t){return ut(t)&&t.includes(".")&&Number.parseFloat(t)===1},VZ=function(t){return ut(t)&&t.includes("%")},au=function(t,e){BZ(t)&&(t="100%");const n=VZ(t);return t=Math.min(e,Math.max(0,Number.parseFloat(`${t}`))),n&&(t=Number.parseInt(`${t*e}`,10)/100),Math.abs(t-e)<1e-6?1:t%e/Number.parseFloat(e)},fC={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},Oh=t=>{t=Math.min(Math.round(t),255);const e=Math.floor(t/16),n=t%16;return`${fC[e]||e}${fC[n]||n}`},hC=function({r:t,g:e,b:n}){return Number.isNaN(+t)||Number.isNaN(+e)||Number.isNaN(+n)?"":`#${Oh(t)}${Oh(e)}${Oh(n)}`},_v={A:10,B:11,C:12,D:13,E:14,F:15},Ha=function(t){return t.length===2?(_v[t[0].toUpperCase()]||+t[0])*16+(_v[t[1].toUpperCase()]||+t[1]):_v[t[1].toUpperCase()]||+t[1]},UZ=function(t,e,n){e=e/100,n=n/100;let r=e;const s=Math.max(n,.01);n*=2,e*=n<=1?n:2-n,r*=s<=1?s:2-s;const i=(n+e)/2,o=n===0?2*r/(s+r):2*e/(n+e);return{h:t,s:o*100,v:i*100}},pC=(t,e,n)=>{t=au(t,255),e=au(e,255),n=au(n,255);const r=Math.max(t,e,n),s=Math.min(t,e,n);let i;const o=r,a=r-s,u=r===0?0:a/r;if(r===s)i=0;else{switch(r){case t:{i=(e-n)/a+(e<n?6:0);break}case e:{i=(n-t)/a+2;break}case n:{i=(t-e)/a+4;break}}i/=6}return{h:i*360,s:u*100,v:o*100}},bc=function(t,e,n){t=au(t,360)*6,e=au(e,100),n=au(n,100);const r=Math.floor(t),s=t-r,i=n*(1-e),o=n*(1-s*e),a=n*(1-(1-s)*e),u=r%6,l=[n,o,i,i,a,n][u],c=[a,n,n,o,i,i][u],d=[i,i,a,n,n,o][u];return{r:Math.round(l*255),g:Math.round(c*255),b:Math.round(d*255)}};class qc{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const n in e)hn(e,n)&&(this[n]=e[n]);e.value?this.fromString(e.value):this.doOnChange()}set(e,n){if(arguments.length===1&&typeof e=="object"){for(const r in e)hn(e,r)&&this.set(r,e[r]);return}this[`_${e}`]=n,this.doOnChange()}get(e){return e==="alpha"?Math.floor(this[`_${e}`]):this[`_${e}`]}toRgb(){return bc(this._hue,this._saturation,this._value)}fromString(e){if(!e){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const n=(r,s,i)=>{this._hue=Math.max(0,Math.min(360,r)),this._saturation=Math.max(0,Math.min(100,s)),this._value=Math.max(0,Math.min(100,i)),this.doOnChange()};if(e.includes("hsl")){const r=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(s=>s!=="").map((s,i)=>i>2?Number.parseFloat(s):Number.parseInt(s,10));if(r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3){const{h:s,s:i,v:o}=UZ(r[0],r[1],r[2]);n(s,i,o)}}else if(e.includes("hsv")){const r=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(s=>s!=="").map((s,i)=>i>2?Number.parseFloat(s):Number.parseInt(s,10));r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3&&n(r[0],r[1],r[2])}else if(e.includes("rgb")){const r=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(s=>s!=="").map((s,i)=>i>2?Number.parseFloat(s):Number.parseInt(s,10));if(r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3){const{h:s,s:i,v:o}=pC(r[0],r[1],r[2]);n(s,i,o)}}else if(e.includes("#")){const r=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(r))return;let s,i,o;r.length===3?(s=Ha(r[0]+r[0]),i=Ha(r[1]+r[1]),o=Ha(r[2]+r[2])):(r.length===6||r.length===8)&&(s=Ha(r.slice(0,2)),i=Ha(r.slice(2,4)),o=Ha(r.slice(4,6))),r.length===8?this._alpha=Ha(r.slice(6))/255*100:(r.length===3||r.length===6)&&(this._alpha=100);const{h:a,s:u,v:l}=pC(s,i,o);n(a,u,l)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:n,_value:r,_alpha:s,format:i}=this;if(this.enableAlpha)switch(i){case"hsl":{const o=dC(e,n/100,r/100);this.value=`hsla(${e}, ${Math.round(o[1]*100)}%, ${Math.round(o[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${e}, ${Math.round(n)}%, ${Math.round(r)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${hC(bc(e,n,r))}${Oh(s*255/100)}`;break}default:{const{r:o,g:a,b:u}=bc(e,n,r);this.value=`rgba(${o}, ${a}, ${u}, ${this.get("alpha")/100})`}}else switch(i){case"hsl":{const o=dC(e,n/100,r/100);this.value=`hsl(${e}, ${Math.round(o[1]*100)}%, ${Math.round(o[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${e}, ${Math.round(n)}%, ${Math.round(r)}%)`;break}case"rgb":{const{r:o,g:a,b:u}=bc(e,n,r);this.value=`rgb(${o}, ${a}, ${u})`;break}default:this.value=hC(bc(e,n,r))}}}const HZ=se({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(t){const e=Oe("color-predefine"),{currentColor:n}=nt(TL),r=H(i(t.colors,t.color));Ie(()=>n.value,o=>{const a=new qc;a.fromString(o),r.value.forEach(u=>{u.selected=a.compare(u)})}),Fr(()=>{r.value=i(t.colors,t.color)});function s(o){t.color.fromString(t.colors[o])}function i(o,a){return o.map(u=>{const l=new qc;return l.enableAlpha=t.enableAlpha,l.format="rgba",l.fromString(u),l.selected=l.value===a.value,l})}return{rgbaColors:r,handleSelect:s,ns:e}}});function jZ(t,e,n,r,s,i){return $(),Y("div",{class:F(t.ns.b())},[J("div",{class:F(t.ns.e("colors"))},[($(!0),Y(dt,null,Zt(t.rgbaColors,(o,a)=>($(),Y("div",{key:t.colors[a],class:F([t.ns.e("color-selector"),t.ns.is("alpha",o._alpha<100),{selected:o.selected}]),onClick:u=>t.handleSelect(a)},[J("div",{style:mt({backgroundColor:o.value})},null,4)],10,["onClick"]))),128))],2)],2)}var KZ=We(HZ,[["render",jZ],["__file","predefine.vue"]]);const zZ=se({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(t){const e=Oe("color-svpanel"),n=Kt(),r=H(0),s=H(0),i=H("hsl(0, 100%, 50%)"),o=L(()=>{const l=t.color.get("hue"),c=t.color.get("value");return{hue:l,value:c}});function a(){const l=t.color.get("saturation"),c=t.color.get("value"),d=n.vnode.el,{clientWidth:f,clientHeight:h}=d;s.value=l*f/100,r.value=(100-c)*h/100,i.value=`hsl(${t.color.get("hue")}, 100%, 50%)`}function u(l){const d=n.vnode.el.getBoundingClientRect(),{clientX:f,clientY:h}=x1(l);let p=f-d.left,g=h-d.top;p=Math.max(0,p),p=Math.min(p,d.width),g=Math.max(0,g),g=Math.min(g,d.height),s.value=p,r.value=g,t.color.set({saturation:p/d.width*100,value:100-g/d.height*100})}return Ie(()=>o.value,()=>{a()}),Ft(()=>{kd(n.vnode.el,{drag:l=>{u(l)},end:l=>{u(l)}}),a()}),{cursorTop:r,cursorLeft:s,background:i,colorValue:o,handleDrag:u,update:a,ns:e}}});function WZ(t,e,n,r,s,i){return $(),Y("div",{class:F(t.ns.b()),style:mt({backgroundColor:t.background})},[J("div",{class:F(t.ns.e("white"))},null,2),J("div",{class:F(t.ns.e("black"))},null,2),J("div",{class:F(t.ns.e("cursor")),style:mt({top:t.cursorTop+"px",left:t.cursorLeft+"px"})},[J("div")],6)],6)}var GZ=We(zZ,[["render",WZ],["__file","sv-panel.vue"]]);const qZ=se({name:"ElColorPicker"}),YZ=se({...qZ,props:NZ,emits:FZ,setup(t,{expose:e,emit:n}){const r=t,{t:s}=sn(),i=Oe("color"),{formItem:o}=Ur(),a=ur(),u=Hr(),{inputId:l,isLabeledByFormItem:c}=ci(r,{formItemContext:o}),d=H(),f=H(),h=H(),p=H(),g=H(),v=H(),{isFocused:y,handleFocus:w,handleBlur:b}=Pa(g,{beforeFocus(){return u.value},beforeBlur(ae){var Te;return(Te=p.value)==null?void 0:Te.isFocusInsideContent(ae)},afterBlur(){N(!1),M()}});let S=!0;const E=fn(new qc({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue})),x=H(!1),k=H(!1),A=H(""),C=L(()=>!r.modelValue&&!k.value?"transparent":j(E,r.showAlpha)),_=L(()=>!r.modelValue&&!k.value?"":E.value),O=L(()=>c.value?void 0:r.ariaLabel||s("el.colorpicker.defaultLabel")),P=L(()=>c.value?o==null?void 0:o.labelId:void 0),U=L(()=>[i.b("picker"),i.is("disabled",u.value),i.bm("picker",a.value),i.is("focused",y.value)]);function j(ae,Te){if(!(ae instanceof qc))throw new TypeError("color should be instance of _color Class");const{r:Ce,g:z,b:re}=ae.toRgb();return Te?`rgba(${Ce}, ${z}, ${re}, ${ae.get("alpha")/100})`:`rgb(${Ce}, ${z}, ${re})`}function N(ae){x.value=ae}const R=_s(N,100,{leading:!0});function V(){u.value||N(!0)}function D(){R(!1),M()}function M(){ft(()=>{r.modelValue?E.fromString(r.modelValue):(E.value="",ft(()=>{k.value=!1}))})}function K(){u.value||(x.value&&M(),R(!x.value))}function q(){E.fromString(A.value)}function ee(){const ae=E.value;n(_t,ae),n(Xt,ae),r.validateEvent&&(o==null||o.validate("change").catch(Te=>void 0)),R(!1),ft(()=>{const Te=new qc({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue});E.compare(Te)||M()})}function X(){R(!1),n(_t,null),n(Xt,null),r.modelValue!==null&&r.validateEvent&&(o==null||o.validate("change").catch(ae=>void 0)),M()}function te(){x.value&&(D(),y.value&&Z())}function ue(ae){ae.preventDefault(),ae.stopPropagation(),N(!1),M()}function he(ae){switch(ae.code){case it.enter:case it.numpadEnter:case it.space:ae.preventDefault(),ae.stopPropagation(),V(),v.value.focus();break;case it.esc:ue(ae);break}}function Z(){g.value.focus()}function ce(){g.value.blur()}return Ft(()=>{r.modelValue&&(A.value=_.value)}),Ie(()=>r.modelValue,ae=>{ae?ae&&ae!==E.value&&(S=!1,E.fromString(ae)):k.value=!1}),Ie(()=>[r.colorFormat,r.showAlpha],()=>{E.enableAlpha=r.showAlpha,E.format=r.colorFormat||E.format,E.doOnChange(),n(_t,E.value)}),Ie(()=>_.value,ae=>{A.value=ae,S&&n("activeChange",ae),S=!0}),Ie(()=>E.value,()=>{!r.modelValue&&!k.value&&(k.value=!0)}),Ie(()=>x.value,()=>{ft(()=>{var ae,Te,Ce;(ae=d.value)==null||ae.update(),(Te=f.value)==null||Te.update(),(Ce=h.value)==null||Ce.update()})}),Jt(TL,{currentColor:_}),e({color:E,show:V,hide:D,focus:Z,blur:ce}),(ae,Te)=>($(),ye(m(Vr),{ref_key:"popper",ref:p,visible:x.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[m(i).be("picker","panel"),m(i).b("dropdown"),ae.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:ae.teleported,transition:`${m(i).namespace.value}-zoom-in-top`,persistent:"",onHide:Ce=>N(!1)},{content:le(()=>[Ot(($(),Y("div",{onKeydown:Sn(ue,["esc"])},[J("div",{class:F(m(i).be("dropdown","main-wrapper"))},[ie(MZ,{ref_key:"hue",ref:d,class:"hue-slider",color:m(E),vertical:""},null,8,["color"]),ie(GZ,{ref_key:"sv",ref:f,color:m(E)},null,8,["color"])],2),ae.showAlpha?($(),ye(DZ,{key:0,ref_key:"alpha",ref:h,color:m(E)},null,8,["color"])):ge("v-if",!0),ae.predefine?($(),ye(KZ,{key:1,ref:"predefine","enable-alpha":ae.showAlpha,color:m(E),colors:ae.predefine},null,8,["enable-alpha","color","colors"])):ge("v-if",!0),J("div",{class:F(m(i).be("dropdown","btns"))},[J("span",{class:F(m(i).be("dropdown","value"))},[ie(m(es),{ref_key:"inputRef",ref:v,modelValue:A.value,"onUpdate:modelValue":Ce=>A.value=Ce,"validate-event":!1,size:"small",onKeyup:Sn(q,["enter"]),onBlur:q},null,8,["modelValue","onUpdate:modelValue","onKeyup"])],2),ie(m(Cr),{class:F(m(i).be("dropdown","link-btn")),text:"",size:"small",onClick:X},{default:le(()=>[Qt(ze(m(s)("el.colorpicker.clear")),1)]),_:1},8,["class"]),ie(m(Cr),{plain:"",size:"small",class:F(m(i).be("dropdown","btn")),onClick:ee},{default:le(()=>[Qt(ze(m(s)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[m(Oo),te,g.value]])]),default:le(()=>[J("div",Yt({id:m(l),ref_key:"triggerRef",ref:g},ae.$attrs,{class:m(U),role:"button","aria-label":m(O),"aria-labelledby":m(P),"aria-description":m(s)("el.colorpicker.description",{color:ae.modelValue||""}),"aria-disabled":m(u),tabindex:m(u)?void 0:ae.tabindex,onKeydown:he,onFocus:m(w),onBlur:m(b)}),[m(u)?($(),Y("div",{key:0,class:F(m(i).be("picker","mask"))},null,2)):ge("v-if",!0),J("div",{class:F(m(i).be("picker","trigger")),onClick:K},[J("span",{class:F([m(i).be("picker","color"),m(i).is("alpha",ae.showAlpha)])},[J("span",{class:F(m(i).be("picker","color-inner")),style:mt({backgroundColor:m(C)})},[Ot(ie(m(lt),{class:F([m(i).be("picker","icon"),m(i).is("icon-arrow-down")])},{default:le(()=>[ie(m(Bo))]),_:1},8,["class"]),[[cn,ae.modelValue||k.value]]),Ot(ie(m(lt),{class:F([m(i).be("picker","empty"),m(i).is("icon-close")])},{default:le(()=>[ie(m(si))]),_:1},8,["class"]),[[cn,!ae.modelValue&&!k.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","onHide"]))}});var XZ=We(YZ,[["__file","color-picker.vue"]]);const QZ=Dt(XZ),ZZ=Ke({a11y:{type:Boolean,default:!0},locale:{type:de(Object)},size:fr,button:{type:de(Object)},link:{type:de(Object)},experimentalFeatures:{type:de(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:de(Object)},zIndex:Number,namespace:{type:String,default:"el"},...qu}),Ds={},JZ=se({name:"ElConfigProvider",props:ZZ,setup(t,{slots:e}){Ie(()=>t.message,r=>{Object.assign(Ds,r??{})},{immediate:!0,deep:!0});const n=e1(t);return()=>pe(e,"default",{config:n==null?void 0:n.value})}}),eJ=Dt(JZ),tJ=se({name:"ElContainer"}),nJ=se({...tJ,props:{direction:{type:String}},setup(t){const e=t,n=gr(),r=Oe("container"),s=L(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:n&&n.default?n.default().some(o=>{const a=o.type.name;return a==="ElHeader"||a==="ElFooter"}):!1);return(i,o)=>($(),Y("section",{class:F([m(r).b(),m(r).is("vertical",m(s))])},[pe(i.$slots,"default")],2))}});var rJ=We(nJ,[["__file","container.vue"]]);const sJ=se({name:"ElAside"}),iJ=se({...sJ,props:{width:{type:String,default:null}},setup(t){const e=t,n=Oe("aside"),r=L(()=>e.width?n.cssVarBlock({width:e.width}):{});return(s,i)=>($(),Y("aside",{class:F(m(n).b()),style:mt(m(r))},[pe(s.$slots,"default")],6))}});var CL=We(iJ,[["__file","aside.vue"]]);const oJ=se({name:"ElFooter"}),aJ=se({...oJ,props:{height:{type:String,default:null}},setup(t){const e=t,n=Oe("footer"),r=L(()=>e.height?n.cssVarBlock({height:e.height}):{});return(s,i)=>($(),Y("footer",{class:F(m(n).b()),style:mt(m(r))},[pe(s.$slots,"default")],6))}});var kL=We(aJ,[["__file","footer.vue"]]);const lJ=se({name:"ElHeader"}),uJ=se({...lJ,props:{height:{type:String,default:null}},setup(t){const e=t,n=Oe("header"),r=L(()=>e.height?n.cssVarBlock({height:e.height}):{});return(s,i)=>($(),Y("header",{class:F(m(n).b()),style:mt(m(r))},[pe(s.$slots,"default")],6))}});var _L=We(uJ,[["__file","header.vue"]]);const cJ=se({name:"ElMain"}),dJ=se({...cJ,setup(t){const e=Oe("main");return(n,r)=>($(),Y("main",{class:F(m(e).b())},[pe(n.$slots,"default")],2))}});var AL=We(dJ,[["__file","main.vue"]]);const fJ=Dt(rJ,{Aside:CL,Footer:kL,Header:_L,Main:AL}),hJ=Gn(CL),pJ=Gn(kL),mJ=Gn(_L),gJ=Gn(AL);var $h={exports:{}},vJ=$h.exports,mC;function yJ(){return mC||(mC=1,function(t,e){(function(n,r){t.exports=r()})(vJ,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,s=/\d/,i=/\d\d/,o=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,u={},l=function(v){return(v=+v)+(v>68?1900:2e3)},c=function(v){return function(y){this[v]=+y}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=function(y){if(!y||y==="Z")return 0;var w=y.match(/([+-]|\d\d)/g),b=60*w[1]+(+w[2]||0);return b===0?0:w[0]==="+"?-b:b}(v)}],f=function(v){var y=u[v];return y&&(y.indexOf?y:y.s.concat(y.f))},h=function(v,y){var w,b=u.meridiem;if(b){for(var S=1;S<=24;S+=1)if(v.indexOf(b(S,0,y))>-1){w=S>12;break}}else w=v===(y?"pm":"PM");return w},p={A:[a,function(v){this.afternoon=h(v,!1)}],a:[a,function(v){this.afternoon=h(v,!0)}],Q:[s,function(v){this.month=3*(v-1)+1}],S:[s,function(v){this.milliseconds=100*+v}],SS:[i,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[o,c("seconds")],ss:[o,c("seconds")],m:[o,c("minutes")],mm:[o,c("minutes")],H:[o,c("hours")],h:[o,c("hours")],HH:[o,c("hours")],hh:[o,c("hours")],D:[o,c("day")],DD:[i,c("day")],Do:[a,function(v){var y=u.ordinal,w=v.match(/\d+/);if(this.day=w[0],y)for(var b=1;b<=31;b+=1)y(b).replace(/\[|\]/g,"")===v&&(this.day=b)}],w:[o,c("week")],ww:[i,c("week")],M:[o,c("month")],MM:[i,c("month")],MMM:[a,function(v){var y=f("months"),w=(f("monthsShort")||y.map(function(b){return b.slice(0,3)})).indexOf(v)+1;if(w<1)throw new Error;this.month=w%12||w}],MMMM:[a,function(v){var y=f("months").indexOf(v)+1;if(y<1)throw new Error;this.month=y%12||y}],Y:[/[+-]?\d+/,c("year")],YY:[i,function(v){this.year=l(v)}],YYYY:[/\d{4}/,c("year")],Z:d,ZZ:d};function g(v){var y,w;y=v,w=u&&u.formats;for(var b=(v=y.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(_,O,P){var U=P&&P.toUpperCase();return O||w[P]||n[P]||w[U].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(j,N,R){return N||R.slice(1)})})).match(r),S=b.length,E=0;E<S;E+=1){var x=b[E],k=p[x],A=k&&k[0],C=k&&k[1];b[E]=C?{regex:A,parser:C}:x.replace(/^\[|\]$/g,"")}return function(_){for(var O={},P=0,U=0;P<S;P+=1){var j=b[P];if(typeof j=="string")U+=j.length;else{var N=j.regex,R=j.parser,V=_.slice(U),D=N.exec(V)[0];R.call(O,D),_=_.replace(D,"")}}return function(M){var K=M.afternoon;if(K!==void 0){var q=M.hours;K?q<12&&(M.hours+=12):q===12&&(M.hours=0),delete M.afternoon}}(O),O}}return function(v,y,w){w.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(l=v.parseTwoDigitYear);var b=y.prototype,S=b.parse;b.parse=function(E){var x=E.date,k=E.utc,A=E.args;this.$u=k;var C=A[1];if(typeof C=="string"){var _=A[2]===!0,O=A[3]===!0,P=_||O,U=A[2];O&&(U=A[2]),u=this.$locale(),!_&&U&&(u=w.Ls[U]),this.$d=function(V,D,M,K){try{if(["x","X"].indexOf(D)>-1)return new Date((D==="X"?1e3:1)*V);var q=g(D)(V),ee=q.year,X=q.month,te=q.day,ue=q.hours,he=q.minutes,Z=q.seconds,ce=q.milliseconds,ae=q.zone,Te=q.week,Ce=new Date,z=te||(ee||X?1:Ce.getDate()),re=ee||Ce.getFullYear(),ve=0;ee&&!X||(ve=X>0?X-1:Ce.getMonth());var ke,Ee=ue||0,be=he||0,Se=Z||0,_e=ce||0;return ae?new Date(Date.UTC(re,ve,z,Ee,be,Se,_e+60*ae.offset*1e3)):M?new Date(Date.UTC(re,ve,z,Ee,be,Se,_e)):(ke=new Date(re,ve,z,Ee,be,Se,_e),Te&&(ke=K(ke).week(Te).toDate()),ke)}catch{return new Date("")}}(x,C,k,w),this.init(),U&&U!==!0&&(this.$L=this.locale(U).$L),P&&x!=this.format(C)&&(this.$d=new Date("")),u={}}else if(C instanceof Array)for(var j=C.length,N=1;N<=j;N+=1){A[1]=C[N-1];var R=w.apply(this,A);if(R.isValid()){this.$d=R.$d,this.$L=R.$L,this.init();break}N===j&&(this.$d=new Date(""))}else S.call(this,E)}}})}($h)),$h.exports}var bJ=yJ();const T1=ui(bJ);var Mh={exports:{}},SJ=Mh.exports,gC;function wJ(){return gC||(gC=1,function(t,e){(function(n,r){t.exports=r()})(SJ,function(){return function(n,r){var s=r.prototype,i=s.format;s.format=function(o){var a=this,u=this.$locale();if(!this.isValid())return i.bind(this)(o);var l=this.$utils(),c=(o||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(d){switch(d){case"Q":return Math.ceil((a.$M+1)/3);case"Do":return u.ordinal(a.$D);case"gggg":return a.weekYear();case"GGGG":return a.isoWeekYear();case"wo":return u.ordinal(a.week(),"W");case"w":case"ww":return l.s(a.week(),d==="w"?1:2,"0");case"W":case"WW":return l.s(a.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return l.s(String(a.$H===0?24:a.$H),d==="k"?1:2,"0");case"X":return Math.floor(a.$d.getTime()/1e3);case"x":return a.$d.getTime();case"z":return"["+a.offsetName()+"]";case"zzz":return"["+a.offsetName("long")+"]";default:return d}});return i.bind(this)(c)}}})}(Mh)),Mh.exports}var EJ=wJ();const xJ=ui(EJ);var Nh={exports:{}},TJ=Nh.exports,vC;function CJ(){return vC||(vC=1,function(t,e){(function(n,r){t.exports=r()})(TJ,function(){var n="week",r="year";return function(s,i,o){var a=i.prototype;a.week=function(u){if(u===void 0&&(u=null),u!==null)return this.add(7*(u-this.week()),"day");var l=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var c=o(this).startOf(r).add(1,r).date(l),d=o(this).endOf(n);if(c.isBefore(d))return 1}var f=o(this).startOf(r).date(l).startOf(n).subtract(1,"millisecond"),h=this.diff(f,n,!0);return h<0?o(this).startOf("week").week():Math.ceil(h)},a.weeks=function(u){return u===void 0&&(u=null),this.week(u)}}})}(Nh)),Nh.exports}var kJ=CJ();const _J=ui(kJ);var Fh={exports:{}},AJ=Fh.exports,yC;function IJ(){return yC||(yC=1,function(t,e){(function(n,r){t.exports=r()})(AJ,function(){return function(n,r){r.prototype.weekYear=function(){var s=this.month(),i=this.week(),o=this.year();return i===1&&s===11?o+1:s===0&&i>=52?o-1:o}}})}(Fh)),Fh.exports}var RJ=IJ();const LJ=ui(RJ);var Bh={exports:{}},PJ=Bh.exports,bC;function DJ(){return bC||(bC=1,function(t,e){(function(n,r){t.exports=r()})(PJ,function(){return function(n,r,s){r.prototype.dayOfYear=function(i){var o=Math.round((s(this).startOf("day")-s(this).startOf("year"))/864e5)+1;return i==null?o:this.add(i-o,"day")}}})}(Bh)),Bh.exports}var OJ=DJ();const $J=ui(OJ);var Vh={exports:{}},MJ=Vh.exports,SC;function NJ(){return SC||(SC=1,function(t,e){(function(n,r){t.exports=r()})(MJ,function(){return function(n,r){r.prototype.isSameOrAfter=function(s,i){return this.isSame(s,i)||this.isAfter(s,i)}}})}(Vh)),Vh.exports}var FJ=NJ();const BJ=ui(FJ);var Uh={exports:{}},VJ=Uh.exports,wC;function UJ(){return wC||(wC=1,function(t,e){(function(n,r){t.exports=r()})(VJ,function(){return function(n,r){r.prototype.isSameOrBefore=function(s,i){return this.isSame(s,i)||this.isBefore(s,i)}}})}(Uh)),Uh.exports}var HJ=UJ();const jJ=ui(HJ),EC=["hours","minutes","seconds"],$p="HH:mm:ss",jl="YYYY-MM-DD",KJ={date:jl,dates:jl,week:"gggg[w]ww",year:"YYYY",years:"YYYY",month:"YYYY-MM",months:"YYYY-MM",datetime:`${jl} ${$p}`,monthrange:"YYYY-MM",yearrange:"YYYY",daterange:jl,datetimerange:`${jl} ${$p}`},IL=Ke({disabledHours:{type:de(Function)},disabledMinutes:{type:de(Function)},disabledSeconds:{type:de(Function)}}),RL=Ke({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),C1=Ke({id:{type:de([Array,String])},name:{type:de([Array,String])},popperClass:{type:String,default:""},format:String,valueFormat:String,dateFormat:String,timeFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:de([String,Object]),default:Vo},editable:{type:Boolean,default:!0},prefixIcon:{type:de([String,Object]),default:""},size:fr,readonly:Boolean,disabled:Boolean,placeholder:{type:String,default:""},popperOptions:{type:de(Object),default:()=>({})},modelValue:{type:de([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:de([Date,Array])},defaultTime:{type:de([Date,Array])},isRange:Boolean,...IL,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:Boolean,tabindex:{type:de([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean,placement:{type:de(String),values:jo,default:"bottom"},fallbackPlacements:{type:de(Array),default:["bottom","top","right","left"]},...qu,...$r(["ariaLabel"]),showNow:{type:Boolean,default:!0}}),zJ=Ke({id:{type:de(Array)},name:{type:de(Array)},modelValue:{type:de([Array,String])},startPlaceholder:String,endPlaceholder:String,disabled:Boolean}),WJ=se({name:"PickerRangeTrigger",inheritAttrs:!1}),GJ=se({...WJ,props:zJ,emits:["mouseenter","mouseleave","click","touchstart","focus","blur","startInput","endInput","startChange","endChange"],setup(t,{expose:e,emit:n}){const r=Jd(),s=Oe("date"),i=Oe("range"),o=H(),a=H(),{wrapperRef:u,isFocused:l}=Pa(o),c=S=>{n("click",S)},d=S=>{n("mouseenter",S)},f=S=>{n("mouseleave",S)},h=S=>{n("mouseenter",S)},p=S=>{n("startInput",S)},g=S=>{n("endInput",S)},v=S=>{n("startChange",S)},y=S=>{n("endChange",S)};return e({focus:()=>{var S;(S=o.value)==null||S.focus()},blur:()=>{var S,E;(S=o.value)==null||S.blur(),(E=a.value)==null||E.blur()}}),(S,E)=>($(),Y("div",{ref_key:"wrapperRef",ref:u,class:F([m(s).is("active",m(l)),S.$attrs.class]),style:mt(S.$attrs.style),onClick:c,onMouseenter:d,onMouseleave:f,onTouchstartPassive:h},[pe(S.$slots,"prefix"),J("input",Yt(m(r),{id:S.id&&S.id[0],ref_key:"inputRef",ref:o,name:S.name&&S.name[0],placeholder:S.startPlaceholder,value:S.modelValue&&S.modelValue[0],class:m(i).b("input"),disabled:S.disabled,onInput:p,onChange:v}),null,16,["id","name","placeholder","value","disabled"]),pe(S.$slots,"range-separator"),J("input",Yt(m(r),{id:S.id&&S.id[1],ref_key:"endInputRef",ref:a,name:S.name&&S.name[1],placeholder:S.endPlaceholder,value:S.modelValue&&S.modelValue[1],class:m(i).b("input"),disabled:S.disabled,onInput:g,onChange:y}),null,16,["id","name","placeholder","value","disabled"]),pe(S.$slots,"suffix")],38))}});var qJ=We(GJ,[["__file","picker-range-trigger.vue"]]);const YJ=se({name:"Picker"}),XJ=se({...YJ,props:C1,emits:[_t,Xt,"focus","blur","clear","calendar-change","panel-change","visible-change","keydown"],setup(t,{expose:e,emit:n}){const r=t,s=No(),{lang:i}=sn(),o=Oe("date"),a=Oe("input"),u=Oe("range"),{form:l,formItem:c}=Ur(),d=nt("ElPopperOptions",{}),{valueOnClear:f}=Mm(r,null),h=H(),p=H(),g=H(!1),v=H(!1),y=H(null);let w=!1;const{isFocused:b,handleFocus:S,handleBlur:E}=Pa(p,{beforeFocus(){return r.readonly||M.value},afterFocus(){g.value=!0},beforeBlur(ne){var Ye;return!w&&((Ye=h.value)==null?void 0:Ye.isFocusInsideContent(ne))},afterBlur(){Ne(),g.value=!1,w=!1,r.validateEvent&&(c==null||c.validate("blur").catch(ne=>void 0))}}),x=L(()=>[o.b("editor"),o.bm("editor",r.type),a.e("wrapper"),o.is("disabled",M.value),o.is("active",g.value),u.b("editor"),Ee?u.bm("editor",Ee.value):"",s.class]),k=L(()=>[a.e("icon"),u.e("close-icon"),ce.value?"":u.e("close-icon--hidden")]);Ie(g,ne=>{ne?ft(()=>{ne&&(y.value=r.modelValue)}):(_e.value=null,ft(()=>{A(r.modelValue)}))});const A=(ne,Ye)=>{(Ye||!JT(ne,y.value))&&(n(Xt,ne),Ye&&(y.value=ne),r.validateEvent&&(c==null||c.validate("change").catch(Et=>void 0)))},C=ne=>{if(!JT(r.modelValue,ne)){let Ye;Ve(ne)?Ye=ne.map(Et=>tC(Et,r.valueFormat,i.value)):ne&&(Ye=tC(ne,r.valueFormat,i.value)),n(_t,ne&&Ye,i.value)}},_=ne=>{n("keydown",ne)},O=L(()=>p.value?Array.from(p.value.$el.querySelectorAll("input")):[]),P=(ne,Ye,Et)=>{const tn=O.value;tn.length&&(!Et||Et==="min"?(tn[0].setSelectionRange(ne,Ye),tn[0].focus()):Et==="max"&&(tn[1].setSelectionRange(ne,Ye),tn[1].focus()))},U=(ne="",Ye=!1)=>{g.value=Ye;let Et;Ve(ne)?Et=ne.map(tn=>tn.toDate()):Et=ne&&ne.toDate(),_e.value=null,C(Et)},j=()=>{v.value=!0},N=()=>{n("visible-change",!0)},R=()=>{v.value=!1,g.value=!1,n("visible-change",!1)},V=()=>{g.value=!0},D=()=>{g.value=!1},M=L(()=>r.disabled||(l==null?void 0:l.disabled)),K=L(()=>{let ne;if(Te.value?zt.value.getDefaultValue&&(ne=zt.value.getDefaultValue()):Ve(r.modelValue)?ne=r.modelValue.map(Ye=>eC(Ye,r.valueFormat,i.value)):ne=eC(r.modelValue,r.valueFormat,i.value),zt.value.getRangeAvailableTime){const Ye=zt.value.getRangeAvailableTime(ne);Tr(Ye,ne)||(ne=Ye,Te.value||C(rh(ne)))}return Ve(ne)&&ne.some(Ye=>!Ye)&&(ne=[]),ne}),q=L(()=>{if(!zt.value.panelReady)return"";const ne=st(K.value);return Ve(_e.value)?[_e.value[0]||ne&&ne[0]||"",_e.value[1]||ne&&ne[1]||""]:_e.value!==null?_e.value:!X.value&&Te.value||!g.value&&Te.value?"":ne?te.value||ue.value||he.value?ne.join(", "):ne:""}),ee=L(()=>r.type.includes("time")),X=L(()=>r.type.startsWith("time")),te=L(()=>r.type==="dates"),ue=L(()=>r.type==="months"),he=L(()=>r.type==="years"),Z=L(()=>r.prefixIcon||(ee.value?oI:pV)),ce=H(!1),ae=ne=>{r.readonly||M.value||(ce.value&&(ne.stopPropagation(),zt.value.handleClear?zt.value.handleClear():C(f.value),A(f.value,!0),ce.value=!1,R()),n("clear"))},Te=L(()=>{const{modelValue:ne}=r;return!ne||Ve(ne)&&!ne.filter(Boolean).length}),Ce=async ne=>{var Ye;r.readonly||M.value||(((Ye=ne.target)==null?void 0:Ye.tagName)!=="INPUT"||b.value)&&(g.value=!0)},z=()=>{r.readonly||M.value||!Te.value&&r.clearable&&(ce.value=!0)},re=()=>{ce.value=!1},ve=ne=>{var Ye;r.readonly||M.value||(((Ye=ne.touches[0].target)==null?void 0:Ye.tagName)!=="INPUT"||b.value)&&(g.value=!0)},ke=L(()=>r.type.includes("range")),Ee=ur(),be=L(()=>{var ne,Ye;return(Ye=(ne=m(h))==null?void 0:ne.popperRef)==null?void 0:Ye.contentRef}),Se=Jb(p,ne=>{const Ye=m(be),Et=us(p);Ye&&(ne.target===Ye||ne.composedPath().includes(Ye))||ne.target===Et||Et&&ne.composedPath().includes(Et)||(g.value=!1)});In(()=>{Se==null||Se()});const _e=H(null),Ne=()=>{if(_e.value){const ne=Me(q.value);ne&&qe(ne)&&(C(rh(ne)),_e.value=null)}_e.value===""&&(C(f.value),A(f.value,!0),_e.value=null)},Me=ne=>ne?zt.value.parseUserInput(ne):null,st=ne=>ne?zt.value.formatToString(ne):null,qe=ne=>zt.value.isValidValue(ne),Ae=async ne=>{if(r.readonly||M.value)return;const{code:Ye}=ne;if(_(ne),Ye===it.esc){g.value===!0&&(g.value=!1,ne.preventDefault(),ne.stopPropagation());return}if(Ye===it.down&&(zt.value.handleFocusPicker&&(ne.preventDefault(),ne.stopPropagation()),g.value===!1&&(g.value=!0,await ft()),zt.value.handleFocusPicker)){zt.value.handleFocusPicker();return}if(Ye===it.tab){w=!0;return}if(Ye===it.enter||Ye===it.numpadEnter){(_e.value===null||_e.value===""||qe(Me(q.value)))&&(Ne(),g.value=!1),ne.stopPropagation();return}if(_e.value){ne.stopPropagation();return}zt.value.handleKeydownInput&&zt.value.handleKeydownInput(ne)},et=ne=>{_e.value=ne,g.value||(g.value=!0)},St=ne=>{const Ye=ne.target;_e.value?_e.value=[Ye.value,_e.value[1]]:_e.value=[Ye.value,null]},Lt=ne=>{const Ye=ne.target;_e.value?_e.value=[_e.value[0],Ye.value]:_e.value=[null,Ye.value]},Pt=()=>{var ne;const Ye=_e.value,Et=Me(Ye&&Ye[0]),tn=m(K);if(Et&&Et.isValid()){_e.value=[st(Et),((ne=q.value)==null?void 0:ne[1])||null];const ct=[Et,tn&&(tn[1]||null)];qe(ct)&&(C(rh(ct)),_e.value=null)}},en=()=>{var ne;const Ye=m(_e),Et=Me(Ye&&Ye[1]),tn=m(K);if(Et&&Et.isValid()){_e.value=[((ne=m(q))==null?void 0:ne[0])||null,st(Et)];const ct=[tn&&tn[0],Et];qe(ct)&&(C(rh(ct)),_e.value=null)}},zt=H({}),bn=ne=>{zt.value[ne[0]]=ne[1],zt.value.panelReady=!0},ht=ne=>{n("calendar-change",ne)},Nt=(ne,Ye,Et)=>{n("panel-change",ne,Ye,Et)},fe=()=>{var ne;(ne=p.value)==null||ne.focus()},Le=()=>{var ne;(ne=p.value)==null||ne.blur()};return Jt("EP_PICKER_BASE",{props:r}),e({focus:fe,blur:Le,handleOpen:V,handleClose:D,onPick:U}),(ne,Ye)=>($(),ye(m(Vr),Yt({ref_key:"refPopper",ref:h,visible:g.value,effect:"light",pure:"",trigger:"click"},ne.$attrs,{role:"dialog",teleported:"",transition:`${m(o).namespace.value}-zoom-in-top`,"popper-class":[`${m(o).namespace.value}-picker__popper`,ne.popperClass],"popper-options":m(d),"fallback-placements":ne.fallbackPlacements,"gpu-acceleration":!1,placement:ne.placement,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:j,onShow:N,onHide:R}),{default:le(()=>[m(ke)?($(),ye(qJ,{key:1,id:ne.id,ref_key:"inputRef",ref:p,"model-value":m(q),name:ne.name,disabled:m(M),readonly:!ne.editable||ne.readonly,"start-placeholder":ne.startPlaceholder,"end-placeholder":ne.endPlaceholder,class:F(m(x)),style:mt(ne.$attrs.style),"aria-label":ne.ariaLabel,tabindex:ne.tabindex,autocomplete:"off",role:"combobox",onClick:Ce,onFocus:m(S),onBlur:m(E),onStartInput:St,onStartChange:Pt,onEndInput:Lt,onEndChange:en,onMousedown:Ce,onMouseenter:z,onMouseleave:re,onTouchstartPassive:ve,onKeydown:Ae},{prefix:le(()=>[m(Z)?($(),ye(m(lt),{key:0,class:F([m(a).e("icon"),m(u).e("icon")])},{default:le(()=>[($(),ye(jt(m(Z))))]),_:1},8,["class"])):ge("v-if",!0)]),"range-separator":le(()=>[pe(ne.$slots,"range-separator",{},()=>[J("span",{class:F(m(u).b("separator"))},ze(ne.rangeSeparator),3)])]),suffix:le(()=>[ne.clearIcon?($(),ye(m(lt),{key:0,class:F(m(k)),onMousedown:wt(m(xn),["prevent"]),onClick:ae},{default:le(()=>[($(),ye(jt(ne.clearIcon)))]),_:1},8,["class","onMousedown"])):ge("v-if",!0)]),_:3},8,["id","model-value","name","disabled","readonly","start-placeholder","end-placeholder","class","style","aria-label","tabindex","onFocus","onBlur"])):($(),ye(m(es),{key:0,id:ne.id,ref_key:"inputRef",ref:p,"container-role":"combobox","model-value":m(q),name:ne.name,size:m(Ee),disabled:m(M),placeholder:ne.placeholder,class:F([m(o).b("editor"),m(o).bm("editor",ne.type),ne.$attrs.class]),style:mt(ne.$attrs.style),readonly:!ne.editable||ne.readonly||m(te)||m(ue)||m(he)||ne.type==="week","aria-label":ne.ariaLabel,tabindex:ne.tabindex,"validate-event":!1,onInput:et,onFocus:m(S),onBlur:m(E),onKeydown:Ae,onChange:Ne,onMousedown:Ce,onMouseenter:z,onMouseleave:re,onTouchstartPassive:ve,onClick:wt(()=>{},["stop"])},{prefix:le(()=>[m(Z)?($(),ye(m(lt),{key:0,class:F(m(a).e("icon")),onMousedown:wt(Ce,["prevent"]),onTouchstartPassive:ve},{default:le(()=>[($(),ye(jt(m(Z))))]),_:1},8,["class","onMousedown"])):ge("v-if",!0)]),suffix:le(()=>[ce.value&&ne.clearIcon?($(),ye(m(lt),{key:0,class:F(`${m(a).e("icon")} clear-icon`),onMousedown:wt(m(xn),["prevent"]),onClick:ae},{default:le(()=>[($(),ye(jt(ne.clearIcon)))]),_:1},8,["class","onMousedown"])):ge("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","aria-label","tabindex","onFocus","onBlur","onClick"]))]),content:le(()=>[pe(ne.$slots,"default",{visible:g.value,actualVisible:v.value,parsedValue:m(K),format:ne.format,dateFormat:ne.dateFormat,timeFormat:ne.timeFormat,unlinkPanels:ne.unlinkPanels,type:ne.type,defaultValue:ne.defaultValue,showNow:ne.showNow,onPick:U,onSelectRange:P,onSetPickerOption:bn,onCalendarChange:ht,onPanelChange:Nt,onMousedown:wt(()=>{},["stop"])})]),_:3},16,["visible","transition","popper-class","popper-options","fallback-placements","placement"]))}});var LL=We(XJ,[["__file","picker.vue"]]);const QJ=Ke({...RL,datetimeRole:String,parsedValue:{type:de(Object)}}),PL=({getAvailableHours:t,getAvailableMinutes:e,getAvailableSeconds:n})=>{const r=(o,a,u,l)=>{const c={hour:t,minute:e,second:n};let d=o;return["hour","minute","second"].forEach(f=>{if(c[f]){let h;const p=c[f];switch(f){case"minute":{h=p(d.hour(),a,l);break}case"second":{h=p(d.hour(),d.minute(),a,l);break}default:{h=p(a,l);break}}if(h!=null&&h.length&&!h.includes(d[f]())){const g=u?0:h.length-1;d=d[f](h[g])}}}),d},s={};return{timePickerOptions:s,getAvailableTime:r,onSetOption:([o,a])=>{s[o]=a}}},Av=t=>{const e=(r,s)=>r||s,n=r=>r!==!0;return t.map(e).filter(n)},DL=(t,e,n)=>({getHoursList:(o,a)=>Tv(24,t&&(()=>t==null?void 0:t(o,a))),getMinutesList:(o,a,u)=>Tv(60,e&&(()=>e==null?void 0:e(o,a,u))),getSecondsList:(o,a,u,l)=>Tv(60,n&&(()=>n==null?void 0:n(o,a,u,l)))}),OL=(t,e,n)=>{const{getHoursList:r,getMinutesList:s,getSecondsList:i}=DL(t,e,n);return{getAvailableHours:(l,c)=>Av(r(l,c)),getAvailableMinutes:(l,c,d)=>Av(s(l,c,d)),getAvailableSeconds:(l,c,d,f)=>Av(i(l,c,d,f))}},$L=t=>{const e=H(t.parsedValue);return Ie(()=>t.visible,n=>{n||(e.value=t.parsedValue)}),e},ZJ=Ke({role:{type:String,required:!0},spinnerDate:{type:de(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:de(String),default:""},...IL}),JJ=100,eee=600,Mp={beforeMount(t,e){const n=e.value,{interval:r=JJ,delay:s=eee}=pt(n)?{}:n;let i,o;const a=()=>pt(n)?n():n.handler(),u=()=>{o&&(clearTimeout(o),o=void 0),i&&(clearInterval(i),i=void 0)};t.addEventListener("mousedown",l=>{l.button===0&&(u(),a(),document.addEventListener("mouseup",()=>u(),{once:!0}),o=setTimeout(()=>{i=setInterval(()=>{a()},r)},s))})}},tee=se({__name:"basic-time-spinner",props:ZJ,emits:[Xt,"select-range","set-option"],setup(t,{emit:e}){const n=t,r=nt("EP_PICKER_BASE"),{isRange:s,format:i}=r.props,o=Oe("time"),{getHoursList:a,getMinutesList:u,getSecondsList:l}=DL(n.disabledHours,n.disabledMinutes,n.disabledSeconds);let c=!1;const d=H(),f=H(),h=H(),p=H(),g={hours:f,minutes:h,seconds:p},v=L(()=>n.showSeconds?EC:EC.slice(0,2)),y=L(()=>{const{spinnerDate:ee}=n,X=ee.hour(),te=ee.minute(),ue=ee.second();return{hours:X,minutes:te,seconds:ue}}),w=L(()=>{const{hours:ee,minutes:X}=m(y),{role:te,spinnerDate:ue}=n,he=s?void 0:ue;return{hours:a(te,he),minutes:u(ee,te,he),seconds:l(ee,X,te,he)}}),b=L(()=>{const{hours:ee,minutes:X,seconds:te}=m(y);return{hours:xv(ee,23),minutes:xv(X,59),seconds:xv(te,59)}}),S=_s(ee=>{c=!1,k(ee)},200),E=ee=>{if(!!!n.amPmMode)return"";const te=n.amPmMode==="A";let ue=ee<12?" am":" pm";return te&&(ue=ue.toUpperCase()),ue},x=ee=>{let X=[0,0];if(!i||i===$p)switch(ee){case"hours":X=[0,2];break;case"minutes":X=[3,5];break;case"seconds":X=[6,8];break}const[te,ue]=X;e("select-range",te,ue),d.value=ee},k=ee=>{_(ee,m(y)[ee])},A=()=>{k("hours"),k("minutes"),k("seconds")},C=ee=>ee.querySelector(`.${o.namespace.value}-scrollbar__wrap`),_=(ee,X)=>{if(n.arrowControl)return;const te=m(g[ee]);te&&te.$el&&(C(te.$el).scrollTop=Math.max(0,X*O(ee)))},O=ee=>{const X=m(g[ee]),te=X==null?void 0:X.$el.querySelector("li");return te&&Number.parseFloat(xo(te,"height"))||0},P=()=>{j(1)},U=()=>{j(-1)},j=ee=>{d.value||x("hours");const X=d.value,te=m(y)[X],ue=d.value==="hours"?24:60,he=N(X,te,ee,ue);R(X,he),_(X,he),ft(()=>x(X))},N=(ee,X,te,ue)=>{let he=(X+te+ue)%ue;const Z=m(w)[ee];for(;Z[he]&&he!==X;)he=(he+te+ue)%ue;return he},R=(ee,X)=>{if(m(w)[ee][X])return;const{hours:he,minutes:Z,seconds:ce}=m(y);let ae;switch(ee){case"hours":ae=n.spinnerDate.hour(X).minute(Z).second(ce);break;case"minutes":ae=n.spinnerDate.hour(he).minute(X).second(ce);break;case"seconds":ae=n.spinnerDate.hour(he).minute(Z).second(X);break}e(Xt,ae)},V=(ee,{value:X,disabled:te})=>{te||(R(ee,X),x(ee),_(ee,X))},D=ee=>{const X=m(g[ee]);if(!X)return;c=!0,S(ee);const te=Math.min(Math.round((C(X.$el).scrollTop-(M(ee)*.5-10)/O(ee)+3)/O(ee)),ee==="hours"?23:59);R(ee,te)},M=ee=>m(g[ee]).$el.offsetHeight,K=()=>{const ee=X=>{const te=m(g[X]);te&&te.$el&&(C(te.$el).onscroll=()=>{D(X)})};ee("hours"),ee("minutes"),ee("seconds")};Ft(()=>{ft(()=>{!n.arrowControl&&K(),A(),n.role==="start"&&x("hours")})});const q=(ee,X)=>{g[X].value=ee??void 0};return e("set-option",[`${n.role}_scrollDown`,j]),e("set-option",[`${n.role}_emitSelectRange`,x]),Ie(()=>n.spinnerDate,()=>{c||A()}),(ee,X)=>($(),Y("div",{class:F([m(o).b("spinner"),{"has-seconds":ee.showSeconds}])},[ee.arrowControl?ge("v-if",!0):($(!0),Y(dt,{key:0},Zt(m(v),te=>($(),ye(m(io),{key:te,ref_for:!0,ref:ue=>q(ue,te),class:F(m(o).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":m(o).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:ue=>x(te),onMousemove:ue=>k(te)},{default:le(()=>[($(!0),Y(dt,null,Zt(m(w)[te],(ue,he)=>($(),Y("li",{key:he,class:F([m(o).be("spinner","item"),m(o).is("active",he===m(y)[te]),m(o).is("disabled",ue)]),onClick:Z=>V(te,{value:he,disabled:ue})},[te==="hours"?($(),Y(dt,{key:0},[Qt(ze(("0"+(ee.amPmMode?he%12||12:he)).slice(-2))+ze(E(he)),1)],64)):($(),Y(dt,{key:1},[Qt(ze(("0"+he).slice(-2)),1)],64))],10,["onClick"]))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),ee.arrowControl?($(!0),Y(dt,{key:1},Zt(m(v),te=>($(),Y("div",{key:te,class:F([m(o).be("spinner","wrapper"),m(o).is("arrow")]),onMouseenter:ue=>x(te)},[Ot(($(),ye(m(lt),{class:F(["arrow-up",m(o).be("spinner","arrow")])},{default:le(()=>[ie(m(Db))]),_:1},8,["class"])),[[m(Mp),U]]),Ot(($(),ye(m(lt),{class:F(["arrow-down",m(o).be("spinner","arrow")])},{default:le(()=>[ie(m(Bo))]),_:1},8,["class"])),[[m(Mp),P]]),J("ul",{class:F(m(o).be("spinner","list"))},[($(!0),Y(dt,null,Zt(m(b)[te],(ue,he)=>($(),Y("li",{key:he,class:F([m(o).be("spinner","item"),m(o).is("active",ue===m(y)[te]),m(o).is("disabled",m(w)[te][ue])])},[m(vt)(ue)?($(),Y(dt,{key:0},[te==="hours"?($(),Y(dt,{key:0},[Qt(ze(("0"+(ee.amPmMode?ue%12||12:ue)).slice(-2))+ze(E(ue)),1)],64)):($(),Y(dt,{key:1},[Qt(ze(("0"+ue).slice(-2)),1)],64))],64)):ge("v-if",!0)],2))),128))],2)],42,["onMouseenter"]))),128)):ge("v-if",!0)],2))}});var G0=We(tee,[["__file","basic-time-spinner.vue"]]);const nee=se({__name:"panel-time-pick",props:QJ,emits:["pick","select-range","set-picker-option"],setup(t,{emit:e}){const n=t,r=nt("EP_PICKER_BASE"),{arrowControl:s,disabledHours:i,disabledMinutes:o,disabledSeconds:a,defaultValue:u}=r.props,{getAvailableHours:l,getAvailableMinutes:c,getAvailableSeconds:d}=OL(i,o,a),f=Oe("time"),{t:h,lang:p}=sn(),g=H([0,2]),v=$L(n),y=L(()=>an(n.actualVisible)?`${f.namespace.value}-zoom-in-top`:""),w=L(()=>n.format.includes("ss")),b=L(()=>n.format.includes("A")?"A":n.format.includes("a")?"a":""),S=D=>{const M=Rt(D).locale(p.value),K=j(M);return M.isSame(K)},E=()=>{e("pick",v.value,!1)},x=(D=!1,M=!1)=>{M||e("pick",n.parsedValue,D)},k=D=>{if(!n.visible)return;const M=j(D).millisecond(0);e("pick",M,!0)},A=(D,M)=>{e("select-range",D,M),g.value=[D,M]},C=D=>{const M=[0,3].concat(w.value?[6]:[]),K=["hours","minutes"].concat(w.value?["seconds"]:[]),ee=(M.indexOf(g.value[0])+D+M.length)%M.length;O.start_emitSelectRange(K[ee])},_=D=>{const M=D.code,{left:K,right:q,up:ee,down:X}=it;if([K,q].includes(M)){C(M===K?-1:1),D.preventDefault();return}if([ee,X].includes(M)){const te=M===ee?-1:1;O.start_scrollDown(te),D.preventDefault();return}},{timePickerOptions:O,onSetOption:P,getAvailableTime:U}=PL({getAvailableHours:l,getAvailableMinutes:c,getAvailableSeconds:d}),j=D=>U(D,n.datetimeRole||"",!0),N=D=>D?Rt(D,n.format).locale(p.value):null,R=D=>D?D.format(n.format):null,V=()=>Rt(u).locale(p.value);return e("set-picker-option",["isValidValue",S]),e("set-picker-option",["formatToString",R]),e("set-picker-option",["parseUserInput",N]),e("set-picker-option",["handleKeydownInput",_]),e("set-picker-option",["getRangeAvailableTime",j]),e("set-picker-option",["getDefaultValue",V]),(D,M)=>($(),ye(Ar,{name:m(y)},{default:le(()=>[D.actualVisible||D.visible?($(),Y("div",{key:0,class:F(m(f).b("panel"))},[J("div",{class:F([m(f).be("panel","content"),{"has-seconds":m(w)}])},[ie(G0,{ref:"spinner",role:D.datetimeRole||"start","arrow-control":m(s),"show-seconds":m(w),"am-pm-mode":m(b),"spinner-date":D.parsedValue,"disabled-hours":m(i),"disabled-minutes":m(o),"disabled-seconds":m(a),onChange:k,onSetOption:m(P),onSelectRange:A},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),J("div",{class:F(m(f).be("panel","footer"))},[J("button",{type:"button",class:F([m(f).be("panel","btn"),"cancel"]),onClick:E},ze(m(h)("el.datepicker.cancel")),3),J("button",{type:"button",class:F([m(f).be("panel","btn"),"confirm"]),onClick:K=>x()},ze(m(h)("el.datepicker.confirm")),11,["onClick"])],2)],2)):ge("v-if",!0)]),_:1},8,["name"]))}});var Np=We(nee,[["__file","panel-time-pick.vue"]]);const ree=Ke({...RL,parsedValue:{type:de(Array)}}),see=se({__name:"panel-time-range",props:ree,emits:["pick","select-range","set-picker-option"],setup(t,{emit:e}){const n=t,r=(Ce,z)=>{const re=[];for(let ve=Ce;ve<=z;ve++)re.push(ve);return re},{t:s,lang:i}=sn(),o=Oe("time"),a=Oe("picker"),u=nt("EP_PICKER_BASE"),{arrowControl:l,disabledHours:c,disabledMinutes:d,disabledSeconds:f,defaultValue:h}=u.props,p=L(()=>[o.be("range-picker","body"),o.be("panel","content"),o.is("arrow",l),S.value?"has-seconds":""]),g=L(()=>[o.be("range-picker","body"),o.be("panel","content"),o.is("arrow",l),S.value?"has-seconds":""]),v=L(()=>n.parsedValue[0]),y=L(()=>n.parsedValue[1]),w=$L(n),b=()=>{e("pick",w.value,!1)},S=L(()=>n.format.includes("ss")),E=L(()=>n.format.includes("A")?"A":n.format.includes("a")?"a":""),x=(Ce=!1)=>{e("pick",[v.value,y.value],Ce)},k=Ce=>{_(Ce.millisecond(0),y.value)},A=Ce=>{_(v.value,Ce.millisecond(0))},C=Ce=>{const z=Ce.map(ve=>Rt(ve).locale(i.value)),re=q(z);return z[0].isSame(re[0])&&z[1].isSame(re[1])},_=(Ce,z)=>{n.visible&&e("pick",[Ce,z],!0)},O=L(()=>v.value>y.value),P=H([0,2]),U=(Ce,z)=>{e("select-range",Ce,z,"min"),P.value=[Ce,z]},j=L(()=>S.value?11:8),N=(Ce,z)=>{e("select-range",Ce,z,"max");const re=m(j);P.value=[Ce+re,z+re]},R=Ce=>{const z=S.value?[0,3,6,11,14,17]:[0,3,8,11],re=["hours","minutes"].concat(S.value?["seconds"]:[]),ke=(z.indexOf(P.value[0])+Ce+z.length)%z.length,Ee=z.length/2;ke<Ee?ue.start_emitSelectRange(re[ke]):ue.end_emitSelectRange(re[ke-Ee])},V=Ce=>{const z=Ce.code,{left:re,right:ve,up:ke,down:Ee}=it;if([re,ve].includes(z)){R(z===re?-1:1),Ce.preventDefault();return}if([ke,Ee].includes(z)){const be=z===ke?-1:1,Se=P.value[0]<j.value?"start":"end";ue[`${Se}_scrollDown`](be),Ce.preventDefault();return}},D=(Ce,z)=>{const re=c?c(Ce):[],ve=Ce==="start",Ee=(z||(ve?y.value:v.value)).hour(),be=ve?r(Ee+1,23):r(0,Ee-1);return vv(re,be)},M=(Ce,z,re)=>{const ve=d?d(Ce,z):[],ke=z==="start",Ee=re||(ke?y.value:v.value),be=Ee.hour();if(Ce!==be)return ve;const Se=Ee.minute(),_e=ke?r(Se+1,59):r(0,Se-1);return vv(ve,_e)},K=(Ce,z,re,ve)=>{const ke=f?f(Ce,z,re):[],Ee=re==="start",be=ve||(Ee?y.value:v.value),Se=be.hour(),_e=be.minute();if(Ce!==Se||z!==_e)return ke;const Ne=be.second(),Me=Ee?r(Ne+1,59):r(0,Ne-1);return vv(ke,Me)},q=([Ce,z])=>[he(Ce,"start",!0,z),he(z,"end",!1,Ce)],{getAvailableHours:ee,getAvailableMinutes:X,getAvailableSeconds:te}=OL(D,M,K),{timePickerOptions:ue,getAvailableTime:he,onSetOption:Z}=PL({getAvailableHours:ee,getAvailableMinutes:X,getAvailableSeconds:te}),ce=Ce=>Ce?Ve(Ce)?Ce.map(z=>Rt(z,n.format).locale(i.value)):Rt(Ce,n.format).locale(i.value):null,ae=Ce=>Ce?Ve(Ce)?Ce.map(z=>z.format(n.format)):Ce.format(n.format):null,Te=()=>{if(Ve(h))return h.map(z=>Rt(z).locale(i.value));const Ce=Rt(h).locale(i.value);return[Ce,Ce.add(60,"m")]};return e("set-picker-option",["formatToString",ae]),e("set-picker-option",["parseUserInput",ce]),e("set-picker-option",["isValidValue",C]),e("set-picker-option",["handleKeydownInput",V]),e("set-picker-option",["getDefaultValue",Te]),e("set-picker-option",["getRangeAvailableTime",q]),(Ce,z)=>Ce.actualVisible?($(),Y("div",{key:0,class:F([m(o).b("range-picker"),m(a).b("panel")])},[J("div",{class:F(m(o).be("range-picker","content"))},[J("div",{class:F(m(o).be("range-picker","cell"))},[J("div",{class:F(m(o).be("range-picker","header"))},ze(m(s)("el.datepicker.startTime")),3),J("div",{class:F(m(p))},[ie(G0,{ref:"minSpinner",role:"start","show-seconds":m(S),"am-pm-mode":m(E),"arrow-control":m(l),"spinner-date":m(v),"disabled-hours":D,"disabled-minutes":M,"disabled-seconds":K,onChange:k,onSetOption:m(Z),onSelectRange:U},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),J("div",{class:F(m(o).be("range-picker","cell"))},[J("div",{class:F(m(o).be("range-picker","header"))},ze(m(s)("el.datepicker.endTime")),3),J("div",{class:F(m(g))},[ie(G0,{ref:"maxSpinner",role:"end","show-seconds":m(S),"am-pm-mode":m(E),"arrow-control":m(l),"spinner-date":m(y),"disabled-hours":D,"disabled-minutes":M,"disabled-seconds":K,onChange:A,onSetOption:m(Z),onSelectRange:N},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),J("div",{class:F(m(o).be("panel","footer"))},[J("button",{type:"button",class:F([m(o).be("panel","btn"),"cancel"]),onClick:re=>b()},ze(m(s)("el.datepicker.cancel")),11,["onClick"]),J("button",{type:"button",class:F([m(o).be("panel","btn"),"confirm"]),disabled:m(O),onClick:re=>x()},ze(m(s)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):ge("v-if",!0)}});var iee=We(see,[["__file","panel-time-range.vue"]]);Rt.extend(T1);var oee=se({name:"ElTimePicker",install:null,props:{...C1,isRange:{type:Boolean,default:!1}},emits:[_t],setup(t,e){const n=H(),[r,s]=t.isRange?["timerange",iee]:["time",Np],i=o=>e.emit(_t,o);return Jt("ElPopperOptions",t.popperOptions),e.expose({focus:()=>{var o;(o=n.value)==null||o.focus()},blur:()=>{var o;(o=n.value)==null||o.blur()},handleOpen:()=>{var o;(o=n.value)==null||o.handleOpen()},handleClose:()=>{var o;(o=n.value)==null||o.handleClose()}}),()=>{var o;const a=(o=t.format)!=null?o:$p;return ie(LL,Yt(t,{ref:n,type:r,format:a,"onUpdate:modelValue":i}),{default:u=>ie(s,u,null)})}}});const aee=Dt(oee),zm=Symbol(),lee=Ke({...C1,type:{type:de(String),default:"date"}}),uee=["date","dates","year","years","month","months","week","range"],k1=Ke({disabledDate:{type:de(Function)},date:{type:de(Object),required:!0},minDate:{type:de(Object)},maxDate:{type:de(Object)},parsedValue:{type:de([Object,Array])},rangeState:{type:de(Object),default:()=>({endDate:null,selecting:!1})}}),ML=Ke({type:{type:de(String),required:!0,values:hX},dateFormat:String,timeFormat:String,showNow:{type:Boolean,default:!0}}),_1=Ke({unlinkPanels:Boolean,parsedValue:{type:de(Array)}}),A1=t=>({type:String,values:uee,default:t}),cee=Ke({...ML,parsedValue:{type:de([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),Ru=t=>{if(!Ve(t))return!1;const[e,n]=t;return Rt.isDayjs(e)&&Rt.isDayjs(n)&&Rt(e).isValid()&&Rt(n).isValid()&&e.isSameOrBefore(n)},I1=(t,{lang:e,unit:n,unlinkPanels:r})=>{let s;if(Ve(t)){let[i,o]=t.map(a=>Rt(a).locale(e));return r||(o=i.add(1,n)),[i,o]}else t?s=Rt(t):s=Rt();return s=s.locale(e),[s,s.add(1,n)]},dee=(t,e,{columnIndexOffset:n,startDate:r,nextEndDate:s,now:i,unit:o,relativeDateGetter:a,setCellMetadata:u,setRowMetadata:l})=>{for(let c=0;c<t.row;c++){const d=e[c];for(let f=0;f<t.column;f++){let h=d[f+n];h||(h={row:c,column:f,type:"normal",inRange:!1,start:!1,end:!1});const p=c*t.column+f,g=a(p);h.dayjs=g,h.date=g.toDate(),h.timestamp=g.valueOf(),h.type="normal",h.inRange=!!(r&&g.isSameOrAfter(r,o)&&s&&g.isSameOrBefore(s,o))||!!(r&&g.isSameOrBefore(r,o)&&s&&g.isSameOrAfter(s,o)),r!=null&&r.isSameOrAfter(s)?(h.start=!!s&&g.isSame(s,o),h.end=r&&g.isSame(r,o)):(h.start=!!r&&g.isSame(r,o),h.end=!!s&&g.isSame(s,o)),g.isSame(i,o)&&(h.type="today"),u==null||u(h,{rowIndex:c,columnIndex:f}),d[f+n]=h}l==null||l(d)}},Fp=(t,e,n,r)=>{const s=Rt(t).locale(r).month(n).year(e),i=s.daysInMonth();return ga(i).map(o=>s.add(o,"day").toDate())},Lu=(t,e,n,r,s)=>{const i=Rt(t).year(e).month(n),o=Fp(t,e,n,r).find(a=>!(s!=null&&s(a)));return o?Rt(o).locale(r):i.locale(r)},Bp=(t,e,n)=>{const r=t.year();if(!(n!=null&&n(t.toDate())))return t.locale(e);const s=t.month();if(!Fp(t,r,s,e).every(n))return Lu(t,r,s,e,n);for(let i=0;i<12;i++)if(!Fp(t,r,i,e).every(n))return Lu(t,r,i,e,n);return t},Pu=(t,e,n,r)=>{if(Ve(t))return t.map(s=>Pu(s,e,n,r));if(ut(t)){const s=r.value?Rt(t):Rt(t,e);if(!s.isValid())return s}return Rt(t,e).locale(n)},fee=Ke({...k1,cellClassName:{type:de(Function)},showWeekNumber:Boolean,selectionMode:A1("date")}),hee=["changerange","pick","select"],q0=(t="")=>["normal","today"].includes(t),pee=(t,e)=>{const{lang:n}=sn(),r=H(),s=H(),i=H(),o=H(),a=H([[],[],[],[],[],[]]);let u=!1;const l=t.date.$locale().weekStart||7,c=t.date.locale("en").localeData().weekdaysShort().map(M=>M.toLowerCase()),d=L(()=>l>3?7-l:-l),f=L(()=>{const M=t.date.startOf("month");return M.subtract(M.day()||7,"day")}),h=L(()=>c.concat(c).slice(l,l+7)),p=L(()=>CI(m(S)).some(M=>M.isCurrent)),g=L(()=>{const M=t.date.startOf("month"),K=M.day()||7,q=M.daysInMonth(),ee=M.subtract(1,"month").daysInMonth();return{startOfMonthDay:K,dateCountOfMonth:q,dateCountOfLastMonth:ee}}),v=L(()=>t.selectionMode==="dates"?ls(t.parsedValue):[]),y=(M,{count:K,rowIndex:q,columnIndex:ee})=>{const{startOfMonthDay:X,dateCountOfMonth:te,dateCountOfLastMonth:ue}=m(g),he=m(d);if(q>=0&&q<=1){const Z=X+he<0?7+X+he:X+he;if(ee+q*7>=Z)return M.text=K,!0;M.text=ue-(Z-ee%7)+1+q*7,M.type="prev-month"}else return K<=te?M.text=K:(M.text=K-te,M.type="next-month"),!0;return!1},w=(M,{columnIndex:K,rowIndex:q},ee)=>{const{disabledDate:X,cellClassName:te}=t,ue=m(v),he=y(M,{count:ee,rowIndex:q,columnIndex:K}),Z=M.dayjs.toDate();return M.selected=ue.find(ce=>ce.isSame(M.dayjs,"day")),M.isSelected=!!M.selected,M.isCurrent=x(M),M.disabled=X==null?void 0:X(Z),M.customClass=te==null?void 0:te(Z),he},b=M=>{if(t.selectionMode==="week"){const[K,q]=t.showWeekNumber?[1,7]:[0,6],ee=D(M[K+1]);M[K].inRange=ee,M[K].start=ee,M[q].inRange=ee,M[q].end=ee}},S=L(()=>{const{minDate:M,maxDate:K,rangeState:q,showWeekNumber:ee}=t,X=m(d),te=m(a),ue="day";let he=1;if(ee)for(let Z=0;Z<6;Z++)te[Z][0]||(te[Z][0]={type:"week",text:m(f).add(Z*7+1,ue).week()});return dee({row:6,column:7},te,{startDate:M,columnIndexOffset:ee?1:0,nextEndDate:q.endDate||K||q.selecting&&M||null,now:Rt().locale(m(n)).startOf(ue),unit:ue,relativeDateGetter:Z=>m(f).add(Z-X,ue),setCellMetadata:(...Z)=>{w(...Z,he)&&(he+=1)},setRowMetadata:b}),te});Ie(()=>t.date,async()=>{var M;(M=m(r))!=null&&M.contains(document.activeElement)&&(await ft(),await E())});const E=async()=>{var M;return(M=m(s))==null?void 0:M.focus()},x=M=>t.selectionMode==="date"&&q0(M.type)&&k(M,t.parsedValue),k=(M,K)=>K?Rt(K).locale(m(n)).isSame(t.date.date(Number(M.text)),"day"):!1,A=(M,K)=>{const q=M*7+(K-(t.showWeekNumber?1:0))-m(d);return m(f).add(q,"day")},C=M=>{var K;if(!t.rangeState.selecting)return;let q=M.target;if(q.tagName==="SPAN"&&(q=(K=q.parentNode)==null?void 0:K.parentNode),q.tagName==="DIV"&&(q=q.parentNode),q.tagName!=="TD")return;const ee=q.parentNode.rowIndex-1,X=q.cellIndex;m(S)[ee][X].disabled||(ee!==m(i)||X!==m(o))&&(i.value=ee,o.value=X,e("changerange",{selecting:!0,endDate:A(ee,X)}))},_=M=>!m(p)&&(M==null?void 0:M.text)===1&&M.type==="normal"||M.isCurrent,O=M=>{u||m(p)||t.selectionMode!=="date"||V(M,!0)},P=M=>{M.target.closest("td")&&(u=!0)},U=M=>{M.target.closest("td")&&(u=!1)},j=M=>{!t.rangeState.selecting||!t.minDate?(e("pick",{minDate:M,maxDate:null}),e("select",!0)):(M>=t.minDate?e("pick",{minDate:t.minDate,maxDate:M}):e("pick",{minDate:M,maxDate:t.minDate}),e("select",!1))},N=M=>{const K=M.week(),q=`${M.year()}w${K}`;e("pick",{year:M.year(),week:K,value:q,date:M.startOf("week")})},R=(M,K)=>{const q=K?ls(t.parsedValue).filter(ee=>(ee==null?void 0:ee.valueOf())!==M.valueOf()):ls(t.parsedValue).concat([M]);e("pick",q)},V=(M,K=!1)=>{const q=M.target.closest("td");if(!q)return;const ee=q.parentNode.rowIndex-1,X=q.cellIndex,te=m(S)[ee][X];if(te.disabled||te.type==="week")return;const ue=A(ee,X);switch(t.selectionMode){case"range":{j(ue);break}case"date":{e("pick",ue,K);break}case"week":{N(ue);break}case"dates":{R(ue,!!te.selected);break}}},D=M=>{if(t.selectionMode!=="week")return!1;let K=t.date.startOf("day");if(M.type==="prev-month"&&(K=K.subtract(1,"month")),M.type==="next-month"&&(K=K.add(1,"month")),K=K.date(Number.parseInt(M.text,10)),t.parsedValue&&!Ve(t.parsedValue)){const q=(t.parsedValue.day()-l+7)%7-1;return t.parsedValue.subtract(q,"day").isSame(K,"day")}return!1};return{WEEKS:h,rows:S,tbodyRef:r,currentCellRef:s,focus:E,isCurrent:x,isWeekActive:D,isSelectedCell:_,handlePickDate:V,handleMouseUp:U,handleMouseDown:P,handleMouseMove:C,handleFocus:O}},mee=(t,{isCurrent:e,isWeekActive:n})=>{const r=Oe("date-table"),{t:s}=sn(),i=L(()=>[r.b(),{"is-week-mode":t.selectionMode==="week"}]),o=L(()=>s("el.datepicker.dateTablePrompt")),a=L(()=>s("el.datepicker.week"));return{tableKls:i,tableLabel:o,weekLabel:a,getCellClasses:c=>{const d=[];return q0(c.type)&&!c.disabled?(d.push("available"),c.type==="today"&&d.push("today")):d.push(c.type),e(c)&&d.push("current"),c.inRange&&(q0(c.type)||t.selectionMode==="week")&&(d.push("in-range"),c.start&&d.push("start-date"),c.end&&d.push("end-date")),c.disabled&&d.push("disabled"),c.selected&&d.push("selected"),c.customClass&&d.push(c.customClass),d.join(" ")},getRowKls:c=>[r.e("row"),{current:n(c)}],t:s}},gee=Ke({cell:{type:de(Object)}});var R1=se({name:"ElDatePickerCell",props:gee,setup(t){const e=Oe("date-table-cell"),{slots:n}=nt(zm);return()=>{const{cell:r}=t;return pe(n,"default",{...r},()=>{var s;return[ie("div",{class:e.b()},[ie("span",{class:e.e("text")},[(s=r==null?void 0:r.renderText)!=null?s:r==null?void 0:r.text])])]})}}});const vee=se({__name:"basic-date-table",props:fee,emits:hee,setup(t,{expose:e,emit:n}){const r=t,{WEEKS:s,rows:i,tbodyRef:o,currentCellRef:a,focus:u,isCurrent:l,isWeekActive:c,isSelectedCell:d,handlePickDate:f,handleMouseUp:h,handleMouseDown:p,handleMouseMove:g,handleFocus:v}=pee(r,n),{tableLabel:y,tableKls:w,weekLabel:b,getCellClasses:S,getRowKls:E,t:x}=mee(r,{isCurrent:l,isWeekActive:c});let k=!1;return In(()=>{k=!0}),e({focus:u}),(A,C)=>($(),Y("table",{"aria-label":m(y),class:F(m(w)),cellspacing:"0",cellpadding:"0",role:"grid",onClick:m(f),onMousemove:m(g),onMousedown:wt(m(p),["prevent"]),onMouseup:m(h)},[J("tbody",{ref_key:"tbodyRef",ref:o},[J("tr",null,[A.showWeekNumber?($(),Y("th",{key:0,scope:"col"},ze(m(b)),1)):ge("v-if",!0),($(!0),Y(dt,null,Zt(m(s),(_,O)=>($(),Y("th",{key:O,"aria-label":m(x)("el.datepicker.weeksFull."+_),scope:"col"},ze(m(x)("el.datepicker.weeks."+_)),9,["aria-label"]))),128))]),($(!0),Y(dt,null,Zt(m(i),(_,O)=>($(),Y("tr",{key:O,class:F(m(E)(_[1]))},[($(!0),Y(dt,null,Zt(_,(P,U)=>($(),Y("td",{key:`${O}.${U}`,ref_for:!0,ref:j=>!m(k)&&m(d)(P)&&(a.value=j),class:F(m(S)(P)),"aria-current":P.isCurrent?"date":void 0,"aria-selected":P.isCurrent,tabindex:m(d)(P)?0:-1,onFocus:m(v)},[ie(m(R1),{cell:P},null,8,["cell"])],42,["aria-current","aria-selected","tabindex","onFocus"]))),128))],2))),128))],512)],42,["aria-label","onClick","onMousemove","onMousedown","onMouseup"]))}});var Y0=We(vee,[["__file","basic-date-table.vue"]]);const yee=Ke({...k1,selectionMode:A1("month")}),bee=se({__name:"basic-month-table",props:yee,emits:["changerange","pick","select"],setup(t,{expose:e,emit:n}){const r=t,s=Oe("month-table"),{t:i,lang:o}=sn(),a=H(),u=H(),l=H(r.date.locale("en").localeData().monthsShort().map(b=>b.toLowerCase())),c=H([[],[],[]]),d=H(),f=H(),h=L(()=>{var b,S;const E=c.value,x=Rt().locale(o.value).startOf("month");for(let k=0;k<3;k++){const A=E[k];for(let C=0;C<4;C++){const _=A[C]||(A[C]={row:k,column:C,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});_.type="normal";const O=k*4+C,P=r.date.startOf("year").month(O),U=r.rangeState.endDate||r.maxDate||r.rangeState.selecting&&r.minDate||null;_.inRange=!!(r.minDate&&P.isSameOrAfter(r.minDate,"month")&&U&&P.isSameOrBefore(U,"month"))||!!(r.minDate&&P.isSameOrBefore(r.minDate,"month")&&U&&P.isSameOrAfter(U,"month")),(b=r.minDate)!=null&&b.isSameOrAfter(U)?(_.start=!!(U&&P.isSame(U,"month")),_.end=r.minDate&&P.isSame(r.minDate,"month")):(_.start=!!(r.minDate&&P.isSame(r.minDate,"month")),_.end=!!(U&&P.isSame(U,"month"))),x.isSame(P)&&(_.type="today"),_.text=O,_.disabled=((S=r.disabledDate)==null?void 0:S.call(r,P.toDate()))||!1}}return E}),p=()=>{var b;(b=u.value)==null||b.focus()},g=b=>{const S={},E=r.date.year(),x=new Date,k=b.text;return S.disabled=r.disabledDate?Fp(r.date,E,k,o.value).every(r.disabledDate):!1,S.current=ls(r.parsedValue).findIndex(A=>Rt.isDayjs(A)&&A.year()===E&&A.month()===k)>=0,S.today=x.getFullYear()===E&&x.getMonth()===k,b.inRange&&(S["in-range"]=!0,b.start&&(S["start-date"]=!0),b.end&&(S["end-date"]=!0)),S},v=b=>{const S=r.date.year(),E=b.text;return ls(r.date).findIndex(x=>x.year()===S&&x.month()===E)>=0},y=b=>{var S;if(!r.rangeState.selecting)return;let E=b.target;if(E.tagName==="SPAN"&&(E=(S=E.parentNode)==null?void 0:S.parentNode),E.tagName==="DIV"&&(E=E.parentNode),E.tagName!=="TD")return;const x=E.parentNode.rowIndex,k=E.cellIndex;h.value[x][k].disabled||(x!==d.value||k!==f.value)&&(d.value=x,f.value=k,n("changerange",{selecting:!0,endDate:r.date.startOf("year").month(x*4+k)}))},w=b=>{var S;const E=(S=b.target)==null?void 0:S.closest("td");if((E==null?void 0:E.tagName)!=="TD"||ws(E,"disabled"))return;const x=E.cellIndex,A=E.parentNode.rowIndex*4+x,C=r.date.startOf("year").month(A);if(r.selectionMode==="months"){if(b.type==="keydown"){n("pick",ls(r.parsedValue),!1);return}const _=Lu(r.date,r.date.year(),A,o.value,r.disabledDate),O=ws(E,"current")?ls(r.parsedValue).filter(P=>(P==null?void 0:P.year())!==_.year()||(P==null?void 0:P.month())!==_.month()):ls(r.parsedValue).concat([Rt(_)]);n("pick",O)}else r.selectionMode==="range"?r.rangeState.selecting?(r.minDate&&C>=r.minDate?n("pick",{minDate:r.minDate,maxDate:C}):n("pick",{minDate:C,maxDate:r.minDate}),n("select",!1)):(n("pick",{minDate:C,maxDate:null}),n("select",!0)):n("pick",A)};return Ie(()=>r.date,async()=>{var b,S;(b=a.value)!=null&&b.contains(document.activeElement)&&(await ft(),(S=u.value)==null||S.focus())}),e({focus:p}),(b,S)=>($(),Y("table",{role:"grid","aria-label":m(i)("el.datepicker.monthTablePrompt"),class:F(m(s).b()),onClick:w,onMousemove:y},[J("tbody",{ref_key:"tbodyRef",ref:a},[($(!0),Y(dt,null,Zt(m(h),(E,x)=>($(),Y("tr",{key:x},[($(!0),Y(dt,null,Zt(E,(k,A)=>($(),Y("td",{key:A,ref_for:!0,ref:C=>v(k)&&(u.value=C),class:F(g(k)),"aria-selected":`${v(k)}`,"aria-label":m(i)(`el.datepicker.month${+k.text+1}`),tabindex:v(k)?0:-1,onKeydown:[Sn(wt(w,["prevent","stop"]),["space"]),Sn(wt(w,["prevent","stop"]),["enter"])]},[ie(m(R1),{cell:{...k,renderText:m(i)("el.datepicker.months."+l.value[k.text])}},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var _d=We(bee,[["__file","basic-month-table.vue"]]);const See=Ke({...k1,selectionMode:A1("year")}),wee=se({__name:"basic-year-table",props:See,emits:["changerange","pick","select"],setup(t,{expose:e,emit:n}){const r=t,s=(S,E)=>{const x=Rt(String(S)).locale(E).startOf("year"),A=x.endOf("year").dayOfYear();return ga(A).map(C=>x.add(C,"day").toDate())},i=Oe("year-table"),{t:o,lang:a}=sn(),u=H(),l=H(),c=L(()=>Math.floor(r.date.year()/10)*10),d=H([[],[],[]]),f=H(),h=H(),p=L(()=>{var S;const E=d.value,x=Rt().locale(a.value).startOf("year");for(let k=0;k<3;k++){const A=E[k];for(let C=0;C<4&&!(k*4+C>=10);C++){let _=A[C];_||(_={row:k,column:C,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1}),_.type="normal";const O=k*4+C+c.value,P=Rt().year(O),U=r.rangeState.endDate||r.maxDate||r.rangeState.selecting&&r.minDate||null;_.inRange=!!(r.minDate&&P.isSameOrAfter(r.minDate,"year")&&U&&P.isSameOrBefore(U,"year"))||!!(r.minDate&&P.isSameOrBefore(r.minDate,"year")&&U&&P.isSameOrAfter(U,"year")),(S=r.minDate)!=null&&S.isSameOrAfter(U)?(_.start=!!(U&&P.isSame(U,"year")),_.end=!!(r.minDate&&P.isSame(r.minDate,"year"))):(_.start=!!(r.minDate&&P.isSame(r.minDate,"year")),_.end=!!(U&&P.isSame(U,"year"))),x.isSame(P)&&(_.type="today"),_.text=O;const N=P.toDate();_.disabled=r.disabledDate&&r.disabledDate(N)||!1,A[C]=_}}return E}),g=()=>{var S;(S=l.value)==null||S.focus()},v=S=>{const E={},x=Rt().locale(a.value),k=S.text;return E.disabled=r.disabledDate?s(k,a.value).every(r.disabledDate):!1,E.today=x.year()===k,E.current=ls(r.parsedValue).findIndex(A=>A.year()===k)>=0,S.inRange&&(E["in-range"]=!0,S.start&&(E["start-date"]=!0),S.end&&(E["end-date"]=!0)),E},y=S=>{const E=S.text;return ls(r.date).findIndex(x=>x.year()===E)>=0},w=S=>{var E;const x=(E=S.target)==null?void 0:E.closest("td");if(!x||!x.textContent||ws(x,"disabled"))return;const k=x.cellIndex,C=x.parentNode.rowIndex*4+k+c.value,_=Rt().year(C);if(r.selectionMode==="range")r.rangeState.selecting?(r.minDate&&_>=r.minDate?n("pick",{minDate:r.minDate,maxDate:_}):n("pick",{minDate:_,maxDate:r.minDate}),n("select",!1)):(n("pick",{minDate:_,maxDate:null}),n("select",!0));else if(r.selectionMode==="years"){if(S.type==="keydown"){n("pick",ls(r.parsedValue),!1);return}const O=Bp(_.startOf("year"),a.value,r.disabledDate),P=ws(x,"current")?ls(r.parsedValue).filter(U=>(U==null?void 0:U.year())!==C):ls(r.parsedValue).concat([O]);n("pick",P)}else n("pick",C)},b=S=>{var E;if(!r.rangeState.selecting)return;const x=(E=S.target)==null?void 0:E.closest("td");if(!x)return;const k=x.parentNode.rowIndex,A=x.cellIndex;p.value[k][A].disabled||(k!==f.value||A!==h.value)&&(f.value=k,h.value=A,n("changerange",{selecting:!0,endDate:Rt().year(c.value).add(k*4+A,"year")}))};return Ie(()=>r.date,async()=>{var S,E;(S=u.value)!=null&&S.contains(document.activeElement)&&(await ft(),(E=l.value)==null||E.focus())}),e({focus:g}),(S,E)=>($(),Y("table",{role:"grid","aria-label":m(o)("el.datepicker.yearTablePrompt"),class:F(m(i).b()),onClick:w,onMousemove:b},[J("tbody",{ref_key:"tbodyRef",ref:u},[($(!0),Y(dt,null,Zt(m(p),(x,k)=>($(),Y("tr",{key:k},[($(!0),Y(dt,null,Zt(x,(A,C)=>($(),Y("td",{key:`${k}_${C}`,ref_for:!0,ref:_=>y(A)&&(l.value=_),class:F(["available",v(A)]),"aria-selected":y(A),"aria-label":String(A.text),tabindex:y(A)?0:-1,onKeydown:[Sn(wt(w,["prevent","stop"]),["space"]),Sn(wt(w,["prevent","stop"]),["enter"])]},[ie(m(R1),{cell:A},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var Ad=We(wee,[["__file","basic-year-table.vue"]]);const Eee=se({__name:"panel-date-pick",props:cee,emits:["pick","set-picker-option","panel-change"],setup(t,{emit:e}){const n=t,r=(fe,Le,ne)=>!0,s=Oe("picker-panel"),i=Oe("date-picker"),o=No(),a=gr(),{t:u,lang:l}=sn(),c=nt("EP_PICKER_BASE"),d=nt("ElIsDefaultFormat"),f=nt(Hm),{shortcuts:h,disabledDate:p,cellClassName:g,defaultTime:v}=c.props,y=En(c.props,"defaultValue"),w=H(),b=H(Rt().locale(l.value)),S=H(!1);let E=!1;const x=L(()=>Rt(v).locale(l.value)),k=L(()=>b.value.month()),A=L(()=>b.value.year()),C=H([]),_=H(null),O=H(null),P=fe=>C.value.length>0?r(fe,C.value,n.format||"HH:mm:ss"):!0,U=fe=>v&&!Ee.value&&!S.value&&!E?x.value.year(fe.year()).month(fe.month()).date(fe.date()):ce.value?fe.millisecond(0):fe.startOf("day"),j=(fe,...Le)=>{if(!fe)e("pick",fe,...Le);else if(Ve(fe)){const ne=fe.map(U);e("pick",ne,...Le)}else e("pick",U(fe),...Le);_.value=null,O.value=null,S.value=!1,E=!1},N=async(fe,Le)=>{if(q.value==="date"){fe=fe;let ne=n.parsedValue?n.parsedValue.year(fe.year()).month(fe.month()).date(fe.date()):fe;P(ne)||(ne=C.value[0][0].year(fe.year()).month(fe.month()).date(fe.date())),b.value=ne,j(ne,ce.value||Le),n.type==="datetime"&&(await ft(),en())}else q.value==="week"?j(fe.date):q.value==="dates"&&j(fe,!0)},R=fe=>{const Le=fe?"add":"subtract";b.value=b.value[Le](1,"month"),Nt("month")},V=fe=>{const Le=b.value,ne=fe?"add":"subtract";b.value=D.value==="year"?Le[ne](10,"year"):Le[ne](1,"year"),Nt("year")},D=H("date"),M=L(()=>{const fe=u("el.datepicker.year");if(D.value==="year"){const Le=Math.floor(A.value/10)*10;return fe?`${Le} ${fe} - ${Le+9} ${fe}`:`${Le} - ${Le+9}`}return`${A.value} ${fe}`}),K=fe=>{const Le=pt(fe.value)?fe.value():fe.value;if(Le){E=!0,j(Rt(Le).locale(l.value));return}fe.onClick&&fe.onClick({attrs:o,slots:a,emit:e})},q=L(()=>{const{type:fe}=n;return["week","month","months","year","years","dates"].includes(fe)?fe:"date"}),ee=L(()=>q.value==="dates"||q.value==="months"||q.value==="years"),X=L(()=>q.value==="date"?D.value:q.value),te=L(()=>!!h.length),ue=async(fe,Le)=>{q.value==="month"?(b.value=Lu(b.value,b.value.year(),fe,l.value,p),j(b.value,!1)):q.value==="months"?j(fe,Le??!0):(b.value=Lu(b.value,b.value.year(),fe,l.value,p),D.value="date",["month","year","date","week"].includes(q.value)&&(j(b.value,!0),await ft(),en())),Nt("month")},he=async(fe,Le)=>{if(q.value==="year"){const ne=b.value.startOf("year").year(fe);b.value=Bp(ne,l.value,p),j(b.value,!1)}else if(q.value==="years")j(fe,Le??!0);else{const ne=b.value.year(fe);b.value=Bp(ne,l.value,p),D.value="month",["month","year","date","week"].includes(q.value)&&(j(b.value,!0),await ft(),en())}Nt("year")},Z=async fe=>{D.value=fe,await ft(),en()},ce=L(()=>n.type==="datetime"||n.type==="datetimerange"),ae=L(()=>{const fe=ce.value||q.value==="dates",Le=q.value==="years",ne=q.value==="months",Ye=D.value==="date",Et=D.value==="year",tn=D.value==="month";return fe&&Ye||Le&&Et||ne&&tn}),Te=L(()=>p?n.parsedValue?Ve(n.parsedValue)?p(n.parsedValue[0].toDate()):p(n.parsedValue.toDate()):!0:!1),Ce=()=>{if(ee.value)j(n.parsedValue);else{let fe=n.parsedValue;if(!fe){const Le=Rt(v).locale(l.value),ne=Pt();fe=Le.year(ne.year()).month(ne.month()).date(ne.date())}b.value=fe,j(fe)}},z=L(()=>p?p(Rt().locale(l.value).toDate()):!1),re=()=>{const Le=Rt().locale(l.value).toDate();S.value=!0,(!p||!p(Le))&&P(Le)&&(b.value=Rt().locale(l.value),j(b.value))},ve=L(()=>n.timeFormat||nL(n.format)),ke=L(()=>n.dateFormat||tL(n.format)),Ee=L(()=>{if(O.value)return O.value;if(!(!n.parsedValue&&!y.value))return(n.parsedValue||b.value).format(ve.value)}),be=L(()=>{if(_.value)return _.value;if(!(!n.parsedValue&&!y.value))return(n.parsedValue||b.value).format(ke.value)}),Se=H(!1),_e=()=>{Se.value=!0},Ne=()=>{Se.value=!1},Me=fe=>({hour:fe.hour(),minute:fe.minute(),second:fe.second(),year:fe.year(),month:fe.month(),date:fe.date()}),st=(fe,Le,ne)=>{const{hour:Ye,minute:Et,second:tn}=Me(fe),ct=n.parsedValue?n.parsedValue.hour(Ye).minute(Et).second(tn):fe;b.value=ct,j(b.value,!0),ne||(Se.value=Le)},qe=fe=>{const Le=Rt(fe,ve.value).locale(l.value);if(Le.isValid()&&P(Le)){const{year:ne,month:Ye,date:Et}=Me(b.value);b.value=Le.year(ne).month(Ye).date(Et),O.value=null,Se.value=!1,j(b.value,!0)}},Ae=fe=>{const Le=Pu(fe,ke.value,l.value,d);if(Le.isValid()){if(p&&p(Le.toDate()))return;const{hour:ne,minute:Ye,second:Et}=Me(b.value);b.value=Le.hour(ne).minute(Ye).second(Et),_.value=null,j(b.value,!0)}},et=fe=>Rt.isDayjs(fe)&&fe.isValid()&&(p?!p(fe.toDate()):!0),St=fe=>Ve(fe)?fe.map(Le=>Le.format(n.format)):fe.format(n.format),Lt=fe=>Pu(fe,n.format,l.value,d),Pt=()=>{const fe=Rt(y.value).locale(l.value);if(!y.value){const Le=x.value;return Rt().hour(Le.hour()).minute(Le.minute()).second(Le.second()).locale(l.value)}return fe},en=()=>{var fe;["week","month","year","date"].includes(q.value)&&((fe=w.value)==null||fe.focus())},zt=()=>{en(),q.value==="week"&&ht(it.down)},bn=fe=>{const{code:Le}=fe;[it.up,it.down,it.left,it.right,it.home,it.end,it.pageUp,it.pageDown].includes(Le)&&(ht(Le),fe.stopPropagation(),fe.preventDefault()),[it.enter,it.space,it.numpadEnter].includes(Le)&&_.value===null&&O.value===null&&(fe.preventDefault(),j(b.value,!1))},ht=fe=>{var Le;const{up:ne,down:Ye,left:Et,right:tn,home:ct,end:Wt,pageUp:Fn,pageDown:As}=it,ir={year:{[ne]:-4,[Ye]:4,[Et]:-1,[tn]:1,offset:(yt,ln)=>yt.setFullYear(yt.getFullYear()+ln)},month:{[ne]:-4,[Ye]:4,[Et]:-1,[tn]:1,offset:(yt,ln)=>yt.setMonth(yt.getMonth()+ln)},week:{[ne]:-1,[Ye]:1,[Et]:-1,[tn]:1,offset:(yt,ln)=>yt.setDate(yt.getDate()+ln*7)},date:{[ne]:-7,[Ye]:7,[Et]:-1,[tn]:1,[ct]:yt=>-yt.getDay(),[Wt]:yt=>-yt.getDay()+6,[Fn]:yt=>-new Date(yt.getFullYear(),yt.getMonth(),0).getDate(),[As]:yt=>new Date(yt.getFullYear(),yt.getMonth()+1,0).getDate(),offset:(yt,ln)=>yt.setDate(yt.getDate()+ln)}},jr=b.value.toDate();for(;Math.abs(b.value.diff(jr,"year",!0))<1;){const yt=ir[X.value];if(!yt)return;if(yt.offset(jr,pt(yt[fe])?yt[fe](jr):(Le=yt[fe])!=null?Le:0),p&&p(jr))break;const ln=Rt(jr).locale(l.value);b.value=ln,e("pick",ln,!0);break}},Nt=fe=>{e("panel-change",b.value.toDate(),fe,D.value)};return Ie(()=>q.value,fe=>{if(["month","year"].includes(fe)){D.value=fe;return}else if(fe==="years"){D.value="year";return}else if(fe==="months"){D.value="month";return}D.value="date"},{immediate:!0}),Ie(()=>D.value,()=>{f==null||f.updatePopper()}),Ie(()=>y.value,fe=>{fe&&(b.value=Pt())},{immediate:!0}),Ie(()=>n.parsedValue,fe=>{if(fe){if(ee.value||Ve(fe))return;b.value=fe}else b.value=Pt()},{immediate:!0}),e("set-picker-option",["isValidValue",et]),e("set-picker-option",["formatToString",St]),e("set-picker-option",["parseUserInput",Lt]),e("set-picker-option",["handleFocusPicker",zt]),(fe,Le)=>($(),Y("div",{class:F([m(s).b(),m(i).b(),{"has-sidebar":fe.$slots.sidebar||m(te),"has-time":m(ce)}])},[J("div",{class:F(m(s).e("body-wrapper"))},[pe(fe.$slots,"sidebar",{class:F(m(s).e("sidebar"))}),m(te)?($(),Y("div",{key:0,class:F(m(s).e("sidebar"))},[($(!0),Y(dt,null,Zt(m(h),(ne,Ye)=>($(),Y("button",{key:Ye,type:"button",class:F(m(s).e("shortcut")),onClick:Et=>K(ne)},ze(ne.text),11,["onClick"]))),128))],2)):ge("v-if",!0),J("div",{class:F(m(s).e("body"))},[m(ce)?($(),Y("div",{key:0,class:F(m(i).e("time-header"))},[J("span",{class:F(m(i).e("editor-wrap"))},[ie(m(es),{placeholder:m(u)("el.datepicker.selectDate"),"model-value":m(be),size:"small","validate-event":!1,onInput:ne=>_.value=ne,onChange:Ae},null,8,["placeholder","model-value","onInput"])],2),Ot(($(),Y("span",{class:F(m(i).e("editor-wrap"))},[ie(m(es),{placeholder:m(u)("el.datepicker.selectTime"),"model-value":m(Ee),size:"small","validate-event":!1,onFocus:_e,onInput:ne=>O.value=ne,onChange:qe},null,8,["placeholder","model-value","onInput"]),ie(m(Np),{visible:Se.value,format:m(ve),"parsed-value":b.value,onPick:st},null,8,["visible","format","parsed-value"])],2)),[[m(Oo),Ne]])],2)):ge("v-if",!0),Ot(J("div",{class:F([m(i).e("header"),(D.value==="year"||D.value==="month")&&m(i).e("header--bordered")])},[J("span",{class:F(m(i).e("prev-btn"))},[J("button",{type:"button","aria-label":m(u)("el.datepicker.prevYear"),class:F(["d-arrow-left",m(s).e("icon-btn")]),onClick:ne=>V(!1)},[pe(fe.$slots,"prev-year",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(xa))]),_:1})])],10,["aria-label","onClick"]),Ot(J("button",{type:"button","aria-label":m(u)("el.datepicker.prevMonth"),class:F([m(s).e("icon-btn"),"arrow-left"]),onClick:ne=>R(!1)},[pe(fe.$slots,"prev-month",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(Ea))]),_:1})])],10,["aria-label","onClick"]),[[cn,D.value==="date"]])],2),J("span",{role:"button",class:F(m(i).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:Sn(ne=>Z("year"),["enter"]),onClick:ne=>Z("year")},ze(m(M)),43,["onKeydown","onClick"]),Ot(J("span",{role:"button","aria-live":"polite",tabindex:"0",class:F([m(i).e("header-label"),{active:D.value==="month"}]),onKeydown:Sn(ne=>Z("month"),["enter"]),onClick:ne=>Z("month")},ze(m(u)(`el.datepicker.month${m(k)+1}`)),43,["onKeydown","onClick"]),[[cn,D.value==="date"]]),J("span",{class:F(m(i).e("next-btn"))},[Ot(J("button",{type:"button","aria-label":m(u)("el.datepicker.nextMonth"),class:F([m(s).e("icon-btn"),"arrow-right"]),onClick:ne=>R(!0)},[pe(fe.$slots,"next-month",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(cs))]),_:1})])],10,["aria-label","onClick"]),[[cn,D.value==="date"]]),J("button",{type:"button","aria-label":m(u)("el.datepicker.nextYear"),class:F([m(s).e("icon-btn"),"d-arrow-right"]),onClick:ne=>V(!0)},[pe(fe.$slots,"next-year",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(Ta))]),_:1})])],10,["aria-label","onClick"])],2)],2),[[cn,D.value!=="time"]]),J("div",{class:F(m(s).e("content")),onKeydown:bn},[D.value==="date"?($(),ye(Y0,{key:0,ref_key:"currentViewRef",ref:w,"selection-mode":m(q),date:b.value,"parsed-value":fe.parsedValue,"disabled-date":m(p),"cell-class-name":m(g),onPick:N},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):ge("v-if",!0),D.value==="year"?($(),ye(Ad,{key:1,ref_key:"currentViewRef",ref:w,"selection-mode":m(q),date:b.value,"disabled-date":m(p),"parsed-value":fe.parsedValue,onPick:he},null,8,["selection-mode","date","disabled-date","parsed-value"])):ge("v-if",!0),D.value==="month"?($(),ye(_d,{key:2,ref_key:"currentViewRef",ref:w,"selection-mode":m(q),date:b.value,"parsed-value":fe.parsedValue,"disabled-date":m(p),onPick:ue},null,8,["selection-mode","date","parsed-value","disabled-date"])):ge("v-if",!0)],34)],2)],2),Ot(J("div",{class:F(m(s).e("footer"))},[Ot(ie(m(Cr),{text:"",size:"small",class:F(m(s).e("link-btn")),disabled:m(z),onClick:re},{default:le(()=>[Qt(ze(m(u)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[cn,!m(ee)&&fe.showNow]]),ie(m(Cr),{plain:"",size:"small",class:F(m(s).e("link-btn")),disabled:m(Te),onClick:Ce},{default:le(()=>[Qt(ze(m(u)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[cn,m(ae)]])],2))}});var xee=We(Eee,[["__file","panel-date-pick.vue"]]);const Tee=Ke({...ML,..._1,visible:Boolean}),NL=t=>{const{emit:e}=Kt(),n=No(),r=gr();return i=>{const o=pt(i.value)?i.value():i.value;if(o){e("pick",[Rt(o[0]).locale(t.value),Rt(o[1]).locale(t.value)]);return}i.onClick&&i.onClick({attrs:n,slots:r,emit:e})}},FL=(t,{defaultValue:e,defaultTime:n,leftDate:r,rightDate:s,unit:i,onParsedValueChanged:o})=>{const{emit:a}=Kt(),{pickerNs:u}=nt(zm),l=Oe("date-range-picker"),{t:c,lang:d}=sn(),f=NL(d),h=H(),p=H(),g=H({endDate:null,selecting:!1}),v=E=>{g.value=E},y=(E=!1)=>{const x=m(h),k=m(p);Ru([x,k])&&a("pick",[x,k],E)},w=E=>{g.value.selecting=E,E||(g.value.endDate=null)},b=E=>{if(Ve(E)&&E.length===2){const[x,k]=E;h.value=x,r.value=x,p.value=k,o(m(h),m(p))}else S()},S=()=>{let[E,x]=I1(m(e),{lang:m(d),unit:i,unlinkPanels:t.unlinkPanels});const k=C=>C.diff(C.startOf("d"),"ms"),A=m(n);if(A){let C=0,_=0;if(Ve(A)){const[O,P]=A.map(Rt);C=k(O),_=k(P)}else{const O=k(Rt(A));C=O,_=O}E=E.startOf("d").add(C,"ms"),x=x.startOf("d").add(_,"ms")}h.value=void 0,p.value=void 0,r.value=E,s.value=x};return Ie(e,E=>{E&&S()},{immediate:!0}),Ie(()=>t.parsedValue,b,{immediate:!0}),{minDate:h,maxDate:p,rangeState:g,lang:d,ppNs:u,drpNs:l,handleChangeRange:v,handleRangeConfirm:y,handleShortcutClick:f,onSelect:w,onReset:b,t:c}},Cee=(t,e,n,r)=>{const s=H("date"),i=H(),o=H("date"),a=H(),u=nt("EP_PICKER_BASE"),{disabledDate:l}=u.props,{t:c,lang:d}=sn(),f=L(()=>n.value.year()),h=L(()=>n.value.month()),p=L(()=>r.value.year()),g=L(()=>r.value.month());function v(x,k){const A=c("el.datepicker.year");if(x.value==="year"){const C=Math.floor(k.value/10)*10;return A?`${C} ${A} - ${C+9} ${A}`:`${C} - ${C+9}`}return`${k.value} ${A}`}function y(x){x==null||x.focus()}async function w(x,k){const A=x==="left"?s:o,C=x==="left"?i:a;A.value=k,await ft(),y(C.value)}async function b(x,k,A){const C=k==="left",_=C?n:r,O=C?r:n,P=C?s:o,U=C?i:a;if(x==="year"){const j=_.value.year(A);_.value=Bp(j,d.value,l)}x==="month"&&(_.value=Lu(_.value,_.value.year(),A,d.value,l)),t.unlinkPanels||(O.value=k==="left"?_.value.add(1,"month"):_.value.subtract(1,"month")),P.value=x==="year"?"month":"date",await ft(),y(U.value),S(x)}function S(x){e("panel-change",[n.value.toDate(),r.value.toDate()],x)}function E(x,k,A){const C=A?"add":"subtract";return x==="year"?k[C](10,"year"):k[C](1,"year")}return{leftCurrentView:s,rightCurrentView:o,leftCurrentViewRef:i,rightCurrentViewRef:a,leftYear:f,rightYear:p,leftMonth:h,rightMonth:g,leftYearLabel:L(()=>v(s,f)),rightYearLabel:L(()=>v(o,p)),showLeftPicker:x=>w("left",x),showRightPicker:x=>w("right",x),handleLeftYearPick:x=>b("year","left",x),handleRightYearPick:x=>b("year","right",x),handleLeftMonthPick:x=>b("month","left",x),handleRightMonthPick:x=>b("month","right",x),handlePanelChange:S,adjustDateByView:E}},sh="month",kee=se({__name:"panel-date-range",props:Tee,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(t,{emit:e}){const n=t,r=nt("EP_PICKER_BASE"),s=nt("ElIsDefaultFormat"),{disabledDate:i,cellClassName:o,defaultTime:a,clearable:u}=r.props,l=En(r.props,"format"),c=En(r.props,"shortcuts"),d=En(r.props,"defaultValue"),{lang:f}=sn(),h=H(Rt().locale(f.value)),p=H(Rt().locale(f.value).add(1,sh)),{minDate:g,maxDate:v,rangeState:y,ppNs:w,drpNs:b,handleChangeRange:S,handleRangeConfirm:E,handleShortcutClick:x,onSelect:k,onReset:A,t:C}=FL(n,{defaultValue:d,defaultTime:a,leftDate:h,rightDate:p,unit:sh,onParsedValueChanged:jr});Ie(()=>n.visible,yt=>{!yt&&y.value.selecting&&(A(n.parsedValue),k(!1))});const _=H({min:null,max:null}),O=H({min:null,max:null}),{leftCurrentView:P,rightCurrentView:U,leftCurrentViewRef:j,rightCurrentViewRef:N,leftYear:R,rightYear:V,leftMonth:D,rightMonth:M,leftYearLabel:K,rightYearLabel:q,showLeftPicker:ee,showRightPicker:X,handleLeftYearPick:te,handleRightYearPick:ue,handleLeftMonthPick:he,handleRightMonthPick:Z,handlePanelChange:ce,adjustDateByView:ae}=Cee(n,e,h,p),Te=L(()=>!!c.value.length),Ce=L(()=>_.value.min!==null?_.value.min:g.value?g.value.format(Ee.value):""),z=L(()=>_.value.max!==null?_.value.max:v.value||g.value?(v.value||g.value).format(Ee.value):""),re=L(()=>O.value.min!==null?O.value.min:g.value?g.value.format(ke.value):""),ve=L(()=>O.value.max!==null?O.value.max:v.value||g.value?(v.value||g.value).format(ke.value):""),ke=L(()=>n.timeFormat||nL(l.value)),Ee=L(()=>n.dateFormat||tL(l.value)),be=yt=>Ru(yt)&&(i?!i(yt[0].toDate())&&!i(yt[1].toDate()):!0),Se=()=>{h.value=ae(P.value,h.value,!1),n.unlinkPanels||(p.value=h.value.add(1,"month")),ce("year")},_e=()=>{h.value=h.value.subtract(1,"month"),n.unlinkPanels||(p.value=h.value.add(1,"month")),ce("month")},Ne=()=>{n.unlinkPanels?p.value=ae(U.value,p.value,!0):(h.value=ae(U.value,h.value,!0),p.value=h.value.add(1,"month")),ce("year")},Me=()=>{n.unlinkPanels?p.value=p.value.add(1,"month"):(h.value=h.value.add(1,"month"),p.value=h.value.add(1,"month")),ce("month")},st=()=>{h.value=ae(P.value,h.value,!0),ce("year")},qe=()=>{h.value=h.value.add(1,"month"),ce("month")},Ae=()=>{p.value=ae(U.value,p.value,!1),ce("year")},et=()=>{p.value=p.value.subtract(1,"month"),ce("month")},St=L(()=>{const yt=(D.value+1)%12,ln=D.value+1>=12?1:0;return n.unlinkPanels&&new Date(R.value+ln,yt)<new Date(V.value,M.value)}),Lt=L(()=>n.unlinkPanels&&V.value*12+M.value-(R.value*12+D.value+1)>=12),Pt=L(()=>!(g.value&&v.value&&!y.value.selecting&&Ru([g.value,v.value]))),en=L(()=>n.type==="datetime"||n.type==="datetimerange"),zt=(yt,ln)=>{if(yt)return a?Rt(a[ln]||a).locale(f.value).year(yt.year()).month(yt.month()).date(yt.date()):yt},bn=(yt,ln=!0)=>{const Vt=yt.minDate,cr=yt.maxDate,ms=zt(Vt,0),Is=zt(cr,1);v.value===Is&&g.value===ms||(e("calendar-change",[Vt.toDate(),cr&&cr.toDate()]),v.value=Is,g.value=ms,!(!ln||en.value)&&E())},ht=H(!1),Nt=H(!1),fe=()=>{ht.value=!1},Le=()=>{Nt.value=!1},ne=(yt,ln)=>{_.value[ln]=yt;const Vt=Rt(yt,Ee.value).locale(f.value);if(Vt.isValid()){if(i&&i(Vt.toDate()))return;ln==="min"?(h.value=Vt,g.value=(g.value||h.value).year(Vt.year()).month(Vt.month()).date(Vt.date()),!n.unlinkPanels&&(!v.value||v.value.isBefore(g.value))&&(p.value=Vt.add(1,"month"),v.value=g.value.add(1,"month"))):(p.value=Vt,v.value=(v.value||p.value).year(Vt.year()).month(Vt.month()).date(Vt.date()),!n.unlinkPanels&&(!g.value||g.value.isAfter(v.value))&&(h.value=Vt.subtract(1,"month"),g.value=v.value.subtract(1,"month")))}},Ye=(yt,ln)=>{_.value[ln]=null},Et=(yt,ln)=>{O.value[ln]=yt;const Vt=Rt(yt,ke.value).locale(f.value);Vt.isValid()&&(ln==="min"?(ht.value=!0,g.value=(g.value||h.value).hour(Vt.hour()).minute(Vt.minute()).second(Vt.second())):(Nt.value=!0,v.value=(v.value||p.value).hour(Vt.hour()).minute(Vt.minute()).second(Vt.second()),p.value=v.value))},tn=(yt,ln)=>{O.value[ln]=null,ln==="min"?(h.value=g.value,ht.value=!1,(!v.value||v.value.isBefore(g.value))&&(v.value=g.value)):(p.value=v.value,Nt.value=!1,v.value&&v.value.isBefore(g.value)&&(g.value=v.value))},ct=(yt,ln,Vt)=>{O.value.min||(yt&&(h.value=yt,g.value=(g.value||h.value).hour(yt.hour()).minute(yt.minute()).second(yt.second())),Vt||(ht.value=ln),(!v.value||v.value.isBefore(g.value))&&(v.value=g.value,p.value=yt))},Wt=(yt,ln,Vt)=>{O.value.max||(yt&&(p.value=yt,v.value=(v.value||p.value).hour(yt.hour()).minute(yt.minute()).second(yt.second())),Vt||(Nt.value=ln),v.value&&v.value.isBefore(g.value)&&(g.value=v.value))},Fn=()=>{h.value=I1(m(d),{lang:m(f),unit:"month",unlinkPanels:n.unlinkPanels})[0],p.value=h.value.add(1,"month"),v.value=void 0,g.value=void 0,e("pick",null)},As=yt=>Ve(yt)?yt.map(ln=>ln.format(l.value)):yt.format(l.value),ir=yt=>Pu(yt,l.value,f.value,s);function jr(yt,ln){if(n.unlinkPanels&&ln){const Vt=(yt==null?void 0:yt.year())||0,cr=(yt==null?void 0:yt.month())||0,ms=ln.year(),Is=ln.month();p.value=Vt===ms&&cr===Is?ln.add(1,sh):ln}else p.value=h.value.add(1,sh),ln&&(p.value=p.value.hour(ln.hour()).minute(ln.minute()).second(ln.second()))}return e("set-picker-option",["isValidValue",be]),e("set-picker-option",["parseUserInput",ir]),e("set-picker-option",["formatToString",As]),e("set-picker-option",["handleClear",Fn]),(yt,ln)=>($(),Y("div",{class:F([m(w).b(),m(b).b(),{"has-sidebar":yt.$slots.sidebar||m(Te),"has-time":m(en)}])},[J("div",{class:F(m(w).e("body-wrapper"))},[pe(yt.$slots,"sidebar",{class:F(m(w).e("sidebar"))}),m(Te)?($(),Y("div",{key:0,class:F(m(w).e("sidebar"))},[($(!0),Y(dt,null,Zt(m(c),(Vt,cr)=>($(),Y("button",{key:cr,type:"button",class:F(m(w).e("shortcut")),onClick:ms=>m(x)(Vt)},ze(Vt.text),11,["onClick"]))),128))],2)):ge("v-if",!0),J("div",{class:F(m(w).e("body"))},[m(en)?($(),Y("div",{key:0,class:F(m(b).e("time-header"))},[J("span",{class:F(m(b).e("editors-wrap"))},[J("span",{class:F(m(b).e("time-picker-wrap"))},[ie(m(es),{size:"small",disabled:m(y).selecting,placeholder:m(C)("el.datepicker.startDate"),class:F(m(b).e("editor")),"model-value":m(Ce),"validate-event":!1,onInput:Vt=>ne(Vt,"min"),onChange:Vt=>Ye(Vt,"min")},null,8,["disabled","placeholder","class","model-value","onInput","onChange"])],2),Ot(($(),Y("span",{class:F(m(b).e("time-picker-wrap"))},[ie(m(es),{size:"small",class:F(m(b).e("editor")),disabled:m(y).selecting,placeholder:m(C)("el.datepicker.startTime"),"model-value":m(re),"validate-event":!1,onFocus:Vt=>ht.value=!0,onInput:Vt=>Et(Vt,"min"),onChange:Vt=>tn(Vt,"min")},null,8,["class","disabled","placeholder","model-value","onFocus","onInput","onChange"]),ie(m(Np),{visible:ht.value,format:m(ke),"datetime-role":"start","parsed-value":h.value,onPick:ct},null,8,["visible","format","parsed-value"])],2)),[[m(Oo),fe]])],2),J("span",null,[ie(m(lt),null,{default:le(()=>[ie(m(cs))]),_:1})]),J("span",{class:F([m(b).e("editors-wrap"),"is-right"])},[J("span",{class:F(m(b).e("time-picker-wrap"))},[ie(m(es),{size:"small",class:F(m(b).e("editor")),disabled:m(y).selecting,placeholder:m(C)("el.datepicker.endDate"),"model-value":m(z),readonly:!m(g),"validate-event":!1,onInput:Vt=>ne(Vt,"max"),onChange:Vt=>Ye(Vt,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onInput","onChange"])],2),Ot(($(),Y("span",{class:F(m(b).e("time-picker-wrap"))},[ie(m(es),{size:"small",class:F(m(b).e("editor")),disabled:m(y).selecting,placeholder:m(C)("el.datepicker.endTime"),"model-value":m(ve),readonly:!m(g),"validate-event":!1,onFocus:Vt=>m(g)&&(Nt.value=!0),onInput:Vt=>Et(Vt,"max"),onChange:Vt=>tn(Vt,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onFocus","onInput","onChange"]),ie(m(Np),{"datetime-role":"end",visible:Nt.value,format:m(ke),"parsed-value":p.value,onPick:Wt},null,8,["visible","format","parsed-value"])],2)),[[m(Oo),Le]])],2)],2)):ge("v-if",!0),J("div",{class:F([[m(w).e("content"),m(b).e("content")],"is-left"])},[J("div",{class:F(m(b).e("header"))},[J("button",{type:"button",class:F([m(w).e("icon-btn"),"d-arrow-left"]),"aria-label":m(C)("el.datepicker.prevYear"),onClick:Se},[pe(yt.$slots,"prev-year",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(xa))]),_:1})])],10,["aria-label"]),Ot(J("button",{type:"button",class:F([m(w).e("icon-btn"),"arrow-left"]),"aria-label":m(C)("el.datepicker.prevMonth"),onClick:_e},[pe(yt.$slots,"prev-month",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(Ea))]),_:1})])],10,["aria-label"]),[[cn,m(P)==="date"]]),yt.unlinkPanels?($(),Y("button",{key:0,type:"button",disabled:!m(Lt),class:F([[m(w).e("icon-btn"),{"is-disabled":!m(Lt)}],"d-arrow-right"]),"aria-label":m(C)("el.datepicker.nextYear"),onClick:st},[pe(yt.$slots,"next-year",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(Ta))]),_:1})])],10,["disabled","aria-label"])):ge("v-if",!0),yt.unlinkPanels&&m(P)==="date"?($(),Y("button",{key:1,type:"button",disabled:!m(St),class:F([[m(w).e("icon-btn"),{"is-disabled":!m(St)}],"arrow-right"]),"aria-label":m(C)("el.datepicker.nextMonth"),onClick:qe},[pe(yt.$slots,"next-month",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(cs))]),_:1})])],10,["disabled","aria-label"])):ge("v-if",!0),J("div",null,[J("span",{role:"button",class:F(m(b).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:Sn(Vt=>m(ee)("year"),["enter"]),onClick:Vt=>m(ee)("year")},ze(m(K)),43,["onKeydown","onClick"]),Ot(J("span",{role:"button","aria-live":"polite",tabindex:"0",class:F([m(b).e("header-label"),{active:m(P)==="month"}]),onKeydown:Sn(Vt=>m(ee)("month"),["enter"]),onClick:Vt=>m(ee)("month")},ze(m(C)(`el.datepicker.month${h.value.month()+1}`)),43,["onKeydown","onClick"]),[[cn,m(P)==="date"]])])],2),m(P)==="date"?($(),ye(Y0,{key:0,ref_key:"leftCurrentViewRef",ref:j,"selection-mode":"range",date:h.value,"min-date":m(g),"max-date":m(v),"range-state":m(y),"disabled-date":m(i),"cell-class-name":m(o),onChangerange:m(S),onPick:bn,onSelect:m(k)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])):ge("v-if",!0),m(P)==="year"?($(),ye(Ad,{key:1,ref_key:"leftCurrentViewRef",ref:j,"selection-mode":"year",date:h.value,"disabled-date":m(i),"parsed-value":yt.parsedValue,onPick:m(te)},null,8,["date","disabled-date","parsed-value","onPick"])):ge("v-if",!0),m(P)==="month"?($(),ye(_d,{key:2,ref_key:"leftCurrentViewRef",ref:j,"selection-mode":"month",date:h.value,"parsed-value":yt.parsedValue,"disabled-date":m(i),onPick:m(he)},null,8,["date","parsed-value","disabled-date","onPick"])):ge("v-if",!0)],2),J("div",{class:F([[m(w).e("content"),m(b).e("content")],"is-right"])},[J("div",{class:F(m(b).e("header"))},[yt.unlinkPanels?($(),Y("button",{key:0,type:"button",disabled:!m(Lt),class:F([[m(w).e("icon-btn"),{"is-disabled":!m(Lt)}],"d-arrow-left"]),"aria-label":m(C)("el.datepicker.prevYear"),onClick:Ae},[pe(yt.$slots,"prev-year",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(xa))]),_:1})])],10,["disabled","aria-label"])):ge("v-if",!0),yt.unlinkPanels&&m(U)==="date"?($(),Y("button",{key:1,type:"button",disabled:!m(St),class:F([[m(w).e("icon-btn"),{"is-disabled":!m(St)}],"arrow-left"]),"aria-label":m(C)("el.datepicker.prevMonth"),onClick:et},[pe(yt.$slots,"prev-month",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(Ea))]),_:1})])],10,["disabled","aria-label"])):ge("v-if",!0),J("button",{type:"button","aria-label":m(C)("el.datepicker.nextYear"),class:F([m(w).e("icon-btn"),"d-arrow-right"]),onClick:Ne},[pe(yt.$slots,"next-year",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(Ta))]),_:1})])],10,["aria-label"]),Ot(J("button",{type:"button",class:F([m(w).e("icon-btn"),"arrow-right"]),"aria-label":m(C)("el.datepicker.nextMonth"),onClick:Me},[pe(yt.$slots,"next-month",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(cs))]),_:1})])],10,["aria-label"]),[[cn,m(U)==="date"]]),J("div",null,[J("span",{role:"button",class:F(m(b).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:Sn(Vt=>m(X)("year"),["enter"]),onClick:Vt=>m(X)("year")},ze(m(q)),43,["onKeydown","onClick"]),Ot(J("span",{role:"button","aria-live":"polite",tabindex:"0",class:F([m(b).e("header-label"),{active:m(U)==="month"}]),onKeydown:Sn(Vt=>m(X)("month"),["enter"]),onClick:Vt=>m(X)("month")},ze(m(C)(`el.datepicker.month${p.value.month()+1}`)),43,["onKeydown","onClick"]),[[cn,m(U)==="date"]])])],2),m(U)==="date"?($(),ye(Y0,{key:0,ref_key:"rightCurrentViewRef",ref:N,"selection-mode":"range",date:p.value,"min-date":m(g),"max-date":m(v),"range-state":m(y),"disabled-date":m(i),"cell-class-name":m(o),onChangerange:m(S),onPick:bn,onSelect:m(k)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])):ge("v-if",!0),m(U)==="year"?($(),ye(Ad,{key:1,ref_key:"rightCurrentViewRef",ref:N,"selection-mode":"year",date:p.value,"disabled-date":m(i),"parsed-value":yt.parsedValue,onPick:m(ue)},null,8,["date","disabled-date","parsed-value","onPick"])):ge("v-if",!0),m(U)==="month"?($(),ye(_d,{key:2,ref_key:"rightCurrentViewRef",ref:N,"selection-mode":"month",date:p.value,"parsed-value":yt.parsedValue,"disabled-date":m(i),onPick:m(Z)},null,8,["date","parsed-value","disabled-date","onPick"])):ge("v-if",!0)],2)],2)],2),m(en)?($(),Y("div",{key:0,class:F(m(w).e("footer"))},[m(u)?($(),ye(m(Cr),{key:0,text:"",size:"small",class:F(m(w).e("link-btn")),onClick:Fn},{default:le(()=>[Qt(ze(m(C)("el.datepicker.clear")),1)]),_:1},8,["class"])):ge("v-if",!0),ie(m(Cr),{plain:"",size:"small",class:F(m(w).e("link-btn")),disabled:m(Pt),onClick:Vt=>m(E)(!1)},{default:le(()=>[Qt(ze(m(C)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled","onClick"])],2)):ge("v-if",!0)],2))}});var _ee=We(kee,[["__file","panel-date-range.vue"]]);const Aee=Ke({..._1}),Iee=["pick","set-picker-option","calendar-change"],Ree=({unlinkPanels:t,leftDate:e,rightDate:n})=>{const{t:r}=sn(),s=()=>{e.value=e.value.subtract(1,"year"),t.value||(n.value=n.value.subtract(1,"year"))},i=()=>{t.value||(e.value=e.value.add(1,"year")),n.value=n.value.add(1,"year")},o=()=>{e.value=e.value.add(1,"year")},a=()=>{n.value=n.value.subtract(1,"year")},u=L(()=>`${e.value.year()} ${r("el.datepicker.year")}`),l=L(()=>`${n.value.year()} ${r("el.datepicker.year")}`),c=L(()=>e.value.year()),d=L(()=>n.value.year()===e.value.year()?e.value.year()+1:n.value.year());return{leftPrevYear:s,rightNextYear:i,leftNextYear:o,rightPrevYear:a,leftLabel:u,rightLabel:l,leftYear:c,rightYear:d}},ih="year",Lee=se({name:"DatePickerMonthRange"}),Pee=se({...Lee,props:Aee,emits:Iee,setup(t,{emit:e}){const n=t,{lang:r}=sn(),s=nt("EP_PICKER_BASE"),i=nt("ElIsDefaultFormat"),{shortcuts:o,disabledDate:a}=s.props,u=En(s.props,"format"),l=En(s.props,"defaultValue"),c=H(Rt().locale(r.value)),d=H(Rt().locale(r.value).add(1,ih)),{minDate:f,maxDate:h,rangeState:p,ppNs:g,drpNs:v,handleChangeRange:y,handleRangeConfirm:w,handleShortcutClick:b,onSelect:S}=FL(n,{defaultValue:l,leftDate:c,rightDate:d,unit:ih,onParsedValueChanged:M}),E=L(()=>!!o.length),{leftPrevYear:x,rightNextYear:k,leftNextYear:A,rightPrevYear:C,leftLabel:_,rightLabel:O,leftYear:P,rightYear:U}=Ree({unlinkPanels:En(n,"unlinkPanels"),leftDate:c,rightDate:d}),j=L(()=>n.unlinkPanels&&U.value>P.value+1),N=(K,q=!0)=>{const ee=K.minDate,X=K.maxDate;h.value===X&&f.value===ee||(e("calendar-change",[ee.toDate(),X&&X.toDate()]),h.value=X,f.value=ee,q&&w())},R=()=>{c.value=I1(m(l),{lang:m(r),unit:"year",unlinkPanels:n.unlinkPanels})[0],d.value=c.value.add(1,"year"),e("pick",null)},V=K=>Ve(K)?K.map(q=>q.format(u.value)):K.format(u.value),D=K=>Pu(K,u.value,r.value,i);function M(K,q){if(n.unlinkPanels&&q){const ee=(K==null?void 0:K.year())||0,X=q.year();d.value=ee===X?q.add(1,ih):q}else d.value=c.value.add(1,ih)}return e("set-picker-option",["isValidValue",Ru]),e("set-picker-option",["formatToString",V]),e("set-picker-option",["parseUserInput",D]),e("set-picker-option",["handleClear",R]),(K,q)=>($(),Y("div",{class:F([m(g).b(),m(v).b(),{"has-sidebar":!!K.$slots.sidebar||m(E)}])},[J("div",{class:F(m(g).e("body-wrapper"))},[pe(K.$slots,"sidebar",{class:F(m(g).e("sidebar"))}),m(E)?($(),Y("div",{key:0,class:F(m(g).e("sidebar"))},[($(!0),Y(dt,null,Zt(m(o),(ee,X)=>($(),Y("button",{key:X,type:"button",class:F(m(g).e("shortcut")),onClick:te=>m(b)(ee)},ze(ee.text),11,["onClick"]))),128))],2)):ge("v-if",!0),J("div",{class:F(m(g).e("body"))},[J("div",{class:F([[m(g).e("content"),m(v).e("content")],"is-left"])},[J("div",{class:F(m(v).e("header"))},[J("button",{type:"button",class:F([m(g).e("icon-btn"),"d-arrow-left"]),onClick:m(x)},[pe(K.$slots,"prev-year",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(xa))]),_:1})])],10,["onClick"]),K.unlinkPanels?($(),Y("button",{key:0,type:"button",disabled:!m(j),class:F([[m(g).e("icon-btn"),{[m(g).is("disabled")]:!m(j)}],"d-arrow-right"]),onClick:m(A)},[pe(K.$slots,"next-year",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(Ta))]),_:1})])],10,["disabled","onClick"])):ge("v-if",!0),J("div",null,ze(m(_)),1)],2),ie(_d,{"selection-mode":"range",date:c.value,"min-date":m(f),"max-date":m(h),"range-state":m(p),"disabled-date":m(a),onChangerange:m(y),onPick:N,onSelect:m(S)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),J("div",{class:F([[m(g).e("content"),m(v).e("content")],"is-right"])},[J("div",{class:F(m(v).e("header"))},[K.unlinkPanels?($(),Y("button",{key:0,type:"button",disabled:!m(j),class:F([[m(g).e("icon-btn"),{"is-disabled":!m(j)}],"d-arrow-left"]),onClick:m(C)},[pe(K.$slots,"prev-year",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(xa))]),_:1})])],10,["disabled","onClick"])):ge("v-if",!0),J("button",{type:"button",class:F([m(g).e("icon-btn"),"d-arrow-right"]),onClick:m(k)},[pe(K.$slots,"next-year",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(Ta))]),_:1})])],10,["onClick"]),J("div",null,ze(m(O)),1)],2),ie(_d,{"selection-mode":"range",date:d.value,"min-date":m(f),"max-date":m(h),"range-state":m(p),"disabled-date":m(a),onChangerange:m(y),onPick:N,onSelect:m(S)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var Dee=We(Pee,[["__file","panel-month-range.vue"]]);const Oee=Ke({..._1}),$ee=["pick","set-picker-option","calendar-change"],Mee=({unlinkPanels:t,leftDate:e,rightDate:n})=>{const r=()=>{e.value=e.value.subtract(10,"year"),t.value||(n.value=n.value.subtract(10,"year"))},s=()=>{t.value||(e.value=e.value.add(10,"year")),n.value=n.value.add(10,"year")},i=()=>{e.value=e.value.add(10,"year")},o=()=>{n.value=n.value.subtract(10,"year")},a=L(()=>{const d=Math.floor(e.value.year()/10)*10;return`${d}-${d+9}`}),u=L(()=>{const d=Math.floor(n.value.year()/10)*10;return`${d}-${d+9}`}),l=L(()=>Math.floor(e.value.year()/10)*10+9),c=L(()=>Math.floor(n.value.year()/10)*10);return{leftPrevYear:r,rightNextYear:s,leftNextYear:i,rightPrevYear:o,leftLabel:a,rightLabel:u,leftYear:l,rightYear:c}},xC="year",Nee=se({name:"DatePickerYearRange"}),Fee=se({...Nee,props:Oee,emits:$ee,setup(t,{emit:e}){const n=t,{lang:r}=sn(),s=H(Rt().locale(r.value)),i=H(s.value.add(10,"year")),{pickerNs:o}=nt(zm),a=Oe("date-range-picker"),u=nt("ElIsDefaultFormat"),l=L(()=>!!N.length),c=L(()=>[o.b(),a.b(),{"has-sidebar":!!gr().sidebar||l.value}]),d=L(()=>({content:[o.e("content"),a.e("content"),"is-left"],arrowLeftBtn:[o.e("icon-btn"),"d-arrow-left"],arrowRightBtn:[o.e("icon-btn"),{[o.is("disabled")]:!x.value},"d-arrow-right"]})),f=L(()=>({content:[o.e("content"),a.e("content"),"is-right"],arrowLeftBtn:[o.e("icon-btn"),{"is-disabled":!x.value},"d-arrow-left"],arrowRightBtn:[o.e("icon-btn"),"d-arrow-right"]})),h=NL(r),{leftPrevYear:p,rightNextYear:g,leftNextYear:v,rightPrevYear:y,leftLabel:w,rightLabel:b,leftYear:S,rightYear:E}=Mee({unlinkPanels:En(n,"unlinkPanels"),leftDate:s,rightDate:i}),x=L(()=>n.unlinkPanels&&E.value>S.value+1),k=H(),A=H(),C=H({endDate:null,selecting:!1}),_=te=>{C.value=te},O=(te,ue=!0)=>{const he=te.minDate,Z=te.maxDate;A.value===Z&&k.value===he||(e("calendar-change",[he.toDate(),Z&&Z.toDate()]),A.value=Z,k.value=he,ue&&P())},P=(te=!1)=>{Ru([k.value,A.value])&&e("pick",[k.value,A.value],te)},U=te=>{C.value.selecting=te,te||(C.value.endDate=null)},j=nt("EP_PICKER_BASE"),{shortcuts:N,disabledDate:R}=j.props,V=En(j.props,"format"),D=En(j.props,"defaultValue"),M=()=>{let te;if(Ve(D.value)){const ue=Rt(D.value[0]);let he=Rt(D.value[1]);return n.unlinkPanels||(he=ue.add(10,xC)),[ue,he]}else D.value?te=Rt(D.value):te=Rt();return te=te.locale(r.value),[te,te.add(10,xC)]};Ie(()=>D.value,te=>{if(te){const ue=M();s.value=ue[0],i.value=ue[1]}},{immediate:!0}),Ie(()=>n.parsedValue,te=>{if(te&&te.length===2)if(k.value=te[0],A.value=te[1],s.value=k.value,n.unlinkPanels&&A.value){const ue=k.value.year(),he=A.value.year();i.value=ue===he?A.value.add(10,"year"):A.value}else i.value=s.value.add(10,"year");else{const ue=M();k.value=void 0,A.value=void 0,s.value=ue[0],i.value=ue[1]}},{immediate:!0});const K=te=>Pu(te,V.value,r.value,u),q=te=>Ve(te)?te.map(ue=>ue.format(V.value)):te.format(V.value),ee=te=>Ru(te)&&(R?!R(te[0].toDate())&&!R(te[1].toDate()):!0),X=()=>{const te=M();s.value=te[0],i.value=te[1],A.value=void 0,k.value=void 0,e("pick",null)};return e("set-picker-option",["isValidValue",ee]),e("set-picker-option",["parseUserInput",K]),e("set-picker-option",["formatToString",q]),e("set-picker-option",["handleClear",X]),(te,ue)=>($(),Y("div",{class:F(m(c))},[J("div",{class:F(m(o).e("body-wrapper"))},[pe(te.$slots,"sidebar",{class:F(m(o).e("sidebar"))}),m(l)?($(),Y("div",{key:0,class:F(m(o).e("sidebar"))},[($(!0),Y(dt,null,Zt(m(N),(he,Z)=>($(),Y("button",{key:Z,type:"button",class:F(m(o).e("shortcut")),onClick:ce=>m(h)(he)},ze(he.text),11,["onClick"]))),128))],2)):ge("v-if",!0),J("div",{class:F(m(o).e("body"))},[J("div",{class:F(m(d).content)},[J("div",{class:F(m(a).e("header"))},[J("button",{type:"button",class:F(m(d).arrowLeftBtn),onClick:m(p)},[pe(te.$slots,"prev-year",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(xa))]),_:1})])],10,["onClick"]),te.unlinkPanels?($(),Y("button",{key:0,type:"button",disabled:!m(x),class:F(m(d).arrowRightBtn),onClick:m(v)},[pe(te.$slots,"next-year",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(Ta))]),_:1})])],10,["disabled","onClick"])):ge("v-if",!0),J("div",null,ze(m(w)),1)],2),ie(Ad,{"selection-mode":"range",date:s.value,"min-date":k.value,"max-date":A.value,"range-state":C.value,"disabled-date":m(R),onChangerange:_,onPick:O,onSelect:U},null,8,["date","min-date","max-date","range-state","disabled-date"])],2),J("div",{class:F(m(f).content)},[J("div",{class:F(m(a).e("header"))},[te.unlinkPanels?($(),Y("button",{key:0,type:"button",disabled:!m(x),class:F(m(f).arrowLeftBtn),onClick:m(y)},[pe(te.$slots,"prev-year",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(xa))]),_:1})])],10,["disabled","onClick"])):ge("v-if",!0),J("button",{type:"button",class:F(m(f).arrowRightBtn),onClick:m(g)},[pe(te.$slots,"next-year",{},()=>[ie(m(lt),null,{default:le(()=>[ie(m(Ta))]),_:1})])],10,["onClick"]),J("div",null,ze(m(b)),1)],2),ie(Ad,{"selection-mode":"range",date:i.value,"min-date":k.value,"max-date":A.value,"range-state":C.value,"disabled-date":m(R),onChangerange:_,onPick:O,onSelect:U},null,8,["date","min-date","max-date","range-state","disabled-date"])],2)],2)],2)],2))}});var Bee=We(Fee,[["__file","panel-year-range.vue"]]);const Vee=function(t){switch(t){case"daterange":case"datetimerange":return _ee;case"monthrange":return Dee;case"yearrange":return Bee;default:return xee}};Rt.extend(rL);Rt.extend(xJ);Rt.extend(T1);Rt.extend(_J);Rt.extend(LJ);Rt.extend($J);Rt.extend(BJ);Rt.extend(jJ);var Uee=se({name:"ElDatePicker",install:null,props:lee,emits:[_t],setup(t,{expose:e,emit:n,slots:r}){const s=Oe("picker-panel"),i=L(()=>!t.format);Jt("ElIsDefaultFormat",i),Jt("ElPopperOptions",fn(En(t,"popperOptions"))),Jt(zm,{slots:r,pickerNs:s});const o=H();e({focus:()=>{var l;(l=o.value)==null||l.focus()},blur:()=>{var l;(l=o.value)==null||l.blur()},handleOpen:()=>{var l;(l=o.value)==null||l.handleOpen()},handleClose:()=>{var l;(l=o.value)==null||l.handleClose()}});const u=l=>{n(_t,l)};return()=>{var l;const c=(l=t.format)!=null?l:KJ[t.type]||jl,d=Vee(t.type);return ie(LL,Yt(t,{format:c,type:t.type,ref:o,"onUpdate:modelValue":u}),{default:f=>ie(d,f,{"prev-month":r["prev-month"],"next-month":r["next-month"],"prev-year":r["prev-year"],"next-year":r["next-year"]}),"range-separator":r["range-separator"]})}}});const Hee=Dt(Uee),L1=Symbol("elDescriptions");var Sc=se({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:nt(L1,{})}},render(){var t;const e=NX(this.cell),n=(((t=this.cell)==null?void 0:t.dirs)||[]).map(y=>{const{dir:w,arg:b,modifiers:S,value:E}=y;return[w,E,b,S]}),{border:r,direction:s}=this.descriptions,i=s==="vertical",o=()=>{var y,w,b;return((b=(w=(y=this.cell)==null?void 0:y.children)==null?void 0:w.label)==null?void 0:b.call(w))||e.label},a=()=>{var y,w,b;return(b=(w=(y=this.cell)==null?void 0:y.children)==null?void 0:w.default)==null?void 0:b.call(w)},u=e.span,l=e.rowspan,c=e.align?`is-${e.align}`:"",d=e.labelAlign?`is-${e.labelAlign}`:c,f=e.className,h=e.labelClassName,p=this.type==="label"&&(e.labelWidth||this.descriptions.labelWidth)||e.width,g={width:Xn(p),minWidth:Xn(e.minWidth)},v=Oe("descriptions");switch(this.type){case"label":return Ot(bt(this.tag,{style:g,class:[v.e("cell"),v.e("label"),v.is("bordered-label",r),v.is("vertical-label",i),d,h],colSpan:i?u:1,rowspan:i?1:l},o()),n);case"content":return Ot(bt(this.tag,{style:g,class:[v.e("cell"),v.e("content"),v.is("bordered-content",r),v.is("vertical-content",i),c,f],colSpan:i?u:u*2-1,rowspan:i?l*2-1:l},a()),n);default:{const y=o(),w={},b=Xn(e.labelWidth||this.descriptions.labelWidth);return b&&(w.width=b,w.display="inline-block"),Ot(bt("td",{style:g,class:[v.e("cell"),c],colSpan:u,rowspan:l},[Sr(y)?void 0:bt("span",{style:w,class:[v.e("label"),h]},y),bt("span",{class:[v.e("content"),f]},a())]),n)}}}});const jee=Ke({row:{type:de(Array),default:()=>[]}}),Kee=se({name:"ElDescriptionsRow"}),zee=se({...Kee,props:jee,setup(t){const e=nt(L1,{});return(n,r)=>m(e).direction==="vertical"?($(),Y(dt,{key:0},[J("tr",null,[($(!0),Y(dt,null,Zt(n.row,(s,i)=>($(),ye(m(Sc),{key:`tr1-${i}`,cell:s,tag:"th",type:"label"},null,8,["cell"]))),128))]),J("tr",null,[($(!0),Y(dt,null,Zt(n.row,(s,i)=>($(),ye(m(Sc),{key:`tr2-${i}`,cell:s,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):($(),Y("tr",{key:1},[($(!0),Y(dt,null,Zt(n.row,(s,i)=>($(),Y(dt,{key:`tr3-${i}`},[m(e).border?($(),Y(dt,{key:0},[ie(m(Sc),{cell:s,tag:"td",type:"label"},null,8,["cell"]),ie(m(Sc),{cell:s,tag:"td",type:"content"},null,8,["cell"])],64)):($(),ye(m(Sc),{key:1,cell:s,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var Wee=We(zee,[["__file","descriptions-row.vue"]]);const Gee=Ke({border:Boolean,column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:fr,title:{type:String,default:""},extra:{type:String,default:""},labelWidth:{type:[String,Number],default:""}}),BL="ElDescriptionsItem",qee=se({name:"ElDescriptions"}),Yee=se({...qee,props:Gee,setup(t){const e=t,n=Oe("descriptions"),r=ur(),s=gr();Jt(L1,e);const i=L(()=>[n.b(),n.m(r.value)]),o=(u,l,c,d=!1)=>(u.props||(u.props={}),l>c&&(u.props.span=c),d&&(u.props.span=l),u),a=()=>{if(!s.default)return[];const u=Gi(s.default()).filter(p=>{var g;return((g=p==null?void 0:p.type)==null?void 0:g.name)===BL}),l=[];let c=[],d=e.column,f=0;const h=[];return u.forEach((p,g)=>{var v,y,w;const b=((v=p.props)==null?void 0:v.span)||1,S=((y=p.props)==null?void 0:y.rowspan)||1,E=l.length;if(h[E]||(h[E]=0),S>1)for(let x=1;x<S;x++)h[w=E+x]||(h[w]=0),h[E+x]++,f++;if(h[E]>0&&(d-=h[E],h[E]=0),g<u.length-1&&(f+=b>d?d:b),g===u.length-1){const x=e.column-f%e.column;c.push(o(p,x,d,!0)),l.push(c);return}b<d?(d-=b,c.push(p)):(c.push(o(p,b,d)),l.push(c),d=e.column,c=[])}),l};return(u,l)=>($(),Y("div",{class:F(m(i))},[u.title||u.extra||u.$slots.title||u.$slots.extra?($(),Y("div",{key:0,class:F(m(n).e("header"))},[J("div",{class:F(m(n).e("title"))},[pe(u.$slots,"title",{},()=>[Qt(ze(u.title),1)])],2),J("div",{class:F(m(n).e("extra"))},[pe(u.$slots,"extra",{},()=>[Qt(ze(u.extra),1)])],2)],2)):ge("v-if",!0),J("div",{class:F(m(n).e("body"))},[J("table",{class:F([m(n).e("table"),m(n).is("bordered",u.border)])},[J("tbody",null,[($(!0),Y(dt,null,Zt(a(),(c,d)=>($(),ye(Wee,{key:d,row:c},null,8,["row"]))),128))])],2)],2)],2))}});var Xee=We(Yee,[["__file","description.vue"]]);const TC=["left","center","right"],Qee=Ke({label:{type:String,default:""},span:{type:Number,default:1},rowspan:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},labelWidth:{type:[String,Number],default:""},align:{type:String,values:TC,default:"left"},labelAlign:{type:String,values:TC},className:{type:String,default:""},labelClassName:{type:String,default:""}}),VL=se({name:BL,props:Qee}),Zee=Dt(Xee,{DescriptionsItem:VL}),Jee=Gn(VL),P1=t=>{if(!t)return{onClick:xn,onMousedown:xn,onMouseup:xn};let e=!1,n=!1;return{onClick:o=>{e&&n&&t(o),e=n=!1},onMousedown:o=>{e=o.target===o.currentTarget},onMouseup:o=>{n=o.target===o.currentTarget}}},ete=Ke({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:de([String,Array,Object])},zIndex:{type:de([String,Number])}}),tte={click:t=>t instanceof MouseEvent},nte="overlay";var rte=se({name:"ElOverlay",props:ete,emits:tte,setup(t,{slots:e,emit:n}){const r=Oe(nte),s=u=>{n("click",u)},{onClick:i,onMousedown:o,onMouseup:a}=P1(t.customMaskEvent?void 0:s);return()=>t.mask?ie("div",{class:[r.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:i,onMousedown:o,onMouseup:a},[pe(e,"default")],Xs.STYLE|Xs.CLASS|Xs.PROPS,["onClick","onMouseup","onMousedown"]):bt("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[pe(e,"default")])}});const D1=rte,UL=Symbol("dialogInjectionKey"),HL=Ke({center:Boolean,alignCenter:Boolean,closeIcon:{type:Tn},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),ste={close:()=>!0},jL=(t,e,n,r)=>{const s={offsetX:0,offsetY:0},i=(d,f)=>{if(t.value){const{offsetX:h,offsetY:p}=s,g=t.value.getBoundingClientRect(),v=g.left,y=g.top,w=g.width,b=g.height,S=document.documentElement.clientWidth,E=document.documentElement.clientHeight,x=-v+h,k=-y+p,A=S-v-w+h,C=E-y-b+p;r!=null&&r.value||(d=Math.min(Math.max(d,x),A),f=Math.min(Math.max(f,k),C)),s.offsetX=d,s.offsetY=f,t.value.style.transform=`translate(${Xn(d)}, ${Xn(f)})`}},o=d=>{const f=d.clientX,h=d.clientY,{offsetX:p,offsetY:g}=s,v=w=>{const b=p+w.clientX-f,S=g+w.clientY-h;i(b,S)},y=()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",v),document.addEventListener("mouseup",y)},a=()=>{e.value&&t.value&&(e.value.addEventListener("mousedown",o),window.addEventListener("resize",c))},u=()=>{e.value&&t.value&&(e.value.removeEventListener("mousedown",o),window.removeEventListener("resize",c))},l=()=>{s.offsetX=0,s.offsetY=0,t.value&&(t.value.style.transform="")},c=()=>{const{offsetX:d,offsetY:f}=s;i(d,f)};return Ft(()=>{Fr(()=>{n.value?a():u()})}),In(()=>{u()}),{resetPosition:l,updatePosition:c}},Wm=(...t)=>e=>{t.forEach(n=>{pt(n)?n(e):n.value=e})},ite=se({name:"ElDialogContent"}),ote=se({...ite,props:HL,emits:ste,setup(t,{expose:e}){const n=t,{t:r}=sn(),{Close:s}=vR,{dialogRef:i,headerRef:o,bodyId:a,ns:u,style:l}=nt(UL),{focusTrapRef:c}=nt(u1),d=L(()=>[u.b(),u.is("fullscreen",n.fullscreen),u.is("draggable",n.draggable),u.is("align-center",n.alignCenter),{[u.m("center")]:n.center}]),f=Wm(c,i),h=L(()=>n.draggable),p=L(()=>n.overflow),{resetPosition:g,updatePosition:v}=jL(i,o,h,p);return e({resetPosition:g,updatePosition:v}),(y,w)=>($(),Y("div",{ref:m(f),class:F(m(d)),style:mt(m(l)),tabindex:"-1"},[J("header",{ref_key:"headerRef",ref:o,class:F([m(u).e("header"),y.headerClass,{"show-close":y.showClose}])},[pe(y.$slots,"header",{},()=>[J("span",{role:"heading","aria-level":y.ariaLevel,class:F(m(u).e("title"))},ze(y.title),11,["aria-level"])]),y.showClose?($(),Y("button",{key:0,"aria-label":m(r)("el.dialog.close"),class:F(m(u).e("headerbtn")),type:"button",onClick:b=>y.$emit("close")},[ie(m(lt),{class:F(m(u).e("close"))},{default:le(()=>[($(),ye(jt(y.closeIcon||m(s))))]),_:1},8,["class"])],10,["aria-label","onClick"])):ge("v-if",!0)],2),J("div",{id:m(a),class:F([m(u).e("body"),y.bodyClass])},[pe(y.$slots,"default")],10,["id"]),y.$slots.footer?($(),Y("footer",{key:0,class:F([m(u).e("footer"),y.footerClass])},[pe(y.$slots,"footer")],2)):ge("v-if",!0)],6))}});var ate=We(ote,[["__file","dialog-content.vue"]]);const KL=Ke({...HL,appendToBody:Boolean,appendTo:{type:jm.to.type,default:"body"},beforeClose:{type:de(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),zL={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[_t]:t=>wn(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},O1=(t,e={})=>{Dn(t)||lr("[useLockscreen]","You need to pass a ref param to this function");const n=e.ns||Oe("popup"),r=L(()=>n.bm("parent","hidden"));if(!on||ws(document.body,r.value))return;let s=0,i=!1,o="0";const a=()=>{setTimeout(()=>{typeof document>"u"||i&&document&&(document.body.style.width=o,ts(document.body,r.value))},200)};Ie(t,u=>{if(!u){a();return}i=!ws(document.body,r.value),i&&(o=document.body.style.width,Js(document.body,r.value)),s=pR(n.namespace.value);const l=document.documentElement.clientHeight<document.body.scrollHeight,c=xo(document.body,"overflowY");s>0&&(l||c==="scroll")&&i&&(document.body.style.width=`calc(100% - ${s}px)`)}),Lk(()=>a())},WL=(t,e)=>{var n;const s=Kt().emit,{nextZIndex:i}=Gu();let o="";const a=Or(),u=Or(),l=H(!1),c=H(!1),d=H(!1),f=H((n=t.zIndex)!=null?n:i());let h,p;const g=Zd("namespace",jc),v=L(()=>{const N={},R=`--${g.value}-dialog`;return t.fullscreen||(t.top&&(N[`${R}-margin-top`]=t.top),t.width&&(N[`${R}-width`]=Xn(t.width))),N}),y=L(()=>t.alignCenter?{display:"flex"}:{});function w(){s("opened")}function b(){s("closed"),s(_t,!1),t.destroyOnClose&&(d.value=!1)}function S(){s("close")}function E(){p==null||p(),h==null||h(),t.openDelay&&t.openDelay>0?{stop:h}=pl(()=>C(),t.openDelay):C()}function x(){h==null||h(),p==null||p(),t.closeDelay&&t.closeDelay>0?{stop:p}=pl(()=>_(),t.closeDelay):_()}function k(){function N(R){R||(c.value=!0,l.value=!1)}t.beforeClose?t.beforeClose(N):x()}function A(){t.closeOnClickModal&&k()}function C(){on&&(l.value=!0)}function _(){l.value=!1}function O(){s("openAutoFocus")}function P(){s("closeAutoFocus")}function U(N){var R;((R=N.detail)==null?void 0:R.focusReason)==="pointer"&&N.preventDefault()}t.lockScroll&&O1(l);function j(){t.closeOnPressEscape&&k()}return Ie(()=>t.modelValue,N=>{N?(c.value=!1,E(),d.value=!0,f.value=XI(t.zIndex)?i():f.value++,ft(()=>{s("open"),e.value&&(e.value.parentElement.scrollTop=0,e.value.parentElement.scrollLeft=0,e.value.scrollTop=0)})):l.value&&x()}),Ie(()=>t.fullscreen,N=>{e.value&&(N?(o=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=o)}),Ft(()=>{t.modelValue&&(l.value=!0,d.value=!0,E())}),{afterEnter:w,afterLeave:b,beforeLeave:S,handleClose:k,onModalClick:A,close:x,doClose:_,onOpenAutoFocus:O,onCloseAutoFocus:P,onCloseRequested:j,onFocusoutPrevented:U,titleId:a,bodyId:u,closed:c,style:v,overlayDialogStyle:y,rendered:d,visible:l,zIndex:f}},lte=se({name:"ElDialog",inheritAttrs:!1}),ute=se({...lte,props:KL,emits:zL,setup(t,{expose:e}){const n=t,r=gr();Ao({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},L(()=>!!r.title));const s=Oe("dialog"),i=H(),o=H(),a=H(),{visible:u,titleId:l,bodyId:c,style:d,overlayDialogStyle:f,rendered:h,zIndex:p,afterEnter:g,afterLeave:v,beforeLeave:y,handleClose:w,onModalClick:b,onOpenAutoFocus:S,onCloseAutoFocus:E,onCloseRequested:x,onFocusoutPrevented:k}=WL(n,i);Jt(UL,{dialogRef:i,headerRef:o,bodyId:c,ns:s,rendered:h,style:d});const A=P1(b),C=L(()=>n.draggable&&!n.fullscreen);return e({visible:u,dialogContentRef:a,resetPosition:()=>{var O;(O=a.value)==null||O.resetPosition()},handleClose:w}),(O,P)=>($(),ye(m(Xu),{to:O.appendTo,disabled:O.appendTo!=="body"?!1:!O.appendToBody},{default:le(()=>[ie(Ar,{name:"dialog-fade",onAfterEnter:m(g),onAfterLeave:m(v),onBeforeLeave:m(y),persisted:""},{default:le(()=>[Ot(ie(m(D1),{"custom-mask-event":"",mask:O.modal,"overlay-class":O.modalClass,"z-index":m(p)},{default:le(()=>[J("div",{role:"dialog","aria-modal":"true","aria-label":O.title||void 0,"aria-labelledby":O.title?void 0:m(l),"aria-describedby":m(c),class:F(`${m(s).namespace.value}-overlay-dialog`),style:mt(m(f)),onClick:m(A).onClick,onMousedown:m(A).onMousedown,onMouseup:m(A).onMouseup},[ie(m(Yu),{loop:"",trapped:m(u),"focus-start-el":"container",onFocusAfterTrapped:m(S),onFocusAfterReleased:m(E),onFocusoutPrevented:m(k),onReleaseRequested:m(x)},{default:le(()=>[m(h)?($(),ye(ate,Yt({key:0,ref_key:"dialogContentRef",ref:a},O.$attrs,{center:O.center,"align-center":O.alignCenter,"close-icon":O.closeIcon,draggable:m(C),overflow:O.overflow,fullscreen:O.fullscreen,"header-class":O.headerClass,"body-class":O.bodyClass,"footer-class":O.footerClass,"show-close":O.showClose,title:O.title,"aria-level":O.headerAriaLevel,onClose:m(w)}),ks({header:le(()=>[O.$slots.title?pe(O.$slots,"title",{key:1}):pe(O.$slots,"header",{key:0,close:m(w),titleId:m(l),titleClass:m(s).e("title")})]),default:le(()=>[pe(O.$slots,"default")]),_:2},[O.$slots.footer?{name:"footer",fn:le(()=>[pe(O.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):ge("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[cn,m(u)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var cte=We(ute,[["__file","dialog.vue"]]);const dte=Dt(cte),fte=Ke({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:de(String),default:"solid"}}),hte=se({name:"ElDivider"}),pte=se({...hte,props:fte,setup(t){const e=t,n=Oe("divider"),r=L(()=>n.cssVar({"border-style":e.borderStyle}));return(s,i)=>($(),Y("div",{class:F([m(n).b(),m(n).m(s.direction)]),style:mt(m(r)),role:"separator"},[s.$slots.default&&s.direction!=="vertical"?($(),Y("div",{key:0,class:F([m(n).e("text"),m(n).is(s.contentPosition)])},[pe(s.$slots,"default")],2)):ge("v-if",!0)],6))}});var mte=We(pte,[["__file","divider.vue"]]);const GL=Dt(mte),gte=Ke({...KL,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),vte=zL,yte=se({name:"ElDrawer",inheritAttrs:!1}),bte=se({...yte,props:gte,emits:vte,setup(t,{expose:e}){const n=t,r=gr();Ao({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},L(()=>!!r.title));const s=H(),i=H(),o=Oe("drawer"),{t:a}=sn(),{afterEnter:u,afterLeave:l,beforeLeave:c,visible:d,rendered:f,titleId:h,bodyId:p,zIndex:g,onModalClick:v,onOpenAutoFocus:y,onCloseAutoFocus:w,onFocusoutPrevented:b,onCloseRequested:S,handleClose:E}=WL(n,s),x=L(()=>n.direction==="rtl"||n.direction==="ltr"),k=L(()=>Xn(n.size));return e({handleClose:E,afterEnter:u,afterLeave:l}),(A,C)=>($(),ye(m(Xu),{to:A.appendTo,disabled:A.appendTo!=="body"?!1:!A.appendToBody},{default:le(()=>[ie(Ar,{name:m(o).b("fade"),onAfterEnter:m(u),onAfterLeave:m(l),onBeforeLeave:m(c),persisted:""},{default:le(()=>[Ot(ie(m(D1),{mask:A.modal,"overlay-class":A.modalClass,"z-index":m(g),onClick:m(v)},{default:le(()=>[ie(m(Yu),{loop:"",trapped:m(d),"focus-trap-el":s.value,"focus-start-el":i.value,onFocusAfterTrapped:m(y),onFocusAfterReleased:m(w),onFocusoutPrevented:m(b),onReleaseRequested:m(S)},{default:le(()=>[J("div",Yt({ref_key:"drawerRef",ref:s,"aria-modal":"true","aria-label":A.title||void 0,"aria-labelledby":A.title?void 0:m(h),"aria-describedby":m(p)},A.$attrs,{class:[m(o).b(),A.direction,m(d)&&"open"],style:m(x)?"width: "+m(k):"height: "+m(k),role:"dialog",onClick:wt(()=>{},["stop"])}),[J("span",{ref_key:"focusStartRef",ref:i,class:F(m(o).e("sr-focus")),tabindex:"-1"},null,2),A.withHeader?($(),Y("header",{key:0,class:F([m(o).e("header"),A.headerClass])},[A.$slots.title?pe(A.$slots,"title",{key:1},()=>[ge(" DEPRECATED SLOT ")]):pe(A.$slots,"header",{key:0,close:m(E),titleId:m(h),titleClass:m(o).e("title")},()=>[A.$slots.title?ge("v-if",!0):($(),Y("span",{key:0,id:m(h),role:"heading","aria-level":A.headerAriaLevel,class:F(m(o).e("title"))},ze(A.title),11,["id","aria-level"]))]),A.showClose?($(),Y("button",{key:2,"aria-label":m(a)("el.drawer.close"),class:F(m(o).e("close-btn")),type:"button",onClick:m(E)},[ie(m(lt),{class:F(m(o).e("close"))},{default:le(()=>[ie(m(si))]),_:1},8,["class"])],10,["aria-label","onClick"])):ge("v-if",!0)],2)):ge("v-if",!0),m(f)?($(),Y("div",{key:1,id:m(p),class:F([m(o).e("body"),A.bodyClass])},[pe(A.$slots,"default")],10,["id"])):ge("v-if",!0),A.$slots.footer?($(),Y("div",{key:2,class:F([m(o).e("footer"),A.footerClass])},[pe(A.$slots,"footer")],2)):ge("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[cn,m(d)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var Ste=We(bte,[["__file","drawer.vue"]]);const wte=Dt(Ste),Ete=se({inheritAttrs:!1});function xte(t,e,n,r,s,i){return pe(t.$slots,"default")}var Tte=We(Ete,[["render",xte],["__file","collection.vue"]]);const Cte=se({name:"ElCollectionItem",inheritAttrs:!1});function kte(t,e,n,r,s,i){return pe(t.$slots,"default")}var _te=We(Cte,[["render",kte],["__file","collection-item.vue"]]);const qL="data-el-collection-item",YL=t=>{const e=`El${t}Collection`,n=`${e}Item`,r=Symbol(e),s=Symbol(n),i={...Tte,name:e,setup(){const a=H(),u=new Map;Jt(r,{itemMap:u,getItems:()=>{const c=m(a);if(!c)return[];const d=Array.from(c.querySelectorAll(`[${qL}]`));return[...u.values()].sort((h,p)=>d.indexOf(h.ref)-d.indexOf(p.ref))},collectionRef:a})}},o={..._te,name:n,setup(a,{attrs:u}){const l=H(),c=nt(r,void 0);Jt(s,{collectionItemRef:l}),Ft(()=>{const d=m(l);d&&c.itemMap.set(d,{ref:d,...u})}),In(()=>{const d=m(l);c.itemMap.delete(d)})}};return{COLLECTION_INJECTION_KEY:r,COLLECTION_ITEM_INJECTION_KEY:s,ElCollection:i,ElCollectionItem:o}},Ate=Ke({style:{type:de([String,Array,Object])},currentTabId:{type:de(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:de(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:Ite,ElCollectionItem:Rte,COLLECTION_INJECTION_KEY:$1,COLLECTION_ITEM_INJECTION_KEY:Lte}=YL("RovingFocusGroup"),M1=Symbol("elRovingFocusGroup"),XL=Symbol("elRovingFocusGroupItem"),Pte={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Dte=(t,e)=>t,Ote=(t,e,n)=>{const r=Dte(t.code);return Pte[r]},$te=(t,e)=>t.map((n,r)=>t[(r+e)%t.length]),N1=t=>{const{activeElement:e}=document;for(const n of t)if(n===e||(n.focus(),e!==document.activeElement))return},CC="currentTabIdChange",kC="rovingFocusGroup.entryFocus",Mte={bubbles:!1,cancelable:!0},Nte=se({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Ate,emits:[CC,"entryFocus"],setup(t,{emit:e}){var n;const r=H((n=t.currentTabId||t.defaultCurrentTabId)!=null?n:null),s=H(!1),i=H(!1),o=H(),{getItems:a}=nt($1,void 0),u=L(()=>[{outline:"none"},t.style]),l=g=>{e(CC,g)},c=()=>{s.value=!0},d=Jn(g=>{var v;(v=t.onMousedown)==null||v.call(t,g)},()=>{i.value=!0}),f=Jn(g=>{var v;(v=t.onFocus)==null||v.call(t,g)},g=>{const v=!m(i),{target:y,currentTarget:w}=g;if(y===w&&v&&!m(s)){const b=new Event(kC,Mte);if(w==null||w.dispatchEvent(b),!b.defaultPrevented){const S=a().filter(C=>C.focusable),E=S.find(C=>C.active),x=S.find(C=>C.id===m(r)),A=[E,x,...S].filter(Boolean).map(C=>C.ref);N1(A)}}i.value=!1}),h=Jn(g=>{var v;(v=t.onBlur)==null||v.call(t,g)},()=>{s.value=!1}),p=(...g)=>{e("entryFocus",...g)};Jt(M1,{currentTabbedId:Bu(r),loop:En(t,"loop"),tabIndex:L(()=>m(s)?-1:0),rovingFocusGroupRef:o,rovingFocusGroupRootStyle:u,orientation:En(t,"orientation"),dir:En(t,"dir"),onItemFocus:l,onItemShiftTab:c,onBlur:h,onFocus:f,onMousedown:d}),Ie(()=>t.currentTabId,g=>{r.value=g??null}),Cn(o,kC,p)}});function Fte(t,e,n,r,s,i){return pe(t.$slots,"default")}var Bte=We(Nte,[["render",Fte],["__file","roving-focus-group-impl.vue"]]);const Vte=se({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:Ite,ElRovingFocusGroupImpl:Bte}});function Ute(t,e,n,r,s,i){const o=Mt("el-roving-focus-group-impl"),a=Mt("el-focus-group-collection");return $(),ye(a,null,{default:le(()=>[ie(o,Ms(Qi(t.$attrs)),{default:le(()=>[pe(t.$slots,"default")]),_:3},16)]),_:3})}var Hte=We(Vte,[["render",Ute],["__file","roving-focus-group.vue"]]);const Hh=Ke({trigger:ou.trigger,triggerKeys:{type:de(Array),default:()=>[it.enter,it.numpadEnter,it.space,it.down]},effect:{...nr.effect,default:"light"},type:{type:de(String)},placement:{type:de(String),default:"bottom"},popperOptions:{type:de(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:de([Number,String]),default:0},maxHeight:{type:de([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,values:wR,default:"menu"},buttonProps:{type:de(Object)},teleported:nr.teleported,persistent:{type:Boolean,default:!0}}),QL=Ke({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Tn}}),jte=Ke({onKeydown:{type:de(Function)}}),Kte=[it.down,it.pageDown,it.home],ZL=[it.up,it.pageUp,it.end],zte=[...Kte,...ZL],{ElCollection:Wte,ElCollectionItem:Gte,COLLECTION_INJECTION_KEY:qte,COLLECTION_ITEM_INJECTION_KEY:Yte}=YL("Dropdown"),Gm=Symbol("elDropdown"),{ButtonGroup:Xte}=Cr,Qte=se({name:"ElDropdown",components:{ElButton:Cr,ElButtonGroup:Xte,ElScrollbar:io,ElDropdownCollection:Wte,ElTooltip:Vr,ElRovingFocusGroup:Hte,ElOnlyChild:_R,ElIcon:lt,ArrowDown:Bo},props:Hh,emits:["visible-change","click","command"],setup(t,{emit:e}){const n=Kt(),r=Oe("dropdown"),{t:s}=sn(),i=H(),o=H(),a=H(),u=H(),l=H(null),c=H(null),d=H(!1),f=L(()=>({maxHeight:Xn(t.maxHeight)})),h=L(()=>[r.m(S.value)]),p=L(()=>Zr(t.trigger)),g=Or().value,v=L(()=>t.id||g);Ie([i,p],([R,V],[D])=>{var M,K,q;(M=D==null?void 0:D.$el)!=null&&M.removeEventListener&&D.$el.removeEventListener("pointerenter",x),(K=R==null?void 0:R.$el)!=null&&K.removeEventListener&&R.$el.removeEventListener("pointerenter",x),(q=R==null?void 0:R.$el)!=null&&q.addEventListener&&V.includes("hover")&&R.$el.addEventListener("pointerenter",x)},{immediate:!0}),In(()=>{var R,V;(V=(R=i.value)==null?void 0:R.$el)!=null&&V.removeEventListener&&i.value.$el.removeEventListener("pointerenter",x)});function y(){w()}function w(){var R;(R=a.value)==null||R.onClose()}function b(){var R;(R=a.value)==null||R.onOpen()}const S=ur();function E(...R){e("command",...R)}function x(){var R,V;(V=(R=i.value)==null?void 0:R.$el)==null||V.focus()}function k(){}function A(){const R=m(u);p.value.includes("hover")&&(R==null||R.focus()),c.value=null}function C(R){c.value=R}function _(R){d.value||(R.preventDefault(),R.stopImmediatePropagation())}function O(){e("visible-change",!0)}function P(R){var V;(R==null?void 0:R.type)==="keydown"&&((V=u.value)==null||V.focus())}function U(){e("visible-change",!1)}return Jt(Gm,{contentRef:u,role:L(()=>t.role),triggerId:v,isUsingKeyboard:d,onItemEnter:k,onItemLeave:A}),Jt("elDropdown",{instance:n,dropdownSize:S,handleClick:y,commandHandler:E,trigger:En(t,"trigger"),hideOnClick:En(t,"hideOnClick")}),{t:s,ns:r,scrollbar:l,wrapStyle:f,dropdownTriggerKls:h,dropdownSize:S,triggerId:v,currentTabId:c,handleCurrentTabIdChange:C,handlerMainButtonClick:R=>{e("click",R)},handleEntryFocus:_,handleClose:w,handleOpen:b,handleBeforeShowTooltip:O,handleShowTooltip:P,handleBeforeHideTooltip:U,onFocusAfterTrapped:R=>{var V,D;R.preventDefault(),(D=(V=u.value)==null?void 0:V.focus)==null||D.call(V,{preventScroll:!0})},popperRef:a,contentRef:u,triggeringElementRef:i,referenceElementRef:o}}});function Zte(t,e,n,r,s,i){var o;const a=Mt("el-dropdown-collection"),u=Mt("el-roving-focus-group"),l=Mt("el-scrollbar"),c=Mt("el-only-child"),d=Mt("el-tooltip"),f=Mt("el-button"),h=Mt("arrow-down"),p=Mt("el-icon"),g=Mt("el-button-group");return $(),Y("div",{class:F([t.ns.b(),t.ns.is("disabled",t.disabled)])},[ie(d,{ref:"popperRef",role:t.role,effect:t.effect,"fallback-placements":["bottom","top"],"popper-options":t.popperOptions,"gpu-acceleration":!1,"hide-after":t.trigger==="hover"?t.hideTimeout:0,"manual-mode":!0,placement:t.placement,"popper-class":[t.ns.e("popper"),t.popperClass],"reference-element":(o=t.referenceElementRef)==null?void 0:o.$el,trigger:t.trigger,"trigger-keys":t.triggerKeys,"trigger-target-el":t.contentRef,"show-after":t.trigger==="hover"?t.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":t.triggeringElementRef,"virtual-triggering":t.splitButton,disabled:t.disabled,transition:`${t.ns.namespace.value}-zoom-in-top`,teleported:t.teleported,pure:"",persistent:t.persistent,onBeforeShow:t.handleBeforeShowTooltip,onShow:t.handleShowTooltip,onBeforeHide:t.handleBeforeHideTooltip},ks({content:le(()=>[ie(l,{ref:"scrollbar","wrap-style":t.wrapStyle,tag:"div","view-class":t.ns.e("list")},{default:le(()=>[ie(u,{loop:t.loop,"current-tab-id":t.currentTabId,orientation:"horizontal",onCurrentTabIdChange:t.handleCurrentTabIdChange,onEntryFocus:t.handleEntryFocus},{default:le(()=>[ie(a,null,{default:le(()=>[pe(t.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[t.splitButton?void 0:{name:"default",fn:le(()=>[ie(c,{id:t.triggerId,ref:"triggeringElementRef",role:"button",tabindex:t.tabindex},{default:le(()=>[pe(t.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","persistent","onBeforeShow","onShow","onBeforeHide"]),t.splitButton?($(),ye(g,{key:0},{default:le(()=>[ie(f,Yt({ref:"referenceElementRef"},t.buttonProps,{size:t.dropdownSize,type:t.type,disabled:t.disabled,tabindex:t.tabindex,onClick:t.handlerMainButtonClick}),{default:le(()=>[pe(t.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),ie(f,Yt({id:t.triggerId,ref:"triggeringElementRef"},t.buttonProps,{role:"button",size:t.dropdownSize,type:t.type,class:t.ns.e("caret-button"),disabled:t.disabled,tabindex:t.tabindex,"aria-label":t.t("el.dropdown.toggleDropdown")}),{default:le(()=>[ie(p,{class:F(t.ns.e("icon"))},{default:le(()=>[ie(h)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):ge("v-if",!0)],2)}var Jte=We(Qte,[["render",Zte],["__file","dropdown.vue"]]);const ene=se({components:{ElRovingFocusCollectionItem:Rte},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(t,{emit:e}){const{currentTabbedId:n,loop:r,onItemFocus:s,onItemShiftTab:i}=nt(M1,void 0),{getItems:o}=nt($1,void 0),a=Or(),u=H(),l=Jn(h=>{e("mousedown",h)},h=>{t.focusable?s(m(a)):h.preventDefault()}),c=Jn(h=>{e("focus",h)},()=>{s(m(a))}),d=Jn(h=>{e("keydown",h)},h=>{const{code:p,shiftKey:g,target:v,currentTarget:y}=h;if(p===it.tab&&g){i();return}if(v!==y)return;const w=Ote(h);if(w){h.preventDefault();let S=o().filter(E=>E.focusable).map(E=>E.ref);switch(w){case"last":{S.reverse();break}case"prev":case"next":{w==="prev"&&S.reverse();const E=S.indexOf(y);S=r.value?$te(S,E+1):S.slice(E+1);break}}ft(()=>{N1(S)})}}),f=L(()=>n.value===m(a));return Jt(XL,{rovingFocusGroupItemRef:u,tabIndex:L(()=>m(f)?0:-1),handleMousedown:l,handleFocus:c,handleKeydown:d}),{id:a,handleKeydown:d,handleFocus:c,handleMousedown:l}}});function tne(t,e,n,r,s,i){const o=Mt("el-roving-focus-collection-item");return $(),ye(o,{id:t.id,focusable:t.focusable,active:t.active},{default:le(()=>[pe(t.$slots,"default")]),_:3},8,["id","focusable","active"])}var nne=We(ene,[["render",tne],["__file","roving-focus-item.vue"]]);const rne=se({name:"DropdownItemImpl",components:{ElIcon:lt},props:QL,emits:["pointermove","pointerleave","click","clickimpl"],setup(t,{emit:e}){const n=Oe("dropdown"),{role:r}=nt(Gm,void 0),{collectionItemRef:s}=nt(Yte,void 0),{collectionItemRef:i}=nt(Lte,void 0),{rovingFocusGroupItemRef:o,tabIndex:a,handleFocus:u,handleKeydown:l,handleMousedown:c}=nt(XL,void 0),d=Wm(s,i,o),f=L(()=>r.value==="menu"?"menuitem":r.value==="navigation"?"link":"button"),h=Jn(p=>{if([it.enter,it.numpadEnter,it.space].includes(p.code))return p.preventDefault(),p.stopImmediatePropagation(),e("clickimpl",p),!0},l);return{ns:n,itemRef:d,dataset:{[qL]:""},role:f,tabIndex:a,handleFocus:u,handleKeydown:h,handleMousedown:c}}});function sne(t,e,n,r,s,i){const o=Mt("el-icon");return $(),Y(dt,null,[t.divided?($(),Y("li",{key:0,role:"separator",class:F(t.ns.bem("menu","item","divided"))},null,2)):ge("v-if",!0),J("li",Yt({ref:t.itemRef},{...t.dataset,...t.$attrs},{"aria-disabled":t.disabled,class:[t.ns.be("menu","item"),t.ns.is("disabled",t.disabled)],tabindex:t.tabIndex,role:t.role,onClick:a=>t.$emit("clickimpl",a),onFocus:t.handleFocus,onKeydown:wt(t.handleKeydown,["self"]),onMousedown:t.handleMousedown,onPointermove:a=>t.$emit("pointermove",a),onPointerleave:a=>t.$emit("pointerleave",a)}),[t.icon?($(),ye(o,{key:0},{default:le(()=>[($(),ye(jt(t.icon)))]),_:1})):ge("v-if",!0),pe(t.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var ine=We(rne,[["render",sne],["__file","dropdown-item-impl.vue"]]);const JL=()=>{const t=nt("elDropdown",{}),e=L(()=>t==null?void 0:t.dropdownSize);return{elDropdown:t,_elDropdownSize:e}},one=se({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Gte,ElRovingFocusItem:nne,ElDropdownItemImpl:ine},inheritAttrs:!1,props:QL,emits:["pointermove","pointerleave","click"],setup(t,{emit:e,attrs:n}){const{elDropdown:r}=JL(),s=Kt(),i=H(null),o=L(()=>{var h,p;return(p=(h=m(i))==null?void 0:h.textContent)!=null?p:""}),{onItemEnter:a,onItemLeave:u}=nt(Gm,void 0),l=Jn(h=>(e("pointermove",h),h.defaultPrevented),WT(h=>{if(t.disabled){u(h);return}const p=h.currentTarget;p===document.activeElement||p.contains(document.activeElement)||(a(h),h.defaultPrevented||p==null||p.focus())})),c=Jn(h=>(e("pointerleave",h),h.defaultPrevented),WT(u)),d=Jn(h=>{if(!t.disabled)return e("click",h),h.type!=="keydown"&&h.defaultPrevented},h=>{var p,g,v;if(t.disabled){h.stopImmediatePropagation();return}(p=r==null?void 0:r.hideOnClick)!=null&&p.value&&((g=r.handleClick)==null||g.call(r)),(v=r.commandHandler)==null||v.call(r,t.command,s,h)}),f=L(()=>({...t,...n}));return{handleClick:d,handlePointerMove:l,handlePointerLeave:c,textContent:o,propsAndAttrs:f}}});function ane(t,e,n,r,s,i){var o;const a=Mt("el-dropdown-item-impl"),u=Mt("el-roving-focus-item"),l=Mt("el-dropdown-collection-item");return $(),ye(l,{disabled:t.disabled,"text-value":(o=t.textValue)!=null?o:t.textContent},{default:le(()=>[ie(u,{focusable:!t.disabled},{default:le(()=>[ie(a,Yt(t.propsAndAttrs,{onPointerleave:t.handlePointerLeave,onPointermove:t.handlePointerMove,onClickimpl:t.handleClick}),{default:le(()=>[pe(t.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var eP=We(one,[["render",ane],["__file","dropdown-item.vue"]]);const lne=se({name:"ElDropdownMenu",props:jte,setup(t){const e=Oe("dropdown"),{_elDropdownSize:n}=JL(),r=n.value,{focusTrapRef:s,onKeydown:i}=nt(u1,void 0),{contentRef:o,role:a,triggerId:u}=nt(Gm,void 0),{collectionRef:l,getItems:c}=nt(qte,void 0),{rovingFocusGroupRef:d,rovingFocusGroupRootStyle:f,tabIndex:h,onBlur:p,onFocus:g,onMousedown:v}=nt(M1,void 0),{collectionRef:y}=nt($1,void 0),w=L(()=>[e.b("menu"),e.bm("menu",r==null?void 0:r.value)]),b=Wm(o,l,s,d,y),S=Jn(x=>{var k;(k=t.onKeydown)==null||k.call(t,x)},x=>{const{currentTarget:k,code:A,target:C}=x;if(k.contains(C),it.tab===A&&x.stopImmediatePropagation(),x.preventDefault(),C!==m(o)||!zte.includes(A))return;const O=c().filter(P=>!P.disabled).map(P=>P.ref);ZL.includes(A)&&O.reverse(),N1(O)});return{size:r,rovingFocusGroupRootStyle:f,tabIndex:h,dropdownKls:w,role:a,triggerId:u,dropdownListWrapperRef:b,handleKeydown:x=>{S(x),i(x)},onBlur:p,onFocus:g,onMousedown:v}}});function une(t,e,n,r,s,i){return $(),Y("ul",{ref:t.dropdownListWrapperRef,class:F(t.dropdownKls),style:mt(t.rovingFocusGroupRootStyle),tabindex:-1,role:t.role,"aria-labelledby":t.triggerId,onBlur:t.onBlur,onFocus:t.onFocus,onKeydown:wt(t.handleKeydown,["self"]),onMousedown:wt(t.onMousedown,["self"])},[pe(t.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}var tP=We(lne,[["render",une],["__file","dropdown-menu.vue"]]);const cne=Dt(Jte,{DropdownItem:eP,DropdownMenu:tP}),dne=Gn(eP),fne=Gn(tP),hne=se({name:"ImgEmpty"}),pne=se({...hne,setup(t){const e=Oe("empty"),n=Or();return(r,s)=>($(),Y("svg",{viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[J("defs",null,[J("linearGradient",{id:`linearGradient-1-${m(n)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[J("stop",{"stop-color":`var(${m(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),J("stop",{"stop-color":`var(${m(e).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),J("linearGradient",{id:`linearGradient-2-${m(n)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[J("stop",{"stop-color":`var(${m(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),J("stop",{"stop-color":`var(${m(e).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),J("rect",{id:`path-3-${m(n)}`,x:"0",y:"0",width:"17",height:"36"},null,8,["id"])]),J("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[J("g",{transform:"translate(-1268.000000, -535.000000)"},[J("g",{transform:"translate(1268.000000, 535.000000)"},[J("path",{d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${m(e).cssVarBlockName("fill-color-3")})`},null,8,["fill"]),J("polygon",{fill:`var(${m(e).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,["fill"]),J("g",{transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},[J("polygon",{fill:`var(${m(e).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,["fill"]),J("polygon",{fill:`var(${m(e).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,["fill"]),J("rect",{fill:`url(#linearGradient-1-${m(n)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,["fill"]),J("polygon",{fill:`var(${m(e).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,["fill"])]),J("rect",{fill:`url(#linearGradient-2-${m(n)})`,x:"13",y:"45",width:"40",height:"36"},null,8,["fill"]),J("g",{transform:"translate(53.000000, 45.000000)"},[J("use",{fill:`var(${m(e).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${m(n)}`},null,8,["fill","xlink:href"]),J("polygon",{fill:`var(${m(e).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${m(n)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,["fill","mask"])]),J("polygon",{fill:`var(${m(e).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,["fill"])])])])]))}});var mne=We(pne,[["__file","img-empty.vue"]]);const gne=Ke({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),vne=se({name:"ElEmpty"}),yne=se({...vne,props:gne,setup(t){const e=t,{t:n}=sn(),r=Oe("empty"),s=L(()=>e.description||n("el.table.emptyText")),i=L(()=>({width:Xn(e.imageSize)}));return(o,a)=>($(),Y("div",{class:F(m(r).b())},[J("div",{class:F(m(r).e("image")),style:mt(m(i))},[o.image?($(),Y("img",{key:0,src:o.image,ondragstart:"return false"},null,8,["src"])):pe(o.$slots,"image",{key:1},()=>[ie(mne)])],6),J("div",{class:F(m(r).e("description"))},[o.$slots.description?pe(o.$slots,"description",{key:0}):($(),Y("p",{key:1},ze(m(s)),1))],2),o.$slots.default?($(),Y("div",{key:0,class:F(m(r).e("bottom"))},[pe(o.$slots,"default")],2)):ge("v-if",!0)],2))}});var bne=We(yne,[["__file","empty.vue"]]);const nP=Dt(bne),Sne=Ke({size:{type:String,values:so},disabled:Boolean}),wne=Ke({...Sne,model:Object,rules:{type:de(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean],default:!0}}),Ene={validate:(t,e,n)=>(Ve(t)||ut(t))&&wn(e)&&ut(n)};function xne(){const t=H([]),e=L(()=>{if(!t.value.length)return"0";const i=Math.max(...t.value);return i?`${i}px`:""});function n(i){const o=t.value.indexOf(i);return o===-1&&e.value,o}function r(i,o){if(i&&o){const a=n(o);t.value.splice(a,1,i)}else i&&t.value.push(i)}function s(i){const o=n(i);o>-1&&t.value.splice(o,1)}return{autoLabelWidth:e,registerLabelWidth:r,deregisterLabelWidth:s}}const oh=(t,e)=>{const n=Zr(e);return n.length>0?t.filter(r=>r.prop&&n.includes(r.prop)):t},Tne="ElForm",Cne=se({name:Tne}),kne=se({...Cne,props:wne,emits:Ene,setup(t,{expose:e,emit:n}){const r=t,s=H(),i=fn([]),o=ur(),a=Oe("form"),u=L(()=>{const{labelPosition:S,inline:E}=r;return[a.b(),a.m(o.value||"default"),{[a.m(`label-${S}`)]:S,[a.m("inline")]:E}]}),l=S=>i.find(E=>E.prop===S),c=S=>{i.push(S)},d=S=>{S.prop&&i.splice(i.indexOf(S),1)},f=(S=[])=>{r.model&&oh(i,S).forEach(E=>E.resetField())},h=(S=[])=>{oh(i,S).forEach(E=>E.clearValidate())},p=L(()=>!!r.model),g=S=>{if(i.length===0)return[];const E=oh(i,S);return E.length?E:[]},v=async S=>w(void 0,S),y=async(S=[])=>{if(!p.value)return!1;const E=g(S);if(E.length===0)return!0;let x={};for(const k of E)try{await k.validate(""),k.validateState==="error"&&k.resetField()}catch(A){x={...x,...A}}return Object.keys(x).length===0?!0:Promise.reject(x)},w=async(S=[],E)=>{const x=!pt(E);try{const k=await y(S);return k===!0&&await(E==null?void 0:E(k)),k}catch(k){if(k instanceof Error)throw k;const A=k;if(r.scrollToError&&s.value){const C=s.value.querySelector(`.${a.b()}-item.is-error`);C==null||C.scrollIntoView(r.scrollIntoViewOptions)}return await(E==null?void 0:E(!1,A)),x&&Promise.reject(A)}},b=S=>{var E;const x=oh(i,S)[0];x&&((E=x.$el)==null||E.scrollIntoView(r.scrollIntoViewOptions))};return Ie(()=>r.rules,()=>{r.validateOnRuleChange&&v().catch(S=>void 0)},{deep:!0,flush:"post"}),Jt(xl,fn({..._r(r),emit:n,resetFields:f,clearValidate:h,validateField:w,getField:l,addField:c,removeField:d,...xne()})),e({validate:v,validateField:w,resetFields:f,clearValidate:h,scrollToField:b,fields:i}),(S,E)=>($(),Y("form",{ref_key:"formRef",ref:s,class:F(m(u))},[pe(S.$slots,"default")],2))}});var _ne=We(kne,[["__file","form.vue"]]);function Qa(){return Qa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qa.apply(this,arguments)}function Ane(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Id(t,e)}function X0(t){return X0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},X0(t)}function Id(t,e){return Id=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Id(t,e)}function Ine(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jh(t,e,n){return Ine()?jh=Reflect.construct.bind():jh=function(s,i,o){var a=[null];a.push.apply(a,i);var u=Function.bind.apply(s,a),l=new u;return o&&Id(l,o.prototype),l},jh.apply(null,arguments)}function Rne(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Q0(t){var e=typeof Map=="function"?new Map:void 0;return Q0=function(r){if(r===null||!Rne(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,s)}function s(){return jh(r,arguments,X0(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Id(s,r)},Q0(t)}var Lne=/%[sdj%]/g,Pne=function(){};function Z0(t){if(!t||!t.length)return null;var e={};return t.forEach(function(n){var r=n.field;e[r]=e[r]||[],e[r].push(n)}),e}function Bs(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var s=0,i=n.length;if(typeof t=="function")return t.apply(null,n);if(typeof t=="string"){var o=t.replace(Lne,function(a){if(a==="%%")return"%";if(s>=i)return a;switch(a){case"%s":return String(n[s++]);case"%d":return Number(n[s++]);case"%j":try{return JSON.stringify(n[s++])}catch{return"[Circular]"}break;default:return a}});return o}return t}function Dne(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function Ir(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||Dne(e)&&typeof t=="string"&&!t)}function One(t,e,n){var r=[],s=0,i=t.length;function o(a){r.push.apply(r,a||[]),s++,s===i&&n(r)}t.forEach(function(a){e(a,o)})}function _C(t,e,n){var r=0,s=t.length;function i(o){if(o&&o.length){n(o);return}var a=r;r=r+1,a<s?e(t[a],i):n([])}i([])}function $ne(t){var e=[];return Object.keys(t).forEach(function(n){e.push.apply(e,t[n]||[])}),e}var AC=function(t){Ane(e,t);function e(n,r){var s;return s=t.call(this,"Async Validation Error")||this,s.errors=n,s.fields=r,s}return e}(Q0(Error));function Mne(t,e,n,r,s){if(e.first){var i=new Promise(function(f,h){var p=function(y){return r(y),y.length?h(new AC(y,Z0(y))):f(s)},g=$ne(t);_C(g,n,p)});return i.catch(function(f){return f}),i}var o=e.firstFields===!0?Object.keys(t):e.firstFields||[],a=Object.keys(t),u=a.length,l=0,c=[],d=new Promise(function(f,h){var p=function(v){if(c.push.apply(c,v),l++,l===u)return r(c),c.length?h(new AC(c,Z0(c))):f(s)};a.length||(r(c),f(s)),a.forEach(function(g){var v=t[g];o.indexOf(g)!==-1?_C(v,n,p):One(v,n,p)})});return d.catch(function(f){return f}),d}function Nne(t){return!!(t&&t.message!==void 0)}function Fne(t,e){for(var n=t,r=0;r<e.length;r++){if(n==null)return n;n=n[e[r]]}return n}function IC(t,e){return function(n){var r;return t.fullFields?r=Fne(e,t.fullFields):r=e[n.field||t.fullField],Nne(n)?(n.field=n.field||t.fullField,n.fieldValue=r,n):{message:typeof n=="function"?n():n,fieldValue:r,field:n.field||t.fullField}}}function RC(t,e){if(e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];typeof r=="object"&&typeof t[n]=="object"?t[n]=Qa({},t[n],r):t[n]=r}}return t}var rP=function(e,n,r,s,i,o){e.required&&(!r.hasOwnProperty(e.field)||Ir(n,o||e.type))&&s.push(Bs(i.messages.required,e.fullField))},Bne=function(e,n,r,s,i){(/^\s+$/.test(n)||n==="")&&s.push(Bs(i.messages.whitespace,e.fullField))},ah,Vne=function(){if(ah)return ah;var t="[a-fA-F\\d:]",e=function(S){return S&&S.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",s=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+n+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+n+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+n+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),i=new RegExp("(?:^"+n+"$)|(?:^"+s+"$)"),o=new RegExp("^"+n+"$"),a=new RegExp("^"+s+"$"),u=function(S){return S&&S.exact?i:new RegExp("(?:"+e(S)+n+e(S)+")|(?:"+e(S)+s+e(S)+")","g")};u.v4=function(b){return b&&b.exact?o:new RegExp(""+e(b)+n+e(b),"g")},u.v6=function(b){return b&&b.exact?a:new RegExp(""+e(b)+s+e(b),"g")};var l="(?:(?:[a-z]+:)?//)",c="(?:\\S+(?::\\S*)?@)?",d=u.v4().source,f=u.v6().source,h="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",p="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",y='(?:[/?#][^\\s"]*)?',w="(?:"+l+"|www\\.)"+c+"(?:localhost|"+d+"|"+f+"|"+h+p+g+")"+v+y;return ah=new RegExp("(?:^"+w+"$)","i"),ah},LC={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Ac={integer:function(e){return Ac.number(e)&&parseInt(e,10)===e},float:function(e){return Ac.number(e)&&!Ac.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!Ac.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(LC.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(Vne())},hex:function(e){return typeof e=="string"&&!!e.match(LC.hex)}},Une=function(e,n,r,s,i){if(e.required&&n===void 0){rP(e,n,r,s,i);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=e.type;o.indexOf(a)>-1?Ac[a](n)||s.push(Bs(i.messages.types[a],e.fullField,e.type)):a&&typeof n!==e.type&&s.push(Bs(i.messages.types[a],e.fullField,e.type))},Hne=function(e,n,r,s,i){var o=typeof e.len=="number",a=typeof e.min=="number",u=typeof e.max=="number",l=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=n,d=null,f=typeof n=="number",h=typeof n=="string",p=Array.isArray(n);if(f?d="number":h?d="string":p&&(d="array"),!d)return!1;p&&(c=n.length),h&&(c=n.replace(l,"_").length),o?c!==e.len&&s.push(Bs(i.messages[d].len,e.fullField,e.len)):a&&!u&&c<e.min?s.push(Bs(i.messages[d].min,e.fullField,e.min)):u&&!a&&c>e.max?s.push(Bs(i.messages[d].max,e.fullField,e.max)):a&&u&&(c<e.min||c>e.max)&&s.push(Bs(i.messages[d].range,e.fullField,e.min,e.max))},$l="enum",jne=function(e,n,r,s,i){e[$l]=Array.isArray(e[$l])?e[$l]:[],e[$l].indexOf(n)===-1&&s.push(Bs(i.messages[$l],e.fullField,e[$l].join(", ")))},Kne=function(e,n,r,s,i){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(n)||s.push(Bs(i.messages.pattern.mismatch,e.fullField,n,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(n)||s.push(Bs(i.messages.pattern.mismatch,e.fullField,n,e.pattern))}}},Ln={required:rP,whitespace:Bne,type:Une,range:Hne,enum:jne,pattern:Kne},zne=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ir(n,"string")&&!e.required)return r();Ln.required(e,n,s,o,i,"string"),Ir(n,"string")||(Ln.type(e,n,s,o,i),Ln.range(e,n,s,o,i),Ln.pattern(e,n,s,o,i),e.whitespace===!0&&Ln.whitespace(e,n,s,o,i))}r(o)},Wne=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ir(n)&&!e.required)return r();Ln.required(e,n,s,o,i),n!==void 0&&Ln.type(e,n,s,o,i)}r(o)},Gne=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(n===""&&(n=void 0),Ir(n)&&!e.required)return r();Ln.required(e,n,s,o,i),n!==void 0&&(Ln.type(e,n,s,o,i),Ln.range(e,n,s,o,i))}r(o)},qne=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ir(n)&&!e.required)return r();Ln.required(e,n,s,o,i),n!==void 0&&Ln.type(e,n,s,o,i)}r(o)},Yne=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ir(n)&&!e.required)return r();Ln.required(e,n,s,o,i),Ir(n)||Ln.type(e,n,s,o,i)}r(o)},Xne=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ir(n)&&!e.required)return r();Ln.required(e,n,s,o,i),n!==void 0&&(Ln.type(e,n,s,o,i),Ln.range(e,n,s,o,i))}r(o)},Qne=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ir(n)&&!e.required)return r();Ln.required(e,n,s,o,i),n!==void 0&&(Ln.type(e,n,s,o,i),Ln.range(e,n,s,o,i))}r(o)},Zne=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(n==null&&!e.required)return r();Ln.required(e,n,s,o,i,"array"),n!=null&&(Ln.type(e,n,s,o,i),Ln.range(e,n,s,o,i))}r(o)},Jne=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ir(n)&&!e.required)return r();Ln.required(e,n,s,o,i),n!==void 0&&Ln.type(e,n,s,o,i)}r(o)},ere="enum",tre=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ir(n)&&!e.required)return r();Ln.required(e,n,s,o,i),n!==void 0&&Ln[ere](e,n,s,o,i)}r(o)},nre=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ir(n,"string")&&!e.required)return r();Ln.required(e,n,s,o,i),Ir(n,"string")||Ln.pattern(e,n,s,o,i)}r(o)},rre=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ir(n,"date")&&!e.required)return r();if(Ln.required(e,n,s,o,i),!Ir(n,"date")){var u;n instanceof Date?u=n:u=new Date(n),Ln.type(e,u,s,o,i),u&&Ln.range(e,u.getTime(),s,o,i)}}r(o)},sre=function(e,n,r,s,i){var o=[],a=Array.isArray(n)?"array":typeof n;Ln.required(e,n,s,o,i,a),r(o)},Iv=function(e,n,r,s,i){var o=e.type,a=[],u=e.required||!e.required&&s.hasOwnProperty(e.field);if(u){if(Ir(n,o)&&!e.required)return r();Ln.required(e,n,s,a,i,o),Ir(n,o)||Ln.type(e,n,s,a,i)}r(a)},ire=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ir(n)&&!e.required)return r();Ln.required(e,n,s,o,i)}r(o)},Yc={string:zne,method:Wne,number:Gne,boolean:qne,regexp:Yne,integer:Xne,float:Qne,array:Zne,object:Jne,enum:tre,pattern:nre,date:rre,url:Iv,hex:Iv,email:Iv,required:sre,any:ire};function J0(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var ey=J0(),rf=function(){function t(n){this.rules=null,this._messages=ey,this.define(n)}var e=t.prototype;return e.define=function(r){var s=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(i){var o=r[i];s.rules[i]=Array.isArray(o)?o:[o]})},e.messages=function(r){return r&&(this._messages=RC(J0(),r)),this._messages},e.validate=function(r,s,i){var o=this;s===void 0&&(s={}),i===void 0&&(i=function(){});var a=r,u=s,l=i;if(typeof u=="function"&&(l=u,u={}),!this.rules||Object.keys(this.rules).length===0)return l&&l(null,a),Promise.resolve(a);function c(g){var v=[],y={};function w(S){if(Array.isArray(S)){var E;v=(E=v).concat.apply(E,S)}else v.push(S)}for(var b=0;b<g.length;b++)w(g[b]);v.length?(y=Z0(v),l(v,y)):l(null,a)}if(u.messages){var d=this.messages();d===ey&&(d=J0()),RC(d,u.messages),u.messages=d}else u.messages=this.messages();var f={},h=u.keys||Object.keys(this.rules);h.forEach(function(g){var v=o.rules[g],y=a[g];v.forEach(function(w){var b=w;typeof b.transform=="function"&&(a===r&&(a=Qa({},a)),y=a[g]=b.transform(y)),typeof b=="function"?b={validator:b}:b=Qa({},b),b.validator=o.getValidationMethod(b),b.validator&&(b.field=g,b.fullField=b.fullField||g,b.type=o.getType(b),f[g]=f[g]||[],f[g].push({rule:b,value:y,source:a,field:g}))})});var p={};return Mne(f,u,function(g,v){var y=g.rule,w=(y.type==="object"||y.type==="array")&&(typeof y.fields=="object"||typeof y.defaultField=="object");w=w&&(y.required||!y.required&&g.value),y.field=g.field;function b(x,k){return Qa({},k,{fullField:y.fullField+"."+x,fullFields:y.fullFields?[].concat(y.fullFields,[x]):[x]})}function S(x){x===void 0&&(x=[]);var k=Array.isArray(x)?x:[x];!u.suppressWarning&&k.length&&t.warning("async-validator:",k),k.length&&y.message!==void 0&&(k=[].concat(y.message));var A=k.map(IC(y,a));if(u.first&&A.length)return p[y.field]=1,v(A);if(!w)v(A);else{if(y.required&&!g.value)return y.message!==void 0?A=[].concat(y.message).map(IC(y,a)):u.error&&(A=[u.error(y,Bs(u.messages.required,y.field))]),v(A);var C={};y.defaultField&&Object.keys(g.value).map(function(P){C[P]=y.defaultField}),C=Qa({},C,g.rule.fields);var _={};Object.keys(C).forEach(function(P){var U=C[P],j=Array.isArray(U)?U:[U];_[P]=j.map(b.bind(null,P))});var O=new t(_);O.messages(u.messages),g.rule.options&&(g.rule.options.messages=u.messages,g.rule.options.error=u.error),O.validate(g.value,g.rule.options||u,function(P){var U=[];A&&A.length&&U.push.apply(U,A),P&&P.length&&U.push.apply(U,P),v(U.length?U:null)})}}var E;if(y.asyncValidator)E=y.asyncValidator(y,g.value,S,g.source,u);else if(y.validator){try{E=y.validator(y,g.value,S,g.source,u)}catch(x){console.error==null||console.error(x),u.suppressValidatorError||setTimeout(function(){throw x},0),S(x.message)}E===!0?S():E===!1?S(typeof y.message=="function"?y.message(y.fullField||y.field):y.message||(y.fullField||y.field)+" fails"):E instanceof Array?S(E):E instanceof Error&&S(E.message)}E&&E.then&&E.then(function(){return S()},function(x){return S(x)})},function(g){c(g)},a)},e.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!Yc.hasOwnProperty(r.type))throw new Error(Bs("Unknown rule type %s",r.type));return r.type||"string"},e.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var s=Object.keys(r),i=s.indexOf("message");return i!==-1&&s.splice(i,1),s.length===1&&s[0]==="required"?Yc.required:Yc[this.getType(r)]||void 0},t}();rf.register=function(e,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");Yc[e]=n};rf.warning=Pne;rf.messages=ey;rf.validators=Yc;const ore=["","error","validating","success"],are=Ke({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:de([String,Array])},required:{type:Boolean,default:void 0},rules:{type:de([Object,Array])},error:String,validateStatus:{type:String,values:ore},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:so}}),PC="ElLabelWrap";var lre=se({name:PC,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(t,{slots:e}){const n=nt(xl,void 0),r=nt(to);r||lr(PC,"usage: <el-form-item><label-wrap /></el-form-item>");const s=Oe("form"),i=H(),o=H(0),a=()=>{var c;if((c=i.value)!=null&&c.firstElementChild){const d=window.getComputedStyle(i.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},u=(c="update")=>{ft(()=>{e.default&&t.isAutoWidth&&(c==="update"?o.value=a():c==="remove"&&(n==null||n.deregisterLabelWidth(o.value)))})},l=()=>u("update");return Ft(()=>{l()}),In(()=>{u("remove")}),ki(()=>l()),Ie(o,(c,d)=>{t.updateAll&&(n==null||n.registerLabelWidth(c,d))}),zn(L(()=>{var c,d;return(d=(c=i.value)==null?void 0:c.firstElementChild)!=null?d:null}),l),()=>{var c,d;if(!e)return null;const{isAutoWidth:f}=t;if(f){const h=n==null?void 0:n.autoLabelWidth,p=r==null?void 0:r.hasLabel,g={};if(p&&h&&h!=="auto"){const v=Math.max(0,Number.parseInt(h,10)-o.value),w=(r.labelPosition||n.labelPosition)==="left"?"marginRight":"marginLeft";v&&(g[w]=`${v}px`)}return ie("div",{ref:i,class:[s.be("item","label-wrap")],style:g},[(c=e.default)==null?void 0:c.call(e)])}else return ie(dt,{ref:i},[(d=e.default)==null?void 0:d.call(e)])}}});const ure=se({name:"ElFormItem"}),cre=se({...ure,props:are,setup(t,{expose:e}){const n=t,r=gr(),s=nt(xl,void 0),i=nt(to,void 0),o=ur(void 0,{formItem:!1}),a=Oe("form-item"),u=Or().value,l=H([]),c=H(""),d=Sz(c,100),f=H(""),h=H();let p,g=!1;const v=L(()=>n.labelPosition||(s==null?void 0:s.labelPosition)),y=L(()=>{if(v.value==="top")return{};const ce=Xn(n.labelWidth||(s==null?void 0:s.labelWidth)||"");return ce?{width:ce}:{}}),w=L(()=>{if(v.value==="top"||s!=null&&s.inline)return{};if(!n.label&&!n.labelWidth&&_)return{};const ce=Xn(n.labelWidth||(s==null?void 0:s.labelWidth)||"");return!n.label&&!r.label?{marginLeft:ce}:{}}),b=L(()=>[a.b(),a.m(o.value),a.is("error",c.value==="error"),a.is("validating",c.value==="validating"),a.is("success",c.value==="success"),a.is("required",N.value||n.required),a.is("no-asterisk",s==null?void 0:s.hideRequiredAsterisk),(s==null?void 0:s.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[a.m("feedback")]:s==null?void 0:s.statusIcon,[a.m(`label-${v.value}`)]:v.value}]),S=L(()=>wn(n.inlineMessage)?n.inlineMessage:(s==null?void 0:s.inlineMessage)||!1),E=L(()=>[a.e("error"),{[a.em("error","inline")]:S.value}]),x=L(()=>n.prop?ut(n.prop)?n.prop:n.prop.join("."):""),k=L(()=>!!(n.label||r.label)),A=L(()=>n.for||(l.value.length===1?l.value[0]:void 0)),C=L(()=>!A.value&&k.value),_=!!i,O=L(()=>{const ce=s==null?void 0:s.model;if(!(!ce||!n.prop))return zc(ce,n.prop).value}),P=L(()=>{const{required:ce}=n,ae=[];n.rules&&ae.push(...Zr(n.rules));const Te=s==null?void 0:s.rules;if(Te&&n.prop){const Ce=zc(Te,n.prop).value;Ce&&ae.push(...Zr(Ce))}if(ce!==void 0){const Ce=ae.map((z,re)=>[z,re]).filter(([z])=>Object.keys(z).includes("required"));if(Ce.length>0)for(const[z,re]of Ce)z.required!==ce&&(ae[re]={...z,required:ce});else ae.push({required:ce})}return ae}),U=L(()=>P.value.length>0),j=ce=>P.value.filter(Te=>!Te.trigger||!ce?!0:Ve(Te.trigger)?Te.trigger.includes(ce):Te.trigger===ce).map(({trigger:Te,...Ce})=>Ce),N=L(()=>P.value.some(ce=>ce.required)),R=L(()=>{var ce;return d.value==="error"&&n.showMessage&&((ce=s==null?void 0:s.showMessage)!=null?ce:!0)}),V=L(()=>`${n.label||""}${(s==null?void 0:s.labelSuffix)||""}`),D=ce=>{c.value=ce},M=ce=>{var ae,Te;const{errors:Ce,fields:z}=ce;(!Ce||!z)&&console.error(ce),D("error"),f.value=Ce?(Te=(ae=Ce==null?void 0:Ce[0])==null?void 0:ae.message)!=null?Te:`${n.prop} is required`:"",s==null||s.emit("validate",n.prop,!1,f.value)},K=()=>{D("success"),s==null||s.emit("validate",n.prop,!0,"")},q=async ce=>{const ae=x.value;return new rf({[ae]:ce}).validate({[ae]:O.value},{firstFields:!0}).then(()=>(K(),!0)).catch(Ce=>(M(Ce),Promise.reject(Ce)))},ee=async(ce,ae)=>{if(g||!n.prop)return!1;const Te=pt(ae);if(!U.value)return ae==null||ae(!1),!1;const Ce=j(ce);return Ce.length===0?(ae==null||ae(!0),!0):(D("validating"),q(Ce).then(()=>(ae==null||ae(!0),!0)).catch(z=>{const{fields:re}=z;return ae==null||ae(!1,re),Te?!1:Promise.reject(re)}))},X=()=>{D(""),f.value="",g=!1},te=async()=>{const ce=s==null?void 0:s.model;if(!ce||!n.prop)return;const ae=zc(ce,n.prop);g=!0,ae.value=tT(p),await ft(),X(),g=!1},ue=ce=>{l.value.includes(ce)||l.value.push(ce)},he=ce=>{l.value=l.value.filter(ae=>ae!==ce)};Ie(()=>n.error,ce=>{f.value=ce||"",D(ce?"error":"")},{immediate:!0}),Ie(()=>n.validateStatus,ce=>D(ce||""));const Z=fn({..._r(n),$el:h,size:o,validateState:c,labelId:u,inputIds:l,isGroup:C,hasLabel:k,fieldValue:O,addInputId:ue,removeInputId:he,resetField:te,clearValidate:X,validate:ee});return Jt(to,Z),Ft(()=>{n.prop&&(s==null||s.addField(Z),p=tT(O.value))}),In(()=>{s==null||s.removeField(Z)}),e({size:o,validateMessage:f,validateState:c,validate:ee,clearValidate:X,resetField:te}),(ce,ae)=>{var Te;return $(),Y("div",{ref_key:"formItemRef",ref:h,class:F(m(b)),role:m(C)?"group":void 0,"aria-labelledby":m(C)?m(u):void 0},[ie(m(lre),{"is-auto-width":m(y).width==="auto","update-all":((Te=m(s))==null?void 0:Te.labelWidth)==="auto"},{default:le(()=>[m(k)?($(),ye(jt(m(A)?"label":"div"),{key:0,id:m(u),for:m(A),class:F(m(a).e("label")),style:mt(m(y))},{default:le(()=>[pe(ce.$slots,"label",{label:m(V)},()=>[Qt(ze(m(V)),1)])]),_:3},8,["id","for","class","style"])):ge("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),J("div",{class:F(m(a).e("content")),style:mt(m(w))},[pe(ce.$slots,"default"),ie(K_,{name:`${m(a).namespace.value}-zoom-in-top`},{default:le(()=>[m(R)?pe(ce.$slots,"error",{key:0,error:f.value},()=>[J("div",{class:F(m(E))},ze(f.value),3)]):ge("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var sP=We(cre,[["__file","form-item.vue"]]);const dre=Dt(_ne,{FormItem:sP}),fre=Gn(sP),hre=Ke({urlList:{type:de(Array),default:()=>Wn([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:{type:Boolean,default:!1},crossorigin:{type:de(String)}}),pre={close:()=>!0,switch:t=>vt(t),rotate:t=>vt(t)},mre=se({name:"ElImageViewer"}),gre=se({...mre,props:hre,emits:pre,setup(t,{expose:e,emit:n}){var r;const s=t,i={CONTAIN:{name:"contain",icon:ko(DV)},ORIGINAL:{name:"original",icon:ko(tU)}};let o,a="";const{t:u}=sn(),l=Oe("image-viewer"),{nextZIndex:c}=Gu(),d=H(),f=H([]),h=MO(),p=H(!0),g=H(s.initialIndex),v=On(i.CONTAIN),y=H({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),w=H((r=s.zIndex)!=null?r:c()),b=L(()=>{const{urlList:he}=s;return he.length<=1}),S=L(()=>g.value===0),E=L(()=>g.value===s.urlList.length-1),x=L(()=>s.urlList[g.value]),k=L(()=>[l.e("btn"),l.e("prev"),l.is("disabled",!s.infinite&&S.value)]),A=L(()=>[l.e("btn"),l.e("next"),l.is("disabled",!s.infinite&&E.value)]),C=L(()=>{const{scale:he,deg:Z,offsetX:ce,offsetY:ae,enableTransition:Te}=y.value;let Ce=ce/he,z=ae/he;const re=Z*Math.PI/180,ve=Math.cos(re),ke=Math.sin(re);Ce=Ce*ve+z*ke,z=z*ve-ce/he*ke;const Ee={transform:`scale(${he}) rotate(${Z}deg) translate(${Ce}px, ${z}px)`,transition:Te?"transform .3s":""};return v.value.name===i.CONTAIN.name&&(Ee.maxWidth=Ee.maxHeight="100%"),Ee}),_=L(()=>`${g.value+1} / ${s.urlList.length}`);function O(){U(),o==null||o(),document.body.style.overflow=a,n("close")}function P(){const he=sl(ce=>{switch(ce.code){case it.esc:s.closeOnPressEscape&&O();break;case it.space:D();break;case it.left:K();break;case it.up:ee("zoomIn");break;case it.right:q();break;case it.down:ee("zoomOut");break}}),Z=sl(ce=>{const ae=ce.deltaY||ce.deltaX;ee(ae<0?"zoomIn":"zoomOut",{zoomRate:s.zoomRate,enableTransition:!1})});h.run(()=>{Cn(document,"keydown",he),Cn(document,"wheel",Z)})}function U(){h.stop()}function j(){p.value=!1}function N(he){p.value=!1,he.target.alt=u("el.image.error")}function R(he){if(p.value||he.button!==0||!d.value)return;y.value.enableTransition=!1;const{offsetX:Z,offsetY:ce}=y.value,ae=he.pageX,Te=he.pageY,Ce=sl(re=>{y.value={...y.value,offsetX:Z+re.pageX-ae,offsetY:ce+re.pageY-Te}}),z=Cn(document,"mousemove",Ce);Cn(document,"mouseup",()=>{z()}),he.preventDefault()}function V(){y.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function D(){if(p.value)return;const he=xu(i),Z=Object.values(i),ce=v.value.name,Te=(Z.findIndex(Ce=>Ce.name===ce)+1)%he.length;v.value=i[he[Te]],V()}function M(he){const Z=s.urlList.length;g.value=(he+Z)%Z}function K(){S.value&&!s.infinite||M(g.value-1)}function q(){E.value&&!s.infinite||M(g.value+1)}function ee(he,Z={}){if(p.value)return;const{minScale:ce,maxScale:ae}=s,{zoomRate:Te,rotateDeg:Ce,enableTransition:z}={zoomRate:s.zoomRate,rotateDeg:90,enableTransition:!0,...Z};switch(he){case"zoomOut":y.value.scale>ce&&(y.value.scale=Number.parseFloat((y.value.scale/Te).toFixed(3)));break;case"zoomIn":y.value.scale<ae&&(y.value.scale=Number.parseFloat((y.value.scale*Te).toFixed(3)));break;case"clockwise":y.value.deg+=Ce,n("rotate",y.value.deg);break;case"anticlockwise":y.value.deg-=Ce,n("rotate",y.value.deg);break}y.value.enableTransition=z}function X(he){var Z;((Z=he.detail)==null?void 0:Z.focusReason)==="pointer"&&he.preventDefault()}function te(){s.closeOnPressEscape&&O()}function ue(he){if(he.ctrlKey){if(he.deltaY<0)return he.preventDefault(),!1;if(he.deltaY>0)return he.preventDefault(),!1}}return Ie(x,()=>{ft(()=>{const he=f.value[0];he!=null&&he.complete||(p.value=!0)})}),Ie(g,he=>{V(),n("switch",he)}),Ft(()=>{P(),o=Cn("wheel",ue,{passive:!1}),a=document.body.style.overflow,document.body.style.overflow="hidden"}),e({setActiveItem:M}),(he,Z)=>($(),ye(m(Xu),{to:"body",disabled:!he.teleported},{default:le(()=>[ie(Ar,{name:"viewer-fade",appear:""},{default:le(()=>[J("div",{ref_key:"wrapper",ref:d,tabindex:-1,class:F(m(l).e("wrapper")),style:mt({zIndex:w.value})},[ie(m(Yu),{loop:"",trapped:"","focus-trap-el":d.value,"focus-start-el":"container",onFocusoutPrevented:X,onReleaseRequested:te},{default:le(()=>[J("div",{class:F(m(l).e("mask")),onClick:wt(ce=>he.hideOnClickModal&&O(),["self"])},null,10,["onClick"]),ge(" CLOSE "),J("span",{class:F([m(l).e("btn"),m(l).e("close")]),onClick:O},[ie(m(lt),null,{default:le(()=>[ie(m(si))]),_:1})],2),ge(" ARROW "),m(b)?ge("v-if",!0):($(),Y(dt,{key:0},[J("span",{class:F(m(k)),onClick:K},[ie(m(lt),null,{default:le(()=>[ie(m(Ea))]),_:1})],2),J("span",{class:F(m(A)),onClick:q},[ie(m(lt),null,{default:le(()=>[ie(m(cs))]),_:1})],2)],64)),he.$slots.progress||he.showProgress?($(),Y("div",{key:1,class:F([m(l).e("btn"),m(l).e("progress")])},[pe(he.$slots,"progress",{activeIndex:g.value,total:he.urlList.length},()=>[Qt(ze(m(_)),1)])],2)):ge("v-if",!0),ge(" ACTIONS "),J("div",{class:F([m(l).e("btn"),m(l).e("actions")])},[J("div",{class:F(m(l).e("actions__inner"))},[pe(he.$slots,"toolbar",{actions:ee,prev:K,next:q,reset:D,activeIndex:g.value,setActiveItem:M},()=>[ie(m(lt),{onClick:ce=>ee("zoomOut")},{default:le(()=>[ie(m(vU))]),_:1},8,["onClick"]),ie(m(lt),{onClick:ce=>ee("zoomIn")},{default:le(()=>[ie(m(uI))]),_:1},8,["onClick"]),J("i",{class:F(m(l).e("actions__divider"))},null,2),ie(m(lt),{onClick:D},{default:le(()=>[($(),ye(jt(m(v).icon)))]),_:1}),J("i",{class:F(m(l).e("actions__divider"))},null,2),ie(m(lt),{onClick:ce=>ee("anticlockwise")},{default:le(()=>[ie(m(QV))]),_:1},8,["onClick"]),ie(m(lt),{onClick:ce=>ee("clockwise")},{default:le(()=>[ie(m(JV))]),_:1},8,["onClick"])])],2)],2),ge(" CANVAS "),J("div",{class:F(m(l).e("canvas"))},[($(!0),Y(dt,null,Zt(he.urlList,(ce,ae)=>($(),Y(dt,{key:ae},[ae===g.value?($(),Y("img",{key:0,ref_for:!0,ref:Te=>f.value[ae]=Te,src:ce,style:mt(m(C)),class:F(m(l).e("img")),crossorigin:he.crossorigin,onLoad:j,onError:N,onMousedown:R},null,46,["src","crossorigin"])):ge("v-if",!0)],64))),128))],2),pe(he.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var vre=We(gre,[["__file","image-viewer.vue"]]);const iP=Dt(vre),yre=Ke({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:de([String,Object])},previewSrcList:{type:de(Array),default:()=>Wn([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:{type:Boolean,default:!1},crossorigin:{type:de(String)}}),bre={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>vt(t),close:()=>!0,show:()=>!0},Sre=se({name:"ElImage",inheritAttrs:!1}),wre=se({...Sre,props:yre,emits:bre,setup(t,{expose:e,emit:n}){const r=t,{t:s}=sn(),i=Oe("image"),o=No(),a=L(()=>xd(Object.entries(o).filter(([R])=>/^(data-|on[A-Z])/i.test(R)||["id","style"].includes(R)))),u=Jd({excludeListeners:!0,excludeKeys:L(()=>Object.keys(a.value))}),l=H(),c=H(!1),d=H(!0),f=H(!1),h=H(),p=H(),g=on&&"loading"in HTMLImageElement.prototype;let v;const y=L(()=>[i.e("inner"),b.value&&i.e("preview"),d.value&&i.is("loading")]),w=L(()=>{const{fit:R}=r;return on&&R?{objectFit:R}:{}}),b=L(()=>{const{previewSrcList:R}=r;return Ve(R)&&R.length>0}),S=L(()=>{const{previewSrcList:R,initialIndex:V}=r;let D=V;return V>R.length-1&&(D=0),D}),E=L(()=>r.loading==="eager"?!1:!g&&r.loading==="lazy"||r.lazy),x=()=>{on&&(d.value=!0,c.value=!1,l.value=r.src)};function k(R){d.value=!1,c.value=!1,n("load",R)}function A(R){d.value=!1,c.value=!0,n("error",R)}function C(){_Z(h.value,p.value)&&(x(),P())}const _=eR(C,200,!0);async function O(){var R;if(!on)return;await ft();const{scrollContainer:V}=r;ds(V)?p.value=V:ut(V)&&V!==""?p.value=(R=document.querySelector(V))!=null?R:void 0:h.value&&(p.value=t1(h.value)),p.value&&(v=Cn(p,"scroll",_),setTimeout(()=>C(),100))}function P(){!on||!p.value||!_||(v==null||v(),p.value=void 0)}function U(){b.value&&(f.value=!0,n("show"))}function j(){f.value=!1,n("close")}function N(R){n("switch",R)}return Ie(()=>r.src,()=>{E.value?(d.value=!0,c.value=!1,P(),O()):x()}),Ft(()=>{E.value?O():x()}),e({showPreview:U}),(R,V)=>($(),Y("div",Yt({ref_key:"container",ref:h},m(a),{class:[m(i).b(),R.$attrs.class]}),[c.value?pe(R.$slots,"error",{key:0},()=>[J("div",{class:F(m(i).e("error"))},ze(m(s)("el.image.error")),3)]):($(),Y(dt,{key:1},[l.value!==void 0?($(),Y("img",Yt({key:0},m(u),{src:l.value,loading:R.loading,style:m(w),class:m(y),crossorigin:R.crossorigin,onClick:U,onLoad:k,onError:A}),null,16,["src","loading","crossorigin"])):ge("v-if",!0),d.value?($(),Y("div",{key:1,class:F(m(i).e("wrapper"))},[pe(R.$slots,"placeholder",{},()=>[J("div",{class:F(m(i).e("placeholder"))},null,2)])],2)):ge("v-if",!0)],64)),m(b)?($(),Y(dt,{key:2},[f.value?($(),ye(m(iP),{key:0,"z-index":R.zIndex,"initial-index":m(S),infinite:R.infinite,"zoom-rate":R.zoomRate,"min-scale":R.minScale,"max-scale":R.maxScale,"show-progress":R.showProgress,"url-list":R.previewSrcList,crossorigin:R.crossorigin,"hide-on-click-modal":R.hideOnClickModal,teleported:R.previewTeleported,"close-on-press-escape":R.closeOnPressEscape,onClose:j,onSwitch:N},ks({toolbar:le(D=>[pe(R.$slots,"toolbar",Ms(Qi(D)))]),default:le(()=>[R.$slots.viewer?($(),Y("div",{key:0},[pe(R.$slots,"viewer")])):ge("v-if",!0)]),_:2},[R.$slots.progress?{name:"progress",fn:le(D=>[pe(R.$slots,"progress",Ms(Qi(D)))])}:void 0]),1032,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):ge("v-if",!0)],64)):ge("v-if",!0)],16))}});var Ere=We(wre,[["__file","image.vue"]]);const xre=Dt(Ere),Tre=Ke({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:{type:[Number,null]},readonly:Boolean,disabled:Boolean,size:fr,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||vt(t)||["min","max"].includes(t),default:null},name:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0},...$r(["ariaLabel"])}),Cre={[Xt]:(t,e)=>e!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[dr]:t=>vt(t)||Sr(t),[_t]:t=>vt(t)||Sr(t)},kre=se({name:"ElInputNumber"}),_re=se({...kre,props:Tre,emits:Cre,setup(t,{expose:e,emit:n}){const r=t,{t:s}=sn(),i=Oe("input-number"),o=H(),a=fn({currentValue:r.modelValue,userInput:null}),{formItem:u}=Ur(),l=L(()=>vt(r.modelValue)&&r.modelValue<=r.min),c=L(()=>vt(r.modelValue)&&r.modelValue>=r.max),d=L(()=>{const N=y(r.step);return an(r.precision)?Math.max(y(r.modelValue),N):(N>r.precision,r.precision)}),f=L(()=>r.controls&&r.controlsPosition==="right"),h=ur(),p=Hr(),g=L(()=>{if(a.userInput!==null)return a.userInput;let N=a.currentValue;if(Sr(N))return"";if(vt(N)){if(Number.isNaN(N))return"";an(r.precision)||(N=N.toFixed(r.precision))}return N}),v=(N,R)=>{if(an(R)&&(R=d.value),R===0)return Math.round(N);let V=String(N);const D=V.indexOf(".");if(D===-1||!V.replace(".","").split("")[D+R])return N;const q=V.length;return V.charAt(q-1)==="5"&&(V=`${V.slice(0,Math.max(0,q-1))}6`),Number.parseFloat(Number(V).toFixed(R))},y=N=>{if(Sr(N))return 0;const R=N.toString(),V=R.indexOf(".");let D=0;return V!==-1&&(D=R.length-V-1),D},w=(N,R=1)=>vt(N)?v(N+r.step*R):a.currentValue,b=()=>{if(r.readonly||p.value||c.value)return;const N=Number(g.value)||0,R=w(N);x(R),n(dr,a.currentValue),U()},S=()=>{if(r.readonly||p.value||l.value)return;const N=Number(g.value)||0,R=w(N,-1);x(R),n(dr,a.currentValue),U()},E=(N,R)=>{const{max:V,min:D,step:M,precision:K,stepStrictly:q,valueOnClear:ee}=r;V<D&&lr("InputNumber","min should not be greater than max.");let X=Number(N);if(Sr(N)||Number.isNaN(X))return null;if(N===""){if(ee===null)return null;X=ut(ee)?{min:D,max:V}[ee]:ee}return q&&(X=v(Math.round(X/M)*M,K),X!==N&&R&&n(_t,X)),an(K)||(X=v(X,K)),(X>V||X<D)&&(X=X>V?V:D,R&&n(_t,X)),X},x=(N,R=!0)=>{var V;const D=a.currentValue,M=E(N);if(!R){n(_t,M);return}D===M&&N||(a.userInput=null,n(_t,M),D!==M&&n(Xt,M,D),r.validateEvent&&((V=u==null?void 0:u.validate)==null||V.call(u,"change").catch(K=>void 0)),a.currentValue=M)},k=N=>{a.userInput=N;const R=N===""?null:Number(N);n(dr,R),x(R,!1)},A=N=>{const R=N!==""?Number(N):"";(vt(R)&&!Number.isNaN(R)||N==="")&&x(R),U(),a.userInput=null},C=()=>{var N,R;(R=(N=o.value)==null?void 0:N.focus)==null||R.call(N)},_=()=>{var N,R;(R=(N=o.value)==null?void 0:N.blur)==null||R.call(N)},O=N=>{n("focus",N)},P=N=>{var R,V;a.userInput=null,Bm()&&a.currentValue===null&&((R=o.value)!=null&&R.input)&&(o.value.input.value=""),n("blur",N),r.validateEvent&&((V=u==null?void 0:u.validate)==null||V.call(u,"blur").catch(D=>void 0))},U=()=>{a.currentValue!==r.modelValue&&(a.currentValue=r.modelValue)},j=N=>{document.activeElement===N.target&&N.preventDefault()};return Ie(()=>r.modelValue,(N,R)=>{const V=E(N,!0);a.userInput===null&&V!==R&&(a.currentValue=V)},{immediate:!0}),Ft(()=>{var N;const{min:R,max:V,modelValue:D}=r,M=(N=o.value)==null?void 0:N.input;if(M.setAttribute("role","spinbutton"),Number.isFinite(V)?M.setAttribute("aria-valuemax",String(V)):M.removeAttribute("aria-valuemax"),Number.isFinite(R)?M.setAttribute("aria-valuemin",String(R)):M.removeAttribute("aria-valuemin"),M.setAttribute("aria-valuenow",a.currentValue||a.currentValue===0?String(a.currentValue):""),M.setAttribute("aria-disabled",String(p.value)),!vt(D)&&D!=null){let K=Number(D);Number.isNaN(K)&&(K=null),n(_t,K)}M.addEventListener("wheel",j,{passive:!1})}),ki(()=>{var N,R;const V=(N=o.value)==null?void 0:N.input;V==null||V.setAttribute("aria-valuenow",`${(R=a.currentValue)!=null?R:""}`)}),e({focus:C,blur:_}),(N,R)=>($(),Y("div",{class:F([m(i).b(),m(i).m(m(h)),m(i).is("disabled",m(p)),m(i).is("without-controls",!N.controls),m(i).is("controls-right",m(f))]),onDragstart:wt(()=>{},["prevent"])},[N.controls?Ot(($(),Y("span",{key:0,role:"button","aria-label":m(s)("el.inputNumber.decrease"),class:F([m(i).e("decrease"),m(i).is("disabled",m(l))]),onKeydown:Sn(S,["enter"])},[pe(N.$slots,"decrease-icon",{},()=>[ie(m(lt),null,{default:le(()=>[m(f)?($(),ye(m(Bo),{key:0})):($(),ye(m(BV),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[m(Mp),S]]):ge("v-if",!0),N.controls?Ot(($(),Y("span",{key:1,role:"button","aria-label":m(s)("el.inputNumber.increase"),class:F([m(i).e("increase"),m(i).is("disabled",m(c))]),onKeydown:Sn(b,["enter"])},[pe(N.$slots,"increase-icon",{},()=>[ie(m(lt),null,{default:le(()=>[m(f)?($(),ye(m(Db),{key:0})):($(),ye(m(aI),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[m(Mp),b]]):ge("v-if",!0),ie(m(es),{id:N.id,ref_key:"input",ref:o,type:"number",step:N.step,"model-value":m(g),placeholder:N.placeholder,readonly:N.readonly,disabled:m(p),size:m(h),max:N.max,min:N.min,name:N.name,"aria-label":N.ariaLabel,"validate-event":!1,onKeydown:[Sn(wt(b,["prevent"]),["up"]),Sn(wt(S,["prevent"]),["down"])],onBlur:P,onFocus:O,onInput:k,onChange:A},ks({_:2},[N.$slots.prefix?{name:"prefix",fn:le(()=>[pe(N.$slots,"prefix")])}:void 0,N.$slots.suffix?{name:"suffix",fn:le(()=>[pe(N.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var Are=We(_re,[["__file","input-number.vue"]]);const oP=Dt(Are),Ire=Ke({modelValue:{type:de(Array)},max:Number,tagType:{...Do.type,default:"info"},tagEffect:Do.effect,trigger:{type:de(String),default:it.enter},draggable:{type:Boolean,default:!1},delimiter:{type:[String,RegExp],default:""},size:fr,clearable:Boolean,disabled:{type:Boolean,default:void 0},validateEvent:{type:Boolean,default:!0},readonly:Boolean,autofocus:Boolean,id:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},placeholder:String,autocomplete:{type:String,default:"off"},saveOnBlur:{type:Boolean,default:!0},ariaLabel:String}),Rre={[_t]:t=>Ve(t)||an(t),[Xt]:t=>Ve(t)||an(t),[dr]:t=>ut(t),"add-tag":t=>ut(t),"remove-tag":t=>ut(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0};function Lre({props:t,emit:e,formItem:n}){const r=Hr(),s=ur(),i=On(),o=H(),a=L(()=>["small"].includes(s.value)?"small":"default"),u=L(()=>{var C;return(C=t.modelValue)!=null&&C.length?void 0:t.placeholder}),l=L(()=>!(t.readonly||r.value)),c=L(()=>{var C,_;return an(t.max)?!1:((_=(C=t.modelValue)==null?void 0:C.length)!=null?_:0)>=t.max}),d=C=>{var _,O;if(c.value){o.value=void 0;return}if(!E.value){if(t.delimiter){const P=(_=o.value)==null?void 0:_.replace(t.delimiter,"");(P==null?void 0:P.length)!==((O=o.value)==null?void 0:O.length)&&(o.value=P,h())}e(dr,C.target.value)}},f=C=>{var _;if(!E.value)switch(C.code){case t.trigger:C.preventDefault(),C.stopPropagation(),h();break;case it.numpadEnter:t.trigger===it.enter&&(C.preventDefault(),C.stopPropagation(),h());break;case it.backspace:!o.value&&((_=t.modelValue)!=null&&_.length)&&(C.preventDefault(),C.stopPropagation(),p(t.modelValue.length-1));break}},h=()=>{var C,_;const O=(C=o.value)==null?void 0:C.trim();if(!O||c.value)return;const P=[...(_=t.modelValue)!=null?_:[],O];e(_t,P),e(Xt,P),e("add-tag",O),o.value=void 0},p=C=>{var _;const O=((_=t.modelValue)!=null?_:[]).slice(),[P]=O.splice(C,1);e(_t,O),e(Xt,O),e("remove-tag",P)},g=()=>{o.value=void 0,e(_t,void 0),e(Xt,void 0),e("clear")},v=(C,_,O)=>{var P;const U=((P=t.modelValue)!=null?P:[]).slice(),[j]=U.splice(C,1),N=_>C&&O==="before"?-1:_<C&&O==="after"?1:0;U.splice(_+N,0,j),e(_t,U),e(Xt,U)},y=()=>{var C;(C=i.value)==null||C.focus()},w=()=>{var C;(C=i.value)==null||C.blur()},{wrapperRef:b,isFocused:S}=Pa(i,{beforeFocus(){return r.value},afterBlur(){var C;t.saveOnBlur?h():o.value=void 0,t.validateEvent&&((C=n==null?void 0:n.validate)==null||C.call(n,"blur").catch(_=>void 0))}}),{isComposing:E,handleCompositionStart:x,handleCompositionUpdate:k,handleCompositionEnd:A}=ef({afterComposition:d});return Ie(()=>t.modelValue,()=>{var C;t.validateEvent&&((C=n==null?void 0:n.validate)==null||C.call(n,Xt).catch(_=>void 0))}),{inputRef:i,wrapperRef:b,isFocused:S,isComposing:E,inputValue:o,size:s,tagSize:a,placeholder:u,closable:l,disabled:r,inputLimit:c,handleDragged:v,handleInput:d,handleKeydown:f,handleAddTag:h,handleRemoveTag:p,handleClear:g,handleCompositionStart:x,handleCompositionUpdate:k,handleCompositionEnd:A,focus:y,blur:w}}function Pre(){const t=H(!1);return{hovering:t,handleMouseEnter:()=>{t.value=!0},handleMouseLeave:()=>{t.value=!1}}}function F1(){const t=On(),e=H(0),n=11,r=L(()=>({minWidth:`${Math.max(e.value,n)}px`}));return zn(t,()=>{var i,o;e.value=(o=(i=t.value)==null?void 0:i.getBoundingClientRect().width)!=null?o:0}),{calculatorRef:t,calculatorWidth:e,inputStyle:r}}function Dre({wrapperRef:t,handleDragged:e,afterDragged:n}){const r=Oe("input-tag"),s=On(),i=H(!1);let o,a,u,l;function c(p){return`.${r.e("inner")} .${r.namespace.value}-tag:nth-child(${p+1})`}function d(p,g){o=g,a=t.value.querySelector(c(g)),a&&(a.style.opacity="0.5"),p.dataTransfer.effectAllowed="move"}function f(p,g){if(u=g,p.preventDefault(),p.dataTransfer.dropEffect="move",an(o)||o===g){i.value=!1;return}const v=t.value.querySelector(c(g)).getBoundingClientRect(),y=o+1!==g,w=o-1!==g,b=p.clientX-v.left,S=y?w?.5:1:-1,E=w?y?.5:0:1;b<=v.width*S?l="before":b>v.width*E?l="after":l=void 0;const x=t.value.querySelector(`.${r.e("inner")}`),k=x.getBoundingClientRect(),A=Number.parseFloat(xo(x,"gap"))/2,C=v.top-k.top;let _=-9999;if(l==="before")_=Math.max(v.left-k.left-A,Math.floor(-A/2));else if(l==="after"){const O=v.right-k.left;_=O+(k.width===O?Math.floor(A/2):A)}hR(s.value,{top:`${C}px`,left:`${_}px`}),i.value=!!l}function h(p){p.preventDefault(),a&&(a.style.opacity=""),l&&!an(o)&&!an(u)&&o!==u&&e(o,u,l),i.value=!1,o=void 0,a=null,u=void 0,l=void 0,n==null||n()}return{dropIndicatorRef:s,showDropIndicator:i,handleDragStart:d,handleDragOver:f,handleDragEnd:h}}function Ore({props:t,isFocused:e,hovering:n,disabled:r,inputValue:s,size:i,validateState:o,validateIcon:a,needStatusIcon:u}){const l=No(),c=gr(),d=Oe("input-tag"),f=Oe("input"),h=L(()=>[d.b(),d.is("focused",e.value),d.is("hovering",n.value),d.is("disabled",r.value),d.m(i.value),d.e("wrapper"),l.class]),p=L(()=>[l.style]),g=L(()=>{var w,b;return[d.e("inner"),d.is("draggable",t.draggable),d.is("left-space",!((w=t.modelValue)!=null&&w.length)&&!c.prefix),d.is("right-space",!((b=t.modelValue)!=null&&b.length)&&!y.value)]}),v=L(()=>{var w;return t.clearable&&!r.value&&!t.readonly&&(((w=t.modelValue)==null?void 0:w.length)||s.value)&&(e.value||n.value)}),y=L(()=>c.suffix||v.value||o.value&&a.value&&u.value);return{ns:d,nsInput:f,containerKls:h,containerStyle:p,innerKls:g,showClear:v,showSuffix:y}}const $re=se({name:"ElInputTag",inheritAttrs:!1}),Mre=se({...$re,props:Ire,emits:Rre,setup(t,{expose:e,emit:n}){const r=t,s=Jd(),i=gr(),{form:o,formItem:a}=Ur(),{inputId:u}=ci(r,{formItemContext:a}),l=L(()=>{var z;return(z=o==null?void 0:o.statusIcon)!=null?z:!1}),c=L(()=>(a==null?void 0:a.validateState)||""),d=L(()=>c.value&&Fm[c.value]),{inputRef:f,wrapperRef:h,isFocused:p,inputValue:g,size:v,tagSize:y,placeholder:w,closable:b,disabled:S,handleDragged:E,handleInput:x,handleKeydown:k,handleRemoveTag:A,handleClear:C,handleCompositionStart:_,handleCompositionUpdate:O,handleCompositionEnd:P,focus:U,blur:j}=Lre({props:r,emit:n,formItem:a}),{hovering:N,handleMouseEnter:R,handleMouseLeave:V}=Pre(),{calculatorRef:D,inputStyle:M}=F1(),{dropIndicatorRef:K,showDropIndicator:q,handleDragStart:ee,handleDragOver:X,handleDragEnd:te}=Dre({wrapperRef:h,handleDragged:E,afterDragged:U}),{ns:ue,nsInput:he,containerKls:Z,containerStyle:ce,innerKls:ae,showClear:Te,showSuffix:Ce}=Ore({props:r,hovering:N,isFocused:p,inputValue:g,disabled:S,size:v,validateState:c,validateIcon:d,needStatusIcon:l});return e({focus:U,blur:j}),(z,re)=>($(),Y("div",{ref_key:"wrapperRef",ref:h,class:F(m(Z)),style:mt(m(ce)),onMouseenter:m(R),onMouseleave:m(V)},[m(i).prefix?($(),Y("div",{key:0,class:F(m(ue).e("prefix"))},[pe(z.$slots,"prefix")],2)):ge("v-if",!0),J("div",{class:F(m(ae))},[($(!0),Y(dt,null,Zt(z.modelValue,(ve,ke)=>($(),ye(m(Iu),{key:ke,size:m(y),closable:m(b),type:z.tagType,effect:z.tagEffect,draggable:m(b)&&z.draggable,"disable-transitions":"",onClose:Ee=>m(A)(ke),onDragstart:Ee=>m(ee)(Ee,ke),onDragover:Ee=>m(X)(Ee,ke),onDragend:m(te),onDrop:wt(()=>{},["stop"])},{default:le(()=>[pe(z.$slots,"tag",{value:ve,index:ke},()=>[Qt(ze(ve),1)])]),_:2},1032,["size","closable","type","effect","draggable","onClose","onDragstart","onDragover","onDragend","onDrop"]))),128)),J("div",{class:F(m(ue).e("input-wrapper"))},[Ot(J("input",Yt({id:m(u),ref_key:"inputRef",ref:f,"onUpdate:modelValue":ve=>Dn(g)?g.value=ve:null},m(s),{type:"text",minlength:z.minlength,maxlength:z.maxlength,disabled:m(S),readonly:z.readonly,autocomplete:z.autocomplete,tabindex:z.tabindex,placeholder:m(w),autofocus:z.autofocus,ariaLabel:z.ariaLabel,class:m(ue).e("input"),style:m(M),onCompositionstart:m(_),onCompositionupdate:m(O),onCompositionend:m(P),onInput:m(x),onKeydown:m(k)}),null,16,["id","onUpdate:modelValue","minlength","maxlength","disabled","readonly","autocomplete","tabindex","placeholder","autofocus","ariaLabel","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onKeydown"]),[[pm,m(g)]]),J("span",{ref_key:"calculatorRef",ref:D,"aria-hidden":"true",class:F(m(ue).e("input-calculator")),textContent:ze(m(g))},null,10,["textContent"])],2),Ot(J("div",{ref_key:"dropIndicatorRef",ref:K,class:F(m(ue).e("drop-indicator"))},null,2),[[cn,m(q)]])],2),m(Ce)?($(),Y("div",{key:1,class:F(m(ue).e("suffix"))},[pe(z.$slots,"suffix"),m(Te)?($(),ye(m(lt),{key:0,class:F([m(ue).e("icon"),m(ue).e("clear")]),onMousedown:wt(m(xn),["prevent"]),onClick:m(C)},{default:le(()=>[ie(m(Vo))]),_:1},8,["class","onMousedown","onClick"])):ge("v-if",!0),m(c)&&m(d)&&m(l)?($(),ye(m(lt),{key:1,class:F([m(he).e("icon"),m(he).e("validateIcon"),m(he).is("loading",m(c)==="validating")])},{default:le(()=>[($(),ye(jt(m(d))))]),_:1},8,["class"])):ge("v-if",!0)],2)):ge("v-if",!0)],46,["onMouseenter","onMouseleave"]))}});var Nre=We(Mre,[["__file","input-tag.vue"]]);const Fre=Dt(Nre),Bre=Ke({type:{type:String,values:["primary","success","warning","info","danger","default"],default:void 0},underline:{type:[Boolean,String],values:[!0,!1,"always","never","hover"],default:void 0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:Tn}}),Vre={click:t=>t instanceof MouseEvent},Ure=se({name:"ElLink"}),Hre=se({...Ure,props:Bre,emits:Vre,setup(t,{emit:e}){const n=t,r=Zd("link");Ao({scope:"el-link",from:"The underline option (boolean)",replacement:"'always' | 'hover' | 'never'",version:"3.0.0",ref:"https://element-plus.org/en-US/component/link.html#underline"},L(()=>wn(n.underline)));const s=Oe("link"),i=L(()=>{var u,l,c;return[s.b(),s.m((c=(l=n.type)!=null?l:(u=r.value)==null?void 0:u.type)!=null?c:"default"),s.is("disabled",n.disabled),s.is("underline",o.value==="always"),s.is("hover-underline",o.value==="hover"&&!n.disabled)]}),o=L(()=>{var u,l,c;return wn(n.underline)?n.underline?"hover":"never":(c=(l=n.underline)!=null?l:(u=r.value)==null?void 0:u.underline)!=null?c:"hover"});function a(u){n.disabled||e("click",u)}return(u,l)=>($(),Y("a",{class:F(m(i)),href:u.disabled||!u.href?void 0:u.href,target:u.disabled||!u.href?void 0:u.target,onClick:a},[u.icon?($(),ye(m(lt),{key:0},{default:le(()=>[($(),ye(jt(u.icon)))]),_:1})):ge("v-if",!0),u.$slots.default?($(),Y("span",{key:1,class:F(m(s).e("inner"))},[pe(u.$slots,"default")],2)):ge("v-if",!0),u.$slots.icon?pe(u.$slots,"icon",{key:2}):ge("v-if",!0)],10,["href","target"]))}});var jre=We(Hre,[["__file","link.vue"]]);const Kre=Dt(jre);let zre=class{constructor(e,n){this.parent=e,this.domNode=n,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,n=>{n.addEventListener("keydown",r=>{let s=!1;switch(r.code){case it.down:{this.gotoSubIndex(this.subIndex+1),s=!0;break}case it.up:{this.gotoSubIndex(this.subIndex-1),s=!0;break}case it.tab:{Ih(e,"mouseleave");break}case it.enter:case it.numpadEnter:case it.space:{s=!0,r.currentTarget.click();break}}return s&&(r.preventDefault(),r.stopPropagation()),!1})})}},Wre=class{constructor(e,n){this.domNode=e,this.submenu=null,this.submenu=null,this.init(n)}init(e){this.domNode.setAttribute("tabindex","0");const n=this.domNode.querySelector(`.${e}-menu`);n&&(this.submenu=new zre(this,n)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",e=>{let n=!1;switch(e.code){case it.down:{Ih(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),n=!0;break}case it.up:{Ih(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),n=!0;break}case it.tab:{Ih(e.currentTarget,"mouseleave");break}case it.enter:case it.numpadEnter:case it.space:{n=!0,e.currentTarget.click();break}}n&&e.preventDefault()})}},Gre=class{constructor(e,n){this.domNode=e,this.init(n)}init(e){const n=this.domNode.childNodes;Array.from(n).forEach(r=>{r.nodeType===1&&new Wre(r,e)})}};const qre=se({name:"ElMenuCollapseTransition"}),Yre=se({...qre,setup(t){const e=Oe("menu"),n={onBeforeEnter:r=>r.style.opacity="0.2",onEnter(r,s){Js(r,`${e.namespace.value}-opacity-transition`),r.style.opacity="1",s()},onAfterEnter(r){ts(r,`${e.namespace.value}-opacity-transition`),r.style.opacity=""},onBeforeLeave(r){r.dataset||(r.dataset={}),ws(r,e.m("collapse"))?(ts(r,e.m("collapse")),r.dataset.oldOverflow=r.style.overflow,r.dataset.scrollWidth=r.clientWidth.toString(),Js(r,e.m("collapse"))):(Js(r,e.m("collapse")),r.dataset.oldOverflow=r.style.overflow,r.dataset.scrollWidth=r.clientWidth.toString(),ts(r,e.m("collapse"))),r.style.width=`${r.scrollWidth}px`,r.style.overflow="hidden"},onLeave(r){Js(r,"horizontal-collapse-transition"),r.style.width=`${r.dataset.scrollWidth}px`}};return(r,s)=>($(),ye(Ar,Yt({mode:"out-in"},m(n)),{default:le(()=>[pe(r.$slots,"default")]),_:3},16))}});var Xre=We(Yre,[["__file","menu-collapse-transition.vue"]]);function aP(t,e){const n=L(()=>{let s=t.parent;const i=[e.value];for(;s.type.name!=="ElMenu";)s.props.index&&i.unshift(s.props.index),s=s.parent;return i});return{parentMenu:L(()=>{let s=t.parent;for(;s&&!["ElMenu","ElSubMenu"].includes(s.type.name);)s=s.parent;return s}),indexPath:n}}function Qre(t){return L(()=>{const n=t.backgroundColor;return n?new ZR(n).shade(20).toString():""})}const lP=(t,e)=>{const n=Oe("menu");return L(()=>n.cssVarBlock({"text-color":t.textColor||"","hover-text-color":t.textColor||"","bg-color":t.backgroundColor||"","hover-bg-color":Qre(t).value||"","active-color":t.activeTextColor||"",level:`${e}`}))},Zre=Ke({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:Tn},expandOpenIcon:{type:Tn},collapseCloseIcon:{type:Tn},collapseOpenIcon:{type:Tn}}),Rv="ElSubMenu";var B1=se({name:Rv,props:Zre,setup(t,{slots:e,expose:n}){const r=Kt(),{indexPath:s,parentMenu:i}=aP(r,L(()=>t.index)),o=Oe("menu"),a=Oe("sub-menu"),u=nt("rootMenu");u||lr(Rv,"can not inject root menu");const l=nt(`subMenu:${i.value.uid}`);l||lr(Rv,"can not inject sub menu");const c=H({}),d=H({});let f;const h=H(!1),p=H(),g=H(),v=L(()=>A.value==="horizontal"&&w.value?"bottom-start":"right-start"),y=L(()=>A.value==="horizontal"&&w.value||A.value==="vertical"&&!u.props.collapse?t.expandCloseIcon&&t.expandOpenIcon?x.value?t.expandOpenIcon:t.expandCloseIcon:Bo:t.collapseCloseIcon&&t.collapseOpenIcon?x.value?t.collapseOpenIcon:t.collapseCloseIcon:cs),w=L(()=>l.level===0),b=L(()=>{const q=t.teleported;return an(q)?w.value:q}),S=L(()=>u.props.collapse?`${o.namespace.value}-zoom-in-left`:`${o.namespace.value}-zoom-in-top`),E=L(()=>A.value==="horizontal"&&w.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),x=L(()=>u.openedMenus.includes(t.index)),k=L(()=>[...Object.values(c.value),...Object.values(d.value)].some(({active:q})=>q)),A=L(()=>u.props.mode),C=L(()=>u.props.persistent),_=fn({index:t.index,indexPath:s,active:k}),O=lP(u.props,l.level+1),P=L(()=>{var q;return(q=t.popperOffset)!=null?q:u.props.popperOffset}),U=L(()=>{var q;return(q=t.popperClass)!=null?q:u.props.popperClass}),j=L(()=>{var q;return(q=t.showTimeout)!=null?q:u.props.showTimeout}),N=L(()=>{var q;return(q=t.hideTimeout)!=null?q:u.props.hideTimeout}),R=()=>{var q,ee,X;return(X=(ee=(q=g.value)==null?void 0:q.popperRef)==null?void 0:ee.popperInstanceRef)==null?void 0:X.destroy()},V=q=>{q||R()},D=()=>{u.props.menuTrigger==="hover"&&u.props.mode==="horizontal"||u.props.collapse&&u.props.mode==="vertical"||t.disabled||u.handleSubMenuClick({index:t.index,indexPath:s.value,active:k.value})},M=(q,ee=j.value)=>{var X;if(q.type!=="focus"){if(u.props.menuTrigger==="click"&&u.props.mode==="horizontal"||!u.props.collapse&&u.props.mode==="vertical"||t.disabled){l.mouseInChild.value=!0;return}l.mouseInChild.value=!0,f==null||f(),{stop:f}=pl(()=>{u.openMenu(t.index,s.value)},ee),b.value&&((X=i.value.vnode.el)==null||X.dispatchEvent(new MouseEvent("mouseenter")))}},K=(q=!1)=>{var ee;if(u.props.menuTrigger==="click"&&u.props.mode==="horizontal"||!u.props.collapse&&u.props.mode==="vertical"){l.mouseInChild.value=!1;return}f==null||f(),l.mouseInChild.value=!1,{stop:f}=pl(()=>!h.value&&u.closeMenu(t.index,s.value),N.value),b.value&&q&&((ee=l.handleMouseleave)==null||ee.call(l,!0))};Ie(()=>u.props.collapse,q=>V(!!q));{const q=X=>{d.value[X.index]=X},ee=X=>{delete d.value[X.index]};Jt(`subMenu:${r.uid}`,{addSubMenu:q,removeSubMenu:ee,handleMouseleave:K,mouseInChild:h,level:l.level+1})}return n({opened:x}),Ft(()=>{u.addSubMenu(_),l.addSubMenu(_)}),In(()=>{l.removeSubMenu(_),u.removeSubMenu(_)}),()=>{var q;const ee=[(q=e.title)==null?void 0:q.call(e),bt(lt,{class:a.e("icon-arrow"),style:{transform:x.value?t.expandCloseIcon&&t.expandOpenIcon||t.collapseCloseIcon&&t.collapseOpenIcon&&u.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>ut(y.value)?bt(r.appContext.components[y.value]):bt(y.value)})],X=u.isMenuPopup?bt(Vr,{ref:g,visible:x.value,effect:"light",pure:!0,offset:P.value,showArrow:!1,persistent:C.value,popperClass:U.value,placement:v.value,teleported:b.value,fallbackPlacements:E.value,transition:S.value,gpuAcceleration:!1},{content:()=>{var te;return bt("div",{class:[o.m(A.value),o.m("popup-container"),U.value],onMouseenter:ue=>M(ue,100),onMouseleave:()=>K(!0),onFocus:ue=>M(ue,100)},[bt("ul",{class:[o.b(),o.m("popup"),o.m(`popup-${v.value}`)],style:O.value},[(te=e.default)==null?void 0:te.call(e)])])},default:()=>bt("div",{class:a.e("title"),onClick:D},ee)}):bt(dt,{},[bt("div",{class:a.e("title"),ref:p,onClick:D},ee),bt(Km,{},{default:()=>{var te;return Ot(bt("ul",{role:"menu",class:[o.b(),o.m("inline")],style:O.value},[(te=e.default)==null?void 0:te.call(e)]),[[cn,x.value]])}})]);return bt("li",{class:[a.b(),a.is("active",k.value),a.is("opened",x.value),a.is("disabled",t.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:x.value,onMouseenter:M,onMouseleave:()=>K(),onFocus:M},[X])}}});const Jre=Ke({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:de(Array),default:()=>Wn([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:Tn,default:()=>HV},popperEffect:{type:de(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},persistent:{type:Boolean,default:!0}}),Lv=t=>Ve(t)&&t.every(e=>ut(e)),ese={close:(t,e)=>ut(t)&&Lv(e),open:(t,e)=>ut(t)&&Lv(e),select:(t,e,n,r)=>ut(t)&&Lv(e)&&Bt(n)&&(an(r)||r instanceof Promise)};var tse=se({name:"ElMenu",props:Jre,emits:ese,setup(t,{emit:e,slots:n,expose:r}){const s=Kt(),i=s.appContext.config.globalProperties.$router,o=H(),a=Oe("menu"),u=Oe("sub-menu"),l=H(-1),c=H(t.defaultOpeneds&&!t.collapse?t.defaultOpeneds.slice(0):[]),d=H(t.defaultActive),f=H({}),h=H({}),p=L(()=>t.mode==="horizontal"||t.mode==="vertical"&&t.collapse),g=()=>{const N=d.value&&f.value[d.value];if(!N||t.mode==="horizontal"||t.collapse)return;N.indexPath.forEach(V=>{const D=h.value[V];D&&v(V,D.indexPath)})},v=(N,R)=>{c.value.includes(N)||(t.uniqueOpened&&(c.value=c.value.filter(V=>R.includes(V))),c.value.push(N),e("open",N,R))},y=N=>{const R=c.value.indexOf(N);R!==-1&&c.value.splice(R,1)},w=(N,R)=>{y(N),e("close",N,R)},b=({index:N,indexPath:R})=>{c.value.includes(N)?w(N,R):v(N,R)},S=N=>{(t.mode==="horizontal"||t.collapse)&&(c.value=[]);const{index:R,indexPath:V}=N;if(!(Sr(R)||Sr(V)))if(t.router&&i){const D=N.route||R,M=i.push(D).then(K=>(K||(d.value=R),K));e("select",R,V,{index:R,indexPath:V,route:D},M)}else d.value=R,e("select",R,V,{index:R,indexPath:V})},E=N=>{var R;const V=f.value,D=V[N]||d.value&&V[d.value]||V[t.defaultActive];d.value=(R=D==null?void 0:D.index)!=null?R:N},x=N=>{const R=getComputedStyle(N),V=Number.parseInt(R.marginLeft,10),D=Number.parseInt(R.marginRight,10);return N.offsetWidth+V+D||0},k=()=>{var N,R;if(!o.value)return-1;const V=Array.from((R=(N=o.value)==null?void 0:N.childNodes)!=null?R:[]).filter(ue=>ue.nodeName!=="#text"||ue.nodeValue),D=64,M=getComputedStyle(o.value),K=Number.parseInt(M.paddingLeft,10),q=Number.parseInt(M.paddingRight,10),ee=o.value.clientWidth-K-q;let X=0,te=0;return V.forEach((ue,he)=>{ue.nodeName!=="#comment"&&(X+=x(ue),X<=ee-D&&(te=he+1))}),te===V.length?-1:te},A=N=>h.value[N].indexPath,C=(N,R=33.34)=>{let V;return()=>{V&&clearTimeout(V),V=setTimeout(()=>{N()},R)}};let _=!0;const O=()=>{if(l.value===k())return;const N=()=>{l.value=-1,ft(()=>{l.value=k()})};_?N():C(N)(),_=!1};Ie(()=>t.defaultActive,N=>{f.value[N]||(d.value=""),E(N)}),Ie(()=>t.collapse,N=>{N&&(c.value=[])}),Ie(f.value,g);let P;Fr(()=>{t.mode==="horizontal"&&t.ellipsis?P=zn(o,O).stop:P==null||P()});const U=H(!1);{const N=M=>{h.value[M.index]=M},R=M=>{delete h.value[M.index]};Jt("rootMenu",fn({props:t,openedMenus:c,items:f,subMenus:h,activeIndex:d,isMenuPopup:p,addMenuItem:M=>{f.value[M.index]=M},removeMenuItem:M=>{delete f.value[M.index]},addSubMenu:N,removeSubMenu:R,openMenu:v,closeMenu:w,handleMenuItemClick:S,handleSubMenuClick:b})),Jt(`subMenu:${s.uid}`,{addSubMenu:N,removeSubMenu:R,mouseInChild:U,level:0})}Ft(()=>{t.mode==="horizontal"&&new Gre(s.vnode.el,a.namespace.value)}),r({open:R=>{const{indexPath:V}=h.value[R];V.forEach(D=>v(D,V))},close:y,updateActiveIndex:E,handleResize:O});const j=lP(t,0);return()=>{var N,R;let V=(R=(N=n.default)==null?void 0:N.call(n))!=null?R:[];const D=[];if(t.mode==="horizontal"&&o.value){const q=Gi(V),ee=l.value===-1?q:q.slice(0,l.value),X=l.value===-1?[]:q.slice(l.value);X!=null&&X.length&&t.ellipsis&&(V=ee,D.push(bt(B1,{index:"sub-menu-more",class:u.e("hide-arrow"),popperOffset:t.popperOffset},{title:()=>bt(lt,{class:u.e("icon-more")},{default:()=>bt(t.ellipsisIcon)}),default:()=>X})))}const M=t.closeOnClickOutside?[[Oo,()=>{c.value.length&&(U.value||(c.value.forEach(q=>e("close",q,A(q))),c.value=[]))}]]:[],K=Ot(bt("ul",{key:String(t.collapse),role:"menubar",ref:o,style:j.value,class:{[a.b()]:!0,[a.m(t.mode)]:!0,[a.m("collapse")]:t.collapse}},[...V,...D]),M);return t.collapseTransition&&t.mode==="vertical"?bt(Xre,()=>K):K}}});const nse=Ke({index:{type:de([String,null]),default:null},route:{type:de([String,Object])},disabled:Boolean}),rse={click:t=>ut(t.index)&&Ve(t.indexPath)},ty="ElMenuItem",sse=se({name:ty}),ise=se({...sse,props:nse,emits:rse,setup(t,{expose:e,emit:n}){const r=t,s=Kt(),i=nt("rootMenu"),o=Oe("menu"),a=Oe("menu-item");i||lr(ty,"can not inject root menu");const{parentMenu:u,indexPath:l}=aP(s,En(r,"index")),c=nt(`subMenu:${u.value.uid}`);c||lr(ty,"can not inject sub menu");const d=L(()=>r.index===i.activeIndex),f=fn({index:r.index,indexPath:l,active:d}),h=()=>{r.disabled||(i.handleMenuItemClick({index:r.index,indexPath:l.value,route:r.route}),n("click",f))};return Ft(()=>{c.addSubMenu(f),i.addMenuItem(f)}),In(()=>{c.removeSubMenu(f),i.removeMenuItem(f)}),e({parentMenu:u,rootMenu:i,active:d,nsMenu:o,nsMenuItem:a,handleClick:h}),(p,g)=>($(),Y("li",{class:F([m(a).b(),m(a).is("active",m(d)),m(a).is("disabled",p.disabled)]),role:"menuitem",tabindex:"-1",onClick:h},[m(u).type.name==="ElMenu"&&m(i).props.collapse&&p.$slots.title?($(),ye(m(Vr),{key:0,effect:m(i).props.popperEffect,placement:"right","fallback-placements":["left"],persistent:m(i).props.persistent},{content:le(()=>[pe(p.$slots,"title")]),default:le(()=>[J("div",{class:F(m(o).be("tooltip","trigger"))},[pe(p.$slots,"default")],2)]),_:3},8,["effect","persistent"])):($(),Y(dt,{key:1},[pe(p.$slots,"default"),pe(p.$slots,"title")],64))],2))}});var uP=We(ise,[["__file","menu-item.vue"]]);const ose={title:String},ase=se({name:"ElMenuItemGroup"}),lse=se({...ase,props:ose,setup(t){const e=Oe("menu-item-group");return(n,r)=>($(),Y("li",{class:F(m(e).b())},[J("div",{class:F(m(e).e("title"))},[n.$slots.title?pe(n.$slots,"title",{key:1}):($(),Y(dt,{key:0},[Qt(ze(n.title),1)],64))],2),J("ul",null,[pe(n.$slots,"default")])],2))}});var cP=We(lse,[["__file","menu-item-group.vue"]]);const use=Dt(tse,{MenuItem:uP,MenuItemGroup:cP,SubMenu:B1}),cse=Gn(uP),dse=Gn(cP),fse=Gn(B1),hse=Ke({icon:{type:Tn,default:()=>fV},title:String,content:{type:String,default:""}}),pse={back:()=>!0},mse=se({name:"ElPageHeader"}),gse=se({...mse,props:hse,emits:pse,setup(t,{emit:e}){const{t:n}=sn(),r=Oe("page-header");function s(){e("back")}return(i,o)=>($(),Y("div",{class:F([m(r).b(),{[m(r).m("has-breadcrumb")]:!!i.$slots.breadcrumb,[m(r).m("has-extra")]:!!i.$slots.extra,[m(r).is("contentful")]:!!i.$slots.default}])},[i.$slots.breadcrumb?($(),Y("div",{key:0,class:F(m(r).e("breadcrumb"))},[pe(i.$slots,"breadcrumb")],2)):ge("v-if",!0),J("div",{class:F(m(r).e("header"))},[J("div",{class:F(m(r).e("left"))},[J("div",{class:F(m(r).e("back")),role:"button",tabindex:"0",onClick:s},[i.icon||i.$slots.icon?($(),Y("div",{key:0,"aria-label":i.title||m(n)("el.pageHeader.title"),class:F(m(r).e("icon"))},[pe(i.$slots,"icon",{},()=>[i.icon?($(),ye(m(lt),{key:0},{default:le(()=>[($(),ye(jt(i.icon)))]),_:1})):ge("v-if",!0)])],10,["aria-label"])):ge("v-if",!0),J("div",{class:F(m(r).e("title"))},[pe(i.$slots,"title",{},()=>[Qt(ze(i.title||m(n)("el.pageHeader.title")),1)])],2)],2),ie(m(GL),{direction:"vertical"}),J("div",{class:F(m(r).e("content"))},[pe(i.$slots,"content",{},()=>[Qt(ze(i.content),1)])],2)],2),i.$slots.extra?($(),Y("div",{key:0,class:F(m(r).e("extra"))},[pe(i.$slots,"extra")],2)):ge("v-if",!0)],2),i.$slots.default?($(),Y("div",{key:1,class:F(m(r).e("main"))},[pe(i.$slots,"default")],2)):ge("v-if",!0)],2))}});var vse=We(gse,[["__file","page-header.vue"]]);const yse=Dt(vse),dP=Symbol("elPaginationKey"),bse=Ke({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:Tn}}),Sse={click:t=>t instanceof MouseEvent},wse=se({name:"ElPaginationPrev"}),Ese=se({...wse,props:bse,emits:Sse,setup(t){const e=t,{t:n}=sn(),r=L(()=>e.disabled||e.currentPage<=1);return(s,i)=>($(),Y("button",{type:"button",class:"btn-prev",disabled:m(r),"aria-label":s.prevText||m(n)("el.pagination.prev"),"aria-disabled":m(r),onClick:o=>s.$emit("click",o)},[s.prevText?($(),Y("span",{key:0},ze(s.prevText),1)):($(),ye(m(lt),{key:1},{default:le(()=>[($(),ye(jt(s.prevIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var xse=We(Ese,[["__file","prev.vue"]]);const Tse=Ke({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:Tn}}),Cse=se({name:"ElPaginationNext"}),kse=se({...Cse,props:Tse,emits:["click"],setup(t){const e=t,{t:n}=sn(),r=L(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0);return(s,i)=>($(),Y("button",{type:"button",class:"btn-next",disabled:m(r),"aria-label":s.nextText||m(n)("el.pagination.next"),"aria-disabled":m(r),onClick:o=>s.$emit("click",o)},[s.nextText?($(),Y("span",{key:0},ze(s.nextText),1)):($(),ye(m(lt),{key:1},{default:le(()=>[($(),ye(jt(s.nextIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var _se=We(kse,[["__file","next.vue"]]);const fP=Symbol("ElSelectGroup"),Zu=Symbol("ElSelect"),ny="ElOption",Ase=Ke({value:{type:[String,Number,Boolean,Object],required:!0},label:{type:[String,Number]},created:Boolean,disabled:Boolean});function Ise(t,e){const n=nt(Zu);n||lr(ny,"usage: <el-select><el-option /></el-select/>");const r=nt(fP,{disabled:!1}),s=L(()=>c(Zr(n.props.modelValue),t.value)),i=L(()=>{var h;if(n.props.multiple){const p=Zr((h=n.props.modelValue)!=null?h:[]);return!s.value&&p.length>=n.props.multipleLimit&&n.props.multipleLimit>0}else return!1}),o=L(()=>t.label||(Bt(t.value)?"":t.value)),a=L(()=>t.value||t.label||""),u=L(()=>t.disabled||e.groupDisabled||i.value),l=Kt(),c=(h=[],p)=>{if(Bt(t.value)){const g=n.props.valueKey;return h&&h.some(v=>Rn(sr(v,g))===sr(p,g))}else return h&&h.includes(p)},d=()=>{!t.disabled&&!r.disabled&&(n.states.hoveringIndex=n.optionsArray.indexOf(l.proxy))},f=h=>{const p=new RegExp(E1(h),"i");e.visible=p.test(String(o.value))||t.created};return Ie(()=>o.value,()=>{!t.created&&!n.props.remote&&n.setSelected()}),Ie(()=>t.value,(h,p)=>{const{remote:g,valueKey:v}=n.props;if((g?h!==p:!Tr(h,p))&&(n.onOptionDestroy(p,l.proxy),n.onOptionCreate(l.proxy)),!t.created&&!g){if(v&&Bt(h)&&Bt(p)&&h[v]===p[v])return;n.setSelected()}}),Ie(()=>r.disabled,()=>{e.groupDisabled=r.disabled},{immediate:!0}),{select:n,currentLabel:o,currentValue:a,itemSelected:s,isDisabled:u,hoverItem:d,updateOption:f}}const Rse=se({name:ny,componentName:ny,props:Ase,setup(t){const e=Oe("select"),n=Or(),r=L(()=>[e.be("dropdown","item"),e.is("disabled",m(a)),e.is("selected",m(o)),e.is("hovering",m(f))]),s=fn({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:i,itemSelected:o,isDisabled:a,select:u,hoverItem:l,updateOption:c}=Ise(t,s),{visible:d,hover:f}=_r(s),h=Kt().proxy;u.onOptionCreate(h),In(()=>{const g=h.value,{selected:v}=u.states,y=v.some(w=>w.value===h.value);ft(()=>{u.states.cachedOptions.get(g)===h&&!y&&u.states.cachedOptions.delete(g)}),u.onOptionDestroy(g,h)});function p(){a.value||u.handleOptionSelect(h)}return{ns:e,id:n,containerKls:r,currentLabel:i,itemSelected:o,isDisabled:a,select:u,visible:d,hover:f,states:s,hoverItem:l,updateOption:c,selectOptionClick:p}}});function Lse(t,e){return Ot(($(),Y("li",{id:t.id,class:F(t.containerKls),role:"option","aria-disabled":t.isDisabled||void 0,"aria-selected":t.itemSelected,onMousemove:t.hoverItem,onClick:wt(t.selectOptionClick,["stop"])},[pe(t.$slots,"default",{},()=>[J("span",null,ze(t.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])),[[cn,t.visible]])}var V1=We(Rse,[["render",Lse],["__file","option.vue"]]);const Pse=se({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const t=nt(Zu),e=Oe("select"),n=L(()=>t.props.popperClass),r=L(()=>t.props.multiple),s=L(()=>t.props.fitInputWidth),i=H("");function o(){var a;i.value=`${(a=t.selectRef)==null?void 0:a.offsetWidth}px`}return Ft(()=>{o(),zn(t.selectRef,o)}),{ns:e,minWidth:i,popperClass:n,isMultiple:r,isFitInputWidth:s}}});function Dse(t,e,n,r,s,i){return $(),Y("div",{class:F([t.ns.b("dropdown"),t.ns.is("multiple",t.isMultiple),t.popperClass]),style:mt({[t.isFitInputWidth?"width":"minWidth"]:t.minWidth})},[t.$slots.header?($(),Y("div",{key:0,class:F(t.ns.be("dropdown","header"))},[pe(t.$slots,"header")],2)):ge("v-if",!0),pe(t.$slots,"default"),t.$slots.footer?($(),Y("div",{key:1,class:F(t.ns.be("dropdown","footer"))},[pe(t.$slots,"footer")],2)):ge("v-if",!0)],6)}var Ose=We(Pse,[["render",Dse],["__file","select-dropdown.vue"]]);const $se=(t,e)=>{const{t:n}=sn(),r=Or(),s=Oe("select"),i=Oe("input"),o=fn({inputValue:"",options:new Map,cachedOptions:new Map,optionValues:[],selected:[],selectionWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),a=H(),u=H(),l=H(),c=H(),d=H(),f=H(),h=H(),p=H(),g=H(),v=H(),y=H(),{isComposing:w,handleCompositionStart:b,handleCompositionUpdate:S,handleCompositionEnd:E}=ef({afterComposition:Ze=>Pt(Ze)}),{wrapperRef:x,isFocused:k,handleBlur:A}=Pa(d,{beforeFocus(){return R.value},afterFocus(){t.automaticDropdown&&!C.value&&(C.value=!0,o.menuVisibleOnFocus=!0)},beforeBlur(Ze){var Ct,dn;return((Ct=l.value)==null?void 0:Ct.isFocusInsideContent(Ze))||((dn=c.value)==null?void 0:dn.isFocusInsideContent(Ze))},afterBlur(){var Ze;C.value=!1,o.menuVisibleOnFocus=!1,t.validateEvent&&((Ze=P==null?void 0:P.validate)==null||Ze.call(P,"blur").catch(Ct=>void 0))}}),C=H(!1),_=H(),{form:O,formItem:P}=Ur(),{inputId:U}=ci(t,{formItemContext:P}),{valueOnClear:j,isEmptyValue:N}=Mm(t),R=L(()=>t.disabled||(O==null?void 0:O.disabled)),V=L(()=>Ve(t.modelValue)?t.modelValue.length>0:!N(t.modelValue)),D=L(()=>{var Ze;return(Ze=O==null?void 0:O.statusIcon)!=null?Ze:!1}),M=L(()=>t.clearable&&!R.value&&o.inputHovering&&V.value),K=L(()=>t.remote&&t.filterable&&!t.remoteShowSuffix?"":t.suffixIcon),q=L(()=>s.is("reverse",!!(K.value&&C.value))),ee=L(()=>(P==null?void 0:P.validateState)||""),X=L(()=>ee.value&&Fm[ee.value]),te=L(()=>t.remote?300:0),ue=L(()=>t.remote&&!o.inputValue&&o.options.size===0),he=L(()=>t.loading?t.loadingText||n("el.select.loading"):t.filterable&&o.inputValue&&o.options.size>0&&Z.value===0?t.noMatchText||n("el.select.noMatch"):o.options.size===0?t.noDataText||n("el.select.noData"):null),Z=L(()=>ce.value.filter(Ze=>Ze.visible).length),ce=L(()=>{const Ze=Array.from(o.options.values()),Ct=[];return o.optionValues.forEach(dn=>{const Vn=Ze.findIndex(hr=>hr.value===dn);Vn>-1&&Ct.push(Ze[Vn])}),Ct.length>=Ze.length?Ct:Ze}),ae=L(()=>Array.from(o.cachedOptions.values())),Te=L(()=>{const Ze=ce.value.filter(Ct=>!Ct.created).some(Ct=>Ct.currentLabel===o.inputValue);return t.filterable&&t.allowCreate&&o.inputValue!==""&&!Ze}),Ce=()=>{t.filterable&&pt(t.filterMethod)||t.filterable&&t.remote&&pt(t.remoteMethod)||ce.value.forEach(Ze=>{var Ct;(Ct=Ze.updateOption)==null||Ct.call(Ze,o.inputValue)})},z=ur(),re=L(()=>["small"].includes(z.value)?"small":"default"),ve=L({get(){return C.value&&!ue.value},set(Ze){C.value=Ze}}),ke=L(()=>{if(t.multiple&&!an(t.modelValue))return Zr(t.modelValue).length===0&&!o.inputValue;const Ze=Ve(t.modelValue)?t.modelValue[0]:t.modelValue;return t.filterable||an(Ze)?!o.inputValue:!0}),Ee=L(()=>{var Ze;const Ct=(Ze=t.placeholder)!=null?Ze:n("el.select.placeholder");return t.multiple||!V.value?Ct:o.selectedLabel}),be=L(()=>Lp?null:"mouseenter");Ie(()=>t.modelValue,(Ze,Ct)=>{t.multiple&&t.filterable&&!t.reserveKeyword&&(o.inputValue="",Se("")),Ne(),!Tr(Ze,Ct)&&t.validateEvent&&(P==null||P.validate("change").catch(dn=>void 0))},{flush:"post",deep:!0}),Ie(()=>C.value,Ze=>{Ze?Se(o.inputValue):(o.inputValue="",o.previousQuery=null,o.isBeforeHide=!0),e("visible-change",Ze)}),Ie(()=>o.options.entries(),()=>{on&&(Ne(),t.defaultFirstOption&&(t.filterable||t.remote)&&Z.value&&_e())},{flush:"post"}),Ie([()=>o.hoveringIndex,ce],([Ze])=>{vt(Ze)&&Ze>-1?_.value=ce.value[Ze]||{}:_.value={},ce.value.forEach(Ct=>{Ct.hover=_.value===Ct})}),Fr(()=>{o.isBeforeHide||Ce()});const Se=Ze=>{o.previousQuery===Ze||w.value||(o.previousQuery=Ze,t.filterable&&pt(t.filterMethod)?t.filterMethod(Ze):t.filterable&&t.remote&&pt(t.remoteMethod)&&t.remoteMethod(Ze),t.defaultFirstOption&&(t.filterable||t.remote)&&Z.value?ft(_e):ft(st))},_e=()=>{const Ze=ce.value.filter(hr=>hr.visible&&!hr.disabled&&!hr.states.groupDisabled),Ct=Ze.find(hr=>hr.created),dn=Ze[0],Vn=ce.value.map(hr=>hr.value);o.hoveringIndex=ne(Vn,Ct||dn)},Ne=()=>{if(t.multiple)o.selectedLabel="";else{const Ct=Ve(t.modelValue)?t.modelValue[0]:t.modelValue,dn=Me(Ct);o.selectedLabel=dn.currentLabel,o.selected=[dn];return}const Ze=[];an(t.modelValue)||Zr(t.modelValue).forEach(Ct=>{Ze.push(Me(Ct))}),o.selected=Ze},Me=Ze=>{let Ct;const dn=Zc(Ze);for(let Pi=o.cachedOptions.size-1;Pi>=0;Pi--){const wr=ae.value[Pi];if(dn?sr(wr.value,t.valueKey)===sr(Ze,t.valueKey):wr.value===Ze){Ct={value:Ze,currentLabel:wr.currentLabel,get isDisabled(){return wr.isDisabled}};break}}if(Ct)return Ct;const Vn=dn?Ze.label:Ze??"";return{value:Ze,currentLabel:Vn}},st=()=>{o.hoveringIndex=ce.value.findIndex(Ze=>o.selected.some(Ct=>cr(Ct)===cr(Ze)))},qe=()=>{o.selectionWidth=Number.parseFloat(window.getComputedStyle(u.value).width)},Ae=()=>{o.collapseItemWidth=v.value.getBoundingClientRect().width},et=()=>{var Ze,Ct;(Ct=(Ze=l.value)==null?void 0:Ze.updatePopper)==null||Ct.call(Ze)},St=()=>{var Ze,Ct;(Ct=(Ze=c.value)==null?void 0:Ze.updatePopper)==null||Ct.call(Ze)},Lt=()=>{o.inputValue.length>0&&!C.value&&(C.value=!0),Se(o.inputValue)},Pt=Ze=>{if(o.inputValue=Ze.target.value,t.remote)en();else return Lt()},en=_s(()=>{Lt()},te.value),zt=Ze=>{Tr(t.modelValue,Ze)||e(Xt,Ze)},bn=Ze=>YI(Ze,Ct=>{const dn=o.cachedOptions.get(Ct);return dn&&!dn.disabled&&!dn.states.groupDisabled}),ht=Ze=>{if(t.multiple&&Ze.code!==it.delete&&Ze.target.value.length<=0){const Ct=Zr(t.modelValue).slice(),dn=bn(Ct);if(dn<0)return;const Vn=Ct[dn];Ct.splice(dn,1),e(_t,Ct),zt(Ct),e("remove-tag",Vn)}},Nt=(Ze,Ct)=>{const dn=o.selected.indexOf(Ct);if(dn>-1&&!R.value){const Vn=Zr(t.modelValue).slice();Vn.splice(dn,1),e(_t,Vn),zt(Vn),e("remove-tag",Ct.value)}Ze.stopPropagation(),Fn()},fe=Ze=>{Ze.stopPropagation();const Ct=t.multiple?[]:j.value;if(t.multiple)for(const dn of o.selected)dn.isDisabled&&Ct.push(dn.value);e(_t,Ct),zt(Ct),o.hoveringIndex=-1,C.value=!1,e("clear"),Fn()},Le=Ze=>{var Ct;if(t.multiple){const dn=Zr((Ct=t.modelValue)!=null?Ct:[]).slice(),Vn=ne(dn,Ze);Vn>-1?dn.splice(Vn,1):(t.multipleLimit<=0||dn.length<t.multipleLimit)&&dn.push(Ze.value),e(_t,dn),zt(dn),Ze.created&&Se(""),t.filterable&&!t.reserveKeyword&&(o.inputValue="")}else e(_t,Ze.value),zt(Ze.value),C.value=!1;Fn(),!C.value&&ft(()=>{Ye(Ze)})},ne=(Ze,Ct)=>an(Ct)?-1:Bt(Ct.value)?Ze.findIndex(dn=>Tr(sr(dn,t.valueKey),cr(Ct))):Ze.indexOf(Ct.value),Ye=Ze=>{var Ct,dn,Vn,hr,Pi;const wr=Ve(Ze)?Ze[0]:Ze;let di=null;if(wr!=null&&wr.value){const Kr=ce.value.filter(ao=>ao.value===wr.value);Kr.length>0&&(di=Kr[0].$el)}if(l.value&&di){const Kr=(hr=(Vn=(dn=(Ct=l.value)==null?void 0:Ct.popperRef)==null?void 0:dn.contentRef)==null?void 0:Vn.querySelector)==null?void 0:hr.call(Vn,`.${s.be("dropdown","wrap")}`);Kr&&n1(Kr,di)}(Pi=y.value)==null||Pi.handleScroll()},Et=Ze=>{o.options.set(Ze.value,Ze),o.cachedOptions.set(Ze.value,Ze)},tn=(Ze,Ct)=>{o.options.get(Ze)===Ct&&o.options.delete(Ze)},ct=L(()=>{var Ze,Ct;return(Ct=(Ze=l.value)==null?void 0:Ze.popperRef)==null?void 0:Ct.contentRef}),Wt=()=>{o.isBeforeHide=!1,ft(()=>{var Ze;(Ze=y.value)==null||Ze.update(),Ye(o.selected)})},Fn=()=>{var Ze;(Ze=d.value)==null||Ze.focus()},As=()=>{var Ze;if(C.value){C.value=!1,ft(()=>{var Ct;return(Ct=d.value)==null?void 0:Ct.blur()});return}(Ze=d.value)==null||Ze.blur()},ir=Ze=>{fe(Ze)},jr=Ze=>{if(C.value=!1,k.value){const Ct=new FocusEvent("focus",Ze);ft(()=>A(Ct))}},yt=()=>{o.inputValue.length>0?o.inputValue="":C.value=!1},ln=()=>{R.value||(Lp&&(o.inputHovering=!0),o.menuVisibleOnFocus?o.menuVisibleOnFocus=!1:C.value=!C.value)},Vt=()=>{if(!C.value)ln();else{const Ze=ce.value[o.hoveringIndex];Ze&&!Ze.isDisabled&&Le(Ze)}},cr=Ze=>Bt(Ze.value)?sr(Ze.value,t.valueKey):Ze.value,ms=L(()=>ce.value.filter(Ze=>Ze.visible).every(Ze=>Ze.isDisabled)),Is=L(()=>t.multiple?t.collapseTags?o.selected.slice(0,t.maxCollapseTags):o.selected:[]),Bn=L(()=>t.multiple?t.collapseTags?o.selected.slice(t.maxCollapseTags):[]:[]),or=Ze=>{if(!C.value){C.value=!0;return}if(!(o.options.size===0||Z.value===0||w.value)&&!ms.value){Ze==="next"?(o.hoveringIndex++,o.hoveringIndex===o.options.size&&(o.hoveringIndex=0)):Ze==="prev"&&(o.hoveringIndex--,o.hoveringIndex<0&&(o.hoveringIndex=o.options.size-1));const Ct=ce.value[o.hoveringIndex];(Ct.isDisabled||!Ct.visible)&&or(Ze),ft(()=>Ye(_.value))}},tc=()=>{if(!u.value)return 0;const Ze=window.getComputedStyle(u.value);return Number.parseFloat(Ze.gap||"6px")},Ko=L(()=>{const Ze=tc();return{maxWidth:`${v.value&&t.maxCollapseTags===1?o.selectionWidth-o.collapseItemWidth-Ze:o.selectionWidth}px`}}),zo=L(()=>({maxWidth:`${o.selectionWidth}px`})),Wo=Ze=>{e("popup-scroll",Ze)};return zn(u,qe),zn(p,et),zn(x,et),zn(g,St),zn(v,Ae),Ft(()=>{Ne()}),{inputId:U,contentId:r,nsSelect:s,nsInput:i,states:o,isFocused:k,expanded:C,optionsArray:ce,hoverOption:_,selectSize:z,filteredOptionsCount:Z,updateTooltip:et,updateTagTooltip:St,debouncedOnInputChange:en,onInput:Pt,deletePrevTag:ht,deleteTag:Nt,deleteSelected:fe,handleOptionSelect:Le,scrollToOption:Ye,hasModelValue:V,shouldShowPlaceholder:ke,currentPlaceholder:Ee,mouseEnterEventName:be,needStatusIcon:D,showClose:M,iconComponent:K,iconReverse:q,validateState:ee,validateIcon:X,showNewOption:Te,updateOptions:Ce,collapseTagSize:re,setSelected:Ne,selectDisabled:R,emptyText:he,handleCompositionStart:b,handleCompositionUpdate:S,handleCompositionEnd:E,onOptionCreate:Et,onOptionDestroy:tn,handleMenuEnter:Wt,focus:Fn,blur:As,handleClearClick:ir,handleClickOutside:jr,handleEsc:yt,toggleMenu:ln,selectOption:Vt,getValueKey:cr,navigateOptions:or,dropdownMenuVisible:ve,showTagList:Is,collapseTagList:Bn,popupScroll:Wo,tagStyle:Ko,collapseTagStyle:zo,popperRef:ct,inputRef:d,tooltipRef:l,tagTooltipRef:c,prefixRef:f,suffixRef:h,selectRef:a,wrapperRef:x,selectionRef:u,scrollbarRef:y,menuRef:p,tagMenuRef:g,collapseItemRef:v}};var Mse=se({name:"ElOptions",setup(t,{slots:e}){const n=nt(Zu);let r=[];return()=>{var s,i;const o=(s=e.default)==null?void 0:s.call(e),a=[];function u(l){Ve(l)&&l.forEach(c=>{var d,f,h,p;const g=(d=(c==null?void 0:c.type)||{})==null?void 0:d.name;g==="ElOptionGroup"?u(!ut(c.children)&&!Ve(c.children)&&pt((f=c.children)==null?void 0:f.default)?(h=c.children)==null?void 0:h.default():c.children):g==="ElOption"?a.push((p=c.props)==null?void 0:p.value):Ve(c.children)&&u(c.children)})}return o.length&&u((i=o[0])==null?void 0:i.children),Tr(a,r)||(r=a,n&&(n.states.optionValues=a)),o}}});const Nse=Ke({name:String,id:String,modelValue:{type:de([Array,String,Number,Boolean,Object]),default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:fr,effect:{type:de(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:de(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:nr.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:Tn,default:Vo},fitInputWidth:Boolean,suffixIcon:{type:Tn,default:Bo},tagType:{...Do.type,default:"info"},tagEffect:{...Do.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,showArrow:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:de(String),values:jo,default:"bottom-start"},fallbackPlacements:{type:de(Array),default:["bottom-start","top-start","right","left"]},tabindex:{type:[String,Number],default:0},appendTo:nr.appendTo,...qu,...$r(["ariaLabel"])});bR.scroll;const DC="ElSelect",Fse=se({name:DC,componentName:DC,components:{ElSelectMenu:Ose,ElOption:V1,ElOptions:Mse,ElTag:Iu,ElScrollbar:io,ElTooltip:Vr,ElIcon:lt},directives:{ClickOutside:Oo},props:Nse,emits:[_t,Xt,"remove-tag","clear","visible-change","focus","blur","popup-scroll"],setup(t,{emit:e,slots:n}){const r=L(()=>{const{modelValue:c,multiple:d}=t,f=d?[]:void 0;return Ve(c)?d?c:f:d?f:c}),s=fn({..._r(t),modelValue:r}),i=$se(s,e),{calculatorRef:o,inputStyle:a}=F1(),u=c=>{!t.persistent&&c&&Gi(c).filter(f=>Bt(f)&&f.type.name==="ElOption").forEach(f=>{const h={...f.props};h.currentLabel=h.label||(Bt(h.value)?"":h.value),i.onOptionCreate(h)})};Ie(()=>{var c;return(c=n.default)==null?void 0:c.call(n)},c=>{u(c)},{immediate:!0}),Jt(Zu,fn({props:s,states:i.states,selectRef:i.selectRef,optionsArray:i.optionsArray,setSelected:i.setSelected,handleOptionSelect:i.handleOptionSelect,onOptionCreate:i.onOptionCreate,onOptionDestroy:i.onOptionDestroy}));const l=L(()=>t.multiple?i.states.selected.map(c=>c.currentLabel):i.states.selectedLabel);return{...i,modelValue:r,selectedLabel:l,calculatorRef:o,inputStyle:a}}});function Bse(t,e){const n=Mt("el-tag"),r=Mt("el-tooltip"),s=Mt("el-icon"),i=Mt("el-option"),o=Mt("el-options"),a=Mt("el-scrollbar"),u=Mt("el-select-menu"),l=dm("click-outside");return Ot(($(),Y("div",{ref:"selectRef",class:F([t.nsSelect.b(),t.nsSelect.m(t.selectSize)]),[Pc(t.mouseEnterEventName)]:c=>t.states.inputHovering=!0,onMouseleave:c=>t.states.inputHovering=!1},[ie(r,{ref:"tooltipRef",visible:t.dropdownMenuVisible,placement:t.placement,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"popper-options":t.popperOptions,"fallback-placements":t.fallbackPlacements,effect:t.effect,pure:"",trigger:"click",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:t.persistent,"append-to":t.appendTo,"show-arrow":t.showArrow,offset:t.offset,onBeforeShow:t.handleMenuEnter,onHide:c=>t.states.isBeforeHide=!1},{default:le(()=>{var c;return[J("div",{ref:"wrapperRef",class:F([t.nsSelect.e("wrapper"),t.nsSelect.is("focused",t.isFocused),t.nsSelect.is("hovering",t.states.inputHovering),t.nsSelect.is("filterable",t.filterable),t.nsSelect.is("disabled",t.selectDisabled)]),onClick:wt(t.toggleMenu,["prevent"])},[t.$slots.prefix?($(),Y("div",{key:0,ref:"prefixRef",class:F(t.nsSelect.e("prefix"))},[pe(t.$slots,"prefix")],2)):ge("v-if",!0),J("div",{ref:"selectionRef",class:F([t.nsSelect.e("selection"),t.nsSelect.is("near",t.multiple&&!t.$slots.prefix&&!!t.states.selected.length)])},[t.multiple?pe(t.$slots,"tag",{key:0},()=>[($(!0),Y(dt,null,Zt(t.showTagList,d=>($(),Y("div",{key:t.getValueKey(d),class:F(t.nsSelect.e("selected-item"))},[ie(n,{closable:!t.selectDisabled&&!d.isDisabled,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",style:mt(t.tagStyle),onClose:f=>t.deleteTag(f,d)},{default:le(()=>[J("span",{class:F(t.nsSelect.e("tags-text"))},[pe(t.$slots,"label",{label:d.currentLabel,value:d.value},()=>[Qt(ze(d.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),t.collapseTags&&t.states.selected.length>t.maxCollapseTags?($(),ye(r,{key:0,ref:"tagTooltipRef",disabled:t.dropdownMenuVisible||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:t.teleported},{default:le(()=>[J("div",{ref:"collapseItemRef",class:F(t.nsSelect.e("selected-item"))},[ie(n,{closable:!1,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",style:mt(t.collapseTagStyle)},{default:le(()=>[J("span",{class:F(t.nsSelect.e("tags-text"))}," + "+ze(t.states.selected.length-t.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:le(()=>[J("div",{ref:"tagMenuRef",class:F(t.nsSelect.e("selection"))},[($(!0),Y(dt,null,Zt(t.collapseTagList,d=>($(),Y("div",{key:t.getValueKey(d),class:F(t.nsSelect.e("selected-item"))},[ie(n,{class:"in-tooltip",closable:!t.selectDisabled&&!d.isDisabled,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",onClose:f=>t.deleteTag(f,d)},{default:le(()=>[J("span",{class:F(t.nsSelect.e("tags-text"))},[pe(t.$slots,"label",{label:d.currentLabel,value:d.value},()=>[Qt(ze(d.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):ge("v-if",!0)]):ge("v-if",!0),J("div",{class:F([t.nsSelect.e("selected-item"),t.nsSelect.e("input-wrapper"),t.nsSelect.is("hidden",!t.filterable)])},[Ot(J("input",{id:t.inputId,ref:"inputRef","onUpdate:modelValue":d=>t.states.inputValue=d,type:"text",name:t.name,class:F([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize)]),disabled:t.selectDisabled,autocomplete:t.autocomplete,style:mt(t.inputStyle),tabindex:t.tabindex,role:"combobox",readonly:!t.filterable,spellcheck:"false","aria-activedescendant":((c=t.hoverOption)==null?void 0:c.id)||"","aria-controls":t.contentId,"aria-expanded":t.dropdownMenuVisible,"aria-label":t.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[Sn(wt(d=>t.navigateOptions("next"),["stop","prevent"]),["down"]),Sn(wt(d=>t.navigateOptions("prev"),["stop","prevent"]),["up"]),Sn(wt(t.handleEsc,["stop","prevent"]),["esc"]),Sn(wt(t.selectOption,["stop","prevent"]),["enter"]),Sn(wt(t.deletePrevTag,["stop"]),["delete"])],onCompositionstart:t.handleCompositionStart,onCompositionupdate:t.handleCompositionUpdate,onCompositionend:t.handleCompositionEnd,onInput:t.onInput,onClick:wt(t.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","tabindex","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[pm,t.states.inputValue]]),t.filterable?($(),Y("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:F(t.nsSelect.e("input-calculator")),textContent:ze(t.states.inputValue)},null,10,["textContent"])):ge("v-if",!0)],2),t.shouldShowPlaceholder?($(),Y("div",{key:1,class:F([t.nsSelect.e("selected-item"),t.nsSelect.e("placeholder"),t.nsSelect.is("transparent",!t.hasModelValue||t.expanded&&!t.states.inputValue)])},[t.hasModelValue?pe(t.$slots,"label",{key:0,label:t.currentPlaceholder,value:t.modelValue},()=>[J("span",null,ze(t.currentPlaceholder),1)]):($(),Y("span",{key:1},ze(t.currentPlaceholder),1))],2)):ge("v-if",!0)],2),J("div",{ref:"suffixRef",class:F(t.nsSelect.e("suffix"))},[t.iconComponent&&!t.showClose?($(),ye(s,{key:0,class:F([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.iconReverse])},{default:le(()=>[($(),ye(jt(t.iconComponent)))]),_:1},8,["class"])):ge("v-if",!0),t.showClose&&t.clearIcon?($(),ye(s,{key:1,class:F([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.nsSelect.e("clear")]),onClick:t.handleClearClick},{default:le(()=>[($(),ye(jt(t.clearIcon)))]),_:1},8,["class","onClick"])):ge("v-if",!0),t.validateState&&t.validateIcon&&t.needStatusIcon?($(),ye(s,{key:2,class:F([t.nsInput.e("icon"),t.nsInput.e("validateIcon"),t.nsInput.is("loading",t.validateState==="validating")])},{default:le(()=>[($(),ye(jt(t.validateIcon)))]),_:1},8,["class"])):ge("v-if",!0)],2)],10,["onClick"])]}),content:le(()=>[ie(u,{ref:"menuRef"},{default:le(()=>[t.$slots.header?($(),Y("div",{key:0,class:F(t.nsSelect.be("dropdown","header")),onClick:wt(()=>{},["stop"])},[pe(t.$slots,"header")],10,["onClick"])):ge("v-if",!0),Ot(ie(a,{id:t.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":t.nsSelect.be("dropdown","wrap"),"view-class":t.nsSelect.be("dropdown","list"),class:F([t.nsSelect.is("empty",t.filteredOptionsCount===0)]),role:"listbox","aria-label":t.ariaLabel,"aria-orientation":"vertical",onScroll:t.popupScroll},{default:le(()=>[t.showNewOption?($(),ye(i,{key:0,value:t.states.inputValue,created:!0},null,8,["value"])):ge("v-if",!0),ie(o,null,{default:le(()=>[pe(t.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label","onScroll"]),[[cn,t.states.options.size>0&&!t.loading]]),t.$slots.loading&&t.loading?($(),Y("div",{key:1,class:F(t.nsSelect.be("dropdown","loading"))},[pe(t.$slots,"loading")],2)):t.loading||t.filteredOptionsCount===0?($(),Y("div",{key:2,class:F(t.nsSelect.be("dropdown","empty"))},[pe(t.$slots,"empty",{},()=>[J("span",null,ze(t.emptyText),1)])],2)):ge("v-if",!0),t.$slots.footer?($(),Y("div",{key:3,class:F(t.nsSelect.be("dropdown","footer")),onClick:wt(()=>{},["stop"])},[pe(t.$slots,"footer")],10,["onClick"])):ge("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],16,["onMouseleave"])),[[l,t.handleClickOutside,t.popperRef]])}var Vse=We(Fse,[["render",Bse],["__file","select.vue"]]);const Use=se({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(t){const e=Oe("select"),n=H(),r=Kt(),s=H([]);Jt(fP,fn({..._r(t)}));const i=L(()=>s.value.some(l=>l.visible===!0)),o=l=>{var c;return l.type.name==="ElOption"&&!!((c=l.component)!=null&&c.proxy)},a=l=>{const c=Zr(l),d=[];return c.forEach(f=>{var h;$n(f)&&(o(f)?d.push(f.component.proxy):Ve(f.children)&&f.children.length?d.push(...a(f.children)):(h=f.component)!=null&&h.subTree&&d.push(...a(f.component.subTree)))}),d},u=()=>{s.value=a(r.subTree)};return Ft(()=>{u()}),nR(n,u,{attributes:!0,subtree:!0,childList:!0}),{groupRef:n,visible:i,ns:e}}});function Hse(t,e,n,r,s,i){return Ot(($(),Y("ul",{ref:"groupRef",class:F(t.ns.be("group","wrap"))},[J("li",{class:F(t.ns.be("group","title"))},ze(t.label),3),J("li",null,[J("ul",{class:F(t.ns.b("group"))},[pe(t.$slots,"default")],2)])],2)),[[cn,t.visible]])}var hP=We(Use,[["render",Hse],["__file","option-group.vue"]]);const gl=Dt(Vse,{Option:V1,OptionGroup:hP}),Vp=Gn(V1),jse=Gn(hP),U1=()=>nt(dP,{}),Kse=Ke({pageSize:{type:Number,required:!0},pageSizes:{type:de(Array),default:()=>Wn([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:so},appendSizeTo:String}),zse=se({name:"ElPaginationSizes"}),Wse=se({...zse,props:Kse,emits:["page-size-change"],setup(t,{emit:e}){const n=t,{t:r}=sn(),s=Oe("pagination"),i=U1(),o=H(n.pageSize);Ie(()=>n.pageSizes,(l,c)=>{if(!Tr(l,c)&&Ve(l)){const d=l.includes(n.pageSize)?n.pageSize:n.pageSizes[0];e("page-size-change",d)}}),Ie(()=>n.pageSize,l=>{o.value=l});const a=L(()=>n.pageSizes);function u(l){var c;l!==o.value&&(o.value=l,(c=i.handleSizeChange)==null||c.call(i,Number(l)))}return(l,c)=>($(),Y("span",{class:F(m(s).e("sizes"))},[ie(m(gl),{"model-value":o.value,disabled:l.disabled,"popper-class":l.popperClass,size:l.size,teleported:l.teleported,"validate-event":!1,"append-to":l.appendSizeTo,onChange:u},{default:le(()=>[($(!0),Y(dt,null,Zt(m(a),d=>($(),ye(m(Vp),{key:d,value:d,label:d+m(r)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported","append-to"])],2))}});var Gse=We(Wse,[["__file","sizes.vue"]]);const qse=Ke({size:{type:String,values:so}}),Yse=se({name:"ElPaginationJumper"}),Xse=se({...Yse,props:qse,setup(t){const{t:e}=sn(),n=Oe("pagination"),{pageCount:r,disabled:s,currentPage:i,changeEvent:o}=U1(),a=H(),u=L(()=>{var d;return(d=a.value)!=null?d:i==null?void 0:i.value});function l(d){a.value=d?+d:""}function c(d){d=Math.trunc(+d),o==null||o(d),a.value=void 0}return(d,f)=>($(),Y("span",{class:F(m(n).e("jump")),disabled:m(s)},[J("span",{class:F([m(n).e("goto")])},ze(m(e)("el.pagination.goto")),3),ie(m(es),{size:d.size,class:F([m(n).e("editor"),m(n).is("in-pagination")]),min:1,max:m(r),disabled:m(s),"model-value":m(u),"validate-event":!1,"aria-label":m(e)("el.pagination.page"),type:"number","onUpdate:modelValue":l,onChange:c},null,8,["size","class","max","disabled","model-value","aria-label"]),J("span",{class:F([m(n).e("classifier")])},ze(m(e)("el.pagination.pageClassifier")),3)],10,["disabled"]))}});var Qse=We(Xse,[["__file","jumper.vue"]]);const Zse=Ke({total:{type:Number,default:1e3}}),Jse=se({name:"ElPaginationTotal"}),eie=se({...Jse,props:Zse,setup(t){const{t:e}=sn(),n=Oe("pagination"),{disabled:r}=U1();return(s,i)=>($(),Y("span",{class:F(m(n).e("total")),disabled:m(r)},ze(m(e)("el.pagination.total",{total:s.total})),11,["disabled"]))}});var tie=We(eie,[["__file","total.vue"]]);const nie=Ke({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),rie=se({name:"ElPaginationPager"}),sie=se({...rie,props:nie,emits:[Xt],setup(t,{emit:e}){const n=t,r=Oe("pager"),s=Oe("icon"),{t:i}=sn(),o=H(!1),a=H(!1),u=H(!1),l=H(!1),c=H(!1),d=H(!1),f=L(()=>{const S=n.pagerCount,E=(S-1)/2,x=Number(n.currentPage),k=Number(n.pageCount);let A=!1,C=!1;k>S&&(x>S-E&&(A=!0),x<k-E&&(C=!0));const _=[];if(A&&!C){const O=k-(S-2);for(let P=O;P<k;P++)_.push(P)}else if(!A&&C)for(let O=2;O<S;O++)_.push(O);else if(A&&C){const O=Math.floor(S/2)-1;for(let P=x-O;P<=x+O;P++)_.push(P)}else for(let O=2;O<k;O++)_.push(O);return _}),h=L(()=>["more","btn-quickprev",s.b(),r.is("disabled",n.disabled)]),p=L(()=>["more","btn-quicknext",s.b(),r.is("disabled",n.disabled)]),g=L(()=>n.disabled?-1:0);Fr(()=>{const S=(n.pagerCount-1)/2;o.value=!1,a.value=!1,n.pageCount>n.pagerCount&&(n.currentPage>n.pagerCount-S&&(o.value=!0),n.currentPage<n.pageCount-S&&(a.value=!0))});function v(S=!1){n.disabled||(S?u.value=!0:l.value=!0)}function y(S=!1){S?c.value=!0:d.value=!0}function w(S){const E=S.target;if(E.tagName.toLowerCase()==="li"&&Array.from(E.classList).includes("number")){const x=Number(E.textContent);x!==n.currentPage&&e(Xt,x)}else E.tagName.toLowerCase()==="li"&&Array.from(E.classList).includes("more")&&b(S)}function b(S){const E=S.target;if(E.tagName.toLowerCase()==="ul"||n.disabled)return;let x=Number(E.textContent);const k=n.pageCount,A=n.currentPage,C=n.pagerCount-2;E.className.includes("more")&&(E.className.includes("quickprev")?x=A-C:E.className.includes("quicknext")&&(x=A+C)),Number.isNaN(+x)||(x<1&&(x=1),x>k&&(x=k)),x!==A&&e(Xt,x)}return(S,E)=>($(),Y("ul",{class:F(m(r).b()),onClick:b,onKeyup:Sn(w,["enter"])},[S.pageCount>0?($(),Y("li",{key:0,class:F([[m(r).is("active",S.currentPage===1),m(r).is("disabled",S.disabled)],"number"]),"aria-current":S.currentPage===1,"aria-label":m(i)("el.pagination.currentPage",{pager:1}),tabindex:m(g)}," 1 ",10,["aria-current","aria-label","tabindex"])):ge("v-if",!0),o.value?($(),Y("li",{key:1,class:F(m(h)),tabindex:m(g),"aria-label":m(i)("el.pagination.prevPages",{pager:S.pagerCount-2}),onMouseenter:x=>v(!0),onMouseleave:x=>u.value=!1,onFocus:x=>y(!0),onBlur:x=>c.value=!1},[(u.value||c.value)&&!S.disabled?($(),ye(m(xa),{key:0})):($(),ye(m(_x),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):ge("v-if",!0),($(!0),Y(dt,null,Zt(m(f),x=>($(),Y("li",{key:x,class:F([[m(r).is("active",S.currentPage===x),m(r).is("disabled",S.disabled)],"number"]),"aria-current":S.currentPage===x,"aria-label":m(i)("el.pagination.currentPage",{pager:x}),tabindex:m(g)},ze(x),11,["aria-current","aria-label","tabindex"]))),128)),a.value?($(),Y("li",{key:2,class:F(m(p)),tabindex:m(g),"aria-label":m(i)("el.pagination.nextPages",{pager:S.pagerCount-2}),onMouseenter:x=>v(),onMouseleave:x=>l.value=!1,onFocus:x=>y(),onBlur:x=>d.value=!1},[(l.value||d.value)&&!S.disabled?($(),ye(m(Ta),{key:0})):($(),ye(m(_x),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):ge("v-if",!0),S.pageCount>1?($(),Y("li",{key:3,class:F([[m(r).is("active",S.currentPage===S.pageCount),m(r).is("disabled",S.disabled)],"number"]),"aria-current":S.currentPage===S.pageCount,"aria-label":m(i)("el.pagination.currentPage",{pager:S.pageCount}),tabindex:m(g)},ze(S.pageCount),11,["aria-current","aria-label","tabindex"])):ge("v-if",!0)],42,["onKeyup"]))}});var iie=We(sie,[["__file","pager.vue"]]);const rs=t=>typeof t!="number",oie=Ke({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:t=>vt(t)&&Math.trunc(t)===t&&t>4&&t<22&&t%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:de(Array),default:()=>Wn([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:Tn,default:()=>Ea},nextText:{type:String,default:""},nextIcon:{type:Tn,default:()=>cs},teleported:{type:Boolean,default:!0},small:Boolean,size:fr,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean,appendSizeTo:String}),aie={"update:current-page":t=>vt(t),"update:page-size":t=>vt(t),"size-change":t=>vt(t),change:(t,e)=>vt(t)&&vt(e),"current-change":t=>vt(t),"prev-click":t=>vt(t),"next-click":t=>vt(t)},OC="ElPagination";var lie=se({name:OC,props:oie,emits:aie,setup(t,{emit:e,slots:n}){const{t:r}=sn(),s=Oe("pagination"),i=Kt().vnode.props||{},o=uR(),a=L(()=>{var E;return t.small?"small":(E=t.size)!=null?E:o.value});Ao({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},L(()=>!!t.small));const u="onUpdate:currentPage"in i||"onUpdate:current-page"in i||"onCurrentChange"in i,l="onUpdate:pageSize"in i||"onUpdate:page-size"in i||"onSizeChange"in i,c=L(()=>{if(rs(t.total)&&rs(t.pageCount)||!rs(t.currentPage)&&!u)return!1;if(t.layout.includes("sizes")){if(rs(t.pageCount)){if(!rs(t.total)&&!rs(t.pageSize)&&!l)return!1}else if(!l)return!1}return!0}),d=H(rs(t.defaultPageSize)?10:t.defaultPageSize),f=H(rs(t.defaultCurrentPage)?1:t.defaultCurrentPage),h=L({get(){return rs(t.pageSize)?d.value:t.pageSize},set(E){rs(t.pageSize)&&(d.value=E),l&&(e("update:page-size",E),e("size-change",E))}}),p=L(()=>{let E=0;return rs(t.pageCount)?rs(t.total)||(E=Math.max(1,Math.ceil(t.total/h.value))):E=t.pageCount,E}),g=L({get(){return rs(t.currentPage)?f.value:t.currentPage},set(E){let x=E;E<1?x=1:E>p.value&&(x=p.value),rs(t.currentPage)&&(f.value=x),u&&(e("update:current-page",x),e("current-change",x))}});Ie(p,E=>{g.value>E&&(g.value=E)}),Ie([g,h],E=>{e(Xt,...E)},{flush:"post"});function v(E){g.value=E}function y(E){h.value=E;const x=p.value;g.value>x&&(g.value=x)}function w(){t.disabled||(g.value-=1,e("prev-click",g.value))}function b(){t.disabled||(g.value+=1,e("next-click",g.value))}function S(E,x){E&&(E.props||(E.props={}),E.props.class=[E.props.class,x].join(" "))}return Jt(dP,{pageCount:p,disabled:L(()=>t.disabled),currentPage:g,changeEvent:v,handleSizeChange:y}),()=>{var E,x;if(!c.value)return r("el.pagination.deprecationWarning"),null;if(!t.layout||t.hideOnSinglePage&&p.value<=1)return null;const k=[],A=[],C=bt("div",{class:s.e("rightwrapper")},A),_={prev:bt(xse,{disabled:t.disabled,currentPage:g.value,prevText:t.prevText,prevIcon:t.prevIcon,onClick:w}),jumper:bt(Qse,{size:a.value}),pager:bt(iie,{currentPage:g.value,pageCount:p.value,pagerCount:t.pagerCount,onChange:v,disabled:t.disabled}),next:bt(_se,{disabled:t.disabled,currentPage:g.value,pageCount:p.value,nextText:t.nextText,nextIcon:t.nextIcon,onClick:b}),sizes:bt(Gse,{pageSize:h.value,pageSizes:t.pageSizes,popperClass:t.popperClass,disabled:t.disabled,teleported:t.teleported,size:a.value,appendSizeTo:t.appendSizeTo}),slot:(x=(E=n==null?void 0:n.default)==null?void 0:E.call(n))!=null?x:null,total:bt(tie,{total:rs(t.total)?0:t.total})},O=t.layout.split(",").map(U=>U.trim());let P=!1;return O.forEach(U=>{if(U==="->"){P=!0;return}P?A.push(_[U]):k.push(_[U])}),S(k[0],s.is("first")),S(k[k.length-1],s.is("last")),P&&A.length>0&&(S(A[0],s.is("first")),S(A[A.length-1],s.is("last")),k.push(C)),bt("div",{class:[s.b(),s.is("background",t.background),s.m(a.value)]},k)}}});const uie=Dt(lie),cie=Ke({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:F0,default:"primary"},cancelButtonType:{type:String,values:F0,default:"text"},icon:{type:Tn,default:()=>YV},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:nr.teleported,persistent:nr.persistent,width:{type:[String,Number],default:150}}),die={confirm:t=>t instanceof MouseEvent,cancel:t=>t instanceof MouseEvent},fie=se({name:"ElPopconfirm"}),hie=se({...fie,props:cie,emits:die,setup(t,{emit:e}){const n=t,{t:r}=sn(),s=Oe("popconfirm"),i=H(),o=()=>{var f,h;(h=(f=i.value)==null?void 0:f.onClose)==null||h.call(f)},a=L(()=>({width:Xn(n.width)})),u=f=>{e("confirm",f),o()},l=f=>{e("cancel",f),o()},c=L(()=>n.confirmButtonText||r("el.popconfirm.confirmButtonText")),d=L(()=>n.cancelButtonText||r("el.popconfirm.cancelButtonText"));return(f,h)=>($(),ye(m(Vr),Yt({ref_key:"tooltipRef",ref:i,trigger:"click",effect:"light"},f.$attrs,{"popper-class":`${m(s).namespace.value}-popover`,"popper-style":m(a),teleported:f.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":f.hideAfter,persistent:f.persistent}),{content:le(()=>[J("div",{class:F(m(s).b())},[J("div",{class:F(m(s).e("main"))},[!f.hideIcon&&f.icon?($(),ye(m(lt),{key:0,class:F(m(s).e("icon")),style:mt({color:f.iconColor})},{default:le(()=>[($(),ye(jt(f.icon)))]),_:1},8,["class","style"])):ge("v-if",!0),Qt(" "+ze(f.title),1)],2),J("div",{class:F(m(s).e("action"))},[pe(f.$slots,"actions",{confirm:u,cancel:l},()=>[ie(m(Cr),{size:"small",type:f.cancelButtonType==="text"?"":f.cancelButtonType,text:f.cancelButtonType==="text",onClick:l},{default:le(()=>[Qt(ze(m(d)),1)]),_:1},8,["type","text"]),ie(m(Cr),{size:"small",type:f.confirmButtonType==="text"?"":f.confirmButtonType,text:f.confirmButtonType==="text",onClick:u},{default:le(()=>[Qt(ze(m(c)),1)]),_:1},8,["type","text"])])],2)],2)]),default:le(()=>[f.$slots.reference?pe(f.$slots,"reference",{key:0}):ge("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var pie=We(hie,[["__file","popconfirm.vue"]]);const mie=Dt(pie),gie=Ke({trigger:ou.trigger,triggerKeys:ou.triggerKeys,placement:Hh.placement,disabled:ou.disabled,visible:nr.visible,transition:nr.transition,popperOptions:Hh.popperOptions,tabindex:Hh.tabindex,content:nr.content,popperStyle:nr.popperStyle,popperClass:nr.popperClass,enterable:{...nr.enterable,default:!0},effect:{...nr.effect,default:"light"},teleported:nr.teleported,appendTo:nr.appendTo,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),vie={"update:visible":t=>wn(t),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},yie="onUpdate:visible",bie=se({name:"ElPopover"}),Sie=se({...bie,props:gie,emits:vie,setup(t,{expose:e,emit:n}){const r=t,s=L(()=>r[yie]),i=Oe("popover"),o=H(),a=L(()=>{var v;return(v=m(o))==null?void 0:v.popperRef}),u=L(()=>[{width:Xn(r.width)},r.popperStyle]),l=L(()=>[i.b(),r.popperClass,{[i.m("plain")]:!!r.content}]),c=L(()=>r.transition===`${i.namespace.value}-fade-in-linear`),d=()=>{var v;(v=o.value)==null||v.hide()},f=()=>{n("before-enter")},h=()=>{n("before-leave")},p=()=>{n("after-enter")},g=()=>{n("update:visible",!1),n("after-leave")};return e({popperRef:a,hide:d}),(v,y)=>($(),ye(m(Vr),Yt({ref_key:"tooltipRef",ref:o},v.$attrs,{trigger:v.trigger,"trigger-keys":v.triggerKeys,placement:v.placement,disabled:v.disabled,visible:v.visible,transition:v.transition,"popper-options":v.popperOptions,tabindex:v.tabindex,content:v.content,offset:v.offset,"show-after":v.showAfter,"hide-after":v.hideAfter,"auto-close":v.autoClose,"show-arrow":v.showArrow,"aria-label":v.title,effect:v.effect,enterable:v.enterable,"popper-class":m(l),"popper-style":m(u),teleported:v.teleported,"append-to":v.appendTo,persistent:v.persistent,"gpu-acceleration":m(c),"onUpdate:visible":m(s),onBeforeShow:f,onBeforeHide:h,onShow:p,onHide:g}),{content:le(()=>[v.title?($(),Y("div",{key:0,class:F(m(i).e("title")),role:"title"},ze(v.title),3)):ge("v-if",!0),pe(v.$slots,"default",{},()=>[Qt(ze(v.content),1)])]),default:le(()=>[v.$slots.reference?pe(v.$slots,"reference",{key:0}):ge("v-if",!0)]),_:3},16,["trigger","trigger-keys","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","append-to","persistent","gpu-acceleration","onUpdate:visible"]))}});var wie=We(Sie,[["__file","popover.vue"]]);const $C=(t,e)=>{const n=e.arg||e.value,r=n==null?void 0:n.popperRef;r&&(r.triggerRef=t)};var Eie={mounted(t,e){$C(t,e)},updated(t,e){$C(t,e)}};const xie="popover",pP=rW(Eie,xie),Tie=Dt(wie,{directive:pP}),Cie=Ke({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:de(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:de([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:de(Function),default:t=>`${t}%`}}),kie=se({name:"ElProgress"}),_ie=se({...kie,props:Cie,setup(t){const e=t,n={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},r=Oe("progress"),s=L(()=>{const b={width:`${e.percentage}%`,animationDuration:`${e.duration}s`},S=w(e.percentage);return S.includes("gradient")?b.background=S:b.backgroundColor=S,b}),i=L(()=>(e.strokeWidth/e.width*100).toFixed(1)),o=L(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(i.value)/2}`,10):0),a=L(()=>{const b=o.value,S=e.type==="dashboard";return`
          M 50 50
          m 0 ${S?"":"-"}${b}
          a ${b} ${b} 0 1 1 0 ${S?"-":""}${b*2}
          a ${b} ${b} 0 1 1 0 ${S?"":"-"}${b*2}
          `}),u=L(()=>2*Math.PI*o.value),l=L(()=>e.type==="dashboard"?.75:1),c=L(()=>`${-1*u.value*(1-l.value)/2}px`),d=L(()=>({strokeDasharray:`${u.value*l.value}px, ${u.value}px`,strokeDashoffset:c.value})),f=L(()=>({strokeDasharray:`${u.value*l.value*(e.percentage/100)}px, ${u.value}px`,strokeDashoffset:c.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),h=L(()=>{let b;return e.color?b=w(e.percentage):b=n[e.status]||n.default,b}),p=L(()=>e.status==="warning"?_m:e.type==="line"?e.status==="success"?Ob:Vo:e.status==="success"?zd:si),g=L(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),v=L(()=>e.format(e.percentage));function y(b){const S=100/b.length;return b.map((x,k)=>ut(x)?{color:x,percentage:(k+1)*S}:x).sort((x,k)=>x.percentage-k.percentage)}const w=b=>{var S;const{color:E}=e;if(pt(E))return E(b);if(ut(E))return E;{const x=y(E);for(const k of x)if(k.percentage>b)return k.color;return(S=x[x.length-1])==null?void 0:S.color}};return(b,S)=>($(),Y("div",{class:F([m(r).b(),m(r).m(b.type),m(r).is(b.status),{[m(r).m("without-text")]:!b.showText,[m(r).m("text-inside")]:b.textInside}]),role:"progressbar","aria-valuenow":b.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[b.type==="line"?($(),Y("div",{key:0,class:F(m(r).b("bar"))},[J("div",{class:F(m(r).be("bar","outer")),style:mt({height:`${b.strokeWidth}px`})},[J("div",{class:F([m(r).be("bar","inner"),{[m(r).bem("bar","inner","indeterminate")]:b.indeterminate},{[m(r).bem("bar","inner","striped")]:b.striped},{[m(r).bem("bar","inner","striped-flow")]:b.stripedFlow}]),style:mt(m(s))},[(b.showText||b.$slots.default)&&b.textInside?($(),Y("div",{key:0,class:F(m(r).be("bar","innerText"))},[pe(b.$slots,"default",{percentage:b.percentage},()=>[J("span",null,ze(m(v)),1)])],2)):ge("v-if",!0)],6)],6)],2)):($(),Y("div",{key:1,class:F(m(r).b("circle")),style:mt({height:`${b.width}px`,width:`${b.width}px`})},[($(),Y("svg",{viewBox:"0 0 100 100"},[J("path",{class:F(m(r).be("circle","track")),d:m(a),stroke:`var(${m(r).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":b.strokeLinecap,"stroke-width":m(i),fill:"none",style:mt(m(d))},null,14,["d","stroke","stroke-linecap","stroke-width"]),J("path",{class:F(m(r).be("circle","path")),d:m(a),stroke:m(h),fill:"none",opacity:b.percentage?1:0,"stroke-linecap":b.strokeLinecap,"stroke-width":m(i),style:mt(m(f))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(b.showText||b.$slots.default)&&!b.textInside?($(),Y("div",{key:2,class:F(m(r).e("text")),style:mt({fontSize:`${m(g)}px`})},[pe(b.$slots,"default",{percentage:b.percentage},()=>[b.status?($(),ye(m(lt),{key:1},{default:le(()=>[($(),ye(jt(m(p))))]),_:1})):($(),Y("span",{key:0},ze(m(v)),1))])],6)):ge("v-if",!0)],10,["aria-valuenow"]))}});var Aie=We(_ie,[["__file","progress.vue"]]);const mP=Dt(Aie),Iie=Ke({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:de([Array,Object]),default:()=>Wn(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:de([Array,Object]),default:()=>[qf,qf,qf]},voidIcon:{type:Tn,default:()=>cU},disabledVoidIcon:{type:Tn,default:()=>qf},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:de(Array),default:()=>Wn(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:fr,clearable:Boolean,...$r(["ariaLabel"])}),Rie={[Xt]:t=>vt(t),[_t]:t=>vt(t)},Lie=se({name:"ElRate"}),Pie=se({...Lie,props:Iie,emits:Rie,setup(t,{expose:e,emit:n}){const r=t;function s(R,V){const D=q=>Bt(q),M=Object.keys(V).map(q=>+q).filter(q=>{const ee=V[q];return(D(ee)?ee.excluded:!1)?R<q:R<=q}).sort((q,ee)=>q-ee),K=V[M[0]];return D(K)&&K.value||K}const i=nt(xl,void 0),o=nt(to,void 0),a=ur(),u=Oe("rate"),{inputId:l,isLabeledByFormItem:c}=ci(r,{formItemContext:o}),d=H(r.modelValue),f=H(-1),h=H(!0),p=L(()=>[u.b(),u.m(a.value)]),g=L(()=>r.disabled||(i==null?void 0:i.disabled)),v=L(()=>u.cssVarBlock({"void-color":r.voidColor,"disabled-void-color":r.disabledVoidColor,"fill-color":S.value})),y=L(()=>{let R="";return r.showScore?R=r.scoreTemplate.replace(/\{\s*value\s*\}/,g.value?`${r.modelValue}`:`${d.value}`):r.showText&&(R=r.texts[Math.ceil(d.value)-1]),R}),w=L(()=>r.modelValue*100-Math.floor(r.modelValue)*100),b=L(()=>Ve(r.colors)?{[r.lowThreshold]:r.colors[0],[r.highThreshold]:{value:r.colors[1],excluded:!0},[r.max]:r.colors[2]}:r.colors),S=L(()=>{const R=s(d.value,b.value);return Bt(R)?"":R}),E=L(()=>{let R="";return g.value?R=`${w.value}%`:r.allowHalf&&(R="50%"),{color:S.value,width:R}}),x=L(()=>{let R=Ve(r.icons)?[...r.icons]:{...r.icons};return R=ko(R),Ve(R)?{[r.lowThreshold]:R[0],[r.highThreshold]:{value:R[1],excluded:!0},[r.max]:R[2]}:R}),k=L(()=>s(r.modelValue,x.value)),A=L(()=>g.value?ut(r.disabledVoidIcon)?r.disabledVoidIcon:ko(r.disabledVoidIcon):ut(r.voidIcon)?r.voidIcon:ko(r.voidIcon)),C=L(()=>s(d.value,x.value));function _(R){const V=g.value&&w.value>0&&R-1<r.modelValue&&R>r.modelValue,D=r.allowHalf&&h.value&&R-.5<=d.value&&R>d.value;return V||D}function O(R){r.clearable&&R===r.modelValue&&(R=0),n(_t,R),r.modelValue!==R&&n(Xt,R)}function P(R){g.value||(r.allowHalf&&h.value?O(d.value):O(R))}function U(R){if(g.value)return;let V=d.value;const D=R.code;return D===it.up||D===it.right?(r.allowHalf?V+=.5:V+=1,R.stopPropagation(),R.preventDefault()):(D===it.left||D===it.down)&&(r.allowHalf?V-=.5:V-=1,R.stopPropagation(),R.preventDefault()),V=V<0?0:V,V=V>r.max?r.max:V,n(_t,V),n(Xt,V),V}function j(R,V){if(!g.value){if(r.allowHalf&&V){let D=V.target;ws(D,u.e("item"))&&(D=D.querySelector(`.${u.e("icon")}`)),(D.clientWidth===0||ws(D,u.e("decimal")))&&(D=D.parentNode),h.value=V.offsetX*2<=D.clientWidth,d.value=h.value?R-.5:R}else d.value=R;f.value=R}}function N(){g.value||(r.allowHalf&&(h.value=r.modelValue!==Math.floor(r.modelValue)),d.value=r.modelValue,f.value=-1)}return Ie(()=>r.modelValue,R=>{d.value=R,h.value=r.modelValue!==Math.floor(r.modelValue)}),r.modelValue||n(_t,0),e({setCurrentValue:j,resetCurrentValue:N}),(R,V)=>{var D;return $(),Y("div",{id:m(l),class:F([m(p),m(u).is("disabled",m(g))]),role:"slider","aria-label":m(c)?void 0:R.ariaLabel||"rating","aria-labelledby":m(c)?(D=m(o))==null?void 0:D.labelId:void 0,"aria-valuenow":d.value,"aria-valuetext":m(y)||void 0,"aria-valuemin":"0","aria-valuemax":R.max,tabindex:"0",style:mt(m(v)),onKeydown:U},[($(!0),Y(dt,null,Zt(R.max,(M,K)=>($(),Y("span",{key:K,class:F(m(u).e("item")),onMousemove:q=>j(M,q),onMouseleave:N,onClick:q=>P(M)},[ie(m(lt),{class:F([m(u).e("icon"),{hover:f.value===M},m(u).is("active",M<=d.value)])},{default:le(()=>[_(M)?ge("v-if",!0):($(),Y(dt,{key:0},[Ot(($(),ye(jt(m(C)),null,null,512)),[[cn,M<=d.value]]),Ot(($(),ye(jt(m(A)),null,null,512)),[[cn,!(M<=d.value)]])],64)),_(M)?($(),Y(dt,{key:1},[($(),ye(jt(m(A)),{class:F([m(u).em("decimal","box")])},null,8,["class"])),ie(m(lt),{style:mt(m(E)),class:F([m(u).e("icon"),m(u).e("decimal")])},{default:le(()=>[($(),ye(jt(m(k))))]),_:1},8,["style","class"])],64)):ge("v-if",!0)]),_:2},1032,["class"])],42,["onMousemove","onClick"]))),128)),R.showText||R.showScore?($(),Y("span",{key:0,class:F(m(u).e("text")),style:mt({color:R.textColor})},ze(m(y)),7)):ge("v-if",!0)],46,["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"])}}});var Die=We(Pie,[["__file","rate.vue"]]);const Oie=Dt(Die),Wa={primary:"icon-primary",success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},MC={[Wa.primary]:vd,[Wa.success]:SV,[Wa.warning]:_m,[Wa.error]:$b,[Wa.info]:vd},$ie=Ke({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["primary","success","warning","info","error"],default:"info"}}),Mie=se({name:"ElResult"}),Nie=se({...Mie,props:$ie,setup(t){const e=t,n=Oe("result"),r=L(()=>{const s=e.icon,i=s&&Wa[s]?Wa[s]:"icon-info",o=MC[i]||MC["icon-info"];return{class:i,component:o}});return(s,i)=>($(),Y("div",{class:F(m(n).b())},[J("div",{class:F(m(n).e("icon"))},[pe(s.$slots,"icon",{},()=>[m(r).component?($(),ye(jt(m(r).component),{key:0,class:F(m(r).class)},null,8,["class"])):ge("v-if",!0)])],2),s.title||s.$slots.title?($(),Y("div",{key:0,class:F(m(n).e("title"))},[pe(s.$slots,"title",{},()=>[J("p",null,ze(s.title),1)])],2)):ge("v-if",!0),s.subTitle||s.$slots["sub-title"]?($(),Y("div",{key:1,class:F(m(n).e("subtitle"))},[pe(s.$slots,"sub-title",{},()=>[J("p",null,ze(s.subTitle),1)])],2)):ge("v-if",!0),s.$slots.extra?($(),Y("div",{key:2,class:F(m(n).e("extra"))},[pe(s.$slots,"extra")],2)):ge("v-if",!0)],2))}});var Fie=We(Nie,[["__file","result.vue"]]);const Bie=Dt(Fie),Vie=["start","center","end","space-around","space-between","space-evenly"],Uie=["top","middle","bottom"],Hie=Ke({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:Vie,default:"start"},align:{type:String,values:Uie}}),jie=se({name:"ElRow"}),Kie=se({...jie,props:Hie,setup(t){const e=t,n=Oe("row"),r=L(()=>e.gutter);Jt(wL,{gutter:r});const s=L(()=>{const o={};return e.gutter&&(o.marginRight=o.marginLeft=`-${e.gutter/2}px`),o}),i=L(()=>[n.b(),n.is(`justify-${e.justify}`,e.justify!=="start"),n.is(`align-${e.align}`,!!e.align)]);return(o,a)=>($(),ye(jt(o.tag),{class:F(m(i)),style:mt(m(s))},{default:le(()=>[pe(o.$slots,"default")]),_:3},8,["class","style"]))}});var zie=We(Kie,[["__file","row.vue"]]);const Wie=Dt(zie),Gie=se({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup(){return{ns:Oe("select")}}});function qie(t,e,n,r,s,i){return $(),Y("div",{class:F(t.ns.be("group","title")),style:mt({...t.style,lineHeight:`${t.height}px`})},ze(t.item.label),7)}var Yie=We(Gie,[["render",qie],["__file","group-item.vue"]]);function Xie(t,{emit:e}){return{hoverItem:()=>{t.disabled||e("hover",t.index)},selectOptionClick:()=>{t.disabled||e("select",t.item,t.index)}}}const gP={label:"label",value:"value",disabled:"disabled",options:"options"};function qm(t){const e=L(()=>({...gP,...t.props}));return{aliasProps:e,getLabel:o=>sr(o,e.value.label),getValue:o=>sr(o,e.value.value),getDisabled:o=>sr(o,e.value.disabled),getOptions:o=>sr(o,e.value.options)}}const Qie=Ke({allowCreate:Boolean,autocomplete:{type:de(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:Tn,default:Vo},effect:{type:de(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,modelValue:{type:de([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:de(Array),required:!0},placeholder:{type:String},teleported:nr.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:de(Object),default:()=>({})},remote:Boolean,size:fr,props:{type:de(Object),default:()=>gP},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},offset:{type:Number,default:12},showArrow:{type:Boolean,default:!0},placement:{type:de(String),values:jo,default:"bottom-start"},fallbackPlacements:{type:de(Array),default:["bottom-start","top-start","right","left"]},tagType:{...Do.type,default:"info"},tagEffect:{...Do.effect,default:"light"},tabindex:{type:[String,Number],default:0},appendTo:nr.appendTo,fitInputWidth:{type:[Boolean,Number],default:!0,validator(t){return wn(t)||vt(t)}},suffixIcon:{type:Tn,default:Bo},...qu,...$r(["ariaLabel"])}),Zie=Ke({data:Array,disabled:Boolean,hovering:Boolean,item:{type:de(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),Jie={[_t]:t=>!0,[Xt]:t=>!0,"remove-tag":t=>!0,"visible-change":t=>!0,focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0},eoe={hover:t=>vt(t),select:(t,e)=>!0},H1=Symbol("ElSelectV2Injection"),toe=se({props:Zie,emits:eoe,setup(t,{emit:e}){const n=nt(H1),r=Oe("select"),{hoverItem:s,selectOptionClick:i}=Xie(t,{emit:e}),{getLabel:o}=qm(n.props);return{ns:r,hoverItem:s,selectOptionClick:i,getLabel:o}}});function noe(t,e,n,r,s,i){return $(),Y("li",{"aria-selected":t.selected,style:mt(t.style),class:F([t.ns.be("dropdown","item"),t.ns.is("selected",t.selected),t.ns.is("disabled",t.disabled),t.ns.is("created",t.created),t.ns.is("hovering",t.hovering)]),onMousemove:t.hoverItem,onClick:wt(t.selectOptionClick,["stop"])},[pe(t.$slots,"default",{item:t.item,index:t.index,disabled:t.disabled},()=>[J("span",null,ze(t.getLabel(t.item)),1)])],46,["aria-selected","onMousemove","onClick"])}var roe=We(toe,[["render",noe],["__file","option-item.vue"]]),NC=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function soe(t,e){return!!(t===e||NC(t)&&NC(e))}function ioe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!soe(t[n],e[n]))return!1;return!0}function ooe(t,e){e===void 0&&(e=ioe);var n=null;function r(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];if(n&&n.lastThis===this&&e(s,n.lastArgs))return n.lastResult;var o=t.apply(this,s);return n={lastResult:o,lastArgs:s,lastThis:this},o}return r.clear=function(){n=null},r}const vP=()=>{const e=Kt().proxy.$props;return L(()=>{const n=(r,s,i)=>({});return e.perfMode?Pm(n):ooe(n)})},ry=50,Up="itemRendered",Hp="scroll",Gl="forward",jp="backward",ei="auto",Ym="smart",Rd="start",qi="center",Ld="end",Du="horizontal",j1="vertical",aoe="ltr",lu="rtl",Pd="negative",K1="positive-ascending",z1="positive-descending",loe={[Du]:"left",[j1]:"top"},uoe=20,coe={[Du]:"deltaX",[j1]:"deltaY"},doe=({atEndEdge:t,atStartEdge:e,layout:n},r)=>{let s,i=0;const o=u=>u<0&&e.value||u>0&&t.value;return{hasReachedEdge:o,onWheel:u=>{ml(s);const l=u[coe[n.value]];o(i)&&o(i+l)||(i+=l,Bm()||u.preventDefault(),s=ka(()=>{r(i),i=0}))}}},sy=Ii({type:de([Number,Function]),required:!0}),iy=Ii({type:Number}),oy=Ii({type:Number,default:2}),foe=Ii({type:String,values:["ltr","rtl"],default:"ltr"}),ay=Ii({type:Number,default:0}),Kp=Ii({type:Number,required:!0}),yP=Ii({type:String,values:["horizontal","vertical"],default:j1}),bP=Ke({className:{type:String,default:""},containerElement:{type:de([String,Object]),default:"div"},data:{type:de(Array),default:()=>Wn([])},direction:foe,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:de([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),SP=Ke({cache:oy,estimatedItemSize:iy,layout:yP,initScrollOffset:ay,total:Kp,itemSize:sy,...bP}),ly={type:Number,default:6},wP={type:Number,default:0},EP={type:Number,default:2},ol=Ke({columnCache:oy,columnWidth:sy,estimatedColumnWidth:iy,estimatedRowHeight:iy,initScrollLeft:ay,initScrollTop:ay,itemKey:{type:de(Function),default:({columnIndex:t,rowIndex:e})=>`${e}:${t}`},rowCache:oy,rowHeight:sy,totalColumn:Kp,totalRow:Kp,hScrollbarSize:ly,vScrollbarSize:ly,scrollbarStartGap:wP,scrollbarEndGap:EP,role:String,...bP}),xP=Ke({alwaysOn:Boolean,class:String,layout:yP,total:Kp,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:ly,startGap:wP,endGap:EP,visible:Boolean}),Za=(t,e)=>t<e?Gl:jp,Dd=t=>t===aoe||t===lu||t===Du,FC=t=>t===lu;let Ml=null;function zp(t=!1){if(Ml===null||t){const e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";const r=document.createElement("div"),s=r.style;return s.width="100px",s.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?Ml=z1:(e.scrollLeft=1,e.scrollLeft===0?Ml=Pd:Ml=K1),document.body.removeChild(e),Ml}return Ml}function hoe({move:t,size:e,bar:n},r){const s={},i=`translate${n.axis}(${t}px)`;return s[n.size]=e,s.transform=i,r==="horizontal"?s.height="100%":s.width="100%",s}const uy=se({name:"ElVirtualScrollBar",props:xP,emits:["scroll","start-move","stop-move"],setup(t,{emit:e}){const n=L(()=>t.startGap+t.endGap),r=Oe("virtual-scrollbar"),s=Oe("scrollbar"),i=H(),o=H();let a=null,u=null;const l=fn({isDragging:!1,traveled:0}),c=L(()=>yR[t.layout]),d=L(()=>t.clientSize-m(n)),f=L(()=>({position:"absolute",width:`${Du===t.layout?d.value:t.scrollbarSize}px`,height:`${Du===t.layout?t.scrollbarSize:d.value}px`,[loe[t.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),h=L(()=>{const x=t.ratio;if(x>=100)return Number.POSITIVE_INFINITY;if(x>=50)return x*d.value/100;const k=d.value/3;return Math.floor(Math.min(Math.max(x*d.value,uoe),k))}),p=L(()=>{if(!Number.isFinite(h.value))return{display:"none"};const x=`${h.value}px`;return hoe({bar:c.value,size:x,move:l.traveled},t.layout)}),g=L(()=>Math.ceil(t.clientSize-h.value-m(n))),v=()=>{window.addEventListener("mousemove",S),window.addEventListener("mouseup",b);const x=m(o);x&&(u=document.onselectstart,document.onselectstart=()=>!1,x.addEventListener("touchmove",S,{passive:!0}),x.addEventListener("touchend",b))},y=()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",b),document.onselectstart=u,u=null;const x=m(o);x&&(x.removeEventListener("touchmove",S),x.removeEventListener("touchend",b))},w=x=>{x.stopImmediatePropagation(),!(x.ctrlKey||[1,2].includes(x.button))&&(l.isDragging=!0,l[c.value.axis]=x.currentTarget[c.value.offset]-(x[c.value.client]-x.currentTarget.getBoundingClientRect()[c.value.direction]),e("start-move"),v())},b=()=>{l.isDragging=!1,l[c.value.axis]=0,e("stop-move"),y()},S=x=>{const{isDragging:k}=l;if(!k||!o.value||!i.value)return;const A=l[c.value.axis];if(!A)return;ml(a);const C=(i.value.getBoundingClientRect()[c.value.direction]-x[c.value.client])*-1,_=o.value[c.value.offset]-A,O=C-_;a=ka(()=>{l.traveled=Math.max(0,Math.min(O,g.value)),e("scroll",O,g.value)})},E=x=>{const k=Math.abs(x.target.getBoundingClientRect()[c.value.direction]-x[c.value.client]),A=o.value[c.value.offset]/2,C=k-A;l.traveled=Math.max(0,Math.min(C,g.value)),e("scroll",C,g.value)};return Ie(()=>t.scrollFrom,x=>{l.isDragging||(l.traveled=Math.ceil(x*g.value))}),In(()=>{y()}),()=>bt("div",{role:"presentation",ref:i,class:[r.b(),t.class,(t.alwaysOn||l.isDragging)&&"always-on"],style:f.value,onMousedown:wt(E,["stop","prevent"]),onTouchstartPrevent:w},bt("div",{ref:o,class:s.e("thumb"),style:p.value,onMousedown:w},[]))}}),TP=({name:t,getOffset:e,getItemSize:n,getItemOffset:r,getEstimatedTotalSize:s,getStartIndexForOffset:i,getStopIndexForStartIndex:o,initCache:a,clearCache:u,validateProps:l})=>se({name:t??"ElVirtualList",props:SP,emits:[Up,Hp],setup(c,{emit:d,expose:f}){l(c);const h=Kt(),p=Oe("vl"),g=H(a(c,h)),v=vP(),y=H(),w=H(),b=H(),S=H({isScrolling:!1,scrollDir:"forward",scrollOffset:vt(c.initScrollOffset)?c.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:c.scrollbarAlwaysOn}),E=L(()=>{const{total:X,cache:te}=c,{isScrolling:ue,scrollDir:he,scrollOffset:Z}=m(S);if(X===0)return[0,0,0,0];const ce=i(c,Z,m(g)),ae=o(c,ce,Z,m(g)),Te=!ue||he===jp?Math.max(1,te):1,Ce=!ue||he===Gl?Math.max(1,te):1;return[Math.max(0,ce-Te),Math.max(0,Math.min(X-1,ae+Ce)),ce,ae]}),x=L(()=>s(c,m(g))),k=L(()=>Dd(c.layout)),A=L(()=>[{position:"relative",[`overflow-${k.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:c.direction,height:vt(c.height)?`${c.height}px`:c.height,width:vt(c.width)?`${c.width}px`:c.width},c.style]),C=L(()=>{const X=m(x),te=m(k);return{height:te?"100%":`${X}px`,pointerEvents:m(S).isScrolling?"none":void 0,width:te?`${X}px`:"100%"}}),_=L(()=>k.value?c.width:c.height),{onWheel:O}=doe({atStartEdge:L(()=>S.value.scrollOffset<=0),atEndEdge:L(()=>S.value.scrollOffset>=x.value),layout:L(()=>c.layout)},X=>{var te,ue;(ue=(te=b.value).onMouseUp)==null||ue.call(te),V(Math.min(S.value.scrollOffset+X,x.value-_.value))});Cn(y,"wheel",O,{passive:!1});const P=()=>{const{total:X}=c;if(X>0){const[Z,ce,ae,Te]=m(E);d(Up,Z,ce,ae,Te)}const{scrollDir:te,scrollOffset:ue,updateRequested:he}=m(S);d(Hp,te,ue,he)},U=X=>{const{clientHeight:te,scrollHeight:ue,scrollTop:he}=X.currentTarget,Z=m(S);if(Z.scrollOffset===he)return;const ce=Math.max(0,Math.min(he,ue-te));S.value={...Z,isScrolling:!0,scrollDir:Za(Z.scrollOffset,ce),scrollOffset:ce,updateRequested:!1},ft(K)},j=X=>{const{clientWidth:te,scrollLeft:ue,scrollWidth:he}=X.currentTarget,Z=m(S);if(Z.scrollOffset===ue)return;const{direction:ce}=c;let ae=ue;if(ce===lu)switch(zp()){case Pd:{ae=-ue;break}case z1:{ae=he-te-ue;break}}ae=Math.max(0,Math.min(ae,he-te)),S.value={...Z,isScrolling:!0,scrollDir:Za(Z.scrollOffset,ae),scrollOffset:ae,updateRequested:!1},ft(K)},N=X=>{m(k)?j(X):U(X),P()},R=(X,te)=>{const ue=(x.value-_.value)/te*X;V(Math.min(x.value-_.value,ue))},V=X=>{X=Math.max(X,0),X!==m(S).scrollOffset&&(S.value={...m(S),scrollOffset:X,scrollDir:Za(m(S).scrollOffset,X),updateRequested:!0},ft(K))},D=(X,te=ei)=>{const{scrollOffset:ue}=m(S);X=Math.max(0,Math.min(X,c.total-1)),V(e(c,X,te,ue,m(g)))},M=X=>{const{direction:te,itemSize:ue,layout:he}=c,Z=v.value(u&&ue,u&&he,u&&te);let ce;if(hn(Z,String(X)))ce=Z[X];else{const ae=r(c,X,m(g)),Te=n(c,X,m(g)),Ce=m(k),z=te===lu,re=Ce?ae:0;Z[X]=ce={position:"absolute",left:z?void 0:`${re}px`,right:z?`${re}px`:void 0,top:Ce?0:`${ae}px`,height:Ce?"100%":`${Te}px`,width:Ce?`${Te}px`:"100%"}}return ce},K=()=>{S.value.isScrolling=!1,ft(()=>{v.value(-1,null,null)})},q=()=>{const X=y.value;X&&(X.scrollTop=0)};Ft(()=>{if(!on)return;const{initScrollOffset:X}=c,te=m(y);vt(X)&&te&&(m(k)?te.scrollLeft=X:te.scrollTop=X),P()}),ki(()=>{const{direction:X,layout:te}=c,{scrollOffset:ue,updateRequested:he}=m(S),Z=m(y);if(he&&Z)if(te===Du)if(X===lu)switch(zp()){case Pd:{Z.scrollLeft=-ue;break}case K1:{Z.scrollLeft=ue;break}default:{const{clientWidth:ce,scrollWidth:ae}=Z;Z.scrollLeft=ae-ce-ue;break}}else Z.scrollLeft=ue;else Z.scrollTop=ue}),lm(()=>{m(y).scrollTop=m(S).scrollOffset});const ee={ns:p,clientSize:_,estimatedTotalSize:x,windowStyle:A,windowRef:y,innerRef:w,innerStyle:C,itemsToRender:E,scrollbarRef:b,states:S,getItemStyle:M,onScroll:N,onScrollbarScroll:R,onWheel:O,scrollTo:V,scrollToItem:D,resetScrollTop:q};return f({windowRef:y,innerRef:w,getItemStyleCache:v,scrollTo:V,scrollToItem:D,resetScrollTop:q,states:S}),ee},render(c){var d;const{$slots:f,className:h,clientSize:p,containerElement:g,data:v,getItemStyle:y,innerElement:w,itemsToRender:b,innerStyle:S,layout:E,total:x,onScroll:k,onScrollbarScroll:A,states:C,useIsScrolling:_,windowStyle:O,ns:P}=c,[U,j]=b,N=jt(g),R=jt(w),V=[];if(x>0)for(let q=U;q<=j;q++)V.push(bt(dt,{key:q},(d=f.default)==null?void 0:d.call(f,{data:v,index:q,isScrolling:_?C.isScrolling:void 0,style:y(q)})));const D=[bt(R,{style:S,ref:"innerRef"},ut(R)?V:{default:()=>V})],M=bt(uy,{ref:"scrollbarRef",clientSize:p,layout:E,onScroll:A,ratio:p*100/this.estimatedTotalSize,scrollFrom:C.scrollOffset/(this.estimatedTotalSize-p),total:x}),K=bt(N,{class:[P.e("window"),h],style:O,onScroll:k,ref:"windowRef",key:0},ut(N)?[D]:{default:()=>[D]});return bt("div",{key:0,class:[P.e("wrapper"),C.scrollbarAlwaysOn?"always-on":""]},[K,M])}}),CP=TP({name:"ElFixedSizeList",getItemOffset:({itemSize:t},e)=>e*t,getItemSize:({itemSize:t})=>t,getEstimatedTotalSize:({total:t,itemSize:e})=>e*t,getOffset:({height:t,total:e,itemSize:n,layout:r,width:s},i,o,a)=>{const u=Dd(r)?s:t,l=Math.max(0,e*n-u),c=Math.min(l,i*n),d=Math.max(0,(i+1)*n-u);switch(o===Ym&&(a>=d-u&&a<=c+u?o=ei:o=qi),o){case Rd:return c;case Ld:return d;case qi:{const f=Math.round(d+(c-d)/2);return f<Math.ceil(u/2)?0:f>l+Math.floor(u/2)?l:f}case ei:default:return a>=d&&a<=c?a:a<d?d:c}},getStartIndexForOffset:({total:t,itemSize:e},n)=>Math.max(0,Math.min(t-1,Math.floor(n/e))),getStopIndexForStartIndex:({height:t,total:e,itemSize:n,layout:r,width:s},i,o)=>{const a=i*n,u=Dd(r)?s:t,l=Math.ceil((u+o-a)/n);return Math.max(0,Math.min(e-1,i+l-1))},initCache(){},clearCache:!0,validateProps(){}}),ql=(t,e,n)=>{const{itemSize:r}=t,{items:s,lastVisitedIndex:i}=n;if(e>i){let o=0;if(i>=0){const a=s[i];o=a.offset+a.size}for(let a=i+1;a<=e;a++){const u=r(a);s[a]={offset:o,size:u},o+=u}n.lastVisitedIndex=e}return s[e]},poe=(t,e,n)=>{const{items:r,lastVisitedIndex:s}=e;return(s>0?r[s].offset:0)>=n?kP(t,e,0,s,n):moe(t,e,Math.max(0,s),n)},kP=(t,e,n,r,s)=>{for(;n<=r;){const i=n+Math.floor((r-n)/2),o=ql(t,i,e).offset;if(o===s)return i;o<s?n=i+1:o>s&&(r=i-1)}return Math.max(0,n-1)},moe=(t,e,n,r)=>{const{total:s}=t;let i=1;for(;n<s&&ql(t,n,e).offset<r;)n+=i,i*=2;return kP(t,e,Math.floor(n/2),Math.min(n,s-1),r)},BC=({total:t},{items:e,estimatedItemSize:n,lastVisitedIndex:r})=>{let s=0;if(r>=t&&(r=t-1),r>=0){const a=e[r];s=a.offset+a.size}const o=(t-r-1)*n;return s+o},goe=TP({name:"ElDynamicSizeList",getItemOffset:(t,e,n)=>ql(t,e,n).offset,getItemSize:(t,e,{items:n})=>n[e].size,getEstimatedTotalSize:BC,getOffset:(t,e,n,r,s)=>{const{height:i,layout:o,width:a}=t,u=Dd(o)?a:i,l=ql(t,e,s),c=BC(t,s),d=Math.max(0,Math.min(c-u,l.offset)),f=Math.max(0,l.offset-u+l.size);switch(n===Ym&&(r>=f-u&&r<=d+u?n=ei:n=qi),n){case Rd:return d;case Ld:return f;case qi:return Math.round(f+(d-f)/2);case ei:default:return r>=f&&r<=d?r:r<f?f:d}},getStartIndexForOffset:(t,e,n)=>poe(t,n,e),getStopIndexForStartIndex:(t,e,n,r)=>{const{height:s,total:i,layout:o,width:a}=t,u=Dd(o)?a:s,l=ql(t,e,r),c=n+u;let d=l.offset+l.size,f=e;for(;f<i-1&&d<c;)f++,d+=ql(t,f,r).size;return f},initCache({estimatedItemSize:t=ry},e){const n={items:{},estimatedItemSize:t,lastVisitedIndex:-1};return n.clearCacheAfterIndex=(r,s=!0)=>{var i,o;n.lastVisitedIndex=Math.min(n.lastVisitedIndex,r-1),(i=e.exposed)==null||i.getItemStyleCache(-1),s&&((o=e.proxy)==null||o.$forceUpdate())},n},clearCache:!1,validateProps:({itemSize:t})=>{}}),voe={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number};var yoe=se({name:"ElSelectDropdown",props:voe,setup(t,{slots:e,expose:n}){const r=nt(H1),s=Oe("select"),{getLabel:i,getValue:o,getDisabled:a}=qm(r.props),u=H([]),l=H(),c=L(()=>t.data.length);Ie(()=>c.value,()=>{var O,P;(P=(O=r.tooltipRef.value)==null?void 0:O.updatePopper)==null||P.call(O)});const d=L(()=>an(r.props.estimatedOptionHeight)),f=L(()=>d.value?{itemSize:r.props.itemHeight}:{estimatedSize:r.props.estimatedOptionHeight,itemSize:O=>u.value[O]}),h=(O=[],P)=>{const{props:{valueKey:U}}=r;return Bt(P)?O&&O.some(j=>Rn(sr(j,U))===sr(P,U)):O.includes(P)},p=(O,P)=>{if(Bt(P)){const{valueKey:U}=r.props;return sr(O,U)===sr(P,U)}else return O===P},g=(O,P)=>r.props.multiple?h(O,o(P)):p(O,o(P)),v=(O,P)=>{const{disabled:U,multiple:j,multipleLimit:N}=r.props;return U||!P&&(j?N>0&&O.length>=N:!1)},y=O=>t.hoveringIndex===O;n({listRef:l,isSized:d,isItemDisabled:v,isItemHovering:y,isItemSelected:g,scrollToItem:O=>{const P=l.value;P&&P.scrollToItem(O)},resetScrollTop:()=>{const O=l.value;O&&O.resetScrollTop()}});const E=O=>{const{index:P,data:U,style:j}=O,N=m(d),{itemSize:R,estimatedSize:V}=m(f),{modelValue:D}=r.props,{onSelect:M,onHover:K}=r,q=U[P];if(q.type==="Group")return ie(Yie,{item:q,style:j,height:N?R:V},null);const ee=g(D,q),X=v(D,ee),te=y(P);return ie(roe,Yt(O,{selected:ee,disabled:a(q)||X,created:!!q.created,hovering:te,item:q,onSelect:M,onHover:K}),{default:ue=>{var he;return((he=e.default)==null?void 0:he.call(e,ue))||ie("span",null,[i(q)])}})},{onKeyboardNavigate:x,onKeyboardSelect:k}=r,A=()=>{x("forward")},C=()=>{x("backward")},_=O=>{const{code:P}=O,{tab:U,esc:j,down:N,up:R,enter:V,numpadEnter:D}=it;switch([j,N,R,V,D].includes(P)&&(O.preventDefault(),O.stopPropagation()),P){case U:case j:break;case N:A();break;case R:C();break;case V:case D:k();break}};return()=>{var O,P,U,j;const{data:N,width:R}=t,{height:V,multiple:D,scrollbarAlwaysOn:M}=r.props,K=L(()=>Lp?!0:M),q=m(d)?CP:goe;return ie("div",{class:[s.b("dropdown"),s.is("multiple",D)],style:{width:`${R}px`}},[(O=e.header)==null?void 0:O.call(e),((P=e.loading)==null?void 0:P.call(e))||((U=e.empty)==null?void 0:U.call(e))||ie(q,Yt({ref:l},m(f),{className:s.be("dropdown","list"),scrollbarAlwaysOn:K.value,data:N,height:V,width:R,total:N.length,onKeydown:_}),{default:ee=>ie(E,ee,null)}),(j=e.footer)==null?void 0:j.call(e)])}}});function boe(t,e){const{aliasProps:n,getLabel:r,getValue:s}=qm(t),i=H(0),o=H(),a=L(()=>t.allowCreate&&t.filterable);function u(h){const p=g=>r(g)===h;return t.options&&t.options.some(p)||e.createdOptions.some(p)}function l(h){a.value&&(t.multiple&&h.created?i.value++:o.value=h)}function c(h){if(a.value)if(h&&h.length>0){if(u(h))return;const p={[n.value.value]:h,[n.value.label]:h,created:!0,[n.value.disabled]:!1};e.createdOptions.length>=i.value?e.createdOptions[i.value]=p:e.createdOptions.push(p)}else if(t.multiple)e.createdOptions.length=i.value;else{const p=o.value;e.createdOptions.length=0,p&&p.created&&e.createdOptions.push(p)}}function d(h){if(!a.value||!h||!h.created||h.created&&t.reserveKeyword&&e.inputValue===r(h))return;const p=e.createdOptions.findIndex(g=>s(g)===s(h));~p&&(e.createdOptions.splice(p,1),i.value--)}function f(){a.value&&(e.createdOptions.length=0,i.value=0)}return{createNewOption:c,removeNewOption:d,selectNewOption:l,clearAllNewOption:f}}const Soe=(t,e)=>{const{t:n}=sn(),r=Oe("select"),s=Oe("input"),{form:i,formItem:o}=Ur(),{inputId:a}=ci(t,{formItemContext:o}),{aliasProps:u,getLabel:l,getValue:c,getDisabled:d,getOptions:f}=qm(t),{valueOnClear:h,isEmptyValue:p}=Mm(t),g=fn({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),v=H(-1),y=H(),w=H(),b=H(),S=H(),E=H(),x=H(),k=H(),A=H(),C=H(),_=H(),{isComposing:O,handleCompositionStart:P,handleCompositionEnd:U,handleCompositionUpdate:j}=ef({afterComposition:Qe=>hr(Qe)}),{wrapperRef:N,isFocused:R,handleBlur:V}=Pa(E,{beforeFocus(){return ee.value},afterFocus(){t.automaticDropdown&&!q.value&&(q.value=!0,g.menuVisibleOnFocus=!0)},beforeBlur(Qe){var gt,Gt;return((gt=b.value)==null?void 0:gt.isFocusInsideContent(Qe))||((Gt=S.value)==null?void 0:Gt.isFocusInsideContent(Qe))},afterBlur(){var Qe;q.value=!1,g.menuVisibleOnFocus=!1,t.validateEvent&&((Qe=o==null?void 0:o.validate)==null||Qe.call(o,"blur").catch(gt=>void 0))}}),D=L(()=>re("")),M=L(()=>t.loading?!1:t.options.length>0||g.createdOptions.length>0),K=H([]),q=H(!1),ee=L(()=>t.disabled||(i==null?void 0:i.disabled)),X=L(()=>{var Qe;return(Qe=i==null?void 0:i.statusIcon)!=null?Qe:!1}),te=L(()=>{const Qe=K.value.length*t.itemHeight;return Qe>t.height?t.height:Qe}),ue=L(()=>t.multiple?Ve(t.modelValue)&&t.modelValue.length>0:!p(t.modelValue)),he=L(()=>t.clearable&&!ee.value&&g.inputHovering&&ue.value),Z=L(()=>t.remote&&t.filterable?"":t.suffixIcon),ce=L(()=>Z.value&&r.is("reverse",q.value)),ae=L(()=>(o==null?void 0:o.validateState)||""),Te=L(()=>{if(ae.value)return Fm[ae.value]}),Ce=L(()=>t.remote?300:0),z=L(()=>t.loading?t.loadingText||n("el.select.loading"):t.remote&&!g.inputValue&&!M.value?!1:t.filterable&&g.inputValue&&M.value&&K.value.length===0?t.noMatchText||n("el.select.noMatch"):M.value?null:t.noDataText||n("el.select.noData")),re=Qe=>{const gt=new RegExp(E1(Qe),"i"),Gt=t.filterable&&pt(t.filterMethod),rn=t.filterable&&t.remote&&pt(t.remoteMethod),vr=yr=>Gt||rn?!0:Qe?gt.test(l(yr)||""):!0;return t.loading?[]:[...g.createdOptions,...t.options].reduce((yr,zs)=>{const fi=f(zs);if(Ve(fi)){const Go=fi.filter(vr);Go.length>0&&yr.push({label:l(zs),type:"Group"},...Go)}else(t.remote||vr(zs))&&yr.push(zs);return yr},[])},ve=()=>{K.value=re(g.inputValue)},ke=L(()=>{const Qe=new Map;return D.value.forEach((gt,Gt)=>{Qe.set(ir(c(gt)),{option:gt,index:Gt})}),Qe}),Ee=L(()=>{const Qe=new Map;return K.value.forEach((gt,Gt)=>{Qe.set(ir(c(gt)),{option:gt,index:Gt})}),Qe}),be=L(()=>K.value.every(Qe=>d(Qe))),Se=ur(),_e=L(()=>Se.value==="small"?"small":"default"),Ne=()=>{var Qe;if(vt(t.fitInputWidth)){v.value=t.fitInputWidth;return}const gt=((Qe=y.value)==null?void 0:Qe.offsetWidth)||200;!t.fitInputWidth&&M.value?ft(()=>{v.value=Math.max(gt,Me())}):v.value=gt},Me=()=>{var Qe,gt;const rn=document.createElement("canvas").getContext("2d"),vr=r.be("dropdown","item"),zs=(((gt=(Qe=A.value)==null?void 0:Qe.listRef)==null?void 0:gt.innerRef)||document).querySelector(`.${vr}`);if(zs===null||rn===null)return 0;const fi=getComputedStyle(zs),Go=Number.parseFloat(fi.paddingLeft)+Number.parseFloat(fi.paddingRight);return rn.font=`bold ${fi.font.replace(new RegExp(`\\b${fi.fontWeight}\\b`),"")}`,K.value.reduce((cf,Tl)=>{const df=rn.measureText(l(Tl));return Math.max(df.width,cf)},0)+Go},st=()=>{if(!w.value)return 0;const Qe=window.getComputedStyle(w.value);return Number.parseFloat(Qe.gap||"6px")},qe=L(()=>{const Qe=st();return{maxWidth:`${_.value&&t.maxCollapseTags===1?g.selectionWidth-g.collapseItemWidth-Qe:g.selectionWidth}px`}}),Ae=L(()=>({maxWidth:`${g.selectionWidth}px`})),et=L(()=>Ve(t.modelValue)?t.modelValue.length===0&&!g.inputValue:t.filterable?!g.inputValue:!0),St=L(()=>{var Qe;const gt=(Qe=t.placeholder)!=null?Qe:n("el.select.placeholder");return t.multiple||!ue.value?gt:g.selectedLabel}),Lt=L(()=>{var Qe,gt;return(gt=(Qe=b.value)==null?void 0:Qe.popperRef)==null?void 0:gt.contentRef}),Pt=L(()=>{if(t.multiple){const Qe=t.modelValue.length;if(t.modelValue.length>0&&Ee.value.has(t.modelValue[Qe-1])){const{index:gt}=Ee.value.get(t.modelValue[Qe-1]);return gt}}else if(!p(t.modelValue)&&Ee.value.has(t.modelValue)){const{index:Qe}=Ee.value.get(t.modelValue);return Qe}return-1}),en=L({get(){return q.value&&z.value!==!1},set(Qe){q.value=Qe}}),zt=L(()=>t.multiple?t.collapseTags?g.cachedOptions.slice(0,t.maxCollapseTags):g.cachedOptions:[]),bn=L(()=>t.multiple?t.collapseTags?g.cachedOptions.slice(t.maxCollapseTags):[]:[]),{createNewOption:ht,removeNewOption:Nt,selectNewOption:fe,clearAllNewOption:Le}=boe(t,g),ne=()=>{ee.value||(g.menuVisibleOnFocus?g.menuVisibleOnFocus=!1:q.value=!q.value)},Ye=()=>{g.inputValue.length>0&&!q.value&&(q.value=!0),ht(g.inputValue),tn(g.inputValue)},Et=_s(Ye,Ce.value),tn=Qe=>{g.previousQuery===Qe||O.value||(g.previousQuery=Qe,t.filterable&&pt(t.filterMethod)?t.filterMethod(Qe):t.filterable&&t.remote&&pt(t.remoteMethod)&&t.remoteMethod(Qe),t.defaultFirstOption&&(t.filterable||t.remote)&&K.value.length?ft(ct):ft(Vn))},ct=()=>{const Qe=K.value.filter(rn=>!rn.disabled&&rn.type!=="Group"),gt=Qe.find(rn=>rn.created),Gt=Qe[0];g.hoveringIndex=As(K.value,gt||Gt)},Wt=Qe=>{Tr(t.modelValue,Qe)||e(Xt,Qe)},Fn=Qe=>{e(_t,Qe),Wt(Qe),g.previousValue=t.multiple?String(Qe):Qe,ft(()=>{if(t.multiple&&Ve(t.modelValue)){const gt=g.cachedOptions.slice(),Gt=t.modelValue.map(rn=>Kr(rn,gt));Tr(g.cachedOptions,Gt)||(g.cachedOptions=Gt)}else ao(!0)})},As=(Qe=[],gt)=>{if(!Bt(gt))return Qe.indexOf(gt);const Gt=t.valueKey;let rn=-1;return Qe.some((vr,yr)=>sr(vr,Gt)===sr(gt,Gt)?(rn=yr,!0):!1),rn},ir=Qe=>Bt(Qe)?sr(Qe,t.valueKey):Qe,jr=()=>{Ne()},yt=()=>{g.selectionWidth=Number.parseFloat(window.getComputedStyle(w.value).width)},ln=()=>{g.collapseItemWidth=_.value.getBoundingClientRect().width},Vt=()=>{var Qe,gt;(gt=(Qe=b.value)==null?void 0:Qe.updatePopper)==null||gt.call(Qe)},cr=()=>{var Qe,gt;(gt=(Qe=S.value)==null?void 0:Qe.updatePopper)==null||gt.call(Qe)},ms=Qe=>{if(t.multiple){let gt=t.modelValue.slice();const Gt=As(gt,c(Qe));Gt>-1?(gt=[...gt.slice(0,Gt),...gt.slice(Gt+1)],g.cachedOptions.splice(Gt,1),Nt(Qe)):(t.multipleLimit<=0||gt.length<t.multipleLimit)&&(gt=[...gt,c(Qe)],g.cachedOptions.push(Qe),fe(Qe)),Fn(gt),Qe.created&&tn(""),t.filterable&&!t.reserveKeyword&&(g.inputValue="")}else g.selectedLabel=l(Qe),Fn(c(Qe)),q.value=!1,fe(Qe),Qe.created||Le();Bn()},Is=(Qe,gt)=>{let Gt=t.modelValue.slice();const rn=As(Gt,c(gt));rn>-1&&!ee.value&&(Gt=[...t.modelValue.slice(0,rn),...t.modelValue.slice(rn+1)],g.cachedOptions.splice(rn,1),Fn(Gt),e("remove-tag",c(gt)),Nt(gt)),Qe.stopPropagation(),Bn()},Bn=()=>{var Qe;(Qe=E.value)==null||Qe.focus()},or=()=>{var Qe;if(q.value){q.value=!1,ft(()=>{var gt;return(gt=E.value)==null?void 0:gt.blur()});return}(Qe=E.value)==null||Qe.blur()},tc=()=>{g.inputValue.length>0?g.inputValue="":q.value=!1},Ko=Qe=>YI(Qe,gt=>!g.cachedOptions.some(Gt=>c(Gt)===gt&&d(Gt))),zo=Qe=>{if(t.multiple&&Qe.code!==it.delete&&g.inputValue.length===0){Qe.preventDefault();const gt=t.modelValue.slice(),Gt=Ko(gt);if(Gt<0)return;const rn=gt[Gt];gt.splice(Gt,1);const vr=g.cachedOptions[Gt];g.cachedOptions.splice(Gt,1),Nt(vr),Fn(gt),e("remove-tag",rn)}},Wo=()=>{let Qe;Ve(t.modelValue)?Qe=[]:Qe=h.value,g.selectedLabel="",q.value=!1,Fn(Qe),e("clear"),Le(),Bn()},Ze=(Qe,gt=void 0)=>{const Gt=K.value;if(!["forward","backward"].includes(Qe)||ee.value||Gt.length<=0||be.value||O.value)return;if(!q.value)return ne();an(gt)&&(gt=g.hoveringIndex);let rn=-1;Qe==="forward"?(rn=gt+1,rn>=Gt.length&&(rn=0)):Qe==="backward"&&(rn=gt-1,(rn<0||rn>=Gt.length)&&(rn=Gt.length-1));const vr=Gt[rn];if(d(vr)||vr.type==="Group")return Ze(Qe,rn);g.hoveringIndex=rn,di(rn)},Ct=()=>{if(q.value)~g.hoveringIndex&&K.value[g.hoveringIndex]&&ms(K.value[g.hoveringIndex]);else return ne()},dn=Qe=>{g.hoveringIndex=Qe??-1},Vn=()=>{t.multiple?g.hoveringIndex=K.value.findIndex(Qe=>t.modelValue.some(gt=>ir(gt)===ir(c(Qe)))):g.hoveringIndex=K.value.findIndex(Qe=>ir(c(Qe))===ir(t.modelValue))},hr=Qe=>{if(g.inputValue=Qe.target.value,t.remote)Et();else return Ye()},Pi=Qe=>{if(q.value=!1,R.value){const gt=new FocusEvent("focus",Qe);V(gt)}},wr=()=>(g.isBeforeHide=!1,ft(()=>{~Pt.value&&di(g.hoveringIndex)})),di=Qe=>{A.value.scrollToItem(Qe)},Kr=(Qe,gt)=>{const Gt=ir(Qe);if(ke.value.has(Gt)){const{option:rn}=ke.value.get(Gt);return rn}if(gt&&gt.length){const rn=gt.find(vr=>ir(c(vr))===Gt);if(rn)return rn}return{[u.value.value]:Qe,[u.value.label]:Qe}},ao=(Qe=!1)=>{if(t.multiple)if(t.modelValue.length>0){const gt=g.cachedOptions.slice();g.cachedOptions.length=0,g.previousValue=t.modelValue.toString();for(const Gt of t.modelValue){const rn=Kr(Gt,gt);g.cachedOptions.push(rn)}}else g.cachedOptions=[],g.previousValue=void 0;else if(ue.value){g.previousValue=t.modelValue;const gt=K.value,Gt=gt.findIndex(rn=>ir(c(rn))===ir(t.modelValue));~Gt?g.selectedLabel=l(gt[Gt]):(!g.selectedLabel||Qe)&&(g.selectedLabel=ir(t.modelValue))}else g.selectedLabel="",g.previousValue=void 0;Le(),Ne()};return Ie(()=>t.fitInputWidth,()=>{Ne()}),Ie(q,Qe=>{Qe?(t.persistent||Ne(),tn("")):(g.inputValue="",g.previousQuery=null,g.isBeforeHide=!0,ht("")),e("visible-change",Qe)}),Ie(()=>t.modelValue,(Qe,gt)=>{var Gt;(!Qe||Ve(Qe)&&Qe.length===0||t.multiple&&!Tr(Qe.toString(),g.previousValue)||!t.multiple&&ir(Qe)!==ir(g.previousValue))&&ao(!0),!Tr(Qe,gt)&&t.validateEvent&&((Gt=o==null?void 0:o.validate)==null||Gt.call(o,"change").catch(vr=>void 0))},{deep:!0}),Ie(()=>t.options,()=>{const Qe=E.value;(!Qe||Qe&&document.activeElement!==Qe)&&ao()},{deep:!0,flush:"post"}),Ie(()=>K.value,()=>(Ne(),A.value&&ft(A.value.resetScrollTop))),Fr(()=>{g.isBeforeHide||ve()}),Fr(()=>{const{valueKey:Qe,options:gt}=t,Gt=new Map;for(const rn of gt){const vr=c(rn);let yr=vr;if(Bt(yr)&&(yr=sr(vr,Qe)),Gt.get(yr))break;Gt.set(yr,!0)}}),Ft(()=>{ao()}),zn(y,jr),zn(w,yt),zn(A,Vt),zn(N,Vt),zn(C,cr),zn(_,ln),{inputId:a,collapseTagSize:_e,currentPlaceholder:St,expanded:q,emptyText:z,popupHeight:te,debounce:Ce,allOptions:D,filteredOptions:K,iconComponent:Z,iconReverse:ce,tagStyle:qe,collapseTagStyle:Ae,popperSize:v,dropdownMenuVisible:en,hasModelValue:ue,shouldShowPlaceholder:et,selectDisabled:ee,selectSize:Se,needStatusIcon:X,showClearBtn:he,states:g,isFocused:R,nsSelect:r,nsInput:s,inputRef:E,menuRef:A,tagMenuRef:C,tooltipRef:b,tagTooltipRef:S,selectRef:y,wrapperRef:N,selectionRef:w,prefixRef:x,suffixRef:k,collapseItemRef:_,popperRef:Lt,validateState:ae,validateIcon:Te,showTagList:zt,collapseTagList:bn,debouncedOnInputChange:Et,deleteTag:Is,getLabel:l,getValue:c,getDisabled:d,getValueKey:ir,handleClear:Wo,handleClickOutside:Pi,handleDel:zo,handleEsc:tc,focus:Bn,blur:or,handleMenuEnter:wr,handleResize:jr,resetSelectionWidth:yt,updateTooltip:Vt,updateTagTooltip:cr,updateOptions:ve,toggleMenu:ne,scrollTo:di,onInput:hr,onKeyboardNavigate:Ze,onKeyboardSelect:Ct,onSelect:ms,onHover:dn,handleCompositionStart:P,handleCompositionEnd:U,handleCompositionUpdate:j}},woe=se({name:"ElSelectV2",components:{ElSelectMenu:yoe,ElTag:Iu,ElTooltip:Vr,ElIcon:lt},directives:{ClickOutside:Oo},props:Qie,emits:Jie,setup(t,{emit:e}){const n=L(()=>{const{modelValue:a,multiple:u}=t,l=u?[]:void 0;return Ve(a)?u?a:l:u?l:a}),r=Soe(fn({..._r(t),modelValue:n}),e),{calculatorRef:s,inputStyle:i}=F1();Jt(H1,{props:fn({..._r(t),height:r.popupHeight,modelValue:n}),expanded:r.expanded,tooltipRef:r.tooltipRef,onSelect:r.onSelect,onHover:r.onHover,onKeyboardNavigate:r.onKeyboardNavigate,onKeyboardSelect:r.onKeyboardSelect});const o=L(()=>t.multiple?r.states.cachedOptions.map(a=>a.label):r.states.selectedLabel);return{...r,modelValue:n,selectedLabel:o,calculatorRef:s,inputStyle:i}}});function Eoe(t,e,n,r,s,i){const o=Mt("el-tag"),a=Mt("el-tooltip"),u=Mt("el-icon"),l=Mt("el-select-menu"),c=dm("click-outside");return Ot(($(),Y("div",{ref:"selectRef",class:F([t.nsSelect.b(),t.nsSelect.m(t.selectSize)]),onMouseenter:d=>t.states.inputHovering=!0,onMouseleave:d=>t.states.inputHovering=!1},[ie(a,{ref:"tooltipRef",visible:t.dropdownMenuVisible,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":t.popperOptions,"fallback-placements":t.fallbackPlacements,effect:t.effect,placement:t.placement,pure:"",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:t.persistent,"append-to":t.appendTo,"show-arrow":t.showArrow,offset:t.offset,onBeforeShow:t.handleMenuEnter,onHide:d=>t.states.isBeforeHide=!1},{default:le(()=>[J("div",{ref:"wrapperRef",class:F([t.nsSelect.e("wrapper"),t.nsSelect.is("focused",t.isFocused),t.nsSelect.is("hovering",t.states.inputHovering),t.nsSelect.is("filterable",t.filterable),t.nsSelect.is("disabled",t.selectDisabled)]),onClick:wt(t.toggleMenu,["prevent"])},[t.$slots.prefix?($(),Y("div",{key:0,ref:"prefixRef",class:F(t.nsSelect.e("prefix"))},[pe(t.$slots,"prefix")],2)):ge("v-if",!0),J("div",{ref:"selectionRef",class:F([t.nsSelect.e("selection"),t.nsSelect.is("near",t.multiple&&!t.$slots.prefix&&!!t.modelValue.length)])},[t.multiple?pe(t.$slots,"tag",{key:0},()=>[($(!0),Y(dt,null,Zt(t.showTagList,d=>($(),Y("div",{key:t.getValueKey(t.getValue(d)),class:F(t.nsSelect.e("selected-item"))},[ie(o,{closable:!t.selectDisabled&&!t.getDisabled(d),size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",style:mt(t.tagStyle),onClose:f=>t.deleteTag(f,d)},{default:le(()=>[J("span",{class:F(t.nsSelect.e("tags-text"))},[pe(t.$slots,"label",{label:t.getLabel(d),value:t.getValue(d)},()=>[Qt(ze(t.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),t.collapseTags&&t.modelValue.length>t.maxCollapseTags?($(),ye(a,{key:0,ref:"tagTooltipRef",disabled:t.dropdownMenuVisible||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:t.teleported},{default:le(()=>[J("div",{ref:"collapseItemRef",class:F(t.nsSelect.e("selected-item"))},[ie(o,{closable:!1,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,style:mt(t.collapseTagStyle),"disable-transitions":""},{default:le(()=>[J("span",{class:F(t.nsSelect.e("tags-text"))}," + "+ze(t.modelValue.length-t.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:le(()=>[J("div",{ref:"tagMenuRef",class:F(t.nsSelect.e("selection"))},[($(!0),Y(dt,null,Zt(t.collapseTagList,d=>($(),Y("div",{key:t.getValueKey(t.getValue(d)),class:F(t.nsSelect.e("selected-item"))},[ie(o,{class:"in-tooltip",closable:!t.selectDisabled&&!t.getDisabled(d),size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",onClose:f=>t.deleteTag(f,d)},{default:le(()=>[J("span",{class:F(t.nsSelect.e("tags-text"))},[pe(t.$slots,"label",{label:t.getLabel(d),value:t.getValue(d)},()=>[Qt(ze(t.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):ge("v-if",!0)]):ge("v-if",!0),J("div",{class:F([t.nsSelect.e("selected-item"),t.nsSelect.e("input-wrapper"),t.nsSelect.is("hidden",!t.filterable)])},[Ot(J("input",{id:t.inputId,ref:"inputRef","onUpdate:modelValue":d=>t.states.inputValue=d,style:mt(t.inputStyle),autocomplete:t.autocomplete,tabindex:t.tabindex,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":t.expanded,"aria-label":t.ariaLabel,class:F([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize)]),disabled:t.selectDisabled,role:"combobox",readonly:!t.filterable,spellcheck:"false",type:"text",name:t.name,onInput:t.onInput,onCompositionstart:t.handleCompositionStart,onCompositionupdate:t.handleCompositionUpdate,onCompositionend:t.handleCompositionEnd,onKeydown:[Sn(wt(d=>t.onKeyboardNavigate("backward"),["stop","prevent"]),["up"]),Sn(wt(d=>t.onKeyboardNavigate("forward"),["stop","prevent"]),["down"]),Sn(wt(t.onKeyboardSelect,["stop","prevent"]),["enter"]),Sn(wt(t.handleEsc,["stop","prevent"]),["esc"]),Sn(wt(t.handleDel,["stop"]),["delete"])],onClick:wt(t.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","autocomplete","tabindex","aria-expanded","aria-label","disabled","readonly","name","onInput","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown","onClick"]),[[pm,t.states.inputValue]]),t.filterable?($(),Y("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:F(t.nsSelect.e("input-calculator")),textContent:ze(t.states.inputValue)},null,10,["textContent"])):ge("v-if",!0)],2),t.shouldShowPlaceholder?($(),Y("div",{key:1,class:F([t.nsSelect.e("selected-item"),t.nsSelect.e("placeholder"),t.nsSelect.is("transparent",!t.hasModelValue||t.expanded&&!t.states.inputValue)])},[t.hasModelValue?pe(t.$slots,"label",{key:0,label:t.currentPlaceholder,value:t.modelValue},()=>[J("span",null,ze(t.currentPlaceholder),1)]):($(),Y("span",{key:1},ze(t.currentPlaceholder),1))],2)):ge("v-if",!0)],2),J("div",{ref:"suffixRef",class:F(t.nsSelect.e("suffix"))},[t.iconComponent?Ot(($(),ye(u,{key:0,class:F([t.nsSelect.e("caret"),t.nsInput.e("icon"),t.iconReverse])},{default:le(()=>[($(),ye(jt(t.iconComponent)))]),_:1},8,["class"])),[[cn,!t.showClearBtn]]):ge("v-if",!0),t.showClearBtn&&t.clearIcon?($(),ye(u,{key:1,class:F([t.nsSelect.e("caret"),t.nsInput.e("icon"),t.nsSelect.e("clear")]),onClick:wt(t.handleClear,["prevent","stop"])},{default:le(()=>[($(),ye(jt(t.clearIcon)))]),_:1},8,["class","onClick"])):ge("v-if",!0),t.validateState&&t.validateIcon&&t.needStatusIcon?($(),ye(u,{key:2,class:F([t.nsInput.e("icon"),t.nsInput.e("validateIcon"),t.nsInput.is("loading",t.validateState==="validating")])},{default:le(()=>[($(),ye(jt(t.validateIcon)))]),_:1},8,["class"])):ge("v-if",!0)],2)],10,["onClick"])]),content:le(()=>[ie(l,{ref:"menuRef",data:t.filteredOptions,width:t.popperSize,"hovering-index":t.states.hoveringIndex,"scrollbar-always-on":t.scrollbarAlwaysOn},ks({default:le(d=>[pe(t.$slots,"default",Ms(Qi(d)))]),_:2},[t.$slots.header?{name:"header",fn:le(()=>[J("div",{class:F(t.nsSelect.be("dropdown","header"))},[pe(t.$slots,"header")],2)])}:void 0,t.$slots.loading&&t.loading?{name:"loading",fn:le(()=>[J("div",{class:F(t.nsSelect.be("dropdown","loading"))},[pe(t.$slots,"loading")],2)])}:t.loading||t.filteredOptions.length===0?{name:"empty",fn:le(()=>[J("div",{class:F(t.nsSelect.be("dropdown","empty"))},[pe(t.$slots,"empty",{},()=>[J("span",null,ze(t.emptyText),1)])],2)])}:void 0,t.$slots.footer?{name:"footer",fn:le(()=>[J("div",{class:F(t.nsSelect.be("dropdown","footer"))},[pe(t.$slots,"footer")],2)])}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],42,["onMouseenter","onMouseleave"])),[[c,t.handleClickOutside,t.popperRef]])}var xoe=We(woe,[["render",Eoe],["__file","select.vue"]]);const Toe=Dt(xoe),Coe=Ke({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:de([Number,Object])}}),koe=Ke({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),_oe=se({name:"ElSkeletonItem"}),Aoe=se({..._oe,props:koe,setup(t){const e=Oe("skeleton");return(n,r)=>($(),Y("div",{class:F([m(e).e("item"),m(e).e(n.variant)])},[n.variant==="image"?($(),ye(m(KV),{key:0})):ge("v-if",!0)],2))}});var Wp=We(Aoe,[["__file","skeleton-item.vue"]]);const Ioe=(t,e=0)=>{if(e===0)return t;const n=Bt(e)&&!!e.initVal,r=H(n);let s=null;const i=a=>{if(an(a)){r.value=t.value;return}s&&clearTimeout(s),s=setTimeout(()=>{r.value=t.value},a)},o=a=>{a==="leading"?vt(e)?i(e):i(e.leading):Bt(e)?i(e.trailing):r.value=!1};return Ft(()=>o("leading")),Ie(()=>t.value,a=>{o(a?"leading":"trailing")}),r},Roe=se({name:"ElSkeleton"}),Loe=se({...Roe,props:Coe,setup(t,{expose:e}){const n=t,r=Oe("skeleton"),s=Ioe(En(n,"loading"),n.throttle);return e({uiLoading:s}),(i,o)=>m(s)?($(),Y("div",Yt({key:0,class:[m(r).b(),m(r).is("animated",i.animated)]},i.$attrs),[($(!0),Y(dt,null,Zt(i.count,a=>($(),Y(dt,{key:a},[m(s)?pe(i.$slots,"template",{key:a},()=>[ie(Wp,{class:F(m(r).is("first")),variant:"p"},null,8,["class"]),($(!0),Y(dt,null,Zt(i.rows,u=>($(),ye(Wp,{key:u,class:F([m(r).e("paragraph"),m(r).is("last",u===i.rows&&i.rows>1)]),variant:"p"},null,8,["class"]))),128))]):ge("v-if",!0)],64))),128))],16)):pe(i.$slots,"default",Ms(Yt({key:1},i.$attrs)))}});var Poe=We(Loe,[["__file","skeleton.vue"]]);const Doe=Dt(Poe,{SkeletonItem:Wp}),Ooe=Gn(Wp),_P=Symbol("sliderContextKey"),$oe=Ke({modelValue:{type:de([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:fr,inputSize:fr,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:de(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:de(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:jo,default:"top"},marks:{type:de(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...$r(["ariaLabel"])}),Pv=t=>vt(t)||Ve(t)&&t.every(vt),Moe={[_t]:Pv,[dr]:Pv,[Xt]:Pv},Noe=Ke({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:jo,default:"top"}}),Foe={[_t]:t=>vt(t)},Boe=(t,e,n)=>{const r=H(),s=H(!1),i=L(()=>e.value instanceof Function),o=L(()=>i.value&&e.value(t.modelValue)||t.modelValue),a=_s(()=>{n.value&&(s.value=!0)},50),u=_s(()=>{n.value&&(s.value=!1)},50);return{tooltip:r,tooltipVisible:s,formatValue:o,displayTooltip:a,hideTooltip:u}},Voe=(t,e,n)=>{const{disabled:r,min:s,max:i,step:o,showTooltip:a,persistent:u,precision:l,sliderSize:c,formatTooltip:d,emitChange:f,resetSize:h,updateDragging:p}=nt(_P),{tooltip:g,tooltipVisible:v,formatValue:y,displayTooltip:w,hideTooltip:b}=Boe(t,d,a),S=H(),E=L(()=>`${(t.modelValue-s.value)/(i.value-s.value)*100}%`),x=L(()=>t.vertical?{bottom:E.value}:{left:E.value}),k=()=>{e.hovering=!0,w()},A=()=>{e.hovering=!1,e.dragging||b()},C=X=>{r.value||(X.preventDefault(),M(X),window.addEventListener("mousemove",K),window.addEventListener("touchmove",K),window.addEventListener("mouseup",q),window.addEventListener("touchend",q),window.addEventListener("contextmenu",q),S.value.focus())},_=X=>{r.value||(e.newPosition=Number.parseFloat(E.value)+X/(i.value-s.value)*100,ee(e.newPosition),f())},O=()=>{_(-o.value)},P=()=>{_(o.value)},U=()=>{_(-o.value*4)},j=()=>{_(o.value*4)},N=()=>{r.value||(ee(0),f())},R=()=>{r.value||(ee(100),f())},V=X=>{let te=!0;switch(X.code){case it.left:case it.down:O();break;case it.right:case it.up:P();break;case it.home:N();break;case it.end:R();break;case it.pageDown:U();break;case it.pageUp:j();break;default:te=!1;break}te&&X.preventDefault()},D=X=>{let te,ue;return X.type.startsWith("touch")?(ue=X.touches[0].clientY,te=X.touches[0].clientX):(ue=X.clientY,te=X.clientX),{clientX:te,clientY:ue}},M=X=>{e.dragging=!0,e.isClick=!0;const{clientX:te,clientY:ue}=D(X);t.vertical?e.startY=ue:e.startX=te,e.startPosition=Number.parseFloat(E.value),e.newPosition=e.startPosition},K=X=>{if(e.dragging){e.isClick=!1,w(),h();let te;const{clientX:ue,clientY:he}=D(X);t.vertical?(e.currentY=he,te=(e.startY-e.currentY)/c.value*100):(e.currentX=ue,te=(e.currentX-e.startX)/c.value*100),e.newPosition=e.startPosition+te,ee(e.newPosition)}},q=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||b(),e.isClick||ee(e.newPosition),f()},0),window.removeEventListener("mousemove",K),window.removeEventListener("touchmove",K),window.removeEventListener("mouseup",q),window.removeEventListener("touchend",q),window.removeEventListener("contextmenu",q))},ee=async X=>{if(X===null||Number.isNaN(+X))return;X<0?X=0:X>100&&(X=100);const te=100/((i.value-s.value)/o.value);let he=Math.round(X/te)*te*(i.value-s.value)*.01+s.value;he=Number.parseFloat(he.toFixed(l.value)),he!==t.modelValue&&n(_t,he),!e.dragging&&t.modelValue!==e.oldValue&&(e.oldValue=t.modelValue),await ft(),e.dragging&&w(),g.value.updatePopper()};return Ie(()=>e.dragging,X=>{p(X)}),Cn(S,"touchstart",C,{passive:!1}),{disabled:r,button:S,tooltip:g,tooltipVisible:v,showTooltip:a,persistent:u,wrapperStyle:x,formatValue:y,handleMouseEnter:k,handleMouseLeave:A,onButtonDown:C,onKeyDown:V,setPosition:ee}},Uoe=se({name:"ElSliderButton"}),Hoe=se({...Uoe,props:Noe,emits:Foe,setup(t,{expose:e,emit:n}){const r=t,s=Oe("slider"),i=fn({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:r.modelValue}),o=L(()=>c.value?d.value:!1),{disabled:a,button:u,tooltip:l,showTooltip:c,persistent:d,tooltipVisible:f,wrapperStyle:h,formatValue:p,handleMouseEnter:g,handleMouseLeave:v,onButtonDown:y,onKeyDown:w,setPosition:b}=Voe(r,i,n),{hovering:S,dragging:E}=_r(i);return e({onButtonDown:y,onKeyDown:w,setPosition:b,hovering:S,dragging:E}),(x,k)=>($(),Y("div",{ref_key:"button",ref:u,class:F([m(s).e("button-wrapper"),{hover:m(S),dragging:m(E)}]),style:mt(m(h)),tabindex:m(a)?-1:0,onMouseenter:m(g),onMouseleave:m(v),onMousedown:m(y),onFocus:m(g),onBlur:m(v),onKeydown:m(w)},[ie(m(Vr),{ref_key:"tooltip",ref:l,visible:m(f),placement:x.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":x.tooltipClass,disabled:!m(c),persistent:m(o)},{content:le(()=>[J("span",null,ze(m(p)),1)]),default:le(()=>[J("div",{class:F([m(s).e("button"),{hover:m(S),dragging:m(E)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var VC=We(Hoe,[["__file","button.vue"]]);const joe=Ke({mark:{type:de([String,Object]),default:void 0}});var Koe=se({name:"ElSliderMarker",props:joe,setup(t){const e=Oe("slider"),n=L(()=>ut(t.mark)?t.mark:t.mark.label),r=L(()=>ut(t.mark)?void 0:t.mark.style);return()=>bt("div",{class:e.e("marks-text"),style:r.value},n.value)}});const zoe=(t,e,n)=>{const{form:r,formItem:s}=Ur(),i=On(),o=H(),a=H(),u={firstButton:o,secondButton:a},l=L(()=>t.disabled||(r==null?void 0:r.disabled)||!1),c=L(()=>Math.min(e.firstValue,e.secondValue)),d=L(()=>Math.max(e.firstValue,e.secondValue)),f=L(()=>t.range?`${100*(d.value-c.value)/(t.max-t.min)}%`:`${100*(e.firstValue-t.min)/(t.max-t.min)}%`),h=L(()=>t.range?`${100*(c.value-t.min)/(t.max-t.min)}%`:"0%"),p=L(()=>t.vertical?{height:t.height}:{}),g=L(()=>t.vertical?{height:f.value,bottom:h.value}:{width:f.value,left:h.value}),v=()=>{i.value&&(e.sliderSize=i.value[`client${t.vertical?"Height":"Width"}`])},y=P=>{const U=t.min+P*(t.max-t.min)/100;if(!t.range)return o;let j;return Math.abs(c.value-U)<Math.abs(d.value-U)?j=e.firstValue<e.secondValue?"firstButton":"secondButton":j=e.firstValue>e.secondValue?"firstButton":"secondButton",u[j]},w=P=>{const U=y(P);return U.value.setPosition(P),U},b=P=>{e.firstValue=P??t.min,E(t.range?[c.value,d.value]:P??t.min)},S=P=>{e.secondValue=P,t.range&&E([c.value,d.value])},E=P=>{n(_t,P),n(dr,P)},x=async()=>{await ft(),n(Xt,t.range?[c.value,d.value]:t.modelValue)},k=P=>{var U,j,N,R,V,D;if(l.value||e.dragging)return;v();let M=0;if(t.vertical){const K=(N=(j=(U=P.touches)==null?void 0:U.item(0))==null?void 0:j.clientY)!=null?N:P.clientY;M=(i.value.getBoundingClientRect().bottom-K)/e.sliderSize*100}else{const K=(D=(V=(R=P.touches)==null?void 0:R.item(0))==null?void 0:V.clientX)!=null?D:P.clientX,q=i.value.getBoundingClientRect().left;M=(K-q)/e.sliderSize*100}if(!(M<0||M>100))return w(M)};return{elFormItem:s,slider:i,firstButton:o,secondButton:a,sliderDisabled:l,minValue:c,maxValue:d,runwayStyle:p,barStyle:g,resetSize:v,setPosition:w,emitChange:x,onSliderWrapperPrevent:P=>{var U,j;((U=u.firstButton.value)!=null&&U.dragging||(j=u.secondButton.value)!=null&&j.dragging)&&P.preventDefault()},onSliderClick:P=>{k(P)&&x()},onSliderDown:async P=>{const U=k(P);U&&(await ft(),U.value.onButtonDown(P))},onSliderMarkerDown:P=>{if(l.value||e.dragging)return;w(P)&&x()},setFirstValue:b,setSecondValue:S}},Woe=(t,e,n,r)=>({stops:L(()=>{if(!t.showStops||t.min>t.max)return[];if(t.step===0)return[];const o=(t.max-t.min)/t.step,a=100*t.step/(t.max-t.min),u=Array.from({length:o-1}).map((l,c)=>(c+1)*a);return t.range?u.filter(l=>l<100*(n.value-t.min)/(t.max-t.min)||l>100*(r.value-t.min)/(t.max-t.min)):u.filter(l=>l>100*(e.firstValue-t.min)/(t.max-t.min))}),getStopStyle:o=>t.vertical?{bottom:`${o}%`}:{left:`${o}%`}}),Goe=t=>L(()=>t.marks?Object.keys(t.marks).map(Number.parseFloat).sort((n,r)=>n-r).filter(n=>n<=t.max&&n>=t.min).map(n=>({point:n,position:(n-t.min)*100/(t.max-t.min),mark:t.marks[n]})):[]),qoe=(t,e,n,r,s,i)=>{const o=l=>{s(_t,l),s(dr,l)},a=()=>t.range?![n.value,r.value].every((l,c)=>l===e.oldValue[c]):t.modelValue!==e.oldValue,u=()=>{var l,c;t.min>t.max&&lr("Slider","min should not be greater than max.");const d=t.modelValue;t.range&&Ve(d)?d[1]<t.min?o([t.min,t.min]):d[0]>t.max?o([t.max,t.max]):d[0]<t.min?o([t.min,d[1]]):d[1]>t.max?o([d[0],t.max]):(e.firstValue=d[0],e.secondValue=d[1],a()&&(t.validateEvent&&((l=i==null?void 0:i.validate)==null||l.call(i,"change").catch(f=>void 0)),e.oldValue=d.slice())):!t.range&&vt(d)&&!Number.isNaN(d)&&(d<t.min?o(t.min):d>t.max?o(t.max):(e.firstValue=d,a()&&(t.validateEvent&&((c=i==null?void 0:i.validate)==null||c.call(i,"change").catch(f=>void 0)),e.oldValue=d)))};u(),Ie(()=>e.dragging,l=>{l||u()}),Ie(()=>t.modelValue,(l,c)=>{e.dragging||Ve(l)&&Ve(c)&&l.every((d,f)=>d===c[f])&&e.firstValue===l[0]&&e.secondValue===l[1]||u()},{deep:!0}),Ie(()=>[t.min,t.max],()=>{u()})},Yoe=(t,e,n)=>{const r=H();return Ft(async()=>{t.range?(Ve(t.modelValue)?(e.firstValue=Math.max(t.min,t.modelValue[0]),e.secondValue=Math.min(t.max,t.modelValue[1])):(e.firstValue=t.min,e.secondValue=t.max),e.oldValue=[e.firstValue,e.secondValue]):(!vt(t.modelValue)||Number.isNaN(t.modelValue)?e.firstValue=t.min:e.firstValue=Math.min(t.max,Math.max(t.min,t.modelValue)),e.oldValue=e.firstValue),Cn(window,"resize",n),await ft(),n()}),{sliderWrapper:r}},Xoe=se({name:"ElSlider"}),Qoe=se({...Xoe,props:$oe,emits:Moe,setup(t,{expose:e,emit:n}){const r=t,s=Oe("slider"),{t:i}=sn(),o=fn({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:a,slider:u,firstButton:l,secondButton:c,sliderDisabled:d,minValue:f,maxValue:h,runwayStyle:p,barStyle:g,resetSize:v,emitChange:y,onSliderWrapperPrevent:w,onSliderClick:b,onSliderDown:S,onSliderMarkerDown:E,setFirstValue:x,setSecondValue:k}=zoe(r,o,n),{stops:A,getStopStyle:C}=Woe(r,o,f,h),{inputId:_,isLabeledByFormItem:O}=ci(r,{formItemContext:a}),P=ur(),U=L(()=>r.inputSize||P.value),j=L(()=>r.ariaLabel||i("el.slider.defaultLabel",{min:r.min,max:r.max})),N=L(()=>r.range?r.rangeStartLabel||i("el.slider.defaultRangeStartLabel"):j.value),R=L(()=>r.formatValueText?r.formatValueText(X.value):`${X.value}`),V=L(()=>r.rangeEndLabel||i("el.slider.defaultRangeEndLabel")),D=L(()=>r.formatValueText?r.formatValueText(te.value):`${te.value}`),M=L(()=>[s.b(),s.m(P.value),s.is("vertical",r.vertical),{[s.m("with-input")]:r.showInput}]),K=Goe(r);qoe(r,o,f,h,n,a);const q=L(()=>{const Z=[r.min,r.max,r.step].map(ce=>{const ae=`${ce}`.split(".")[1];return ae?ae.length:0});return Math.max.apply(null,Z)}),{sliderWrapper:ee}=Yoe(r,o,v),{firstValue:X,secondValue:te,sliderSize:ue}=_r(o),he=Z=>{o.dragging=Z};return Cn(ee,"touchstart",w,{passive:!1}),Cn(ee,"touchmove",w,{passive:!1}),Jt(_P,{..._r(r),sliderSize:ue,disabled:d,precision:q,emitChange:y,resetSize:v,updateDragging:he}),e({onSliderClick:b}),(Z,ce)=>{var ae,Te;return $(),Y("div",{id:Z.range?m(_):void 0,ref_key:"sliderWrapper",ref:ee,class:F(m(M)),role:Z.range?"group":void 0,"aria-label":Z.range&&!m(O)?m(j):void 0,"aria-labelledby":Z.range&&m(O)?(ae=m(a))==null?void 0:ae.labelId:void 0},[J("div",{ref_key:"slider",ref:u,class:F([m(s).e("runway"),{"show-input":Z.showInput&&!Z.range},m(s).is("disabled",m(d))]),style:mt(m(p)),onMousedown:m(S),onTouchstartPassive:m(S)},[J("div",{class:F(m(s).e("bar")),style:mt(m(g))},null,6),ie(VC,{id:Z.range?void 0:m(_),ref_key:"firstButton",ref:l,"model-value":m(X),vertical:Z.vertical,"tooltip-class":Z.tooltipClass,placement:Z.placement,role:"slider","aria-label":Z.range||!m(O)?m(N):void 0,"aria-labelledby":!Z.range&&m(O)?(Te=m(a))==null?void 0:Te.labelId:void 0,"aria-valuemin":Z.min,"aria-valuemax":Z.range?m(te):Z.max,"aria-valuenow":m(X),"aria-valuetext":m(R),"aria-orientation":Z.vertical?"vertical":"horizontal","aria-disabled":m(d),"onUpdate:modelValue":m(x)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),Z.range?($(),ye(VC,{key:0,ref_key:"secondButton",ref:c,"model-value":m(te),vertical:Z.vertical,"tooltip-class":Z.tooltipClass,placement:Z.placement,role:"slider","aria-label":m(V),"aria-valuemin":m(X),"aria-valuemax":Z.max,"aria-valuenow":m(te),"aria-valuetext":m(D),"aria-orientation":Z.vertical?"vertical":"horizontal","aria-disabled":m(d),"onUpdate:modelValue":m(k)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):ge("v-if",!0),Z.showStops?($(),Y("div",{key:1},[($(!0),Y(dt,null,Zt(m(A),(Ce,z)=>($(),Y("div",{key:z,class:F(m(s).e("stop")),style:mt(m(C)(Ce))},null,6))),128))])):ge("v-if",!0),m(K).length>0?($(),Y(dt,{key:2},[J("div",null,[($(!0),Y(dt,null,Zt(m(K),(Ce,z)=>($(),Y("div",{key:z,style:mt(m(C)(Ce.position)),class:F([m(s).e("stop"),m(s).e("marks-stop")])},null,6))),128))]),J("div",{class:F(m(s).e("marks"))},[($(!0),Y(dt,null,Zt(m(K),(Ce,z)=>($(),ye(m(Koe),{key:z,mark:Ce.mark,style:mt(m(C)(Ce.position)),onMousedown:wt(re=>m(E)(Ce.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):ge("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),Z.showInput&&!Z.range?($(),ye(m(oP),{key:0,ref:"input","model-value":m(X),class:F(m(s).e("input")),step:Z.step,disabled:m(d),controls:Z.showInputControls,min:Z.min,max:Z.max,precision:m(q),debounce:Z.debounce,size:m(U),"onUpdate:modelValue":m(x),onChange:m(y)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):ge("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var Zoe=We(Qoe,[["__file","slider.vue"]]);const Joe=Dt(Zoe),eae=Ke({prefixCls:{type:String}}),UC=se({name:"ElSpaceItem",props:eae,setup(t,{slots:e}){const n=Oe("space"),r=L(()=>`${t.prefixCls||n.b()}__item`);return()=>bt("div",{class:r.value},pe(e,"default"))}}),HC={small:8,default:12,large:16};function tae(t){const e=Oe("space"),n=L(()=>[e.b(),e.m(t.direction),t.class]),r=H(0),s=H(0),i=L(()=>{const a=t.wrap||t.fill?{flexWrap:"wrap"}:{},u={alignItems:t.alignment},l={rowGap:`${s.value}px`,columnGap:`${r.value}px`};return[a,u,l,t.style]}),o=L(()=>t.fill?{flexGrow:1,minWidth:`${t.fillRatio}%`}:{});return Fr(()=>{const{size:a="small",wrap:u,direction:l,fill:c}=t;if(Ve(a)){const[d=0,f=0]=a;r.value=d,s.value=f}else{let d;vt(a)?d=a:d=HC[a||"small"]||HC.small,(u||c)&&l==="horizontal"?r.value=s.value=d:l==="horizontal"?(r.value=d,s.value=0):(s.value=d,r.value=0)}}),{classes:n,containerStyle:i,itemStyle:o}}const nae=Ke({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:de([String,Object,Array]),default:""},style:{type:de([String,Array,Object]),default:""},alignment:{type:de(String),default:"center"},prefixCls:{type:String},spacer:{type:de([Object,String,Number,Array]),default:null,validator:t=>$n(t)||vt(t)||ut(t)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:so,validator:t=>vt(t)||Ve(t)&&t.length===2&&t.every(vt)}}),rae=se({name:"ElSpace",props:nae,setup(t,{slots:e}){const{classes:n,containerStyle:r,itemStyle:s}=tae(t);function i(o,a="",u=[]){const{prefixCls:l}=t;return o.forEach((c,d)=>{H0(c)?Ve(c.children)&&c.children.forEach((f,h)=>{H0(f)&&Ve(f.children)?i(f.children,`${a+h}-`,u):u.push(ie(UC,{style:s.value,prefixCls:l,key:`nested-${a+h}`},{default:()=>[f]},Xs.PROPS|Xs.STYLE,["style","prefixCls"]))}):MX(c)&&u.push(ie(UC,{style:s.value,prefixCls:l,key:`LoopKey${a+d}`},{default:()=>[c]},Xs.PROPS|Xs.STYLE,["style","prefixCls"]))}),u}return()=>{var o;const{spacer:a,direction:u}=t,l=pe(e,"default",{key:0},()=>[]);if(((o=l.children)!=null?o:[]).length===0)return null;if(Ve(l.children)){let c=i(l.children);if(a){const d=c.length-1;c=c.reduce((f,h,p)=>{const g=[...f,h];return p!==d&&g.push(ie("span",{style:[s.value,u==="vertical"?"width: 100%":null],key:p},[$n(a)?a:Qt(a,Xs.TEXT)],Xs.STYLE)),g},[])}return ie("div",{class:n.value,style:r.value},c,Xs.STYLE|Xs.CLASS)}return l.children}}}),sae=Dt(rae),iae=Ke({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:de([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:de([String,Object,Array])}}),oae=se({name:"ElStatistic"}),aae=se({...oae,props:iae,setup(t,{expose:e}){const n=t,r=Oe("statistic"),s=L(()=>{const{value:i,formatter:o,precision:a,decimalSeparator:u,groupSeparator:l}=n;if(pt(o))return o(i);if(!vt(i)||Number.isNaN(i))return i;let[c,d=""]=String(i).split(".");return d=d.padEnd(a,"0").slice(0,a>0?a:0),c=c.replace(/\B(?=(\d{3})+(?!\d))/g,l),[c,d].join(d?u:"")});return e({displayValue:s}),(i,o)=>($(),Y("div",{class:F(m(r).b())},[i.$slots.title||i.title?($(),Y("div",{key:0,class:F(m(r).e("head"))},[pe(i.$slots,"title",{},()=>[Qt(ze(i.title),1)])],2)):ge("v-if",!0),J("div",{class:F(m(r).e("content"))},[i.$slots.prefix||i.prefix?($(),Y("div",{key:0,class:F(m(r).e("prefix"))},[pe(i.$slots,"prefix",{},()=>[J("span",null,ze(i.prefix),1)])],2)):ge("v-if",!0),J("span",{class:F(m(r).e("number")),style:mt(i.valueStyle)},ze(m(s)),7),i.$slots.suffix||i.suffix?($(),Y("div",{key:1,class:F(m(r).e("suffix"))},[pe(i.$slots,"suffix",{},()=>[J("span",null,ze(i.suffix),1)])],2)):ge("v-if",!0)],2)],2))}});var lae=We(aae,[["__file","statistic.vue"]]);const AP=Dt(lae),uae=Ke({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:de([Number,Object]),default:0},valueStyle:{type:de([String,Object,Array])}}),cae={finish:()=>!0,[Xt]:t=>vt(t)},dae=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],jC=t=>vt(t)?new Date(t).getTime():t.valueOf(),KC=(t,e)=>{let n=t;const r=/\[([^\]]*)]/g;return dae.reduce((i,[o,a])=>{const u=new RegExp(`${o}+(?![^\\[\\]]*\\])`,"g");if(u.test(i)){const l=Math.floor(n/a);return n-=l*a,i.replace(u,c=>String(l).padStart(c.length,"0"))}return i},e).replace(r,"$1")},fae=se({name:"ElCountdown"}),hae=se({...fae,props:uae,emits:cae,setup(t,{expose:e,emit:n}){const r=t;let s;const i=H(0),o=L(()=>KC(i.value,r.format)),a=c=>KC(c,r.format),u=()=>{s&&(ml(s),s=void 0)},l=()=>{const c=jC(r.value),d=()=>{let f=c-Date.now();n(Xt,f),f<=0?(f=0,u(),n("finish")):s=ka(d),i.value=f};s=ka(d)};return Ft(()=>{i.value=jC(r.value)-Date.now(),Ie(()=>[r.value,r.format],()=>{u(),l()},{immediate:!0})}),In(()=>{u()}),e({displayValue:o}),(c,d)=>($(),ye(m(AP),{value:i.value,title:c.title,prefix:c.prefix,suffix:c.suffix,"value-style":c.valueStyle,formatter:a},ks({_:2},[Zt(c.$slots,(f,h)=>({name:h,fn:le(()=>[pe(c.$slots,h)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var pae=We(hae,[["__file","countdown.vue"]]);const mae=Dt(pae),gae=Ke({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),vae={[Xt]:(t,e)=>[t,e].every(vt)},yae=se({name:"ElSteps"}),bae=se({...yae,props:gae,emits:vae,setup(t,{emit:e}){const n=t,r=Oe("steps"),{children:s,addChild:i,removeChild:o}=S1(Kt(),"ElStep");return Ie(s,()=>{s.value.forEach((a,u)=>{a.setIndex(u)})}),Jt("ElSteps",{props:n,steps:s,addStep:i,removeStep:o}),Ie(()=>n.active,(a,u)=>{e(Xt,a,u)}),(a,u)=>($(),Y("div",{class:F([m(r).b(),m(r).m(a.simple?"simple":a.direction)])},[pe(a.$slots,"default")],2))}});var Sae=We(bae,[["__file","steps.vue"]]);const wae=Ke({title:{type:String,default:""},icon:{type:Tn},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),Eae=se({name:"ElStep"}),xae=se({...Eae,props:wae,setup(t){const e=t,n=Oe("step"),r=H(-1),s=H({}),i=H(""),o=nt("ElSteps"),a=Kt();Ft(()=>{Ie([()=>o.props.active,()=>o.props.processStatus,()=>o.props.finishStatus],([x])=>{S(x)},{immediate:!0})}),In(()=>{o.removeStep(E.uid)});const u=L(()=>e.status||i.value),l=L(()=>{const x=o.steps.value[r.value-1];return x?x.currentStatus:"wait"}),c=L(()=>o.props.alignCenter),d=L(()=>o.props.direction==="vertical"),f=L(()=>o.props.simple),h=L(()=>o.steps.value.length),p=L(()=>{var x;return((x=o.steps.value[h.value-1])==null?void 0:x.uid)===(a==null?void 0:a.uid)}),g=L(()=>f.value?"":o.props.space),v=L(()=>[n.b(),n.is(f.value?"simple":o.props.direction),n.is("flex",p.value&&!g.value&&!c.value),n.is("center",c.value&&!d.value&&!f.value)]),y=L(()=>{const x={flexBasis:vt(g.value)?`${g.value}px`:g.value?g.value:`${100/(h.value-(c.value?0:1))}%`};return d.value||p.value&&(x.maxWidth=`${100/h.value}%`),x}),w=x=>{r.value=x},b=x=>{const k=x==="wait",A={transitionDelay:`${k?"-":""}${150*r.value}ms`},C=x===o.props.processStatus||k?0:100;A.borderWidth=C&&!f.value?"1px":0,A[o.props.direction==="vertical"?"height":"width"]=`${C}%`,s.value=A},S=x=>{x>r.value?i.value=o.props.finishStatus:x===r.value&&l.value!=="error"?i.value=o.props.processStatus:i.value="wait";const k=o.steps.value[r.value-1];k&&k.calcProgress(i.value)},E=fn({uid:a.uid,currentStatus:u,setIndex:w,calcProgress:b});return o.addStep(E),(x,k)=>($(),Y("div",{style:mt(m(y)),class:F(m(v))},[ge(" icon & line "),J("div",{class:F([m(n).e("head"),m(n).is(m(u))])},[m(f)?ge("v-if",!0):($(),Y("div",{key:0,class:F(m(n).e("line"))},[J("i",{class:F(m(n).e("line-inner")),style:mt(s.value)},null,6)],2)),J("div",{class:F([m(n).e("icon"),m(n).is(x.icon||x.$slots.icon?"icon":"text")])},[pe(x.$slots,"icon",{},()=>[x.icon?($(),ye(m(lt),{key:0,class:F(m(n).e("icon-inner"))},{default:le(()=>[($(),ye(jt(x.icon)))]),_:1},8,["class"])):m(u)==="success"?($(),ye(m(lt),{key:1,class:F([m(n).e("icon-inner"),m(n).is("status")])},{default:le(()=>[ie(m(zd))]),_:1},8,["class"])):m(u)==="error"?($(),ye(m(lt),{key:2,class:F([m(n).e("icon-inner"),m(n).is("status")])},{default:le(()=>[ie(m(si))]),_:1},8,["class"])):m(f)?ge("v-if",!0):($(),Y("div",{key:3,class:F(m(n).e("icon-inner"))},ze(r.value+1),3))])],2)],2),ge(" title & description "),J("div",{class:F(m(n).e("main"))},[J("div",{class:F([m(n).e("title"),m(n).is(m(u))])},[pe(x.$slots,"title",{},()=>[Qt(ze(x.title),1)])],2),m(f)?($(),Y("div",{key:0,class:F(m(n).e("arrow"))},null,2)):($(),Y("div",{key:1,class:F([m(n).e("description"),m(n).is(m(u))])},[pe(x.$slots,"description",{},()=>[Qt(ze(x.description),1)])],2))],2)],6))}});var IP=We(xae,[["__file","item.vue"]]);const Tae=Dt(Sae,{Step:IP}),Cae=Gn(IP),RP=t=>["",...so].includes(t),kae=Ke({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:RP},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:Tn},activeActionIcon:{type:Tn},activeIcon:{type:Tn},inactiveIcon:{type:Tn},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:de(Function)},id:String,tabindex:{type:[String,Number]},...$r(["ariaLabel"])}),_ae={[_t]:t=>wn(t)||ut(t)||vt(t),[Xt]:t=>wn(t)||ut(t)||vt(t),[dr]:t=>wn(t)||ut(t)||vt(t)},LP="ElSwitch",Aae=se({name:LP}),Iae=se({...Aae,props:kae,emits:_ae,setup(t,{expose:e,emit:n}){const r=t,{formItem:s}=Ur(),i=ur(),o=Oe("switch"),{inputId:a}=ci(r,{formItemContext:s}),u=Hr(L(()=>r.loading)),l=H(r.modelValue!==!1),c=H(),d=H(),f=L(()=>[o.b(),o.m(i.value),o.is("disabled",u.value),o.is("checked",y.value)]),h=L(()=>[o.e("label"),o.em("label","left"),o.is("active",!y.value)]),p=L(()=>[o.e("label"),o.em("label","right"),o.is("active",y.value)]),g=L(()=>({width:Xn(r.width)}));Ie(()=>r.modelValue,()=>{l.value=!0});const v=L(()=>l.value?r.modelValue:!1),y=L(()=>v.value===r.activeValue);[r.activeValue,r.inactiveValue].includes(v.value)||(n(_t,r.inactiveValue),n(Xt,r.inactiveValue),n(dr,r.inactiveValue)),Ie(y,E=>{var x;c.value.checked=E,r.validateEvent&&((x=s==null?void 0:s.validate)==null||x.call(s,"change").catch(k=>void 0))});const w=()=>{const E=y.value?r.inactiveValue:r.activeValue;n(_t,E),n(Xt,E),n(dr,E),ft(()=>{c.value.checked=y.value})},b=()=>{if(u.value)return;const{beforeChange:E}=r;if(!E){w();return}const x=E();[ul(x),wn(x)].includes(!0)||lr(LP,"beforeChange must return type `Promise<boolean>` or `boolean`"),ul(x)?x.then(A=>{A&&w()}).catch(A=>{}):x&&w()},S=()=>{var E,x;(x=(E=c.value)==null?void 0:E.focus)==null||x.call(E)};return Ft(()=>{c.value.checked=y.value}),e({focus:S,checked:y}),(E,x)=>($(),Y("div",{class:F(m(f)),onClick:wt(b,["prevent"])},[J("input",{id:m(a),ref_key:"input",ref:c,class:F(m(o).e("input")),type:"checkbox",role:"switch","aria-checked":m(y),"aria-disabled":m(u),"aria-label":E.ariaLabel,name:E.name,"true-value":E.activeValue,"false-value":E.inactiveValue,disabled:m(u),tabindex:E.tabindex,onChange:w,onKeydown:Sn(b,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!E.inlinePrompt&&(E.inactiveIcon||E.inactiveText)?($(),Y("span",{key:0,class:F(m(h))},[E.inactiveIcon?($(),ye(m(lt),{key:0},{default:le(()=>[($(),ye(jt(E.inactiveIcon)))]),_:1})):ge("v-if",!0),!E.inactiveIcon&&E.inactiveText?($(),Y("span",{key:1,"aria-hidden":m(y)},ze(E.inactiveText),9,["aria-hidden"])):ge("v-if",!0)],2)):ge("v-if",!0),J("span",{ref_key:"core",ref:d,class:F(m(o).e("core")),style:mt(m(g))},[E.inlinePrompt?($(),Y("div",{key:0,class:F(m(o).e("inner"))},[E.activeIcon||E.inactiveIcon?($(),ye(m(lt),{key:0,class:F(m(o).is("icon"))},{default:le(()=>[($(),ye(jt(m(y)?E.activeIcon:E.inactiveIcon)))]),_:1},8,["class"])):E.activeText||E.inactiveText?($(),Y("span",{key:1,class:F(m(o).is("text")),"aria-hidden":!m(y)},ze(m(y)?E.activeText:E.inactiveText),11,["aria-hidden"])):ge("v-if",!0)],2)):ge("v-if",!0),J("div",{class:F(m(o).e("action"))},[E.loading?($(),ye(m(lt),{key:0,class:F(m(o).is("loading"))},{default:le(()=>[ie(m(Ji))]),_:1},8,["class"])):m(y)?pe(E.$slots,"active-action",{key:1},()=>[E.activeActionIcon?($(),ye(m(lt),{key:0},{default:le(()=>[($(),ye(jt(E.activeActionIcon)))]),_:1})):ge("v-if",!0)]):m(y)?ge("v-if",!0):pe(E.$slots,"inactive-action",{key:2},()=>[E.inactiveActionIcon?($(),ye(m(lt),{key:0},{default:le(()=>[($(),ye(jt(E.inactiveActionIcon)))]),_:1})):ge("v-if",!0)])],2)],6),!E.inlinePrompt&&(E.activeIcon||E.activeText)?($(),Y("span",{key:1,class:F(m(p))},[E.activeIcon?($(),ye(m(lt),{key:0},{default:le(()=>[($(),ye(jt(E.activeIcon)))]),_:1})):ge("v-if",!0),!E.activeIcon&&E.activeText?($(),Y("span",{key:1,"aria-hidden":!m(y)},ze(E.activeText),9,["aria-hidden"])):ge("v-if",!0)],2)):ge("v-if",!0)],10,["onClick"]))}});var Rae=We(Iae,[["__file","switch.vue"]]);const Lae=Dt(Rae),Dv=function(t){var e;return(e=t.target)==null?void 0:e.closest("td")},Pae=function(t,e,n,r,s){if(!e&&!r&&(!s||Ve(s)&&!s.length))return t;ut(n)?n=n==="descending"?-1:1:n=n&&n<0?-1:1;const i=r?null:function(a,u){return s?(Ve(s)||(s=[s]),s.map(l=>ut(l)?sr(a,l):l(a,u,t))):(e!=="$key"&&Bt(a)&&"$value"in a&&(a=a.$value),[Bt(a)?sr(a,e):a])},o=function(a,u){if(r)return r(a.value,u.value);for(let l=0,c=a.key.length;l<c;l++){if(a.key[l]<u.key[l])return-1;if(a.key[l]>u.key[l])return 1}return 0};return t.map((a,u)=>({value:a,index:u,key:i?i(a,u):null})).sort((a,u)=>{let l=o(a,u);return l||(l=a.index-u.index),l*+n}).map(a=>a.value)},PP=function(t,e){let n=null;return t.columns.forEach(r=>{r.id===e&&(n=r)}),n},Dae=function(t,e){let n=null;for(let r=0;r<t.columns.length;r++){const s=t.columns[r];if(s.columnKey===e){n=s;break}}return n||lr("ElTable",`No column matching with column-key: ${e}`),n},zC=function(t,e,n){const r=(e.className||"").match(new RegExp(`${n}-table_[^\\s]+`,"gm"));return r?PP(t,r[0]):null},Jr=(t,e)=>{if(!t)throw new Error("Row is required when get row identity");if(ut(e)){if(!e.includes("."))return`${t[e]}`;const n=e.split(".");let r=t;for(const s of n)r=r[s];return`${r}`}else if(pt(e))return e.call(null,t)},uu=function(t,e,n=!1,r="children"){const s=t||[],i={};return s.forEach((o,a)=>{if(i[Jr(o,e)]={row:o,index:a},n){const u=o[r];Ve(u)&&Object.assign(i,uu(u,e,!0,r))}}),i};function Oae(t,e){const n={};let r;for(r in t)n[r]=t[r];for(r in e)if(hn(e,r)){const s=e[r];an(s)||(n[r]=s)}return n}function W1(t){return t===""||an(t)||(t=Number.parseInt(t,10),Number.isNaN(t)&&(t="")),t}function DP(t){return t===""||an(t)||(t=W1(t),Number.isNaN(t)&&(t=80)),t}function $ae(t){return vt(t)?t:ut(t)?/^\d+(?:px)?$/.test(t)?Number.parseInt(t,10):t:null}function Mae(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Gp(t,e,n,r,s,i){let o=i??0,a=!1;const u=t.indexOf(e),l=u!==-1,c=s==null?void 0:s.call(null,e,o),d=h=>{h==="add"?t.push(e):t.splice(u,1),a=!0},f=h=>{let p=0;const g=(r==null?void 0:r.children)&&h[r.children];return g&&Ve(g)&&(p+=g.length,g.forEach(v=>{p+=f(v)})),p};return(!s||c)&&(wn(n)?n&&!l?d("add"):!n&&l&&d("remove"):d(l?"remove":"add")),!(r!=null&&r.checkStrictly)&&(r!=null&&r.children)&&Ve(e[r.children])&&e[r.children].forEach(h=>{const p=Gp(t,h,n??!l,r,s,o+1);o+=f(h)+1,p&&(a=p)}),a}function Nae(t,e,n="children",r="hasChildren"){const s=o=>!(Ve(o)&&o.length);function i(o,a,u){e(o,a,u),a.forEach(l=>{if(l[r]){e(l,null,u+1);return}const c=l[n];s(c)||i(l,c,u+1)})}t.forEach(o=>{if(o[r]){e(o,null,0);return}const a=o[n];s(a)||i(o,a,0)})}const Fae=(t,e,n,r)=>{const s={strategy:"fixed",...t.popperOptions},i=pt(r.tooltipFormatter)?r.tooltipFormatter({row:n,column:r,cellValue:zc(n,r.property).value}):void 0;return $n(i)?{slotContent:i,content:null,...t,popperOptions:s}:{slotContent:null,content:i??e,...t,popperOptions:s}};let bs=null;function Bae(t,e,n,r,s,i){const o=Fae(t,e,n,r),a={...o,slotContent:void 0};if((bs==null?void 0:bs.trigger)===s){const h=bs.vm.component;QI(h.props,a),o.slotContent&&(h.slots.content=()=>[o.slotContent]);return}bs==null||bs();const u=i==null?void 0:i.refs.tableWrapper,l=u==null?void 0:u.dataset.prefix,c=ie(Vr,{virtualTriggering:!0,virtualRef:s,appendTo:u,placement:"top",transition:"none",offset:0,hideAfter:0,...a},o.slotContent?{content:()=>o.slotContent}:void 0);c.appContext={...i.appContext,...i};const d=document.createElement("div");ba(c,d),c.component.exposed.onOpen();const f=u==null?void 0:u.querySelector(`.${l}-scrollbar__wrap`);bs=()=>{ba(null,d),f==null||f.removeEventListener("scroll",bs),bs=null},bs.trigger=s,bs.vm=c,f==null||f.addEventListener("scroll",bs)}function OP(t){return t.children?UK(t.children,OP):[t]}function WC(t,e){return t+e.colSpan}const $P=(t,e,n,r)=>{let s=0,i=t;const o=n.states.columns.value;if(r){const u=OP(r[t]);s=o.slice(0,o.indexOf(u[0])).reduce(WC,0),i=s+u.reduce(WC,0)-1}else s=t;let a;switch(e){case"left":i<n.states.fixedLeafColumnsLength.value&&(a="left");break;case"right":s>=o.length-n.states.rightFixedLeafColumnsLength.value&&(a="right");break;default:i<n.states.fixedLeafColumnsLength.value?a="left":s>=o.length-n.states.rightFixedLeafColumnsLength.value&&(a="right")}return a?{direction:a,start:s,after:i}:{}},G1=(t,e,n,r,s,i=0)=>{const o=[],{direction:a,start:u,after:l}=$P(e,n,r,s);if(a){const c=a==="left";o.push(`${t}-fixed-column--${a}`),c&&l+i===r.states.fixedLeafColumnsLength.value-1?o.push("is-last-column"):!c&&u-i===r.states.columns.value.length-r.states.rightFixedLeafColumnsLength.value&&o.push("is-first-column")}return o};function GC(t,e){return t+(Xd(e.realWidth)||Number.isNaN(e.realWidth)?Number(e.width):e.realWidth)}const q1=(t,e,n,r)=>{const{direction:s,start:i=0,after:o=0}=$P(t,e,n,r);if(!s)return;const a={},u=s==="left",l=n.states.columns.value;return u?a.left=l.slice(0,i).reduce(GC,0):a.right=l.slice(o+1).reverse().reduce(GC,0),a},Ou=(t,e)=>{t&&(Number.isNaN(t[e])||(t[e]=`${t[e]}px`))};function Vae(t){const e=Kt(),n=H(!1),r=H([]);return{updateExpandRows:()=>{const u=t.data.value||[],l=t.rowKey.value;if(n.value)r.value=u.slice();else if(l){const c=uu(r.value,l);r.value=u.reduce((d,f)=>{const h=Jr(f,l);return c[h]&&d.push(f),d},[])}else r.value=[]},toggleRowExpansion:(u,l)=>{Gp(r.value,u,l)&&e.emit("expand-change",u,r.value.slice())},setExpandRowKeys:u=>{e.store.assertRowKey();const l=t.data.value||[],c=t.rowKey.value,d=uu(l,c);r.value=u.reduce((f,h)=>{const p=d[h];return p&&f.push(p.row),f},[])},isRowExpanded:u=>{const l=t.rowKey.value;return l?!!uu(r.value,l)[Jr(u,l)]:r.value.includes(u)},states:{expandRows:r,defaultExpandAll:n}}}function Uae(t){const e=Kt(),n=H(null),r=H(null),s=l=>{e.store.assertRowKey(),n.value=l,o(l)},i=()=>{n.value=null},o=l=>{const{data:c,rowKey:d}=t;let f=null;d.value&&(f=(m(c)||[]).find(h=>Jr(h,d.value)===l)),r.value=f,e.emit("current-change",r.value,null)};return{setCurrentRowKey:s,restoreCurrentRowKey:i,setCurrentRowByKey:o,updateCurrentRow:l=>{const c=r.value;if(l&&l!==c){r.value=l,e.emit("current-change",r.value,c);return}!l&&c&&(r.value=null,e.emit("current-change",null,c))},updateCurrentRowData:()=>{const l=t.rowKey.value,c=t.data.value||[],d=r.value;if(!c.includes(d)&&d){if(l){const f=Jr(d,l);o(f)}else r.value=null;Xd(r.value)&&e.emit("current-change",null,d)}else n.value&&(o(n.value),i())},states:{_currentRowKey:n,currentRow:r}}}function Hae(t){const e=H([]),n=H({}),r=H(16),s=H(!1),i=H({}),o=H("hasChildren"),a=H("children"),u=H(!1),l=Kt(),c=L(()=>{if(!t.rowKey.value)return{};const S=t.data.value||[];return f(S)}),d=L(()=>{const S=t.rowKey.value,E=Object.keys(i.value),x={};return E.length&&E.forEach(k=>{if(i.value[k].length){const A={children:[]};i.value[k].forEach(C=>{const _=Jr(C,S);A.children.push(_),C[o.value]&&!x[_]&&(x[_]={children:[]})}),x[k]=A}}),x}),f=S=>{const E=t.rowKey.value,x={};return Nae(S,(k,A,C)=>{const _=Jr(k,E);Ve(A)?x[_]={children:A.map(O=>Jr(O,E)),level:C}:s.value&&(x[_]={children:[],lazy:!0,level:C})},a.value,o.value),x},h=(S=!1,E=(x=>(x=l.store)==null?void 0:x.states.defaultExpandAll.value)())=>{var x;const k=c.value,A=d.value,C=Object.keys(k),_={};if(C.length){const O=m(n),P=[],U=(N,R)=>{if(S)return e.value?E||e.value.includes(R):!!(E||N!=null&&N.expanded);{const V=E||e.value&&e.value.includes(R);return!!(N!=null&&N.expanded||V)}};C.forEach(N=>{const R=O[N],V={...k[N]};if(V.expanded=U(R,N),V.lazy){const{loaded:D=!1,loading:M=!1}=R||{};V.loaded=!!D,V.loading=!!M,P.push(N)}_[N]=V});const j=Object.keys(A);s.value&&j.length&&P.length&&j.forEach(N=>{const R=O[N],V=A[N].children;if(P.includes(N)){if(_[N].children.length!==0)throw new Error("[ElTable]children must be an empty array.");_[N].children=V}else{const{loaded:D=!1,loading:M=!1}=R||{};_[N]={lazy:!0,loaded:!!D,loading:!!M,expanded:U(R,N),children:V,level:""}}})}n.value=_,(x=l.store)==null||x.updateTableScrollY()};Ie(()=>e.value,()=>{h(!0)}),Ie(()=>c.value,()=>{h()}),Ie(()=>d.value,()=>{h()});const p=S=>{e.value=S,h()},g=S=>s.value&&S&&"loaded"in S&&!S.loaded,v=(S,E)=>{l.store.assertRowKey();const x=t.rowKey.value,k=Jr(S,x),A=k&&n.value[k];if(k&&A&&"expanded"in A){const C=A.expanded;E=an(E)?!A.expanded:E,n.value[k].expanded=E,C!==E&&l.emit("expand-change",S,E),g(A)&&w(S,k,A),l.store.updateTableScrollY()}},y=S=>{l.store.assertRowKey();const E=t.rowKey.value,x=Jr(S,E),k=n.value[x];g(k)?w(S,x,k):v(S,void 0)},w=(S,E,x)=>{const{load:k}=l.props;k&&!n.value[E].loaded&&(n.value[E].loading=!0,k(S,x,A=>{if(!Ve(A))throw new TypeError("[ElTable] data must be an array");n.value[E].loading=!1,n.value[E].loaded=!0,n.value[E].expanded=!0,A.length&&(i.value[E]=A),l.emit("expand-change",S,!0)}))};return{loadData:w,loadOrToggle:y,toggleTreeExpansion:v,updateTreeExpandKeys:p,updateTreeData:h,updateKeyChildren:(S,E)=>{const{lazy:x,rowKey:k}=l.props;if(x){if(!k)throw new Error("[Table] rowKey is required in updateKeyChild");i.value[S]&&(i.value[S]=E)}},normalize:f,states:{expandRowKeys:e,treeData:n,indent:r,lazy:s,lazyTreeNodeMap:i,lazyColumnIdentifier:o,childrenColumnName:a,checkStrictly:u}}}const jae=(t,e)=>{const n=e.sortingColumn;return!n||ut(n.sortable)?t:Pae(t,e.sortProp,e.sortOrder,n.sortMethod,n.sortBy)},Kh=t=>{const e=[];return t.forEach(n=>{n.children&&n.children.length>0?e.push.apply(e,Kh(n.children)):e.push(n)}),e};function Kae(){var t;const e=Kt(),{size:n}=_r((t=e.proxy)==null?void 0:t.$props),r=H(null),s=H([]),i=H([]),o=H(!1),a=H([]),u=H([]),l=H([]),c=H([]),d=H([]),f=H([]),h=H([]),p=H([]),g=[],v=H(0),y=H(0),w=H(0),b=H(!1),S=H([]),E=H(!1),x=H(!1),k=H(null),A=H({}),C=H(null),_=H(null),O=H(null),P=H(null),U=H(null),j=L(()=>r.value?uu(S.value,r.value):void 0);Ie(s,()=>{var ht;e.state&&(D(!1),e.props.tableLayout==="auto"&&((ht=e.refs.tableHeaderRef)==null||ht.updateFixedColumnStyle()))},{deep:!0});const N=()=>{if(!r.value)throw new Error("[ElTable] prop row-key is required")},R=ht=>{var Nt;(Nt=ht.children)==null||Nt.forEach(fe=>{fe.fixed=ht.fixed,R(fe)})},V=()=>{a.value.forEach(Et=>{R(Et)}),c.value=a.value.filter(Et=>[!0,"left"].includes(Et.fixed));const ht=a.value.find(Et=>Et.type==="selection");let Nt;ht&&ht.fixed!=="right"&&!c.value.includes(ht)&&a.value.indexOf(ht)===0&&c.value.length&&(c.value.unshift(ht),Nt=!0),d.value=a.value.filter(Et=>Et.fixed==="right");const fe=a.value.filter(Et=>(Nt?Et.type!=="selection":!0)&&!Et.fixed);u.value=[].concat(c.value).concat(fe).concat(d.value);const Le=Kh(fe),ne=Kh(c.value),Ye=Kh(d.value);v.value=Le.length,y.value=ne.length,w.value=Ye.length,l.value=[].concat(ne).concat(Le).concat(Ye),o.value=c.value.length>0||d.value.length>0},D=(ht,Nt=!1)=>{ht&&V(),Nt?e.state.doLayout():e.state.debouncedUpdateLayout()},M=ht=>j.value?!!j.value[Jr(ht,r.value)]:S.value.includes(ht),K=()=>{b.value=!1;const ht=S.value;S.value=[],ht.length&&e.emit("selection-change",[])},q=()=>{var ht,Nt;let fe;if(r.value){fe=[];const Le=(Nt=(ht=e==null?void 0:e.store)==null?void 0:ht.states)==null?void 0:Nt.childrenColumnName.value,ne=uu(s.value,r.value,!0,Le);for(const Ye in j.value)hn(j.value,Ye)&&!ne[Ye]&&fe.push(j.value[Ye].row)}else fe=S.value.filter(Le=>!s.value.includes(Le));if(fe.length){const Le=S.value.filter(ne=>!fe.includes(ne));S.value=Le,e.emit("selection-change",Le.slice())}},ee=()=>(S.value||[]).slice(),X=(ht,Nt,fe=!0,Le=!1)=>{var ne,Ye,Et,tn;const ct={children:(Ye=(ne=e==null?void 0:e.store)==null?void 0:ne.states)==null?void 0:Ye.childrenColumnName.value,checkStrictly:(tn=(Et=e==null?void 0:e.store)==null?void 0:Et.states)==null?void 0:tn.checkStrictly.value};if(Gp(S.value,ht,Nt,ct,Le?void 0:k.value,s.value.indexOf(ht))){const Fn=(S.value||[]).slice();fe&&e.emit("select",Fn,ht),e.emit("selection-change",Fn)}},te=()=>{var ht,Nt;const fe=x.value?!b.value:!(b.value||S.value.length);b.value=fe;let Le=!1,ne=0;const Ye=(Nt=(ht=e==null?void 0:e.store)==null?void 0:ht.states)==null?void 0:Nt.rowKey.value,{childrenColumnName:Et}=e.store.states,tn={children:Et.value,checkStrictly:!1};s.value.forEach((ct,Wt)=>{const Fn=Wt+ne;Gp(S.value,ct,fe,tn,k.value,Fn)&&(Le=!0),ne+=Z(Jr(ct,Ye))}),Le&&e.emit("selection-change",S.value?S.value.slice():[]),e.emit("select-all",(S.value||[]).slice())},ue=()=>{s.value.forEach(ht=>{const Nt=Jr(ht,r.value),fe=j.value[Nt];fe&&(S.value[fe.index]=ht)})},he=()=>{var ht;if(((ht=s.value)==null?void 0:ht.length)===0){b.value=!1;return}const{childrenColumnName:Nt}=e.store.states;let fe=0,Le=0;const ne=Et=>{var tn;for(const ct of Et){const Wt=k.value&&k.value.call(null,ct,fe);if(M(ct))Le++;else if(!k.value||Wt)return!1;if(fe++,(tn=ct[Nt.value])!=null&&tn.length&&!ne(ct[Nt.value]))return!1}return!0},Ye=ne(s.value||[]);b.value=Le===0?!1:Ye},Z=ht=>{var Nt;if(!e||!e.store)return 0;const{treeData:fe}=e.store.states;let Le=0;const ne=(Nt=fe.value[ht])==null?void 0:Nt.children;return ne&&(Le+=ne.length,ne.forEach(Ye=>{Le+=Z(Ye)})),Le},ce=(ht,Nt)=>{Ve(ht)||(ht=[ht]);const fe={};return ht.forEach(Le=>{A.value[Le.id]=Nt,fe[Le.columnKey||Le.id]=Nt}),fe},ae=(ht,Nt,fe)=>{_.value&&_.value!==ht&&(_.value.order=null),_.value=ht,O.value=Nt,P.value=fe},Te=()=>{let ht=m(i);Object.keys(A.value).forEach(Nt=>{const fe=A.value[Nt];if(!fe||fe.length===0)return;const Le=PP({columns:l.value},Nt);Le&&Le.filterMethod&&(ht=ht.filter(ne=>fe.some(Ye=>Le.filterMethod.call(null,Ye,ne,Le))))}),C.value=ht},Ce=()=>{s.value=jae(C.value,{sortingColumn:_.value,sortProp:O.value,sortOrder:P.value})},z=(ht=void 0)=>{ht&&ht.filter||Te(),Ce()},re=ht=>{const{tableHeaderRef:Nt}=e.refs;if(!Nt)return;const fe=Object.assign({},Nt.filterPanels),Le=Object.keys(fe);if(Le.length)if(ut(ht)&&(ht=[ht]),Ve(ht)){const ne=ht.map(Ye=>Dae({columns:l.value},Ye));Le.forEach(Ye=>{const Et=ne.find(tn=>tn.id===Ye);Et&&(Et.filteredValue=[])}),e.store.commit("filterChange",{column:ne,values:[],silent:!0,multi:!0})}else Le.forEach(ne=>{const Ye=l.value.find(Et=>Et.id===ne);Ye&&(Ye.filteredValue=[])}),A.value={},e.store.commit("filterChange",{column:{},values:[],silent:!0})},ve=()=>{_.value&&(ae(null,null,null),e.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:ke,toggleRowExpansion:Ee,updateExpandRows:be,states:Se,isRowExpanded:_e}=Vae({data:s,rowKey:r}),{updateTreeExpandKeys:Ne,toggleTreeExpansion:Me,updateTreeData:st,updateKeyChildren:qe,loadOrToggle:Ae,states:et}=Hae({data:s,rowKey:r}),{updateCurrentRowData:St,updateCurrentRow:Lt,setCurrentRowKey:Pt,states:en}=Uae({data:s,rowKey:r});return{assertRowKey:N,updateColumns:V,scheduleLayout:D,isSelected:M,clearSelection:K,cleanSelection:q,getSelectionRows:ee,toggleRowSelection:X,_toggleAllSelection:te,toggleAllSelection:null,updateSelectionByRowKey:ue,updateAllSelected:he,updateFilters:ce,updateCurrentRow:Lt,updateSort:ae,execFilter:Te,execSort:Ce,execQuery:z,clearFilter:re,clearSort:ve,toggleRowExpansion:Ee,setExpandRowKeysAdapter:ht=>{ke(ht),Ne(ht)},setCurrentRowKey:Pt,toggleRowExpansionAdapter:(ht,Nt)=>{l.value.some(({type:Le})=>Le==="expand")?Ee(ht,Nt):Me(ht,Nt)},isRowExpanded:_e,updateExpandRows:be,updateCurrentRowData:St,loadOrToggle:Ae,updateTreeData:st,updateKeyChildren:qe,states:{tableSize:n,rowKey:r,data:s,_data:i,isComplex:o,_columns:a,originColumns:u,columns:l,fixedColumns:c,rightFixedColumns:d,leafColumns:f,fixedLeafColumns:h,rightFixedLeafColumns:p,updateOrderFns:g,leafColumnsLength:v,fixedLeafColumnsLength:y,rightFixedLeafColumnsLength:w,isAllSelected:b,selection:S,reserveSelection:E,selectOnIndeterminate:x,selectable:k,filters:A,filteredData:C,sortingColumn:_,sortProp:O,sortOrder:P,hoverRow:U,...Se,...et,...en}}}function cy(t,e){return t.map(n=>{var r;return n.id===e.id?e:((r=n.children)!=null&&r.length&&(n.children=cy(n.children,e)),n)})}function dy(t){t.forEach(e=>{var n,r;e.no=(n=e.getColumnIndex)==null?void 0:n.call(e),(r=e.children)!=null&&r.length&&dy(e.children)}),t.sort((e,n)=>e.no-n.no)}function zae(){const t=Kt(),e=Kae();return{ns:Oe("table"),...e,mutations:{setData(o,a){const u=m(o._data)!==a;o.data.value=a,o._data.value=a,t.store.execQuery(),t.store.updateCurrentRowData(),t.store.updateExpandRows(),t.store.updateTreeData(t.store.states.defaultExpandAll.value),m(o.reserveSelection)?(t.store.assertRowKey(),t.store.updateSelectionByRowKey()):u?t.store.clearSelection():t.store.cleanSelection(),t.store.updateAllSelected(),t.$ready&&t.store.scheduleLayout()},insertColumn(o,a,u,l){const c=m(o._columns);let d=[];u?(u&&!u.children&&(u.children=[]),u.children.push(a),d=cy(c,u)):(c.push(a),d=c),dy(d),o._columns.value=d,o.updateOrderFns.push(l),a.type==="selection"&&(o.selectable.value=a.selectable,o.reserveSelection.value=a.reserveSelection),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},updateColumnOrder(o,a){var u;((u=a.getColumnIndex)==null?void 0:u.call(a))!==a.no&&(dy(o._columns.value),t.$ready&&t.store.updateColumns())},removeColumn(o,a,u,l){const c=m(o._columns)||[];if(u)u.children.splice(u.children.findIndex(f=>f.id===a.id),1),ft(()=>{var f;((f=u.children)==null?void 0:f.length)===0&&delete u.children}),o._columns.value=cy(c,u);else{const f=c.indexOf(a);f>-1&&(c.splice(f,1),o._columns.value=c)}const d=o.updateOrderFns.indexOf(l);d>-1&&o.updateOrderFns.splice(d,1),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},sort(o,a){const{prop:u,order:l,init:c}=a;if(u){const d=m(o.columns).find(f=>f.property===u);d&&(d.order=l,t.store.updateSort(d,u,l),t.store.commit("changeSortCondition",{init:c}))}},changeSortCondition(o,a){const{sortingColumn:u,sortProp:l,sortOrder:c}=o,d=m(u),f=m(l),h=m(c);Xd(h)&&(o.sortingColumn.value=null,o.sortProp.value=null);const p={filter:!0};t.store.execQuery(p),(!a||!(a.silent||a.init))&&t.emit("sort-change",{column:d,prop:f,order:h}),t.store.updateTableScrollY()},filterChange(o,a){const{column:u,values:l,silent:c}=a,d=t.store.updateFilters(u,l);t.store.execQuery(),c||t.emit("filter-change",d),t.store.updateTableScrollY()},toggleAllSelection(){t.store.toggleAllSelection()},rowSelectedChanged(o,a){t.store.toggleRowSelection(a),t.store.updateAllSelected()},setHoverRow(o,a){o.hoverRow.value=a},setCurrentRow(o,a){t.store.updateCurrentRow(a)}},commit:function(o,...a){const u=t.store.mutations;if(u[o])u[o].apply(t,[t.store.states].concat(a));else throw new Error(`Action not found: ${o}`)},updateTableScrollY:function(){ft(()=>t.layout.updateScrollY.apply(t.layout))}}}const Xc={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"},"treeProps.checkStrictly":{key:"checkStrictly",default:!1}};function Wae(t,e){if(!t)throw new Error("Table is required.");const n=zae();return n.toggleAllSelection=_s(n._toggleAllSelection,10),Object.keys(Xc).forEach(r=>{MP(NP(e,r),r,n)}),Gae(n,e),n}function Gae(t,e){Object.keys(Xc).forEach(n=>{Ie(()=>NP(e,n),r=>{MP(r,n,t)})})}function MP(t,e,n){let r=t,s=Xc[e];Bt(Xc[e])&&(s=s.key,r=r||Xc[e].default),n.states[s].value=r}function NP(t,e){if(e.includes(".")){const n=e.split(".");let r=t;return n.forEach(s=>{r=r[s]}),r}else return t[e]}class qae{constructor(e){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=H(null),this.scrollX=H(!1),this.scrollY=H(!1),this.bodyWidth=H(null),this.fixedWidth=H(null),this.rightFixedWidth=H(null),this.gutterWidth=0;for(const n in e)hn(e,n)&&(Dn(this[n])?this[n].value=e[n]:this[n]=e[n]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){const e=this.height.value;if(Xd(e))return!1;const n=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(n!=null&&n.wrapRef)){let r=!0;const s=this.scrollY.value;return r=n.wrapRef.scrollHeight>n.wrapRef.clientHeight,this.scrollY.value=r,s!==r}return!1}setHeight(e,n="height"){if(!on)return;const r=this.table.vnode.el;if(e=$ae(e),this.height.value=Number(e),!r&&(e||e===0))return ft(()=>this.setHeight(e,n));vt(e)?(r.style[n]=`${e}px`,this.updateElsHeight()):ut(e)&&(r.style[n]=e,this.updateElsHeight())}setMaxHeight(e){this.setHeight(e,"max-height")}getFlattenColumns(){const e=[];return this.table.store.states.columns.value.forEach(r=>{r.isColumnGroup?e.push.apply(e,r.columns):e.push(r)}),e}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(e){if(!e)return!0;let n=e;for(;n.tagName!=="DIV";){if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}updateColumnsWidth(){if(!on)return;const e=this.fit,n=this.table.vnode.el.clientWidth;let r=0;const s=this.getFlattenColumns(),i=s.filter(u=>!vt(u.width));if(s.forEach(u=>{vt(u.width)&&u.realWidth&&(u.realWidth=null)}),i.length>0&&e){if(s.forEach(u=>{r+=Number(u.width||u.minWidth||80)}),r<=n){this.scrollX.value=!1;const u=n-r;if(i.length===1)i[0].realWidth=Number(i[0].minWidth||80)+u;else{const l=i.reduce((f,h)=>f+Number(h.minWidth||80),0),c=u/l;let d=0;i.forEach((f,h)=>{if(h===0)return;const p=Math.floor(Number(f.minWidth||80)*c);d+=p,f.realWidth=Number(f.minWidth||80)+p}),i[0].realWidth=Number(i[0].minWidth||80)+u-d}}else this.scrollX.value=!0,i.forEach(u=>{u.realWidth=Number(u.minWidth)});this.bodyWidth.value=Math.max(r,n),this.table.state.resizeState.value.width=this.bodyWidth.value}else s.forEach(u=>{!u.width&&!u.minWidth?u.realWidth=80:u.realWidth=Number(u.width||u.minWidth),r+=u.realWidth}),this.scrollX.value=r>n,this.bodyWidth.value=r;const o=this.store.states.fixedColumns.value;if(o.length>0){let u=0;o.forEach(l=>{u+=Number(l.realWidth||l.width)}),this.fixedWidth.value=u}const a=this.store.states.rightFixedColumns.value;if(a.length>0){let u=0;a.forEach(l=>{u+=Number(l.realWidth||l.width)}),this.rightFixedWidth.value=u}this.notifyObservers("columns")}addObserver(e){this.observers.push(e)}removeObserver(e){const n=this.observers.indexOf(e);n!==-1&&this.observers.splice(n,1)}notifyObservers(e){this.observers.forEach(r=>{var s,i;switch(e){case"columns":(s=r.state)==null||s.onColumnsChange(this);break;case"scrollable":(i=r.state)==null||i.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${e}.`)}})}}const{CheckboxGroup:Yae}=li,Xae=se({name:"ElTableFilterPanel",components:{ElCheckbox:li,ElCheckboxGroup:Yae,ElScrollbar:io,ElTooltip:Vr,ElIcon:lt,ArrowDown:Bo,ArrowUp:Db},directives:{ClickOutside:Oo},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function},appendTo:nr.appendTo},setup(t){const e=Kt(),{t:n}=sn(),r=Oe("table-filter"),s=e==null?void 0:e.parent;s.filterPanels.value[t.column.id]||(s.filterPanels.value[t.column.id]=e);const i=H(!1),o=H(null),a=L(()=>t.column&&t.column.filters),u=L(()=>t.column.filterClassName?`${r.b()} ${t.column.filterClassName}`:r.b()),l=L({get:()=>{var E;return(((E=t.column)==null?void 0:E.filteredValue)||[])[0]},set:E=>{c.value&&(js(E)?c.value.splice(0,1):c.value.splice(0,1,E))}}),c=L({get(){return t.column?t.column.filteredValue||[]:[]},set(E){t.column&&t.upDataColumn("filteredValue",E)}}),d=L(()=>t.column?t.column.filterMultiple:!0),f=E=>E.value===l.value,h=()=>{i.value=!1},p=E=>{E.stopPropagation(),i.value=!i.value},g=()=>{i.value=!1},v=()=>{b(c.value),h()},y=()=>{c.value=[],b(c.value),h()},w=E=>{l.value=E,js(E)?b([]):b(c.value),h()},b=E=>{t.store.commit("filterChange",{column:t.column,values:E}),t.store.updateAllSelected()};Ie(i,E=>{t.column&&t.upDataColumn("filterOpened",E)},{immediate:!0});const S=L(()=>{var E,x;return(x=(E=o.value)==null?void 0:E.popperRef)==null?void 0:x.contentRef});return{tooltipVisible:i,multiple:d,filterClassName:u,filteredValue:c,filterValue:l,filters:a,handleConfirm:v,handleReset:y,handleSelect:w,isPropAbsent:js,isActive:f,t:n,ns:r,showFilterPanel:p,hideFilterPanel:g,popperPaneRef:S,tooltip:o}}});function Qae(t,e,n,r,s,i){const o=Mt("el-checkbox"),a=Mt("el-checkbox-group"),u=Mt("el-scrollbar"),l=Mt("arrow-up"),c=Mt("arrow-down"),d=Mt("el-icon"),f=Mt("el-tooltip"),h=dm("click-outside");return $(),ye(f,{ref:"tooltip",visible:t.tooltipVisible,offset:0,placement:t.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":t.filterClassName,persistent:"","append-to":t.appendTo},{content:le(()=>[t.multiple?($(),Y("div",{key:0},[J("div",{class:F(t.ns.e("content"))},[ie(u,{"wrap-class":t.ns.e("wrap")},{default:le(()=>[ie(a,{modelValue:t.filteredValue,"onUpdate:modelValue":p=>t.filteredValue=p,class:F(t.ns.e("checkbox-group"))},{default:le(()=>[($(!0),Y(dt,null,Zt(t.filters,p=>($(),ye(o,{key:p.value,value:p.value},{default:le(()=>[Qt(ze(p.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"])]),_:1},8,["wrap-class"])],2),J("div",{class:F(t.ns.e("bottom"))},[J("button",{class:F({[t.ns.is("disabled")]:t.filteredValue.length===0}),disabled:t.filteredValue.length===0,type:"button",onClick:t.handleConfirm},ze(t.t("el.table.confirmFilter")),11,["disabled","onClick"]),J("button",{type:"button",onClick:t.handleReset},ze(t.t("el.table.resetFilter")),9,["onClick"])],2)])):($(),Y("ul",{key:1,class:F(t.ns.e("list"))},[J("li",{class:F([t.ns.e("list-item"),{[t.ns.is("active")]:t.isPropAbsent(t.filterValue)}]),onClick:p=>t.handleSelect(null)},ze(t.t("el.table.clearFilter")),11,["onClick"]),($(!0),Y(dt,null,Zt(t.filters,p=>($(),Y("li",{key:p.value,class:F([t.ns.e("list-item"),t.ns.is("active",t.isActive(p))]),label:p.value,onClick:g=>t.handleSelect(p.value)},ze(p.text),11,["label","onClick"]))),128))],2))]),default:le(()=>[Ot(($(),Y("span",{class:F([`${t.ns.namespace.value}-table__column-filter-trigger`,`${t.ns.namespace.value}-none-outline`]),onClick:t.showFilterPanel},[ie(d,null,{default:le(()=>[pe(t.$slots,"filter-icon",{},()=>[t.column.filterOpened?($(),ye(l,{key:0})):($(),ye(c,{key:1}))])]),_:3})],10,["onClick"])),[[h,t.hideFilterPanel,t.popperPaneRef]])]),_:3},8,["visible","placement","popper-class","append-to"])}var Zae=We(Xae,[["render",Qae],["__file","filter-panel.vue"]]);function Y1(t){const e=Kt();cm(()=>{n.value.addObserver(e)}),Ft(()=>{r(n.value),s(n.value)}),ki(()=>{r(n.value),s(n.value)}),Ia(()=>{n.value.removeObserver(e)});const n=L(()=>{const i=t.layout;if(!i)throw new Error("Can not find table layout.");return i}),r=i=>{var o;const a=((o=t.vnode.el)==null?void 0:o.querySelectorAll("colgroup > col"))||[];if(!a.length)return;const u=i.getFlattenColumns(),l={};u.forEach(c=>{l[c.id]=c});for(let c=0,d=a.length;c<d;c++){const f=a[c],h=f.getAttribute("name"),p=l[h];p&&f.setAttribute("width",p.realWidth||p.width)}},s=i=>{var o,a;const u=((o=t.vnode.el)==null?void 0:o.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let c=0,d=u.length;c<d;c++)u[c].setAttribute("width",i.scrollY.value?i.gutterWidth:"0");const l=((a=t.vnode.el)==null?void 0:a.querySelectorAll("th.gutter"))||[];for(let c=0,d=l.length;c<d;c++){const f=l[c];f.style.width=i.scrollY.value?`${i.gutterWidth}px`:"0",f.style.display=i.scrollY.value?"":"none"}};return{tableLayout:n.value,onColumnsChange:r,onScrollableChange:s}}const Li=Symbol("ElTable");function Jae(t,e){const n=Kt(),r=nt(Li),s=g=>{g.stopPropagation()},i=(g,v)=>{!v.filters&&v.sortable?p(g,v,!1):v.filterable&&!v.sortable&&s(g),r==null||r.emit("header-click",v,g)},o=(g,v)=>{r==null||r.emit("header-contextmenu",v,g)},a=H(null),u=H(!1),l=H({}),c=(g,v)=>{if(on&&!(v.children&&v.children.length>0)&&a.value&&t.border){u.value=!0;const y=r;e("set-drag-visible",!0);const b=(y==null?void 0:y.vnode.el).getBoundingClientRect().left,S=n.vnode.el.querySelector(`th.${v.id}`),E=S.getBoundingClientRect(),x=E.left-b+30;Js(S,"noclick"),l.value={startMouseLeft:g.clientX,startLeft:E.right-b,startColumnLeft:E.left-b,tableLeft:b};const k=y==null?void 0:y.refs.resizeProxy;k.style.left=`${l.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const A=_=>{const O=_.clientX-l.value.startMouseLeft,P=l.value.startLeft+O;k.style.left=`${Math.max(x,P)}px`},C=()=>{if(u.value){const{startColumnLeft:_,startLeft:O}=l.value,U=Number.parseInt(k.style.left,10)-_;v.width=v.realWidth=U,y==null||y.emit("header-dragend",v.width,O-_,v,g),requestAnimationFrame(()=>{t.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",u.value=!1,a.value=null,l.value={},e("set-drag-visible",!1)}document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",C),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{ts(S,"noclick")},0)};document.addEventListener("mousemove",A),document.addEventListener("mouseup",C)}},d=(g,v)=>{var y;if(v.children&&v.children.length>0)return;const w=g.target;if(!ds(w))return;const b=w==null?void 0:w.closest("th");if(!(!v||!v.resizable||!b)&&!u.value&&t.border){const S=b.getBoundingClientRect(),E=document.body.style,x=((y=b.parentNode)==null?void 0:y.lastElementChild)===b,k=t.allowDragLastColumn||!x;S.width>12&&S.right-g.clientX<8&&k?(E.cursor="col-resize",ws(b,"is-sortable")&&(b.style.cursor="col-resize"),a.value=v):u.value||(E.cursor="",ws(b,"is-sortable")&&(b.style.cursor="pointer"),a.value=null)}},f=()=>{on&&(document.body.style.cursor="")},h=({order:g,sortOrders:v})=>{if(g==="")return v[0];const y=v.indexOf(g||null);return v[y>v.length-2?0:y+1]},p=(g,v,y)=>{var w;g.stopPropagation();const b=v.order===y?null:y||h(v),S=(w=g.target)==null?void 0:w.closest("th");if(S&&ws(S,"noclick")){ts(S,"noclick");return}if(!v.sortable)return;const E=g.currentTarget;if(["ascending","descending"].some(_=>ws(E,_)&&!v.sortOrders.includes(_)))return;const x=t.store.states;let k=x.sortProp.value,A;const C=x.sortingColumn.value;(C!==v||C===v&&Xd(C.order))&&(C&&(C.order=null),x.sortingColumn.value=v,k=v.property),b?A=v.order=b:A=v.order=null,x.sortProp.value=k,x.sortOrder.value=A,r==null||r.store.commit("changeSortCondition")};return{handleHeaderClick:i,handleHeaderContextMenu:o,handleMouseDown:c,handleMouseMove:d,handleMouseOut:f,handleSortClick:p,handleFilterClick:s}}function ele(t){const e=nt(Li),n=Oe("table");return{getHeaderRowStyle:a=>{const u=e==null?void 0:e.props.headerRowStyle;return pt(u)?u.call(null,{rowIndex:a}):u},getHeaderRowClass:a=>{const u=[],l=e==null?void 0:e.props.headerRowClassName;return ut(l)?u.push(l):pt(l)&&u.push(l.call(null,{rowIndex:a})),u.join(" ")},getHeaderCellStyle:(a,u,l,c)=>{var d;let f=(d=e==null?void 0:e.props.headerCellStyle)!=null?d:{};pt(f)&&(f=f.call(null,{rowIndex:a,columnIndex:u,row:l,column:c}));const h=q1(u,c.fixed,t.store,l);return Ou(h,"left"),Ou(h,"right"),Object.assign({},f,h)},getHeaderCellClass:(a,u,l,c)=>{const d=G1(n.b(),u,c.fixed,t.store,l),f=[c.id,c.order,c.headerAlign,c.className,c.labelClassName,...d];c.children||f.push("is-leaf"),c.sortable&&f.push("is-sortable");const h=e==null?void 0:e.props.headerCellClassName;return ut(h)?f.push(h):pt(h)&&f.push(h.call(null,{rowIndex:a,columnIndex:u,row:l,column:c})),f.push(n.e("cell")),f.filter(p=>!!p).join(" ")}}}const FP=t=>{const e=[];return t.forEach(n=>{n.children?(e.push(n),e.push.apply(e,FP(n.children))):e.push(n)}),e},BP=t=>{let e=1;const n=(i,o)=>{if(o&&(i.level=o.level+1,e<i.level&&(e=i.level)),i.children){let a=0;i.children.forEach(u=>{n(u,i),a+=u.colSpan}),i.colSpan=a}else i.colSpan=1};t.forEach(i=>{i.level=1,n(i,void 0)});const r=[];for(let i=0;i<e;i++)r.push([]);return FP(t).forEach(i=>{i.children?(i.rowSpan=1,i.children.forEach(o=>o.isSubColumn=!0)):i.rowSpan=e-i.level+1,r[i.level-1].push(i)}),r};function tle(t){const e=nt(Li),n=L(()=>BP(t.store.states.originColumns.value));return{isGroup:L(()=>{const i=n.value.length>1;return i&&e&&(e.state.isGroup.value=!0),i}),toggleAllSelection:i=>{i.stopPropagation(),e==null||e.store.commit("toggleAllSelection")},columnRows:n}}var nle=se({name:"ElTableHeader",components:{ElCheckbox:li},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})},appendFilterPanelTo:{type:String},allowDragLastColumn:{type:Boolean}},setup(t,{emit:e}){const n=Kt(),r=nt(Li),s=Oe("table"),i=H({}),{onColumnsChange:o,onScrollableChange:a}=Y1(r),u=(r==null?void 0:r.props.tableLayout)==="auto",l=fn(new Map),c=H(),d=()=>{setTimeout(()=>{l.size>0&&(l.forEach((_,O)=>{const P=c.value.querySelector(`.${O.replace(/\s/g,".")}`);if(P){const U=P.getBoundingClientRect().width;_.width=U}}),l.clear())})};Ie(l,d),Ft(async()=>{await ft(),await ft();const{prop:_,order:O}=t.defaultSort;r==null||r.store.commit("sort",{prop:_,order:O,init:!0}),d()});const{handleHeaderClick:f,handleHeaderContextMenu:h,handleMouseDown:p,handleMouseMove:g,handleMouseOut:v,handleSortClick:y,handleFilterClick:w}=Jae(t,e),{getHeaderRowStyle:b,getHeaderRowClass:S,getHeaderCellStyle:E,getHeaderCellClass:x}=ele(t),{isGroup:k,toggleAllSelection:A,columnRows:C}=tle(t);return n.state={onColumnsChange:o,onScrollableChange:a},n.filterPanels=i,{ns:s,filterPanels:i,onColumnsChange:o,onScrollableChange:a,columnRows:C,getHeaderRowClass:S,getHeaderRowStyle:b,getHeaderCellClass:x,getHeaderCellStyle:E,handleHeaderClick:f,handleHeaderContextMenu:h,handleMouseDown:p,handleMouseMove:g,handleMouseOut:v,handleSortClick:y,handleFilterClick:w,isGroup:k,toggleAllSelection:A,saveIndexSelection:l,isTableLayoutAuto:u,theadRef:c,updateFixedColumnStyle:d}},render(){const{ns:t,isGroup:e,columnRows:n,getHeaderCellStyle:r,getHeaderCellClass:s,getHeaderRowClass:i,getHeaderRowStyle:o,handleHeaderClick:a,handleHeaderContextMenu:u,handleMouseDown:l,handleMouseMove:c,handleSortClick:d,handleMouseOut:f,store:h,$parent:p,saveIndexSelection:g,isTableLayoutAuto:v}=this;let y=1;return bt("thead",{ref:"theadRef",class:{[t.is("group")]:e}},n.map((w,b)=>bt("tr",{class:i(b),key:b,style:o(b)},w.map((S,E)=>{S.rowSpan>y&&(y=S.rowSpan);const x=s(b,E,w,S);return v&&S.fixed&&g.set(x,S),bt("th",{class:x,colspan:S.colSpan,key:`${S.id}-thead`,rowspan:S.rowSpan,style:r(b,E,w,S),onClick:k=>{k.currentTarget.classList.contains("noclick")||a(k,S)},onContextmenu:k=>u(k,S),onMousedown:k=>l(k,S),onMousemove:k=>c(k,S),onMouseout:f},[bt("div",{class:["cell",S.filteredValue&&S.filteredValue.length>0?"highlight":""]},[S.renderHeader?S.renderHeader({column:S,$index:E,store:h,_self:p}):S.label,S.sortable&&bt("span",{onClick:k=>d(k,S),class:"caret-wrapper"},[bt("i",{onClick:k=>d(k,S,"ascending"),class:"sort-caret ascending"}),bt("i",{onClick:k=>d(k,S,"descending"),class:"sort-caret descending"})]),S.filterable&&bt(Zae,{store:h,placement:S.filterPlacement||"bottom-start",appendTo:p.appendFilterPanelTo,column:S,upDataColumn:(k,A)=>{S[k]=A}},{"filter-icon":()=>S.renderFilterIcon?S.renderFilterIcon({filterOpened:S.filterOpened}):null})])])}))))}});function Ov(t,e,n=.03){return t-e>n}function rle(t){const e=nt(Li),n=H(""),r=H(bt("div")),s=(p,g,v)=>{var y;const w=e,b=Dv(p);let S;const E=(y=w==null?void 0:w.vnode.el)==null?void 0:y.dataset.prefix;b&&(S=zC({columns:t.store.states.columns.value},b,E),S&&(w==null||w.emit(`cell-${v}`,g,S,b,p))),w==null||w.emit(`row-${v}`,g,S,p)},i=(p,g)=>{s(p,g,"dblclick")},o=(p,g)=>{t.store.commit("setCurrentRow",g),s(p,g,"click")},a=(p,g)=>{s(p,g,"contextmenu")},u=_s(p=>{t.store.commit("setHoverRow",p)},30),l=_s(()=>{t.store.commit("setHoverRow",null)},30),c=p=>{const g=window.getComputedStyle(p,null),v=Number.parseInt(g.paddingLeft,10)||0,y=Number.parseInt(g.paddingRight,10)||0,w=Number.parseInt(g.paddingTop,10)||0,b=Number.parseInt(g.paddingBottom,10)||0;return{left:v,right:y,top:w,bottom:b}},d=(p,g,v)=>{let y=g.target.parentNode;for(;p>1&&(y=y==null?void 0:y.nextSibling,!(!y||y.nodeName!=="TR"));)v(y,"hover-row hover-fixed-row"),p--};return{handleDoubleClick:i,handleClick:o,handleContextMenu:a,handleMouseEnter:u,handleMouseLeave:l,handleCellMouseEnter:(p,g,v)=>{var y,w,b;const S=e,E=Dv(p),x=(y=S==null?void 0:S.vnode.el)==null?void 0:y.dataset.prefix;let k;if(E){k=zC({columns:t.store.states.columns.value},E,x),E.rowSpan>1&&d(E.rowSpan,p,Js);const K=S.hoverState={cell:E,column:k,row:g};S==null||S.emit("cell-mouse-enter",K.row,K.column,K.cell,p)}if(!v)return;const A=p.target.querySelector(".cell");if(!(ws(A,`${x}-tooltip`)&&A.childNodes.length))return;const C=document.createRange();C.setStart(A,0),C.setEnd(A,A.childNodes.length);const{width:_,height:O}=C.getBoundingClientRect(),{width:P,height:U}=A.getBoundingClientRect(),{top:j,left:N,right:R,bottom:V}=c(A),D=N+R,M=j+V;Ov(_+D,P)||Ov(O+M,U)||Ov(A.scrollWidth,P)?Bae(v,E.innerText||E.textContent,g,k,E,S):((w=bs)==null?void 0:w.trigger)===E&&((b=bs)==null||b())},handleCellMouseLeave:p=>{const g=Dv(p);if(!g)return;g.rowSpan>1&&d(g.rowSpan,p,ts);const v=e==null?void 0:e.hoverState;e==null||e.emit("cell-mouse-leave",v==null?void 0:v.row,v==null?void 0:v.column,v==null?void 0:v.cell,p)},tooltipContent:n,tooltipTrigger:r}}function sle(t){const e=nt(Li),n=Oe("table");return{getRowStyle:(l,c)=>{const d=e==null?void 0:e.props.rowStyle;return pt(d)?d.call(null,{row:l,rowIndex:c}):d||null},getRowClass:(l,c)=>{const d=[n.e("row")];e!=null&&e.props.highlightCurrentRow&&l===t.store.states.currentRow.value&&d.push("current-row"),t.stripe&&c%2===1&&d.push(n.em("row","striped"));const f=e==null?void 0:e.props.rowClassName;return ut(f)?d.push(f):pt(f)&&d.push(f.call(null,{row:l,rowIndex:c})),d},getCellStyle:(l,c,d,f)=>{const h=e==null?void 0:e.props.cellStyle;let p=h??{};pt(h)&&(p=h.call(null,{rowIndex:l,columnIndex:c,row:d,column:f}));const g=q1(c,t==null?void 0:t.fixed,t.store);return Ou(g,"left"),Ou(g,"right"),Object.assign({},p,g)},getCellClass:(l,c,d,f,h)=>{const p=G1(n.b(),c,t==null?void 0:t.fixed,t.store,void 0,h),g=[f.id,f.align,f.className,...p],v=e==null?void 0:e.props.cellClassName;return ut(v)?g.push(v):pt(v)&&g.push(v.call(null,{rowIndex:l,columnIndex:c,row:d,column:f})),g.push(n.e("cell")),g.filter(y=>!!y).join(" ")},getSpan:(l,c,d,f)=>{let h=1,p=1;const g=e==null?void 0:e.props.spanMethod;if(pt(g)){const v=g({row:l,column:c,rowIndex:d,columnIndex:f});Ve(v)?(h=v[0],p=v[1]):Bt(v)&&(h=v.rowspan,p=v.colspan)}return{rowspan:h,colspan:p}},getColspanRealWidth:(l,c,d)=>{if(c<1)return l[d].realWidth;const f=l.map(({realWidth:h,width:p})=>h||p).slice(d,d+c);return Number(f.reduce((h,p)=>Number(h)+Number(p),-1))}}}const ile=se({name:"TableTdWrapper"}),ole=se({...ile,props:{colspan:{type:Number,default:1},rowspan:{type:Number,default:1}},setup(t){return(e,n)=>($(),Y("td",{colspan:t.colspan,rowspan:t.rowspan},[pe(e.$slots,"default")],8,["colspan","rowspan"]))}});var ale=We(ole,[["__file","td-wrapper.vue"]]);function lle(t){const e=nt(Li),n=Oe("table"),{handleDoubleClick:r,handleClick:s,handleContextMenu:i,handleMouseEnter:o,handleMouseLeave:a,handleCellMouseEnter:u,handleCellMouseLeave:l,tooltipContent:c,tooltipTrigger:d}=rle(t),{getRowStyle:f,getRowClass:h,getCellStyle:p,getCellClass:g,getSpan:v,getColspanRealWidth:y}=sle(t),w=L(()=>t.store.states.columns.value.findIndex(({type:k})=>k==="default")),b=(k,A)=>{const C=e.props.rowKey;return C?Jr(k,C):A},S=(k,A,C,_=!1)=>{const{tooltipEffect:O,tooltipOptions:P,store:U}=t,{indent:j,columns:N}=U.states,R=h(k,A);let V=!0;return C&&(R.push(n.em("row",`level-${C.level}`)),V=C.display),bt("tr",{style:[V?null:{display:"none"},f(k,A)],class:R,key:b(k,A),onDblclick:M=>r(M,k),onClick:M=>s(M,k),onContextmenu:M=>i(M,k),onMouseenter:()=>o(A),onMouseleave:a},N.value.map((M,K)=>{const{rowspan:q,colspan:ee}=v(k,M,A,K);if(!q||!ee)return null;const X=Object.assign({},M);X.realWidth=y(N.value,ee,K);const te={store:t.store,_self:t.context||e,column:X,row:k,$index:A,cellIndex:K,expanded:_};K===w.value&&C&&(te.treeNode={indent:C.level*j.value,level:C.level},wn(C.expanded)&&(te.treeNode.expanded=C.expanded,"loading"in C&&(te.treeNode.loading=C.loading),"noLazyChildren"in C&&(te.treeNode.noLazyChildren=C.noLazyChildren)));const ue=`${b(k,A)},${K}`,he=X.columnKey||X.rawColumnKey||"",Z=M.showOverflowTooltip&&QI({effect:O},P,M.showOverflowTooltip);return bt(ale,{style:p(A,K,k,M),class:g(A,K,k,M,ee-1),key:`${he}${ue}`,rowspan:q,colspan:ee,onMouseenter:ce=>u(ce,k,Z),onMouseleave:l},{default:()=>E(K,M,te)})}))},E=(k,A,C)=>A.renderCell(C);return{wrappedRowRender:(k,A)=>{const C=t.store,{isRowExpanded:_,assertRowKey:O}=C,{treeData:P,lazyTreeNodeMap:U,childrenColumnName:j,rowKey:N}=C.states,R=C.states.columns.value;if(R.some(({type:D})=>D==="expand")){const D=_(k),M=S(k,A,void 0,D),K=e.renderExpanded;if(!K)return console.error("[Element Error]renderExpanded is required."),M;const q=[[M]];return(e.props.preserveExpandedContent||D)&&q[0].push(bt("tr",{key:`expanded-row__${M.key}`,style:{display:D?"":"none"}},[bt("td",{colspan:R.length,class:`${n.e("cell")} ${n.e("expanded-cell")}`},[K({row:k,$index:A,store:C,expanded:D})])])),q}else if(Object.keys(P.value).length){O();const D=Jr(k,N.value);let M=P.value[D],K=null;M&&(K={expanded:M.expanded,level:M.level,display:!0},wn(M.lazy)&&(wn(M.loaded)&&M.loaded&&(K.noLazyChildren=!(M.children&&M.children.length)),K.loading=M.loading));const q=[S(k,A,K)];if(M){let ee=0;const X=(ue,he)=>{ue&&ue.length&&he&&ue.forEach(Z=>{const ce={display:he.display&&he.expanded,level:he.level+1,expanded:!1,noLazyChildren:!1,loading:!1},ae=Jr(Z,N.value);if(js(ae))throw new Error("For nested data item, row-key is required.");if(M={...P.value[ae]},M&&(ce.expanded=M.expanded,M.level=M.level||ce.level,M.display=!!(M.expanded&&ce.display),wn(M.lazy)&&(wn(M.loaded)&&M.loaded&&(ce.noLazyChildren=!(M.children&&M.children.length)),ce.loading=M.loading)),ee++,q.push(S(Z,A+ee,ce)),M){const Te=U.value[ae]||Z[j.value];X(Te,M)}})};M.display=!0;const te=U.value[D]||k[j.value];X(te,M)}return q}else return S(k,A,void 0)},tooltipContent:c,tooltipTrigger:d}}const ule={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var cle=se({name:"ElTableBody",props:ule,setup(t){const e=Kt(),n=nt(Li),r=Oe("table"),{wrappedRowRender:s,tooltipContent:i,tooltipTrigger:o}=lle(t),{onColumnsChange:a,onScrollableChange:u}=Y1(n),l=[];return Ie(t.store.states.hoverRow,(c,d)=>{var f;const h=e==null?void 0:e.vnode.el,p=Array.from((h==null?void 0:h.children)||[]).filter(y=>y==null?void 0:y.classList.contains(`${r.e("row")}`));let g=c;const v=(f=p[g])==null?void 0:f.childNodes;if(v!=null&&v.length){let y=0;Array.from(v).reduce((b,S,E)=>{var x,k;return((x=v[E])==null?void 0:x.colSpan)>1&&(y=(k=v[E])==null?void 0:k.colSpan),S.nodeName!=="TD"&&y===0&&b.push(E),y>0&&y--,b},[]).forEach(b=>{var S;for(g=c;g>0;){const E=(S=p[g-1])==null?void 0:S.childNodes;if(E[b]&&E[b].nodeName==="TD"&&E[b].rowSpan>1){Js(E[b],"hover-cell"),l.push(E[b]);break}g--}})}else l.forEach(y=>ts(y,"hover-cell")),l.length=0;!t.store.states.isComplex.value||!on||ka(()=>{const y=p[d],w=p[c];y&&!y.classList.contains("hover-fixed-row")&&ts(y,"hover-row"),w&&Js(w,"hover-row")})}),Ia(()=>{var c;(c=bs)==null||c()}),{ns:r,onColumnsChange:a,onScrollableChange:u,wrappedRowRender:s,tooltipContent:i,tooltipTrigger:o}},render(){const{wrappedRowRender:t,store:e}=this,n=e.states.data.value||[];return bt("tbody",{tabIndex:-1},[n.reduce((r,s)=>r.concat(t(s,r.length)),[])])}});function dle(){var t;const e=nt(Li),n=e==null?void 0:e.store,r=L(()=>{var u;return(u=n==null?void 0:n.states.fixedLeafColumnsLength.value)!=null?u:0}),s=L(()=>{var u;return(u=n==null?void 0:n.states.rightFixedColumns.value.length)!=null?u:0}),i=L(()=>{var u;return(u=n==null?void 0:n.states.columns.value.length)!=null?u:0}),o=L(()=>{var u;return(u=n==null?void 0:n.states.fixedColumns.value.length)!=null?u:0}),a=L(()=>{var u;return(u=n==null?void 0:n.states.rightFixedColumns.value.length)!=null?u:0});return{leftFixedLeafCount:r,rightFixedLeafCount:s,columnsCount:i,leftFixedCount:o,rightFixedCount:a,columns:(t=n==null?void 0:n.states.columns)!=null?t:[]}}function fle(t){const{columns:e}=dle(),n=Oe("table");return{getCellClasses:(i,o)=>{const a=i[o],u=[n.e("cell"),a.id,a.align,a.labelClassName,...G1(n.b(),o,a.fixed,t.store)];return a.className&&u.push(a.className),a.children||u.push(n.is("leaf")),u},getCellStyles:(i,o)=>{const a=q1(o,i.fixed,t.store);return Ou(a,"left"),Ou(a,"right"),a},columns:e}}var hle=se({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t){const e=nt(Li),n=Oe("table"),{getCellClasses:r,getCellStyles:s,columns:i}=fle(t),{onScrollableChange:o,onColumnsChange:a}=Y1(e);return{ns:n,onScrollableChange:o,onColumnsChange:a,getCellClasses:r,getCellStyles:s,columns:i}},render(){const{columns:t,getCellStyles:e,getCellClasses:n,summaryMethod:r,sumText:s}=this,i=this.store.states.data.value;let o=[];return r?o=r({columns:t,data:i}):t.forEach((a,u)=>{if(u===0){o[u]=s;return}const l=i.map(h=>Number(h[a.property])),c=[];let d=!0;l.forEach(h=>{if(!Number.isNaN(+h)){d=!1;const p=`${h}`.split(".")[1];c.push(p?p.length:0)}});const f=Math.max.apply(null,c);d?o[u]="":o[u]=l.reduce((h,p)=>{const g=Number(p);return Number.isNaN(+g)?h:Number.parseFloat((h+p).toFixed(Math.min(f,20)))},0)}),bt(bt("tfoot",[bt("tr",{},[...t.map((a,u)=>bt("td",{key:u,colspan:a.colSpan,rowspan:a.rowSpan,class:n(t,u),style:e(a,u)},[bt("div",{class:["cell",a.labelClassName]},[o[u]])]))])]))}});function ple(t){return{setCurrentRow:d=>{t.commit("setCurrentRow",d)},getSelectionRows:()=>t.getSelectionRows(),toggleRowSelection:(d,f,h=!0)=>{t.toggleRowSelection(d,f,!1,h),t.updateAllSelected()},clearSelection:()=>{t.clearSelection()},clearFilter:d=>{t.clearFilter(d)},toggleAllSelection:()=>{t.commit("toggleAllSelection")},toggleRowExpansion:(d,f)=>{t.toggleRowExpansionAdapter(d,f)},clearSort:()=>{t.clearSort()},sort:(d,f)=>{t.commit("sort",{prop:d,order:f})},updateKeyChildren:(d,f)=>{t.updateKeyChildren(d,f)}}}function mle(t,e,n,r){const s=H(!1),i=H(null),o=H(!1),a=D=>{o.value=D},u=H({width:null,height:null,headerHeight:null}),l=H(!1),c={display:"inline-block",verticalAlign:"middle"},d=H(),f=H(0),h=H(0),p=H(0),g=H(0),v=H(0);Fr(()=>{e.setHeight(t.height)}),Fr(()=>{e.setMaxHeight(t.maxHeight)}),Ie(()=>[t.currentRowKey,n.states.rowKey],([D,M])=>{!m(M)||!m(D)||n.setCurrentRowKey(`${D}`)},{immediate:!0}),Ie(()=>t.data,D=>{r.store.commit("setData",D)},{immediate:!0,deep:!0}),Fr(()=>{t.expandRowKeys&&n.setExpandRowKeysAdapter(t.expandRowKeys)});const y=()=>{r.store.commit("setHoverRow",null),r.hoverState&&(r.hoverState=null)},w=(D,M)=>{const{pixelX:K,pixelY:q}=M;Math.abs(K)>=Math.abs(q)&&(r.refs.bodyWrapper.scrollLeft+=M.pixelX/5)},b=L(()=>t.height||t.maxHeight||n.states.fixedColumns.value.length>0||n.states.rightFixedColumns.value.length>0),S=L(()=>({width:e.bodyWidth.value?`${e.bodyWidth.value}px`:""})),E=()=>{b.value&&e.updateElsHeight(),e.updateColumnsWidth(),!(typeof window>"u")&&requestAnimationFrame(C)};Ft(async()=>{await ft(),n.updateColumns(),_(),requestAnimationFrame(E);const D=r.vnode.el,M=r.refs.headerWrapper;t.flexible&&D&&D.parentElement&&(D.parentElement.style.minWidth="0"),u.value={width:d.value=D.offsetWidth,height:D.offsetHeight,headerHeight:t.showHeader&&M?M.offsetHeight:null},n.states.columns.value.forEach(K=>{K.filteredValue&&K.filteredValue.length&&r.store.commit("filterChange",{column:K,values:K.filteredValue,silent:!0})}),r.$ready=!0});const x=(D,M)=>{if(!D)return;const K=Array.from(D.classList).filter(q=>!q.startsWith("is-scrolling-"));K.push(e.scrollX.value?M:"is-scrolling-none"),D.className=K.join(" ")},k=D=>{const{tableWrapper:M}=r.refs;x(M,D)},A=D=>{const{tableWrapper:M}=r.refs;return!!(M&&M.classList.contains(D))},C=function(){if(!r.refs.scrollBarRef)return;if(!e.scrollX.value){const ue="is-scrolling-none";A(ue)||k(ue);return}const D=r.refs.scrollBarRef.wrapRef;if(!D)return;const{scrollLeft:M,offsetWidth:K,scrollWidth:q}=D,{headerWrapper:ee,footerWrapper:X}=r.refs;ee&&(ee.scrollLeft=M),X&&(X.scrollLeft=M);const te=q-K-1;M>=te?k("is-scrolling-right"):k(M===0?"is-scrolling-left":"is-scrolling-middle")},_=()=>{r.refs.scrollBarRef&&(r.refs.scrollBarRef.wrapRef&&Cn(r.refs.scrollBarRef.wrapRef,"scroll",C,{passive:!0}),t.fit?zn(r.vnode.el,O):Cn(window,"resize",O),zn(r.refs.bodyWrapper,()=>{var D,M;O(),(M=(D=r.refs)==null?void 0:D.scrollBarRef)==null||M.update()}))},O=()=>{var D,M,K,q;const ee=r.vnode.el;if(!r.$ready||!ee)return;let X=!1;const{width:te,height:ue,headerHeight:he}=u.value,Z=d.value=ee.offsetWidth;te!==Z&&(X=!0);const ce=ee.offsetHeight;(t.height||b.value)&&ue!==ce&&(X=!0);const ae=t.tableLayout==="fixed"?r.refs.headerWrapper:(D=r.refs.tableHeaderRef)==null?void 0:D.$el;t.showHeader&&(ae==null?void 0:ae.offsetHeight)!==he&&(X=!0),f.value=((M=r.refs.tableWrapper)==null?void 0:M.scrollHeight)||0,p.value=(ae==null?void 0:ae.scrollHeight)||0,g.value=((K=r.refs.footerWrapper)==null?void 0:K.offsetHeight)||0,v.value=((q=r.refs.appendWrapper)==null?void 0:q.offsetHeight)||0,h.value=f.value-p.value-g.value-v.value,X&&(u.value={width:Z,height:ce,headerHeight:t.showHeader&&(ae==null?void 0:ae.offsetHeight)||0},E())},P=ur(),U=L(()=>{const{bodyWidth:D,scrollY:M,gutterWidth:K}=e;return D.value?`${D.value-(M.value?K:0)}px`:""}),j=L(()=>t.maxHeight?"fixed":t.tableLayout),N=L(()=>{if(t.data&&t.data.length)return null;let D="100%";t.height&&h.value&&(D=`${h.value}px`);const M=d.value;return{width:M?`${M}px`:"",height:D}}),R=L(()=>t.height?{height:"100%"}:t.maxHeight?Number.isNaN(Number(t.maxHeight))?{maxHeight:`calc(${t.maxHeight} - ${p.value+g.value}px)`}:{maxHeight:`${t.maxHeight-p.value-g.value}px`}:{});return{isHidden:s,renderExpanded:i,setDragVisible:a,isGroup:l,handleMouseLeave:y,handleHeaderFooterMousewheel:w,tableSize:P,emptyBlockStyle:N,handleFixedMousewheel:(D,M)=>{const K=r.refs.bodyWrapper;if(Math.abs(M.spinY)>0){const q=K.scrollTop;M.pixelY<0&&q!==0&&D.preventDefault(),M.pixelY>0&&K.scrollHeight-K.clientHeight>q&&D.preventDefault(),K.scrollTop+=Math.ceil(M.pixelY/5)}else K.scrollLeft+=Math.ceil(M.pixelX/5)},resizeProxyVisible:o,bodyWidth:U,resizeState:u,doLayout:E,tableBodyStyles:S,tableLayout:j,scrollbarViewStyle:c,scrollbarStyle:R}}function gle(t){const e=H(),n=()=>{const s=t.vnode.el.querySelector(".hidden-columns"),i={childList:!0,subtree:!0},o=t.store.states.updateOrderFns;e.value=new MutationObserver(()=>{o.forEach(a=>a())}),e.value.observe(s,i)};Ft(()=>{n()}),Ia(()=>{var r;(r=e.value)==null||r.disconnect()})}var vle={data:{type:Array,default:()=>[]},size:fr,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children",checkStrictly:!1})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object],tooltipFormatter:Function,appendFilterPanelTo:String,scrollbarTabindex:{type:[Number,String],default:void 0},allowDragLastColumn:{type:Boolean,default:!0},preserveExpandedContent:{type:Boolean,default:!1}};function VP(t){const e=t.tableLayout==="auto";let n=t.columns||[];e&&n.every(({width:s})=>an(s))&&(n=[]);const r=s=>{const i={key:`${t.tableLayout}_${s.id}`,style:{},name:void 0};return e?i.style={width:`${s.width}px`}:i.name=s.id,i};return bt("colgroup",{},n.map(s=>bt("col",r(s))))}VP.props=["columns","tableLayout"];const yle=()=>{const t=H(),e=(i,o)=>{const a=t.value;a&&a.scrollTo(i,o)},n=(i,o)=>{const a=t.value;a&&vt(o)&&["Top","Left"].includes(i)&&a[`setScroll${i}`](o)};return{scrollBarRef:t,scrollTo:e,setScrollTop:i=>n("Top",i),setScrollLeft:i=>n("Left",i)}};var qC=!1,Ga,fy,hy,zh,Wh,UP,Gh,py,my,gy,HP,vy,yy,jP,KP;function ys(){if(!qC){qC=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),n=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(vy=/\b(iPhone|iP[ao]d)/.exec(t),yy=/\b(iP[ao]d)/.exec(t),gy=/Android/i.exec(t),jP=/FBAN\/\w+;/i.exec(t),KP=/Mobile/i.exec(t),HP=!!/Win64/.exec(t),e){Ga=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,Ga&&document&&document.documentMode&&(Ga=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(t);UP=r?parseFloat(r[1])+4:Ga,fy=e[2]?parseFloat(e[2]):NaN,hy=e[3]?parseFloat(e[3]):NaN,zh=e[4]?parseFloat(e[4]):NaN,zh?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),Wh=e&&e[1]?parseFloat(e[1]):NaN):Wh=NaN}else Ga=fy=hy=Wh=zh=NaN;if(n){if(n[1]){var s=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);Gh=s?parseFloat(s[1].replace("_",".")):!0}else Gh=!1;py=!!n[2],my=!!n[3]}else Gh=py=my=!1}}var by={ie:function(){return ys()||Ga},ieCompatibilityMode:function(){return ys()||UP>Ga},ie64:function(){return by.ie()&&HP},firefox:function(){return ys()||fy},opera:function(){return ys()||hy},webkit:function(){return ys()||zh},safari:function(){return by.webkit()},chrome:function(){return ys()||Wh},windows:function(){return ys()||py},osx:function(){return ys()||Gh},linux:function(){return ys()||my},iphone:function(){return ys()||vy},mobile:function(){return ys()||vy||yy||gy||KP},nativeApp:function(){return ys()||jP},android:function(){return ys()||gy},ipad:function(){return ys()||yy}},ble=by,Sle=!!(typeof window<"u"&&window.document&&window.document.createElement),wle={canUseDOM:Sle},zP=wle,WP;zP.canUseDOM&&(WP=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function Ele(t,e){if(!zP.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var s=document.createElement("div");s.setAttribute(n,"return;"),r=typeof s[n]=="function"}return!r&&WP&&t==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var xle=Ele,YC=10,XC=40,QC=800;function GP(t){var e=0,n=0,r=0,s=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*YC,s=n*YC,"deltaY"in t&&(s=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||s)&&t.deltaMode&&(t.deltaMode==1?(r*=XC,s*=XC):(r*=QC,s*=QC)),r&&!e&&(e=r<1?-1:1),s&&!n&&(n=s<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:s}}GP.getEventType=function(){return ble.firefox()?"DOMMouseScroll":xle("wheel")?"wheel":"mousewheel"};var Tle=GP;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const Cle=function(t,e){if(t&&t.addEventListener){const n=function(r){const s=Tle(r);e&&Reflect.apply(e,this,[r,s])};t.addEventListener("wheel",n,{passive:!0})}},kle={beforeMount(t,e){Cle(t,e.value)}};let _le=1;const Ale=se({name:"ElTable",directives:{Mousewheel:kle},components:{TableHeader:nle,TableBody:cle,TableFooter:hle,ElScrollbar:io,hColgroup:VP},props:vle,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change","scroll"],setup(t){const{t:e}=sn(),n=Oe("table"),r=Kt();Jt(Li,r);const s=Wae(r,t);r.store=s;const i=new qae({store:r.store,table:r,fit:t.fit,showHeader:t.showHeader});r.layout=i;const o=L(()=>(s.states.data.value||[]).length===0),{setCurrentRow:a,getSelectionRows:u,toggleRowSelection:l,clearSelection:c,clearFilter:d,toggleAllSelection:f,toggleRowExpansion:h,clearSort:p,sort:g,updateKeyChildren:v}=ple(s),{isHidden:y,renderExpanded:w,setDragVisible:b,isGroup:S,handleMouseLeave:E,handleHeaderFooterMousewheel:x,tableSize:k,emptyBlockStyle:A,handleFixedMousewheel:C,resizeProxyVisible:_,bodyWidth:O,resizeState:P,doLayout:U,tableBodyStyles:j,tableLayout:N,scrollbarViewStyle:R,scrollbarStyle:V}=mle(t,i,s,r),{scrollBarRef:D,scrollTo:M,setScrollLeft:K,setScrollTop:q}=yle(),ee=_s(U,50),X=`${n.namespace.value}-table_${_le++}`;r.tableId=X,r.state={isGroup:S,resizeState:P,doLayout:U,debouncedUpdateLayout:ee};const te=L(()=>{var Z;return(Z=t.sumText)!=null?Z:e("el.table.sumText")}),ue=L(()=>{var Z;return(Z=t.emptyText)!=null?Z:e("el.table.emptyText")}),he=L(()=>BP(s.states.originColumns.value)[0]);return gle(r),In(()=>{ee.cancel()}),{ns:n,layout:i,store:s,columns:he,handleHeaderFooterMousewheel:x,handleMouseLeave:E,tableId:X,tableSize:k,isHidden:y,isEmpty:o,renderExpanded:w,resizeProxyVisible:_,resizeState:P,isGroup:S,bodyWidth:O,tableBodyStyles:j,emptyBlockStyle:A,debouncedUpdateLayout:ee,handleFixedMousewheel:C,setCurrentRow:a,getSelectionRows:u,toggleRowSelection:l,clearSelection:c,clearFilter:d,toggleAllSelection:f,toggleRowExpansion:h,clearSort:p,doLayout:U,sort:g,updateKeyChildren:v,t:e,setDragVisible:b,context:r,computedSumText:te,computedEmptyText:ue,tableLayout:N,scrollbarViewStyle:R,scrollbarStyle:V,scrollBarRef:D,scrollTo:M,setScrollLeft:K,setScrollTop:q,allowDragLastColumn:t.allowDragLastColumn}}});function Ile(t,e,n,r,s,i){const o=Mt("hColgroup"),a=Mt("table-header"),u=Mt("table-body"),l=Mt("table-footer"),c=Mt("el-scrollbar"),d=dm("mousewheel");return $(),Y("div",{ref:"tableWrapper",class:F([{[t.ns.m("fit")]:t.fit,[t.ns.m("striped")]:t.stripe,[t.ns.m("border")]:t.border||t.isGroup,[t.ns.m("hidden")]:t.isHidden,[t.ns.m("group")]:t.isGroup,[t.ns.m("fluid-height")]:t.maxHeight,[t.ns.m("scrollable-x")]:t.layout.scrollX.value,[t.ns.m("scrollable-y")]:t.layout.scrollY.value,[t.ns.m("enable-row-hover")]:!t.store.states.isComplex.value,[t.ns.m("enable-row-transition")]:(t.store.states.data.value||[]).length!==0&&(t.store.states.data.value||[]).length<100,"has-footer":t.showSummary},t.ns.m(t.tableSize),t.className,t.ns.b(),t.ns.m(`layout-${t.tableLayout}`)]),style:mt(t.style),"data-prefix":t.ns.namespace.value,onMouseleave:t.handleMouseLeave},[J("div",{class:F(t.ns.e("inner-wrapper"))},[J("div",{ref:"hiddenColumns",class:"hidden-columns"},[pe(t.$slots,"default")],512),t.showHeader&&t.tableLayout==="fixed"?Ot(($(),Y("div",{key:0,ref:"headerWrapper",class:F(t.ns.e("header-wrapper"))},[J("table",{ref:"tableHeader",class:F(t.ns.e("header")),style:mt(t.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[ie(o,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),ie(a,{ref:"tableHeaderRef",border:t.border,"default-sort":t.defaultSort,store:t.store,"append-filter-panel-to":t.appendFilterPanelTo,"allow-drag-last-column":t.allowDragLastColumn,onSetDragVisible:t.setDragVisible},null,8,["border","default-sort","store","append-filter-panel-to","allow-drag-last-column","onSetDragVisible"])],6)],2)),[[d,t.handleHeaderFooterMousewheel]]):ge("v-if",!0),J("div",{ref:"bodyWrapper",class:F(t.ns.e("body-wrapper"))},[ie(c,{ref:"scrollBarRef","view-style":t.scrollbarViewStyle,"wrap-style":t.scrollbarStyle,always:t.scrollbarAlwaysOn,tabindex:t.scrollbarTabindex,onScroll:f=>t.$emit("scroll",f)},{default:le(()=>[J("table",{ref:"tableBody",class:F(t.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:mt({width:t.bodyWidth,tableLayout:t.tableLayout})},[ie(o,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),t.showHeader&&t.tableLayout==="auto"?($(),ye(a,{key:0,ref:"tableHeaderRef",class:F(t.ns.e("body-header")),border:t.border,"default-sort":t.defaultSort,store:t.store,"append-filter-panel-to":t.appendFilterPanelTo,onSetDragVisible:t.setDragVisible},null,8,["class","border","default-sort","store","append-filter-panel-to","onSetDragVisible"])):ge("v-if",!0),ie(u,{context:t.context,highlight:t.highlightCurrentRow,"row-class-name":t.rowClassName,"tooltip-effect":t.tooltipEffect,"tooltip-options":t.tooltipOptions,"row-style":t.rowStyle,store:t.store,stripe:t.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),t.showSummary&&t.tableLayout==="auto"?($(),ye(l,{key:1,class:F(t.ns.e("body-footer")),border:t.border,"default-sort":t.defaultSort,store:t.store,"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):ge("v-if",!0)],6),t.isEmpty?($(),Y("div",{key:0,ref:"emptyBlock",style:mt(t.emptyBlockStyle),class:F(t.ns.e("empty-block"))},[J("span",{class:F(t.ns.e("empty-text"))},[pe(t.$slots,"empty",{},()=>[Qt(ze(t.computedEmptyText),1)])],2)],6)):ge("v-if",!0),t.$slots.append?($(),Y("div",{key:1,ref:"appendWrapper",class:F(t.ns.e("append-wrapper"))},[pe(t.$slots,"append")],2)):ge("v-if",!0)]),_:3},8,["view-style","wrap-style","always","tabindex","onScroll"])],2),t.showSummary&&t.tableLayout==="fixed"?Ot(($(),Y("div",{key:1,ref:"footerWrapper",class:F(t.ns.e("footer-wrapper"))},[J("table",{class:F(t.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:mt(t.tableBodyStyles)},[ie(o,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),ie(l,{border:t.border,"default-sort":t.defaultSort,store:t.store,"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[cn,!t.isEmpty],[d,t.handleHeaderFooterMousewheel]]):ge("v-if",!0),t.border||t.isGroup?($(),Y("div",{key:2,class:F(t.ns.e("border-left-patch"))},null,2)):ge("v-if",!0)],2),Ot(J("div",{ref:"resizeProxy",class:F(t.ns.e("column-resize-proxy"))},null,2),[[cn,t.resizeProxyVisible]])],46,["data-prefix","onMouseleave"])}var Rle=We(Ale,[["render",Ile],["__file","table.vue"]]);const Lle={selection:"table-column--selection",expand:"table__expand-column"},Ple={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},Dle=t=>Lle[t]||"",Ole={selection:{renderHeader({store:t,column:e}){function n(){return t.states.data.value&&t.states.data.value.length===0}return bt(li,{disabled:n(),size:t.states.tableSize.value,indeterminate:t.states.selection.value.length>0&&!t.states.isAllSelected.value,"onUpdate:modelValue":t.toggleAllSelection,modelValue:t.states.isAllSelected.value,ariaLabel:e.label})},renderCell({row:t,column:e,store:n,$index:r}){return bt(li,{disabled:e.selectable?!e.selectable.call(null,t,r):!1,size:n.states.tableSize.value,onChange:()=>{n.commit("rowSelectedChanged",t)},onClick:s=>s.stopPropagation(),modelValue:n.isSelected(t),ariaLabel:e.label})},sortable:!1,resizable:!1},index:{renderHeader({column:t}){return t.label||"#"},renderCell({column:t,$index:e}){let n=e+1;const r=t.index;return vt(r)?n=e+r:pt(r)&&(n=r(e)),bt("div",{},[n])},sortable:!1},expand:{renderHeader({column:t}){return t.label||""},renderCell({row:t,store:e,expanded:n}){const{ns:r}=e,s=[r.e("expand-icon")];return n&&s.push(r.em("expand-icon","expanded")),bt("div",{class:s,onClick:function(o){o.stopPropagation(),e.toggleRowExpansion(t)}},{default:()=>[bt(lt,null,{default:()=>[bt(cs)]})]})},sortable:!1,resizable:!1}};function $le({row:t,column:e,$index:n}){var r;const s=e.property,i=s&&zc(t,s).value;return e&&e.formatter?e.formatter(t,e,i,n):((r=i==null?void 0:i.toString)==null?void 0:r.call(i))||""}function Mle({row:t,treeNode:e,store:n},r=!1){const{ns:s}=n;if(!e)return r?[bt("span",{class:s.e("placeholder")})]:null;const i=[],o=function(a){a.stopPropagation(),!e.loading&&n.loadOrToggle(t)};if(e.indent&&i.push(bt("span",{class:s.e("indent"),style:{"padding-left":`${e.indent}px`}})),wn(e.expanded)&&!e.noLazyChildren){const a=[s.e("expand-icon"),e.expanded?s.em("expand-icon","expanded"):""];let u=cs;e.loading&&(u=Ji),i.push(bt("div",{class:a,onClick:o},{default:()=>[bt(lt,{class:{[s.is("loading")]:e.loading}},{default:()=>[bt(u)]})]}))}else i.push(bt("span",{class:s.e("placeholder")}));return i}function ZC(t,e){return t.reduce((n,r)=>(n[r]=r,n),e)}function Nle(t,e){const n=Kt();return{registerComplexWatchers:()=>{const i=["fixed"],o={realWidth:"width",realMinWidth:"minWidth"},a=ZC(i,o);Object.keys(a).forEach(u=>{const l=o[u];hn(e,l)&&Ie(()=>e[l],c=>{let d=c;l==="width"&&u==="realWidth"&&(d=W1(c)),l==="minWidth"&&u==="realMinWidth"&&(d=DP(c)),n.columnConfig.value[l]=d,n.columnConfig.value[u]=d;const f=l==="fixed";t.value.store.scheduleLayout(f)})})},registerNormalWatchers:()=>{const i=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip","tooltipFormatter"],o={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},a=ZC(i,o);Object.keys(a).forEach(u=>{const l=o[u];hn(e,l)&&Ie(()=>e[l],c=>{n.columnConfig.value[u]=c})})}}}function Fle(t,e,n){const r=Kt(),s=H(""),i=H(!1),o=H(),a=H(),u=Oe("table");Fr(()=>{o.value=t.align?`is-${t.align}`:null,o.value}),Fr(()=>{a.value=t.headerAlign?`is-${t.headerAlign}`:o.value,a.value});const l=L(()=>{let S=r.vnode.vParent||r.parent;for(;S&&!S.tableId&&!S.columnId;)S=S.vnode.vParent||S.parent;return S}),c=L(()=>{const{store:S}=r.parent;if(!S)return!1;const{treeData:E}=S.states,x=E.value;return x&&Object.keys(x).length>0}),d=H(W1(t.width)),f=H(DP(t.minWidth)),h=S=>(d.value&&(S.width=d.value),f.value&&(S.minWidth=f.value),!d.value&&f.value&&(S.width=void 0),S.minWidth||(S.minWidth=80),S.realWidth=Number(an(S.width)?S.minWidth:S.width),S),p=S=>{const E=S.type,x=Ole[E]||{};Object.keys(x).forEach(A=>{const C=x[A];A!=="className"&&!an(C)&&(S[A]=C)});const k=Dle(E);if(k){const A=`${m(u.namespace)}-${k}`;S.className=S.className?`${S.className} ${A}`:A}return S},g=S=>{Ve(S)?S.forEach(x=>E(x)):E(S);function E(x){var k;((k=x==null?void 0:x.type)==null?void 0:k.name)==="ElTableColumn"&&(x.vParent=r)}};return{columnId:s,realAlign:o,isSubColumn:i,realHeaderAlign:a,columnOrTableParent:l,setColumnWidth:h,setColumnForcedProps:p,setColumnRenders:S=>{t.renderHeader||S.type!=="selection"&&(S.renderHeader=x=>(r.columnConfig.value.label,pe(e,"header",x,()=>[S.label]))),e["filter-icon"]&&(S.renderFilterIcon=x=>pe(e,"filter-icon",x));let E=S.renderCell;return S.type==="expand"?(S.renderCell=x=>bt("div",{class:"cell"},[E(x)]),n.value.renderExpanded=x=>e.default?e.default(x):e.default):(E=E||$le,S.renderCell=x=>{let k=null;if(e.default){const U=e.default(x);k=U.some(j=>j.type!==br)?U:E(x)}else k=E(x);const{columns:A}=n.value.store.states,C=A.value.findIndex(U=>U.type==="default"),_=c.value&&x.cellIndex===C,O=Mle(x,_),P={class:"cell",style:{}};return S.showOverflowTooltip&&(P.class=`${P.class} ${m(u.namespace)}-tooltip`,P.style={width:`${(x.column.realWidth||Number(x.column.width))-1}px`}),g(k),bt("div",P,[O,k])}),S},getPropsData:(...S)=>S.reduce((E,x)=>(Ve(x)&&x.forEach(k=>{E[k]=t[k]}),E),{}),getColumnElIndex:(S,E)=>Array.prototype.indexOf.call(S,E),updateColumnOrder:()=>{n.value.store.commit("updateColumnOrder",r.columnConfig.value)}}}var Ble={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},tooltipFormatter:Function,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:t=>t.every(e=>["ascending","descending",null].includes(e))}};let Vle=1;var qP=se({name:"ElTableColumn",components:{ElCheckbox:li},props:Ble,setup(t,{slots:e}){const n=Kt(),r=H({}),s=L(()=>{let b=n.parent;for(;b&&!b.tableId;)b=b.parent;return b}),{registerNormalWatchers:i,registerComplexWatchers:o}=Nle(s,t),{columnId:a,isSubColumn:u,realHeaderAlign:l,columnOrTableParent:c,setColumnWidth:d,setColumnForcedProps:f,setColumnRenders:h,getPropsData:p,getColumnElIndex:g,realAlign:v,updateColumnOrder:y}=Fle(t,e,s),w=c.value;a.value=`${w.tableId||w.columnId}_column_${Vle++}`,cm(()=>{u.value=s.value!==w;const b=t.type||"default",S=t.sortable===""?!0:t.sortable,E=b==="selection"?!1:an(t.showOverflowTooltip)?w.props.showOverflowTooltip:t.showOverflowTooltip,x=an(t.tooltipFormatter)?w.props.tooltipFormatter:t.tooltipFormatter,k={...Ple[b],id:a.value,type:b,property:t.prop||t.property,align:v,headerAlign:l,showOverflowTooltip:E,tooltipFormatter:x,filterable:t.filters||t.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:S,index:t.index,rawColumnKey:n.vnode.key};let P=p(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);P=Oae(k,P),P=Mae(h,d,f)(P),r.value=P,i(),o()}),Ft(()=>{var b;const S=c.value,E=u.value?S.vnode.el.children:(b=S.refs.hiddenColumns)==null?void 0:b.children,x=()=>g(E||[],n.vnode.el);r.value.getColumnIndex=x,x()>-1&&s.value.store.commit("insertColumn",r.value,u.value?S.columnConfig.value:null,y)}),In(()=>{const b=r.value.getColumnIndex;(b?b():-1)>-1&&s.value.store.commit("removeColumn",r.value,u.value?w.columnConfig.value:null,y)}),n.columnId=a.value,n.columnConfig=r},render(){var t,e,n;try{const r=(e=(t=this.$slots).default)==null?void 0:e.call(t,{row:{},column:{},$index:-1}),s=[];if(Ve(r))for(const o of r)((n=o.type)==null?void 0:n.name)==="ElTableColumn"||o.shapeFlag&2?s.push(o):o.type===dt&&Ve(o.children)&&o.children.forEach(a=>{(a==null?void 0:a.patchFlag)!==1024&&!ut(a==null?void 0:a.children)&&s.push(a)});return bt("div",s)}catch{return bt("div",[])}}});const Ule=Dt(Rle,{TableColumn:qP}),Hle=Gn(qP);var Od=(t=>(t.ASC="asc",t.DESC="desc",t))(Od||{}),$d=(t=>(t.CENTER="center",t.RIGHT="right",t))($d||{}),YP=(t=>(t.LEFT="left",t.RIGHT="right",t))(YP||{});const Sy={asc:"desc",desc:"asc"},Md=Symbol("placeholder"),jle=(t,e,n)=>{var r;const s={flexGrow:0,flexShrink:0,...n?{}:{flexGrow:t.flexGrow||0,flexShrink:t.flexShrink||1}};n||(s.flexShrink=1);const i={...(r=t.style)!=null?r:{},...s,flexBasis:"auto",width:t.width};return e||(t.maxWidth&&(i.maxWidth=t.maxWidth),t.minWidth&&(i.minWidth=t.minWidth)),i};function Kle(t,e,n){const r=L(()=>m(e).map((v,y)=>{var w,b;return{...v,key:(b=(w=v.key)!=null?w:v.dataKey)!=null?b:y}})),s=L(()=>m(r).filter(v=>!v.hidden)),i=L(()=>m(s).filter(v=>v.fixed==="left"||v.fixed===!0)),o=L(()=>m(s).filter(v=>v.fixed==="right")),a=L(()=>m(s).filter(v=>!v.fixed)),u=L(()=>{const v=[];return m(i).forEach(y=>{v.push({...y,placeholderSign:Md})}),m(a).forEach(y=>{v.push(y)}),m(o).forEach(y=>{v.push({...y,placeholderSign:Md})}),v}),l=L(()=>m(i).length||m(o).length),c=L(()=>m(r).reduce((v,y)=>(v[y.key]=jle(y,m(n),t.fixed),v),{})),d=L(()=>m(s).reduce((v,y)=>v+y.width,0)),f=v=>m(r).find(y=>y.key===v),h=v=>m(c)[v],p=(v,y)=>{v.width=y};function g(v){var y;const{key:w}=v.currentTarget.dataset;if(!w)return;const{sortState:b,sortBy:S}=t;let E=Od.ASC;Bt(b)?E=Sy[b[w]]:E=Sy[S.order],(y=t.onColumnSort)==null||y.call(t,{column:f(w),key:w,order:E})}return{columns:r,columnsStyles:c,columnsTotalWidth:d,fixedColumnsOnLeft:i,fixedColumnsOnRight:o,hasFixedColumns:l,mainColumns:u,normalColumns:a,visibleColumns:s,getColumn:f,getColumnStyle:h,updateColumnWidth:p,onColumnSorted:g}}const zle=(t,{mainTableRef:e,leftTableRef:n,rightTableRef:r,onMaybeEndReached:s})=>{const i=H({scrollLeft:0,scrollTop:0});function o(h){var p,g,v;const{scrollTop:y}=h;(p=e.value)==null||p.scrollTo(h),(g=n.value)==null||g.scrollToTop(y),(v=r.value)==null||v.scrollToTop(y)}function a(h){i.value=h,o(h)}function u(h){i.value.scrollTop=h,o(m(i))}function l(h){var p,g;i.value.scrollLeft=h,(g=(p=e.value)==null?void 0:p.scrollTo)==null||g.call(p,m(i))}function c(h){var p;a(h),(p=t.onScroll)==null||p.call(t,h)}function d({scrollTop:h}){const{scrollTop:p}=m(i);h!==p&&u(h)}function f(h,p="auto"){var g;(g=e.value)==null||g.scrollToRow(h,p)}return Ie(()=>m(i).scrollTop,(h,p)=>{h>p&&s()}),{scrollPos:i,scrollTo:a,scrollToLeft:l,scrollToTop:u,scrollToRow:f,onScroll:c,onVerticalScroll:d}},Wle=(t,{mainTableRef:e,leftTableRef:n,rightTableRef:r,tableInstance:s,ns:i,isScrolling:o})=>{const a=Kt(),{emit:u}=a,l=On(!1),c=H(t.defaultExpandedRowKeys||[]),d=H(-1),f=On(null),h=H({}),p=H({}),g=On({}),v=On({}),y=On({}),w=L(()=>vt(t.estimatedRowHeight));function b(_){var O;(O=t.onRowsRendered)==null||O.call(t,_),_.rowCacheEnd>m(d)&&(d.value=_.rowCacheEnd)}function S({hovered:_,rowKey:O}){if(o.value)return;s.vnode.el.querySelectorAll(`[rowkey="${String(O)}"]`).forEach(j=>{_?j.classList.add(i.is("hovered")):j.classList.remove(i.is("hovered"))})}function E({expanded:_,rowData:O,rowIndex:P,rowKey:U}){var j,N;const R=[...m(c)],V=R.indexOf(U);_?V===-1&&R.push(U):V>-1&&R.splice(V,1),c.value=R,u("update:expandedRowKeys",R),(j=t.onRowExpand)==null||j.call(t,{expanded:_,rowData:O,rowIndex:P,rowKey:U}),(N=t.onExpandedRowsChange)==null||N.call(t,R)}const x=_s(()=>{var _,O,P,U;l.value=!0,h.value={...m(h),...m(p)},k(m(f),!1),p.value={},f.value=null,(_=e.value)==null||_.forceUpdate(),(O=n.value)==null||O.forceUpdate(),(P=r.value)==null||P.forceUpdate(),(U=a.proxy)==null||U.$forceUpdate(),l.value=!1},0);function k(_,O=!1){m(w)&&[e,n,r].forEach(P=>{const U=m(P);U&&U.resetAfterRowIndex(_,O)})}function A(_,O,P){const U=m(f);(U===null||U>P)&&(f.value=P),p.value[_]=O}function C({rowKey:_,height:O,rowIndex:P},U){U?U===YP.RIGHT?y.value[_]=O:g.value[_]=O:v.value[_]=O;const j=Math.max(...[g,y,v].map(N=>N.value[_]||0));m(h)[_]!==j&&(A(_,j,P),x())}return{expandedRowKeys:c,lastRenderedRowIndex:d,isDynamic:w,isResetting:l,rowHeights:h,resetAfterIndex:k,onRowExpanded:E,onRowHovered:S,onRowsRendered:b,onRowHeightChange:C}},Gle=(t,{expandedRowKeys:e,lastRenderedRowIndex:n,resetAfterIndex:r})=>{const s=H({}),i=L(()=>{const a={},{data:u,rowKey:l}=t,c=m(e);if(!c||!c.length)return u;const d=[],f=new Set;c.forEach(p=>f.add(p));let h=u.slice();for(h.forEach(p=>a[p[l]]=0);h.length>0;){const p=h.shift();d.push(p),f.has(p[l])&&Ve(p.children)&&p.children.length>0&&(h=[...p.children,...h],p.children.forEach(g=>a[g[l]]=a[p[l]]+1))}return s.value=a,d}),o=L(()=>{const{data:a,expandColumnKey:u}=t;return u?m(i):a});return Ie(o,(a,u)=>{a!==u&&(n.value=-1,r(0,!0))}),{data:o,depthMap:s}},qle=(t,e)=>t+e,qh=t=>Ve(t)?t.reduce(qle,0):t,vl=(t,e,n={})=>pt(t)?t(e):t??n,pa=t=>(["width","maxWidth","minWidth","height"].forEach(e=>{t[e]=Xn(t[e])}),t),XP=t=>$n(t)?e=>bt(t,e):t,Yle=(t,{columnsTotalWidth:e,rowsHeight:n,fixedColumnsOnLeft:r,fixedColumnsOnRight:s})=>{const i=L(()=>{const{fixed:y,width:w,vScrollbarSize:b}=t,S=w-b;return y?Math.max(Math.round(m(e)),S):S}),o=L(()=>{const{height:y=0,maxHeight:w=0,footerHeight:b,hScrollbarSize:S}=t;if(w>0){const E=m(f),x=m(n),A=m(d)+E+x+S;return Math.min(A,w-b)}return y-b}),a=L(()=>{const{maxHeight:y}=t,w=m(o);if(vt(y)&&y>0)return w;const b=m(n)+m(d)+m(f);return Math.min(w,b)}),u=y=>y.width,l=L(()=>qh(m(r).map(u))),c=L(()=>qh(m(s).map(u))),d=L(()=>qh(t.headerHeight)),f=L(()=>{var y;return(((y=t.fixedData)==null?void 0:y.length)||0)*t.rowHeight}),h=L(()=>m(o)-m(d)-m(f)),p=L(()=>{const{style:y={},height:w,width:b}=t;return pa({...y,height:w,width:b})}),g=L(()=>pa({height:t.footerHeight})),v=L(()=>({top:Xn(m(d)),bottom:Xn(t.footerHeight),width:Xn(t.width)}));return{bodyWidth:i,fixedTableHeight:a,mainTableHeight:o,leftTableWidth:l,rightTableWidth:c,windowHeight:h,footerHeight:g,emptyStyle:v,rootStyle:p,headerHeight:d}};function Xle(t){const e=H(),n=H(),r=H(),{columns:s,columnsStyles:i,columnsTotalWidth:o,fixedColumnsOnLeft:a,fixedColumnsOnRight:u,hasFixedColumns:l,mainColumns:c,onColumnSorted:d}=Kle(t,En(t,"columns"),En(t,"fixed")),{scrollTo:f,scrollToLeft:h,scrollToTop:p,scrollToRow:g,onScroll:v,onVerticalScroll:y,scrollPos:w}=zle(t,{mainTableRef:e,leftTableRef:n,rightTableRef:r,onMaybeEndReached:re}),b=Oe("table-v2"),S=Kt(),E=On(!1),{expandedRowKeys:x,lastRenderedRowIndex:k,isDynamic:A,isResetting:C,rowHeights:_,resetAfterIndex:O,onRowExpanded:P,onRowHeightChange:U,onRowHovered:j,onRowsRendered:N}=Wle(t,{mainTableRef:e,leftTableRef:n,rightTableRef:r,tableInstance:S,ns:b,isScrolling:E}),{data:R,depthMap:V}=Gle(t,{expandedRowKeys:x,lastRenderedRowIndex:k,resetAfterIndex:O}),D=L(()=>{const{estimatedRowHeight:ve,rowHeight:ke}=t,Ee=m(R);return vt(ve)?Object.values(m(_)).reduce((be,Se)=>be+Se,0):Ee.length*ke}),{bodyWidth:M,fixedTableHeight:K,mainTableHeight:q,leftTableWidth:ee,rightTableWidth:X,windowHeight:te,footerHeight:ue,emptyStyle:he,rootStyle:Z,headerHeight:ce}=Yle(t,{columnsTotalWidth:o,fixedColumnsOnLeft:a,fixedColumnsOnRight:u,rowsHeight:D}),ae=H(),Te=L(()=>{const ve=m(R).length===0;return Ve(t.fixedData)?t.fixedData.length===0&&ve:ve});function Ce(ve){const{estimatedRowHeight:ke,rowHeight:Ee,rowKey:be}=t;return ke?m(_)[m(R)[ve][be]]||ke:Ee}const z=H(!1);function re(){const{onEndReached:ve}=t;if(!ve)return;const{scrollTop:ke}=m(w),Ee=m(D),be=m(te),Se=Ee-(ke+be)+t.hScrollbarSize;!z.value&&m(k)>=0&&Ee<=ke+m(q)-m(ce)?(z.value=!0,ve(Se)):z.value=!1}return Ie(()=>m(D),()=>z.value=!1),Ie(()=>t.expandedRowKeys,ve=>x.value=ve,{deep:!0}),{columns:s,containerRef:ae,mainTableRef:e,leftTableRef:n,rightTableRef:r,isDynamic:A,isResetting:C,isScrolling:E,hasFixedColumns:l,columnsStyles:i,columnsTotalWidth:o,data:R,expandedRowKeys:x,depthMap:V,fixedColumnsOnLeft:a,fixedColumnsOnRight:u,mainColumns:c,bodyWidth:M,emptyStyle:he,rootStyle:Z,footerHeight:ue,mainTableHeight:q,fixedTableHeight:K,leftTableWidth:ee,rightTableWidth:X,showEmpty:Te,getRowHeight:Ce,onColumnSorted:d,onRowHovered:j,onRowExpanded:P,onRowsRendered:N,onRowHeightChange:U,scrollTo:f,scrollToLeft:h,scrollToTop:p,scrollToRow:g,onScroll:v,onVerticalScroll:y}}const X1=Symbol("tableV2"),QP=String,sf={type:de(Array),required:!0},Q1={type:de(Array)},ZP={...Q1,required:!0},Qle=String,JC={type:de(Array),default:()=>Wn([])},qa={type:Number,required:!0},JP={type:de([String,Number,Symbol]),default:"id"},ek={type:de(Object)},Ja=Ke({class:String,columns:sf,columnsStyles:{type:de(Object),required:!0},depth:Number,expandColumnKey:Qle,estimatedRowHeight:{...ol.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:de(Function)},onRowHover:{type:de(Function)},onRowHeightChange:{type:de(Function)},rowData:{type:de(Object),required:!0},rowEventHandlers:{type:de(Object)},rowIndex:{type:Number,required:!0},rowKey:JP,style:{type:de(Object)}}),$v={type:Number,required:!0},Z1=Ke({class:String,columns:sf,fixedHeaderData:{type:de(Array)},headerData:{type:de(Array),required:!0},headerHeight:{type:de([Number,Array]),default:50},rowWidth:$v,rowHeight:{type:Number,default:50},height:$v,width:$v}),Yh=Ke({columns:sf,data:ZP,fixedData:Q1,estimatedRowHeight:Ja.estimatedRowHeight,width:qa,height:qa,headerWidth:qa,headerHeight:Z1.headerHeight,bodyWidth:qa,rowHeight:qa,cache:SP.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:ol.scrollbarAlwaysOn,scrollbarStartGap:ol.scrollbarStartGap,scrollbarEndGap:ol.scrollbarEndGap,class:QP,style:ek,containerStyle:ek,getRowHeight:{type:de(Function),required:!0},rowKey:Ja.rowKey,onRowsRendered:{type:de(Function)},onScroll:{type:de(Function)}}),Zle=Ke({cache:Yh.cache,estimatedRowHeight:Ja.estimatedRowHeight,rowKey:JP,headerClass:{type:de([String,Function])},headerProps:{type:de([Object,Function])},headerCellProps:{type:de([Object,Function])},headerHeight:Z1.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:de([String,Function])},rowProps:{type:de([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:de([Object,Function])},columns:sf,data:ZP,dataGetter:{type:de(Function)},fixedData:Q1,expandColumnKey:Ja.expandColumnKey,expandedRowKeys:JC,defaultExpandedRowKeys:JC,class:QP,fixed:Boolean,style:{type:de(Object)},width:qa,height:qa,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:ol.hScrollbarSize,vScrollbarSize:ol.vScrollbarSize,scrollbarAlwaysOn:xP.alwaysOn,sortBy:{type:de(Object),default:()=>({})},sortState:{type:de(Object),default:void 0},onColumnSort:{type:de(Function)},onExpandedRowsChange:{type:de(Function)},onEndReached:{type:de(Function)},onRowExpand:Ja.onRowExpand,onScroll:Yh.onScroll,onRowsRendered:Yh.onRowsRendered,rowEventHandlers:Ja.rowEventHandlers}),Jle="ElTableV2Header",eue=se({name:Jle,props:Z1,setup(t,{slots:e,expose:n}){const r=Oe("table-v2"),s=nt("tableV2GridScrollLeft"),i=H(),o=L(()=>pa({width:t.width,height:t.height})),a=L(()=>pa({width:t.rowWidth,height:t.height})),u=L(()=>Zr(m(t.headerHeight))),l=f=>{const h=m(i);ft(()=>{h!=null&&h.scroll&&h.scroll({left:f})})},c=()=>{const f=r.e("fixed-header-row"),{columns:h,fixedHeaderData:p,rowHeight:g}=t;return p==null?void 0:p.map((v,y)=>{var w;const b=pa({height:g,width:"100%"});return(w=e.fixed)==null?void 0:w.call(e,{class:f,columns:h,rowData:v,rowIndex:-(y+1),style:b})})},d=()=>{const f=r.e("dynamic-header-row"),{columns:h}=t;return m(u).map((p,g)=>{var v;const y=pa({width:"100%",height:p});return(v=e.dynamic)==null?void 0:v.call(e,{class:f,columns:h,headerIndex:g,style:y})})};return ki(()=>{s!=null&&s.value&&l(s.value)}),n({scrollToLeft:l}),()=>{if(!(t.height<=0))return ie("div",{ref:i,class:t.class,style:m(o),role:"rowgroup"},[ie("div",{style:m(a),class:r.e("header")},[d(),c()])])}}});var tue=eue;const nue=({atXEndEdge:t,atXStartEdge:e,atYEndEdge:n,atYStartEdge:r},s)=>{let i=null,o=0,a=0;const u=(c,d)=>{const f=c<=0&&e.value||c>=0&&t.value,h=d<=0&&r.value||d>=0&&n.value;return f&&h};return{hasReachedEdge:u,onWheel:c=>{ml(i);let d=c.deltaX,f=c.deltaY;Math.abs(d)>Math.abs(f)?f=0:d=0,c.shiftKey&&f!==0&&(d=f,f=0),!(u(o,a)&&u(o+d,a+f))&&(o+=d,a+=f,c.preventDefault(),i=ka(()=>{s(o,a),o=0,a=0}))}}},eD=({name:t,clearCache:e,getColumnPosition:n,getColumnStartIndexForOffset:r,getColumnStopIndexForStartIndex:s,getEstimatedTotalHeight:i,getEstimatedTotalWidth:o,getColumnOffset:a,getRowOffset:u,getRowPosition:l,getRowStartIndexForOffset:c,getRowStopIndexForStartIndex:d,initCache:f,injectToInstance:h,validateProps:p})=>se({name:t??"ElVirtualList",props:ol,emits:[Up,Hp],setup(g,{emit:v,expose:y,slots:w}){const b=Oe("vl");p(g);const S=Kt(),E=H(f(g,S));h==null||h(S,E);const x=H(),k=H(),A=H(),C=H(null),_=H({isScrolling:!1,scrollLeft:vt(g.initScrollLeft)?g.initScrollLeft:0,scrollTop:vt(g.initScrollTop)?g.initScrollTop:0,updateRequested:!1,xAxisScrollDir:Gl,yAxisScrollDir:Gl}),O=vP(),P=L(()=>Number.parseInt(`${g.height}`,10)),U=L(()=>Number.parseInt(`${g.width}`,10)),j=L(()=>{const{totalColumn:be,totalRow:Se,columnCache:_e}=g,{isScrolling:Ne,xAxisScrollDir:Me,scrollLeft:st}=m(_);if(be===0||Se===0)return[0,0,0,0];const qe=r(g,st,m(E)),Ae=s(g,qe,st,m(E)),et=!Ne||Me===jp?Math.max(1,_e):1,St=!Ne||Me===Gl?Math.max(1,_e):1;return[Math.max(0,qe-et),Math.max(0,Math.min(be-1,Ae+St)),qe,Ae]}),N=L(()=>{const{totalColumn:be,totalRow:Se,rowCache:_e}=g,{isScrolling:Ne,yAxisScrollDir:Me,scrollTop:st}=m(_);if(be===0||Se===0)return[0,0,0,0];const qe=c(g,st,m(E)),Ae=d(g,qe,st,m(E)),et=!Ne||Me===jp?Math.max(1,_e):1,St=!Ne||Me===Gl?Math.max(1,_e):1;return[Math.max(0,qe-et),Math.max(0,Math.min(Se-1,Ae+St)),qe,Ae]}),R=L(()=>i(g,m(E))),V=L(()=>o(g,m(E))),D=L(()=>{var be;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:g.direction,height:vt(g.height)?`${g.height}px`:g.height,width:vt(g.width)?`${g.width}px`:g.width},(be=g.style)!=null?be:{}]}),M=L(()=>{const be=`${m(V)}px`;return{height:`${m(R)}px`,pointerEvents:m(_).isScrolling?"none":void 0,width:be}}),K=()=>{const{totalColumn:be,totalRow:Se}=g;if(be>0&&Se>0){const[Ae,et,St,Lt]=m(j),[Pt,en,zt,bn]=m(N);v(Up,{columnCacheStart:Ae,columnCacheEnd:et,rowCacheStart:Pt,rowCacheEnd:en,columnVisibleStart:St,columnVisibleEnd:Lt,rowVisibleStart:zt,rowVisibleEnd:bn})}const{scrollLeft:_e,scrollTop:Ne,updateRequested:Me,xAxisScrollDir:st,yAxisScrollDir:qe}=m(_);v(Hp,{xAxisScrollDir:st,scrollLeft:_e,yAxisScrollDir:qe,scrollTop:Ne,updateRequested:Me})},q=be=>{const{clientHeight:Se,clientWidth:_e,scrollHeight:Ne,scrollLeft:Me,scrollTop:st,scrollWidth:qe}=be.currentTarget,Ae=m(_);if(Ae.scrollTop===st&&Ae.scrollLeft===Me)return;let et=Me;if(FC(g.direction))switch(zp()){case Pd:et=-Me;break;case z1:et=qe-_e-Me;break}_.value={...Ae,isScrolling:!0,scrollLeft:et,scrollTop:Math.max(0,Math.min(st,Ne-Se)),updateRequested:!0,xAxisScrollDir:Za(Ae.scrollLeft,et),yAxisScrollDir:Za(Ae.scrollTop,st)},ft(()=>ce()),ae(),K()},ee=(be,Se)=>{const _e=m(P),Ne=(R.value-_e)/Se*be;ue({scrollTop:Math.min(R.value-_e,Ne)})},X=(be,Se)=>{const _e=m(U),Ne=(V.value-_e)/Se*be;ue({scrollLeft:Math.min(V.value-_e,Ne)})},{onWheel:te}=nue({atXStartEdge:L(()=>_.value.scrollLeft<=0),atXEndEdge:L(()=>_.value.scrollLeft>=V.value-m(U)),atYStartEdge:L(()=>_.value.scrollTop<=0),atYEndEdge:L(()=>_.value.scrollTop>=R.value-m(P))},(be,Se)=>{var _e,Ne,Me,st;(Ne=(_e=k.value)==null?void 0:_e.onMouseUp)==null||Ne.call(_e),(st=(Me=A.value)==null?void 0:Me.onMouseUp)==null||st.call(Me);const qe=m(U),Ae=m(P);ue({scrollLeft:Math.min(_.value.scrollLeft+be,V.value-qe),scrollTop:Math.min(_.value.scrollTop+Se,R.value-Ae)})});Cn(x,"wheel",te,{passive:!1});const ue=({scrollLeft:be=_.value.scrollLeft,scrollTop:Se=_.value.scrollTop})=>{be=Math.max(be,0),Se=Math.max(Se,0);const _e=m(_);Se===_e.scrollTop&&be===_e.scrollLeft||(_.value={..._e,xAxisScrollDir:Za(_e.scrollLeft,be),yAxisScrollDir:Za(_e.scrollTop,Se),scrollLeft:be,scrollTop:Se,updateRequested:!0},ft(()=>ce()),ae(),K())},he=(be=0,Se=0,_e=ei)=>{const Ne=m(_);Se=Math.max(0,Math.min(Se,g.totalColumn-1)),be=Math.max(0,Math.min(be,g.totalRow-1));const Me=pR(b.namespace.value),st=m(E),qe=i(g,st),Ae=o(g,st);ue({scrollLeft:a(g,Se,_e,Ne.scrollLeft,st,Ae>g.width?Me:0),scrollTop:u(g,be,_e,Ne.scrollTop,st,qe>g.height?Me:0)})},Z=(be,Se)=>{const{columnWidth:_e,direction:Ne,rowHeight:Me}=g,st=O.value(e&&_e,e&&Me,e&&Ne),qe=`${be},${Se}`;if(hn(st,qe))return st[qe];{const[,Ae]=n(g,Se,m(E)),et=m(E),St=FC(Ne),[Lt,Pt]=l(g,be,et),[en]=n(g,Se,et);return st[qe]={position:"absolute",left:St?void 0:`${Ae}px`,right:St?`${Ae}px`:void 0,top:`${Pt}px`,height:`${Lt}px`,width:`${en}px`},st[qe]}},ce=()=>{_.value.isScrolling=!1,ft(()=>{O.value(-1,null,null)})};Ft(()=>{if(!on)return;const{initScrollLeft:be,initScrollTop:Se}=g,_e=m(x);_e&&(vt(be)&&(_e.scrollLeft=be),vt(Se)&&(_e.scrollTop=Se)),K()});const ae=()=>{const{direction:be}=g,{scrollLeft:Se,scrollTop:_e,updateRequested:Ne}=m(_),Me=m(x);if(Ne&&Me){if(be===lu)switch(zp()){case Pd:{Me.scrollLeft=-Se;break}case K1:{Me.scrollLeft=Se;break}default:{const{clientWidth:st,scrollWidth:qe}=Me;Me.scrollLeft=qe-st-Se;break}}else Me.scrollLeft=Math.max(0,Se);Me.scrollTop=Math.max(0,_e)}},{resetAfterColumnIndex:Te,resetAfterRowIndex:Ce,resetAfter:z}=S.proxy;y({windowRef:x,innerRef:C,getItemStyleCache:O,scrollTo:ue,scrollToItem:he,states:_,resetAfterColumnIndex:Te,resetAfterRowIndex:Ce,resetAfter:z});const re=()=>{const{scrollbarAlwaysOn:be,scrollbarStartGap:Se,scrollbarEndGap:_e,totalColumn:Ne,totalRow:Me}=g,st=m(U),qe=m(P),Ae=m(V),et=m(R),{scrollLeft:St,scrollTop:Lt}=m(_),Pt=bt(uy,{ref:k,alwaysOn:be,startGap:Se,endGap:_e,class:b.e("horizontal"),clientSize:st,layout:"horizontal",onScroll:X,ratio:st*100/Ae,scrollFrom:St/(Ae-st),total:Me,visible:!0}),en=bt(uy,{ref:A,alwaysOn:be,startGap:Se,endGap:_e,class:b.e("vertical"),clientSize:qe,layout:"vertical",onScroll:ee,ratio:qe*100/et,scrollFrom:Lt/(et-qe),total:Ne,visible:!0});return{horizontalScrollbar:Pt,verticalScrollbar:en}},ve=()=>{var be;const[Se,_e]=m(j),[Ne,Me]=m(N),{data:st,totalColumn:qe,totalRow:Ae,useIsScrolling:et,itemKey:St}=g,Lt=[];if(Ae>0&&qe>0)for(let Pt=Ne;Pt<=Me;Pt++)for(let en=Se;en<=_e;en++){const zt=St({columnIndex:en,data:st,rowIndex:Pt});Lt.push(bt(dt,{key:zt},(be=w.default)==null?void 0:be.call(w,{columnIndex:en,data:st,isScrolling:et?m(_).isScrolling:void 0,style:Z(Pt,en),rowIndex:Pt})))}return Lt},ke=()=>{const be=jt(g.innerElement),Se=ve();return[bt(be,{style:m(M),ref:C},ut(be)?Se:{default:()=>Se})]};return()=>{const be=jt(g.containerElement),{horizontalScrollbar:Se,verticalScrollbar:_e}=re(),Ne=ke();return bt("div",{key:0,class:b.e("wrapper"),role:g.role},[bt(be,{class:g.className,style:m(D),onScroll:q,ref:x},ut(be)?Ne:{default:()=>Ne}),Se,_e])}}}),{max:qp,min:tD,floor:nD}=Math,rue={column:"columnWidth",row:"rowHeight"},wy={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},bo=(t,e,n,r)=>{const[s,i,o]=[n[r],t[rue[r]],n[wy[r]]];if(e>o){let a=0;if(o>=0){const u=s[o];a=u.offset+u.size}for(let u=o+1;u<=e;u++){const l=i(u);s[u]={offset:a,size:l},a+=l}n[wy[r]]=e}return s[e]},rD=(t,e,n,r,s,i)=>{for(;n<=r;){const o=n+nD((r-n)/2),a=bo(t,o,e,i).offset;if(a===s)return o;a<s?n=o+1:r=o-1}return qp(0,n-1)},sue=(t,e,n,r,s)=>{const i=s==="column"?t.totalColumn:t.totalRow;let o=1;for(;n<i&&bo(t,n,e,s).offset<r;)n+=o,o*=2;return rD(t,e,nD(n/2),tD(n,i-1),r,s)},tk=(t,e,n,r)=>{const[s,i]=[e[r],e[wy[r]]];return(i>0?s[i].offset:0)>=n?rD(t,e,0,i,n,r):sue(t,e,qp(0,i),n,r)},sD=({totalRow:t},{estimatedRowHeight:e,lastVisitedRowIndex:n,row:r})=>{let s=0;if(n>=t&&(n=t-1),n>=0){const a=r[n];s=a.offset+a.size}const o=(t-n-1)*e;return s+o},iD=({totalColumn:t},{column:e,estimatedColumnWidth:n,lastVisitedColumnIndex:r})=>{let s=0;if(r>t&&(r=t-1),r>=0){const a=e[r];s=a.offset+a.size}const o=(t-r-1)*n;return s+o},iue={column:iD,row:sD},nk=(t,e,n,r,s,i,o)=>{const[a,u]=[i==="row"?t.height:t.width,iue[i]],l=bo(t,e,s,i),c=u(t,s),d=qp(0,tD(c-a,l.offset)),f=qp(0,l.offset-a+o+l.size);switch(n===Ym&&(r>=f-a&&r<=d+a?n=ei:n=qi),n){case Rd:return d;case Ld:return f;case qi:return Math.round(f+(d-f)/2);case ei:default:return r>=f&&r<=d?r:f>d||r<f?f:d}},oue=eD({name:"ElDynamicSizeGrid",getColumnPosition:(t,e,n)=>{const r=bo(t,e,n,"column");return[r.size,r.offset]},getRowPosition:(t,e,n)=>{const r=bo(t,e,n,"row");return[r.size,r.offset]},getColumnOffset:(t,e,n,r,s,i)=>nk(t,e,n,r,s,"column",i),getRowOffset:(t,e,n,r,s,i)=>nk(t,e,n,r,s,"row",i),getColumnStartIndexForOffset:(t,e,n)=>tk(t,n,e,"column"),getColumnStopIndexForStartIndex:(t,e,n,r)=>{const s=bo(t,e,r,"column"),i=n+t.width;let o=s.offset+s.size,a=e;for(;a<t.totalColumn-1&&o<i;)a++,o+=bo(t,e,r,"column").size;return a},getEstimatedTotalHeight:sD,getEstimatedTotalWidth:iD,getRowStartIndexForOffset:(t,e,n)=>tk(t,n,e,"row"),getRowStopIndexForStartIndex:(t,e,n,r)=>{const{totalRow:s,height:i}=t,o=bo(t,e,r,"row"),a=n+i;let u=o.size+o.offset,l=e;for(;l<s-1&&u<a;)l++,u+=bo(t,l,r,"row").size;return l},injectToInstance:(t,e)=>{const n=({columnIndex:i,rowIndex:o},a)=>{var u,l;a=an(a)?!0:a,vt(i)&&(e.value.lastVisitedColumnIndex=Math.min(e.value.lastVisitedColumnIndex,i-1)),vt(o)&&(e.value.lastVisitedRowIndex=Math.min(e.value.lastVisitedRowIndex,o-1)),(u=t.exposed)==null||u.getItemStyleCache.value(-1,null,null),a&&((l=t.proxy)==null||l.$forceUpdate())},r=(i,o)=>{n({columnIndex:i},o)},s=(i,o)=>{n({rowIndex:i},o)};Object.assign(t.proxy,{resetAfterColumnIndex:r,resetAfterRowIndex:s,resetAfter:n})},initCache:({estimatedColumnWidth:t=ry,estimatedRowHeight:e=ry})=>({column:{},estimatedColumnWidth:t,estimatedRowHeight:e,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:t,rowHeight:e})=>{}}),aue=eD({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:t},e)=>[t,e*t],getRowPosition:({rowHeight:t},e)=>[t,e*t],getEstimatedTotalHeight:({totalRow:t,rowHeight:e})=>e*t,getEstimatedTotalWidth:({totalColumn:t,columnWidth:e})=>e*t,getColumnOffset:({totalColumn:t,columnWidth:e,width:n},r,s,i,o,a)=>{n=Number(n);const u=Math.max(0,t*e-n),l=Math.min(u,r*e),c=Math.max(0,r*e-n+a+e);switch(s==="smart"&&(i>=c-n&&i<=l+n?s=ei:s=qi),s){case Rd:return l;case Ld:return c;case qi:{const d=Math.round(c+(l-c)/2);return d<Math.ceil(n/2)?0:d>u+Math.floor(n/2)?u:d}case ei:default:return i>=c&&i<=l?i:c>l||i<c?c:l}},getRowOffset:({rowHeight:t,height:e,totalRow:n},r,s,i,o,a)=>{e=Number(e);const u=Math.max(0,n*t-e),l=Math.min(u,r*t),c=Math.max(0,r*t-e+a+t);switch(s===Ym&&(i>=c-e&&i<=l+e?s=ei:s=qi),s){case Rd:return l;case Ld:return c;case qi:{const d=Math.round(c+(l-c)/2);return d<Math.ceil(e/2)?0:d>u+Math.floor(e/2)?u:d}case ei:default:return i>=c&&i<=l?i:c>l||i<c?c:l}},getColumnStartIndexForOffset:({columnWidth:t,totalColumn:e},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getColumnStopIndexForStartIndex:({columnWidth:t,totalColumn:e,width:n},r,s)=>{const i=r*t,o=Math.ceil((n+s-i)/t);return Math.max(0,Math.min(e-1,r+o-1))},getRowStartIndexForOffset:({rowHeight:t,totalRow:e},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getRowStopIndexForStartIndex:({rowHeight:t,totalRow:e,height:n},r,s)=>{const i=r*t,o=Math.ceil((n+s-i)/t);return Math.max(0,Math.min(e-1,r+o-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:t,rowHeight:e})=>{}}),lue="ElTableV2Grid",uue=t=>{const e=H(),n=H(),r=H(0),s=L(()=>{const{data:v,rowHeight:y,estimatedRowHeight:w}=t;if(!w)return v.length*y}),i=L(()=>{const{fixedData:v,rowHeight:y}=t;return((v==null?void 0:v.length)||0)*y}),o=L(()=>qh(t.headerHeight)),a=L(()=>{const{height:v}=t;return Math.max(0,v-m(o)-m(i))}),u=L(()=>m(o)+m(i)>0),l=({data:v,rowIndex:y})=>v[y][t.rowKey];function c({rowCacheStart:v,rowCacheEnd:y,rowVisibleStart:w,rowVisibleEnd:b}){var S;(S=t.onRowsRendered)==null||S.call(t,{rowCacheStart:v,rowCacheEnd:y,rowVisibleStart:w,rowVisibleEnd:b})}function d(v,y){var w;(w=n.value)==null||w.resetAfterRowIndex(v,y)}function f(v,y){const w=m(e),b=m(n);Bt(v)?(w==null||w.scrollToLeft(v.scrollLeft),r.value=v.scrollLeft,b==null||b.scrollTo(v)):(w==null||w.scrollToLeft(v),r.value=v,b==null||b.scrollTo({scrollLeft:v,scrollTop:y}))}function h(v){var y;(y=m(n))==null||y.scrollTo({scrollTop:v})}function p(v,y){var w;(w=m(n))==null||w.scrollToItem(v,1,y)}function g(){var v,y;(v=m(n))==null||v.$forceUpdate(),(y=m(e))==null||y.$forceUpdate()}return Ie(()=>t.bodyWidth,()=>{var v;vt(t.estimatedRowHeight)&&((v=n.value)==null||v.resetAfter({columnIndex:0},!1))}),{bodyRef:n,forceUpdate:g,fixedRowHeight:i,gridHeight:a,hasHeader:u,headerHeight:o,headerRef:e,totalHeight:s,itemKey:l,onItemRendered:c,resetAfterRowIndex:d,scrollTo:f,scrollToTop:h,scrollToRow:p,scrollLeft:r}},cue=se({name:lue,props:Yh,setup(t,{slots:e,expose:n}){const{ns:r}=nt(X1),{bodyRef:s,fixedRowHeight:i,gridHeight:o,hasHeader:a,headerRef:u,headerHeight:l,totalHeight:c,forceUpdate:d,itemKey:f,onItemRendered:h,resetAfterRowIndex:p,scrollTo:g,scrollToTop:v,scrollToRow:y,scrollLeft:w}=uue(t);Jt("tableV2GridScrollLeft",w),lm(async()=>{var S;await ft();const E=(S=s.value)==null?void 0:S.states.scrollTop;E&&v(Math.round(E)+1)}),n({forceUpdate:d,totalHeight:c,scrollTo:g,scrollToTop:v,scrollToRow:y,resetAfterRowIndex:p});const b=()=>t.bodyWidth;return()=>{const{cache:S,columns:E,data:x,fixedData:k,useIsScrolling:A,scrollbarAlwaysOn:C,scrollbarEndGap:_,scrollbarStartGap:O,style:P,rowHeight:U,bodyWidth:j,estimatedRowHeight:N,headerWidth:R,height:V,width:D,getRowHeight:M,onScroll:K}=t,q=vt(N),ee=q?oue:aue,X=m(l);return ie("div",{role:"table",class:[r.e("table"),t.class],style:P},[ie(ee,{ref:s,data:x,useIsScrolling:A,itemKey:f,columnCache:0,columnWidth:q?b:j,totalColumn:1,totalRow:x.length,rowCache:S,rowHeight:q?M:U,width:D,height:m(o),class:r.e("body"),role:"rowgroup",scrollbarStartGap:O,scrollbarEndGap:_,scrollbarAlwaysOn:C,onScroll:K,onItemRendered:h,perfMode:!1},{default:te=>{var ue;const he=x[te.rowIndex];return(ue=e.row)==null?void 0:ue.call(e,{...te,columns:E,rowData:he})}}),m(a)&&ie(tue,{ref:u,class:r.e("header-wrapper"),columns:E,headerData:x,headerHeight:t.headerHeight,fixedHeaderData:k,rowWidth:R,rowHeight:U,width:D,height:Math.min(X+m(i),V)},{dynamic:e.header,fixed:e.row})])}}});var J1=cue;function due(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$n(t)}const fue=(t,{slots:e})=>{const{mainTableRef:n,...r}=t;return ie(J1,Yt({ref:n},r),due(e)?e:{default:()=>[e]})};var hue=fue;function pue(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$n(t)}const mue=(t,{slots:e})=>{if(!t.columns.length)return;const{leftTableRef:n,...r}=t;return ie(J1,Yt({ref:n},r),pue(e)?e:{default:()=>[e]})};var gue=mue;function vue(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$n(t)}const yue=(t,{slots:e})=>{if(!t.columns.length)return;const{rightTableRef:n,...r}=t;return ie(J1,Yt({ref:n},r),vue(e)?e:{default:()=>[e]})};var bue=yue;const Sue=t=>{const{isScrolling:e}=nt(X1),n=H(!1),r=H(),s=L(()=>vt(t.estimatedRowHeight)&&t.rowIndex>=0),i=(u=!1)=>{const l=m(r);if(!l)return;const{columns:c,onRowHeightChange:d,rowKey:f,rowIndex:h,style:p}=t,{height:g}=l.getBoundingClientRect();n.value=!0,ft(()=>{if(u||g!==Number.parseInt(p.height)){const v=c[0],y=(v==null?void 0:v.placeholderSign)===Md;d==null||d({rowKey:f,height:g,rowIndex:h},v&&!y&&v.fixed)}})},o=L(()=>{const{rowData:u,rowIndex:l,rowKey:c,onRowHover:d}=t,f=t.rowEventHandlers||{},h={};return Object.entries(f).forEach(([p,g])=>{pt(g)&&(h[p]=v=>{g({event:v,rowData:u,rowIndex:l,rowKey:c})})}),d&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:p,hovered:g})=>{const v=h[p];h[p]=y=>{d({event:y,hovered:g,rowData:u,rowIndex:l,rowKey:c}),v==null||v(y)}}),h}),a=u=>{const{onRowExpand:l,rowData:c,rowIndex:d,rowKey:f}=t;l==null||l({expanded:u,rowData:c,rowIndex:d,rowKey:f})};return Ft(()=>{m(s)&&i(!0)}),{isScrolling:e,measurable:s,measured:n,rowRef:r,eventHandlers:o,onExpand:a}},wue="ElTableV2TableRow",Eue=se({name:wue,props:Ja,setup(t,{expose:e,slots:n,attrs:r}){const{eventHandlers:s,isScrolling:i,measurable:o,measured:a,rowRef:u,onExpand:l}=Sue(t);return e({onExpand:l}),()=>{const{columns:c,columnsStyles:d,expandColumnKey:f,depth:h,rowData:p,rowIndex:g,style:v}=t;let y=c.map((w,b)=>{const S=Ve(p.children)&&p.children.length>0&&w.key===f;return n.cell({column:w,columns:c,columnIndex:b,depth:h,style:d[w.key],rowData:p,rowIndex:g,isScrolling:m(i),expandIconProps:S?{rowData:p,rowIndex:g,onExpand:l}:void 0})});if(n.row&&(y=n.row({cells:y.map(w=>Ve(w)&&w.length===1?w[0]:w),style:v,columns:c,depth:h,rowData:p,rowIndex:g,isScrolling:m(i)})),m(o)){const{height:w,...b}=v||{},S=m(a);return ie("div",Yt({ref:u,class:t.class,style:S?v:b,role:"row"},r,m(s)),[y])}return ie("div",Yt(r,{ref:u,class:t.class,style:v,role:"row"},m(s)),[y])}}});var xue=Eue;function Tue(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$n(t)}const Cue=(t,{slots:e})=>{const{columns:n,columnsStyles:r,depthMap:s,expandColumnKey:i,expandedRowKeys:o,estimatedRowHeight:a,hasFixedColumns:u,rowData:l,rowIndex:c,style:d,isScrolling:f,rowProps:h,rowClass:p,rowKey:g,rowEventHandlers:v,ns:y,onRowHovered:w,onRowExpanded:b}=t,S=vl(p,{columns:n,rowData:l,rowIndex:c},""),E=vl(h,{columns:n,rowData:l,rowIndex:c}),x=l[g],k=s[x]||0,A=!!i,C=c<0,_=[y.e("row"),S,{[y.e(`row-depth-${k}`)]:A&&c>=0,[y.is("expanded")]:A&&o.includes(x),[y.is("fixed")]:!k&&C,[y.is("customized")]:!!e.row}],O=u?w:void 0,P={...E,columns:n,columnsStyles:r,class:_,depth:k,expandColumnKey:i,estimatedRowHeight:C?void 0:a,isScrolling:f,rowIndex:c,rowData:l,rowKey:x,rowEventHandlers:v,style:d};return ie(xue,Yt(P,{onRowExpand:b,onMouseenter:N=>{O==null||O({hovered:!0,rowKey:x,event:N,rowData:l,rowIndex:c})},onMouseleave:N=>{O==null||O({hovered:!1,rowKey:x,event:N,rowData:l,rowIndex:c})},rowkey:x}),Tue(e)?e:{default:()=>[e]})};var kue=Cue;const eS=(t,{slots:e})=>{var n;const{cellData:r,style:s}=t,i=((n=r==null?void 0:r.toString)==null?void 0:n.call(r))||"",o=pe(e,"default",t,()=>[i]);return ie("div",{class:t.class,title:i,style:s},[o])};eS.displayName="ElTableV2Cell";eS.inheritAttrs=!1;var _ue=eS;const Aue=t=>{const{expanded:e,expandable:n,onExpand:r,style:s,size:i}=t,o={onClick:n?()=>r(!e):void 0,class:t.class};return ie(lt,Yt(o,{size:i,style:s}),{default:()=>[ie(cs,null,null)]})};var Iue=Aue;const oD=({columns:t,column:e,columnIndex:n,depth:r,expandIconProps:s,isScrolling:i,rowData:o,rowIndex:a,style:u,expandedRowKeys:l,ns:c,cellProps:d,expandColumnKey:f,indentSize:h,iconSize:p,rowKey:g},{slots:v})=>{const y=pa(u);if(e.placeholderSign===Md)return ie("div",{class:c.em("row-cell","placeholder"),style:y},null);const{cellRenderer:w,dataKey:b,dataGetter:S}=e,E=pt(S)?S({columns:t,column:e,columnIndex:n,rowData:o,rowIndex:a}):sr(o,b??""),x=vl(d,{cellData:E,columns:t,column:e,columnIndex:n,rowIndex:a,rowData:o}),k={class:c.e("cell-text"),columns:t,column:e,columnIndex:n,cellData:E,isScrolling:i,rowData:o,rowIndex:a},A=XP(w),C=A?A(k):pe(v,"default",k,()=>[ie(_ue,k,null)]),_=[c.e("row-cell"),e.class,e.align===$d.CENTER&&c.is("align-center"),e.align===$d.RIGHT&&c.is("align-right")],O=a>=0&&f&&e.key===f,P=a>=0&&l.includes(o[g]);let U;const j=`margin-inline-start: ${r*h}px;`;return O&&(Bt(s)?U=ie(Iue,Yt(s,{class:[c.e("expand-icon"),c.is("expanded",P)],size:p,expanded:P,style:j,expandable:!0}),null):U=ie("div",{style:[j,`width: ${p}px; height: ${p}px;`].join(" ")},null)),ie("div",Yt({class:_,style:y},x,{role:"cell"}),[U,C])};oD.inheritAttrs=!1;var rk=oD;const Rue=Ke({class:String,columns:sf,columnsStyles:{type:de(Object),required:!0},headerIndex:Number,style:{type:de(Object)}}),Lue=se({name:"ElTableV2HeaderRow",props:Rue,setup(t,{slots:e}){return()=>{const{columns:n,columnsStyles:r,headerIndex:s,style:i}=t;let o=n.map((a,u)=>e.cell({columns:n,column:a,columnIndex:u,headerIndex:s,style:r[a.key]}));return e.header&&(o=e.header({cells:o.map(a=>Ve(a)&&a.length===1?a[0]:a),columns:n,headerIndex:s})),ie("div",{class:t.class,style:i,role:"row"},[o])}}});var Pue=Lue;function Due(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$n(t)}const Oue=({columns:t,columnsStyles:e,headerIndex:n,style:r,headerClass:s,headerProps:i,ns:o},{slots:a})=>{const u={columns:t,headerIndex:n},l=[o.e("header-row"),vl(s,u,""),{[o.is("customized")]:!!a.header}],c={...vl(i,u),columnsStyles:e,class:l,columns:t,headerIndex:n,style:r};return ie(Pue,c,Due(a)?a:{default:()=>[a]})};var $ue=Oue;const tS=(t,{slots:e})=>pe(e,"default",t,()=>{var n,r;return[ie("div",{class:t.class,title:(n=t.column)==null?void 0:n.title},[(r=t.column)==null?void 0:r.title])]});tS.displayName="ElTableV2HeaderCell";tS.inheritAttrs=!1;var Mue=tS;const Nue=t=>{const{sortOrder:e}=t;return ie(lt,{size:14,class:t.class},{default:()=>[e===Od.ASC?ie(aU,null,null):ie(iU,null,null)]})};var Fue=Nue;const Bue=(t,{slots:e})=>{const{column:n,ns:r,style:s,onColumnSorted:i}=t,o=pa(s);if(n.placeholderSign===Md)return ie("div",{class:r.em("header-row-cell","placeholder"),style:o},null);const{headerCellRenderer:a,headerClass:u,sortable:l}=n,c={...t,class:r.e("header-cell-text")},d=XP(a),f=d?d(c):pe(e,"default",c,()=>[ie(Mue,c,null)]),{sortBy:h,sortState:p,headerCellProps:g}=t;let v,y;if(p){const S=p[n.key];v=!!Sy[S],y=v?S:Od.ASC}else v=n.key===h.key,y=v?h.order:Od.ASC;const w=[r.e("header-cell"),vl(u,t,""),n.align===$d.CENTER&&r.is("align-center"),n.align===$d.RIGHT&&r.is("align-right"),l&&r.is("sortable")],b={...vl(g,t),onClick:n.sortable?i:void 0,class:w,style:o,"data-key":n.key};return ie("div",Yt(b,{role:"columnheader"}),[f,l&&ie(Fue,{class:[r.e("sort-icon"),v&&r.is("sorting")],sortOrder:y},null)])};var sk=Bue;const aD=(t,{slots:e})=>{var n;return ie("div",{class:t.class,style:t.style},[(n=e.default)==null?void 0:n.call(e)])};aD.displayName="ElTableV2Footer";var Vue=aD;const lD=(t,{slots:e})=>{const n=pe(e,"default",{},()=>[ie(nP,null,null)]);return ie("div",{class:t.class,style:t.style},[n])};lD.displayName="ElTableV2Empty";var Uue=lD;const uD=(t,{slots:e})=>{var n;return ie("div",{class:t.class,style:t.style},[(n=e.default)==null?void 0:n.call(e)])};uD.displayName="ElTableV2Overlay";var Hue=uD;function wc(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$n(t)}const jue="ElTableV2",Kue=se({name:jue,props:Zle,setup(t,{slots:e,expose:n}){const r=Oe("table-v2"),{columnsStyles:s,fixedColumnsOnLeft:i,fixedColumnsOnRight:o,mainColumns:a,mainTableHeight:u,fixedTableHeight:l,leftTableWidth:c,rightTableWidth:d,data:f,depthMap:h,expandedRowKeys:p,hasFixedColumns:g,mainTableRef:v,leftTableRef:y,rightTableRef:w,isDynamic:b,isResetting:S,isScrolling:E,bodyWidth:x,emptyStyle:k,rootStyle:A,footerHeight:C,showEmpty:_,scrollTo:O,scrollToLeft:P,scrollToTop:U,scrollToRow:j,getRowHeight:N,onColumnSorted:R,onRowHeightChange:V,onRowHovered:D,onRowExpanded:M,onRowsRendered:K,onScroll:q,onVerticalScroll:ee}=Xle(t);return n({scrollTo:O,scrollToLeft:P,scrollToTop:U,scrollToRow:j}),Jt(X1,{ns:r,isResetting:S,isScrolling:E}),()=>{const{cache:X,cellProps:te,estimatedRowHeight:ue,expandColumnKey:he,fixedData:Z,headerHeight:ce,headerClass:ae,headerProps:Te,headerCellProps:Ce,sortBy:z,sortState:re,rowHeight:ve,rowClass:ke,rowEventHandlers:Ee,rowKey:be,rowProps:Se,scrollbarAlwaysOn:_e,indentSize:Ne,iconSize:Me,useIsScrolling:st,vScrollbarSize:qe,width:Ae}=t,et=m(f),St={cache:X,class:r.e("main"),columns:m(a),data:et,fixedData:Z,estimatedRowHeight:ue,bodyWidth:m(x),headerHeight:ce,headerWidth:m(x),height:m(u),mainTableRef:v,rowKey:be,rowHeight:ve,scrollbarAlwaysOn:_e,scrollbarStartGap:2,scrollbarEndGap:qe,useIsScrolling:st,width:Ae,getRowHeight:N,onRowsRendered:K,onScroll:q},Lt=m(c),Pt=m(l),en={cache:X,class:r.e("left"),columns:m(i),data:et,fixedData:Z,estimatedRowHeight:ue,leftTableRef:y,rowHeight:ve,bodyWidth:Lt,headerWidth:Lt,headerHeight:ce,height:Pt,rowKey:be,scrollbarAlwaysOn:_e,scrollbarStartGap:2,scrollbarEndGap:qe,useIsScrolling:st,width:Lt,getRowHeight:N,onScroll:ee},zt=m(d),bn={cache:X,class:r.e("right"),columns:m(o),data:et,fixedData:Z,estimatedRowHeight:ue,rightTableRef:w,rowHeight:ve,bodyWidth:zt,headerWidth:zt,headerHeight:ce,height:Pt,rowKey:be,scrollbarAlwaysOn:_e,scrollbarStartGap:2,scrollbarEndGap:qe,width:zt,style:`--${m(r.namespace)}-table-scrollbar-size: ${qe}px`,useIsScrolling:st,getRowHeight:N,onScroll:ee},ht=m(s),Nt={ns:r,depthMap:m(h),columnsStyles:ht,expandColumnKey:he,expandedRowKeys:m(p),estimatedRowHeight:ue,hasFixedColumns:m(g),rowProps:Se,rowClass:ke,rowKey:be,rowEventHandlers:Ee,onRowHovered:D,onRowExpanded:M,onRowHeightChange:V},fe={cellProps:te,expandColumnKey:he,indentSize:Ne,iconSize:Me,rowKey:be,expandedRowKeys:m(p),ns:r},Le={ns:r,headerClass:ae,headerProps:Te,columnsStyles:ht},ne={ns:r,sortBy:z,sortState:re,headerCellProps:Ce,onColumnSorted:R},Ye={row:ct=>ie(kue,Yt(ct,Nt),{row:e.row,cell:Wt=>{let Fn;return e.cell?ie(rk,Yt(Wt,fe,{style:ht[Wt.column.key]}),wc(Fn=e.cell(Wt))?Fn:{default:()=>[Fn]}):ie(rk,Yt(Wt,fe,{style:ht[Wt.column.key]}),null)}}),header:ct=>ie($ue,Yt(ct,Le),{header:e.header,cell:Wt=>{let Fn;return e["header-cell"]?ie(sk,Yt(Wt,ne,{style:ht[Wt.column.key]}),wc(Fn=e["header-cell"](Wt))?Fn:{default:()=>[Fn]}):ie(sk,Yt(Wt,ne,{style:ht[Wt.column.key]}),null)}})},Et=[t.class,r.b(),r.e("root"),{[r.is("dynamic")]:m(b)}],tn={class:r.e("footer"),style:m(C)};return ie("div",{class:Et,style:m(A)},[ie(hue,St,wc(Ye)?Ye:{default:()=>[Ye]}),ie(gue,en,wc(Ye)?Ye:{default:()=>[Ye]}),ie(bue,bn,wc(Ye)?Ye:{default:()=>[Ye]}),e.footer&&ie(Vue,tn,{default:e.footer}),m(_)&&ie(Uue,{class:r.e("empty"),style:m(k)},{default:e.empty}),e.overlay&&ie(Hue,{class:r.e("overlay")},{default:e.overlay})])}}});var zue=Kue;const Wue=Ke({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:de(Function)}}),Gue=t=>{const e=H(),n=H(0),r=H(0);let s;return Ft(()=>{s=zn(e,([i])=>{const{width:o,height:a}=i.contentRect,{paddingLeft:u,paddingRight:l,paddingTop:c,paddingBottom:d}=getComputedStyle(i.target),f=Number.parseInt(u)||0,h=Number.parseInt(l)||0,p=Number.parseInt(c)||0,g=Number.parseInt(d)||0;n.value=o-f-h,r.value=a-p-g}).stop}),In(()=>{s==null||s()}),Ie([n,r],([i,o])=>{var a;(a=t.onResize)==null||a.call(t,{width:i,height:o})}),{sizer:e,width:n,height:r}},que=se({name:"ElAutoResizer",props:Wue,setup(t,{slots:e}){const n=Oe("auto-resizer"),{height:r,width:s,sizer:i}=Gue(t),o={width:"100%",height:"100%"};return()=>{var a;return ie("div",{ref:i,class:n.b(),style:o},[(a=e.default)==null?void 0:a.call(e,{height:r.value,width:s.value})])}}});var Yue=que;const Xue=Dt(zue),Que=Dt(Yue),Xm=Symbol("tabsRootContextKey"),Zue=Ke({tabs:{type:de(Array),default:()=>Wn([])}}),cD="ElTabBar",Jue=se({name:cD}),ece=se({...Jue,props:Zue,setup(t,{expose:e}){const n=t,r=Kt(),s=nt(Xm);s||lr(cD,"<el-tabs><el-tab-bar /></el-tabs>");const i=Oe("tabs"),o=H(),a=H(),u=()=>{let h=0,p=0;const g=["top","bottom"].includes(s.props.tabPosition)?"width":"height",v=g==="width"?"x":"y",y=v==="x"?"left":"top";return n.tabs.every(w=>{var b,S;const E=(S=(b=r.parent)==null?void 0:b.refs)==null?void 0:S[`tab-${w.uid}`];if(!E)return!1;if(!w.active)return!0;h=E[`offset${Ki(y)}`],p=E[`client${Ki(g)}`];const x=window.getComputedStyle(E);return g==="width"&&(p-=Number.parseFloat(x.paddingLeft)+Number.parseFloat(x.paddingRight),h+=Number.parseFloat(x.paddingLeft)),!1}),{[g]:`${p}px`,transform:`translate${Ki(v)}(${h}px)`}},l=()=>a.value=u(),c=[],d=()=>{var h;c.forEach(g=>g.stop()),c.length=0;const p=(h=r.parent)==null?void 0:h.refs;if(p){for(const g in p)if(g.startsWith("tab-")){const v=p[g];v&&c.push(zn(v,l))}}};Ie(()=>n.tabs,async()=>{await ft(),l(),d()},{immediate:!0});const f=zn(o,()=>l());return In(()=>{c.forEach(h=>h.stop()),c.length=0,f.stop()}),e({ref:o,update:l}),(h,p)=>($(),Y("div",{ref_key:"barRef",ref:o,class:F([m(i).e("active-bar"),m(i).is(m(s).props.tabPosition)]),style:mt(a.value)},null,6))}});var tce=We(ece,[["__file","tab-bar.vue"]]);const nce=Ke({panes:{type:de(Array),default:()=>Wn([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),rce={tabClick:(t,e,n)=>n instanceof Event,tabRemove:(t,e)=>e instanceof Event},ik="ElTabNav",sce=se({name:ik,props:nce,emits:rce,setup(t,{expose:e,emit:n}){const r=nt(Xm);r||lr(ik,"<el-tabs><tab-nav /></el-tabs>");const s=Oe("tabs"),i=Cz(),o=Nz(),a=H(),u=H(),l=H(),c=H(),d=H(!1),f=H(0),h=H(!1),p=H(!0),g=L(()=>["top","bottom"].includes(r.props.tabPosition)?"width":"height"),v=L(()=>({transform:`translate${g.value==="width"?"X":"Y"}(-${f.value}px)`})),y=()=>{if(!a.value)return;const A=a.value[`offset${Ki(g.value)}`],C=f.value;if(!C)return;const _=C>A?C-A:0;f.value=_},w=()=>{if(!a.value||!u.value)return;const A=u.value[`offset${Ki(g.value)}`],C=a.value[`offset${Ki(g.value)}`],_=f.value;if(A-_<=C)return;const O=A-_>C*2?_+C:A-C;f.value=O},b=async()=>{const A=u.value;if(!d.value||!l.value||!a.value||!A)return;await ft();const C=l.value.querySelector(".is-active");if(!C)return;const _=a.value,O=["top","bottom"].includes(r.props.tabPosition),P=C.getBoundingClientRect(),U=_.getBoundingClientRect(),j=O?A.offsetWidth-U.width:A.offsetHeight-U.height,N=f.value;let R=N;O?(P.left<U.left&&(R=N-(U.left-P.left)),P.right>U.right&&(R=N+P.right-U.right)):(P.top<U.top&&(R=N-(U.top-P.top)),P.bottom>U.bottom&&(R=N+(P.bottom-U.bottom))),R=Math.max(R,0),f.value=Math.min(R,j)},S=()=>{var A;if(!u.value||!a.value)return;t.stretch&&((A=c.value)==null||A.update());const C=u.value[`offset${Ki(g.value)}`],_=a.value[`offset${Ki(g.value)}`],O=f.value;_<C?(d.value=d.value||{},d.value.prev=O,d.value.next=O+_<C,C-O<_&&(f.value=C-_)):(d.value=!1,O>0&&(f.value=0))},E=A=>{let C=0;switch(A.code){case it.left:case it.up:C=-1;break;case it.right:case it.down:C=1;break;default:return}const _=Array.from(A.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let P=_.indexOf(A.target)+C;P<0?P=_.length-1:P>=_.length&&(P=0),_[P].focus({preventScroll:!0}),_[P].click(),x()},x=()=>{p.value&&(h.value=!0)},k=()=>h.value=!1;return Ie(i,A=>{A==="hidden"?p.value=!1:A==="visible"&&setTimeout(()=>p.value=!0,50)}),Ie(o,A=>{A?setTimeout(()=>p.value=!0,50):p.value=!1}),zn(l,S),Ft(()=>setTimeout(()=>b(),0)),ki(()=>S()),e({scrollToActiveTab:b,removeFocus:k,tabListRef:u,tabBarRef:c}),()=>{const A=d.value?[ie("span",{class:[s.e("nav-prev"),s.is("disabled",!d.value.prev)],onClick:y},[ie(lt,null,{default:()=>[ie(Ea,null,null)]})]),ie("span",{class:[s.e("nav-next"),s.is("disabled",!d.value.next)],onClick:w},[ie(lt,null,{default:()=>[ie(cs,null,null)]})])]:null,C=t.panes.map((_,O)=>{var P,U,j,N;const R=_.uid,V=_.props.disabled,D=(U=(P=_.props.name)!=null?P:_.index)!=null?U:`${O}`,M=!V&&(_.isClosable||t.editable);_.index=`${O}`;const K=M?ie(lt,{class:"is-icon-close",onClick:X=>n("tabRemove",_,X)},{default:()=>[ie(si,null,null)]}):null,q=((N=(j=_.slots).label)==null?void 0:N.call(j))||_.props.label,ee=!V&&_.active?0:-1;return ie("div",{ref:`tab-${R}`,class:[s.e("item"),s.is(r.props.tabPosition),s.is("active",_.active),s.is("disabled",V),s.is("closable",M),s.is("focus",h.value)],id:`tab-${D}`,key:`tab-${R}`,"aria-controls":`pane-${D}`,role:"tab","aria-selected":_.active,tabindex:ee,onFocus:()=>x(),onBlur:()=>k(),onClick:X=>{k(),n("tabClick",_,D,X)},onKeydown:X=>{M&&(X.code===it.delete||X.code===it.backspace)&&n("tabRemove",_,X)}},[q,K])});return ie("div",{ref:l,class:[s.e("nav-wrap"),s.is("scrollable",!!d.value),s.is(r.props.tabPosition)]},[A,ie("div",{class:s.e("nav-scroll"),ref:a},[ie("div",{class:[s.e("nav"),s.is(r.props.tabPosition),s.is("stretch",t.stretch&&["top","bottom"].includes(r.props.tabPosition))],ref:u,style:v.value,role:"tablist",onKeydown:E},[t.type?null:ie(tce,{ref:c,tabs:[...t.panes]},null),C])])])}}}),ice=Ke({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:de(Function),default:()=>!0},stretch:Boolean}),Mv=t=>ut(t)||vt(t),oce={[_t]:t=>Mv(t),tabClick:(t,e)=>e instanceof Event,tabChange:t=>Mv(t),edit:(t,e)=>["remove","add"].includes(e),tabRemove:t=>Mv(t),tabAdd:()=>!0},ace=se({name:"ElTabs",props:ice,emits:oce,setup(t,{emit:e,slots:n,expose:r}){var s;const i=Oe("tabs"),o=L(()=>["left","right"].includes(t.tabPosition)),{children:a,addChild:u,removeChild:l}=S1(Kt(),"ElTabPane"),c=H(),d=H((s=t.modelValue)!=null?s:"0"),f=async(y,w=!1)=>{var b,S;if(!(d.value===y||an(y)))try{let E;if(t.beforeLeave){const x=t.beforeLeave(y,d.value);E=x instanceof Promise?await x:x}else E=!0;E!==!1&&(d.value=y,w&&(e(_t,y),e("tabChange",y)),(S=(b=c.value)==null?void 0:b.removeFocus)==null||S.call(b))}catch{}},h=(y,w,b)=>{y.props.disabled||(e("tabClick",y,b),f(w,!0))},p=(y,w)=>{y.props.disabled||an(y.props.name)||(w.stopPropagation(),e("edit",y.props.name,"remove"),e("tabRemove",y.props.name))},g=()=>{e("edit",void 0,"add"),e("tabAdd")};Ie(()=>t.modelValue,y=>f(y)),Ie(d,async()=>{var y;await ft(),(y=c.value)==null||y.scrollToActiveTab()}),Jt(Xm,{props:t,currentName:d,registerPane:y=>{a.value.push(y)},sortPane:u,unregisterPane:l}),r({currentName:d,tabNavRef:c});const v=({render:y})=>y();return()=>{const y=n["add-icon"],w=t.editable||t.addable?ie("div",{class:[i.e("new-tab"),o.value&&i.e("new-tab-vertical")],tabindex:"0",onClick:g,onKeydown:E=>{[it.enter,it.numpadEnter].includes(E.code)&&g()}},[y?pe(n,"add-icon"):ie(lt,{class:i.is("icon-plus")},{default:()=>[ie(aI,null,null)]})]):null,b=ie("div",{class:[i.e("header"),o.value&&i.e("header-vertical"),i.is(t.tabPosition)]},[ie(v,{render:()=>{const E=a.value.some(x=>x.slots.label);return ie(sce,{ref:c,currentName:d.value,editable:t.editable,type:t.type,panes:a.value,stretch:t.stretch,onTabClick:h,onTabRemove:p},{$stable:!E})}},null),w]),S=ie("div",{class:i.e("content")},[pe(n,"default")]);return ie("div",{class:[i.b(),i.m(t.tabPosition),{[i.m("card")]:t.type==="card",[i.m("border-card")]:t.type==="border-card"}]},[S,b])}}});var lce=ace;const uce=Ke({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),dD="ElTabPane",cce=se({name:dD}),dce=se({...cce,props:uce,setup(t){const e=t,n=Kt(),r=gr(),s=nt(Xm);s||lr(dD,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const i=Oe("tab-pane"),o=H(),a=L(()=>e.closable||s.props.closable),u=Rp(()=>{var h;return s.currentName.value===((h=e.name)!=null?h:o.value)}),l=H(u.value),c=L(()=>{var h;return(h=e.name)!=null?h:o.value}),d=Rp(()=>!e.lazy||l.value||u.value);Ie(u,h=>{h&&(l.value=!0)});const f=fn({uid:n.uid,slots:r,props:e,paneName:c,active:u,index:o,isClosable:a});return s.registerPane(f),Ft(()=>{s.sortPane(f)}),Ia(()=>{s.unregisterPane(f.uid)}),(h,p)=>m(d)?Ot(($(),Y("div",{key:0,id:`pane-${m(c)}`,class:F(m(i).b()),role:"tabpanel","aria-hidden":!m(u),"aria-labelledby":`tab-${m(c)}`},[pe(h.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[cn,m(u)]]):ge("v-if",!0)}});var fD=We(dce,[["__file","tab-pane.vue"]]);const fce=Dt(lce,{TabPane:fD}),hce=Gn(fD),pce=Ke({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:so,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),mce=se({name:"ElText"}),gce=se({...mce,props:pce,setup(t){const e=t,n=H(),r=ur(),s=Oe("text"),i=L(()=>[s.b(),s.m(e.type),s.m(r.value),s.is("truncated",e.truncated),s.is("line-clamp",!an(e.lineClamp))]),o=No().title,a=()=>{var u,l,c,d,f,h,p;if(o)return;let g=!1;const v=((u=n.value)==null?void 0:u.textContent)||"";if(e.truncated){const y=(l=n.value)==null?void 0:l.offsetWidth,w=(c=n.value)==null?void 0:c.scrollWidth;y&&w&&w>y&&(g=!0)}else if(!an(e.lineClamp)){const y=(d=n.value)==null?void 0:d.offsetHeight,w=(f=n.value)==null?void 0:f.scrollHeight;y&&w&&w>y&&(g=!0)}g?(h=n.value)==null||h.setAttribute("title",v):(p=n.value)==null||p.removeAttribute("title")};return Ft(a),ki(a),(u,l)=>($(),ye(jt(u.tag),{ref_key:"textRef",ref:n,class:F(m(i)),style:mt({"-webkit-line-clamp":u.lineClamp})},{default:le(()=>[pe(u.$slots,"default")]),_:3},8,["class","style"]))}});var vce=We(gce,[["__file","text.vue"]]);const nS=Dt(vce),yce=Ke({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:de(String),default:"light"},clearable:{type:Boolean,default:!0},size:fr,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,includeEndTime:{type:Boolean,default:!1},name:String,prefixIcon:{type:de([String,Object]),default:()=>oI},clearIcon:{type:de([String,Object]),default:()=>Vo},...qu}),To=t=>{const e=(t||"").split(":");if(e.length>=2){let n=Number.parseInt(e[0],10);const r=Number.parseInt(e[1],10),s=t.toUpperCase();return s.includes("AM")&&n===12?n=0:s.includes("PM")&&n!==12&&(n+=12),{hours:n,minutes:r}}return null},Nv=(t,e)=>{const n=To(t);if(!n)return-1;const r=To(e);if(!r)return-1;const s=n.minutes+n.hours*60,i=r.minutes+r.hours*60;return s===i?0:s>i?1:-1},ok=t=>`${t}`.padStart(2,"0"),Kl=t=>`${ok(t.hours)}:${ok(t.minutes)}`,bce=(t,e)=>{const n=To(t);if(!n)return"";const r=To(e);if(!r)return"";const s={hours:n.hours,minutes:n.minutes};return s.minutes+=r.minutes,s.hours+=r.hours,s.hours+=Math.floor(s.minutes/60),s.minutes=s.minutes%60,Kl(s)},Sce=se({name:"ElTimeSelect"}),wce=se({...Sce,props:yce,emits:[Xt,"blur","focus","clear",_t],setup(t,{expose:e}){const n=t;Rt.extend(T1);const{Option:r}=gl,s=Oe("input"),i=H(),o=Hr(),{lang:a}=sn(),u=L(()=>n.modelValue),l=L(()=>{const y=To(n.start);return y?Kl(y):null}),c=L(()=>{const y=To(n.end);return y?Kl(y):null}),d=L(()=>{const y=To(n.step);return y?Kl(y):null}),f=L(()=>{const y=To(n.minTime||"");return y?Kl(y):null}),h=L(()=>{const y=To(n.maxTime||"");return y?Kl(y):null}),p=L(()=>{var y;const w=[],b=(S,E)=>{w.push({value:S,disabled:Nv(E,f.value||"-1:-1")<=0||Nv(E,h.value||"100:100")>=0})};if(n.start&&n.end&&n.step){let S=l.value,E;for(;S&&c.value&&Nv(S,c.value)<=0;)E=Rt(S,"HH:mm").locale(a.value).format(n.format),b(E,S),S=bce(S,d.value);if(n.includeEndTime&&c.value&&((y=w[w.length-1])==null?void 0:y.value)!==c.value){const x=Rt(c.value,"HH:mm").locale(a.value).format(n.format);b(x,c.value)}}return w});return e({blur:()=>{var y,w;(w=(y=i.value)==null?void 0:y.blur)==null||w.call(y)},focus:()=>{var y,w;(w=(y=i.value)==null?void 0:y.focus)==null||w.call(y)}}),(y,w)=>($(),ye(m(gl),{ref_key:"select",ref:i,"model-value":m(u),disabled:m(o),clearable:y.clearable,"clear-icon":y.clearIcon,size:y.size,effect:y.effect,placeholder:y.placeholder,"default-first-option":"",filterable:y.editable,"empty-values":y.emptyValues,"value-on-clear":y.valueOnClear,"onUpdate:modelValue":b=>y.$emit(m(_t),b),onChange:b=>y.$emit(m(Xt),b),onBlur:b=>y.$emit("blur",b),onFocus:b=>y.$emit("focus",b),onClear:()=>y.$emit("clear")},{prefix:le(()=>[y.prefixIcon?($(),ye(m(lt),{key:0,class:F(m(s).e("prefix-icon"))},{default:le(()=>[($(),ye(jt(y.prefixIcon)))]),_:1},8,["class"])):ge("v-if",!0)]),default:le(()=>[($(!0),Y(dt,null,Zt(m(p),b=>($(),ye(m(r),{key:b.value,label:b.value,value:b.value,disabled:b.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable","empty-values","value-on-clear","onUpdate:modelValue","onChange","onBlur","onFocus","onClear"]))}});var Ece=We(wce,[["__file","time-select.vue"]]);const xce=Dt(Ece),Tce=se({name:"ElTimeline",setup(t,{slots:e}){const n=Oe("timeline");return Jt("timeline",e),()=>bt("ul",{class:[n.b()]},[pe(e,"default")])}}),Cce=Ke({timestamp:{type:String,default:""},hideTimestamp:Boolean,center:Boolean,placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:Tn},hollow:Boolean}),kce=se({name:"ElTimelineItem"}),_ce=se({...kce,props:Cce,setup(t){const e=t,n=Oe("timeline-item"),r=L(()=>[n.e("node"),n.em("node",e.size||""),n.em("node",e.type||""),n.is("hollow",e.hollow)]);return(s,i)=>($(),Y("li",{class:F([m(n).b(),{[m(n).e("center")]:s.center}])},[J("div",{class:F(m(n).e("tail"))},null,2),s.$slots.dot?ge("v-if",!0):($(),Y("div",{key:0,class:F(m(r)),style:mt({backgroundColor:s.color})},[s.icon?($(),ye(m(lt),{key:0,class:F(m(n).e("icon"))},{default:le(()=>[($(),ye(jt(s.icon)))]),_:1},8,["class"])):ge("v-if",!0)],6)),s.$slots.dot?($(),Y("div",{key:1,class:F(m(n).e("dot"))},[pe(s.$slots,"dot")],2)):ge("v-if",!0),J("div",{class:F(m(n).e("wrapper"))},[!s.hideTimestamp&&s.placement==="top"?($(),Y("div",{key:0,class:F([m(n).e("timestamp"),m(n).is("top")])},ze(s.timestamp),3)):ge("v-if",!0),J("div",{class:F(m(n).e("content"))},[pe(s.$slots,"default")],2),!s.hideTimestamp&&s.placement==="bottom"?($(),Y("div",{key:1,class:F([m(n).e("timestamp"),m(n).is("bottom")])},ze(s.timestamp),3)):ge("v-if",!0)],2)],2))}});var hD=We(_ce,[["__file","timeline-item.vue"]]);const Ace=Dt(Tce,{TimelineItem:hD}),Ice=Gn(hD),pD=Ke({nowrap:Boolean});var mD=(t=>(t.top="top",t.bottom="bottom",t.left="left",t.right="right",t))(mD||{});const Rce=Object.values(mD),rS=Ke({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:de(Object),default:null}}),Lce=Ke({side:{type:de(String),values:Rce,required:!0}}),Pce=["absolute","fixed"],Dce=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],sS=Ke({arrowPadding:{type:de(Number),default:5},effect:{type:de(String),default:"light"},contentClass:String,placement:{type:de(String),values:Dce,default:"bottom"},reference:{type:de(Object),default:null},offset:{type:Number,default:8},strategy:{type:de(String),values:Pce,default:"absolute"},showArrow:Boolean,...$r(["ariaLabel"])}),iS=Ke({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:de(Function)},"onUpdate:open":{type:de(Function)}}),Nl={type:de(Function)},oS=Ke({onBlur:Nl,onClick:Nl,onFocus:Nl,onMouseDown:Nl,onMouseEnter:Nl,onMouseLeave:Nl}),Oce=Ke({...iS,...rS,...oS,...sS,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:de(Object),default:null},teleported:Boolean,to:{type:de(String),default:"body"}}),Qm=Symbol("tooltipV2"),gD=Symbol("tooltipV2Content"),Fv="tooltip_v2.open",$ce=se({name:"ElTooltipV2Root"}),Mce=se({...$ce,props:iS,setup(t,{expose:e}){const n=t,r=H(n.defaultOpen),s=H(null),i=L({get:()=>js(n.open)?r.value:n.open,set:v=>{var y;r.value=v,(y=n["onUpdate:open"])==null||y.call(n,v)}}),o=L(()=>vt(n.delayDuration)&&n.delayDuration>0),{start:a,stop:u}=pl(()=>{i.value=!0},L(()=>n.delayDuration),{immediate:!1}),l=Oe("tooltip-v2"),c=Or(),d=()=>{u(),i.value=!0},f=()=>{m(o)?a():d()},h=d,p=()=>{u(),i.value=!1};return Ie(i,v=>{var y;v&&(document.dispatchEvent(new CustomEvent(Fv)),h()),(y=n.onOpenChange)==null||y.call(n,v)}),Ft(()=>{document.addEventListener(Fv,p)}),In(()=>{u(),document.removeEventListener(Fv,p)}),Jt(Qm,{contentId:c,triggerRef:s,ns:l,onClose:p,onDelayOpen:f,onOpen:h}),e({onOpen:h,onClose:p}),(v,y)=>pe(v.$slots,"default",{open:m(i)})}});var Nce=We(Mce,[["__file","root.vue"]]);const Fce=se({name:"ElTooltipV2Arrow"}),Bce=se({...Fce,props:{...rS,...Lce},setup(t){const e=t,{ns:n}=nt(Qm),{arrowRef:r}=nt(gD),s=L(()=>{const{style:i,width:o,height:a}=e,u=n.namespace.value;return{[`--${u}-tooltip-v2-arrow-width`]:`${o}px`,[`--${u}-tooltip-v2-arrow-height`]:`${a}px`,[`--${u}-tooltip-v2-arrow-border-width`]:`${o/2}px`,[`--${u}-tooltip-v2-arrow-cover-width`]:o/2-1,...i||{}}});return(i,o)=>($(),Y("span",{ref_key:"arrowRef",ref:r,style:mt(m(s)),class:F(m(n).e("arrow"))},null,6))}});var ak=We(Bce,[["__file","arrow.vue"]]);const $u=Math.min,al=Math.max,Yp=Math.round,lh=Math.floor,Xi=t=>({x:t,y:t}),Vce={left:"right",right:"left",bottom:"top",top:"bottom"},Uce={start:"end",end:"start"};function Ey(t,e,n){return al(t,$u(e,n))}function of(t,e){return typeof t=="function"?t(e):t}function yl(t){return t.split("-")[0]}function af(t){return t.split("-")[1]}function vD(t){return t==="x"?"y":"x"}function aS(t){return t==="y"?"height":"width"}function ll(t){return["top","bottom"].includes(yl(t))?"y":"x"}function lS(t){return vD(ll(t))}function Hce(t,e,n){n===void 0&&(n=!1);const r=af(t),s=lS(t),i=aS(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Xp(o)),[o,Xp(o)]}function jce(t){const e=Xp(t);return[xy(t),e,xy(e)]}function xy(t){return t.replace(/start|end/g,e=>Uce[e])}function Kce(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function zce(t,e,n,r){const s=af(t);let i=Kce(yl(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(xy)))),i}function Xp(t){return t.replace(/left|right|bottom|top/g,e=>Vce[e])}function Wce(t){return{top:0,right:0,bottom:0,left:0,...t}}function yD(t){return typeof t!="number"?Wce(t):{top:t,right:t,bottom:t,left:t}}function Qp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function lk(t,e,n){let{reference:r,floating:s}=t;const i=ll(e),o=lS(e),a=aS(o),u=yl(e),l=i==="y",c=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-s.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-s.width,y:d};break;default:h={x:r.x,y:r.y}}switch(af(e)){case"start":h[o]-=f*(n&&l?-1:1);break;case"end":h[o]+=f*(n&&l?-1:1);break}return h}const Gce=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:c,y:d}=lk(l,r,u),f=r,h={},p=0;for(let g=0;g<a.length;g++){const{name:v,fn:y}=a[g],{x:w,y:b,data:S,reset:E}=await y({x:c,y:d,initialPlacement:r,placement:f,strategy:s,middlewareData:h,rects:l,platform:o,elements:{reference:t,floating:e}});c=w??c,d=b??d,h={...h,[v]:{...h[v],...S}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(f=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):E.rects),{x:c,y:d}=lk(l,f,u)),g=-1)}return{x:c,y:d,placement:f,strategy:s,middlewareData:h}};async function uS(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:u}=t,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=of(e,t),p=yD(h),v=a[f?d==="floating"?"reference":"floating":d],y=Qp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),w=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),S=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},E=Qp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:b,strategy:u}):w);return{top:(y.top-E.top+p.top)/S.y,bottom:(E.bottom-y.bottom+p.bottom)/S.y,left:(y.left-E.left+p.left)/S.x,right:(E.right-y.right+p.right)/S.x}}const qce=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:u}=e,{element:l,padding:c=0}=of(t,e)||{};if(l==null)return{};const d=yD(c),f={x:n,y:r},h=lS(s),p=aS(h),g=await o.getDimensions(l),v=h==="y",y=v?"top":"left",w=v?"bottom":"right",b=v?"clientHeight":"clientWidth",S=i.reference[p]+i.reference[h]-f[h]-i.floating[p],E=f[h]-i.reference[h],x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let k=x?x[b]:0;(!k||!await(o.isElement==null?void 0:o.isElement(x)))&&(k=a.floating[b]||i.floating[p]);const A=S/2-E/2,C=k/2-g[p]/2-1,_=$u(d[y],C),O=$u(d[w],C),P=_,U=k-g[p]-O,j=k/2-g[p]/2+A,N=Ey(P,j,U),R=!u.arrow&&af(s)!=null&&j!==N&&i.reference[p]/2-(j<P?_:O)-g[p]/2<0,V=R?j<P?j-P:j-U:0;return{[h]:f[h]+V,data:{[h]:N,centerOffset:j-N-V,...R&&{alignmentOffset:V}},reset:R}}}),Yce=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:u,elements:l}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...v}=of(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const y=yl(s),w=ll(a),b=yl(a)===a,S=await(u.isRTL==null?void 0:u.isRTL(l.floating)),E=f||(b||!g?[Xp(a)]:jce(a)),x=p!=="none";!f&&x&&E.push(...zce(a,g,p,S));const k=[a,...E],A=await uS(e,v),C=[];let _=((r=i.flip)==null?void 0:r.overflows)||[];if(c&&C.push(A[y]),d){const N=Hce(s,o,S);C.push(A[N[0]],A[N[1]])}if(_=[..._,{placement:s,overflows:C}],!C.every(N=>N<=0)){var O,P;const N=(((O=i.flip)==null?void 0:O.index)||0)+1,R=k[N];if(R){var U;const D=d==="alignment"?w!==ll(R):!1,M=((U=_[0])==null?void 0:U.overflows[0])>0;if(!D||M)return{data:{index:N,overflows:_},reset:{placement:R}}}let V=(P=_.filter(D=>D.overflows[0]<=0).sort((D,M)=>D.overflows[1]-M.overflows[1])[0])==null?void 0:P.placement;if(!V)switch(h){case"bestFit":{var j;const D=(j=_.filter(M=>{if(x){const K=ll(M.placement);return K===w||K==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(K=>K>0).reduce((K,q)=>K+q,0)]).sort((M,K)=>M[1]-K[1])[0])==null?void 0:j[0];D&&(V=D);break}case"initialPlacement":V=a;break}if(s!==V)return{reset:{placement:V}}}return{}}}};async function Xce(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=yl(n),a=af(n),u=ll(n)==="y",l=["left","top"].includes(o)?-1:1,c=i&&u?-1:1,d=of(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:f*l}:{x:f*l,y:h*c}}const Qce=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,u=await Xce(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:i+u.y,data:{...u,placement:o}}}}},Zce=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:y,y:w}=v;return{x:y,y:w}}},...u}=of(t,e),l={x:n,y:r},c=await uS(e,u),d=ll(yl(s)),f=vD(d);let h=l[f],p=l[d];if(i){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",w=h+c[v],b=h-c[y];h=Ey(w,h,b)}if(o){const v=d==="y"?"top":"left",y=d==="y"?"bottom":"right",w=p+c[v],b=p-c[y];p=Ey(w,p,b)}const g=a.fn({...e,[f]:h,[d]:p});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[d]:o}}}}}};function Zm(){return typeof window<"u"}function Ju(t){return bD(t)?(t.nodeName||"").toLowerCase():"#document"}function Ks(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function oo(t){var e;return(e=(bD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function bD(t){return Zm()?t instanceof Node||t instanceof Ks(t).Node:!1}function Ti(t){return Zm()?t instanceof Element||t instanceof Ks(t).Element:!1}function ro(t){return Zm()?t instanceof HTMLElement||t instanceof Ks(t).HTMLElement:!1}function uk(t){return!Zm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ks(t).ShadowRoot}function lf(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Ci(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function Jce(t){return["table","td","th"].includes(Ju(t))}function Jm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function cS(t){const e=dS(),n=Ti(t)?Ci(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function ede(t){let e=Aa(t);for(;ro(e)&&!Mu(e);){if(cS(e))return e;if(Jm(e))return null;e=Aa(e)}return null}function dS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Mu(t){return["html","body","#document"].includes(Ju(t))}function Ci(t){return Ks(t).getComputedStyle(t)}function eg(t){return Ti(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Aa(t){if(Ju(t)==="html")return t;const e=t.assignedSlot||t.parentNode||uk(t)&&t.host||oo(t);return uk(e)?e.host:e}function SD(t){const e=Aa(t);return Mu(e)?t.ownerDocument?t.ownerDocument.body:t.body:ro(e)&&lf(e)?e:SD(e)}function Nd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=SD(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Ks(s);if(i){const a=Ty(o);return e.concat(o,o.visualViewport||[],lf(s)?s:[],a&&n?Nd(a):[])}return e.concat(s,Nd(s,[],n))}function Ty(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function wD(t){const e=Ci(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ro(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Yp(n)!==i||Yp(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function fS(t){return Ti(t)?t:t.contextElement}function cu(t){const e=fS(t);if(!ro(e))return Xi(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=wD(e);let o=(i?Yp(n.width):n.width)/r,a=(i?Yp(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const tde=Xi(0);function ED(t){const e=Ks(t);return!dS()||!e.visualViewport?tde:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function nde(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ks(t)?!1:e}function bl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=fS(t);let o=Xi(1);e&&(r?Ti(r)&&(o=cu(r)):o=cu(t));const a=nde(i,n,r)?ED(i):Xi(0);let u=(s.left+a.x)/o.x,l=(s.top+a.y)/o.y,c=s.width/o.x,d=s.height/o.y;if(i){const f=Ks(i),h=r&&Ti(r)?Ks(r):r;let p=f,g=Ty(p);for(;g&&r&&h!==p;){const v=cu(g),y=g.getBoundingClientRect(),w=Ci(g),b=y.left+(g.clientLeft+parseFloat(w.paddingLeft))*v.x,S=y.top+(g.clientTop+parseFloat(w.paddingTop))*v.y;u*=v.x,l*=v.y,c*=v.x,d*=v.y,u+=b,l+=S,p=Ks(g),g=Ty(p)}}return Qp({width:c,height:d,x:u,y:l})}function hS(t,e){const n=eg(t).scrollLeft;return e?e.left+n:bl(oo(t)).left+n}function xD(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:hS(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function rde(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=oo(r),a=e?Jm(e.floating):!1;if(r===o||a&&i)return n;let u={scrollLeft:0,scrollTop:0},l=Xi(1);const c=Xi(0),d=ro(r);if((d||!d&&!i)&&((Ju(r)!=="body"||lf(o))&&(u=eg(r)),ro(r))){const h=bl(r);l=cu(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const f=o&&!d&&!i?xD(o,u,!0):Xi(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x+f.x,y:n.y*l.y-u.scrollTop*l.y+c.y+f.y}}function sde(t){return Array.from(t.getClientRects())}function ide(t){const e=oo(t),n=eg(t),r=t.ownerDocument.body,s=al(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=al(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+hS(t);const a=-n.scrollTop;return Ci(r).direction==="rtl"&&(o+=al(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function ode(t,e){const n=Ks(t),r=oo(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,u=0;if(s){i=s.width,o=s.height;const l=dS();(!l||l&&e==="fixed")&&(a=s.offsetLeft,u=s.offsetTop)}return{width:i,height:o,x:a,y:u}}function ade(t,e){const n=bl(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ro(t)?cu(t):Xi(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,u=s*i.x,l=r*i.y;return{width:o,height:a,x:u,y:l}}function ck(t,e,n){let r;if(e==="viewport")r=ode(t,n);else if(e==="document")r=ide(oo(t));else if(Ti(e))r=ade(e,n);else{const s=ED(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Qp(r)}function TD(t,e){const n=Aa(t);return n===e||!Ti(n)||Mu(n)?!1:Ci(n).position==="fixed"||TD(n,e)}function lde(t,e){const n=e.get(t);if(n)return n;let r=Nd(t,[],!1).filter(a=>Ti(a)&&Ju(a)!=="body"),s=null;const i=Ci(t).position==="fixed";let o=i?Aa(t):t;for(;Ti(o)&&!Mu(o);){const a=Ci(o),u=cS(o);!u&&a.position==="fixed"&&(s=null),(i?!u&&!s:!u&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||lf(o)&&!u&&TD(t,o))?r=r.filter(c=>c!==o):s=a,o=Aa(o)}return e.set(t,r),r}function ude(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Jm(e)?[]:lde(e,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const d=ck(e,c,s);return l.top=al(d.top,l.top),l.right=$u(d.right,l.right),l.bottom=$u(d.bottom,l.bottom),l.left=al(d.left,l.left),l},ck(e,a,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function cde(t){const{width:e,height:n}=wD(t);return{width:e,height:n}}function dde(t,e,n){const r=ro(e),s=oo(e),i=n==="fixed",o=bl(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const u=Xi(0);function l(){u.x=hS(s)}if(r||!r&&!i)if((Ju(e)!=="body"||lf(s))&&(a=eg(e)),r){const h=bl(e,!0,i,e);u.x=h.x+e.clientLeft,u.y=h.y+e.clientTop}else s&&l();i&&!r&&s&&l();const c=s&&!r&&!i?xD(s,a):Xi(0),d=o.left+a.scrollLeft-u.x-c.x,f=o.top+a.scrollTop-u.y-c.y;return{x:d,y:f,width:o.width,height:o.height}}function Bv(t){return Ci(t).position==="static"}function dk(t,e){if(!ro(t)||Ci(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return oo(t)===n&&(n=n.ownerDocument.body),n}function CD(t,e){const n=Ks(t);if(Jm(t))return n;if(!ro(t)){let s=Aa(t);for(;s&&!Mu(s);){if(Ti(s)&&!Bv(s))return s;s=Aa(s)}return n}let r=dk(t,e);for(;r&&Jce(r)&&Bv(r);)r=dk(r,e);return r&&Mu(r)&&Bv(r)&&!cS(r)?n:r||ede(t)||n}const fde=async function(t){const e=this.getOffsetParent||CD,n=this.getDimensions,r=await n(t.floating);return{reference:dde(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function hde(t){return Ci(t).direction==="rtl"}const pde={convertOffsetParentRelativeRectToViewportRelativeRect:rde,getDocumentElement:oo,getClippingRect:ude,getOffsetParent:CD,getElementRects:fde,getClientRects:sde,getDimensions:cde,getScale:cu,isElement:Ti,isRTL:hde};function kD(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function mde(t,e){let n=null,r;const s=oo(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),i();const l=t.getBoundingClientRect(),{left:c,top:d,width:f,height:h}=l;if(a||e(),!f||!h)return;const p=lh(d),g=lh(s.clientWidth-(c+f)),v=lh(s.clientHeight-(d+h)),y=lh(c),b={rootMargin:-p+"px "+-g+"px "+-v+"px "+-y+"px",threshold:al(0,$u(1,u))||1};let S=!0;function E(x){const k=x[0].intersectionRatio;if(k!==u){if(!S)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!kD(l,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(E,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,b)}n.observe(t)}return o(!0),i}function gde(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=fS(t),c=s||i?[...l?Nd(l):[],...Nd(e)]:[];c.forEach(y=>{s&&y.addEventListener("scroll",n,{passive:!0}),i&&y.addEventListener("resize",n)});const d=l&&a?mde(l,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(y=>{let[w]=y;w&&w.target===l&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(e)})),n()}),l&&!u&&h.observe(l),h.observe(e));let p,g=u?bl(t):null;u&&v();function v(){const y=bl(t);g&&!kD(g,y)&&n(),g=y,p=requestAnimationFrame(v)}return n(),()=>{var y;c.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),d==null||d(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const vde=uS,_D=Qce,yde=Zce,bde=Yce,AD=qce,ID=(t,e,n)=>{const r=new Map,s={platform:pde,...n},i={...s.platform,_c:r};return Gce(t,e,{...s,platform:i})},Sde=Ke({style:{type:de([String,Object,Array]),default:()=>({})}}),wde=se({name:"ElVisuallyHidden"}),Ede=se({...wde,props:Sde,setup(t){const e=t,n=L(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(r,s)=>($(),Y("span",Yt(r.$attrs,{style:m(n)}),[pe(r.$slots,"default")],16))}});var xde=We(Ede,[["__file","visual-hidden.vue"]]);Ke({});const Tde=t=>{if(!on)return;if(!t)return t;const e=us(t);return e||(Dn(t)?e:t)},Cde=({middleware:t,placement:e,strategy:n})=>{const r=H(),s=H(),i=H(),o=H(),a=H({}),u={x:i,y:o,placement:e,strategy:n,middlewareData:a},l=async()=>{if(!on)return;const c=Tde(r),d=us(s);if(!c||!d)return;const f=await ID(c,d,{placement:m(e),strategy:m(n),middleware:m(t)});xu(u).forEach(h=>{u[h].value=f[h]})};return Ft(()=>{Fr(()=>{l()})}),{...u,update:l,referenceRef:r,contentRef:s}},kde=({arrowRef:t,padding:e})=>({name:"arrow",options:{element:t,padding:e},fn(n){const r=m(t);return r?AD({element:r,padding:e}).fn(n):{}}}),_de=se({name:"ElTooltipV2Content"}),Ade=se({..._de,props:{...sS,...pD},setup(t){const e=t,{triggerRef:n,contentId:r}=nt(Qm),s=H(e.placement),i=H(e.strategy),o=H(null),{referenceRef:a,contentRef:u,middlewareData:l,x:c,y:d,update:f}=Cde({placement:s,strategy:i,middleware:L(()=>{const b=[_D(e.offset)];return e.showArrow&&b.push(kde({arrowRef:o})),b})}),h=Gu().nextZIndex(),p=Oe("tooltip-v2"),g=L(()=>s.value.split("-")[0]),v=L(()=>({position:m(i),top:`${m(d)||0}px`,left:`${m(c)||0}px`,zIndex:h})),y=L(()=>{if(!e.showArrow)return{};const{arrow:b}=m(l);return{[`--${p.namespace.value}-tooltip-v2-arrow-x`]:`${b==null?void 0:b.x}px`||"",[`--${p.namespace.value}-tooltip-v2-arrow-y`]:`${b==null?void 0:b.y}px`||""}}),w=L(()=>[p.e("content"),p.is("dark",e.effect==="dark"),p.is(m(i)),e.contentClass]);return Ie(o,()=>f()),Ie(()=>e.placement,b=>s.value=b),Ft(()=>{Ie(()=>e.reference||n.value,b=>{a.value=b||void 0},{immediate:!0})}),Jt(gD,{arrowRef:o}),(b,S)=>($(),Y("div",{ref_key:"contentRef",ref:u,style:mt(m(v)),"data-tooltip-v2-root":""},[b.nowrap?ge("v-if",!0):($(),Y("div",{key:0,"data-side":m(g),class:F(m(w))},[pe(b.$slots,"default",{contentStyle:m(v),contentClass:m(w)}),ie(m(xde),{id:m(r),role:"tooltip"},{default:le(()=>[b.ariaLabel?($(),Y(dt,{key:0},[Qt(ze(b.ariaLabel),1)],64)):pe(b.$slots,"default",{key:1})]),_:3},8,["id"]),pe(b.$slots,"arrow",{style:mt(m(y)),side:m(g)})],10,["data-side"]))],4))}});var fk=We(Ade,[["__file","content.vue"]]);const Ide=Ke({setRef:{type:de(Function),required:!0},onlyChild:Boolean});var Rde=se({props:Ide,setup(t,{slots:e}){const n=H(),r=Wm(n,s=>{s?t.setRef(s.nextElementSibling):t.setRef(null)});return()=>{var s;const[i]=((s=e.default)==null?void 0:s.call(e))||[],o=t.onlyChild?FX(i.children):i.children;return ie(dt,{ref:r},[o])}}});const Lde=se({name:"ElTooltipV2Trigger"}),Pde=se({...Lde,props:{...pD,...oS},setup(t){const e=t,{onClose:n,onOpen:r,onDelayOpen:s,triggerRef:i,contentId:o}=nt(Qm);let a=!1;const u=w=>{i.value=w},l=()=>{a=!1},c=Jn(e.onMouseEnter,s),d=Jn(e.onMouseLeave,n),f=Jn(e.onMouseDown,()=>{n(),a=!0,document.addEventListener("mouseup",l,{once:!0})}),h=Jn(e.onFocus,()=>{a||r()}),p=Jn(e.onBlur,n),g=Jn(e.onClick,w=>{w.detail===0&&n()}),v={blur:p,click:g,focus:h,mousedown:f,mouseenter:c,mouseleave:d},y=(w,b,S)=>{w&&Object.entries(b).forEach(([E,x])=>{w[S](E,x)})};return Ie(i,(w,b)=>{y(w,v,"addEventListener"),y(b,v,"removeEventListener"),w&&w.setAttribute("aria-describedby",o.value)}),In(()=>{y(i.value,v,"removeEventListener"),document.removeEventListener("mouseup",l)}),(w,b)=>w.nowrap?($(),ye(m(Rde),{key:0,"set-ref":u,"only-child":""},{default:le(()=>[pe(w.$slots,"default")]),_:3})):($(),Y("button",Yt({key:1,ref_key:"triggerRef",ref:i},w.$attrs),[pe(w.$slots,"default")],16))}});var Dde=We(Pde,[["__file","trigger.vue"]]);const Ode=se({name:"ElTooltipV2"}),$de=se({...Ode,props:Oce,setup(t){const n=_r(t),r=fn(vi(n,Object.keys(rS))),s=fn(vi(n,Object.keys(sS))),i=fn(vi(n,Object.keys(iS))),o=fn(vi(n,Object.keys(oS)));return(a,u)=>($(),ye(Nce,Ms(Qi(i)),{default:le(({open:l})=>[ie(Dde,Yt(o,{nowrap:""}),{default:le(()=>[pe(a.$slots,"trigger")]),_:3},16),ie(m(Xu),{to:a.to,disabled:!a.teleported},{default:le(()=>[a.fullTransition?($(),ye(Ar,Ms(Yt({key:0},a.transitionProps)),{default:le(()=>[a.alwaysOn||l?($(),ye(fk,Ms(Yt({key:0},s)),{arrow:le(({style:c,side:d})=>[a.showArrow?($(),ye(ak,Yt({key:0},r,{style:c,side:d}),null,16,["style","side"])):ge("v-if",!0)]),default:le(()=>[pe(a.$slots,"default")]),_:3},16)):ge("v-if",!0)]),_:2},1040)):($(),Y(dt,{key:1},[a.alwaysOn||l?($(),ye(fk,Ms(Yt({key:0},s)),{arrow:le(({style:c,side:d})=>[a.showArrow?($(),ye(ak,Yt({key:0},r,{style:c,side:d}),null,16,["style","side"])):ge("v-if",!0)]),default:le(()=>[pe(a.$slots,"default")]),_:3},16)):ge("v-if",!0)],64))]),_:2},1032,["to","disabled"])]),_:3},16))}});var Mde=We($de,[["__file","tooltip.vue"]]);const Nde=Dt(Mde),RD="left-check-change",LD="right-check-change",zl=Ke({data:{type:de(Array),default:()=>[]},titles:{type:de(Array),default:()=>[]},buttonTexts:{type:de(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:de(Function)},leftDefaultChecked:{type:de(Array),default:()=>[]},rightDefaultChecked:{type:de(Array),default:()=>[]},renderContent:{type:de(Function)},modelValue:{type:de(Array),default:()=>[]},format:{type:de(Object),default:()=>({})},filterable:Boolean,props:{type:de(Object),default:()=>Wn({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),Cy=(t,e)=>[t,e].every(Ve)||Ve(t)&&Sr(e),Fde={[Xt]:(t,e,n)=>[t,n].every(Ve)&&["left","right"].includes(e),[_t]:t=>Ve(t),[RD]:Cy,[LD]:Cy},ky="checked-change",Bde=Ke({data:zl.data,optionRender:{type:de(Function)},placeholder:String,title:String,filterable:Boolean,format:zl.format,filterMethod:zl.filterMethod,defaultChecked:zl.leftDefaultChecked,props:zl.props}),Vde={[ky]:Cy},uf=t=>{const e={label:"label",key:"key",disabled:"disabled"};return L(()=>({...e,...t.props}))},Ude=(t,e,n)=>{const r=uf(t),s=L(()=>t.data.filter(c=>pt(t.filterMethod)?t.filterMethod(e.query,c):String(c[r.value.label]||c[r.value.key]).toLowerCase().includes(e.query.toLowerCase()))),i=L(()=>s.value.filter(c=>!c[r.value.disabled])),o=L(()=>{const c=e.checked.length,d=t.data.length,{noChecked:f,hasChecked:h}=t.format;return f&&h?c>0?h.replace(/\${checked}/g,c.toString()).replace(/\${total}/g,d.toString()):f.replace(/\${total}/g,d.toString()):`${c}/${d}`}),a=L(()=>{const c=e.checked.length;return c>0&&c<i.value.length}),u=()=>{const c=i.value.map(d=>d[r.value.key]);e.allChecked=c.length>0&&c.every(d=>e.checked.includes(d))},l=c=>{e.checked=c?i.value.map(d=>d[r.value.key]):[]};return Ie(()=>e.checked,(c,d)=>{if(u(),e.checkChangeByUser){const f=c.concat(d).filter(h=>!c.includes(h)||!d.includes(h));n(ky,c,f)}else n(ky,c),e.checkChangeByUser=!0}),Ie(i,()=>{u()}),Ie(()=>t.data,()=>{const c=[],d=s.value.map(f=>f[r.value.key]);e.checked.forEach(f=>{d.includes(f)&&c.push(f)}),e.checkChangeByUser=!1,e.checked=c}),Ie(()=>t.defaultChecked,(c,d)=>{if(d&&c.length===d.length&&c.every(p=>d.includes(p)))return;const f=[],h=i.value.map(p=>p[r.value.key]);c.forEach(p=>{h.includes(p)&&f.push(p)}),e.checkChangeByUser=!1,e.checked=f},{immediate:!0}),{filteredData:s,checkableData:i,checkedSummary:o,isIndeterminate:a,updateAllChecked:u,handleAllCheckedChange:l}},Hde=se({name:"ElTransferPanel"}),jde=se({...Hde,props:Bde,emits:Vde,setup(t,{expose:e,emit:n}){const r=t,s=gr(),i=({option:b})=>b,{t:o}=sn(),a=Oe("transfer"),u=fn({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),l=uf(r),{filteredData:c,checkedSummary:d,isIndeterminate:f,handleAllCheckedChange:h}=Ude(r,u,n),p=L(()=>!$s(u.query)&&$s(c.value)),g=L(()=>!$s(s.default()[0].children)),{checked:v,allChecked:y,query:w}=_r(u);return e({query:w}),(b,S)=>($(),Y("div",{class:F(m(a).b("panel"))},[J("p",{class:F(m(a).be("panel","header"))},[ie(m(li),{modelValue:m(y),"onUpdate:modelValue":E=>Dn(y)?y.value=E:null,indeterminate:m(f),"validate-event":!1,onChange:m(h)},{default:le(()=>[Qt(ze(b.title)+" ",1),J("span",null,ze(m(d)),1)]),_:1},8,["modelValue","onUpdate:modelValue","indeterminate","onChange"])],2),J("div",{class:F([m(a).be("panel","body"),m(a).is("with-footer",m(g))])},[b.filterable?($(),ye(m(es),{key:0,modelValue:m(w),"onUpdate:modelValue":E=>Dn(w)?w.value=E:null,class:F(m(a).be("panel","filter")),size:"default",placeholder:b.placeholder,"prefix-icon":m(rU),clearable:"","validate-event":!1},null,8,["modelValue","onUpdate:modelValue","class","placeholder","prefix-icon"])):ge("v-if",!0),Ot(ie(m(dL),{modelValue:m(v),"onUpdate:modelValue":E=>Dn(v)?v.value=E:null,"validate-event":!1,class:F([m(a).is("filterable",b.filterable),m(a).be("panel","list")])},{default:le(()=>[($(!0),Y(dt,null,Zt(m(c),E=>($(),ye(m(li),{key:E[m(l).key],class:F(m(a).be("panel","item")),value:E[m(l).key],disabled:E[m(l).disabled],"validate-event":!1},{default:le(()=>{var x;return[ie(i,{option:(x=b.optionRender)==null?void 0:x.call(b,E)},null,8,["option"])]}),_:2},1032,["class","value","disabled"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"]),[[cn,!m(p)&&!m($s)(b.data)]]),Ot(J("div",{class:F(m(a).be("panel","empty"))},[pe(b.$slots,"empty",{},()=>[Qt(ze(m(p)?m(o)("el.transfer.noMatch"):m(o)("el.transfer.noData")),1)])],2),[[cn,m(p)||m($s)(b.data)]])],2),m(g)?($(),Y("p",{key:0,class:F(m(a).be("panel","footer"))},[pe(b.$slots,"default")],2)):ge("v-if",!0)],2))}});var hk=We(jde,[["__file","transfer-panel.vue"]]);const Kde=t=>{const e=uf(t),n=L(()=>t.data.reduce((i,o)=>(i[o[e.value.key]]=o)&&i,{})),r=L(()=>t.data.filter(i=>!t.modelValue.includes(i[e.value.key]))),s=L(()=>t.targetOrder==="original"?t.data.filter(i=>t.modelValue.includes(i[e.value.key])):t.modelValue.reduce((i,o)=>{const a=n.value[o];return a&&i.push(a),i},[]));return{sourceData:r,targetData:s}},zde=(t,e,n)=>{const r=uf(t),s=(a,u,l)=>{n(_t,a),n(Xt,a,u,l)};return{addToLeft:()=>{const a=t.modelValue.slice();e.rightChecked.forEach(u=>{const l=a.indexOf(u);l>-1&&a.splice(l,1)}),s(a,"left",e.rightChecked)},addToRight:()=>{let a=t.modelValue.slice();const u=t.data.filter(l=>{const c=l[r.value.key];return e.leftChecked.includes(c)&&!t.modelValue.includes(c)}).map(l=>l[r.value.key]);a=t.targetOrder==="unshift"?u.concat(a):a.concat(u),t.targetOrder==="original"&&(a=t.data.filter(l=>a.includes(l[r.value.key])).map(l=>l[r.value.key])),s(a,"right",e.leftChecked)}}},Wde=(t,e)=>({onSourceCheckedChange:(s,i)=>{t.leftChecked=s,i&&e(RD,s,i)},onTargetCheckedChange:(s,i)=>{t.rightChecked=s,i&&e(LD,s,i)}}),Gde=se({name:"ElTransfer"}),qde=se({...Gde,props:zl,emits:Fde,setup(t,{expose:e,emit:n}){const r=t,s=gr(),{t:i}=sn(),o=Oe("transfer"),{formItem:a}=Ur(),u=fn({leftChecked:[],rightChecked:[]}),l=uf(r),{sourceData:c,targetData:d}=Kde(r),{onSourceCheckedChange:f,onTargetCheckedChange:h}=Wde(u,n),{addToLeft:p,addToRight:g}=zde(r,u,n),v=H(),y=H(),w=A=>{switch(A){case"left":v.value.query="";break;case"right":y.value.query="";break}},b=L(()=>r.buttonTexts.length===2),S=L(()=>r.titles[0]||i("el.transfer.titles.0")),E=L(()=>r.titles[1]||i("el.transfer.titles.1")),x=L(()=>r.filterPlaceholder||i("el.transfer.filterPlaceholder"));Ie(()=>r.modelValue,()=>{var A;r.validateEvent&&((A=a==null?void 0:a.validate)==null||A.call(a,"change").catch(C=>void 0))});const k=L(()=>A=>{var C;if(r.renderContent)return r.renderContent(bt,A);const _=(((C=s.default)==null?void 0:C.call(s,{option:A}))||[]).filter(O=>O.type!==br);return _.length?_:bt("span",A[l.value.label]||A[l.value.key])});return e({clearQuery:w,leftPanel:v,rightPanel:y}),(A,C)=>($(),Y("div",{class:F(m(o).b())},[ie(hk,{ref_key:"leftPanel",ref:v,data:m(c),"option-render":m(k),placeholder:m(x),title:m(S),filterable:A.filterable,format:A.format,"filter-method":A.filterMethod,"default-checked":A.leftDefaultChecked,props:r.props,onCheckedChange:m(f)},{empty:le(()=>[pe(A.$slots,"left-empty")]),default:le(()=>[pe(A.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),J("div",{class:F(m(o).e("buttons"))},[ie(m(Cr),{type:"primary",class:F([m(o).e("button"),m(o).is("with-texts",m(b))]),disabled:m($s)(u.rightChecked),onClick:m(p)},{default:le(()=>[ie(m(lt),null,{default:le(()=>[ie(m(Ea))]),_:1}),m(an)(A.buttonTexts[0])?ge("v-if",!0):($(),Y("span",{key:0},ze(A.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),ie(m(Cr),{type:"primary",class:F([m(o).e("button"),m(o).is("with-texts",m(b))]),disabled:m($s)(u.leftChecked),onClick:m(g)},{default:le(()=>[m(an)(A.buttonTexts[1])?ge("v-if",!0):($(),Y("span",{key:0},ze(A.buttonTexts[1]),1)),ie(m(lt),null,{default:le(()=>[ie(m(cs))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),ie(hk,{ref_key:"rightPanel",ref:y,data:m(d),"option-render":m(k),placeholder:m(x),filterable:A.filterable,format:A.format,"filter-method":A.filterMethod,title:m(E),"default-checked":A.rightDefaultChecked,props:r.props,onCheckedChange:m(h)},{empty:le(()=>[pe(A.$slots,"right-empty")]),default:le(()=>[pe(A.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var Yde=We(qde,[["__file","transfer.vue"]]);const Xde=Dt(Yde),du="$treeNodeId",pk=function(t,e){!e||e[du]||Object.defineProperty(e,du,{value:t.id,enumerable:!1,configurable:!1,writable:!1})},pS=(t,e)=>e==null?void 0:e[t||du],_y=(t,e,n)=>{const r=t.value.currentNode;n();const s=t.value.currentNode;r!==s&&e("current-change",s?s.data:null,s)},Ay=t=>{let e=!0,n=!0,r=!0;for(let s=0,i=t.length;s<i;s++){const o=t[s];(o.checked!==!0||o.indeterminate)&&(e=!1,o.disabled||(r=!1)),(o.checked!==!1||o.indeterminate)&&(n=!1)}return{all:e,none:n,allWithoutDisable:r,half:!e&&!n}},Ic=function(t){if(t.childNodes.length===0||t.loading)return;const{all:e,none:n,half:r}=Ay(t.childNodes);e?(t.checked=!0,t.indeterminate=!1):r?(t.checked=!1,t.indeterminate=!0):n&&(t.checked=!1,t.indeterminate=!1);const s=t.parent;!s||s.level===0||t.store.checkStrictly||Ic(s)},uh=function(t,e){const n=t.store.props,r=t.data||{},s=n[e];if(pt(s))return s(r,t);if(ut(s))return r[s];if(an(s)){const i=r[e];return an(i)?"":i}};let Qde=0,Iy=class Xh{constructor(e){this.id=Qde++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in e)hn(e,n)&&(this[n]=e[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const n=e.props;if(n&&typeof n.isLeaf<"u"){const i=uh(this,"isLeaf");wn(i)&&(this.isLeafByUser=i)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&!this.isLeafByUser&&this.expand(),Ve(this.data)||pk(this,this.data),!this.data)return;const r=e.defaultExpandedKeys,s=e.key;s&&r&&r.includes(this.key)&&this.expand(null,e.autoExpandParent),s&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(e){Ve(e)||pk(this,e),this.data=e,this.childNodes=[];let n;this.level===0&&Ve(this.data)?n=this.data:n=uh(this,"children")||[];for(let r=0,s=n.length;r<s;r++)this.insertChild({data:n[r]})}get label(){return uh(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return uh(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return e.childNodes[n+1]}return null}get previousSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return n>0?e.childNodes[n-1]:null}return null}contains(e,n=!0){return(this.childNodes||[]).some(r=>r===e||n&&r.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,n,r){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof Xh)){if(!r){const s=this.getChildren(!0);s.includes(e.data)||(an(n)||n<0?s.push(e.data):s.splice(n,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=fn(new Xh(e)),e instanceof Xh&&e.initialize()}e.level=this.level+1,an(n)||n<0?this.childNodes.push(e):this.childNodes.splice(n,0,e),this.updateLeafState()}insertBefore(e,n){let r;n&&(r=this.childNodes.indexOf(n)),this.insertChild(e,r)}insertAfter(e,n){let r;n&&(r=this.childNodes.indexOf(n),r!==-1&&(r+=1)),this.insertChild(e,r)}removeChild(e){const n=this.getChildren()||[],r=n.indexOf(e.data);r>-1&&n.splice(r,1);const s=this.childNodes.indexOf(e);s>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(s,1)),this.updateLeafState()}removeChildByData(e){let n=null;for(let r=0;r<this.childNodes.length;r++)if(this.childNodes[r].data===e){n=this.childNodes[r];break}n&&this.removeChild(n)}expand(e,n){const r=()=>{if(n){let s=this.parent;for(;s.level>0;)s.expanded=!0,s=s.parent}this.expanded=!0,e&&e(),this.childNodes.forEach(s=>{s.canFocus=!0})};this.shouldLoadData()?this.loadData(s=>{Ve(s)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Ic(this),r())}):r()}doCreateChildren(e,n={}){e.forEach(r=>{this.insertChild(Object.assign({data:r},n),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(e=>{e.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,n,r,s){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:o,allWithoutDisable:a}=Ay(this.childNodes);!this.isLeaf&&!o&&a&&(this.checked=!1,e=!1);const u=()=>{if(n){const l=this.childNodes;for(let f=0,h=l.length;f<h;f++){const p=l[f];s=s||e!==!1;const g=p.disabled?p.checked:s;p.setChecked(g,n,!0,s)}const{half:c,all:d}=Ay(l);d||(this.checked=d,this.indeterminate=c)}};if(this.shouldLoadData()){this.loadData(()=>{u(),Ic(this)},{checked:e!==!1});return}else u()}const i=this.parent;!i||i.level===0||r||Ic(i)}getChildren(e=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const r=this.store.props;let s="children";return r&&(s=r.children||"children"),an(n[s])&&(n[s]=null),e&&!n[s]&&(n[s]=[]),n[s]}updateChildren(){const e=this.getChildren()||[],n=this.childNodes.map(i=>i.data),r={},s=[];e.forEach((i,o)=>{const a=i[du];!!a&&n.findIndex(l=>l[du]===a)>=0?r[a]={index:o,data:i}:s.push({index:o,data:i})}),this.store.lazy||n.forEach(i=>{r[i[du]]||this.removeChildByData(i)}),s.forEach(({index:i,data:o})=>{this.insertChild({data:o},i)}),this.updateLeafState()}loadData(e,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const r=i=>{this.childNodes=[],this.doCreateChildren(i,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,i)},s=()=>{this.loading=!1};this.store.load(this,r,s)}else e&&e.call(this)}eachNode(e){const n=[this];for(;n.length;){const r=n.shift();n.unshift(...r.childNodes),e(r)}}reInitChecked(){this.store.checkStrictly||Ic(this)}};class Zde{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const n in e)hn(e,n)&&(this[n]=e[n]);this.nodesMap={}}initialize(){if(this.root=new Iy({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(e){const n=this.filterNodeMethod,r=this.lazy,s=async function(i){const o=i.root?i.root.childNodes:i.childNodes;for(const[a,u]of o.entries())u.visible=n.call(u,e,u.data,u),a%80===0&&a>0&&await ft(),await s(u);if(!i.visible&&o.length){let a=!0;a=!o.some(u=>u.visible),i.root?i.root.visible=a===!1:i.visible=a===!1}e&&i.visible&&!i.isLeaf&&(!r||i.loaded)&&i.expand()};s(this)}setData(e){e!==this.root.data?(this.nodesMap={},this.root.setData(e),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(e){if(e instanceof Iy)return e;const n=Bt(e)?pS(this.key,e):e;return this.nodesMap[n]||null}insertBefore(e,n){const r=this.getNode(n);r.parent.insertBefore({data:e},r)}insertAfter(e,n){const r=this.getNode(n);r.parent.insertAfter({data:e},r)}remove(e){const n=this.getNode(e);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(e,n){const r=js(n)?this.root:this.getNode(n);r&&r.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],n=this.nodesMap;e.forEach(r=>{const s=n[r];s&&s.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const n=this.key;!e||!e.data||(n?e.key!==void 0&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(r=>{this.deregisterNode(r)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,n=!1){const r=[],s=function(i){(i.root?i.root.childNodes:i.childNodes).forEach(a=>{(a.checked||n&&a.indeterminate)&&(!e||e&&a.isLeaf)&&r.push(a.data),s(a)})};return s(this),r}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const e=[],n=function(r){(r.root?r.root.childNodes:r.childNodes).forEach(i=>{i.indeterminate&&e.push(i.data),n(i)})};return n(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],n=this.nodesMap;for(const r in n)hn(n,r)&&e.push(n[r]);return e}updateChildren(e,n){const r=this.nodesMap[e];if(!r)return;const s=r.childNodes;for(let i=s.length-1;i>=0;i--){const o=s[i];this.remove(o.data)}for(let i=0,o=n.length;i<o;i++){const a=n[i];this.append(a,r.data)}}_setCheckedKeys(e,n=!1,r){const s=this._getAllNodes().sort((u,l)=>u.level-l.level),i=Object.create(null),o=Object.keys(r);s.forEach(u=>u.setChecked(!1,!1));const a=u=>{u.childNodes.forEach(l=>{var c;i[l.data[e]]=!0,(c=l.childNodes)!=null&&c.length&&a(l)})};for(let u=0,l=s.length;u<l;u++){const c=s[u],d=c.data[e].toString();if(!o.includes(d)){c.checked&&!i[d]&&c.setChecked(!1,!1);continue}if(c.childNodes.length&&a(c),c.isLeaf||this.checkStrictly){c.setChecked(!0,!1);continue}if(c.setChecked(!0,!0),n){c.setChecked(!1,!1);const h=function(p){p.childNodes.forEach(v=>{v.isLeaf||v.setChecked(!1,!1),h(v)})};h(c)}}}setCheckedNodes(e,n=!1){const r=this.key,s={};e.forEach(i=>{s[(i||{})[r]]=!0}),this._setCheckedKeys(r,n,s)}setCheckedKeys(e,n=!1){this.defaultCheckedKeys=e;const r=this.key,s={};e.forEach(i=>{s[i]=!0}),this._setCheckedKeys(r,n,s)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(n=>{const r=this.getNode(n);r&&r.expand(null,this.autoExpandParent)})}setChecked(e,n,r){const s=this.getNode(e);s&&s.setChecked(!!n,r)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,n=!0){const r=e[this.key],s=this.nodesMap[r];this.setCurrentNode(s),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,n=!0){if(this.currentNodeKey=e,js(e)){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const r=this.getNode(e);r&&(this.setCurrentNode(r),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const Jde=se({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(t){const e=Oe("tree"),n=nt("NodeInstance"),r=nt("RootTree");return()=>{const s=t.node,{data:i,store:o}=s;return t.renderContent?t.renderContent(bt,{_self:n,node:s,data:i,store:o}):pe(r.ctx.slots,"default",{node:s,data:i},()=>[bt(nS,{tag:"span",truncated:!0,class:e.be("node","label")},()=>[s.label])])}}});var efe=We(Jde,[["__file","tree-node-content.vue"]]);function PD(t){const e=nt("TreeNodeMap",null),n={treeNodeExpand:r=>{t.node!==r&&t.node.collapse()},children:[]};return e&&e.children.push(n),Jt("TreeNodeMap",n),{broadcastExpanded:r=>{if(t.accordion)for(const s of n.children)s.treeNodeExpand(r)}}}const DD=Symbol("dragEvents");function tfe({props:t,ctx:e,el$:n,dropIndicator$:r,store:s}){const i=Oe("tree"),o=H({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return Jt(DD,{treeNodeDragStart:({event:c,treeNode:d})=>{if(pt(t.allowDrag)&&!t.allowDrag(d.node))return c.preventDefault(),!1;c.dataTransfer.effectAllowed="move";try{c.dataTransfer.setData("text/plain","")}catch{}o.value.draggingNode=d,e.emit("node-drag-start",d.node,c)},treeNodeDragOver:({event:c,treeNode:d})=>{const f=d,h=o.value.dropNode;h&&h.node.id!==f.node.id&&ts(h.$el,i.is("drop-inner"));const p=o.value.draggingNode;if(!p||!f)return;let g=!0,v=!0,y=!0,w=!0;pt(t.allowDrop)&&(g=t.allowDrop(p.node,f.node,"prev"),w=v=t.allowDrop(p.node,f.node,"inner"),y=t.allowDrop(p.node,f.node,"next")),c.dataTransfer.dropEffect=v||g||y?"move":"none",(g||v||y)&&(h==null?void 0:h.node.id)!==f.node.id&&(h&&e.emit("node-drag-leave",p.node,h.node,c),e.emit("node-drag-enter",p.node,f.node,c)),g||v||y?o.value.dropNode=f:o.value.dropNode=null,f.node.nextSibling===p.node&&(y=!1),f.node.previousSibling===p.node&&(g=!1),f.node.contains(p.node,!1)&&(v=!1),(p.node===f.node||p.node.contains(f.node))&&(g=!1,v=!1,y=!1);const b=f.$el.querySelector(`.${i.be("node","content")}`).getBoundingClientRect(),S=n.value.getBoundingClientRect();let E;const x=g?v?.25:y?.45:1:-1,k=y?v?.75:g?.55:0:1;let A=-9999;const C=c.clientY-b.top;C<b.height*x?E="before":C>b.height*k?E="after":v?E="inner":E="none";const _=f.$el.querySelector(`.${i.be("node","expand-icon")}`).getBoundingClientRect(),O=r.value;E==="before"?A=_.top-S.top:E==="after"&&(A=_.bottom-S.top),O.style.top=`${A}px`,O.style.left=`${_.right-S.left}px`,E==="inner"?Js(f.$el,i.is("drop-inner")):ts(f.$el,i.is("drop-inner")),o.value.showDropIndicator=E==="before"||E==="after",o.value.allowDrop=o.value.showDropIndicator||w,o.value.dropType=E,e.emit("node-drag-over",p.node,f.node,c)},treeNodeDragEnd:c=>{const{draggingNode:d,dropType:f,dropNode:h}=o.value;if(c.preventDefault(),c.dataTransfer&&(c.dataTransfer.dropEffect="move"),d&&h){const p={data:d.node.data};f!=="none"&&d.node.remove(),f==="before"?h.node.parent.insertBefore(p,h.node):f==="after"?h.node.parent.insertAfter(p,h.node):f==="inner"&&h.node.insertChild(p),f!=="none"&&(s.value.registerNode(p),s.value.key&&d.node.eachNode(g=>{var v;(v=s.value.nodesMap[g.data[s.value.key]])==null||v.setChecked(g.checked,!s.value.checkStrictly)})),ts(h.$el,i.is("drop-inner")),e.emit("node-drag-end",d.node,h.node,f,c),f!=="none"&&e.emit("node-drop",d.node,h.node,f,c)}d&&!h&&e.emit("node-drag-end",d.node,null,f,c),o.value.showDropIndicator=!1,o.value.draggingNode=null,o.value.dropNode=null,o.value.allowDrop=!0}}),{dragState:o}}const nfe=se({name:"ElTreeNode",components:{ElCollapseTransition:Km,ElCheckbox:li,NodeContent:efe,ElIcon:lt,Loading:Ji},props:{node:{type:Iy,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(t,e){const n=Oe("tree"),{broadcastExpanded:r}=PD(t),s=nt("RootTree"),i=H(!1),o=H(!1),a=H(),u=H(),l=H(),c=nt(DD),d=Kt();Jt("NodeInstance",d),t.node.expanded&&(i.value=!0,o.value=!0);const f=s.props.props.children||"children";Ie(()=>{var C;const _=(C=t.node.data)==null?void 0:C[f];return _&&[..._]},()=>{t.node.updateChildren()}),Ie(()=>t.node.indeterminate,C=>{g(t.node.checked,C)}),Ie(()=>t.node.checked,C=>{g(C,t.node.indeterminate)}),Ie(()=>t.node.childNodes.length,()=>t.node.reInitChecked()),Ie(()=>t.node.expanded,C=>{ft(()=>i.value=C),C&&(o.value=!0)});const h=C=>pS(s.props.nodeKey,C.data),p=C=>{const _=t.props.class;if(!_)return{};let O;if(pt(_)){const{data:P}=C;O=_(P,C)}else O=_;return ut(O)?{[O]:!0}:O},g=(C,_)=>{(a.value!==C||u.value!==_)&&s.ctx.emit("check-change",t.node.data,C,_),a.value=C,u.value=_},v=C=>{_y(s.store,s.ctx.emit,()=>{var _;if((_=s==null?void 0:s.props)==null?void 0:_.nodeKey){const P=h(t.node);s.store.value.setCurrentNodeKey(P)}else s.store.value.setCurrentNode(t.node)}),s.currentNode.value=t.node,s.props.expandOnClickNode&&w(),(s.props.checkOnClickNode||t.node.isLeaf&&s.props.checkOnClickLeaf&&t.showCheckbox)&&!t.node.disabled&&b(!t.node.checked),s.ctx.emit("node-click",t.node.data,t.node,d,C)},y=C=>{var _;(_=s.instance.vnode.props)!=null&&_.onNodeContextmenu&&(C.stopPropagation(),C.preventDefault()),s.ctx.emit("node-contextmenu",C,t.node.data,t.node,d)},w=()=>{t.node.isLeaf||(i.value?(s.ctx.emit("node-collapse",t.node.data,t.node,d),t.node.collapse()):t.node.expand(()=>{e.emit("node-expand",t.node.data,t.node,d)}))},b=C=>{t.node.setChecked(C,!(s!=null&&s.props.checkStrictly)),ft(()=>{const _=s.store.value;s.ctx.emit("check",t.node.data,{checkedNodes:_.getCheckedNodes(),checkedKeys:_.getCheckedKeys(),halfCheckedNodes:_.getHalfCheckedNodes(),halfCheckedKeys:_.getHalfCheckedKeys()})})};return{ns:n,node$:l,tree:s,expanded:i,childNodeRendered:o,oldChecked:a,oldIndeterminate:u,getNodeKey:h,getNodeClass:p,handleSelectChange:g,handleClick:v,handleContextMenu:y,handleExpandIconClick:w,handleCheckChange:b,handleChildNodeExpand:(C,_,O)=>{r(_),s.ctx.emit("node-expand",C,_,O)},handleDragStart:C=>{s.props.draggable&&c.treeNodeDragStart({event:C,treeNode:t})},handleDragOver:C=>{C.preventDefault(),s.props.draggable&&c.treeNodeDragOver({event:C,treeNode:{$el:l.value,node:t.node}})},handleDrop:C=>{C.preventDefault()},handleDragEnd:C=>{s.props.draggable&&c.treeNodeDragEnd(C)},CaretRight:iI}}});function rfe(t,e,n,r,s,i){const o=Mt("el-icon"),a=Mt("el-checkbox"),u=Mt("loading"),l=Mt("node-content"),c=Mt("el-tree-node"),d=Mt("el-collapse-transition");return Ot(($(),Y("div",{ref:"node$",class:F([t.ns.b("node"),t.ns.is("expanded",t.expanded),t.ns.is("current",t.node.isCurrent),t.ns.is("hidden",!t.node.visible),t.ns.is("focusable",!t.node.disabled),t.ns.is("checked",!t.node.disabled&&t.node.checked),t.getNodeClass(t.node)]),role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.props.draggable,"data-key":t.getNodeKey(t.node),onClick:wt(t.handleClick,["stop"]),onContextmenu:t.handleContextMenu,onDragstart:wt(t.handleDragStart,["stop"]),onDragover:wt(t.handleDragOver,["stop"]),onDragend:wt(t.handleDragEnd,["stop"]),onDrop:wt(t.handleDrop,["stop"])},[J("div",{class:F(t.ns.be("node","content")),style:mt({paddingLeft:(t.node.level-1)*t.tree.props.indent+"px"})},[t.tree.props.icon||t.CaretRight?($(),ye(o,{key:0,class:F([t.ns.be("node","expand-icon"),t.ns.is("leaf",t.node.isLeaf),{expanded:!t.node.isLeaf&&t.expanded}]),onClick:wt(t.handleExpandIconClick,["stop"])},{default:le(()=>[($(),ye(jt(t.tree.props.icon||t.CaretRight)))]),_:1},8,["class","onClick"])):ge("v-if",!0),t.showCheckbox?($(),ye(a,{key:1,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:!!t.node.disabled,onClick:wt(()=>{},["stop"]),onChange:t.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):ge("v-if",!0),t.node.loading?($(),ye(o,{key:2,class:F([t.ns.be("node","loading-icon"),t.ns.is("loading")])},{default:le(()=>[ie(u)]),_:1},8,["class"])):ge("v-if",!0),ie(l,{node:t.node,"render-content":t.renderContent},null,8,["node","render-content"])],6),ie(d,null,{default:le(()=>[!t.renderAfterExpand||t.childNodeRendered?Ot(($(),Y("div",{key:0,class:F(t.ns.be("node","children")),role:"group","aria-expanded":t.expanded,onClick:wt(()=>{},["stop"])},[($(!0),Y(dt,null,Zt(t.node.childNodes,f=>($(),ye(c,{key:t.getNodeKey(f),"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:f,accordion:t.accordion,props:t.props,onNodeExpand:t.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded","onClick"])),[[cn,t.expanded]]):ge("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[cn,t.node.visible]])}var sfe=We(nfe,[["render",rfe],["__file","tree-node.vue"]]);function ife({el$:t},e){const n=Oe("tree");Ft(()=>{s()}),ki(()=>{Array.from(t.value.querySelectorAll("input[type=checkbox]")).forEach(o=>{o.setAttribute("tabindex","-1")})}),Cn(t,"keydown",i=>{const o=i.target;if(!o.className.includes(n.b("node")))return;const a=i.code,u=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),l=u.indexOf(o);let c;if([it.up,it.down].includes(a)){if(i.preventDefault(),a===it.up){c=l===-1?0:l!==0?l-1:u.length-1;const f=c;for(;!e.value.getNode(u[c].dataset.key).canFocus;){if(c--,c===f){c=-1;break}c<0&&(c=u.length-1)}}else{c=l===-1?0:l<u.length-1?l+1:0;const f=c;for(;!e.value.getNode(u[c].dataset.key).canFocus;){if(c++,c===f){c=-1;break}c>=u.length&&(c=0)}}c!==-1&&u[c].focus()}[it.left,it.right].includes(a)&&(i.preventDefault(),o.click());const d=o.querySelector('[type="checkbox"]');[it.enter,it.numpadEnter,it.space].includes(a)&&d&&(i.preventDefault(),d.click())});const s=()=>{var i;const o=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));Array.from(t.value.querySelectorAll("input[type=checkbox]")).forEach(l=>{l.setAttribute("tabindex","-1")});const u=t.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(u.length){u[0].setAttribute("tabindex","0");return}(i=o[0])==null||i.setAttribute("tabindex","0")}}const ofe=se({name:"ElTree",components:{ElTreeNode:sfe},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:Tn}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(t,e){const{t:n}=sn(),r=Oe("tree"),s=nt(Zu,null),i=H(new Zde({key:t.nodeKey,data:t.data,lazy:t.lazy,props:t.props,load:t.load,currentNodeKey:t.currentNodeKey,checkStrictly:t.checkStrictly,checkDescendants:t.checkDescendants,defaultCheckedKeys:t.defaultCheckedKeys,defaultExpandedKeys:t.defaultExpandedKeys,autoExpandParent:t.autoExpandParent,defaultExpandAll:t.defaultExpandAll,filterNodeMethod:t.filterNodeMethod}));i.value.initialize();const o=H(i.value.root),a=H(null),u=H(null),l=H(null),{broadcastExpanded:c}=PD(t),{dragState:d}=tfe({props:t,ctx:e,el$:u,dropIndicator$:l,store:i});ife({el$:u},i);const f=L(()=>{const{childNodes:D}=o.value,M=s?s.hasFilteredOptions!==0:!1;return(!D||D.length===0||D.every(({visible:K})=>!K))&&!M});Ie(()=>t.currentNodeKey,D=>{i.value.setCurrentNodeKey(D)}),Ie(()=>t.defaultCheckedKeys,D=>{i.value.setDefaultCheckedKey(D)}),Ie(()=>t.defaultExpandedKeys,D=>{i.value.setDefaultExpandedKeys(D)}),Ie(()=>t.data,D=>{i.value.setData(D)},{deep:!0}),Ie(()=>t.checkStrictly,D=>{i.value.checkStrictly=D});const h=D=>{if(!t.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");i.value.filter(D)},p=D=>pS(t.nodeKey,D.data),g=D=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const M=i.value.getNode(D);if(!M)return[];const K=[M.data];let q=M.parent;for(;q&&q!==o.value;)K.push(q.data),q=q.parent;return K.reverse()},v=(D,M)=>i.value.getCheckedNodes(D,M),y=D=>i.value.getCheckedKeys(D),w=()=>{const D=i.value.getCurrentNode();return D?D.data:null},b=()=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const D=w();return D?D[t.nodeKey]:null},S=(D,M)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");i.value.setCheckedNodes(D,M)},E=(D,M)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");i.value.setCheckedKeys(D,M)},x=(D,M,K)=>{i.value.setChecked(D,M,K)},k=()=>i.value.getHalfCheckedNodes(),A=()=>i.value.getHalfCheckedKeys(),C=(D,M=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");_y(i,e.emit,()=>{c(D),i.value.setUserCurrentNode(D,M)})},_=(D,M=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");_y(i,e.emit,()=>{c(),i.value.setCurrentNodeKey(D,M)})},O=D=>i.value.getNode(D),P=D=>{i.value.remove(D)},U=(D,M)=>{i.value.append(D,M)},j=(D,M)=>{i.value.insertBefore(D,M)},N=(D,M)=>{i.value.insertAfter(D,M)},R=(D,M,K)=>{c(M),e.emit("node-expand",D,M,K)},V=(D,M)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");i.value.updateChildren(D,M)};return Jt("RootTree",{ctx:e,props:t,store:i,root:o,currentNode:a,instance:Kt()}),Jt(to,void 0),{ns:r,store:i,root:o,currentNode:a,dragState:d,el$:u,dropIndicator$:l,isEmpty:f,filter:h,getNodeKey:p,getNodePath:g,getCheckedNodes:v,getCheckedKeys:y,getCurrentNode:w,getCurrentKey:b,setCheckedNodes:S,setCheckedKeys:E,setChecked:x,getHalfCheckedNodes:k,getHalfCheckedKeys:A,setCurrentNode:C,setCurrentKey:_,t:n,getNode:O,remove:P,append:U,insertBefore:j,insertAfter:N,handleNodeExpand:R,updateKeyChildren:V}}});function afe(t,e,n,r,s,i){const o=Mt("el-tree-node");return $(),Y("div",{ref:"el$",class:F([t.ns.b(),t.ns.is("dragging",!!t.dragState.draggingNode),t.ns.is("drop-not-allow",!t.dragState.allowDrop),t.ns.is("drop-inner",t.dragState.dropType==="inner"),{[t.ns.m("highlight-current")]:t.highlightCurrent}]),role:"tree"},[($(!0),Y(dt,null,Zt(t.root.childNodes,a=>($(),ye(o,{key:t.getNodeKey(a),node:a,props:t.props,accordion:t.accordion,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,"render-content":t.renderContent,onNodeExpand:t.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),t.isEmpty?($(),Y("div",{key:0,class:F(t.ns.e("empty-block"))},[pe(t.$slots,"empty",{},()=>{var a;return[J("span",{class:F(t.ns.e("empty-text"))},ze((a=t.emptyText)!=null?a:t.t("el.tree.emptyText")),3)]})],2)):ge("v-if",!0),Ot(J("div",{ref:"dropIndicator$",class:F(t.ns.e("drop-indicator"))},null,2),[[cn,t.dragState.showDropIndicator]])],2)}var lfe=We(ofe,[["render",afe],["__file","tree.vue"]]);const Zp=Dt(lfe),ufe=(t,{attrs:e,emit:n},{select:r,tree:s,key:i})=>{const o=Oe("tree-select");return Ie(()=>t.data,()=>{t.filterable&&ft(()=>{var u,l;(l=s.value)==null||l.filter((u=r.value)==null?void 0:u.states.inputValue)})},{flush:"post"}),{...vi(_r(t),Object.keys(gl.props)),...e,class:L(()=>e.class),style:L(()=>e.style),"onUpdate:modelValue":u=>n(_t,u),valueKey:i,popperClass:L(()=>{const u=[o.e("popper")];return t.popperClass&&u.push(t.popperClass),u.join(" ")}),filterMethod:(u="")=>{var l;t.filterMethod?t.filterMethod(u):t.remoteMethod?t.remoteMethod(u):(l=s.value)==null||l.filter(u)}}},cfe=se({extends:Vp,setup(t,e){const n=Vp.setup(t,e);delete n.selectOptionClick;const r=Kt().proxy;return ft(()=>{n.select.states.cachedOptions.get(r.value)||n.select.onOptionCreate(r)}),Ie(()=>e.attrs.visible,s=>{ft(()=>{n.states.visible=s})},{immediate:!0}),n},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function Ry(t){return t||t===0}function mS(t){return Ve(t)&&t.length}function Fl(t){return Ve(t)?t:Ry(t)?[t]:[]}function Qh(t,e,n,r,s){for(let i=0;i<t.length;i++){const o=t[i];if(e(o,i,t,s))return r?r(o,i,t,s):o;{const a=n(o);if(mS(a)){const u=Qh(a,e,n,r,o);if(u)return u}}}}function Zh(t,e,n,r){for(let s=0;s<t.length;s++){const i=t[s];e(i,s,t,r);const o=n(i);mS(o)&&Zh(o,e,n,i)}}const dfe=(t,{attrs:e,slots:n,emit:r},{select:s,tree:i,key:o})=>{Ie(()=>t.modelValue,()=>{t.showCheckbox&&ft(()=>{const f=i.value;f&&!Tr(f.getCheckedKeys(),Fl(t.modelValue))&&f.setCheckedKeys(Fl(t.modelValue))})},{immediate:!0,deep:!0});const a=L(()=>({value:o.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...t.props})),u=(f,h)=>{var p;const g=a.value[f];return pt(g)?g(h,(p=i.value)==null?void 0:p.getNode(u("value",h))):h[g]},l=Fl(t.modelValue).map(f=>Qh(t.data||[],h=>u("value",h)===f,h=>u("children",h),(h,p,g,v)=>v&&u("value",v))).filter(f=>Ry(f)),c=L(()=>{if(!t.renderAfterExpand&&!t.lazy)return[];const f=[];return Zh(t.data.concat(t.cacheData),h=>{const p=u("value",h);f.push({value:p,currentLabel:u("label",h),isDisabled:u("disabled",h)})},h=>u("children",h)),f}),d=()=>{var f;return(f=i.value)==null?void 0:f.getCheckedKeys().filter(h=>{var p;const g=(p=i.value)==null?void 0:p.getNode(h);return!Sr(g)&&$s(g.childNodes)})};return{...vi(_r(t),Object.keys(Zp.props)),...e,nodeKey:o,expandOnClickNode:L(()=>!t.checkStrictly&&t.expandOnClickNode),defaultExpandedKeys:L(()=>t.defaultExpandedKeys?t.defaultExpandedKeys.concat(l):l),renderContent:(f,{node:h,data:p,store:g})=>f(cfe,{value:u("value",p),label:u("label",p),disabled:u("disabled",p),visible:h.visible},t.renderContent?()=>t.renderContent(f,{node:h,data:p,store:g}):n.default?()=>n.default({node:h,data:p,store:g}):void 0),filterNodeMethod:(f,h,p)=>t.filterNodeMethod?t.filterNodeMethod(f,h,p):f?new RegExp(E1(f),"i").test(u("label",h)||""):!0,onNodeClick:(f,h,p)=>{var g,v,y,w;if((g=e.onNodeClick)==null||g.call(e,f,h,p),!(t.showCheckbox&&t.checkOnClickNode)){if(!t.showCheckbox&&(t.checkStrictly||h.isLeaf)){if(!u("disabled",f)){const b=(v=s.value)==null?void 0:v.states.options.get(u("value",f));(y=s.value)==null||y.handleOptionSelect(b)}}else t.expandOnClickNode&&p.proxy.handleExpandIconClick();(w=s.value)==null||w.focus()}},onCheck:(f,h)=>{var p;if(!t.showCheckbox)return;const g=u("value",f),v={};Zh([i.value.store.root],S=>v[S.key]=S,S=>S.childNodes);const y=h.checkedKeys,w=t.multiple?Fl(t.modelValue).filter(S=>!(S in v)&&!y.includes(S)):[],b=w.concat(y);if(t.checkStrictly)r(_t,t.multiple?b:b.includes(g)?g:void 0);else if(t.multiple){const S=d();r(_t,w.concat(S))}else{const S=Qh([f],k=>!mS(u("children",k))&&!u("disabled",k),k=>u("children",k)),E=S?u("value",S):void 0,x=Ry(t.modelValue)&&!!Qh([f],k=>u("value",k)===t.modelValue,k=>u("children",k));r(_t,E===t.modelValue||x?void 0:E)}ft(()=>{var S;const E=Fl(t.modelValue);i.value.setCheckedKeys(E),(S=e.onCheck)==null||S.call(e,f,{checkedKeys:i.value.getCheckedKeys(),checkedNodes:i.value.getCheckedNodes(),halfCheckedKeys:i.value.getHalfCheckedKeys(),halfCheckedNodes:i.value.getHalfCheckedNodes()})}),(p=s.value)==null||p.focus()},onNodeExpand:(f,h,p)=>{var g;(g=e.onNodeExpand)==null||g.call(e,f,h,p),ft(()=>{if(!t.checkStrictly&&t.lazy&&t.multiple&&h.checked){const v={},y=i.value.getCheckedKeys();Zh([i.value.store.root],S=>v[S.key]=S,S=>S.childNodes);const w=Fl(t.modelValue).filter(S=>!(S in v)&&!y.includes(S)),b=d();r(_t,w.concat(b))}})},cacheOptions:c}};var ffe=se({props:{data:{type:Array,default:()=>[]}},setup(t){const e=nt(Zu);return Ie(()=>t.data,()=>{var n;t.data.forEach(s=>{e.states.cachedOptions.has(s.value)||e.states.cachedOptions.set(s.value,s)});const r=((n=e.selectRef)==null?void 0:n.querySelectorAll("input"))||[];on&&!Array.from(r).includes(document.activeElement)&&e.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const hfe=se({name:"ElTreeSelect",inheritAttrs:!1,props:{...gl.props,...Zp.props,cacheData:{type:Array,default:()=>[]}},setup(t,e){const{slots:n,expose:r}=e,s=H(),i=H(),o=L(()=>t.nodeKey||t.valueKey||"value"),a=ufe(t,e,{select:s,tree:i,key:o}),{cacheOptions:u,...l}=dfe(t,e,{select:s,tree:i,key:o}),c=fn({});return r(c),Ft(()=>{Object.assign(c,{...vi(i.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...vi(s.value,["focus","blur","selectedLabel"])})}),()=>bt(gl,fn({...a,ref:d=>s.value=d}),{...n,default:()=>[bt(ffe,{data:u.value}),bt(Zp,fn({...l,ref:d=>i.value=d}))]})}});var pfe=We(hfe,[["__file","tree-select.vue"]]);const mfe=Dt(pfe),gS=Symbol(),gfe={key:-1,level:-1,data:{}};var Rc=(t=>(t.KEY="id",t.LABEL="label",t.CHILDREN="children",t.DISABLED="disabled",t.CLASS="",t))(Rc||{}),Ly=(t=>(t.ADD="add",t.DELETE="delete",t))(Ly||{});const OD={type:Number,default:26},vfe=Ke({data:{type:de(Array),default:()=>Wn([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:de(Object),default:()=>Wn({children:"children",label:"label",disabled:"disabled",value:"id",class:""})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:de(Array),default:()=>Wn([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:de(Array),default:()=>Wn([])},indent:{type:Number,default:16},itemSize:OD,icon:{type:Tn},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},checkOnClickLeaf:{type:Boolean,default:!0},currentNodeKey:{type:de([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:de(Function)},perfMode:{type:Boolean,default:!0}}),yfe=Ke({node:{type:de(Object),default:()=>Wn(gfe)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize:OD}),bfe=Ke({node:{type:de(Object),required:!0}}),$D="node-click",MD="node-drop",ND="node-expand",FD="node-collapse",BD="current-change",VD="check",UD="check-change",HD="node-contextmenu",Sfe={[$D]:(t,e,n)=>t&&e&&n,[MD]:(t,e,n)=>t&&e&&n,[ND]:(t,e)=>t&&e,[FD]:(t,e)=>t&&e,[BD]:(t,e)=>t&&e,[VD]:(t,e)=>t&&e,[UD]:(t,e)=>t&&wn(e),[HD]:(t,e,n)=>t&&e&&n},wfe={click:(t,e)=>!!(t&&e),drop:(t,e)=>!!(t&&e),toggle:t=>!!t,check:(t,e)=>t&&wn(e)};function Efe(t,e){const n=H(new Set),r=H(new Set),{emit:s}=Kt();Ie([()=>e.value,()=>t.defaultCheckedKeys],()=>ft(()=>{w(t.defaultCheckedKeys)}),{immediate:!0});const i=()=>{if(!e.value||!t.showCheckbox||t.checkStrictly)return;const{levelTreeNodeMap:b,maxLevel:S}=e.value,E=n.value,x=new Set;for(let k=S-1;k>=1;--k){const A=b.get(k);A&&A.forEach(C=>{const _=C.children;if(_){let O=!0,P=!1;for(const U of _){const j=U.key;if(E.has(j))P=!0;else if(x.has(j)){O=!1,P=!0;break}else O=!1}O?E.add(C.key):P?(x.add(C.key),E.delete(C.key)):(E.delete(C.key),x.delete(C.key))}})}r.value=x},o=b=>n.value.has(b.key),a=b=>r.value.has(b.key),u=(b,S,E=!0,x=!0)=>{const k=n.value,A=(C,_)=>{k[_?Ly.ADD:Ly.DELETE](C.key);const O=C.children;!t.checkStrictly&&O&&O.forEach(P=>{P.disabled||A(P,_)})};A(b,S),x&&i(),E&&l(b,S)},l=(b,S)=>{const{checkedNodes:E,checkedKeys:x}=p(),{halfCheckedNodes:k,halfCheckedKeys:A}=g();s(VD,b.data,{checkedKeys:x,checkedNodes:E,halfCheckedKeys:A,halfCheckedNodes:k}),s(UD,b.data,S)};function c(b=!1){return p(b).checkedKeys}function d(b=!1){return p(b).checkedNodes}function f(){return g().halfCheckedKeys}function h(){return g().halfCheckedNodes}function p(b=!1){const S=[],E=[];if(e!=null&&e.value&&t.showCheckbox){const{treeNodeMap:x}=e.value;n.value.forEach(k=>{const A=x.get(k);A&&(!b||b&&A.isLeaf)&&(E.push(k),S.push(A.data))})}return{checkedKeys:E,checkedNodes:S}}function g(){const b=[],S=[];if(e!=null&&e.value&&t.showCheckbox){const{treeNodeMap:E}=e.value;r.value.forEach(x=>{const k=E.get(x);k&&(S.push(x),b.push(k.data))})}return{halfCheckedNodes:b,halfCheckedKeys:S}}function v(b){n.value.clear(),r.value.clear(),ft(()=>{w(b)})}function y(b,S){if(e!=null&&e.value&&t.showCheckbox){const E=e.value.treeNodeMap.get(b);E&&u(E,S,!1)}}function w(b){if(e!=null&&e.value){const{treeNodeMap:S}=e.value;if(t.showCheckbox&&S&&(b==null?void 0:b.length)>0){for(const E of b){const x=S.get(E);x&&!o(x)&&u(x,!0,!1,!1)}i()}}}return{updateCheckedKeys:i,toggleCheckbox:u,isChecked:o,isIndeterminate:a,getCheckedKeys:c,getCheckedNodes:d,getHalfCheckedKeys:f,getHalfCheckedNodes:h,setChecked:y,setCheckedKeys:v}}function xfe(t,e){const n=H(new Set([])),r=H(new Set([])),s=L(()=>pt(t.filterMethod));function i(a){var u;if(!s.value)return;const l=new Set,c=r.value,d=n.value,f=[],h=((u=e.value)==null?void 0:u.treeNodes)||[],p=t.filterMethod;d.clear();function g(v){v.forEach(y=>{f.push(y),p!=null&&p(a,y.data,y)?f.forEach(b=>{l.add(b.key)}):y.isLeaf&&d.add(y.key);const w=y.children;if(w&&g(w),!y.isLeaf){if(!l.has(y.key))d.add(y.key);else if(w){let b=!0;for(const S of w)if(!d.has(S.key)){b=!1;break}b?c.add(y.key):c.delete(y.key)}}f.pop()})}return g(h),l}function o(a){return r.value.has(a.key)}return{hiddenExpandIconKeySet:r,hiddenNodeKeySet:n,doFilter:i,isForceHiddenExpandIcon:o}}function Tfe(t,e){const n=H(new Set(t.defaultExpandedKeys)),r=H(),s=On(),i=H(),{isIndeterminate:o,isChecked:a,toggleCheckbox:u,getCheckedKeys:l,getCheckedNodes:c,getHalfCheckedKeys:d,getHalfCheckedNodes:f,setChecked:h,setCheckedKeys:p}=Efe(t,s),{doFilter:g,hiddenNodeKeySet:v,isForceHiddenExpandIcon:y}=xfe(t,s),w=L(()=>{var z;return((z=t.props)==null?void 0:z.value)||Rc.KEY}),b=L(()=>{var z;return((z=t.props)==null?void 0:z.children)||Rc.CHILDREN}),S=L(()=>{var z;return((z=t.props)==null?void 0:z.disabled)||Rc.DISABLED}),E=L(()=>{var z;return((z=t.props)==null?void 0:z.label)||Rc.LABEL}),x=L(()=>{var z;const re=n.value,ve=v.value,ke=[],Ee=((z=s.value)==null?void 0:z.treeNodes)||[],be=[];for(let Se=Ee.length-1;Se>=0;--Se)be.push(Ee[Se]);for(;be.length;){const Se=be.pop();if(!ve.has(Se.key)&&(ke.push(Se),Se.children&&re.has(Se.key)))for(let _e=Se.children.length-1;_e>=0;--_e)be.push(Se.children[_e])}return ke}),k=L(()=>x.value.length>0);function A(z){const re=new Map,ve=new Map;let ke=1;function Ee(Se,_e=1,Ne=void 0){var Me;const st=[];for(const qe of Se){const Ae=O(qe),et={level:_e,key:Ae,data:qe};et.label=U(qe),et.parent=Ne;const St=_(qe);et.disabled=P(qe),et.isLeaf=!St||St.length===0,St&&St.length&&(et.children=Ee(St,_e+1,et)),st.push(et),re.set(Ae,et),ve.has(_e)||ve.set(_e,[]),(Me=ve.get(_e))==null||Me.push(et)}return _e>ke&&(ke=_e),st}const be=Ee(z);return{treeNodeMap:re,levelTreeNodeMap:ve,maxLevel:ke,treeNodes:be}}function C(z){const re=g(z);re&&(n.value=re)}function _(z){return z[b.value]}function O(z){return z?z[w.value]:""}function P(z){return z[S.value]}function U(z){return z[E.value]}function j(z){n.value.has(z.key)?q(z):K(z)}function N(z){const re=new Set,ve=s.value.treeNodeMap;z.forEach(ke=>{let Ee=ve.get(ke);for(;Ee&&!re.has(Ee.key);)re.add(Ee.key),Ee=Ee.parent}),n.value=re}function R(z,re){e($D,z.data,z,re),D(z),t.expandOnClickNode&&j(z),t.showCheckbox&&(t.checkOnClickNode||z.isLeaf&&t.checkOnClickLeaf)&&!z.disabled&&u(z,!a(z),!0)}function V(z,re){e(MD,z.data,z,re)}function D(z){te(z)||(r.value=z.key,e(BD,z.data,z))}function M(z,re){u(z,re)}function K(z){const re=n.value;if(s.value&&t.accordion){const{treeNodeMap:ve}=s.value;re.forEach(ke=>{const Ee=ve.get(ke);z&&z.level===(Ee==null?void 0:Ee.level)&&re.delete(ke)})}re.add(z.key),e(ND,z.data,z)}function q(z){n.value.delete(z.key),e(FD,z.data,z)}function ee(z){return n.value.has(z.key)}function X(z){return!!z.disabled}function te(z){const re=r.value;return re!==void 0&&re===z.key}function ue(){var z,re;if(r.value)return(re=(z=s.value)==null?void 0:z.treeNodeMap.get(r.value))==null?void 0:re.data}function he(){return r.value}function Z(z){r.value=z}function ce(z){s.value=A(z)}function ae(z){var re;const ve=Bt(z)?O(z):z;return(re=s.value)==null?void 0:re.treeNodeMap.get(ve)}function Te(z,re="auto"){const ve=ae(z);ve&&i.value&&i.value.scrollToItem(x.value.indexOf(ve),re)}function Ce(z){var re;(re=i.value)==null||re.scrollTo(z)}return Ie(()=>t.currentNodeKey,z=>{r.value=z},{immediate:!0}),Ie(()=>t.data,z=>{ce(z)},{immediate:!0}),{tree:s,flattenTree:x,isNotEmpty:k,listRef:i,getKey:O,getChildren:_,toggleExpand:j,toggleCheckbox:u,isExpanded:ee,isChecked:a,isIndeterminate:o,isDisabled:X,isCurrent:te,isForceHiddenExpandIcon:y,handleNodeClick:R,handleNodeDrop:V,handleNodeCheck:M,getCurrentNode:ue,getCurrentKey:he,setCurrentKey:Z,getCheckedKeys:l,getCheckedNodes:c,getHalfCheckedKeys:d,getHalfCheckedNodes:f,setChecked:h,setCheckedKeys:p,filter:C,setData:ce,getNode:ae,expandNode:K,collapseNode:q,setExpandedKeys:N,scrollToNode:Te,scrollTo:Ce}}var Cfe=se({name:"ElTreeNodeContent",props:bfe,setup(t){const e=nt(gS),n=Oe("tree");return()=>{const r=t.node,{data:s}=r;return e!=null&&e.ctx.slots.default?e.ctx.slots.default({node:r,data:s}):bt(nS,{tag:"span",truncated:!0,class:n.be("node","label")},()=>[r==null?void 0:r.label])}}});const kfe=se({name:"ElTreeNode"}),_fe=se({...kfe,props:yfe,emits:wfe,setup(t,{emit:e}){const n=t,r=nt(gS),s=Oe("tree"),i=L(()=>{var h;return(h=r==null?void 0:r.props.indent)!=null?h:16}),o=L(()=>{var h;return(h=r==null?void 0:r.props.icon)!=null?h:iI}),a=h=>{const p=r==null?void 0:r.props.props.class;if(!p)return{};let g;if(pt(p)){const{data:v}=h;g=p(v,h)}else g=p;return ut(g)?{[g]:!0}:g},u=h=>{e("click",n.node,h)},l=h=>{e("drop",n.node,h)},c=()=>{e("toggle",n.node)},d=h=>{e("check",n.node,h)},f=h=>{var p,g,v,y;(v=(g=(p=r==null?void 0:r.instance)==null?void 0:p.vnode)==null?void 0:g.props)!=null&&v.onNodeContextmenu&&(h.stopPropagation(),h.preventDefault()),r==null||r.ctx.emit(HD,h,(y=n.node)==null?void 0:y.data,n.node)};return(h,p)=>{var g,v,y;return $(),Y("div",{ref:"node$",class:F([m(s).b("node"),m(s).is("expanded",h.expanded),m(s).is("current",h.current),m(s).is("focusable",!h.disabled),m(s).is("checked",!h.disabled&&h.checked),a(h.node)]),role:"treeitem",tabindex:"-1","aria-expanded":h.expanded,"aria-disabled":h.disabled,"aria-checked":h.checked,"data-key":(g=h.node)==null?void 0:g.key,onClick:wt(u,["stop"]),onContextmenu:f,onDragover:wt(()=>{},["prevent"]),onDragenter:wt(()=>{},["prevent"]),onDrop:wt(l,["stop"])},[J("div",{class:F(m(s).be("node","content")),style:mt({paddingLeft:`${(h.node.level-1)*m(i)}px`,height:h.itemSize+"px"})},[m(o)?($(),ye(m(lt),{key:0,class:F([m(s).is("leaf",!!((v=h.node)!=null&&v.isLeaf)),m(s).is("hidden",h.hiddenExpandIcon),{expanded:!((y=h.node)!=null&&y.isLeaf)&&h.expanded},m(s).be("node","expand-icon")]),onClick:wt(c,["stop"])},{default:le(()=>[($(),ye(jt(m(o))))]),_:1},8,["class","onClick"])):ge("v-if",!0),h.showCheckbox?($(),ye(m(li),{key:1,"model-value":h.checked,indeterminate:h.indeterminate,disabled:h.disabled,onChange:d,onClick:wt(()=>{},["stop"])},null,8,["model-value","indeterminate","disabled","onClick"])):ge("v-if",!0),ie(m(Cfe),{node:h.node},null,8,["node"])],6)],42,["aria-expanded","aria-disabled","aria-checked","data-key","onClick","onDragover","onDragenter","onDrop"])}}});var Afe=We(_fe,[["__file","tree-node.vue"]]);const Ife=se({name:"ElTreeV2"}),Rfe=se({...Ife,props:vfe,emits:Sfe,setup(t,{expose:e,emit:n}){const r=t,s=gr(),i=L(()=>r.itemSize);Jt(gS,{ctx:{emit:n,slots:s},props:r,instance:Kt()}),Jt(to,void 0);const{t:o}=sn(),a=Oe("tree"),{flattenTree:u,isNotEmpty:l,listRef:c,toggleExpand:d,isExpanded:f,isIndeterminate:h,isChecked:p,isDisabled:g,isCurrent:v,isForceHiddenExpandIcon:y,handleNodeClick:w,handleNodeDrop:b,handleNodeCheck:S,toggleCheckbox:E,getCurrentNode:x,getCurrentKey:k,setCurrentKey:A,getCheckedKeys:C,getCheckedNodes:_,getHalfCheckedKeys:O,getHalfCheckedNodes:P,setChecked:U,setCheckedKeys:j,filter:N,setData:R,getNode:V,expandNode:D,collapseNode:M,setExpandedKeys:K,scrollToNode:q,scrollTo:ee}=Tfe(r,n);return e({toggleCheckbox:E,getCurrentNode:x,getCurrentKey:k,setCurrentKey:A,getCheckedKeys:C,getCheckedNodes:_,getHalfCheckedKeys:O,getHalfCheckedNodes:P,setChecked:U,setCheckedKeys:j,filter:N,setData:R,getNode:V,expandNode:D,collapseNode:M,setExpandedKeys:K,scrollToNode:q,scrollTo:ee}),(X,te)=>($(),Y("div",{class:F([m(a).b(),{[m(a).m("highlight-current")]:X.highlightCurrent}]),role:"tree"},[m(l)?($(),ye(m(CP),{key:0,ref_key:"listRef",ref:c,"class-name":m(a).b("virtual-list"),data:m(u),total:m(u).length,height:X.height,"item-size":m(i),"perf-mode":X.perfMode},{default:le(({data:ue,index:he,style:Z})=>[($(),ye(Afe,{key:ue[he].key,style:mt(Z),node:ue[he],expanded:m(f)(ue[he]),"show-checkbox":X.showCheckbox,checked:m(p)(ue[he]),indeterminate:m(h)(ue[he]),"item-size":m(i),disabled:m(g)(ue[he]),current:m(v)(ue[he]),"hidden-expand-icon":m(y)(ue[he]),onClick:m(w),onToggle:m(d),onCheck:m(S),onDrop:m(b)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck","onDrop"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):($(),Y("div",{key:1,class:F(m(a).e("empty-block"))},[pe(X.$slots,"empty",{},()=>{var ue;return[J("span",{class:F(m(a).e("empty-text"))},ze((ue=X.emptyText)!=null?ue:m(o)("el.tree.emptyText")),3)]})],2))],2))}});var Lfe=We(Rfe,[["__file","tree.vue"]]);const Pfe=Dt(Lfe),jD=Symbol("uploadContextKey"),Dfe="ElUpload";class Ofe extends Error{constructor(e,n,r,s){super(e),this.name="UploadAjaxError",this.status=n,this.method=r,this.url=s}}function mk(t,e,n){let r;return n.response?r=`${n.response.error||n.response}`:n.responseText?r=`${n.responseText}`:r=`fail to ${e.method} ${t} ${n.status}`,new Ofe(r,n.status,e.method,t)}function $fe(t){const e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const Mfe=t=>{typeof XMLHttpRequest>"u"&&lr(Dfe,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,n=t.action;e.upload&&e.upload.addEventListener("progress",i=>{const o=i;o.percent=i.total>0?i.loaded/i.total*100:0,t.onProgress(o)});const r=new FormData;if(t.data)for(const[i,o]of Object.entries(t.data))Ve(o)&&o.length?r.append(i,...o):r.append(i,o);r.append(t.filename,t.file,t.file.name),e.addEventListener("error",()=>{t.onError(mk(n,t,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return t.onError(mk(n,t,e));t.onSuccess($fe(e))}),e.open(t.method,n,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const s=t.headers||{};if(s instanceof Headers)s.forEach((i,o)=>e.setRequestHeader(o,i));else for(const[i,o]of Object.entries(s))Sr(o)||e.setRequestHeader(i,String(o));return e.send(r),e},KD=["text","picture","picture-card"];let Nfe=1;const Py=()=>Date.now()+Nfe++,zD=Ke({action:{type:String,default:"#"},headers:{type:de(Object)},method:{type:String,default:"post"},data:{type:de([Object,Function,Promise]),default:()=>Wn({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:de(Array),default:()=>Wn([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:KD,default:"text"},httpRequest:{type:de(Function),default:Mfe},disabled:Boolean,limit:Number}),Ffe=Ke({...zD,beforeUpload:{type:de(Function),default:xn},beforeRemove:{type:de(Function)},onRemove:{type:de(Function),default:xn},onChange:{type:de(Function),default:xn},onPreview:{type:de(Function),default:xn},onSuccess:{type:de(Function),default:xn},onProgress:{type:de(Function),default:xn},onError:{type:de(Function),default:xn},onExceed:{type:de(Function),default:xn},crossorigin:{type:de(String)}}),Bfe=Ke({files:{type:de(Array),default:()=>Wn([])},disabled:{type:Boolean,default:!1},handlePreview:{type:de(Function),default:xn},listType:{type:String,values:KD,default:"text"},crossorigin:{type:de(String)}}),Vfe={remove:t=>!!t},Ufe=se({name:"ElUploadList"}),Hfe=se({...Ufe,props:Bfe,emits:Vfe,setup(t,{emit:e}){const n=t,{t:r}=sn(),s=Oe("upload"),i=Oe("icon"),o=Oe("list"),a=Hr(),u=H(!1),l=L(()=>[s.b("list"),s.bm("list",n.listType),s.is("disabled",n.disabled)]),c=d=>{e("remove",d)};return(d,f)=>($(),ye(K_,{tag:"ul",class:F(m(l)),name:m(o).b()},{default:le(()=>[($(!0),Y(dt,null,Zt(d.files,(h,p)=>($(),Y("li",{key:h.uid||h.name,class:F([m(s).be("list","item"),m(s).is(h.status),{focusing:u.value}]),tabindex:"0",onKeydown:Sn(g=>!m(a)&&c(h),["delete"]),onFocus:g=>u.value=!0,onBlur:g=>u.value=!1,onClick:g=>u.value=!1},[pe(d.$slots,"default",{file:h,index:p},()=>[d.listType==="picture"||h.status!=="uploading"&&d.listType==="picture-card"?($(),Y("img",{key:0,class:F(m(s).be("list","item-thumbnail")),src:h.url,crossorigin:d.crossorigin,alt:""},null,10,["src","crossorigin"])):ge("v-if",!0),h.status==="uploading"||d.listType!=="picture-card"?($(),Y("div",{key:1,class:F(m(s).be("list","item-info"))},[J("a",{class:F(m(s).be("list","item-name")),onClick:wt(g=>d.handlePreview(h),["prevent"])},[ie(m(lt),{class:F(m(i).m("document"))},{default:le(()=>[ie(m(LV))]),_:1},8,["class"]),J("span",{class:F(m(s).be("list","item-file-name")),title:h.name},ze(h.name),11,["title"])],10,["onClick"]),h.status==="uploading"?($(),ye(m(mP),{key:0,type:d.listType==="picture-card"?"circle":"line","stroke-width":d.listType==="picture-card"?6:2,percentage:Number(h.percentage),style:mt(d.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):ge("v-if",!0)],2)):ge("v-if",!0),J("label",{class:F(m(s).be("list","item-status-label"))},[d.listType==="text"?($(),ye(m(lt),{key:0,class:F([m(i).m("upload-success"),m(i).m("circle-check")])},{default:le(()=>[ie(m(Ob))]),_:1},8,["class"])):["picture-card","picture"].includes(d.listType)?($(),ye(m(lt),{key:1,class:F([m(i).m("upload-success"),m(i).m("check")])},{default:le(()=>[ie(m(zd))]),_:1},8,["class"])):ge("v-if",!0)],2),m(a)?ge("v-if",!0):($(),ye(m(lt),{key:2,class:F(m(i).m("close")),onClick:g=>c(h)},{default:le(()=>[ie(m(si))]),_:2},1032,["class","onClick"])),ge(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),ge(" This is a bug which needs to be fixed "),ge(" TODO: Fix the incorrect navigation interaction "),m(a)?ge("v-if",!0):($(),Y("i",{key:3,class:F(m(i).m("close-tip"))},ze(m(r)("el.upload.deleteTip")),3)),d.listType==="picture-card"?($(),Y("span",{key:4,class:F(m(s).be("list","item-actions"))},[J("span",{class:F(m(s).be("list","item-preview")),onClick:g=>d.handlePreview(h)},[ie(m(lt),{class:F(m(i).m("zoom-in"))},{default:le(()=>[ie(m(uI))]),_:1},8,["class"])],10,["onClick"]),m(a)?ge("v-if",!0):($(),Y("span",{key:0,class:F(m(s).be("list","item-delete")),onClick:g=>c(h)},[ie(m(lt),{class:F(m(i).m("delete"))},{default:le(()=>[ie(m(IV))]),_:1},8,["class"])],10,["onClick"]))],2)):ge("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),pe(d.$slots,"append")]),_:3},8,["class","name"]))}});var gk=We(Hfe,[["__file","upload-list.vue"]]);const jfe=Ke({disabled:{type:Boolean,default:!1}}),Kfe={file:t=>Ve(t)},WD="ElUploadDrag",zfe=se({name:WD}),Wfe=se({...zfe,props:jfe,emits:Kfe,setup(t,{emit:e}){nt(jD)||lr(WD,"usage: <el-upload><el-upload-dragger /></el-upload>");const r=Oe("upload"),s=H(!1),i=Hr(),o=u=>{if(i.value)return;s.value=!1,u.stopPropagation();const l=Array.from(u.dataTransfer.files),c=u.dataTransfer.items||[];l.forEach((d,f)=>{var h;const p=c[f],g=(h=p==null?void 0:p.webkitGetAsEntry)==null?void 0:h.call(p);g&&(d.isDirectory=g.isDirectory)}),e("file",l)},a=()=>{i.value||(s.value=!0)};return(u,l)=>($(),Y("div",{class:F([m(r).b("dragger"),m(r).is("dragover",s.value)]),onDrop:wt(o,["prevent"]),onDragover:wt(a,["prevent"]),onDragleave:wt(c=>s.value=!1,["prevent"])},[pe(u.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var Gfe=We(Wfe,[["__file","upload-dragger.vue"]]);const qfe=Ke({...zD,beforeUpload:{type:de(Function),default:xn},onRemove:{type:de(Function),default:xn},onStart:{type:de(Function),default:xn},onSuccess:{type:de(Function),default:xn},onProgress:{type:de(Function),default:xn},onError:{type:de(Function),default:xn},onExceed:{type:de(Function),default:xn}}),Yfe=se({name:"ElUploadContent",inheritAttrs:!1}),Xfe=se({...Yfe,props:qfe,setup(t,{expose:e}){const n=t,r=Oe("upload"),s=Hr(),i=On({}),o=On(),a=g=>{if(g.length===0)return;const{autoUpload:v,limit:y,fileList:w,multiple:b,onStart:S,onExceed:E}=n;if(y&&w.length+g.length>y){E(g,w);return}b||(g=g.slice(0,1));for(const x of g){const k=x;k.uid=Py(),S(k),v&&u(k)}},u=async g=>{if(o.value.value="",!n.beforeUpload)return c(g);let v,y={};try{const b=n.data,S=n.beforeUpload(g);y=Zc(n.data)?Ip(n.data):n.data,v=await S,Zc(n.data)&&Tr(b,y)&&(y=Ip(n.data))}catch{v=!1}if(v===!1){n.onRemove(g);return}let w=g;v instanceof Blob&&(v instanceof File?w=v:w=new File([v],g.name,{type:g.type})),c(Object.assign(w,{uid:g.uid}),y)},l=async(g,v)=>pt(g)?g(v):g,c=async(g,v)=>{const{headers:y,data:w,method:b,withCredentials:S,name:E,action:x,onProgress:k,onSuccess:A,onError:C,httpRequest:_}=n;try{v=await l(v??w,g)}catch{n.onRemove(g);return}const{uid:O}=g,P={headers:y||{},withCredentials:S,file:g,data:v,method:b,filename:E,action:x,onProgress:j=>{k(j,g)},onSuccess:j=>{A(j,g),delete i.value[O]},onError:j=>{C(j,g),delete i.value[O]}},U=_(P);i.value[O]=U,U instanceof Promise&&U.then(P.onSuccess,P.onError)},d=g=>{const v=g.target.files;v&&a(Array.from(v))},f=()=>{s.value||(o.value.value="",o.value.click())},h=()=>{f()};return e({abort:g=>{dR(i.value).filter(g?([y])=>String(g.uid)===y:()=>!0).forEach(([y,w])=>{w instanceof XMLHttpRequest&&w.abort(),delete i.value[y]})},upload:u}),(g,v)=>($(),Y("div",{class:F([m(r).b(),m(r).m(g.listType),m(r).is("drag",g.drag),m(r).is("disabled",m(s))]),tabindex:m(s)?"-1":"0",onClick:f,onKeydown:Sn(wt(h,["self"]),["enter","space"])},[g.drag?($(),ye(Gfe,{key:0,disabled:m(s),onFile:a},{default:le(()=>[pe(g.$slots,"default")]),_:3},8,["disabled"])):pe(g.$slots,"default",{key:1}),J("input",{ref_key:"inputRef",ref:o,class:F(m(r).e("input")),name:g.name,disabled:m(s),multiple:g.multiple,accept:g.accept,type:"file",onChange:d,onClick:wt(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var vk=We(Xfe,[["__file","upload-content.vue"]]);const yk="ElUpload",bk=t=>{var e;(e=t.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(t.url)},Qfe=(t,e)=>{const n=rR(t,"fileList",void 0,{passive:!0}),r=h=>n.value.find(p=>p.uid===h.uid);function s(h){var p;(p=e.value)==null||p.abort(h)}function i(h=["ready","uploading","success","fail"]){n.value=n.value.filter(p=>!h.includes(p.status))}function o(h){n.value=n.value.filter(p=>p.uid!==h.uid)}const a=(h,p)=>{const g=r(p);g&&(console.error(h),g.status="fail",o(g),t.onError(h,g,n.value),t.onChange(g,n.value))},u=(h,p)=>{const g=r(p);g&&(t.onProgress(h,g,n.value),g.status="uploading",g.percentage=Math.round(h.percent))},l=(h,p)=>{const g=r(p);g&&(g.status="success",g.response=h,t.onSuccess(h,g,n.value),t.onChange(g,n.value))},c=h=>{Sr(h.uid)&&(h.uid=Py());const p={name:h.name,percentage:0,status:"ready",size:h.size,raw:h,uid:h.uid};if(t.listType==="picture-card"||t.listType==="picture")try{p.url=URL.createObjectURL(h)}catch(g){g.message,t.onError(g,p,n.value)}n.value=[...n.value,p],t.onChange(p,n.value)},d=async h=>{const p=h instanceof File?r(h):h;p||lr(yk,"file to be removed not found");const g=v=>{s(v),o(v),t.onRemove(v,n.value),bk(v)};t.beforeRemove?await t.beforeRemove(p,n.value)!==!1&&g(p):g(p)};function f(){n.value.filter(({status:h})=>h==="ready").forEach(({raw:h})=>{var p;return h&&((p=e.value)==null?void 0:p.upload(h))})}return Ie(()=>t.listType,h=>{h!=="picture-card"&&h!=="picture"||(n.value=n.value.map(p=>{const{raw:g,url:v}=p;if(!v&&g)try{p.url=URL.createObjectURL(g)}catch(y){t.onError(y,p,n.value)}return p}))}),Ie(n,h=>{for(const p of h)p.uid||(p.uid=Py()),p.status||(p.status="success")},{immediate:!0,deep:!0}),{uploadFiles:n,abort:s,clearFiles:i,handleError:a,handleProgress:u,handleStart:c,handleSuccess:l,handleRemove:d,submit:f,revokeFileObjectURL:bk}},Zfe=se({name:"ElUpload"}),Jfe=se({...Zfe,props:Ffe,setup(t,{expose:e}){const n=t,r=Hr(),s=On(),{abort:i,submit:o,clearFiles:a,uploadFiles:u,handleStart:l,handleError:c,handleRemove:d,handleSuccess:f,handleProgress:h,revokeFileObjectURL:p}=Qfe(n,s),g=L(()=>n.listType==="picture-card"),v=L(()=>({...n,fileList:u.value,onStart:l,onProgress:h,onSuccess:f,onError:c,onRemove:d}));return In(()=>{u.value.forEach(p)}),Jt(jD,{accept:En(n,"accept")}),e({abort:i,submit:o,clearFiles:a,handleStart:l,handleRemove:d}),(y,w)=>($(),Y("div",null,[m(g)&&y.showFileList?($(),ye(gk,{key:0,disabled:m(r),"list-type":y.listType,files:m(u),crossorigin:y.crossorigin,"handle-preview":y.onPreview,onRemove:m(d)},ks({append:le(()=>[ie(vk,Yt({ref_key:"uploadRef",ref:s},m(v)),{default:le(()=>[y.$slots.trigger?pe(y.$slots,"trigger",{key:0}):ge("v-if",!0),!y.$slots.trigger&&y.$slots.default?pe(y.$slots,"default",{key:1}):ge("v-if",!0)]),_:3},16)]),_:2},[y.$slots.file?{name:"default",fn:le(({file:b,index:S})=>[pe(y.$slots,"file",{file:b,index:S})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):ge("v-if",!0),!m(g)||m(g)&&!y.showFileList?($(),ye(vk,Yt({key:1,ref_key:"uploadRef",ref:s},m(v)),{default:le(()=>[y.$slots.trigger?pe(y.$slots,"trigger",{key:0}):ge("v-if",!0),!y.$slots.trigger&&y.$slots.default?pe(y.$slots,"default",{key:1}):ge("v-if",!0)]),_:3},16)):ge("v-if",!0),y.$slots.trigger?pe(y.$slots,"default",{key:2}):ge("v-if",!0),pe(y.$slots,"tip"),!m(g)&&y.showFileList?($(),ye(gk,{key:3,disabled:m(r),"list-type":y.listType,files:m(u),crossorigin:y.crossorigin,"handle-preview":y.onPreview,onRemove:m(d)},ks({_:2},[y.$slots.file?{name:"default",fn:le(({file:b,index:S})=>[pe(y.$slots,"file",{file:b,index:S})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):ge("v-if",!0)]))}});var ehe=We(Jfe,[["__file","upload.vue"]]);const the=Dt(ehe),nhe=Ke({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:de([String,Array]),default:"Element Plus"},font:{type:de(Object)},gap:{type:de(Array),default:()=>[100,100]},offset:{type:de(Array)}});function rhe(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function she(t){return Object.keys(t).map(e=>`${rhe(e)}: ${t[e]};`).join(" ")}function ihe(){return window.devicePixelRatio||1}const ohe=(t,e)=>{let n=!1;return t.removedNodes.length&&e&&(n=Array.from(t.removedNodes).includes(e)),t.type==="attributes"&&t.target===e&&(n=!0),n},GD=3;function Vv(t,e,n=1){const r=document.createElement("canvas"),s=r.getContext("2d"),i=t*n,o=e*n;return r.setAttribute("width",`${i}px`),r.setAttribute("height",`${o}px`),s.save(),[s,r,i,o]}function ahe(){function t(e,n,r,s,i,o,a,u){const[l,c,d,f]=Vv(s,i,r);if(e instanceof HTMLImageElement)l.drawImage(e,0,0,d,f);else{const{color:q,fontSize:ee,fontStyle:X,fontWeight:te,fontFamily:ue,textAlign:he,textBaseline:Z}=o,ce=Number(ee)*r;l.font=`${X} normal ${te} ${ce}px/${i}px ${ue}`,l.fillStyle=q,l.textAlign=he,l.textBaseline=Z;const ae=Ve(e)?e:[e];ae==null||ae.forEach((Te,Ce)=>{l.fillText(Te??"",d/2,Ce*(ce+GD*r))})}const h=Math.PI/180*Number(n),p=Math.max(s,i),[g,v,y]=Vv(p,p,r);g.translate(y/2,y/2),g.rotate(h),d>0&&f>0&&g.drawImage(c,-d/2,-f/2);function w(q,ee){const X=q*Math.cos(h)-ee*Math.sin(h),te=q*Math.sin(h)+ee*Math.cos(h);return[X,te]}let b=0,S=0,E=0,x=0;const k=d/2,A=f/2;[[0-k,0-A],[0+k,0-A],[0+k,0+A],[0-k,0+A]].forEach(([q,ee])=>{const[X,te]=w(q,ee);b=Math.min(b,X),S=Math.max(S,X),E=Math.min(E,te),x=Math.max(x,te)});const _=b+y/2,O=E+y/2,P=S-b,U=x-E,j=a*r,N=u*r,R=(P+j)*2,V=U+N,[D,M]=Vv(R,V);function K(q=0,ee=0){D.drawImage(v,_,O,P,U,q,ee,P,U)}return K(),K(P+j,-U/2-N/2),K(P+j,+U/2+N/2),[M.toDataURL(),R/r,V/r]}return t}const lhe=se({name:"ElWatermark"}),uhe=se({...lhe,props:nhe,setup(t){const e=t,n={position:"relative"},r=L(()=>{var _,O;return(O=(_=e.font)==null?void 0:_.color)!=null?O:"rgba(0,0,0,.15)"}),s=L(()=>{var _,O;return(O=(_=e.font)==null?void 0:_.fontSize)!=null?O:16}),i=L(()=>{var _,O;return(O=(_=e.font)==null?void 0:_.fontWeight)!=null?O:"normal"}),o=L(()=>{var _,O;return(O=(_=e.font)==null?void 0:_.fontStyle)!=null?O:"normal"}),a=L(()=>{var _,O;return(O=(_=e.font)==null?void 0:_.fontFamily)!=null?O:"sans-serif"}),u=L(()=>{var _,O;return(O=(_=e.font)==null?void 0:_.textAlign)!=null?O:"center"}),l=L(()=>{var _,O;return(O=(_=e.font)==null?void 0:_.textBaseline)!=null?O:"hanging"}),c=L(()=>e.gap[0]),d=L(()=>e.gap[1]),f=L(()=>c.value/2),h=L(()=>d.value/2),p=L(()=>{var _,O;return(O=(_=e.offset)==null?void 0:_[0])!=null?O:f.value}),g=L(()=>{var _,O;return(O=(_=e.offset)==null?void 0:_[1])!=null?O:h.value}),v=()=>{const _={zIndex:e.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let O=p.value-f.value,P=g.value-h.value;return O>0&&(_.left=`${O}px`,_.width=`calc(100% - ${O}px)`,O=0),P>0&&(_.top=`${P}px`,_.height=`calc(100% - ${P}px)`,P=0),_.backgroundPosition=`${O}px ${P}px`,_},y=On(null),w=On(),b=H(!1),S=()=>{w.value&&(w.value.remove(),w.value=void 0)},E=(_,O)=>{var P;y.value&&w.value&&(b.value=!0,w.value.setAttribute("style",she({...v(),backgroundImage:`url('${_}')`,backgroundSize:`${Math.floor(O)}px`})),(P=y.value)==null||P.append(w.value),setTimeout(()=>{b.value=!1}))},x=_=>{let O=120,P=64;const{image:U,content:j,width:N,height:R,rotate:V}=e;if(!U&&_.measureText){_.font=`${Number(s.value)}px ${a.value}`;const D=Ve(j)?j:[j];let M=0,K=0;D.forEach(X=>{const{width:te,fontBoundingBoxAscent:ue,fontBoundingBoxDescent:he,actualBoundingBoxAscent:Z,actualBoundingBoxDescent:ce}=_.measureText(X),ae=an(ue)?Z+ce:ue+he;te>M&&(M=Math.ceil(te)),ae>K&&(K=Math.ceil(ae))}),O=M,P=K*D.length+(D.length-1)*GD;const q=Math.PI/180*Number(V),ee=Math.ceil(Math.abs(Math.sin(q)*P)/2);O+=ee}return[N??O,R??P]},k=ahe(),A=()=>{const O=document.createElement("canvas").getContext("2d"),P=e.image,U=e.content,j=e.rotate;if(O){w.value||(w.value=document.createElement("div"));const N=ihe(),[R,V]=x(O),D=M=>{const[K,q]=k(M||"",j,N,R,V,{color:r.value,fontSize:s.value,fontStyle:o.value,fontWeight:i.value,fontFamily:a.value,textAlign:u.value,textBaseline:l.value},c.value,d.value);E(K,q)};if(P){const M=new Image;M.onload=()=>{D(M)},M.onerror=()=>{D(U)},M.crossOrigin="anonymous",M.referrerPolicy="no-referrer",M.src=P}else D(U)}};return Ft(()=>{A()}),Ie(()=>e,()=>{A()},{deep:!0,flush:"post"}),In(()=>{S()}),nR(y,_=>{b.value||_.forEach(O=>{ohe(O,w.value)&&(S(),A())})},{attributes:!0,subtree:!0,childList:!0}),(_,O)=>($(),Y("div",{ref_key:"containerRef",ref:y,style:mt([n])},[pe(_.$slots,"default")],4))}});var che=We(uhe,[["__file","watermark.vue"]]);const dhe=Dt(che),fhe=Ke({zIndex:{type:Number,default:1001},visible:Boolean,fill:{type:String,default:"rgba(0,0,0,0.5)"},pos:{type:de(Object)},targetAreaClickable:{type:Boolean,default:!0}}),hhe=(t,e,n,r,s)=>{const i=H(null),o=()=>{let d;return ut(t.value)?d=document.querySelector(t.value):pt(t.value)?d=t.value():d=t.value,d},a=()=>{const d=o();if(!d||!e.value){i.value=null;return}phe(d)||d.scrollIntoView(s.value);const{left:f,top:h,width:p,height:g}=d.getBoundingClientRect();i.value={left:f,top:h,width:p,height:g,radius:0}};Ft(()=>{Ie([e,t],()=>{a()},{immediate:!0}),window.addEventListener("resize",a)}),In(()=>{window.removeEventListener("resize",a)});const u=d=>{var f;return(f=Ve(n.value.offset)?n.value.offset[d]:n.value.offset)!=null?f:6},l=L(()=>{var d;if(!i.value)return i.value;const f=u(0),h=u(1),p=((d=n.value)==null?void 0:d.radius)||2;return{left:i.value.left-f,top:i.value.top-h,width:i.value.width+f*2,height:i.value.height+h*2,radius:p}}),c=L(()=>{const d=o();return!r.value||!d||!window.DOMRect?d||void 0:{getBoundingClientRect(){var f,h,p,g;return window.DOMRect.fromRect({width:((f=l.value)==null?void 0:f.width)||0,height:((h=l.value)==null?void 0:h.height)||0,x:((p=l.value)==null?void 0:p.left)||0,y:((g=l.value)==null?void 0:g.top)||0})}}});return{mergedPosInfo:l,triggerTarget:c}},tg=Symbol("ElTour");function phe(t){const e=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,{top:r,right:s,bottom:i,left:o}=t.getBoundingClientRect();return r>=0&&o>=0&&s<=e&&i<=n}const mhe=(t,e,n,r,s,i,o,a)=>{const u=H(),l=H(),c=H({}),d={x:u,y:l,placement:r,strategy:s,middlewareData:c},f=L(()=>{const y=[_D(m(i)),bde(),yde(),ghe()];return m(a)&&m(n)&&y.push(AD({element:m(n)})),y}),h=async()=>{if(!on)return;const y=m(t),w=m(e);if(!y||!w)return;const b=await ID(y,w,{placement:m(r),strategy:m(s),middleware:m(f)});xu(d).forEach(S=>{d[S].value=b[S]})},p=L(()=>{if(!m(t))return{position:"fixed",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",maxWidth:"100vw",zIndex:m(o)};const{overflow:y}=m(c);return{position:m(s),zIndex:m(o),top:m(l)!=null?`${m(l)}px`:"",left:m(u)!=null?`${m(u)}px`:"",maxWidth:y!=null&&y.maxWidth?`${y==null?void 0:y.maxWidth}px`:""}}),g=L(()=>{if(!m(a))return{};const{arrow:y}=m(c);return{left:(y==null?void 0:y.x)!=null?`${y==null?void 0:y.x}px`:"",top:(y==null?void 0:y.y)!=null?`${y==null?void 0:y.y}px`:""}});let v;return Ft(()=>{const y=m(t),w=m(e);y&&w&&(v=gde(y,w,h)),Fr(()=>{h()})}),In(()=>{v&&v()}),{update:h,contentStyle:p,arrowStyle:g}},ghe=()=>({name:"overflow",async fn(t){const e=await vde(t);let n=0;return e.left>0&&(n=e.left),e.right>0&&(n=e.right),{data:{maxWidth:t.rects.floating.width-n}}}}),vhe=se({name:"ElTourMask",inheritAttrs:!1}),yhe=se({...vhe,props:fhe,setup(t){const e=t,{ns:n}=nt(tg),r=L(()=>{var a,u;return(u=(a=e.pos)==null?void 0:a.radius)!=null?u:2}),s=L(()=>{const a=r.value,u=`a${a},${a} 0 0 1`;return{topRight:`${u} ${a},${a}`,bottomRight:`${u} ${-a},${a}`,bottomLeft:`${u} ${-a},${-a}`,topLeft:`${u} ${a},${-a}`}}),i=L(()=>{const a=window.innerWidth,u=window.innerHeight,l=s.value,c=`M${a},0 L0,0 L0,${u} L${a},${u} L${a},0 Z`,d=r.value;return e.pos?`${c} M${e.pos.left+d},${e.pos.top} h${e.pos.width-d*2} ${l.topRight} v${e.pos.height-d*2} ${l.bottomRight} h${-e.pos.width+d*2} ${l.bottomLeft} v${-e.pos.height+d*2} ${l.topLeft} z`:c}),o=L(()=>({fill:e.fill,pointerEvents:"auto",cursor:"auto"}));return O1(En(e,"visible"),{ns:n}),(a,u)=>a.visible?($(),Y("div",Yt({key:0,class:m(n).e("mask"),style:{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:a.zIndex,pointerEvents:a.pos&&a.targetAreaClickable?"none":"auto"}},a.$attrs),[($(),Y("svg",{style:{width:"100%",height:"100%"}},[J("path",{class:F(m(n).e("hollow")),style:mt(m(o)),d:m(i)},null,14,["d"])]))],16)):ge("v-if",!0)}});var bhe=We(yhe,[["__file","mask.vue"]]);const She=["absolute","fixed"],whe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],vS=Ke({placement:{type:de(String),values:whe,default:"bottom"},reference:{type:de(Object),default:null},strategy:{type:de(String),values:She,default:"absolute"},offset:{type:Number,default:10},showArrow:Boolean,zIndex:{type:Number,default:2001}}),Ehe={close:()=>!0},xhe=se({name:"ElTourContent"}),The=se({...xhe,props:vS,emits:Ehe,setup(t,{emit:e}){const n=t,r=H(n.placement),s=H(n.strategy),i=H(null),o=H(null);Ie(()=>n.placement,()=>{r.value=n.placement});const{contentStyle:a,arrowStyle:u}=mhe(En(n,"reference"),i,o,r,s,En(n,"offset"),En(n,"zIndex"),En(n,"showArrow")),l=L(()=>r.value.split("-")[0]),{ns:c}=nt(tg),d=()=>{e("close")},f=h=>{h.detail.focusReason==="pointer"&&h.preventDefault()};return(h,p)=>($(),Y("div",{ref_key:"contentRef",ref:i,style:mt(m(a)),class:F(m(c).e("content")),"data-side":m(l),tabindex:"-1"},[ie(m(Yu),{loop:"",trapped:"","focus-start-el":"container","focus-trap-el":i.value||void 0,onReleaseRequested:d,onFocusoutPrevented:f},{default:le(()=>[pe(h.$slots,"default")]),_:3},8,["focus-trap-el"]),h.showArrow?($(),Y("span",{key:0,ref_key:"arrowRef",ref:o,style:mt(m(u)),class:F(m(c).e("arrow"))},null,6)):ge("v-if",!0)],14,["data-side"]))}});var Che=We(The,[["__file","content.vue"]]),khe=se({name:"ElTourSteps",props:{current:{type:Number,default:0}},emits:["update-total"],setup(t,{slots:e,emit:n}){let r=0;return()=>{var s,i;const o=(s=e.default)==null?void 0:s.call(e),a=[];let u=0;function l(c){Ve(c)&&c.forEach(d=>{var f;((f=(d==null?void 0:d.type)||{})==null?void 0:f.name)==="ElTourStep"&&(a.push(d),u+=1)})}return o.length&&l(Gi((i=o[0])==null?void 0:i.children)),r!==u&&(r=u,n("update-total",u)),a.length?a[t.current]:null}}});const _he=Ke({modelValue:Boolean,current:{type:Number,default:0},showArrow:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeIcon:{type:Tn},placement:vS.placement,contentStyle:{type:de([Object])},mask:{type:de([Boolean,Object]),default:!0},gap:{type:de(Object),default:()=>({offset:6,radius:2})},zIndex:{type:Number},scrollIntoViewOptions:{type:de([Boolean,Object]),default:()=>({block:"center"})},type:{type:de(String)},appendTo:{type:jm.to.type,default:"body"},closeOnPressEscape:{type:Boolean,default:!0},targetAreaClickable:{type:Boolean,default:!0}}),Ahe={[_t]:t=>wn(t),"update:current":t=>vt(t),close:t=>vt(t),finish:()=>!0,change:t=>vt(t)},Ihe=se({name:"ElTour"}),Rhe=se({...Ihe,props:_he,emits:Ahe,setup(t,{emit:e}){const n=t,r=Oe("tour"),s=H(0),i=H(),o=rR(n,"current",e,{passive:!0}),a=L(()=>{var C;return(C=i.value)==null?void 0:C.target}),u=L(()=>[r.b(),v.value==="primary"?r.m("primary"):""]),l=L(()=>{var C;return((C=i.value)==null?void 0:C.placement)||n.placement}),c=L(()=>{var C,_;return(_=(C=i.value)==null?void 0:C.contentStyle)!=null?_:n.contentStyle}),d=L(()=>{var C,_;return(_=(C=i.value)==null?void 0:C.mask)!=null?_:n.mask}),f=L(()=>!!d.value&&n.modelValue),h=L(()=>wn(d.value)?void 0:d.value),p=L(()=>{var C,_;return!!a.value&&((_=(C=i.value)==null?void 0:C.showArrow)!=null?_:n.showArrow)}),g=L(()=>{var C,_;return(_=(C=i.value)==null?void 0:C.scrollIntoViewOptions)!=null?_:n.scrollIntoViewOptions}),v=L(()=>{var C,_;return(_=(C=i.value)==null?void 0:C.type)!=null?_:n.type}),{nextZIndex:y}=Gu(),w=y(),b=L(()=>{var C;return(C=n.zIndex)!=null?C:w}),{mergedPosInfo:S,triggerTarget:E}=hhe(a,En(n,"modelValue"),En(n,"gap"),d,g);Ie(()=>n.modelValue,C=>{C||(o.value=0)});const x=()=>{n.closeOnPressEscape&&(e(_t,!1),e("close",o.value))},k=C=>{s.value=C},A=gr();return Jt(tg,{currentStep:i,current:o,total:s,showClose:En(n,"showClose"),closeIcon:En(n,"closeIcon"),mergedType:v,ns:r,slots:A,updateModelValue(C){e(_t,C)},onClose(){e("close",o.value)},onFinish(){e("finish")},onChange(){e(Xt,o.value)}}),(C,_)=>($(),Y(dt,null,[ie(m(Xu),{to:C.appendTo},{default:le(()=>{var O,P;return[J("div",Yt({class:m(u)},C.$attrs),[ie(bhe,{visible:m(f),fill:(O=m(h))==null?void 0:O.color,style:mt((P=m(h))==null?void 0:P.style),pos:m(S),"z-index":m(b),"target-area-clickable":C.targetAreaClickable},null,8,["visible","fill","style","pos","z-index","target-area-clickable"]),C.modelValue?($(),ye(Che,{key:m(o),reference:m(E),placement:m(l),"show-arrow":m(p),"z-index":m(b),style:mt(m(c)),onClose:x},{default:le(()=>[ie(m(khe),{current:m(o),onUpdateTotal:k},{default:le(()=>[pe(C.$slots,"default")]),_:3},8,["current"])]),_:3},8,["reference","placement","show-arrow","z-index","style"])):ge("v-if",!0)],16)]}),_:3},8,["to"]),ge(" just for IDE "),ge("v-if",!0)],64))}});var Lhe=We(Rhe,[["__file","tour.vue"]]);const Phe=Ke({target:{type:de([String,Object,Function])},title:String,description:String,showClose:{type:Boolean,default:void 0},closeIcon:{type:Tn},showArrow:{type:Boolean,default:void 0},placement:vS.placement,mask:{type:de([Boolean,Object]),default:void 0},contentStyle:{type:de([Object])},prevButtonProps:{type:de(Object)},nextButtonProps:{type:de(Object)},scrollIntoViewOptions:{type:de([Boolean,Object]),default:void 0},type:{type:de(String)}}),Dhe={close:()=>!0},Ohe=se({name:"ElTourStep"}),$he=se({...Ohe,props:Phe,emits:Dhe,setup(t,{emit:e}){const n=t,{Close:r}=vR,{t:s}=sn(),{currentStep:i,current:o,total:a,showClose:u,closeIcon:l,mergedType:c,ns:d,slots:f,updateModelValue:h,onClose:p,onFinish:g,onChange:v}=nt(tg);Ie(n,A=>{i.value=A},{immediate:!0});const y=L(()=>{var A;return(A=n.showClose)!=null?A:u.value}),w=L(()=>{var A,C;return(C=(A=n.closeIcon)!=null?A:l.value)!=null?C:r}),b=A=>{if(A)return XK(A,["children","onClick"])},S=()=>{var A,C;o.value-=1,(A=n.prevButtonProps)!=null&&A.onClick&&((C=n.prevButtonProps)==null||C.onClick()),v()},E=()=>{var A;o.value>=a.value-1?x():o.value+=1,(A=n.nextButtonProps)!=null&&A.onClick&&n.nextButtonProps.onClick(),v()},x=()=>{k(),g()},k=()=>{h(!1),p(),e("close")};return(A,C)=>($(),Y(dt,null,[m(y)?($(),Y("button",{key:0,"aria-label":"Close",class:F(m(d).e("closebtn")),type:"button",onClick:k},[ie(m(lt),{class:F(m(d).e("close"))},{default:le(()=>[($(),ye(jt(m(w))))]),_:1},8,["class"])],2)):ge("v-if",!0),J("header",{class:F([m(d).e("header"),{"show-close":m(u)}])},[pe(A.$slots,"header",{},()=>[J("span",{role:"heading",class:F(m(d).e("title"))},ze(A.title),3)])],2),J("div",{class:F(m(d).e("body"))},[pe(A.$slots,"default",{},()=>[J("span",null,ze(A.description),1)])],2),J("footer",{class:F(m(d).e("footer"))},[J("div",{class:F(m(d).b("indicators"))},[m(f).indicators?($(),ye(jt(m(f).indicators),{key:0,current:m(o),total:m(a)},null,8,["current","total"])):($(!0),Y(dt,{key:1},Zt(m(a),(_,O)=>($(),Y("span",{key:_,class:F([m(d).b("indicator"),O===m(o)?"is-active":""])},null,2))),128))],2),J("div",{class:F(m(d).b("buttons"))},[m(o)>0?($(),ye(m(Cr),Yt({key:0,size:"small",type:m(c)},b(A.prevButtonProps),{onClick:S}),{default:le(()=>{var _,O;return[Qt(ze((O=(_=A.prevButtonProps)==null?void 0:_.children)!=null?O:m(s)("el.tour.previous")),1)]}),_:1},16,["type"])):ge("v-if",!0),m(o)<=m(a)-1?($(),ye(m(Cr),Yt({key:1,size:"small",type:m(c)==="primary"?"default":"primary"},b(A.nextButtonProps),{onClick:E}),{default:le(()=>{var _,O;return[Qt(ze((O=(_=A.nextButtonProps)==null?void 0:_.children)!=null?O:m(o)===m(a)-1?m(s)("el.tour.finish"):m(s)("el.tour.next")),1)]}),_:1},16,["type"])):ge("v-if",!0)],2)],2)],64))}});var qD=We($he,[["__file","step.vue"]]);const Mhe=Dt(Lhe,{TourStep:qD}),Nhe=Gn(qD),Fhe=Ke({container:{type:de([String,Object])},offset:{type:Number,default:0},bound:{type:Number,default:15},duration:{type:Number,default:300},marker:{type:Boolean,default:!0},type:{type:de(String),default:"default"},direction:{type:de(String),default:"vertical"},selectScrollTop:{type:Boolean,default:!1}}),Bhe={change:t=>ut(t),click:(t,e)=>t instanceof MouseEvent&&(ut(e)||an(e))},YD=Symbol("anchor"),ch=t=>{if(!on||t==="")return null;if(ut(t))try{return document.querySelector(t)}catch{return null}return t};function Vhe(t){let e=0;const n=(...r)=>{e&&ml(e),e=ka(()=>{t(...r),e=0})};return n.cancel=()=>{ml(e),e=0},n}const Uhe=se({name:"ElAnchor"}),Hhe=se({...Uhe,props:Fhe,emits:Bhe,setup(t,{expose:e,emit:n}){const r=t,s=H(""),i=H(null),o=H(null),a=H(),u={};let l=!1,c=0;const d=Oe("anchor"),f=L(()=>[d.b(),r.type==="underline"?d.m("underline"):"",d.m(r.direction)]),h=A=>{u[A.href]=A.el},p=A=>{delete u[A]},g=A=>{s.value!==A&&(s.value=A,n(Xt,A))};let v=null;const y=A=>{if(!a.value)return;const C=ch(A);if(!C)return;v&&v(),l=!0;const _=wT(C,a.value),O=W0(C,_),P=_.scrollHeight-_.clientHeight,U=Math.min(O-r.offset,P);v=Jz(a.value,c,U,r.duration,()=>{setTimeout(()=>{l=!1},20)})},w=A=>{A&&(g(A),y(A))},b=(A,C)=>{n("click",A,C),w(C)},S=Vhe(()=>{a.value&&(c=ET(a.value));const A=E();l||an(A)||g(A)}),E=()=>{if(!a.value)return;const A=ET(a.value),C=[];for(const _ of Object.keys(u)){const O=ch(_);if(!O)continue;const P=wT(O,a.value),U=W0(O,P);C.push({top:U-r.offset-r.bound,href:_})}C.sort((_,O)=>_.top-O.top);for(let _=0;_<C.length;_++){const O=C[_],P=C[_+1];if(_===0&&A===0)return r.selectScrollTop?O.href:"";if(O.top<=A&&(!P||P.top>A))return O.href}},x=()=>{const A=ch(r.container);!A||$m(A)?a.value=window:a.value=A};Cn(a,"scroll",S);const k=L(()=>{if(!i.value||!o.value||!s.value)return{};const A=u[s.value];if(!A)return{};const C=i.value.getBoundingClientRect(),_=o.value.getBoundingClientRect(),O=A.getBoundingClientRect();return r.direction==="horizontal"?{left:`${O.left-C.left}px`,width:`${O.width}px`,opacity:1}:{top:`${O.top-C.top+(O.height-_.height)/2}px`,opacity:1}});return Ft(()=>{x();const A=decodeURIComponent(window.location.hash);ch(A)?w(A):S()}),Ie(()=>r.container,()=>{x()}),Jt(YD,{ns:d,direction:r.direction,currentAnchor:s,addLink:h,removeLink:p,handleClick:b}),e({scrollTo:w}),(A,C)=>($(),Y("div",{ref_key:"anchorRef",ref:i,class:F(m(f))},[A.marker?($(),Y("div",{key:0,ref_key:"markerRef",ref:o,class:F(m(d).e("marker")),style:mt(m(k))},null,6)):ge("v-if",!0),J("div",{class:F(m(d).e("list"))},[pe(A.$slots,"default")],2)],2))}});var jhe=We(Hhe,[["__file","anchor.vue"]]);const Khe=Ke({title:String,href:String}),zhe=se({name:"ElAnchorLink"}),Whe=se({...zhe,props:Khe,setup(t){const e=t,n=H(null),{ns:r,direction:s,currentAnchor:i,addLink:o,removeLink:a,handleClick:u}=nt(YD),l=L(()=>[r.e("link"),r.is("active",i.value===e.href)]),c=d=>{u(d,e.href)};return Ie(()=>e.href,(d,f)=>{ft(()=>{f&&a(f),d&&o({href:d,el:n.value})})}),Ft(()=>{const{href:d}=e;d&&o({href:d,el:n.value})}),In(()=>{const{href:d}=e;d&&a(d)}),(d,f)=>($(),Y("div",{class:F(m(r).e("item"))},[J("a",{ref_key:"linkRef",ref:n,class:F(m(l)),href:d.href,onClick:c},[pe(d.$slots,"default",{},()=>[Qt(ze(d.title),1)])],10,["href"]),d.$slots["sub-link"]&&m(s)==="vertical"?($(),Y("div",{key:0,class:F(m(r).e("list"))},[pe(d.$slots,"sub-link")],2)):ge("v-if",!0)],2))}});var XD=We(Whe,[["__file","anchor-link.vue"]]);const Ghe=Dt(jhe,{AnchorLink:XD}),qhe=Gn(XD),QD={label:"label",value:"value",disabled:"disabled"},Yhe=Ke({direction:{type:de(String),default:"horizontal"},options:{type:de(Array),default:()=>[]},modelValue:{type:[String,Number,Boolean],default:void 0},props:{type:de(Object),default:()=>QD},block:Boolean,size:fr,disabled:Boolean,validateEvent:{type:Boolean,default:!0},id:String,name:String,...$r(["ariaLabel"])}),Xhe={[_t]:t=>ut(t)||vt(t)||wn(t),[Xt]:t=>ut(t)||vt(t)||wn(t)},Qhe=se({name:"ElSegmented"}),Zhe=se({...Qhe,props:Yhe,emits:Xhe,setup(t,{emit:e}){const n=t,r=Oe("segmented"),s=Or(),i=ur(),o=Hr(),{formItem:a}=Ur(),{inputId:u,isLabeledByFormItem:l}=ci(n,{formItemContext:a}),c=H(null),d=Ez(),f=fn({isInit:!1,width:0,height:0,translateX:0,translateY:0,focusVisible:!1}),h=_=>{const O=g(_);e(_t,O),e(Xt,O)},p=L(()=>({...QD,...n.props})),g=_=>Bt(_)?_[p.value.value]:_,v=_=>Bt(_)?_[p.value.label]:_,y=_=>!!(o.value||Bt(_)&&_[p.value.disabled]),w=_=>n.modelValue===g(_),b=_=>n.options.find(O=>g(O)===_),S=_=>[r.e("item"),r.is("selected",w(_)),r.is("disabled",y(_))],E=()=>{if(!c.value)return;const _=c.value.querySelector(".is-selected"),O=c.value.querySelector(".is-selected input");if(!_||!O){f.width=0,f.height=0,f.translateX=0,f.translateY=0,f.focusVisible=!1;return}const P=_.getBoundingClientRect();f.isInit=!0,n.direction==="vertical"?(f.height=P.height,f.translateY=_.offsetTop):(f.width=P.width,f.translateX=_.offsetLeft);try{f.focusVisible=O.matches(":focus-visible")}catch{}},x=L(()=>[r.b(),r.m(i.value),r.is("block",n.block)]),k=L(()=>({width:n.direction==="vertical"?"100%":`${f.width}px`,height:n.direction==="vertical"?`${f.height}px`:"100%",transform:n.direction==="vertical"?`translateY(${f.translateY}px)`:`translateX(${f.translateX}px)`,display:f.isInit?"block":"none"})),A=L(()=>[r.e("item-selected"),r.is("disabled",y(b(n.modelValue))),r.is("focus-visible",f.focusVisible)]),C=L(()=>n.name||s.value);return zn(c,E),Ie(d,E),Ie(()=>n.modelValue,()=>{var _;E(),n.validateEvent&&((_=a==null?void 0:a.validate)==null||_.call(a,"change").catch(O=>void 0))},{flush:"post"}),(_,O)=>_.options.length?($(),Y("div",{key:0,id:m(u),ref_key:"segmentedRef",ref:c,class:F(m(x)),role:"radiogroup","aria-label":m(l)?void 0:_.ariaLabel||"segmented","aria-labelledby":m(l)?m(a).labelId:void 0},[J("div",{class:F([m(r).e("group"),m(r).m(n.direction)])},[J("div",{style:mt(m(k)),class:F(m(A))},null,6),($(!0),Y(dt,null,Zt(_.options,(P,U)=>($(),Y("label",{key:U,class:F(S(P))},[J("input",{class:F(m(r).e("item-input")),type:"radio",name:m(C),disabled:y(P),checked:w(P),onChange:j=>h(P)},null,42,["name","disabled","checked","onChange"]),J("div",{class:F(m(r).e("item-label"))},[pe(_.$slots,"default",{item:P},()=>[Qt(ze(v(P)),1)])],2)],2))),128))],2)],10,["id","aria-label","aria-labelledby"])):ge("v-if",!0)}});var Jhe=We(Zhe,[["__file","segmented.vue"]]);const epe=Dt(Jhe),tpe=(t,e)=>{const n=t.toLowerCase();return(e.label||e.value).toLowerCase().includes(n)},npe=(t,e,n)=>{const{selectionEnd:r}=t;if(r===null)return;const s=t.value,i=Zr(e);let o=-1,a;for(let u=r-1;u>=0;--u){const l=s[u];if(l===n||l===`
`||l==="\r"){o=u;continue}if(i.includes(l)){const c=o===-1?r:o;a={pattern:s.slice(u+1,c),start:u+1,end:c,prefix:l,prefixIndex:u,splitIndex:o,selectionEnd:r};break}}return a},rpe=(t,e={debug:!1,useSelectionEnd:!1})=>{const n=t.selectionStart!==null?t.selectionStart:0,r=t.selectionEnd!==null?t.selectionEnd:0,s=e.useSelectionEnd?r:n,i=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];if(e.debug){const f=document.querySelector("#input-textarea-caret-position-mirror-div");f!=null&&f.parentNode&&f.parentNode.removeChild(f)}const o=document.createElement("div");o.id="input-textarea-caret-position-mirror-div",document.body.appendChild(o);const a=o.style,u=window.getComputedStyle(t),l=t.nodeName==="INPUT";a.whiteSpace=l?"nowrap":"pre-wrap",l||(a.wordWrap="break-word"),a.position="absolute",e.debug||(a.visibility="hidden"),i.forEach(f=>{if(l&&f==="lineHeight")if(u.boxSizing==="border-box"){const h=Number.parseInt(u.height),p=Number.parseInt(u.paddingTop)+Number.parseInt(u.paddingBottom)+Number.parseInt(u.borderTopWidth)+Number.parseInt(u.borderBottomWidth),g=p+Number.parseInt(u.lineHeight);h>g?a.lineHeight=`${h-p}px`:h===g?a.lineHeight=u.lineHeight:a.lineHeight="0"}else a.lineHeight=u.height;else a[f]=u[f]}),Bm()?t.scrollHeight>Number.parseInt(u.height)&&(a.overflowY="scroll"):a.overflow="hidden",o.textContent=t.value.slice(0,Math.max(0,s)),l&&o.textContent&&(o.textContent=o.textContent.replace(/\s/g,""));const c=document.createElement("span");c.textContent=t.value.slice(Math.max(0,s))||".",c.style.position="relative",c.style.left=`${-t.scrollLeft}px`,c.style.top=`${-t.scrollTop}px`,o.appendChild(c);const d={top:c.offsetTop+Number.parseInt(u.borderTopWidth),left:c.offsetLeft+Number.parseInt(u.borderLeftWidth),height:Number.parseInt(u.fontSize)*1.5};return e.debug?c.style.backgroundColor="#aaa":document.body.removeChild(o),d.left>=t.clientWidth&&(d.left=t.clientWidth),d},spe=Ke({...s1,options:{type:de(Array),default:()=>[]},prefix:{type:de([String,Array]),default:"@",validator:t=>ut(t)?t.length===1:t.every(e=>ut(e)&&e.length===1)},split:{type:String,default:" ",validator:t=>t.length===1},filterOption:{type:de([Boolean,Function]),default:()=>tpe,validator:t=>t===!1?!0:pt(t)},placement:{type:de(String),default:"bottom"},showArrow:Boolean,offset:{type:Number,default:0},whole:Boolean,checkIsWhole:{type:de(Function)},modelValue:String,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:de(Object),default:()=>({})}}),ipe={[_t]:t=>ut(t),input:t=>ut(t),search:(t,e)=>ut(t)&&ut(e),select:(t,e)=>ut(t.value)&&ut(e),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent},ope=Ke({options:{type:de(Array),default:()=>[]},loading:Boolean,disabled:Boolean,contentId:String,ariaLabel:String}),ape={select:t=>ut(t.value)},lpe=se({name:"ElMentionDropdown"}),upe=se({...lpe,props:ope,emits:ape,setup(t,{expose:e,emit:n}){const r=t,s=Oe("mention"),{t:i}=sn(),o=H(-1),a=H(),u=H(),l=H(),c=(b,S)=>[s.be("dropdown","item"),s.is("hovering",o.value===S),s.is("disabled",b.disabled||r.disabled)],d=b=>{b.disabled||r.disabled||n("select",b)},f=b=>{o.value=b},h=L(()=>r.disabled||r.options.every(b=>b.disabled)),p=L(()=>r.options[o.value]),g=()=>{p.value&&n("select",p.value)},v=b=>{const{options:S}=r;if(S.length===0||h.value)return;b==="next"?(o.value++,o.value===S.length&&(o.value=0)):b==="prev"&&(o.value--,o.value<0&&(o.value=S.length-1));const E=S[o.value];if(E.disabled){v(b);return}ft(()=>y(E))},y=b=>{var S,E,x,k;const{options:A}=r,C=A.findIndex(O=>O.value===b.value),_=(S=u.value)==null?void 0:S[C];if(_){const O=(x=(E=l.value)==null?void 0:E.querySelector)==null?void 0:x.call(E,`.${s.be("dropdown","wrap")}`);O&&n1(O,_)}(k=a.value)==null||k.handleScroll()};return Ie(()=>r.options,()=>{h.value||r.options.length===0?o.value=-1:o.value=0},{immediate:!0}),e({hoveringIndex:o,navigateOptions:v,selectHoverOption:g,hoverOption:p}),(b,S)=>($(),Y("div",{ref_key:"dropdownRef",ref:l,class:F(m(s).b("dropdown"))},[b.$slots.header?($(),Y("div",{key:0,class:F(m(s).be("dropdown","header"))},[pe(b.$slots,"header")],2)):ge("v-if",!0),Ot(ie(m(io),{id:b.contentId,ref_key:"scrollbarRef",ref:a,tag:"ul","wrap-class":m(s).be("dropdown","wrap"),"view-class":m(s).be("dropdown","list"),role:"listbox","aria-label":b.ariaLabel,"aria-orientation":"vertical"},{default:le(()=>[($(!0),Y(dt,null,Zt(b.options,(E,x)=>($(),Y("li",{id:`${b.contentId}-${x}`,ref_for:!0,ref_key:"optionRefs",ref:u,key:x,class:F(c(E,x)),role:"option","aria-disabled":E.disabled||b.disabled||void 0,"aria-selected":o.value===x,onMousemove:k=>f(x),onClick:wt(k=>d(E),["stop"])},[pe(b.$slots,"label",{item:E,index:x},()=>{var k;return[J("span",null,ze((k=E.label)!=null?k:E.value),1)]})],42,["id","aria-disabled","aria-selected","onMousemove","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class","aria-label"]),[[cn,b.options.length>0&&!b.loading]]),b.loading?($(),Y("div",{key:1,class:F(m(s).be("dropdown","loading"))},[pe(b.$slots,"loading",{},()=>[Qt(ze(m(i)("el.mention.loading")),1)])],2)):ge("v-if",!0),b.$slots.footer?($(),Y("div",{key:2,class:F(m(s).be("dropdown","footer"))},[pe(b.$slots,"footer")],2)):ge("v-if",!0)],2))}});var cpe=We(upe,[["__file","mention-dropdown.vue"]]);const dpe=se({name:"ElMention",inheritAttrs:!1}),fpe=se({...dpe,props:spe,emits:ipe,setup(t,{expose:e,emit:n}){const r=t,s=L(()=>vi(r,Object.keys(s1))),i=Oe("mention"),o=Hr(),a=Or(),u=H(),l=H(),c=H(),d=H(!1),f=H(),h=H(),p=L(()=>r.showArrow?r.placement:`${r.placement}-start`),g=L(()=>r.showArrow?["bottom","top"]:["bottom-start","top-start"]),v=L(()=>{const{filterOption:P,options:U}=r;return!h.value||!P?U:U.filter(j=>P(h.value.pattern,j))}),y=L(()=>d.value&&(!!v.value.length||r.loading)),w=L(()=>{var P;return`${a.value}-${(P=c.value)==null?void 0:P.hoveringIndex}`}),b=P=>{n(_t,P),n(dr,P),C()},S=P=>{var U,j,N,R;if(!(!("code"in P)||(U=u.value)!=null&&U.isComposing))switch(P.code){case it.left:case it.right:C();break;case it.up:case it.down:if(!d.value)return;P.preventDefault(),(j=c.value)==null||j.navigateOptions(P.code===it.up?"prev":"next");break;case it.enter:case it.numpadEnter:if(!d.value)return;P.preventDefault(),(N=c.value)!=null&&N.hoverOption?(R=c.value)==null||R.selectHoverOption():d.value=!1;break;case it.esc:if(!d.value)return;P.preventDefault(),d.value=!1;break;case it.backspace:if(r.whole&&h.value){const{splitIndex:V,selectionEnd:D,pattern:M,prefixIndex:K,prefix:q}=h.value,ee=A();if(!ee)return;const X=ee.value,te=r.options.find(he=>he.value===M);if((pt(r.checkIsWhole)?r.checkIsWhole(M,q):te)&&V!==-1&&V+1===D){P.preventDefault();const he=X.slice(0,K)+X.slice(V+1);n(_t,he),n(dr,he);const Z=K;ft(()=>{ee.selectionStart=Z,ee.selectionEnd=Z,O()})}}}},{wrapperRef:E}=Pa(u,{beforeFocus(){return o.value},afterFocus(){C()},beforeBlur(P){var U;return(U=l.value)==null?void 0:U.isFocusInsideContent(P)},afterBlur(){d.value=!1}}),x=()=>{C()},k=P=>{if(!h.value)return;const U=A();if(!U)return;const j=U.value,{split:N}=r,R=j.slice(h.value.end),V=R.startsWith(N),D=`${P.value}${V?"":N}`,M=j.slice(0,h.value.start)+D+R;n(_t,M),n(dr,M),n("select",P,h.value.prefix);const K=h.value.start+D.length+(V?1:0);ft(()=>{U.selectionStart=K,U.selectionEnd=K,U.focus(),O()})},A=()=>{var P,U;return r.type==="textarea"?(P=u.value)==null?void 0:P.textarea:(U=u.value)==null?void 0:U.input},C=()=>{setTimeout(()=>{_(),O(),ft(()=>{var P;return(P=l.value)==null?void 0:P.updatePopper()})},0)},_=()=>{const P=A();if(!P)return;const U=rpe(P),j=P.getBoundingClientRect(),N=u.value.$el.getBoundingClientRect();f.value={position:"absolute",width:0,height:`${U.height}px`,left:`${U.left+j.left-N.left}px`,top:`${U.top+j.top-N.top}px`}},O=()=>{const P=A();if(document.activeElement!==P){d.value=!1;return}const{prefix:U,split:j}=r;if(h.value=npe(P,U,j),h.value&&h.value.splitIndex===-1){d.value=!0,n("search",h.value.pattern,h.value.prefix);return}d.value=!1};return e({input:u,tooltip:l,dropdownVisible:y}),(P,U)=>($(),Y("div",{ref_key:"wrapperRef",ref:E,class:F(m(i).b())},[ie(m(es),Yt(Yt(m(s),P.$attrs),{ref_key:"elInputRef",ref:u,"model-value":P.modelValue,disabled:m(o),role:m(y)?"combobox":void 0,"aria-activedescendant":m(y)?m(w)||"":void 0,"aria-controls":m(y)?m(a):void 0,"aria-expanded":m(y)||void 0,"aria-label":P.ariaLabel,"aria-autocomplete":m(y)?"none":void 0,"aria-haspopup":m(y)?"listbox":void 0,onInput:b,onKeydown:S,onMousedown:x}),ks({_:2},[Zt(P.$slots,(j,N)=>({name:N,fn:le(R=>[pe(P.$slots,N,Ms(Qi(R)))])}))]),1040,["model-value","disabled","role","aria-activedescendant","aria-controls","aria-expanded","aria-label","aria-autocomplete","aria-haspopup"]),ie(m(Vr),{ref_key:"tooltipRef",ref:l,visible:m(y),"popper-class":[m(i).e("popper"),P.popperClass],"popper-options":P.popperOptions,placement:m(p),"fallback-placements":m(g),effect:"light",pure:"",offset:P.offset,"show-arrow":P.showArrow},{default:le(()=>[J("div",{style:mt(f.value)},null,4)]),content:le(()=>{var j;return[ie(cpe,{ref_key:"dropdownRef",ref:c,options:m(v),disabled:m(o),loading:P.loading,"content-id":m(a),"aria-label":P.ariaLabel,onSelect:k,onClick:wt((j=u.value)==null?void 0:j.focus,["stop"])},ks({_:2},[Zt(P.$slots,(N,R)=>({name:R,fn:le(V=>[pe(P.$slots,R,Ms(Qi(V)))])}))]),1032,["options","disabled","loading","content-id","aria-label","onClick"])]}),_:3},8,["visible","popper-class","popper-options","placement","fallback-placements","offset","show-arrow"])],2))}});var hpe=We(fpe,[["__file","mention.vue"]]);const ppe=Dt(hpe);var mpe=[sW,mW,aY,Que,hY,SY,GR,PY,DY,Cr,eL,_X,PX,YX,XX,XQ,SL,nZ,li,cQ,dL,aZ,TZ,CZ,Km,QZ,eJ,fJ,hJ,pJ,mJ,gJ,Hee,Zee,Jee,dte,GL,wte,cne,dne,fne,nP,dre,fre,lt,xre,iP,es,oP,Fre,Kre,use,cse,dse,fse,yse,uie,mie,Tie,jR,mP,yL,xQ,EQ,Oie,Bie,Wie,io,gl,Vp,jse,Toe,Doe,Ooe,Joe,sae,AP,mae,Tae,Cae,Lae,Ule,Hle,Xue,fce,hce,Iu,nS,aee,xce,Ace,Ice,Vr,Nde,Xde,Zp,mfe,Pfe,the,dhe,Mhe,Nhe,Ghe,qhe,epe,ppe];const Qs="ElInfiniteScroll",gpe=50,vpe=200,ype=0,bpe={delay:{type:Number,default:vpe},distance:{type:Number,default:ype},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},yS=(t,e)=>Object.entries(bpe).reduce((n,[r,s])=>{var i,o;const{type:a,default:u}=s,l=t.getAttribute(`infinite-scroll-${r}`);let c=(o=(i=e[l])!=null?i:l)!=null?o:u;return c=c==="false"?!1:c,c=a(c),n[r]=Number.isNaN(c)?u:c,n},{}),ZD=t=>{const{observer:e}=t[Qs];e&&(e.disconnect(),delete t[Qs].observer)},Spe=(t,e)=>{const{container:n,containerEl:r,instance:s,observer:i,lastScrollTop:o}=t[Qs],{disabled:a,distance:u}=yS(t,s),{clientHeight:l,scrollHeight:c,scrollTop:d}=r,f=d-o;if(t[Qs].lastScrollTop=d,i||a||f<0)return;let h=!1;if(n===t)h=c-(l+d)<=u;else{const{clientTop:p,scrollHeight:g}=t,v=W0(t,r);h=d+l>=v+p+g-u}h&&e.call(s)};function Uv(t,e){const{containerEl:n,instance:r}=t[Qs],{disabled:s}=yS(t,r);s||n.clientHeight===0||(n.scrollHeight<=n.clientHeight?e.call(r):ZD(t))}const wpe={async mounted(t,e){const{instance:n,value:r}=e;pt(r)||lr(Qs,"'v-infinite-scroll' binding value must be a function"),await ft();const{delay:s,immediate:i}=yS(t,n),o=t1(t,!0),a=o===window?document.documentElement:o,u=sl(Spe.bind(null,t,r),s);if(o){if(t[Qs]={instance:n,container:o,containerEl:a,delay:s,cb:r,onScroll:u,lastScrollTop:a.scrollTop},i){const l=new MutationObserver(sl(Uv.bind(null,t,r),gpe));t[Qs].observer=l,l.observe(t,{childList:!0,subtree:!0}),Uv(t,r)}o.addEventListener("scroll",u)}},unmounted(t){if(!t[Qs])return;const{container:e,onScroll:n}=t[Qs];e==null||e.removeEventListener("scroll",n),ZD(t)},async updated(t){if(!t[Qs])await ft();else{const{containerEl:e,cb:n,observer:r}=t[Qs];e.clientHeight&&r&&Uv(t,n)}}},Dy=wpe;Dy.install=t=>{t.directive("InfiniteScroll",Dy)};const Epe=Dy;function xpe(t,e){let n;const r=H(!1),s=fn({...t,originalPosition:"",originalOverflow:"",visible:!1});function i(h){s.text=h}function o(){const h=s.parent,p=f.ns;if(!h.vLoadingAddClassList){let g=h.getAttribute("loading-number");g=Number.parseInt(g)-1,g?h.setAttribute("loading-number",g.toString()):(ts(h,p.bm("parent","relative")),h.removeAttribute("loading-number")),ts(h,p.bm("parent","hidden"))}a(),d.unmount()}function a(){var h,p;(p=(h=f.$el)==null?void 0:h.parentNode)==null||p.removeChild(f.$el)}function u(){var h;t.beforeClose&&!t.beforeClose()||(r.value=!0,clearTimeout(n),n=setTimeout(l,400),s.visible=!1,(h=t.closed)==null||h.call(t))}function l(){if(!r.value)return;const h=s.parent;r.value=!1,h.vLoadingAddClassList=void 0,o()}const d=Y_(se({name:"ElLoading",setup(h,{expose:p}){const{ns:g,zIndex:v}=Nm("loading");return p({ns:g,zIndex:v}),()=>{const y=s.spinner||s.svg,w=bt("svg",{class:"circular",viewBox:s.svgViewBox?s.svgViewBox:"0 0 50 50",...y?{innerHTML:y}:{}},[bt("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),b=s.text?bt("p",{class:g.b("text")},[s.text]):void 0;return bt(Ar,{name:g.b("fade"),onAfterLeave:l},{default:le(()=>[Ot(ie("div",{style:{backgroundColor:s.background||""},class:[g.b("mask"),s.customClass,s.fullscreen?"is-fullscreen":""]},[bt("div",{class:g.b("spinner")},[w,b])]),[[cn,s.visible]])])})}}}));Object.assign(d._context,e??{});const f=d.mount(document.createElement("div"));return{..._r(s),setText:i,removeElLoadingChild:a,close:u,handleAfterLeave:l,vm:f,get $el(){return f.$el}}}let dh;const fu=function(t={}){if(!on)return;const e=Tpe(t);if(e.fullscreen&&dh)return dh;const n=xpe({...e,closed:()=>{var s;(s=e.closed)==null||s.call(e),e.fullscreen&&(dh=void 0)}},fu._context);Cpe(e,e.parent,n),Sk(e,e.parent,n),e.parent.vLoadingAddClassList=()=>Sk(e,e.parent,n);let r=e.parent.getAttribute("loading-number");return r?r=`${Number.parseInt(r)+1}`:r="1",e.parent.setAttribute("loading-number",r),e.parent.appendChild(n.$el),ft(()=>n.visible.value=e.visible),e.fullscreen&&(dh=n),n},Tpe=t=>{var e,n,r,s;let i;return ut(t.target)?i=(e=document.querySelector(t.target))!=null?e:document.body:i=t.target||document.body,{parent:i===document.body||t.body?document.body:i,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:i===document.body&&((n=t.fullscreen)!=null?n:!0),lock:(r=t.lock)!=null?r:!1,customClass:t.customClass||"",visible:(s=t.visible)!=null?s:!0,beforeClose:t.beforeClose,closed:t.closed,target:i}},Cpe=async(t,e,n)=>{const{nextZIndex:r}=n.vm.zIndex||n.vm._.exposed.zIndex,s={};if(t.fullscreen)n.originalPosition.value=xo(document.body,"position"),n.originalOverflow.value=xo(document.body,"overflow"),s.zIndex=r();else if(t.parent===document.body){n.originalPosition.value=xo(document.body,"position"),await ft();for(const i of["top","left"]){const o=i==="top"?"scrollTop":"scrollLeft";s[i]=`${t.target.getBoundingClientRect()[i]+document.body[o]+document.documentElement[o]-Number.parseInt(xo(document.body,`margin-${i}`),10)}px`}for(const i of["height","width"])s[i]=`${t.target.getBoundingClientRect()[i]}px`}else n.originalPosition.value=xo(e,"position");for(const[i,o]of Object.entries(s))n.$el.style[i]=o},Sk=(t,e,n)=>{const r=n.vm.ns||n.vm._.exposed.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?ts(e,r.bm("parent","relative")):Js(e,r.bm("parent","relative")),t.fullscreen&&t.lock?Js(e,r.bm("parent","hidden")):ts(e,r.bm("parent","hidden"))};fu._context=null;const Jh=Symbol("ElLoading"),wk=(t,e)=>{var n,r,s,i;const o=e.instance,a=h=>Bt(e.value)?e.value[h]:void 0,u=h=>{const p=ut(h)&&(o==null?void 0:o[h])||h;return p&&H(p)},l=h=>u(a(h)||t.getAttribute(`element-loading-${$o(h)}`)),c=(n=a("fullscreen"))!=null?n:e.modifiers.fullscreen,d={text:l("text"),svg:l("svg"),svgViewBox:l("svgViewBox"),spinner:l("spinner"),background:l("background"),customClass:l("customClass"),fullscreen:c,target:(r=a("target"))!=null?r:c?void 0:t,body:(s=a("body"))!=null?s:e.modifiers.body,lock:(i=a("lock"))!=null?i:e.modifiers.lock},f=fu(d);f._context=Qc._context,t[Jh]={options:d,instance:f}},kpe=(t,e)=>{for(const n of Object.keys(e))Dn(e[n])&&(e[n].value=t[n])},Qc={mounted(t,e){e.value&&wk(t,e)},updated(t,e){const n=t[Jh];e.oldValue!==e.value&&(e.value&&!e.oldValue?wk(t,e):e.value&&e.oldValue?Bt(e.value)&&kpe(e.value,n.options):n==null||n.instance.close())},unmounted(t){var e;(e=t[Jh])==null||e.instance.close(),t[Jh]=null}};Qc._context=null;const _pe={install(t){fu._context=t._context,Qc._context=t._context,t.directive("loading",Qc),t.config.globalProperties.$loading=fu},directive:Qc,service:fu},JD=["primary","success","info","warning","error"],is=Wn({customClass:"",dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:on?document.body:void 0}),Ape=Ke({customClass:{type:String,default:is.customClass},dangerouslyUseHTMLString:{type:Boolean,default:is.dangerouslyUseHTMLString},duration:{type:Number,default:is.duration},icon:{type:Tn,default:is.icon},id:{type:String,default:is.id},message:{type:de([String,Object,Function]),default:is.message},onClose:{type:de(Function),default:is.onClose},showClose:{type:Boolean,default:is.showClose},type:{type:String,values:JD,default:is.type},plain:{type:Boolean,default:is.plain},offset:{type:Number,default:is.offset},zIndex:{type:Number,default:is.zIndex},grouping:{type:Boolean,default:is.grouping},repeatNum:{type:Number,default:is.repeatNum}}),Ipe={destroy:()=>!0},yi=Ky([]),Rpe=t=>{const e=yi.findIndex(s=>s.id===t),n=yi[e];let r;return e>0&&(r=yi[e-1]),{current:n,prev:r}},Lpe=t=>{const{prev:e}=Rpe(t);return e?e.vm.exposed.bottom.value:0},Ppe=(t,e)=>yi.findIndex(r=>r.id===t)>0?16:e,Dpe=se({name:"ElMessage"}),Ope=se({...Dpe,props:Ape,emits:Ipe,setup(t,{expose:e,emit:n}){const r=t,{Close:s}=r1,i=H(!1),{ns:o,zIndex:a}=Nm("message"),{currentZIndex:u,nextZIndex:l}=a,c=H(),d=H(!1),f=H(0);let h;const p=L(()=>r.type?r.type==="error"?"danger":r.type:"info"),g=L(()=>{const C=r.type;return{[o.bm("icon",C)]:C&&_a[C]}}),v=L(()=>r.icon||_a[r.type]||""),y=L(()=>Lpe(r.id)),w=L(()=>Ppe(r.id,r.offset)+y.value),b=L(()=>f.value+w.value),S=L(()=>({top:`${w.value}px`,zIndex:u.value}));function E(){r.duration!==0&&({stop:h}=pl(()=>{k()},r.duration))}function x(){h==null||h()}function k(){d.value=!1,ft(()=>{var C;i.value||((C=r.onClose)==null||C.call(r),n("destroy"))})}function A({code:C}){C===it.esc&&k()}return Ft(()=>{E(),l(),d.value=!0}),Ie(()=>r.repeatNum,()=>{x(),E()}),Cn(document,"keydown",A),zn(c,()=>{f.value=c.value.getBoundingClientRect().height}),e({visible:d,bottom:b,close:k}),(C,_)=>($(),ye(Ar,{name:m(o).b("fade"),onBeforeEnter:O=>i.value=!0,onBeforeLeave:C.onClose,onAfterLeave:O=>C.$emit("destroy"),persisted:""},{default:le(()=>[Ot(J("div",{id:C.id,ref_key:"messageRef",ref:c,class:F([m(o).b(),{[m(o).m(C.type)]:C.type},m(o).is("closable",C.showClose),m(o).is("plain",C.plain),C.customClass]),style:mt(m(S)),role:"alert",onMouseenter:x,onMouseleave:E},[C.repeatNum>1?($(),ye(m(GR),{key:0,value:C.repeatNum,type:m(p),class:F(m(o).e("badge"))},null,8,["value","type","class"])):ge("v-if",!0),m(v)?($(),ye(m(lt),{key:1,class:F([m(o).e("icon"),m(g)])},{default:le(()=>[($(),ye(jt(m(v))))]),_:1},8,["class"])):ge("v-if",!0),pe(C.$slots,"default",{},()=>[C.dangerouslyUseHTMLString?($(),Y(dt,{key:1},[ge(" Caution here, message could've been compromised, never use user's input as message "),J("p",{class:F(m(o).e("content")),innerHTML:C.message},null,10,["innerHTML"])],2112)):($(),Y("p",{key:0,class:F(m(o).e("content"))},ze(C.message),3))]),C.showClose?($(),ye(m(lt),{key:2,class:F(m(o).e("closeBtn")),onClick:wt(k,["stop"])},{default:le(()=>[ie(m(s))]),_:1},8,["class","onClick"])):ge("v-if",!0)],46,["id"]),[[cn,d.value]])]),_:3},8,["name","onBeforeEnter","onBeforeLeave","onAfterLeave"]))}});var $pe=We(Ope,[["__file","message.vue"]]);let Mpe=1;const eO=t=>{const e=!t||ut(t)||$n(t)||pt(t)?{message:t}:t,n={...is,...e};if(!n.appendTo)n.appendTo=document.body;else if(ut(n.appendTo)){let r=document.querySelector(n.appendTo);ds(r)||(r=document.body),n.appendTo=r}return wn(Ds.grouping)&&!n.grouping&&(n.grouping=Ds.grouping),vt(Ds.duration)&&n.duration===3e3&&(n.duration=Ds.duration),vt(Ds.offset)&&n.offset===16&&(n.offset=Ds.offset),wn(Ds.showClose)&&!n.showClose&&(n.showClose=Ds.showClose),wn(Ds.plain)&&!n.plain&&(n.plain=Ds.plain),n},Npe=t=>{const e=yi.indexOf(t);if(e===-1)return;yi.splice(e,1);const{handler:n}=t;n.close()},Fpe=({appendTo:t,...e},n)=>{const r=`message_${Mpe++}`,s=e.onClose,i=document.createElement("div"),o={...e,id:r,onClose:()=>{s==null||s(),Npe(c)},onDestroy:()=>{ba(null,i)}},a=ie($pe,o,pt(o.message)||$n(o.message)?{default:pt(o.message)?o.message:()=>o.message}:null);a.appContext=n||Nu._context,ba(a,i),t.appendChild(i.firstElementChild);const u=a.component,c={id:r,vnode:a,vm:u,handler:{close:()=>{u.exposed.close()}},props:a.component.props};return c},Nu=(t={},e)=>{if(!on)return{close:()=>{}};const n=eO(t);if(n.grouping&&yi.length){const s=yi.find(({vnode:i})=>{var o;return((o=i.props)==null?void 0:o.message)===n.message});if(s)return s.props.repeatNum+=1,s.props.type=n.type,s.handler}if(vt(Ds.max)&&yi.length>=Ds.max)return{close:()=>{}};const r=Fpe(n,e);return yi.push(r),r.handler};JD.forEach(t=>{Nu[t]=(e={},n)=>{const r=eO(e);return Nu({...r,type:t},n)}});function Bpe(t){const e=[...yi];for(const n of e)(!t||t===n.props.type)&&n.handler.close()}Nu.closeAll=Bpe;Nu._context=null;const Vpe=gR(Nu,"$message"),Oy="_trap-focus-children",el=[],Ek=t=>{if(el.length===0)return;const e=el[el.length-1][Oy];if(e.length>0&&t.code===it.tab){if(e.length===1){t.preventDefault(),document.activeElement!==e[0]&&e[0].focus();return}const n=t.shiftKey,r=t.target===e[0],s=t.target===e[e.length-1];r&&n&&(t.preventDefault(),e[e.length-1].focus()),s&&!n&&(t.preventDefault(),e[0].focus())}},Upe={beforeMount(t){t[Oy]=kT(t),el.push(t),el.length<=1&&document.addEventListener("keydown",Ek)},updated(t){ft(()=>{t[Oy]=kT(t)})},unmounted(){el.shift(),el.length===0&&document.removeEventListener("keydown",Ek)}},Hpe=se({name:"ElMessageBox",directives:{TrapFocus:Upe},components:{ElButton:Cr,ElFocusTrap:Yu,ElInput:es,ElOverlay:D1,ElIcon:lt,...r1},inheritAttrs:!1,props:{buttonSize:{type:String,validator:RP},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(t,{emit:e}){const{locale:n,zIndex:r,ns:s,size:i}=Nm("message-box",L(()=>t.buttonSize)),{t:o}=n,{nextZIndex:a}=r,u=H(!1),l=fn({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",closeIcon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:"",inputValidator:void 0,inputErrorMessage:"",message:"",modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:ko(Ji),cancelButtonLoadingIcon:ko(Ji),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:a()}),c=L(()=>{const R=l.type;return{[s.bm("icon",R)]:R&&_a[R]}}),d=Or(),f=Or(),h=L(()=>{const R=l.type;return l.icon||R&&_a[R]||""}),p=L(()=>!!l.message),g=H(),v=H(),y=H(),w=H(),b=H(),S=L(()=>l.confirmButtonClass);Ie(()=>l.inputValue,async R=>{await ft(),t.boxType==="prompt"&&R&&P()},{immediate:!0}),Ie(()=>u.value,R=>{var V,D;R&&(t.boxType!=="prompt"&&(l.autofocus?y.value=(D=(V=b.value)==null?void 0:V.$el)!=null?D:g.value:y.value=g.value),l.zIndex=a()),t.boxType==="prompt"&&(R?ft().then(()=>{var M;w.value&&w.value.$el&&(l.autofocus?y.value=(M=U())!=null?M:g.value:y.value=g.value)}):(l.editorErrorMessage="",l.validateError=!1))});const E=L(()=>t.draggable),x=L(()=>t.overflow);jL(g,v,E,x),Ft(async()=>{await ft(),t.closeOnHashChange&&window.addEventListener("hashchange",k)}),In(()=>{t.closeOnHashChange&&window.removeEventListener("hashchange",k)});function k(){u.value&&(u.value=!1,ft(()=>{l.action&&e("action",l.action)}))}const A=()=>{t.closeOnClickModal&&O(l.distinguishCancelAndClose?"close":"cancel")},C=P1(A),_=R=>{if(l.inputType!=="textarea")return R.preventDefault(),O("confirm")},O=R=>{var V;t.boxType==="prompt"&&R==="confirm"&&!P()||(l.action=R,l.beforeClose?(V=l.beforeClose)==null||V.call(l,R,l,k):k())},P=()=>{if(t.boxType==="prompt"){const R=l.inputPattern;if(R&&!R.test(l.inputValue||""))return l.editorErrorMessage=l.inputErrorMessage||o("el.messagebox.error"),l.validateError=!0,!1;const V=l.inputValidator;if(pt(V)){const D=V(l.inputValue);if(D===!1)return l.editorErrorMessage=l.inputErrorMessage||o("el.messagebox.error"),l.validateError=!0,!1;if(ut(D))return l.editorErrorMessage=D,l.validateError=!0,!1}}return l.editorErrorMessage="",l.validateError=!1,!0},U=()=>{var R,V;const D=(R=w.value)==null?void 0:R.$refs;return(V=D==null?void 0:D.input)!=null?V:D==null?void 0:D.textarea},j=()=>{O("close")},N=()=>{t.closeOnPressEscape&&j()};return t.lockScroll&&O1(u),{..._r(l),ns:s,overlayEvent:C,visible:u,hasMessage:p,typeClass:c,contentId:d,inputId:f,btnSize:i,iconComponent:h,confirmButtonClasses:S,rootRef:g,focusStartRef:y,headerRef:v,inputRef:w,confirmRef:b,doClose:k,handleClose:j,onCloseRequested:N,handleWrapperClick:A,handleInputEnter:_,handleAction:O,t:o}}});function jpe(t,e,n,r,s,i){const o=Mt("el-icon"),a=Mt("el-input"),u=Mt("el-button"),l=Mt("el-focus-trap"),c=Mt("el-overlay");return $(),ye(Ar,{name:"fade-in-linear",onAfterLeave:d=>t.$emit("vanish"),persisted:""},{default:le(()=>[Ot(ie(c,{"z-index":t.zIndex,"overlay-class":[t.ns.is("message-box"),t.modalClass],mask:t.modal},{default:le(()=>[J("div",{role:"dialog","aria-label":t.title,"aria-modal":"true","aria-describedby":t.showInput?void 0:t.contentId,class:F(`${t.ns.namespace.value}-overlay-message-box`),onClick:t.overlayEvent.onClick,onMousedown:t.overlayEvent.onMousedown,onMouseup:t.overlayEvent.onMouseup},[ie(l,{loop:"",trapped:t.visible,"focus-trap-el":t.rootRef,"focus-start-el":t.focusStartRef,onReleaseRequested:t.onCloseRequested},{default:le(()=>[J("div",{ref:"rootRef",class:F([t.ns.b(),t.customClass,t.ns.is("draggable",t.draggable),{[t.ns.m("center")]:t.center}]),style:mt(t.customStyle),tabindex:"-1",onClick:wt(()=>{},["stop"])},[t.title!==null&&t.title!==void 0?($(),Y("div",{key:0,ref:"headerRef",class:F([t.ns.e("header"),{"show-close":t.showClose}])},[J("div",{class:F(t.ns.e("title"))},[t.iconComponent&&t.center?($(),ye(o,{key:0,class:F([t.ns.e("status"),t.typeClass])},{default:le(()=>[($(),ye(jt(t.iconComponent)))]),_:1},8,["class"])):ge("v-if",!0),J("span",null,ze(t.title),1)],2),t.showClose?($(),Y("button",{key:0,type:"button",class:F(t.ns.e("headerbtn")),"aria-label":t.t("el.messagebox.close"),onClick:d=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel"),onKeydown:Sn(wt(d=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[ie(o,{class:F(t.ns.e("close"))},{default:le(()=>[($(),ye(jt(t.closeIcon||"close")))]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):ge("v-if",!0)],2)):ge("v-if",!0),J("div",{id:t.contentId,class:F(t.ns.e("content"))},[J("div",{class:F(t.ns.e("container"))},[t.iconComponent&&!t.center&&t.hasMessage?($(),ye(o,{key:0,class:F([t.ns.e("status"),t.typeClass])},{default:le(()=>[($(),ye(jt(t.iconComponent)))]),_:1},8,["class"])):ge("v-if",!0),t.hasMessage?($(),Y("div",{key:1,class:F(t.ns.e("message"))},[pe(t.$slots,"default",{},()=>[t.dangerouslyUseHTMLString?($(),ye(jt(t.showInput?"label":"p"),{key:1,for:t.showInput?t.inputId:void 0,innerHTML:t.message},null,8,["for","innerHTML"])):($(),ye(jt(t.showInput?"label":"p"),{key:0,for:t.showInput?t.inputId:void 0},{default:le(()=>[Qt(ze(t.dangerouslyUseHTMLString?"":t.message),1)]),_:1},8,["for"]))])],2)):ge("v-if",!0)],2),Ot(J("div",{class:F(t.ns.e("input"))},[ie(a,{id:t.inputId,ref:"inputRef",modelValue:t.inputValue,"onUpdate:modelValue":d=>t.inputValue=d,type:t.inputType,placeholder:t.inputPlaceholder,"aria-invalid":t.validateError,class:F({invalid:t.validateError}),onKeydown:Sn(t.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),J("div",{class:F(t.ns.e("errormsg")),style:mt({visibility:t.editorErrorMessage?"visible":"hidden"})},ze(t.editorErrorMessage),7)],2),[[cn,t.showInput]])],10,["id"]),J("div",{class:F(t.ns.e("btns"))},[t.showCancelButton?($(),ye(u,{key:0,loading:t.cancelButtonLoading,"loading-icon":t.cancelButtonLoadingIcon,class:F([t.cancelButtonClass]),round:t.roundButton,size:t.btnSize,onClick:d=>t.handleAction("cancel"),onKeydown:Sn(wt(d=>t.handleAction("cancel"),["prevent"]),["enter"])},{default:le(()=>[Qt(ze(t.cancelButtonText||t.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):ge("v-if",!0),Ot(ie(u,{ref:"confirmRef",type:"primary",loading:t.confirmButtonLoading,"loading-icon":t.confirmButtonLoadingIcon,class:F([t.confirmButtonClasses]),round:t.roundButton,disabled:t.confirmButtonDisabled,size:t.btnSize,onClick:d=>t.handleAction("confirm"),onKeydown:Sn(wt(d=>t.handleAction("confirm"),["prevent"]),["enter"])},{default:le(()=>[Qt(ze(t.confirmButtonText||t.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[cn,t.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[cn,t.visible]])]),_:3},8,["onAfterLeave"])}var Kpe=We(Hpe,[["render",jpe],["__file","index.vue"]]);const Fd=new Map,zpe=t=>{let e=document.body;return t.appendTo&&(ut(t.appendTo)&&(e=document.querySelector(t.appendTo)),ds(t.appendTo)&&(e=t.appendTo),ds(e)||(e=document.body)),e},Wpe=(t,e,n=null)=>{const r=ie(Kpe,t,pt(t.message)||$n(t.message)?{default:pt(t.message)?t.message:()=>t.message}:null);return r.appContext=n,ba(r,e),zpe(t).appendChild(e.firstElementChild),r.component},Gpe=()=>document.createElement("div"),qpe=(t,e)=>{const n=Gpe();t.onVanish=()=>{ba(null,n),Fd.delete(s)},t.onAction=i=>{const o=Fd.get(s);let a;t.showInput?a={value:s.inputValue,action:i}:a=i,t.callback?t.callback(a,r.proxy):i==="cancel"||i==="close"?t.distinguishCancelAndClose&&i!=="cancel"?o.reject("close"):o.reject("cancel"):o.resolve(a)};const r=Wpe(t,n,e),s=r.proxy;for(const i in t)hn(t,i)&&!hn(s.$props,i)&&(i==="closeIcon"&&Bt(t[i])?s[i]=ko(t[i]):s[i]=t[i]);return s.visible=!0,s};function ec(t,e=null){if(!on)return Promise.reject();let n;return ut(t)||$n(t)?t={message:t}:n=t.callback,new Promise((r,s)=>{const i=qpe(t,e??ec._context);Fd.set(i,{options:t,callback:n,resolve:r,reject:s})})}const Ype=["alert","confirm","prompt"],Xpe={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};Ype.forEach(t=>{ec[t]=Qpe(t)});function Qpe(t){return(e,n,r,s)=>{let i="";return Bt(n)?(r=n,i=""):an(n)?i="":i=n,ec(Object.assign({title:i,message:e,type:"",...Xpe[t]},r,{boxType:t}),s)}}ec.close=()=>{Fd.forEach((t,e)=>{e.doClose()}),Fd.clear()};ec._context=null;const ia=ec;ia.install=t=>{ia._context=t._context,t.config.globalProperties.$msgbox=ia,t.config.globalProperties.$messageBox=ia,t.config.globalProperties.$alert=ia.alert,t.config.globalProperties.$confirm=ia.confirm,t.config.globalProperties.$prompt=ia.prompt};const Zpe=ia,tO=["primary","success","info","warning","error"],Jpe=Ke({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:Tn},id:{type:String,default:""},message:{type:de([String,Object,Function]),default:""},offset:{type:Number,default:0},onClick:{type:de(Function),default:()=>{}},onClose:{type:de(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...tO,""],default:""},zIndex:Number,closeIcon:{type:Tn,default:si}}),eme={destroy:()=>!0},tme=se({name:"ElNotification"}),nme=se({...tme,props:Jpe,emits:eme,setup(t,{expose:e}){const n=t,{ns:r,zIndex:s}=Nm("notification"),{nextZIndex:i,currentZIndex:o}=s,a=H(!1);let u;const l=L(()=>{const w=n.type;return w&&_a[n.type]?r.m(w):""}),c=L(()=>n.type&&_a[n.type]||n.icon),d=L(()=>n.position.endsWith("right")?"right":"left"),f=L(()=>n.position.startsWith("top")?"top":"bottom"),h=L(()=>{var w;return{[f.value]:`${n.offset}px`,zIndex:(w=n.zIndex)!=null?w:o.value}});function p(){n.duration>0&&({stop:u}=pl(()=>{a.value&&v()},n.duration))}function g(){u==null||u()}function v(){a.value=!1}function y({code:w}){w===it.delete||w===it.backspace?g():w===it.esc?a.value&&v():p()}return Ft(()=>{p(),i(),a.value=!0}),Cn(document,"keydown",y),e({visible:a,close:v}),(w,b)=>($(),ye(Ar,{name:m(r).b("fade"),onBeforeLeave:w.onClose,onAfterLeave:S=>w.$emit("destroy"),persisted:""},{default:le(()=>[Ot(J("div",{id:w.id,class:F([m(r).b(),w.customClass,m(d)]),style:mt(m(h)),role:"alert",onMouseenter:g,onMouseleave:p,onClick:w.onClick},[m(c)?($(),ye(m(lt),{key:0,class:F([m(r).e("icon"),m(l)])},{default:le(()=>[($(),ye(jt(m(c))))]),_:1},8,["class"])):ge("v-if",!0),J("div",{class:F(m(r).e("group"))},[J("h2",{class:F(m(r).e("title")),textContent:ze(w.title)},null,10,["textContent"]),Ot(J("div",{class:F(m(r).e("content")),style:mt(w.title?void 0:{margin:0})},[pe(w.$slots,"default",{},()=>[w.dangerouslyUseHTMLString?($(),Y(dt,{key:1},[ge(" Caution here, message could've been compromised, never use user's input as message "),J("p",{innerHTML:w.message},null,8,["innerHTML"])],2112)):($(),Y("p",{key:0},ze(w.message),1))])],6),[[cn,w.message]]),w.showClose?($(),ye(m(lt),{key:0,class:F(m(r).e("closeBtn")),onClick:wt(v,["stop"])},{default:le(()=>[($(),ye(jt(w.closeIcon)))]),_:1},8,["class","onClick"])):ge("v-if",!0)],2)],46,["id","onClick"]),[[cn,a.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var rme=We(nme,[["__file","notification.vue"]]);const Jp={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},$y=16;let sme=1;const Fu=function(t={},e){if(!on)return{close:()=>{}};(ut(t)||$n(t))&&(t={message:t});const n=t.position||"top-right";let r=t.offset||0;Jp[n].forEach(({vm:c})=>{var d;r+=(((d=c.el)==null?void 0:d.offsetHeight)||0)+$y}),r+=$y;const s=`notification_${sme++}`,i=t.onClose,o={...t,offset:r,id:s,onClose:()=>{ime(s,n,i)}};let a=document.body;ds(t.appendTo)?a=t.appendTo:ut(t.appendTo)&&(a=document.querySelector(t.appendTo)),ds(a)||(a=document.body);const u=document.createElement("div"),l=ie(rme,o,pt(o.message)?o.message:$n(o.message)?()=>o.message:null);return l.appContext=an(e)?Fu._context:e,l.props.onDestroy=()=>{ba(null,u)},ba(l,u),Jp[n].push({vm:l}),a.appendChild(u.firstElementChild),{close:()=>{l.component.exposed.visible.value=!1}}};tO.forEach(t=>{Fu[t]=(e={},n)=>((ut(e)||$n(e))&&(e={message:e}),Fu({...e,type:t},n))});function ime(t,e,n){const r=Jp[e],s=r.findIndex(({vm:l})=>{var c;return((c=l.component)==null?void 0:c.props.id)===t});if(s===-1)return;const{vm:i}=r[s];if(!i)return;n==null||n(i);const o=i.el.offsetHeight,a=e.split("-")[0];r.splice(s,1);const u=r.length;if(!(u<1))for(let l=s;l<u;l++){const{el:c,component:d}=r[l].vm,f=Number.parseInt(c.style[a],10)-o-$y;d.props.offset=f}}function ome(){for(const t of Object.values(Jp))t.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})}Fu.closeAll=ome;Fu._context=null;const ame=gR(Fu,"$notify");var lme=[Epe,_pe,Vpe,Zpe,ame,pP],ume=qz([...mpe,...lme]);const bS=Y_(GM);bS.use(DU);bS.use(ume);bS.mount("#app")});export default cme();
